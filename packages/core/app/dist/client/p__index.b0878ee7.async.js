(self.webpackChunknocobase=self.webpackChunknocobase||[]).push([[8866],{57182:function(He,ae,e){"use strict";e.r(ae),e.d(ae,{app:function(){return R},default:function(){return E}});var Z=e(21143),c=e(15009),k=e.n(c),i=e(99289),g=e.n(i),C=e(12444),A=e.n(C),r=e(72004),K=e.n(r),v=e(31996),j=e.n(v),h=e(26037),M=e.n(h);function n($){var Q=Math.floor(Math.abs($)),z=Math.abs($%1*60),p=(Q<10?"0":"")+Q,b=(z<10?"0":"")+z,f=$>=0?"+":"-";return f+p+":"+b}var y=function(){var Q=new Date().getTimezoneOffset()/-60;return n(Q)};function L($){var Q=$.getPublicPath(),z="^".concat(Q,"apps/([^/]*)/"),p=location.pathname.match(new RegExp(z));return p?p[0]:Q}var o=function($){j()(z,$);var Q=M()(z);function z(){return A()(this,z),Q.apply(this,arguments)}return K()(z,[{key:"afterAdd",value:function(){var p=g()(k()().mark(function f(){return k()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return this.router.setType("browser"),this.router.setBasename(L(this.app)),this.app.apiClient.axios.interceptors.request.use(function(F){var I;return F.headers["X-Hostname"]=(I=window)===null||I===void 0||(I=I.location)===null||I===void 0?void 0:I.hostname,F.headers["X-Timezone"]=y(),F}),m.next=5,this.app.pm.add(Z.NocoBaseBuildInPlugin);case 5:case"end":return m.stop()}},f,this)}));function b(){return p.apply(this,arguments)}return b}()}]),z}(Z.Plugin);function a($){return Promise.resolve(null)}var R=new Z.Application({apiClient:{storageType:window.__nocobase_api_client_storage_type__||"localStorage",storagePrefix:window.__nocobase_api_client_storage_prefix__||"NOCOBASE_",baseURL:window.__nocobase_api_base_url__||"/api/"},publicPath:window.__nocobase_public_path__||"/",plugins:[o],ws:{url:window.__nocobase_ws_url__||void 0||"",basename:window.__nocobase_ws_path__||"/ws"},loadRemotePlugins:!0,devDynamicImport:a}),E=R.getRootComponent()},75667:function(He,ae,e){"use strict";e.d(ae,{Aj:function(){return N},Hh:function(){return l},Hq:function(){return S},Jn:function(){return H},R1:function(){return p},R3:function(){return a},TR:function(){return z},VV:function(){return $},Z5:function(){return R},a3:function(){return b},fG:function(){return Q},fJ:function(){return B},mE:function(){return O},mR:function(){return u},ov:function(){return d},tq:function(){return t},xd:function(){return x}});var Z=e(5574),c=e.n(Z),k=e(97857),i=e.n(k),g=e(75148),C=e(80844),A=e(96486),r=e.n(A),K=e(67294),v=e(12174),j=e(99501),h=e(63250),M=e(94804),n=e(44990),y=e(62954),L=e(68091),o=e(85893);g.BU;var a=(0,K.createContext)({});a.displayName="ACLContext";var R=function(V){return(0,o.jsx)(y.G0E,{components:{ACLCollectionFieldProvider:t,ACLActionProvider:O,ACLMenuItemProvider:B,ACLCollectionProvider:l},children:V.children})},E=function X(V){var U;return V!=null&&V.match?V.match:V&&X(V==null||(U=V.children)===null||U===void 0?void 0:U.props)},$=function(V){var U=(0,y.ngQ)(),D=U.setDesignable,ne=(0,j.r)(),q=ne.render,J=(0,v.LY)(),Y=(0,L.qD)(),P=(0,v.QT)({url:"roles:check"},{onSuccess:function(ie){var G,le,xe;if(ie!=null&&(G=ie.data)!==null&&G!==void 0&&G.snippets.includes("ui.*")||D(!1),(ie==null||(le=ie.data)===null||le===void 0?void 0:le.role)!==J.auth.role){var _e;J.auth.setRole(ie==null||(_e=ie.data)===null||_e===void 0?void 0:_e.role)}Y.pluginSettingsManager.setAclSnippets((ie==null||(xe=ie.data)===null||xe===void 0?void 0:xe.snippets)||[])}});return P.loading?q():(0,o.jsx)(a.Provider,{value:P,children:V.children})},Q=function(){var V=(0,K.useContext)(a),U=d(),D=U.allowAll;return function(){D||V.refresh()}},z=function(){return(0,K.useContext)(a)},p=(0,K.createContext)({});p.displayName="ACLActionParamsContext";var b=(0,K.createContext)({});b.displayName="ACLCustomContext";var f=function(){return(0,K.useContext)(b)},x=function(){var V,U,D,ne=(0,K.useContext)(a),q=(0,n.FC)(),J=(ne==null||(V=ne.data)===null||V===void 0?void 0:V.meta)||{},Y=J.dataSources,P=i()(i()({},ne==null||(U=ne.data)===null||U===void 0?void 0:U.data),(0,A.omit)(Y==null?void 0:Y[q],"snippets")),w=(0,K.useCallback)(function(ie){var G,le=ie.split(":").pop();return(P==null||(G=P.actionAlias)===null||G===void 0?void 0:G[le])||le},[P==null?void 0:P.actionAlias]);return{data:P,getActionAlias:w,inResources:(0,K.useCallback)(function(ie){var G,le;return P==null||(G=P.resources)===null||G===void 0||(le=G.includes)===null||le===void 0?void 0:le.call(G,ie)},[P==null?void 0:P.resources]),getResourceActionParams:(0,K.useCallback)(function(ie){var G,le,xe=ie.split(":"),_e=c()(xe,1),Ee=_e[0],ze=w(ie);return(P==null||(G=P.actions)===null||G===void 0?void 0:G["".concat(Ee,":").concat(ze)])||(P==null||(le=P.actions)===null||le===void 0?void 0:le[ie])},[P==null?void 0:P.actions,w]),getStrategyActionParams:(0,K.useCallback)(function(ie){var G,le=w(ie),xe=P==null||(G=P.strategy)===null||G===void 0||(G=G.actions)===null||G===void 0?void 0:G.find(function(_e){var Ee=_e.split(":"),ze=c()(Ee,1),Se=ze[0];return Se===le});return xe?{}:null},[P==null||(D=P.strategy)===null||D===void 0?void 0:D.actions,w])}},m=function(){var V,U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=U.schema,ne=U.recordPkValue,q=!1;return U.ignoreScope&&(q=!0),D!=null&&D["x-acl-ignore-scope"]&&(q=!0),D!=null&&(V=D["x-acl-action-props"])!==null&&V!==void 0&&V.skipScopeCheck&&(q=!0),ne||(q=!0),q},F=function(){var V,U,D=(0,h.u3)(),ne=(0,M.hS)();return(D==null||(V=D.data)===null||V===void 0||(V=V.meta)===null||V===void 0?void 0:V.allowedActions)||(ne==null||(U=ne.data)===null||U===void 0||(U=U.meta)===null||U===void 0?void 0:U.allowedActions)},I=function(){var V,U=(0,h.u3)(),D=(0,M.zh)();return(D==null?void 0:D.resource)||(D==null?void 0:D.association)||(D==null?void 0:D.collection)||(U==null||(V=U.defaultRequest)===null||V===void 0?void 0:V.resource)};function d(){var X=x(),V=X.data,U=X.getActionAlias,D=X.inResources,ne=X.getResourceActionParams,q=X.getStrategyActionParams,J=F(),Y=(0,M.d9)(),P=(0,K.useCallback)(function(w,ie){var G=U(w);return Array.isArray(J==null?void 0:J[G])?J[G].includes(ie):null},[J,U]);return i()(i()({},V),{},{parseAction:(0,K.useCallback)(function(w){var ie,G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le=(w==null?void 0:w.split(":"))||[],xe=c()(le,2),_e=xe[0],Ee=xe[1],ze=(_e==null?void 0:_e.includes("."))&&((ie=Y.getCollectionField(_e))===null||ie===void 0?void 0:ie.target);if(!m(G)){var Se=P(Ee,G.recordPkValue);if(Se!==null)return Se?{}:null}return V!=null&&V.allowAll?{}:D(ze)?ne("".concat(ze,":").concat(Ee)):D(_e)?ne(w):q(w)},[Y,V==null?void 0:V.allowAll,ne,q,D,P])})}function u(){var X=d(),V=X.allowAll,U=X.snippets;return{allowConfigUI:V||U.includes("ui.*")}}var l=function(V){var U,D,ne=d(),q=ne.allowAll,J=ne.parseAction,Y=f(),P=Y.allowAll,w=(0,L.qD)(),ie=(0,C.useFieldSchema)(),G=(ie==null?void 0:ie["x-acl-action"])||V.actionPath,le=(ie==null||(U=ie["x-decorator-props"])===null||U===void 0?void 0:U.association)||(ie==null||(D=ie["x-decorator-props"])===null||D===void 0?void 0:D.collection);G==="undefined:list"&&le&&le!=="undefined"&&(G="".concat(le,":list"));var xe=(0,K.useMemo)(function(){return G?J(G,{schema:ie}):null},[J,G,ie]);if(q||w.disableAcl||P)return V.children;if(!G)return(0,o.jsx)(p.Provider,{value:{},children:V.children});if(!xe)return(0,o.jsx)(M.pD,{});var _e=G.split(":"),Ee=c()(_e,2),ze=Ee[0],Se=Ee[1];return xe.actionName=Se,(0,o.jsx)(p.Provider,{value:xe,children:V.children})},S=function(){return(0,K.useContext)(p)},H=function(){var V=(0,M.Kx)(),U=(0,M.nE)();if(V){var D=V.getPrimaryKey();return U==null?void 0:U[D]}},O=function(V){var U,D,ne=(0,M.Kx)(),q=H(),J=I(),Y=d(),P=Y.parseAction,w=Y.uiButtonSchemasBlacklist,ie=(0,C.useFieldSchema)(),G=ie["x-uid"],le=ie["x-acl-action"],xe=["create","update","destroy","importXlsx"];!le&&J&&ie["x-action"]&&xe.includes(ie["x-action"])&&(le="".concat(J,":").concat(ie["x-action"])),le&&!((U=le)!==null&&U!==void 0&&U.includes(":"))&&(le="".concat(J,":").concat(le));var _e=(0,K.useMemo)(function(){return le&&P(le,{schema:ie,recordPkValue:q})},[P,le,ie,q]);return w!=null&&w.includes(G)?(0,o.jsx)(p.Provider,{value:!1,children:V.children}):le?J?_e?xe.includes(le)||xe.includes((D=le)===null||D===void 0?void 0:D.split(":")[1])?ne&&ne.template!=="view"||ne!=null&&ne.writableView?(0,o.jsx)(p.Provider,{value:_e,children:V.children}):null:(0,o.jsx)(p.Provider,{value:_e,children:V.children}):(0,o.jsx)(p.Provider,{value:_e,children:V.children}):(0,o.jsx)(o.Fragment,{children:V.children}):(0,o.jsx)(o.Fragment,{children:V.children})},N=function(){var V=(0,K.useContext)(p),U=(0,K.useMemo)(function(){return[].concat((V==null?void 0:V.whitelist)||[]).concat((V==null?void 0:V.fields)||[]).concat((V==null?void 0:V.appends)||[])},[V==null?void 0:V.whitelist,V==null?void 0:V.fields,V==null?void 0:V.appends]);return{whitelist:U,schemaInWhitelist:(0,K.useCallback)(function(D,ne){if(ne||U.length===0||!D||!D["x-collection-field"])return!0;var q=D["x-collection-field"].split("."),J=c()(q,2),Y=J[0],P=J[1],w=D.name.split("."),ie=c()(w,1),G=ie[0];return U==null?void 0:U.includes(G||P||Y)},[U])}},t=function(V){var U=(0,C.useFieldSchema)(),D=(0,C.useField)(),ne=d(),q=ne.allowAll,J=N(),Y=J.whitelist,P=U.name.split("."),w=c()(P,1),ie=w[0],G=!U["x-acl-ignore"]&&Y.length>0&&U!==null&&U!==void 0&&U["x-collection-field"]?Y.includes(ie):!0;return(0,K.useEffect)(function(){G||(D.required=!1,D.display="hidden")},[G,D]),q?(0,o.jsx)(o.Fragment,{children:V.children}):U["x-collection-field"]?G?(0,o.jsx)(o.Fragment,{children:V.children}):null:(0,o.jsx)(o.Fragment,{children:V.children})},B=function(V){return(0,o.jsx)(o.Fragment,{children:V.children})}},47646:function(He,ae,e){"use strict";e.d(ae,{R1:function(){return n.R1},mE:function(){return n.mE},tq:function(){return n.tq},Hh:function(){return n.Hh},R3:function(){return n.R3},a3:function(){return n.a3},fJ:function(){return n.fJ},$M:function(){return _n},pz:function(){return xn},Z5:function(){return n.Z5},VV:function(){return n.VV},dr:function(){return Y},Bk:function(){return xe},Wx:function(){return _e},XU:function(){return ze},O9:function(){return We},No:function(){return Te},kF:function(){return tt},X$:function(){return Re},P2:function(){return le},S3:function(){return an},H3:function(){return fn},R6:function(){return ut},Hq:function(){return n.Hq},TR:function(){return n.TR},Aj:function(){return n.Aj},ov:function(){return n.ov},xd:function(){return n.xd},Jn:function(){return n.Jn},fG:function(){return n.fG},cm:function(){return oe},mR:function(){return n.mR}});var Z={};e.r(Z),e.d(Z,{MenuConfigure:function(){return Y},PermissionContext:function(){return xe},PermissionProvider:function(){return _e},RoleConfigure:function(){return ze},RoleResourceCollectionContext:function(){return We},RoleTable:function(){return Te},RolesResourcesActions:function(){return tt},ScopeSelect:function(){return Re},SettingCenterPermissionProvider:function(){return le},SettingCenterProvider:function(){return an},SettingsCenterConfigure:function(){return fn},StrategyActions:function(){return ut},useRolesResourcesScopesSelectedRowKeys:function(){return oe}});var c=e(15009),k=e.n(c),i=e(99289),g=e.n(i),C=e(12444),A=e.n(C),r=e(72004),K=e.n(r),v=e(31996),j=e.n(v),h=e(26037),M=e.n(h),n=e(75667),y=e(9783),L=e.n(y),o=e(84327),a=e(4393),R=e(67294),E=e(62954),$=e(97857),Q=e.n($),z=e(5574),p=e.n(z),b=e(19632),f=e.n(b),x=e(96695),m=e.n(x),F=e(45360),I=e(16455),d=e(84567),u=e(96486),l=e(26793),S=e(12174),H=e(36586),O=e(64930),N=e(57953),t=e(29392),B=e(85893),X=(0,R.createContext)(null);X.displayName="MenuItemsContext";var V=function Qt(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},en=[];for(var Rn in Et)if(Object.prototype.hasOwnProperty.call(Et,Rn)){var An=Et[Rn],Jn={title:An.title,uid:An["x-uid"]};An.properties&&(Jn.children=Qt(An.properties)),en.push(Jn)}return en},U=function(){return(0,R.useContext)(X)},D=function(Et){var en,Rn=(0,t.W)(),An={url:"uiSchemas:getProperties/".concat(Rn)},Jn=(0,S.QT)(An);if(Jn.loading)return(0,B.jsx)(N.Z,{});var Zn=V((en=Jn.data)===null||en===void 0||(en=en.data)===null||en===void 0?void 0:en.properties);return(0,B.jsx)(X.Provider,{value:{service:Jn,items:Zn},children:Et.children})},ne=function Qt(Et){if(!Array.isArray(Et))return[];var en=[],Rn=m()(Et),An;try{for(Rn.s();!(An=Rn.n()).done;){var Jn=An.value;en.push(Jn.uid),en.push.apply(en,f()(Qt(Jn.children)))}}catch(Zn){Rn.e(Zn)}finally{Rn.f()}return en},q=function Qt(Et,en){var Rn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(!Et)return[];var An=m()(Et),Jn;try{for(An.s();!(Jn=An.n()).done;){var Zn=Jn.value;if(Rn.push(Zn.uid),en(Zn))return Rn;if(Zn.children){var rr=Qt(Zn.children,en,Rn);if(rr.length)return rr}Rn.pop()}}catch(mr){An.e(mr)}finally{An.f()}return[]},J=function Qt(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],en=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Rn=m()(Et),An;try{for(Rn.s();!(An=Rn.n()).done;){var Jn=An.value;en.push(Jn.uid),Jn.children&&Jn.children.length&&Qt(Jn.children,en)}}catch(Zn){Rn.e(Zn)}finally{Rn.f()}return en},Y=function(){var Et=(0,H.a)(),en=(0,S.LY)(),Rn=U(),An=Rn.items,Jn=(0,l.$)(),Zn=Jn.t,rr=ne(An),mr=(0,R.useState)([]),Er=p()(mr,2),Ft=Er[0],ct=Er[1],Mt=(0,S.QT)({resource:"roles.menuUiSchemas",resourceOf:Et.name,action:"list",params:{paginate:!1}},{onSuccess:function(Nt){var nn;ct((Nt==null||(nn=Nt.data)===null||nn===void 0?void 0:nn.map(function(Zt){return Zt["x-uid"]}))||[])}}),kt=Mt.loading,Rt=Mt.refresh,_t=en.resource("roles.menuUiSchemas",Et.name),Bt=rr.length===Ft.length,jt=function(){var Wt=g()(k()().mark(function Nt(nn,Zt){var Cn,Yt,Mn,bn,Gt;return k()().wrap(function(Hn){for(;;)switch(Hn.prev=Hn.next){case 0:if(Cn=q(An,function(sn){return sn.uid===Zt.uid}),Yt=J(Zt==null?void 0:Zt.children,[]),!nn){Hn.next=10;break}return Mn=Yt.concat(Zt.uid),bn=Ft.filter(function(sn){return!Mn.includes(sn)}),ct(f()(bn)),Hn.next=8,_t.remove({values:Mn});case 8:Hn.next=14;break;case 10:return Gt=Yt.concat(Cn),ct(function(sn){return(0,u.uniq)([].concat(f()(sn),f()(Gt)))}),Hn.next=14,_t.add({values:Gt});case 14:F.ZP.success(Zn("Saved successfully"));case 15:case"end":return Hn.stop()}},Nt)}));return function(nn,Zt){return Wt.apply(this,arguments)}}(),Xt=function Wt(Nt){return Nt.map(function(nn){var Zt=Zn(nn.title);return nn.children?Q()(Q()({},nn),{},{title:Zt,children:Wt(nn.children)}):Q()(Q()({},nn),{},{title:Zt})})};return(0,B.jsx)(I.Z,{className:O.b,loading:kt,rowKey:"uid",pagination:!1,expandable:{defaultExpandAllRows:!0},columns:[{dataIndex:"title",title:Zn("Menu item title")},{dataIndex:"accessible",title:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(d.Z,{checked:Bt,onChange:function(){var Wt=g()(k()().mark(function Nt(nn){return k()().wrap(function(Cn){for(;;)switch(Cn.prev=Cn.next){case 0:if(!Bt){Cn.next=5;break}return Cn.next=3,_t.set({values:[]});case 3:Cn.next=7;break;case 5:return Cn.next=7,_t.set({values:rr});case 7:Rt(),F.ZP.success(Zn("Saved successfully"));case 9:case"end":return Cn.stop()}},Nt)}));return function(Nt){return Wt.apply(this,arguments)}}()})," ",Zn("Accessible")]}),render:function(Nt,nn){var Zt=Ft.includes(nn.uid);return(0,B.jsx)(d.Z,{checked:Zt,onChange:function(){return jt(Zt,nn)}})}}],dataSource:Xt(An)})},P=e(86201),w=e(80844),ie=e(44908),G=e.n(ie),le=function(Et){var en,Rn=(0,R.useContext)(xe),An=Rn.currentRecord;return An!=null&&(en=An.snippets)!==null&&en!==void 0&&en.includes("pm.*")?(0,B.jsx)("div",{children:Et.children}):null},xe=(0,R.createContext)(null);xe.displayName="PermissionContext";var _e=function(Et){var en=(0,S.LY)(),Rn=(0,H.a)(),An=(0,l.$)(),Jn=An.t,Zn=Rn.snippets;Zn==null||Zn.forEach(function(ct){Rn[ct]=!0});var rr=(0,R.useState)(Rn),mr=p()(rr,2),Er=mr[0],Ft=mr[1];return(0,B.jsx)(xe.Provider,{value:{currentRecord:Er,update:function(){var ct=g()(k()().mark(function kt(Rt,_t){var Bt,jt,Xt,Wt;return k()().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:if(Bt=Rt.getState(),jt=Bt.path,Xt=Bt.value,!["ui.*","pm","pm.*"].includes(jt)){nn.next=13;break}if(Wt=en.resource("roles.snippets",Rn.name),!Xt){nn.next=8;break}return nn.next=6,Wt.add({values:[jt]});case 6:nn.next=10;break;case 8:return nn.next=10,Wt.remove({values:[jt]});case 10:Ft(Q()(Q()(Q()({},Er),_t.values),{},L()({},jt,Xt))),nn.next=16;break;case 13:return nn.next=15,en.resource("roles").update({filterByTk:Rn.name,values:_t.values});case 15:Ft(Q()(Q()({},Er),_t.values));case 16:F.ZP.success(Jn("Saved successfully"));case 17:case"end":return nn.stop()}},kt)}));function Mt(kt,Rt){return ct.apply(this,arguments)}return Mt}()},children:Et.children})},Ee=(0,w.connect)(function(Qt){var Et=(0,l.$)(),en=Et.t;return(0,B.jsxs)(d.Z.Group,{style:{width:"100%",display:"block"},value:Qt.value,onChange:function(An){for(var Jn=["ui.*","pm","pm.*","app"],Zn=Jn.map(function(ct){return"!".concat(ct)}),rr=G()([].concat(f()(Qt.value||[]),f()(An))).filter(function(ct){return ct&&!Zn.includes(ct)}).map(function(ct){return!Jn.includes(ct)||An!=null&&An.includes(ct)?ct:"!".concat(ct)}),mr=0,Er=Jn;mr<Er.length;mr++){var Ft=Er[mr];!rr.includes(Ft)&&!rr.includes("!".concat(Ft))&&rr.push("!".concat(Ft))}Qt.onChange(rr)},children:[(0,B.jsx)("div",{style:{marginTop:16},children:(0,B.jsx)(d.Z,{value:"ui.*",children:en("Allows to configure interface")})}),(0,B.jsx)("div",{style:{marginTop:8},children:(0,B.jsx)(d.Z,{value:"pm",children:en("Allows to install, activate, disable plugins")})}),(0,B.jsx)("div",{style:{marginTop:8},children:(0,B.jsx)(d.Z,{value:"pm.*",children:en("Allows to configure plugins")})}),(0,B.jsx)("div",{style:{marginTop:8},children:(0,B.jsx)(d.Z,{value:"app",children:en("Allows to clear cache, reboot application")})})]})}),ze=function(){var Et=(0,R.useContext)(xe),en=Et.update,Rn=Et.currentRecord,An=(0,l.$)(),Jn=An.t;return(0,B.jsx)(E.n6,{components:{SnippetCheckboxGroup:Ee},schema:{type:"void",name:"form","x-component":"Form","x-component-props":{useValues:function(rr){var mr=(0,S.LY)();return(0,S.QT)(function(){return mr.resource("roles").get({filterByTk:Rn.name}).then(function(Er){var Ft,ct,Mt=Er==null||(Ft=Er.data)===null||Ft===void 0?void 0:Ft.data;return(ct=Mt.snippets)===null||ct===void 0||ct.forEach(function(kt){Mt[kt]=!0}),{data:Mt}})},rr)},effects:function(){(0,P.onFieldChange)("*",function(){var rr=g()(k()().mark(function mr(Er,Ft){return k()().wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:if(Ft.modified){Mt.next=2;break}return Mt.abrupt("return");case 2:return Mt.next=4,en(Er,Ft);case 4:case"end":return Mt.stop()}},mr)}));return function(mr,Er){return rr.apply(this,arguments)}}())}},properties:{snippets:{title:Jn("Configure permissions"),type:"boolean","x-decorator":"FormItem","x-component":"SnippetCheckboxGroup"},allowNewMenu:{title:Jn("Menu permissions"),"x-decorator":"FormItem","x-component":"Checkbox","x-content":Jn("New menu items are allowed to be accessed by default.")}}}})},Se=e(5552),se=e(66309),me=e(21143),pe=e(78718),ee=e.n(pe),ue={name:"roles",filterTargetKey:"name",targetKey:"name",fields:[{type:"integer",name:"title",interface:"input",uiSchema:{title:'{{t("Role display name")}}',type:"number","x-component":"Input",required:!0}},{type:"string",name:"name",interface:"input",uiSchema:{title:'{{t("Role UID")}}',type:"string","x-component":"Input"}},{type:"boolean",name:"default",interface:"boolean",uiSchema:{title:'{{t("Default role")}}',type:"boolean","x-component":"Checkbox"}}]},ge={type:"object",properties:{block1:{type:"void","x-decorator":"ResourceActionProvider","x-decorator-props":{collection:ue,resourceName:"roles",request:{resource:"roles",action:"list",params:{pageSize:50,filter:{"name.$ne":"root"},showAnonymous:!0,sort:["createdAt"],appends:[]}}},"x-component":"CollectionProvider_deprecated","x-component-props":{collection:ue},properties:{actions:{type:"void","x-component":"ActionBar","x-component-props":{style:{marginBottom:16}},properties:{delete:{type:"void",title:'{{ t("Delete") }}',"x-component":"Action","x-component-props":{useAction:"{{ cm.useBulkDestroyAction }}",confirm:{title:"{{t('Delete role')}}",content:"{{t('Are you sure you want to delete it?')}}"}}},create:{type:"void",title:'{{t("Add role")}}',"x-component":"Action","x-component-props":{type:"primary"},properties:{drawer:{type:"void","x-component":"Action.Drawer","x-decorator":"Form","x-decorator-props":{useValues:function(Et){var en=(0,E.XCj)();return(0,S.QT)(function(){return Promise.resolve({data:{name:"r_".concat((0,o.uid)()),snippets:["!ui.*","!pm","!pm.*"]}})},Q()(Q()({},Et),{},{refreshDeps:[en.visible]}))}},title:'{{t("Add role")}}',properties:{title:{"x-component":"CollectionField","x-decorator":"FormItem"},name:{"x-component":"CollectionField","x-decorator":"FormItem",description:'{{t("Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.")}}'},default:{"x-component":"CollectionField","x-decorator":"FormItem",title:"","x-content":'{{t("Default role")}}'},footer:{type:"void","x-component":"Action.Drawer.Footer",properties:{cancel:{title:'{{t("Cancel")}}',"x-component":"Action","x-component-props":{useAction:"{{ cm.useCancelAction }}"}},submit:{title:'{{t("Submit")}}',"x-component":"Action","x-component-props":{type:"primary",useAction:"{{ cm.useCreateAction }}"}}}}}}}}}},table:{type:"void","x-uid":"input","x-component":"Table.Void","x-component-props":{rowKey:"name",rowSelection:{type:"checkbox"},useDataSource:"{{ cm.useDataSourceFromRAC }}"},properties:{column1:{type:"void","x-decorator":"Table.Column.Decorator","x-component":"Table.Column",properties:{title:{type:"number","x-component":"CollectionField","x-read-pretty":!0}}},column2:{type:"void","x-decorator":"Table.Column.Decorator","x-component":"Table.Column",properties:{name:{type:"string","x-component":"CollectionField","x-read-pretty":!0}}},column3:{type:"void","x-decorator":"Table.Column.Decorator","x-component":"Table.Column",properties:{default:{type:"string","x-component":"CollectionField","x-read-pretty":!0}}},column4:{type:"void",title:'{{t("Actions")}}',"x-component":"Table.Column",properties:{actions:{type:"void","x-component":"Space","x-component-props":{split:"|"},properties:{view:{type:"void",title:'{{t("Configure")}}',"x-component":"Action.Link","x-decorator":"ACLActionProvider","x-acl-action":"roles:update","x-component-props":{},properties:{drawer:{type:"void","x-component":"Action.Drawer","x-decorator":"PermissionProvider",title:'{{t("Configure permissions")}}',properties:{tabs1:{type:"void","x-component":"Tabs","x-component-props":{},properties:{tab1:{type:"void",title:'{{t("General permissions")}}',"x-component":"Tabs.TabPane","x-component-props":{},properties:{role:{"x-component":"RoleConfigure"}}},tab3:{type:"void",title:'{{t("Menu permissions")}}',"x-component":"Tabs.TabPane","x-component-props":{},properties:{menu:{"x-decorator":"MenuItemsProvider","x-component":"MenuConfigure"}}},tab4:{type:"void",title:'{{t("Plugin settings permissions")}}',"x-decorator":"SettingCenterPermissionProvider","x-component":"Tabs.TabPane","x-component-props":{},properties:{menu:{"x-decorator":"SettingCenterProvider","x-component":"SettingsCenterConfigure"}}}}}}}}},update:{type:"void",title:'{{t("Edit")}}',"x-decorator":"ACLActionProvider","x-acl-action":"roles:update","x-component":"Action.Link","x-component-props":{type:"primary"},properties:{drawer:{type:"void","x-component":"Action.Drawer","x-decorator":"Form","x-decorator-props":{useValues:function(Et){var en=(0,H.a)(),Rn=(0,S.QT)(function(){return Promise.resolve({data:ee()(en,["title","name","default"])})},Q()(Q()({},Et),{},{manual:!0})),An=(0,E.XCj)();return(0,R.useEffect)(function(){An.visible&&Rn.run()},[An.visible]),Rn}},title:'{{t("Edit role")}}',properties:{title:{"x-component":"CollectionField","x-decorator":"FormItem"},name:{"x-component":"CollectionField","x-decorator":"FormItem","x-disabled":!0},default:{title:"","x-component":"CollectionField","x-decorator":"FormItem","x-content":'{{t("Default role")}}'},footer:{type:"void","x-component":"Action.Drawer.Footer",properties:{cancel:{title:'{{t("Cancel")}}',"x-component":"Action","x-component-props":{useAction:"{{ cm.useCancelAction }}"}},submit:{title:'{{t("Submit")}}',"x-component":"Action","x-component-props":{type:"primary",useAction:"{{ cm.useUpdateAction }}"}}}}}}}},delete:{type:"void",title:'{{ t("Delete") }}',"x-acl-action":"roles:destroy","x-decorator":"ACLActionProvider","x-component":"Action.Link","x-component-props":{confirm:{title:"{{t('Delete role')}}",content:"{{t('Are you sure you want to delete it?')}}"},useAction:"{{cm.useDestroyAction}}"}}}}}}}}}}}},Ie=(0,R.createContext)([]);Ie.displayName="AvailableActionsContext";var Ae=function(Et){var en=(0,S.QT)({resource:"availableActions",action:"list"}),Rn=en.data,An=en.loading;return An?(0,B.jsx)(N.Z,{}):(0,B.jsx)(Ie.Provider,{value:Rn==null?void 0:Rn.data,children:Et.children})},Le=function(){return(0,R.useContext)(Ie)},Te=function(){return(0,B.jsx)("div",{children:(0,B.jsx)(E.DDd.Provider,{value:{designable:!1},children:(0,B.jsx)(Ae,{children:(0,B.jsx)(E.n6,{schema:ge,components:{MenuItemsProvider:D,SettingCenterPermissionProvider:le,PermissionProvider:_e}})})})})},je=e(7340),Pe=e(90297),fe={name:"rolesResourcesScopes",fields:[{type:"string",name:"name",interface:"input",uiSchema:{title:'{{t("Scope name")}}',type:"string","x-component":"Input",required:!0}}]},re=function(){var Et=(0,R.useContext)(We),en=Et.name,Rn=(0,je.bz)();return(0,R.useEffect)(function(){Rn.form.setInitialValues({resourceName:en})},[en]),{form:Rn.form}},T={type:"object",properties:{scope:{"x-component":"RecordPicker","x-component-props":{size:"small",fieldNames:{label:"name",value:"id"},multiple:!1,association:{target:"rolesResourcesScopes"},onChange:"{{ onChange }}"},properties:{selector:{type:"void",title:'{{ t("Select record") }}',"x-component":"RecordPicker.Selector","x-component-props":{className:"nb-record-picker-selector"},properties:{tableBlock:{type:"void","x-decorator":"TableSelectorProvider","x-decorator-props":{collection:fe,resource:"rolesResourcesScopes",action:"list",params:{pageSize:20},useParams:function(){var Et=(0,R.useContext)(We);return{filter:{$or:[{resourceName:Et.name},{resourceName:null}]}}},rowKey:"id"},"x-component":"BlockItem",properties:{actions:{type:"void","x-component":"ActionBar","x-component-props":{style:{marginBottom:16}},properties:{create:{type:"void",title:'{{ t("Add new") }}',"x-action":"create","x-component":"Action","x-component-props":{icon:"PlusOutlined",openMode:"drawer",type:"primary"},properties:{drawer:{type:"void",title:'{{ t("Add record") }}',"x-component":"Action.Container","x-component-props":{className:"nb-action-popup"},properties:{formBlock:{type:"void","x-decorator":"FormBlockProvider","x-decorator-props":{resource:"rolesResourcesScopes",collection:fe},"x-component":"CardItem",properties:{form:{type:"void","x-component":"FormV2","x-use-component-props":re,properties:{name:{type:"string","x-component":"CollectionField","x-decorator":"FormItem"},scope:{type:"object",title:'{{t("Data scope")}}',name:"filter","x-decorator":"FormItem","x-component":"Filter","x-use-component-props":function(){var Et=(0,R.useContext)(We),en=(0,E.xQm)(Et.name);return{options:en}},"x-component-props":{dynamicComponent:Pe.qj}},actions:{type:"void","x-component":"ActionBar","x-component-props":{layout:"one-column",style:{marginTop:24}},properties:{create:{title:'{{ t("Submit") }}',"x-action":"submit","x-component":"Action","x-use-component-props":"useCreateActionProps","x-component-props":{type:"primary",htmlType:"submit"}}}}}}}}}}}}}},value:{type:"array","x-component":"TableV2.Selector","x-use-component-props":"useTableSelectorProps","x-component-props":{rowKey:"id",rowSelection:{type:"checkbox"}},properties:{column1:{type:"void","x-decorator":"TableV2.Column.Decorator","x-component":"TableV2.Column",properties:{name:{type:"string","x-component":"CollectionField","x-read-pretty":!0}}},actions:{type:"void",title:'{{ t("Actions") }}',"x-action-column":"actions","x-component":"TableV2.Column",properties:{actions:{type:"void","x-decorator":"DndContext","x-component":"Space","x-component-props":{split:"|"},properties:{edit:{type:"void",title:'{{ t("Edit") }}',"x-action":"update","x-decorator":"ACLActionProvider","x-component":"Action.Link","x-component-props":{openMode:"drawer",icon:"EditOutlined"},properties:{drawer:{type:"void",title:'{{ t("Edit record") }}',"x-component":"Action.Container","x-component-props":{className:"nb-action-popup"},properties:{formBlock:{type:"void","x-decorator":"FormBlockProvider","x-decorator-props":{resource:"rolesResourcesScopes",collection:fe,action:"get",useParams:"{{ useParamsFromRecord }}"},"x-component":"CardItem",properties:{form:{type:"void","x-component":"FormV2","x-use-component-props":"useFormBlockProps",properties:{name:{type:"string","x-component":"CollectionField","x-decorator":"FormItem"},scope:{type:"object",title:'{{t("Data scope")}}',name:"filter","x-decorator":"FormItem","x-component":"Filter","x-use-component-props":function(){var Et=(0,R.useContext)(We),en=(0,E.xQm)(Et.name);return{options:en}},"x-component-props":{dynamicComponent:Pe.qj}},actions:{type:"void","x-component":"ActionBar","x-component-props":{layout:"one-column",style:{marginTop:24}},properties:{update:{title:'{{ t("Submit") }}',"x-action":"submit","x-component":"Action","x-use-component-props":"useUpdateActionProps","x-component-props":{type:"primary",htmlType:"submit"}}}}}}}}}}}},destroy:{title:'{{ t("Delete") }}',"x-action":"destroy","x-decorator":"ACLActionProvider","x-component":"Action.Link","x-use-component-props":"useDestroyActionProps","x-component-props":{icon:"DeleteOutlined",confirm:{title:"{{t('Delete record')}}",content:"{{t('Are you sure you want to delete it?')}}"}}}}}}}}}}},footer:{"x-component":"Action.Container.Footer","x-component-props":{},properties:{actions:{type:"void","x-component":"ActionBar","x-component-props":{},properties:{submit:{title:'{{ t("Submit") }}',"x-action":"submit","x-component":"Action","x-use-component-props":"usePickActionProps","x-component-props":{type:"primary",htmlType:"submit"}}}}}}}}}}}},ce=(0,R.createContext)(null);ce.displayName="RolesResourcesScopesSelectedRowKeysContext";var be=function(Et){var en=(0,R.useState)([]),Rn=p()(en,2),An=Rn[0],Jn=Rn[1];return(0,B.jsx)(ce.Provider,{value:[An,Jn],children:Et.children})},oe=function(){return(0,R.useContext)(ce)},Re=function(Et){var en=(0,R.useMemo)(function(){return(0,P.createForm)({values:{scope:Et.value}})},[]);return(0,B.jsx)(E.RVL,{form:en,children:(0,B.jsx)(E.n6,{components:{RolesResourcesScopesSelectedRowKeysProvider:be},scope:{onChange:function(An){var Jn;Et==null||(Jn=Et.onChange)===null||Jn===void 0||Jn.call(Et,An)}},schema:T})})},Ze=function(Et){var en,Rn={};return Et==null||(en=Et.forEach)===null||en===void 0||en.call(Et,function(An){An.name&&(Rn[An.name]=An,Rn[An.name].scope=(0,u.isEmpty)(An.scope)?null:An.scope)}),Rn},We=(0,R.createContext)({});We.displayName="RoleResourceCollectionContext";var tt=(0,w.connect)(function(Qt){var Et,en=function(ln){var Hn=ln.map(function(sn){return Q()(Q()({},sn),{},{scope:(0,u.isEmpty)(sn.scope)?null:sn.scope})});Qt.onChange(Hn)},Rn=(0,w.useForm)(),An=(0,me.useRecord)(),Jn=Le(),Zn=(0,me.useCollectionManager_deprecated)(),rr=Zn.getCollection,mr=Zn.getCollectionFields,Er=rr(An.collectionName),Ft=mr(An.collectionName),ct=(0,me.useCompile)(),Mt=(0,l.$)(),kt=Mt.t,Rt=(0,w.useField)(),_t=Ze(Rt.value||[]),Bt=function(ln,Hn){var sn,Ln=_t==null?void 0:_t[ln];return Ln?Ln==null||(sn=Ln.fields)===null||sn===void 0?void 0:sn.includes(Hn):!1},jt=Jn.filter(function(Gt){return Gt.allowConfigureFields}),Xt=Ft==null||(Et=Ft.filter(function(Gt){return Gt.interface}))===null||Et===void 0?void 0:Et.map(function(Gt){var ln=Q()({},Gt),Hn=m()(jt),sn;try{for(Hn.s();!(sn=Hn.n()).done;){var Ln=sn.value;ln[Ln.name]=Bt(Ln.name,Gt.name)}}catch(Bn){Hn.e(Bn)}finally{Hn.f()}return ln}),Wt=function(ln){if(_t[ln])delete _t[ln];else{var Hn,sn;_t[ln]={name:ln,fields:Ft==null||(Hn=Ft.filter(function(Ln){return Ln.interface}))===null||Hn===void 0||(sn=Hn.map)===null||sn===void 0?void 0:sn.call(Hn,function(Ln){return Ln.name})}}en(Object.values(_t))},Nt=function(ln,Hn){_t[ln]?(_t[ln].scope=Hn,en(Object.values(_t))):(Wt(ln),_t[ln].scope=Hn)},nn={},Zt=m()(jt),Cn;try{for(Zt.s();!(Cn=Zt.n()).done;){var Yt,Mn,bn=Cn.value;nn[bn.name]=(Ft==null||(Yt=Ft.filter(function(Gt){return Gt.interface}))===null||Yt===void 0?void 0:Yt.length)===(_t==null||(Mn=_t[bn.name])===null||Mn===void 0||(Mn=Mn.fields)===null||Mn===void 0?void 0:Mn.length)}}catch(Gt){Zt.e(Gt)}finally{Zt.f()}return(0,B.jsx)("div",{children:(0,B.jsx)(We.Provider,{value:Er,children:(0,B.jsxs)(Se.FormLayout,{layout:"vertical",children:[(0,B.jsx)(Se.FormItem,{label:kt("Action permission"),children:(0,B.jsx)(I.Z,{className:O.b,size:"small",pagination:!1,columns:[{dataIndex:"displayName",title:kt("Action display name"),render:function(ln){return ct(ln)}},{dataIndex:"onNewRecord",title:kt("Action type"),render:function(ln){return ln?(0,B.jsx)(se.Z,{color:"green",children:kt("Action on new records")}):(0,B.jsx)(se.Z,{color:"geekblue",children:kt("Action on existing records")})}},{dataIndex:"enabled",title:kt("Allow"),render:function(ln,Hn){return(0,B.jsx)(d.Z,{checked:ln,onChange:function(){Wt(Hn.name)}})}},{dataIndex:"scope",title:kt("Data scope"),render:function(ln,Hn){return!Hn.onNewRecord&&(0,B.jsx)(Re,{value:ln,onChange:function(Ln){Nt(Hn.name,Ln)}})}}],dataSource:Jn==null?void 0:Jn.map(function(Gt){var ln=!1,Hn=null;return _t[Gt.name]&&(ln=!0,Gt.onNewRecord||(Hn=_t[Gt.name].scope)),Q()(Q()({},Gt),{},{enabled:ln,scope:Hn})})})}),(0,B.jsx)(Se.FormItem,{label:kt("Field permission"),children:(0,B.jsx)(I.Z,{className:O.b,pagination:!1,dataSource:Xt,columns:[{dataIndex:["uiSchema","title"],title:kt("Field display name"),render:function(ln){return ct(ln)}}].concat(f()(jt.map(function(Gt){var ln=nn==null?void 0:nn[Gt.name];return{dataIndex:Gt.name,title:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(d.Z,{checked:ln,onChange:function(){var sn=_t[Gt.name]||{name:Gt.name};if(ln)sn.fields=[];else{var Ln;sn.fields=Ft==null||(Ln=Ft.map)===null||Ln===void 0?void 0:Ln.call(Ft,function(Bn){return Bn.name})}_t[Gt.name]=sn,en(Object.values(_t))}})," ",ct(Gt.displayName)]}),render:function(sn,Ln){return(0,B.jsx)(d.Z,{checked:sn,"aria-label":"".concat(Gt.name,"_checkbox"),onChange:function(){var wn=_t[Gt.name]||{name:Gt.name},st=wn.fields||[];if(sn){var Ke=st.indexOf(Ln.name);st.splice(Ke,1)}else st.push(Ln.name);wn.fields=st,_t[Gt.name]=wn,en(Object.values(_t))}})}}})))})})]})})})}),St=e(34041),Tt=function(Et){var en;if(!Et)return{};var Rn={};return Et==null||(en=Et.forEach)===null||en===void 0||en.call(Et,function(An){var Jn=An.split(":"),Zn=p()(Jn,2),rr=Zn[0],mr=Zn[1];Rn[rr]=mr||"all"}),Rn},lt=function(Et){var en=[];for(var Rn in Et)if(Object.prototype.hasOwnProperty.call(Et,Rn)){var An=Et[Rn];An==="all"?en.push(Rn):en.push("".concat(Rn,":").concat(An))}return en},ut=(0,w.connect)(function(Qt){var Et=Qt.onChange,en=Le(),Rn=(0,me.useCompile)(),An=(0,l.$)(),Jn=An.t,Zn=(0,w.useField)(),rr=Tt(Zn.value);return(0,B.jsx)("div",{children:(0,B.jsx)(I.Z,{size:"small",pagination:!1,rowKey:"name",columns:[{dataIndex:"displayName",title:Jn("Action display name"),render:function(Er){return Rn(Er)}},{dataIndex:"onNewRecord",title:Jn("Action type"),render:function(Er){return Er?(0,B.jsx)(se.Z,{color:"green",children:Jn("Action on new records")}):(0,B.jsx)(se.Z,{color:"geekblue",children:Jn("Action on existing records")})}},{dataIndex:"enabled",title:Jn("Allow"),render:function(Er,Ft){return(0,B.jsx)(d.Z,{checked:Er,"aria-label":"".concat(Ft.name,"_checkbox"),onChange:function(Mt){Er?delete rr[Ft.name]:rr[Ft.name]="all",Et(lt(rr))}})}},{dataIndex:"scope",title:Jn("Data scope"),render:function(Er,Ft){return!Ft.onNewRecord&&(0,B.jsx)(St.default,{"data-testid":"select-data-scope",popupMatchSelectWidth:!1,size:"small",value:Er,options:[{label:Jn("All records"),value:"all"},{label:Jn("Own records"),value:"own"}],onChange:function(Mt){rr[Ft.name]=Mt,Et(lt(rr))}})}}],dataSource:en==null?void 0:en.map(function(mr){var Er="all",Ft=!1;return rr[mr.name]&&(Ft=!0,Er=rr[mr.name]),Q()(Q()({},mr),{},{enabled:Ft,scope:Er})})})})}),nt=e(68091),Je=e(65213),hn=function Qt(Et,en){var Rn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(!Et)return[];var An=_createForOfIteratorHelper(Et),Jn;try{for(An.s();!(Jn=An.n()).done;){var Zn=Jn.value;if(Rn.push(Zn.key),en(Zn))return Rn;if(Zn.children){var rr=Qt(Zn.children,en,Rn);if(rr.length)return rr}Rn.pop()}}catch(mr){An.e(mr)}finally{An.f()}return[]},mn=function Qt(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],en=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],Rn=m()(Et),An;try{for(Rn.s();!(An=Rn.n()).done;){var Jn=An.value;en.push(Jn.aclSnippet),Jn.children&&Jn.children.length&&Qt(Jn.children,en)}}catch(Zn){Rn.e(Zn)}finally{Rn.f()}return en},vn=(0,R.createContext)(null);vn.displayName="SettingMenuContext";var an=function(Et){var en=(0,R.useContext)(Je.EV);return(0,B.jsx)(vn.Provider,{value:en,children:Et.children})},fn=function(){var Et=(0,nt.qD)(),en=(0,H.a)(),Rn=(0,S.LY)(),An=(0,E.eJW)(),Jn=Et.pluginSettingsManager.getList(!1),Zn=Et.pluginSettingsManager.getAclSnippets(),rr=(0,R.useState)([]),mr=p()(rr,2),Er=mr[0],Ft=mr[1],ct=(0,R.useMemo)(function(){return Er.includes("pm.*")&&Er.every(function(Wt){return!Wt.startsWith("!pm.")})},[Er]),Mt=(0,l.$)(),kt=Mt.t,Rt=(0,S.QT)({resource:"roles.snippets",resourceOf:en.name,action:"list",params:{paginate:!1}},{onSuccess:function(Nt){Ft((Nt==null?void 0:Nt.data)||[])}}),_t=Rt.loading,Bt=Rt.refresh,jt=Rn.resource("roles.snippets",en.name),Xt=function(){var Wt=g()(k()().mark(function Nt(nn,Zt){var Cn,Yt;return k()().wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:if(Cn=mn(Zt==null?void 0:Zt.children,[]),Yt=Cn.concat(Zt.aclSnippet),nn){bn.next=8;break}return bn.next=5,jt.remove({values:Yt.map(function(Gt){return"!"+Gt})});case 5:Bt(),bn.next=11;break;case 8:return bn.next=10,jt.add({values:Yt.map(function(Gt){return"!"+Gt})});case 10:Bt();case 11:F.ZP.success(kt("Saved successfully"));case 12:case"end":return bn.stop()}},Nt)}));return function(nn,Zt){return Wt.apply(this,arguments)}}();return(0,B.jsx)(I.Z,{className:O.b,loading:_t,rowKey:"key",pagination:!1,expandable:{defaultExpandAllRows:!0},columns:[{dataIndex:"title",title:kt("Plugin name"),render:function(Nt){return An(Nt)}},{dataIndex:"accessible",title:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(d.Z,{checked:ct,onChange:g()(k()().mark(function Wt(){var Nt;return k()().wrap(function(Zt){for(;;)switch(Zt.prev=Zt.next){case 0:if(Nt=Zn.map(function(Cn){return"!"+Cn}),ct){Zt.next=6;break}return Zt.next=4,jt.remove({values:Nt});case 4:Zt.next=8;break;case 6:return Zt.next=8,jt.add({values:Nt});case 8:Bt(),F.ZP.success(kt("Saved successfully"));case 10:case"end":return Zt.stop()}},Wt)}))})," ",kt("Accessible")]}),render:function(Nt,nn){var Zt=!Er.includes("!"+nn.aclSnippet);return(0,B.jsx)(d.Z,{checked:Zt,onChange:function(){return Xt(Zt,nn)}})}}],dataSource:Jn.filter(function(Wt){return Wt.isTopLevel!==!1}).map(function(Wt){return Wt.showTabs!==!1?Wt:(0,u.omit)(Wt,"children")})})},cn={type:"object",properties:L()({},(0,o.uid)(),{"x-component":"RoleTable"})},_n=function(){return(0,B.jsx)(a.Z,{"data-testid":"acl-pane-card",bordered:!1,children:(0,B.jsx)(E.n6,{components:Z,schema:cn})})},zt=e(31601),xn=function(Qt){j()(en,Qt);var Et=M()(en);function en(){return A()(this,en),Et.apply(this,arguments)}return K()(en,[{key:"load",value:function(){var Rn=g()(k()().mark(function Jn(){return k()().wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:this.app.addComponents({ACLCollectionFieldProvider:n.tq,ACLActionProvider:n.mE,ACLMenuItemProvider:n.fJ,ACLCollectionProvider:n.Hh});case 1:case"end":return rr.stop()}},Jn,this)}));function An(){return Rn.apply(this,arguments)}return An}()}]),en}(zt.S)},64930:function(He,ae,e){"use strict";e.d(ae,{b:function(){return g}});var Z=e(68400),c=e.n(Z),k=e(97133),i,g=(0,k.css)(i||(i=c()([`
  .ant-table-cell {
    > .ant-space-horizontal {
      .ant-space-item-split:has(+ .ant-space-item:empty) {
        display: none;
      }
    }
  }
`])))},75599:function(He,ae,e){"use strict";e.d(ae,{GW:function(){return m},UJ:function(){return x},kT:function(){return I},zy:function(){return F}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(12444),C=e.n(g),A=e(72004),r=e.n(A),K=e(31996),v=e.n(K),j=e(26037),h=e.n(j),M=e(97857),n=e.n(M),y=e(13769),L=e.n(y),o=e(84157),a=e(57953),R=e(28459),E=e(67294),$=e(26793),Q=e(12174),z=e(31601),p=e(54579),b=e(85893),f=["remoteLocale"],x=(0,E.createContext)({});x.displayName="AppLangContext";var m=function(){return(0,E.useContext)(x)};function F(d){var u,l=d.remoteLocale,S=L()(d,f),H=(0,Q.LY)(),O=(0,$.$)(),N=O.i18n,t=(0,Q.QT)({url:"app:getLang",params:{locale:H.auth.locale}},{onSuccess:function(U){var D,ne,q,J,Y=H.auth.locale;if(U!=null&&(D=U.data)!==null&&D!==void 0&&D.lang&&!Y){var P,w;H.auth.setLocale(U==null||(P=U.data)===null||P===void 0?void 0:P.lang),N.changeLanguage(U==null||(w=U.data)===null||w===void 0?void 0:w.lang)}Object.keys((U==null||(ne=U.data)===null||ne===void 0?void 0:ne.resources)||{}).forEach(function(ie){var G,le;N.addResources(U==null||(G=U.data)===null||G===void 0?void 0:G.lang,ie,(U==null||(le=U.data)===null||le===void 0?void 0:le.resources[ie])||{})}),(0,p.L)(U==null?void 0:U.data),o.dayjs.locale(U==null||(q=U.data)===null||q===void 0?void 0:q.moment),window.cronLocale=U==null||(J=U.data)===null||J===void 0?void 0:J.cron},manual:!l}),B=t.data,X=t.loading;return X?(0,b.jsx)("div",{style:{textAlign:"center",marginTop:20},children:(0,b.jsx)(a.Z,{})}):(0,b.jsx)(x.Provider,{value:B==null?void 0:B.data,children:(0,b.jsx)(R.ZP,n()(n()({popupMatchSelectWidth:!1},S),{},{locale:(B==null||(u=B.data)===null||u===void 0?void 0:u.antd)||{},children:d.children}))})}var I=function(d){v()(l,d);var u=h()(l);function l(){return C()(this,l),u.apply(this,arguments)}return r()(l,[{key:"load",value:function(){var S=i()(c()().mark(function O(){var N;return c()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:this.app.use(F,((N=this.options)===null||N===void 0?void 0:N.config)||{});case 1:case"end":return B.stop()}},O,this)}));function H(){return S.apply(this,arguments)}return H}()}]),l}(z.S)},54579:function(He,ae,e){"use strict";e.d(ae,{L:function(){return r}});var Z=e(12444),c=e.n(Z),k=e(72004),i=e.n(k),g=e(92458),C=e.n(g),A=function(){function K(v){c()(this,K),this.data=v}return i()(K,[{key:"atX0SecondsPastTheMinuteGt20",value:function(){return this.data.atX0SecondsPastTheMinuteGt20}},{key:"atX0MinutesPastTheHourGt20",value:function(){return this.data.atX0MinutesPastTheHourGt20}},{key:"commaMonthX0ThroughMonthX1",value:function(){return this.data.commaMonthX0ThroughMonthX1}},{key:"commaYearX0ThroughYearX1",value:function(){return this.data.commaYearX0ThroughYearX1}},{key:"use24HourTimeFormatByDefault",value:function(){return this.data.use24HourTimeFormatByDefault}},{key:"anErrorOccuredWhenGeneratingTheExpressionD",value:function(){return this.data.anErrorOccuredWhenGeneratingTheExpressionD}},{key:"everyMinute",value:function(){return this.data.everyMinute}},{key:"everyHour",value:function(){return this.data.everyHour}},{key:"atSpace",value:function(){return this.data.atSpace}},{key:"everyMinuteBetweenX0AndX1",value:function(){return this.data.everyMinuteBetweenX0AndX1}},{key:"at",value:function(){return this.data.at}},{key:"spaceAnd",value:function(){return this.data.spaceAnd}},{key:"everySecond",value:function(){return this.data.everySecond}},{key:"everyX0Seconds",value:function(){return this.data.everyX0Seconds}},{key:"secondsX0ThroughX1PastTheMinute",value:function(){return this.data.secondsX0ThroughX1PastTheMinute}},{key:"atX0SecondsPastTheMinute",value:function(){return this.data.atX0SecondsPastTheMinute}},{key:"everyX0Minutes",value:function(){return this.data.everyX0Minutes}},{key:"minutesX0ThroughX1PastTheHour",value:function(){return this.data.minutesX0ThroughX1PastTheHour}},{key:"atX0MinutesPastTheHour",value:function(){return this.data.atX0MinutesPastTheHour}},{key:"everyX0Hours",value:function(){return this.data.everyX0Hours}},{key:"betweenX0AndX1",value:function(){return this.data.betweenX0AndX1}},{key:"atX0",value:function(){return this.data.atX0}},{key:"commaEveryDay",value:function(){return this.data.commaEveryDay}},{key:"commaEveryX0DaysOfTheWeek",value:function(){return this.data.commaEveryX0DaysOfTheWeek}},{key:"commaX0ThroughX1",value:function(){return this.data.commaX0ThroughX1}},{key:"commaAndX0ThroughX1",value:function(){return this.data.commaAndX0ThroughX1}},{key:"first",value:function(){return this.data.first}},{key:"second",value:function(){return this.data.second}},{key:"third",value:function(){return this.data.third}},{key:"fourth",value:function(){return this.data.fourth}},{key:"fifth",value:function(){return this.data.fifth}},{key:"commaOnThe",value:function(){return this.data.commaOnThe}},{key:"spaceX0OfTheMonth",value:function(){return this.data.spaceX0OfTheMonth}},{key:"lastDay",value:function(){return this.data.lastDay}},{key:"commaOnTheLastX0OfTheMonth",value:function(){return this.data.commaOnTheLastX0OfTheMonth}},{key:"commaOnlyOnX0",value:function(){return this.data.commaOnlyOnX0}},{key:"commaAndOnX0",value:function(){return this.data.commaAndOnX0}},{key:"commaEveryX0Months",value:function(){return this.data.commaEveryX0Months}},{key:"commaOnlyInX0",value:function(){return this.data.commaOnlyInX0}},{key:"commaOnTheLastDayOfTheMonth",value:function(){return this.data.commaOnTheLastDayOfTheMonth}},{key:"commaOnTheLastWeekdayOfTheMonth",value:function(){return this.data.commaOnTheLastWeekdayOfTheMonth}},{key:"commaDaysBeforeTheLastDayOfTheMonth",value:function(){return this.data.commaDaysBeforeTheLastDayOfTheMonth}},{key:"firstWeekday",value:function(){return this.data.firstWeekday}},{key:"weekdayNearestDayX0",value:function(){return this.data.weekdayNearestDayX0}},{key:"commaOnTheX0OfTheMonth",value:function(){return this.data.commaOnTheX0OfTheMonth}},{key:"commaEveryX0Days",value:function(){return this.data.commaEveryX0Days}},{key:"commaBetweenDayX0AndX1OfTheMonth",value:function(){return this.data.commaBetweenDayX0AndX1OfTheMonth}},{key:"commaOnDayX0OfTheMonth",value:function(){return this.data.commaOnDayX0OfTheMonth}},{key:"commaEveryHour",value:function(){return this.data.commaEveryHour}},{key:"commaEveryX0Years",value:function(){return this.data.commaEveryX0Years}},{key:"commaStartingX0",value:function(){return this.data.commaStartingX0}},{key:"daysOfTheWeek",value:function(){return this.data.daysOfTheWeek}},{key:"monthsOfTheYear",value:function(){return this.data.monthsOfTheYear}}]),K}(),r=function(v){var j=C().default?C().default:C();j.initialize({load:function(M){M[v==null?void 0:v.lang]=new A(v==null?void 0:v.cronstrue)}})}},1177:function(He,ae,e){"use strict";e.d(ae,{l:function(){return l}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(97857),C=e.n(g),A=e(96695),r=e.n(A),K=e(12444),v=e.n(K),j=e(72004),h=e.n(j),M=e(25098),n=e.n(M),y=e(28785),L=e.n(y),o=e(48374),a=e.n(o),R=e(31996),E=e.n(R),$=e(26037),Q=e.n($),z=e(9783),p=e.n(z),b=e(84816),f=e(26855),x=e(67294);function m(S,H,O){var N;H!=null&&H.length&&O[S]({message:(N=H.map)===null||N===void 0?void 0:N.call(H,function(t,B){return x.createElement("div",{key:"".concat(B,"_").concat(t.message)},typeof t=="string"?t:t.message)})})}var F=function(H,O){var N,t=new FileReader;t.readAsText(H==null||(N=H.response)===null||N===void 0?void 0:N.data,"utf-8"),t.onload=function(){var B=JSON.parse(t.result).errors;m("error",B,O)}};function I(S){var H=Math.floor(Math.abs(S)),O=Math.abs(S%1*60),N=(H<10?"0":"")+H,t=(O<10?"0":"")+O,B=S>=0?"+":"-";return B+N+":"+t}var d=function(){var H=new Date().getTimezoneOffset()/-60;return I(H)},u=new Map,l=function(S){E()(O,S);var H=Q()(O);function O(){var N;v()(this,O);for(var t=arguments.length,B=new Array(t),X=0;X<t;X++)B[X]=arguments[X];return N=H.call.apply(H,[this].concat(B)),p()(n()(N),"services",{}),p()(n()(N),"silence",!1),p()(n()(N),"app",void 0),p()(n()(N),"notification",f.Z),N}return h()(O,[{key:"cloneInstance",value:function(){var t=new O(this.options);t.options=this.options,t.services=this.services,t.storage=this.storage,t.app=this.app,t.auth=this.auth,t.storagePrefix=this.storagePrefix,t.notification=this.notification;var B=[],X=r()(this.axios.interceptors.response.handlers),V;try{for(X.s();!(V=X.n()).done;){var U=V.value;U.rejected._name==="handleNotificationError"?B.push(C()(C()({},U),{},{rejected:t.handleNotificationError.bind(t)})):B.push(U)}}catch(D){X.e(D)}finally{X.f()}return t.axios.interceptors.response.handlers=B,t}},{key:"getHeaders",value:function(){var t,B,X=L()(a()(O.prototype),"getHeaders",this).call(this),V=(t=this.app)===null||t===void 0?void 0:t.getName();return V&&(X["X-App"]=V),X["X-Timezone"]=d(),X["X-Hostname"]=(B=window)===null||B===void 0||(B=B.location)===null||B===void 0?void 0:B.hostname,X}},{key:"service",value:function(t){return this.services[t]}},{key:"interceptors",value:function(){var t=this;this.axios.interceptors.request.use(function(B){B.headers["X-With-ACL-Meta"]=!0;var X=t.getHeaders();return Object.keys(X).forEach(function(V){B.headers[V]=B.headers[V]||X[V]}),B}),L()(a()(O.prototype),"interceptors",this).call(this),this.useNotificationMiddleware(),this.axios.interceptors.response.use(function(B){return B},function(B){var X=t.toErrMessages(B);throw X.find(function(V){return V.code==="ROLE_NOT_FOUND_ERR"})&&(t.auth.setRole(null),window.location.reload()),X.find(function(V){return V.code==="TOKEN_INVALID"||V.code==="USER_LOCKED"})&&t.auth.setToken(null),X.find(function(V){return V.code==="ROLE_NOT_FOUND_FOR_USER"})&&(t.auth.setRole(null),window.location.reload()),B})}},{key:"toErrMessages",value:function(t){var B,X,V,U;if(typeof(t==null||(B=t.response)===null||B===void 0?void 0:B.data)=="string"){var D,ne=document.createElement("div");return ne.innerHTML=t==null||(D=t.response)===null||D===void 0?void 0:D.data,[{message:ne.textContent||ne.innerText}]}return(t==null||(X=t.response)===null||X===void 0||(X=X.data)===null||X===void 0?void 0:X.errors)||(t==null||(V=t.response)===null||V===void 0||(V=V.data)===null||V===void 0?void 0:V.messages)||(t==null||(U=t.response)===null||U===void 0?void 0:U.error)||[{message:t.message||"Server error"}]}},{key:"handleNotificationError",value:function(){var N=i()(c()().mark(function B(X){var V,U,D,ne,q,J,Y,P,w;return c()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(!this.silence){G.next=2;break}throw X;case 2:if(ne=(V=X.config)===null||V===void 0?void 0:V.skipNotify,!(ne&&(typeof ne=="function"&&ne(X)||ne===!0))){G.next=5;break}throw X;case 5:if(q=X==null||(U=X.response)===null||U===void 0||(U=U.data)===null||U===void 0?void 0:U.redirectTo,!q){G.next=8;break}return G.abrupt("return",window.location.href=q);case 8:if((X==null||(D=X.response)===null||D===void 0||(D=D.data)===null||D===void 0?void 0:D.type)!=="application/json"){G.next=12;break}F(X,this.notification),G.next=26;break;case 12:if(u.size>10&&u.clear(),Y=!!(X!=null&&(J=X.response)!==null&&J!==void 0&&(J=J.data)!==null&&J!==void 0&&(J=J.error)!==null&&J!==void 0&&J.maintaining),this.app.maintaining!==Y&&(this.app.maintaining=Y),!this.app.maintaining){G.next=20;break}throw this.app.error=X==null||(P=X.response)===null||P===void 0||(P=P.data)===null||P===void 0?void 0:P.error,X;case 20:this.app.error&&(this.app.error=null);case 21:if(w=this.toErrMessages(X),w=w.filter(function(le){var xe=u.get(le.message);return xe&&new Date().getTime()-xe<500?!1:(u.set(le.message,new Date().getTime()),!0)}),w.length!==0){G.next=25;break}throw X;case 25:m("error",w,this.notification);case 26:throw X;case 27:case"end":return G.stop()}},B,this)}));function t(B){return N.apply(this,arguments)}return t}()},{key:"useNotificationMiddleware",value:function(){var t=this,B=this.handleNotificationError.bind(this);B._name="handleNotificationError",this.axios.interceptors.response.use(function(X){var V;if((V=X.data)!==null&&V!==void 0&&(V=V.messages)!==null&&V!==void 0&&V.length){var U=X.data.messages.filter(function(D){var ne=u.get(typeof D=="string"?D:D.message);return ne&&new Date().getTime()-ne<500?!1:(u.set(D.message,new Date().getTime()),!0)});m("success",U,t.notification)}return X},B)}},{key:"silent",value:function(){var t=this.cloneInstance();return t.silence=!0,t}}]),O}(b.APIClient)},65750:function(He,ae,e){"use strict";e.d(ae,{X:function(){return i}});var Z=e(67294),c=e(1525),k=e(85893),i=function(C){var A=C.apiClient,r=C.children;return(0,k.jsx)(c._.Provider,{value:A,children:r})}},1525:function(He,ae,e){"use strict";e.d(ae,{_:function(){return k}});var Z=e(67294),c=e(1177),k=(0,Z.createContext)(new c.l);k.displayName="APIClientContext"},98755:function(He,ae,e){"use strict";e.d(ae,{L:function(){return k}});var Z=e(67294),c=e(1525);function k(){return(0,Z.useContext)(c._)}},12174:function(He,ae,e){"use strict";e.d(ae,{lP:function(){return x.l},_Z:function(){return F._},Xb:function(){return m.X},LY:function(){return Z.L},QT:function(){return b},Wf:function(){return f}});var Z=e(98755),c=e(97857),k=e.n(c),i=e(15009),g=e.n(i),C=e(99289),A=e.n(C),r=e(5574),K=e.n(r),v=e(84327),j=e(96638),h=e(20578),M=e(50361),n=e.n(M),y=e(67294),L=e(84157),o=e(9996),a=e.n(o),R=e(44908),E=e.n(R);function $(I){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(I).filter(function(d){return I.propertyIsEnumerable(d)}):[]}function Q(I){return Object.keys(I).concat($(I))}var z=new Map;z.set("overwrite",function(I,d){return d}),z.set("andMerge",function(I,d){if(!(!I&&!d))return I?d?{$and:[I,d]}:I:d}),z.set("orMerge",function(I,d){if(!(!I&&!d))return I?d?{$or:[I,d]}:I:d}),z.set("deepMerge",function(I,d){return(0,L.isPlainObject)(I)&&(0,L.isPlainObject)(d)?a()(I,d,{arrayMerge:function(l,S){return S}}):d}),z.set("merge",function(I,d){return(0,L.isPlainObject)(I)&&(0,L.isPlainObject)(d)?Object.assign(I,d):d}),z.set("union",function(I,d){return typeof I=="string"&&(I=I.split(",")),typeof d=="string"&&(d=d.split(",")),E()((I||[]).concat(d||[]))}),z.set("intersect",function(I,d){return typeof I=="string"&&(I=I.split(",")),typeof d=="string"&&(d=d.split(",")),!Array.isArray(I)||I.length===0?d||[]:!Array.isArray(d)||d.length===0?I||[]:I.filter(function(u){return d.includes(u)})});function p(I,d){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Q(d).forEach(function(l){var S=u[l],H=z.get("deepMerge");typeof S=="function"?H=S:typeof S=="string"&&z.has(S)&&(H=z.get(S)),I[l]=H(I[l],d[l])}),I}function b(I){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=(0,j.Z)({}),l=K()(u,2),S=l[0],H=l[1],O=(0,Z.L)(),N;typeof I=="function"?N=I:I?N=function(){var X=A()(g()().mark(function V(){var U,D,ne,q,J,Y,P=arguments;return g()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return U=P.length>0&&P[0]!==void 0?P[0]:{},D=I,ne=D.resource,q=D.url,J=n()(I),ne||q?(J.params=J.params||{},p(J.params,U)):J=(0,v.merge)(J,U),ie.next=6,O.request(J);case 6:return Y=ie.sent,ie.abrupt("return",Y==null?void 0:Y.data);case 8:case"end":return ie.stop()}},V)}));return function(){return X.apply(this,arguments)}}():N=function(){var X=A()(g()().mark(function V(){return g()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:case"end":return D.stop()}},V)}));return function(){return X.apply(this,arguments)}}();var t=k()(k()({},d),{},{onSuccess:function(){for(var V,U=arguments.length,D=new Array(U),ne=0;ne<U;ne++)D[ne]=arguments[ne];(V=d.onSuccess)===null||V===void 0||V.call.apply(V,[d].concat(D)),d.uid&&(O.services[d.uid]=B)}}),B=(0,h.Z)(N,t);return(0,y.useMemo)(function(){return k()(k()({},B),{},{state:S,setState:H})},[B,H,S])}function f(I,d){var u=(0,Z.L)();return u.resource(I,d)}var x=e(1177),m=e(65750),F=e(1525)},38714:function(He,ae,e){"use strict";e.d(ae,{Gq:function(){return C},RQ:function(){return i},_S:function(){return g}});var Z=e(67294),c=e(12174),k=e(85893),i=(0,Z.createContext)(null);i.displayName="CurrentAppInfoContext";var g=function(){return(0,Z.useContext)(i)},C=function(r){var K=(0,c.QT)({url:"app:getInfo"});return(0,k.jsx)(i.Provider,{value:K.data,children:r.children})}},80347:function(He,ae,e){"use strict";e.d(ae,{Gq:function(){return Z.Gq},RQ:function(){return Z.RQ},_S:function(){return Z._S}});var Z=e(38714)},85782:function(He,ae,e){"use strict";e.d(ae,{Bb:function(){return X},HU:function(){return H},O6:function(){return q},V$:function(){return N},WO:function(){return l},WY:function(){return M},bw:function(){return S},ce:function(){return ne},hZ:function(){return D},lN:function(){return m},lV:function(){return V},lo:function(){return U},mI:function(){return O},oO:function(){return $},tJ:function(){return B},vm:function(){return F},xJ:function(){return j},xi:function(){return t},yt:function(){return o}});var Z=e(5574),c=e.n(Z),k=e(96486),i=e.n(k),g=e(67294),C=e(89250),A=e(79655),r=e(85893),K=g.createContext(null);K.displayName="NavigateNoUpdateContext";var v=g.createContext(null);v.displayName="LocationNoUpdateContext";var j=g.createContext("");j.displayName="LocationSearchContext";var h=g.createContext(!1);h.displayName="IsAdminPageContext";var M=g.createContext("");M.displayName="CurrentPageUidContext";var n=g.createContext(!1);n.displayName="MatchAdminContext";var y=g.createContext(!1);y.displayName="MatchAdminNameContext";var L=g.createContext(!1);L.displayName="IsInSettingsPageContext";var o=g.createContext("");o.displayName="CurrentTabUidContext";var a=g.createContext(new URLSearchParams);a.displayName="SearchParamsContext";var R=g.createContext("");R.displayName="RouterBasenameContext";var E=g.createContext({isSubPageClosedByPageMenu:function(){return!1},setFieldSchema:function(){},reset:function(){}});E.displayName="IsSubPageClosedByPageMenuContext";var $=function(Y){var P=Y.children,w=(0,C.useParams)(),ie=(0,g.useRef)({}),G=(0,g.useState)(null),le=c()(G,2),xe=le[0],_e=le[1],Ee=(0,g.useCallback)(function(){var se,me,pe=i().isEmpty(w["*"])&&(xe==null||(se=xe["x-component-props"])===null||se===void 0?void 0:se.openMode)==="page"&&!!((me=ie.current["*"])!==null&&me!==void 0&&me.includes(xe["x-uid"]));return ie.current=w,pe},[xe,w]),ze=(0,g.useCallback)(function(){ie.current={}},[]),Se=(0,g.useMemo)(function(){return{isSubPageClosedByPageMenu:Ee,setFieldSchema:_e,reset:ze}},[Ee,ze]);return(0,r.jsx)(E.Provider,{value:Se,children:P})},Q=function(Y){var P=Y.children,w=(0,C.useHref)("/");return(0,r.jsx)(R.Provider,{value:w,children:P})},z=function(Y){var P=Y.children,w=(0,A.useSearchParams)(),ie=c()(w,1),G=ie[0];return(0,r.jsx)(a.Provider,{value:G,children:P})},p=function(Y){var P=Y.children,w=(0,C.useLocation)().pathname.includes("/settings");return(0,r.jsx)(L.Provider,{value:w,children:P})},b=function(Y){var P=Y.children,w=!!(0,C.useMatch)("/admin");return(0,r.jsx)(n.Provider,{value:w,children:P})},f=function(Y){var P=Y.children,w=!!(0,C.useMatch)("/admin/:name");return(0,r.jsx)(y.Provider,{value:w,children:P})},x=function(Y){var P=Y.children,w=(0,C.useLocation)(),ie=w.pathname.startsWith("/admin");return(0,r.jsx)(h.Provider,{value:ie,children:P})},m=function(Y){var P=Y.children,w=(0,C.useParams)();return(0,r.jsx)(M.Provider,{value:w.name,children:P})},F=function(Y){var P=Y.children,w=(0,C.useParams)();return(0,r.jsx)(o.Provider,{value:w.tabUid,children:P})},I=function(Y){var P=Y.children,w=(0,C.useNavigate)(),ie=g.useRef(w);ie.current=w;var G=g.useCallback(function(le,xe){ie.current(le,xe)},[]);return(0,r.jsx)(K.Provider,{value:G,children:P})},d=function(Y){var P=Y.children,w=(0,C.useLocation)(),ie=g.useRef({});return(0,g.useEffect)(function(){Object.assign(ie.current,w)},[w]),(0,r.jsx)(v.Provider,{value:ie.current,children:P})},u=function(Y){var P=Y.children,w=(0,C.useLocation)();return(0,r.jsx)(j.Provider,{value:w.search,children:P})},l=function(){return g.useContext(K)},S=function(){return g.useContext(v)},H=function(){return g.useContext(j)},O=function(){return g.useContext(h)},N=function(){return g.useContext(M)},t=function(){return g.useContext(n)},B=function(){return g.useContext(y)},X=function(){return g.useContext(L)},V=function(){return g.useContext(o)},U=function(){return g.useContext(a)},D=function(){return g.useContext(R)},ne=function(Y){var P=g.useContext(E),w=P.isSubPageClosedByPageMenu,ie=P.setFieldSchema,G=P.reset;return(0,g.useEffect)(function(){ie(Y)},[Y,ie]),{isSubPageClosedByPageMenu:w,reset:G}},q=function(Y){var P=Y.children;return(0,r.jsx)(I,{children:(0,r.jsx)(d,{children:(0,r.jsx)(x,{children:(0,r.jsx)(u,{children:(0,r.jsx)(b,{children:(0,r.jsx)(f,{children:(0,r.jsx)(z,{children:(0,r.jsx)(Q,{children:(0,r.jsx)(p,{children:P})})})})})})})})})}},31601:function(He,ae,e){"use strict";e.d(ae,{S:function(){return j}});var Z=e(97857),c=e.n(Z),k=e(15009),i=e.n(k),g=e(99289),C=e.n(g),A=e(12444),r=e.n(A),K=e(72004),v=e.n(K),j=function(){function h(M,n){r()(this,h),this.options=M,this.app=n,this.options=M,this.app=n}return v()(h,[{key:"pluginManager",get:function(){return this.app.pluginManager}},{key:"pm",get:function(){return this.app.pm}},{key:"router",get:function(){return this.app.router}},{key:"pluginSettingsManager",get:function(){return this.app.pluginSettingsManager}},{key:"schemaInitializerManager",get:function(){return this.app.schemaInitializerManager}},{key:"schemaSettingsManager",get:function(){return this.app.schemaSettingsManager}},{key:"dataSourceManager",get:function(){return this.app.dataSourceManager}},{key:"afterAdd",value:function(){var M=C()(i()().mark(function y(){return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:case"end":return o.stop()}},y)}));function n(){return M.apply(this,arguments)}return n}()},{key:"beforeLoad",value:function(){var M=C()(i()().mark(function y(){return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:case"end":return o.stop()}},y)}));function n(){return M.apply(this,arguments)}return n}()},{key:"load",value:function(){var M=C()(i()().mark(function y(){return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:case"end":return o.stop()}},y)}));function n(){return M.apply(this,arguments)}return n}()},{key:"t",value:function(n){var y,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.app.i18n.t(n,c()({ns:(y=this.options)===null||y===void 0?void 0:y.packageName},L))}}]),h}()},33285:function(He,ae,e){"use strict";e.d(ae,{Z:function(){return c}});var Z=e(67294),c=(0,Z.createContext)(null);c.displayName="ApplicationContext"},43173:function(He,ae,e){"use strict";e.d(ae,{qD:function(){return Z.q},rM:function(){return c.r},Xb:function(){return g.X},j7:function(){return k},tv:function(){return i}});var Z=e(88482),c=e(99501);function k(C){var A=(0,Z.q)();return A.pm.get(C)}var i=function(){var A=(0,Z.q)();return A.router},g=e(27560)},88482:function(He,ae,e){"use strict";e.d(ae,{q:function(){return k}});var Z=e(67294),c=e(33285),k=function(){return(0,Z.useContext)(c.Z)||{}}},99501:function(He,ae,e){"use strict";e.d(ae,{r:function(){return i}});var Z=e(57953),c=e(67294),k=e(88482),i=function(){var C=(0,k.q)(),A=(0,c.useCallback)(function(){var r;return C!=null&&C.renderComponent?C==null||(r=C.renderComponent)===null||r===void 0?void 0:r.call(C,"AppSpin"):c.createElement(Z.Z)},[C]);return{render:A}}},27560:function(He,ae,e){"use strict";e.d(ae,{X:function(){return g}});var Z=e(96486),c=e.n(Z),k=e(67294),i=e(43173),g=function(A){var r=(0,i.qD)(),K=(0,k.useMemo)(function(){return r.getGlobalVar(A)},[r,A]);if((0,Z.isFunction)(K))try{return K()}catch(v){console.error("Error calling global variable function for key: ".concat(A),v);return}return K}},68091:function(He,ae,e){"use strict";e.d(ae,{eB:function(){return le},oz:function(){return xe},y$:function(){return ge},Mx:function(){return Ce},Zz:function(){return pe.Z},X_:function(){return Ie},nl:function(){return Ze.nl},WY:function(){return Se.WY},lN:function(){return Se.lN},yt:function(){return Se.yt},vm:function(){return Se.vm},O6:function(){return Se.O6},oO:function(){return Se.oO},xJ:function(){return Se.xJ},Sy:function(){return Oe.S},nS:function(){return Ee},OW:function(){return re},k2:function(){return be},MC:function(){return _e},Ms:function(){return Ze.Ms},HS:function(){return Ze.HS},IQ:function(){return Ze.IQ},yH:function(){return Ze.yH},E0:function(){return Ze.E0},V4:function(){return Ze.V4},qU:function(){return Ze.qU},lV:function(){return Ze.lV},Mm:function(){return Ze.Mm},iP:function(){return Ze.iP},IY:function(){return Ze.IY},VG:function(){return Ze.VG},LU:function(){return Ze.LU},eN:function(){return Ze.eN},tu:function(){return Ze.tu},kw:function(){return Ze.kw},iW:function(){return Ze.iW},ud:function(){return Ze.ud},eU:function(){return Ze.eU},xv:function(){return Ze.xv},_n:function(){return Ze._n},wH:function(){return Ze.wH},A4:function(){return tt.A4},F5:function(){return tt.F5},kY:function(){return tt.kY},dk:function(){return tt.dk},XD:function(){return tt.XD},GC:function(){return tt.GC},J1:function(){return wt.J1},V$:function(){return wt.V$},qC:function(){return Tt},lo:function(){return xt},w9:function(){return oe},NB:function(){return Ct},HL:function(){return Dt.H},yq:function(){return Vt},FH:function(){return fe},h6:function(){return Ze.h6},pn:function(){return St},qD:function(){return Ae.qD},rM:function(){return Ae.rM},ne:function(){return Ze.ne},Rx:function(){return Se.V$},r_:function(){return Se.lo},zJ:function(){return Se.lV},bw:function(){return Ze.bw},Xb:function(){return Ae.Xb},mI:function(){return Se.mI},Bb:function(){return Se.Bb},ce:function(){return Se.ce},fj:function(){return Se.bw},HU:function(){return Se.HU},xi:function(){return Se.xi},tJ:function(){return Se.tJ},WO:function(){return Se.WO},j7:function(){return Ae.j7},tv:function(){return Ae.tv},hZ:function(){return Se.hZ},q_:function(){return Ze.q_},UR:function(){return Ze.UR},hL:function(){return Ze.hL},IU:function(){return Ze.IU},_$:function(){return Ze._$},vH:function(){return Ze.vH},J$:function(){return tt.J$},mQ:function(){return Ut.m},Po:function(){return wt.Po},du:function(){return wt.du},W_:function(){return Ze.W_}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(19632),C=e.n(g),A=e(97857),r=e.n(A),K=e(12444),v=e.n(K),j=e(72004),h=e.n(j),M=e(9783),n=e.n(M),y=e(85667),L=e(84816),o=e(27361),a=e.n(o),R=e(82492),E=e.n(R),$=e(36968),Q=e.n($),z=e(67294),p=e(20745),b=e(6339),f=e(79655),x=e(89250),m=e(12174),F=e(20085),I=e(69962),d=e(58384),u=e(96695),l=e.n(u),S=e(5574),H=e.n(S),O=e(44987),N=e.n(O);function t(ot){Object.entries(ot).forEach(function(qe){var Be=H()(qe,2),rt=Be[0],Ve=Be[1];window.define("".concat(rt,"/client"),function(){return Ve})})}function B(ot){window.define("".concat(ot,"/client"),["exports",ot],function(qe,Be){Object.defineProperty(qe,"__esModule",{value:!0}),Object.keys(Be).forEach(function(rt){rt!=="__esModule"&&(rt in qe&&qe[rt]===Be[rt]||Object.defineProperty(qe,rt,{enumerable:!0,get:function(){return Be[rt]}}))})})}function X(ot,qe){ot.requirejs.config({waitSeconds:120,paths:qe.reduce(function(Be,rt){return Be[rt.packageName]=rt.url,Be},{})})}function V(ot,qe){return function(){for(var Be=arguments.length,rt=new Array(Be),Ve=0;Ve<Be;Ve++)rt[Ve]=arguments[Ve];var $e=rt.map(function(Pt,Lt){return[ot[Lt].name,(Pt==null?void 0:Pt.default)||Pt]}).filter(function(Pt){return Pt[1]});qe($e);var it=rt.map(function(Pt,Lt){return Pt?null:Lt}).filter(function(Pt){return Pt!==null}).map(function(Pt){return ot[Pt].packageName});it.length>0&&console.error("[nocobase load plugin error]: These plugins do not have an `export.default` exported content or there is an error in the plugins. error plugins: \r\n%s",it.join(`, \r
`))}}function U(ot){var qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];X(ot,qe);var Be=qe.map(function(rt){return rt.packageName});return Be.forEach(function(rt){B(rt)}),new Promise(function(rt,Ve){ot.requirejs(Be,V(qe,rt),Ve)})}function D(ot){return ne.apply(this,arguments)}function ne(){return ne=i()(c()().mark(function ot(qe){var Be,rt,Ve,$e,it,Pt,Lt,$t,$n,pn,un,Xn,Yn,jn;return c()().wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:if(Be=qe.requirejs,rt=qe.pluginData,Ve=qe.devDynamicImport,rt.length!==0){fr.next=3;break}return fr.abrupt("return",[]);case 3:if($e=[],it={},!Ve){fr.next=38;break}Pt=!1,Lt=!1,fr.prev=8,$n=N()(rt);case 10:return fr.next=12,$n.next();case 12:if(!(Pt=!(pn=fr.sent).done)){fr.next=21;break}return un=pn.value,fr.next=16,Ve(un.packageName);case 16:Xn=fr.sent,Xn&&($e.push([un.name,Xn.default]),it[un.packageName]=Xn.default);case 18:Pt=!1,fr.next=10;break;case 21:fr.next=27;break;case 23:fr.prev=23,fr.t0=fr.catch(8),Lt=!0,$t=fr.t0;case 27:if(fr.prev=27,fr.prev=28,!(Pt&&$n.return!=null)){fr.next=32;break}return fr.next=32,$n.return();case 32:if(fr.prev=32,!Lt){fr.next=35;break}throw $t;case 35:return fr.finish(32);case 36:return fr.finish(27);case 37:t(it);case 38:if(Yn=rt.filter(function(Ar){return!it[Ar.packageName]}),Yn.length!==0){fr.next=41;break}return fr.abrupt("return",$e);case 41:if($e.length!==0){fr.next=46;break}return fr.next=44,U(Be,Yn);case 44:jn=fr.sent,$e.push.apply($e,C()(jn));case 46:return fr.abrupt("return",$e);case 47:case"end":return fr.stop()}},ot,null,[[8,23,27,37],[28,,32,36]])})),ne.apply(this,arguments)}var q=function(){function ot(qe,Be,rt){v()(this,ot),n()(this,"pluginInstances",new Map),n()(this,"pluginsAliases",{}),n()(this,"initPlugins",void 0),this._plugins=qe,this.loadRemotePlugins=Be,this.app=rt,this.app=rt,this.initPlugins=this.init(qe)}return h()(ot,[{key:"init",value:function(){var qe=i()(c()().mark(function rt(Ve){return c()().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.next=2,this.initStaticPlugins(Ve);case 2:if(!this.loadRemotePlugins){it.next=5;break}return it.next=5,this.initRemotePlugins();case 5:case"end":return it.stop()}},rt,this)}));function Be(rt){return qe.apply(this,arguments)}return Be}()},{key:"initStaticPlugins",value:function(){var qe=i()(c()().mark(function rt(){var Ve,$e,it,Pt,Lt,$t,$n,pn,un,Xn=arguments;return c()().wrap(function(jn){for(;;)switch(jn.prev=jn.next){case 0:Ve=Xn.length>0&&Xn[0]!==void 0?Xn[0]:[],$e=!1,it=!1,jn.prev=3,Lt=N()(Ve);case 5:return jn.next=7,Lt.next();case 7:if(!($e=!($t=jn.sent).done)){jn.next=16;break}return $n=$t.value,pn=Array.isArray($n)?$n[0]:$n,un=Array.isArray($n)?$n[1]:void 0,jn.next=13,this.add(pn,un);case 13:$e=!1,jn.next=5;break;case 16:jn.next=22;break;case 18:jn.prev=18,jn.t0=jn.catch(3),it=!0,Pt=jn.t0;case 22:if(jn.prev=22,jn.prev=23,!($e&&Lt.return!=null)){jn.next=27;break}return jn.next=27,Lt.return();case 27:if(jn.prev=27,!it){jn.next=30;break}throw Pt;case 30:return jn.finish(27);case 31:return jn.finish(22);case 32:case"end":return jn.stop()}},rt,this,[[3,18,22,32],[23,,27,31]])}));function Be(){return qe.apply(this,arguments)}return Be}()},{key:"initRemotePlugins",value:function(){var qe=i()(c()().mark(function rt(){var Ve,$e=this,it,Pt,Lt,$t,$n,pn,un,Xn,Yn;return c()().wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.next=2,this.app.apiClient.request({url:"pm:listEnabled"});case 2:return it=ir.sent,Pt=(it==null||(Ve=it.data)===null||Ve===void 0?void 0:Ve.data)||[],ir.next=6,D({requirejs:this.app.requirejs,pluginData:Pt,devDynamicImport:this.app.devDynamicImport});case 6:Lt=ir.sent,$t=!1,$n=!1,ir.prev=9,un=c()().mark(function fr(){var Ar,wr,Kr,ao;return c()().wrap(function(_r){for(;;)switch(_r.prev=_r.next){case 0:return Ar=H()(Yn.value,2),wr=Ar[0],Kr=Ar[1],ao=Pt.find(function(Rr){return Rr.name===wr}),_r.next=4,$e.add(Kr,ao);case 4:case"end":return _r.stop()}},fr)}),Xn=N()(Lt);case 12:return ir.next=14,Xn.next();case 14:if(!($t=!(Yn=ir.sent).done)){ir.next=19;break}return ir.delegateYield(un(),"t0",16);case 16:$t=!1,ir.next=12;break;case 19:ir.next=25;break;case 21:ir.prev=21,ir.t1=ir.catch(9),$n=!0,pn=ir.t1;case 25:if(ir.prev=25,ir.prev=26,!($t&&Xn.return!=null)){ir.next=30;break}return ir.next=30,Xn.return();case 30:if(ir.prev=30,!$n){ir.next=33;break}throw pn;case 33:return ir.finish(30);case 34:return ir.finish(25);case 35:case"end":return ir.stop()}},rt,this,[[9,21,25,35],[26,,30,34]])}));function Be(){return qe.apply(this,arguments)}return Be}()},{key:"add",value:function(){var qe=i()(c()().mark(function rt(Ve){var $e,it,Pt=arguments;return c()().wrap(function($t){for(;;)switch($t.prev=$t.next){case 0:return $e=Pt.length>1&&Pt[1]!==void 0?Pt[1]:{},it=this.getInstance(Ve,$e),this.pluginInstances.set(Ve,it),$e.name&&(this.pluginsAliases[$e.name]=it),$e.packageName&&(this.pluginsAliases[$e.packageName]=it),$t.next=7,it.afterAdd();case 7:case"end":return $t.stop()}},rt,this)}));function Be(rt){return qe.apply(this,arguments)}return Be}()},{key:"get",value:function(Be){return typeof Be=="string"?this.pluginsAliases[Be]:this.pluginInstances.get(Be.default||Be)}},{key:"getInstance",value:function(Be,rt){return new Be(rt,this.app)}},{key:"load",value:function(){var qe=i()(c()().mark(function rt(){var Ve,$e,it,Pt,Lt,$t;return c()().wrap(function(pn){for(;;)switch(pn.prev=pn.next){case 0:return pn.next=2,this.initPlugins;case 2:Ve=l()(this.pluginInstances.values()),pn.prev=3,Ve.s();case 5:if(($e=Ve.n()).done){pn.next=11;break}return it=$e.value,pn.next=9,it.beforeLoad();case 9:pn.next=5;break;case 11:pn.next=16;break;case 13:pn.prev=13,pn.t0=pn.catch(3),Ve.e(pn.t0);case 16:return pn.prev=16,Ve.f(),pn.finish(16);case 19:Pt=l()(this.pluginInstances.values()),pn.prev=20,Pt.s();case 22:if((Lt=Pt.n()).done){pn.next=29;break}return $t=Lt.value,pn.next=26,$t.load();case 26:this.app.eventBus.dispatchEvent(new CustomEvent("plugin:".concat($t.options.name,":loaded"),{detail:$t}));case 27:pn.next=22;break;case 29:pn.next=34;break;case 31:pn.prev=31,pn.t1=pn.catch(20),Pt.e(pn.t1);case 34:return pn.prev=34,Pt.f(),pn.finish(34);case 37:case"end":return pn.stop()}},rt,this,[[3,13,16,19],[20,31,34,37]])}));function Be(){return qe.apply(this,arguments)}return Be}()}]),ot}(),J=e(13769),Y=e.n(J),P=e(96486),w=e.n(P),ie=e(82369),G=["title","icon","aclSnippet"],le="admin.settings.",xe="/admin/settings/",_e="pm.",Ee=function(){function ot(qe,Be){var rt=this;v()(this,ot),n()(this,"settings",{}),n()(this,"aclSnippets",[]),n()(this,"app",void 0),n()(this,"cachedList",{}),this.app=Be,Object.entries(qe||{}).forEach(function(Ve){var $e=H()(Ve,2),it=$e[0],Pt=$e[1];rt.add(it,Pt)})}return h()(ot,[{key:"clearCache",value:function(){this.cachedList={}}},{key:"setAclSnippets",value:function(Be){this.aclSnippets=Be}},{key:"getAclSnippet",value:function(Be){var rt=this.settings[Be];return rt!=null&&rt.skipAclConfigure?null:rt!=null&&rt.aclSnippet?rt.aclSnippet:"".concat(_e).concat(Be)}},{key:"getRouteName",value:function(Be){return"".concat(le).concat(Be)}},{key:"getRoutePath",value:function(Be){return"".concat(xe).concat(Be.replaceAll(".","/"))}},{key:"add",value:function(Be,rt){var Ve=Be.split("."),$e=Ve[0];this.settings[Be]=r()(r()(r()({},this.settings[Be]),{},{Component:x.Outlet},rt),{},{name:Be,topLevelName:rt.topLevelName||$e}),Ve.length>1&&(0,P.set)(this.settings,Ve.join(".children."),this.settings[Be]),this.app.router.add(this.getRouteName(Be),{path:this.getRoutePath(Be),Component:this.settings[Be].Component})}},{key:"remove",value:function(Be){var rt=this;Object.keys(this.settings).forEach(function(Ve){Ve.startsWith(Be)&&(delete rt.settings[Ve],rt.app.router.remove("".concat(le).concat(Ve)))})}},{key:"hasAuth",value:function(Be){return this.aclSnippets.includes("!".concat(this.getAclSnippet("*")))?!1:this.aclSnippets.includes("!".concat(this.getAclSnippet(Be)))===!1}},{key:"getSetting",value:function(Be){return this.settings[Be]}},{key:"has",value:function(Be){var rt=this.hasAuth(Be);return rt?!!this.getSetting(Be):!1}},{key:"get",value:function(Be){var rt=this,Ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,$e=this.hasAuth(Be),it=this.getSetting(Be);if(Ve&&!$e||!it)return null;var Pt=Object.keys(it.children||{}).sort(function(un,Xn){return un.localeCompare(Xn)}).map(function(un){return rt.get(it.children[un].name,Ve)}).filter(Boolean).sort(function(un,Xn){return(un.sort||0)-(Xn.sort||0)}),Lt=it.title,$t=it.icon,$n=it.aclSnippet,pn=Y()(it,G);return r()(r()({isTopLevel:Be===it.topLevelName},pn),{},{aclSnippet:this.getAclSnippet(Be),title:Lt,isAllow:$e,label:Lt,icon:typeof $t=="string"?(0,z.createElement)(ie.JO,{type:$t}):$t,path:this.getRoutePath(Be),key:Be,children:Pt.length?Pt:void 0})}},{key:"getList",value:function(){var Be=this,rt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,Ve=JSON.stringify(rt);return this.cachedList[Ve]?this.cachedList[Ve]:this.cachedList[Ve]=Array.from(new Set(Object.values(this.settings).map(function($e){return $e.topLevelName}))).sort(function($e,it){return $e.localeCompare(it)}).map(function($e){return Be.get($e,rt)}).filter(Boolean).sort(function($e,it){return($e.sort||0)-(it.sort||0)})}},{key:"getAclSnippets",value:function(){var Be=this;return Object.keys(this.settings).map(function(rt){return Be.getAclSnippet(rt)}).filter(Boolean)}}]),ot}(),ze=e(50105),Se=e(85782),se=e(22248),me=e(4511),pe=e(33285),ee=e(85893),ue=["children"],ge=(0,se.observer)(function(ot){var qe,Be=ot.children,rt=Y()(ot,ue),Ve=rt.app,$e=(0,z.useCallback)(function(Pt,Lt){console.error(Pt);var $t=new Error;$t.stack=Lt.componentStack.trim(),console.error($t)},[]);(0,z.useEffect)(function(){Ve.load()},[Ve]);var it=Ve.getComponent("AppError");return Ve.loading?Ve.renderComponent("AppSpin",{app:Ve}):!Ve.maintained&&Ve.maintaining?Ve.renderComponent("AppMaintaining",{app:Ve}):(qe=Ve.error)!==null&&qe!==void 0&&qe.code&&!(Ve.maintained&&Ve.maintaining)?(0,ee.jsx)(it,{app:Ve,error:Ve.error}):(0,ee.jsx)(me.SV,{FallbackComponent:function(Lt){return(0,ee.jsx)(it,r()({app:Ve,error:Ve.error},Lt))},onError:$e,children:(0,ee.jsxs)(pe.Z.Provider,{value:Ve,children:[Ve.maintained&&Ve.maintaining&&Ve.renderComponent("AppMaintainingDialog",{app:Ve}),Ve.renderComponent("AppMain",void 0,Be)]})})},{displayName:"AppComponent"}),Ie=function(qe){var Be=qe.children;return(0,ee.jsx)(ee.Fragment,{children:Be})},Ae=e(43173),Le=z.memo(function(ot){var qe=ot.children,Be=(0,Ae.qD)(),rt=(0,z.useMemo)(function(){return Be.router.getRouterComponent(qe)},[Be]),Ve=(0,z.useMemo)(function(){return Be.getComposeProviders()},[Be]);return(0,ee.jsx)(rt,{BaseLayout:Ve})});Le.displayName="MainComponent";var Te=function(){return(0,ee.jsx)("div",{children:"Loading..."})},je=function(qe){var Be=qe.error;return(0,ee.jsxs)("div",{children:[(0,ee.jsx)("div",{children:"App Error"}),Be==null?void 0:Be.message,{NODE_ENV:"production",PUBLIC_PATH:"auto"}.__TEST__&&(Be==null?void 0:Be.stack)]})},Pe=function(){return(0,ee.jsx)("div",{})},fe={AppMain:Le,AppSpin:Te,AppError:je,AppNotFound:Pe},re=z.memo(function(ot){return(0,ee.jsx)(x.UNSAFE_RouteContext.Provider,{value:{outlet:null,matches:[],isDataRoute:!1},children:(0,ee.jsx)(x.UNSAFE_LocationContext.Provider,{value:null,children:ot.children})})});re.displayName="RouterContextCleaner";var T=["Component","element","children"],ce=["type"],be=function(){function ot(){var qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Be=arguments.length>1?arguments[1]:void 0;v()(this,ot),n()(this,"routes",{}),n()(this,"options",void 0),n()(this,"app",void 0),n()(this,"router",void 0),this.options=qe,this.app=Be,this.routes=qe.routes||{}}return h()(ot,[{key:"basename",get:function(){return this.router.basename}},{key:"state",get:function(){return this.router.state}},{key:"navigate",get:function(){return this.router.navigate}},{key:"getRoutesTree",value:function(){for(var Be=this,rt={},Ve=0,$e=Object.entries(this.routes);Ve<$e.length;Ve++){var it=H()($e[Ve],2),Pt=it[0],Lt=it[1];(0,P.set)(rt,Pt.split(".").join(".children."),r()(r()({},(0,P.get)(rt,Pt.split(".").join(".children."))),Lt))}var $t=function $n(pn){return Object.values(pn).reduce(function(un,Xn){if(Object.keys(Xn).length===1&&Xn.children)un.push.apply(un,C()($n(Xn.children)));else{var Yn=Xn.Component,jn=Xn.element,ir=Xn.children,fr=Y()(Xn,T),Ar=jn;Yn&&(typeof Yn=="string"?Ar=Be.app.renderComponent(Yn):Ar=z.createElement(Yn));var wr=r()(r()({},fr),{},{element:Ar,children:ir?$n(ir):void 0});un.push(wr)}return un},[])};return $t(rt)}},{key:"getRoutes",value:function(){return this.routes}},{key:"setType",value:function(Be){this.options.type=Be}},{key:"getBasename",value:function(){return this.options.basename}},{key:"setBasename",value:function(Be){this.options.basename=Be}},{key:"getRouterComponent",value:function(Be){var rt=this,Ve=this.options,$e=Ve.type,it=$e===void 0?"browser":$e,Pt=Y()(Ve,ce),Lt={hash:f.createHashRouter,browser:f.createBrowserRouter,memory:x.createMemoryRouter},$t=this.getRoutesTree(),$n=(0,z.createContext)(null),pn=function(){var jn=(0,z.useContext)($n);return(0,ee.jsx)(Se.O6,{children:(0,ee.jsx)(jn,{children:(0,ee.jsxs)(ze.ZP,{children:[(0,ee.jsx)(x.Outlet,{}),Be]})})})},un=function(){var jn=(0,x.useRouteError)();throw jn};this.router=Lt[it]([{element:(0,ee.jsx)(pn,{}),errorElement:(0,ee.jsx)(un,{}),children:$t}],Pt);var Xn=function(jn){var ir=jn.BaseLayout,fr=ir===void 0?Ie:ir;return(0,ee.jsx)($n.Provider,{value:fr,children:(0,ee.jsx)(re,{children:(0,ee.jsx)(f.RouterProvider,{router:rt.router})})})};return Xn}},{key:"add",value:function(Be,rt){this.routes[Be]=rt}},{key:"get",value:function(Be){return this.routes[Be]}},{key:"has",value:function(Be){return!!this.get(Be)}},{key:"remove",value:function(Be){delete this.routes[Be]}}]),ot}();function oe(ot,qe){return new be(ot,qe)}var Re=function(){function ot(qe){if(v()(this,ot),n()(this,"_ws",void 0),n()(this,"_reconnectTimes",0),n()(this,"events",[]),n()(this,"options",void 0),n()(this,"app",void 0),n()(this,"enabled",void 0),n()(this,"connected",!1),n()(this,"serverDown",!1),n()(this,"lastMessage",{}),!qe){this.enabled=!1;return}this.options=qe===!0?{}:qe,this.enabled=!0,(0,y.define)(this,{serverDown:y.observable.ref,connected:y.observable.ref,lastMessage:y.observable.ref})}return h()(ot,[{key:"getURL",value:function(){if(this.app){var Be=this.app.getApiUrl();if(Be){var rt=(0,L.getSubAppName)(this.app.getPublicPath()),Ve=rt?"?__appName=".concat(rt):"",$e=this.options.basename||"/ws";if(this.options.url){var it=new URL(this.options.url);if(it.hostname==="localhost"){var Pt=location.protocol==="https:"?"wss":"ws";return"".concat(Pt,"://").concat(location.hostname,":").concat(it.port).concat($e).concat(Ve)}return"".concat(this.options.url).concat(Ve)}try{var Lt=new URL(Be);return"".concat(Lt.protocol==="https:"?"wss":"ws","://").concat(Lt.host).concat($e).concat(Ve)}catch{return"".concat(location.protocol==="https:"?"wss":"ws","://").concat(location.host).concat($e).concat(Ve)}}}}},{key:"reconnectAttempts",get:function(){var Be;return((Be=this.options)===null||Be===void 0?void 0:Be.reconnectAttempts)||30}},{key:"reconnectInterval",get:function(){var Be;return((Be=this.options)===null||Be===void 0?void 0:Be.reconnectInterval)||1e3}},{key:"pingInterval",get:function(){var Be;return((Be=this.options)===null||Be===void 0?void 0:Be.pingInterval)||3e4}},{key:"readyState",get:function(){return this._ws?this._ws.readyState:-1}},{key:"connect",value:function(){var Be=this;if(this.enabled&&(this._reconnectTimes===0&&console.log("[nocobase-ws]: connecting..."),!(this._reconnectTimes>=this.reconnectAttempts)&&this.readyState!==WebSocket.OPEN)){this._reconnectTimes++;var rt=new WebSocket(this.getURL(),this.options.protocols),Ve;rt.onopen=function(){console.log("[nocobase-ws]: connected."),Be.serverDown=!1,Be._ws&&Be.removeAllListeners(),Be._reconnectTimes=0,Be._ws=rt;var $e=l()(Be.events),it;try{for($e.s();!(it=$e.n()).done;){var Pt=it.value,Lt=Pt.type,$t=Pt.listener,$n=Pt.options;Be._ws.addEventListener(Lt,$t,$n)}}catch(pn){$e.e(pn)}finally{$e.f()}Ve=setInterval(function(){return Be.send("ping")},Be.pingInterval),Be.connected=!0,Be.emit("open",{})},rt.onerror=i()(c()().mark(function $e(){return c()().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:console.log("onerror",Be.readyState,Be._reconnectTimes);case 1:case"end":return Pt.stop()}},$e)})),rt.onclose=function(){var $e=i()(c()().mark(function it(Pt){return c()().wrap(function($t){for(;;)switch($t.prev=$t.next){case 0:setTimeout(function(){return Be.connect()},Be.reconnectInterval),console.log("onclose",Be.readyState,Be._reconnectTimes,Be.serverDown),Be.connected=!1,clearInterval(Ve);case 4:case"end":return $t.stop()}},it)}));return function(it){return $e.apply(this,arguments)}}()}}},{key:"reconnect",value:function(){this._reconnectTimes=0,this.connect()}},{key:"close",value:function(){if(this._ws)return this._reconnectTimes=this.reconnectAttempts,this._ws.close()}},{key:"send",value:function(Be){if(this._ws)return this._ws.send(Be)}},{key:"on",value:function(Be,rt,Ve){this.events.push({type:Be,listener:rt,options:Ve}),this._ws&&this._ws.addEventListener(Be,rt,Ve)}},{key:"emit",value:function(Be,rt){var Ve=l()(this.events),$e;try{for(Ve.s();!($e=Ve.n()).done;){var it=$e.value;it.type===Be&&it.listener(rt)}}catch(Pt){Ve.e(Pt)}finally{Ve.f()}}},{key:"off",value:function(Be,rt,Ve){var $e=0,it=l()(this.events),Pt;try{for(it.s();!(Pt=it.n()).done;){var Lt=Pt.value;if(Lt.type===Be&&Lt.listener===rt){this.events.splice($e,1);break}$e++}}catch($t){it.e($t)}finally{it.f()}this._ws&&this._ws.removeEventListener(Be,rt,Ve)}},{key:"removeAllListeners",value:function(){if(this._ws){var Be=l()(this.events),rt;try{for(Be.s();!(rt=Be.n()).done;){var Ve=rt.value,$e=Ve.type,it=Ve.listener,Pt=Ve.options;this._ws.removeEventListener($e,it,Pt)}}catch(Lt){Be.e(Lt)}finally{Be.f()}}}}]),ot}(),Ze=e(59582),We=e(1329),tt=e(5537);function St(ot){if(!ot)return console.warn("Failed to mount app: mount target should not be null or undefined."),null;if(typeof ot=="string"){var qe=document.querySelector(ot);return qe||console.warn('Failed to mount app: mount target selector "'.concat(ot,'" returned null.')),qe}return window.ShadowRoot&&ot instanceof window.ShadowRoot&&ot.mode==="closed"&&console.warn('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),ot}var Tt=function(){for(var qe=arguments.length,Be=new Array(qe),rt=0;rt<qe;rt++)Be[rt]=arguments[rt];var Ve=Be.reduce(function($e,it){var Pt=H()(it,2),Lt=Pt[0],$t=Pt[1],$n=function(un){var Xn=un.children;return(0,ee.jsx)($e,{children:(0,ee.jsx)(Lt,r()(r()({},$t),{},{children:Xn}))})};return $n.displayName="compose(".concat(Lt.displayName||Lt.name,")"),$n},Ie);return function($e){return function(it){return(0,ee.jsx)(Ve,{children:$e&&(0,ee.jsx)($e,r()({},it))})}}},lt=e(49411),ut=e(92052),nt=e(42617),Je=e(23861),hn=e(80222),mn=e(36905),vn=e(24285),an=e(97133),fn=e(5552),cn=e(86201),_n=e(18918),zt=e(58011),xn=e(80844),Qt=e(84327),Et=e(50754),en=e(27655),Rn=e(84157),An=e(53567),Jn=e(60362),Zn=e(83169),rr=e(87066),mr=e(93162),Er=e(36609),Ft=e(73935),ct=e(56892),Mt=e(21143);function kt(ot){ot.define("react",function(){return z}),ot.define("react-dom",function(){return Ft}),ot.define("react/jsx-runtime",function(){return ee}),ot.define("react-router",function(){return x}),ot.define("react-router-dom",function(){return f}),ot.define("antd",function(){return Jn}),ot.define("antd-style",function(){return Zn}),ot.define("@ant-design/icons",function(){return ut}),ot.define("@ant-design/cssinjs",function(){return lt}),ot.define("i18next",function(){return Er}),ot.define("react-i18next",function(){return ct}),ot.define("@formily/antd-v5",function(){return fn}),ot.define("@formily/core",function(){return cn}),ot.define("@formily/react",function(){return xn}),ot.define("@formily/shared",function(){return Qt}),ot.define("@formily/json-schema",function(){return _n}),ot.define("@formily/reactive",function(){return y}),ot.define("@formily/path",function(){return zt}),ot.define("@formily/validator",function(){return Et}),ot.define("@formily/reactive-react",function(){return se}),ot.define("@nocobase/utils",function(){return Rn}),ot.define("@nocobase/utils/client",function(){return Rn}),ot.define("@nocobase/client",function(){return Mt}),ot.define("@nocobase/client/client",function(){return Mt}),ot.define("@nocobase/evaluators",function(){return en}),ot.define("@nocobase/evaluators/client",function(){return en}),ot.define("@nocobase/sdk",function(){return L}),ot.define("@dnd-kit/accessibility",function(){return nt}),ot.define("@dnd-kit/core",function(){return Je}),ot.define("@dnd-kit/modifiers",function(){return hn}),ot.define("@dnd-kit/sortable",function(){return mn}),ot.define("@dnd-kit/utilities",function(){return vn}),ot.define("axios",function(){return rr.Z}),ot.define("dayjs",function(){return Rn.dayjs}),ot.define("lodash",function(){return w()}),ot.define("ahooks",function(){return An}),ot.define("@emotion/css",function(){return an}),ot.define("file-saver",function(){return mr})}var Rt=e(57780),_t=e(52020),Bt=e(88996),jt=e(87180),Xt=e(57638),Wt=e(39270),Nt=e(51283),nn=e(70993),Zt=function(qe){return qe?"nocobase_".concat(qe,"_designable").toUpperCase():"nocobase_designable".toUpperCase()},Cn=function(qe){var Be=(0,Nt.Z)(Zt(qe.appName),{defaultValue:!!qe.designable}),rt=H()(Be,2),Ve=rt[0],$e=rt[1];return(0,ee.jsx)(nn.Tz,r()(r()({},qe),{},{designable:Ve,onDesignableChange:function(Pt){$e(Pt)}}))},Yt=function(qe){return typeof qe.designable=="boolean"?(0,ee.jsx)(nn.Tz,r()({},qe)):(0,ee.jsx)(Cn,r()({},qe))},Mn=e(52677),bn=e.n(Mn);function Gt(){"use strict";Array.isArray||(Array.isArray=function(Ve){return Object.prototype.toString.call(Ve)==="[object Array]"});function ot(Ve){for(var $e=[],it=0,Pt=Ve.length;it<Pt;it++)$e.indexOf(Ve[it])===-1&&$e.push(Ve[it]);return $e}function qe(Ve,$e){return JSON.stringify(Ve)===JSON.stringify($e)}var Be={},rt={$is:function($e,it){return $e===it},$match:function($e,it){return Array.isArray($e)&&Array.isArray(it)&&$e.some(function(Pt){return Array.isArray(Pt)})?$e.some(function(Pt){return(Pt==null?void 0:Pt.length)===it.length&&(Pt==null?void 0:Pt.every(function(Lt,$t){return Lt===it[$t]}))}):JSON.stringify($e)===JSON.stringify(it)},$eq:function($e,it){return Array.isArray($e)&&Array.isArray(it)?qe($e,it):Array.isArray($e)?$e.includes(it):$e==it},$ne:function($e,it){return $e!=it},"!==":function($e,it){return $e!==it},$gt:function($e,it){return Array.isArray($e)?$e.some(function(Pt){return Pt>it}):$e>it},$gte:function($e,it){return $e>=it},$lt:function($e,it,Pt){return Array.isArray($e)?$e.some(function(Lt){return Lt<it}):Pt===void 0?$e<it:$e<it&&it<Pt},$lte:function($e,it,Pt){return Pt===void 0?$e<=it:$e<=it&&it<=Pt},$exists:function($e){return Be.truthy($e)},$notEmpty:function($e){return Be.truthy($e)},$empty:function($e){return Array.isArray($e)?$e.some(function(it){return!Be.truthy(it)}):!Be.truthy($e)},$notExists:function($e){return!Be.truthy($e)},"%":function($e,it){return $e%it},log:function($e){return $e},$in:function($e,it){return!it||typeof it.indexOf>"u"?!1:Array.isArray($e)&&Array.isArray(it)?it.some(function(Pt){return $e.includes(Pt)}):it.indexOf($e)!==-1},$notIn:function($e,it){return!it||typeof it.indexOf>"u"?!1:it.indexOf($e)===-1},$includes:function($e,it){return!$e||typeof $e.indexOf>"u"?!1:Array.isArray($e)?$e.some(function(Pt){return Pt==null?void 0:Pt.includes(it)}):$e.indexOf(it)!==-1},$notIncludes:function($e,it){return Array.isArray($e)?!$e.some(function(Pt){return(Pt||"").includes(it)}):($e=$e||"",!$e.includes(it))},$anyOf:function($e,it){return $e==null||$e.length===0?!1:Array.isArray($e)&&Array.isArray(it)&&$e.some(function(Pt){return Array.isArray(Pt)})?$e.some(function(Pt){return Pt.some(function(Lt){return it.includes(Lt)})}):$e.some(function(Pt){return it.includes(Pt)})},$noneOf:function($e,it){return!$e||($e==null?void 0:$e.length)===0?!0:Array.isArray($e)&&Array.isArray(it)&&$e.some(function(Pt){return Array.isArray(Pt)})?$e.some(function(Pt){return Pt.every(function(Lt){return!it.some(function($t){return Lt.includes($t)})})}):it.some(function(Pt){return!$e.includes(Pt)})},$notMatch:function($e,it){if($e.length!==it.length)return!0;for(var Pt=0;Pt<$e.length;Pt++)if($e[Pt]!==it[Pt])return!0;return!1},$dateOn:function($e,it){return!$e||!it?!1:$e===it},$dateBefore:function($e,it){if(!$e||!it)return!1;var Pt=Bn($e),Lt=Bn(it);if(!Pt||!Lt)throw new Error("Invalid date format");return Pt<Lt},$dateNotBefore:function($e,it){if(!$e||!it)return!1;var Pt=Bn($e),Lt=Bn(it);if(!Pt||!Lt)throw new Error("Invalid date format");return Pt>=Lt},$dateAfter:function($e,it){if(!$e||!it)return!1;var Pt=Bn($e),Lt=Bn(it);return Pt>Lt},$dateNotAfter:function($e,it){if(!$e||!it)return!1;var Pt=Bn($e),Lt=Bn(it);if(!Pt||!Lt)throw new Error("Invalid date format");return Pt<=Lt},$dateBetween:function($e,it){if(!$e||!it)return!1;var Pt=ln($e),Lt=ln(it[0]),$t=ln(it[1]);if(!Pt||!Lt||!$t)throw new Error("Invalid date format");return Pt>=Lt&&Pt<=$t},$dateNotOn:function($e,it){return!$e||!it?!1:$e!==it},$isTruly:function($e){return Array.isArray($e)?$e.some(function(it){return it===!0||it===1}):$e===!0||$e===1},$isFalsy:function($e){return Array.isArray($e)?$e.some(function(it){return!Be.truthy(it)}):!Be.truthy($e)},cat:function(){return Array.prototype.join.call(arguments,"")},substr:function($e,it,Pt){if(Pt<0){var Lt=String($e).substr(it);return Lt.substr(0,Lt.length+Pt)}return String($e).substr(it,Pt)},"+":function(){return Array.prototype.reduce.call(arguments,function($e,it){return parseFloat($e,10)+parseFloat(it,10)},0)},"*":function(){return Array.prototype.reduce.call(arguments,function($e,it){return parseFloat($e,10)*parseFloat(it,10)})},"-":function($e,it){return it===void 0?-$e:$e-it},"/":function($e,it){return $e/it},min:function(){return Math.min.apply(this,arguments)},max:function(){return Math.max.apply(this,arguments)},merge:function(){return Array.prototype.reduce.call(arguments,function($e,it){return $e.concat(it)},[])},var:function($e,it){var Pt=it===void 0?null:it,Lt=this;if(typeof $e>"u"||$e===""||$e===null)return Lt;for(var $t=String($e).split("."),$n=0;$n<$t.length;$n++)if(Lt==null||(Lt=Lt[$t[$n]],Lt===void 0))return Pt;return Lt},missing:function(){for(var $e=[],it=Array.isArray(arguments[0])?arguments[0]:arguments,Pt=0;Pt<it.length;Pt++){var Lt=it[Pt],$t=Be.apply({var:Lt},this);($t===null||$t==="")&&$e.push(Lt)}return $e},missing_some:function($e,it){var Pt=Be.apply({missing:it},this);return it.length-Pt.length>=$e?[]:Pt}};return Be.is_logic=function(Ve){return bn()(Ve)==="object"&&Ve!==null&&!Array.isArray(Ve)&&Object.keys(Ve).length===1},Be.truthy=function(Ve){return Array.isArray(Ve)&&Ve.length===0?!1:!!Ve},Be.getOperator=function(Ve){return Object.keys(Ve)[0]},Be.getValues=function(Ve){return Ve[Be.getOperator(Ve)]},Be.apply=function(Ve,$e){if(Array.isArray(Ve))return Ve.map(function(jn){return Be.apply(jn,$e)});if(!Be.is_logic(Ve))return Ve;var it=Be.getOperator(Ve),Pt=Ve[it],Lt,$t,$n,pn,un;if(Array.isArray(Pt)||(Pt=[Pt]),it==="if"||it=="?:"){for(Lt=0;Lt<Pt.length-1;Lt+=2)if(Be.truthy(Be.apply(Pt[Lt],$e)))return Be.apply(Pt[Lt+1],$e);return Pt.length===Lt+1?Be.apply(Pt[Lt],$e):null}else if(it==="$and"){for(Lt=0;Lt<Pt.length;Lt+=1)if($t=Be.apply(Pt[Lt],$e),!Be.truthy($t))return $t;return $t}else if(it==="or"){for(Lt=0;Lt<Pt.length;Lt+=1)if($t=Be.apply(Pt[Lt],$e),Be.truthy($t))return $t;return $t}else{if(it==="filter")return pn=Be.apply(Pt[0],$e),$n=Pt[1],Array.isArray(pn)?pn.filter(function(jn){return Be.truthy(Be.apply($n,jn))}):[];if(it==="map")return pn=Be.apply(Pt[0],$e),$n=Pt[1],Array.isArray(pn)?pn.map(function(jn){return Be.apply($n,jn)}):[];if(it==="reduce")return pn=Be.apply(Pt[0],$e),$n=Pt[1],un=typeof Pt[2]<"u"?Pt[2]:null,Array.isArray(pn)?pn.reduce(function(jn,ir){return Be.apply($n,{current:ir,accumulator:jn})},un):un;if(it==="all"){if(pn=Be.apply(Pt[0],$e),$n=Pt[1],!Array.isArray(pn)||!pn.length)return!1;for(Lt=0;Lt<pn.length;Lt+=1)if(!Be.truthy(Be.apply($n,pn[Lt])))return!1;return!0}else if(it==="none"){if(pn=Be.apply(Pt[0],$e),$n=Pt[1],!Array.isArray(pn)||!pn.length)return!0;for(Lt=0;Lt<pn.length;Lt+=1)if(Be.truthy(Be.apply($n,pn[Lt])))return!1;return!0}else if(it==="some"){if(pn=Be.apply(Pt[0],$e),$n=Pt[1],!Array.isArray(pn)||!pn.length)return!1;for(Lt=0;Lt<pn.length;Lt+=1)if(Be.truthy(Be.apply($n,pn[Lt])))return!0;return!1}}if(Pt=Pt.map(function(jn){return Be.apply(jn,$e)}),rt.hasOwnProperty(it)&&typeof rt[it]=="function")return rt[it].apply($e,Pt);if(it.indexOf(".")>0){var Xn=String(it).split("."),Yn=rt;for(Lt=0;Lt<Xn.length;Lt++){if(!Yn.hasOwnProperty(Xn[Lt]))throw new Error("Unrecognized operation "+it+" (failed at "+Xn.slice(0,Lt+1).join(".")+")");Yn=Yn[Xn[Lt]]}return Yn.apply($e,Pt)}throw new Error("Unrecognized operation "+it)},Be.uses_data=function(Ve){var $e=[];if(Be.is_logic(Ve)){var it=Be.getOperator(Ve),Pt=Ve[it];Array.isArray(Pt)||(Pt=[Pt]),it==="var"?$e.push(Pt[0]):Pt.forEach(function(Lt){$e.push.apply($e,Be.uses_data(Lt))})}return ot($e)},Be.addOperation=function(Ve,$e){rt[Ve]=$e},Be.rmOperation=function(Ve){delete rt[Ve]},Be.rule_like=function(Ve,$e){if($e===Ve||$e==="@")return!0;if($e==="number")return typeof Ve=="number";if($e==="string")return typeof Ve=="string";if($e==="array")return Array.isArray(Ve)&&!Be.is_logic(Ve);if(Be.is_logic($e)){if(Be.is_logic(Ve)){var it=Be.getOperator($e),Pt=Be.getOperator(Ve);if(it==="@"||it===Pt)return Be.rule_like(Be.get_values(Ve,!1),Be.get_values($e,!1))}return!1}if(Array.isArray($e))if(Array.isArray(Ve)){if($e.length!==Ve.length)return!1;for(var Lt=0;Lt<$e.length;Lt+=1)if(!Be.rule_like(Ve[Lt],$e[Lt]))return!1;return!0}else return!1;return!1},Be}function ln(ot){return new Date(ot)}function Hn(ot){var qe=ot.split("-").map(Number),Be=H()(qe,2),rt=Be[0],Ve=Be[1];return new Date(rt,Ve-1)}function sn(ot){var qe=parseInt(ot.slice(0,4)),Be=parseInt(ot.slice(5,6)),rt=(Be-1)*3;return new Date(qe,rt)}function Ln(ot){var qe=parseInt(ot);return new Date(qe,0)}function Bn(ot){var qe=Array.isArray(ot)?ot[1]:ot;return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(qe)?new Date(qe):/^\d{4}-\d{2}-\d{2}$/.test(qe)?ln(qe):/^\d{4}-\d{2}$/.test(qe)?Hn(qe):/^\d{4}Q[1-4]$/.test(qe)?sn(qe):/^\d{4}$/.test(qe)?Ln(qe):null}var wn=e(75667),st=e(15151),Ke=e.n(st),De=function(){var qe=(0,wn.ov)(),Be=qe.allowAll,rt=qe.snippets;return{allow:function($e){if($e){var it=Ke()().add(rt),Pt=Be||it.ignores($e);return Pt}return!0}}},Ce=function(){function ot(){var qe=this,Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};v()(this,ot),n()(this,"eventBus",new EventTarget),n()(this,"providers",[]),n()(this,"router",void 0),n()(this,"scopes",{}),n()(this,"i18n",void 0),n()(this,"ws",void 0),n()(this,"apiClient",void 0),n()(this,"components",r()(r()(r()({DataBlockProvider:jt.KY},fe),We),{},{CollectionField:_t.s})),n()(this,"pluginManager",void 0),n()(this,"pluginSettingsManager",void 0),n()(this,"devDynamicImport",void 0),n()(this,"requirejs",void 0),n()(this,"notification",void 0),n()(this,"schemaInitializerManager",void 0),n()(this,"schemaSettingsManager",void 0),n()(this,"dataSourceManager",void 0),n()(this,"name",void 0),n()(this,"favicon",void 0),n()(this,"globalVars",{}),n()(this,"jsonLogic",void 0),n()(this,"loading",!0),n()(this,"maintained",!1),n()(this,"maintaining",!1),n()(this,"error",null),n()(this,"hasLoadError",!1),n()(this,"wsAuthorized",!1),this.options=Be,this.initRequireJs(),(0,y.define)(this,{maintained:y.observable.ref,loading:y.observable.ref,maintaining:y.observable.ref,error:y.observable.ref}),this.devDynamicImport=Be.devDynamicImport,this.scopes=E()(this.scopes,Be.scopes),this.components=E()(this.components,Be.components),this.apiClient=Be.apiClient instanceof m.lP?Be.apiClient:new m.lP(Be.apiClient),this.apiClient.app=this,this.i18n=Be.i18n||d.a,this.router=new be(Be.router,this),this.schemaSettingsManager=new tt.XD(Be.schemaSettings,this),this.pluginManager=new q(Be.plugins,Be.loadRemotePlugins,this),this.schemaInitializerManager=new Ze.eN(Be.schemaInitializers,this),this.dataSourceManager=new Xt.AK(Be.dataSourceManager,this),this.addDefaultProviders(),this.addReactRouterComponents(),this.addProviders(Be.providers||[]),this.ws=new Re(Be.ws),this.ws.app=this,this.pluginSettingsManager=new Ee(Be.pluginSettings,this),this.addRoutes(),this.name=this.options.name||(0,L.getSubAppName)(Be.publicPath)||"main",this.i18n.on("languageChanged",function(rt){qe.apiClient.auth.locale=rt}),this.initListeners(),this.jsonLogic=Gt()}return h()(ot,[{key:"pm",get:function(){return this.pluginManager}},{key:"disableAcl",get:function(){return this.options.disableAcl}},{key:"isWsAuthorized",get:function(){return this.wsAuthorized}},{key:"updateFavicon",value:function(Be){var rt=document.querySelector('link[rel="shortcut icon"]');Be&&(this.favicon=Be),rt?rt.href=this.favicon||"/favicon/favicon.ico":(rt=document.createElement("link"),rt.rel="shortcut icon",rt.href=this.favicon||"/favicon/favicon.ico",document.head.appendChild(rt))}},{key:"setWsAuthorized",value:function(Be){this.wsAuthorized=Be}},{key:"initListeners",value:function(){var Be=this;this.eventBus.addEventListener("auth:tokenChanged",function(rt){Be.setTokenInWebSocket(rt.detail)}),this.eventBus.addEventListener("maintaining:end",function(){Be.apiClient.auth.token&&Be.setTokenInWebSocket({token:Be.apiClient.auth.token,authenticator:Be.apiClient.auth.getAuthenticator()})})}},{key:"setTokenInWebSocket",value:function(Be){var rt=Be.token,Ve=Be.authenticator;this.maintaining||this.ws.send(JSON.stringify({type:"auth:token",payload:{token:rt,authenticator:Ve}}))}},{key:"setMaintaining",value:function(Be){this.maintaining!==Be&&(this.maintaining=Be,Be||this.eventBus.dispatchEvent(new Event("maintaining:end")))}},{key:"initRequireJs",value:function(){this.requirejs=(0,Rt._)(),kt(this.requirejs),window.define=this.requirejs.define}},{key:"addDefaultProviders",value:function(){this.use(m.Xb,{apiClient:this.apiClient}),this.use(b.a,{i18n:this.i18n}),this.use(I.YO),this.use(F.O),this.use(Yt,{designable:this.options.designable,appName:this.name,components:this.components,scope:this.scopes}),this.use(I.wI),this.use(Bt.i,{dataSourceManager:this.dataSourceManager}),this.use(Wt.W)}},{key:"addReactRouterComponents",value:function(){this.addComponents({Link:f.Link,Navigate:x.Navigate,NavLink:f.NavLink})}},{key:"addRoutes",value:function(){this.router.add("not-found",{path:"*",Component:this.components.AppNotFound})}},{key:"getOptions",value:function(){return this.options}},{key:"getName",value:function(){return(0,L.getSubAppName)(this.getPublicPath())||null}},{key:"getPublicPath",value:function(){var Be=this.options.publicPath||"/";return Be.endsWith("/")||(Be+="/"),Be}},{key:"getApiUrl",value:function(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",rt=this.apiClient.axios.defaults.baseURL;if(!rt.startsWith("http://")&&!rt.startsWith("https://")){var Ve=window.location,$e=Ve.protocol,it=Ve.host;rt="".concat($e,"//").concat(it).concat(rt)}return rt.replace(/\/$/g,"")+"/"+Be.replace(/^\//g,"")}},{key:"getRouteUrl",value:function(Be){return this.getPublicPath()+Be.replace(/^\//g,"")}},{key:"getHref",value:function(Be){var rt=this.name;return rt&&rt!=="main"?this.getPublicPath()+"apps/"+rt+"/"+Be.replace(/^\//g,""):this.getPublicPath()+Be.replace(/^\//g,"")}},{key:"getCollectionManager",value:function(Be){var rt;return(rt=this.dataSourceManager.getDataSource(Be))===null||rt===void 0?void 0:rt.collectionManager}},{key:"getComposeProviders",value:function(){var Be=Tt.apply(void 0,C()(this.providers))(Ie);return Be.displayName="Providers",Be}},{key:"use",value:function(Be,rt){return this.addProvider(Be,rt)}},{key:"addProvider",value:function(Be,rt){return this.providers.push([Be,rt])}},{key:"addProviders",value:function(Be){var rt=this;Be.forEach(function(Ve){Array.isArray(Ve)?rt.addProvider(Ve[0],Ve[1]):rt.addProvider(Ve)})}},{key:"load",value:function(){var qe=i()(c()().mark(function rt(){var Ve,$e;return c()().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Pt.prev=0,this.loading=!0,Pt.next=4,this.loadWebSocket();case 4:return Pt.next=6,this.pm.load();case 6:Pt.next=18;break;case 8:if(Pt.prev=8,Pt.t0=Pt.catch(0),this.hasLoadError=!0,(Pt.t0===null||Pt.t0===void 0||(Ve=Pt.t0.response)===null||Ve===void 0||(Ve=Ve.data)===null||Ve===void 0||(Ve=Ve.errors)===null||Ve===void 0||(Ve=Ve[0])===null||Ve===void 0?void 0:Ve.code)==="BLOCKED_IP"&&(this.hasLoadError=!1),!this.ws.enabled){Pt.next=15;break}return Pt.next=15,new Promise(function(Lt){setTimeout(function(){return Lt(null)},1e3)});case 15:$e=function($t){var $n,pn,un;if(typeof($t==null||($n=$t.response)===null||$n===void 0?void 0:$n.data)=="string"){var Xn,Yn=document.createElement("div");return Yn.innerHTML=$t==null||(Xn=$t.response)===null||Xn===void 0?void 0:Xn.data,{message:Yn.textContent||Yn.innerText}}if($t!=null&&(pn=$t.response)!==null&&pn!==void 0&&(pn=pn.data)!==null&&pn!==void 0&&pn.error){var jn;return $t==null||(jn=$t.response)===null||jn===void 0||(jn=jn.data)===null||jn===void 0?void 0:jn.error}if($t!=null&&(un=$t.response)!==null&&un!==void 0&&(un=un.data)!==null&&un!==void 0&&(un=un.errors)!==null&&un!==void 0&&un[0]){var ir;return $t==null||(ir=$t.response)===null||ir===void 0||(ir=ir.data)===null||ir===void 0||(ir=ir.errors)===null||ir===void 0?void 0:ir[0]}return{message:$t==null?void 0:$t.message}},this.error=r()({code:"LOAD_ERROR"},$e(Pt.t0)),console.error(Pt.t0,this.error);case 18:this.loading=!1,this.updateFavicon();case 20:case"end":return Pt.stop()}},rt,this,[[0,8]])}));function Be(){return qe.apply(this,arguments)}return Be}()},{key:"loadWebSocket",value:function(){var qe=i()(c()().mark(function rt(){var Ve=this;return c()().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:this.eventBus.addEventListener("ws:message:authorized",function(){Ve.setWsAuthorized(!0)}),this.ws.on("message",function(Pt){var Lt,$t=JSON.parse(Pt.data);if($t!=null&&(Lt=$t.payload)!==null&&Lt!==void 0&&Lt.refresh){window.location.reload();return}if($t.type==="notification"){var $n,pn;Ve.notification[(($n=$t.payload)===null||$n===void 0?void 0:$n.type)||"info"]({message:(pn=$t.payload)===null||pn===void 0?void 0:pn.message});return}var un=$t.type==="maintaining"&&$t.payload.code!=="APP_RUNNING";if(un)Ve.setMaintaining(!0),Ve.error=$t.payload;else{Ve.hasLoadError&&window.location.reload(),Ve.setMaintaining(!1),Ve.maintained=!0,Ve.error=null;var Xn=$t.type;if(!Xn)return;var Yn="ws:message:".concat(Xn);Ve.eventBus.dispatchEvent(new CustomEvent(Yn,{detail:$t.payload}))}}),this.ws.on("serverDown",function(){Ve.maintaining=!0,Ve.maintained=!1}),this.ws.on("open",function(){var Pt=Ve.apiClient.auth.token;Pt&&Ve.setTokenInWebSocket({token:Pt,authenticator:Ve.apiClient.auth.getAuthenticator()})}),this.ws.connect();case 5:case"end":return it.stop()}},rt,this)}));function Be(){return qe.apply(this,arguments)}return Be}()},{key:"getComponent",value:function(Be){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ve=function(Pt){return rt&&console.error(Pt)};if(!Be){Ve("getComponent called with ".concat(Be));return}if(typeof Be=="function")return Be;if(typeof Be=="string"){var $e=a()(this.components,Be);if(!$e){Ve("Component ".concat(Be," not found"));return}return $e}Ve("Component ".concat(Be," should be a string or a React component"))}},{key:"renderComponent",value:function(Be,rt,Ve){return z.createElement(this.getComponent(Be),rt,Ve)}},{key:"addComponent",value:function(Be,rt){var Ve=rt||Be.displayName||Be.name;if(!Ve){console.error("Component must have a displayName or pass name as second argument");return}Q()(this.components,Ve,Be)}},{key:"addComponents",value:function(Be){var rt=this;Object.keys(Be).forEach(function(Ve){rt.addComponent(Be[Ve],Ve)})}},{key:"addScopes",value:function(Be){this.scopes=E()(this.scopes,Be)}},{key:"getRootComponent",value:function(){var Be=this,rt=function($e){var it=$e.children;return(0,ee.jsx)(ge,{app:Be,children:it})};return rt}},{key:"mount",value:function(Be){var rt=St(Be);if(rt){var Ve=this.getRootComponent(),$e=(0,p.createRoot)(rt);return $e.render((0,ee.jsx)(Ve,{})),$e}}},{key:"addFieldInterfaces",value:function(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this.dataSourceManager.collectionFieldInterfaceManager.addFieldInterfaces(Be)}},{key:"addFieldInterfaceComponentOption",value:function(Be,rt){return this.dataSourceManager.collectionFieldInterfaceManager.addFieldInterfaceComponentOption(Be,rt)}},{key:"addGlobalVar",value:function(Be,rt){Q()(this.globalVars,Be,rt)}},{key:"getGlobalVar",value:function(Be){return a()(this.globalVars,Be)}},{key:"addUserCenterSettingsItem",value:function(Be){var rt=Be.useVisible||function(){return!0},Ve=function(){var it=De(),Pt=it.allow,Lt=rt();return Lt?Be.aclSnippet?Pt(Be.aclSnippet):!0:!1};this.schemaSettingsManager.addItem("userCenterSettings",Be.name,r()(r()({},Be),{},{useVisible:Ve}))}}]),ot}(),Oe=e(31601),Fe=e(26793),Ne=e(62954),Xe=e(96365),dt=e(94516),ht=e(4685);function xt(ot){var qe=ot.name,Be=ot.parentSchemaKey,rt=ot.valueKeys,Ve=ot.schema,$e=ot.title,it=ot.useSubmit,Pt=it===void 0?ht.U2:it,Lt=ot.useVisible,$t=ot.defaultValue,$n=ot.useDefaultValue,pn=$n===void 0?ht.U2:$n,un=ot.width,Xn=ot.type,Yn=Xn===void 0?"common":Xn;return{name:qe,type:"actionModal",useVisible:Lt,useComponentProps:function(){var ir=(0,ht.h0)(Yn),fr=(0,dt.ng)(),Ar=fr.dn,wr=pn($t),Kr=Be?w().get(ir,Be):void 0,ao=(0,Xe.e)(),Qr=(0,Fe.$)(),_r=Qr.t,Rr=Pt(),Hr=(0,Ne.z9d)()||{},Yr=Hr.fieldSchema;return{title:typeof $e=="function"?$e(_r):ao($e),width:un,schema:Ve(r()(r()({},wr),Kr)),onSubmit:function(ho){var co=(0,ht.pg)({fieldSchema:ir,parentSchemaKey:Be,value:ho,valueKeys:rt});return Yr?(Ar.emit("patch",{schema:co}),Ar.refresh()):Ar.deepMerge(co),Rr==null?void 0:Rr(ho)}}}}}var Ct=function(qe){var Be=qe.name,rt=qe.title,Ve=qe.options,$e=qe.useOptions,it=$e===void 0?ht.U2:$e,Pt=qe.schemaKey,Lt=qe.useVisible,$t=qe.type,$n=$t===void 0?"common":$t,pn=qe.defaultValue,un=qe.useDefaultValue,Xn=un===void 0?ht.U2:un;return{name:Be,type:"select",useVisible:Lt,useComponentProps:function(){var jn=(0,ht.h0)($n),ir=(0,Ne.z9d)()||{},fr=ir.fieldSchema,Ar=(0,dt.ng)(),wr=Ar.dn,Kr=it(Ve),ao=Xn(pn),Qr=(0,Xe.e)(),_r=(0,Fe.$)(),Rr=_r.t;return{title:typeof rt=="function"?rt(Rr):Qr(rt),options:Kr,value:w().get(jn,Pt,ao),onChange:function(Yr){var eo=(0,ht.pg)({fieldSchema:jn,schemaKey:Pt,value:Yr});fr?(wr.emit("patch",{schema:eo}),wr.refresh()):wr.deepMerge(eo)}}}}},Dt=e(93167);function Vt(ot){var qe=ot.name,Be=ot.useVisible,rt=ot.title,Ve=ot.useTextClick,$e=Ve===void 0?ht.U2:Ve;return{name:qe,type:"item",useVisible:Be,useComponentProps:function(){var Pt=(0,Xe.e)(),Lt=(0,Fe.$)(),$t=Lt.t,$n=$e();return{title:typeof rt=="function"?rt($t):Pt(rt),onClick:$n}}}}var Ht=e(78722),Ut=e(49966),wt=e(78542)},3806:function(He,ae,e){"use strict";e.d(ae,{h:function(){return E},n:function(){return a}});var Z=e(12444),c=e.n(Z),k=e(72004),i=e.n(k),g=e(25098),C=e.n(g),A=e(28785),r=e.n(A),K=e(48374),v=e.n(K),j=e(31996),h=e.n(j),M=e(26037),n=e.n(M),y=e(9783),L=e.n(y),o=e(43868),a=function($){h()(z,$);var Q=n()(z);function z(p,b){var f;return c()(this,z),f=Q.call(this,p),L()(C()(f),"otherInstance",null),b&&(f.otherInstance=b,b.otherInstance=C()(f)),f}return i()(z,[{key:"add",value:function(b,f){r()(v()(z.prototype),"get",this).call(this,b)||(r()(v()(z.prototype),"add",this).call(this,b,f),this.otherInstance&&this.otherInstance.add(b,f))}},{key:"remove",value:function(b){r()(v()(z.prototype),"get",this).call(this,b)&&(r()(v()(z.prototype),"remove",this).call(this,b),this.otherInstance&&this.otherInstance.remove(b))}}]),z}(o.e),R={BlockInitializers:"page:addBlock",MBlockInitializers:"mobilePage:addBlock",CreateFormBlockInitializers:"popup:addNew:addBlock",CusomeizeCreateFormBlockInitializers:"popup:addRecord:addBlock",RecordBlockInitializers:"popup:common:addBlock",BulkEditBlockInitializers:"popup:bulkEdit:addBlock",TableColumnInitializers:"table:configureColumns",TableActionColumnInitializers:"table:configureItemActions",TableActionInitializers:"table:configureActions",SubTableActionInitializers:"subTable:configureActions",FormItemInitializers:"form:configureFields",CreateFormActionInitializers:"createForm:configureActions",UpdateFormActionInitializers:"editForm:configureActions",ReadPrettyFormItemInitializers:"details:configureFields",DetailsActionInitializers:"detailsWithPaging:configureActions",ReadPrettyFormActionInitializers:"details:configureActions",KanbanCardInitializers:"kanban:configureItemFields",KanbanActionInitializers:"kanban:configureActions",GridCardActionInitializers:"gridCard:configureActions",GridCardItemActionInitializers:"gridCard:configureItemActions",ListActionInitializers:"list:configureActions",ListItemActionInitializers:"list:configureItemActions",CalendarActionInitializers:"calendar:configureActions",GanttActionInitializers:"gantt:configureActions",MapActionInitializers:"map:configureActions",TableSelectorInitializers:"popup:tableSelector:addBlock",ChartInitializers:"charts:addBlock",ChartFilterItemInitializers:"chartFilterForm:configureFields",ChartFilterActionInitializers:"chartFilterForm:configureActions",AssociationFilterInitializers:"filterCollapse:configureFields",FilterFormItemInitializers:"filterForm:configureFields",FilterFormActionInitializers:"filterForm:configureActions",CustomFormItemInitializers:"assignFieldValuesForm:configureFields",BulkEditFormItemInitializers:"bulkEditForm:configureFields",BulkEditFormActionInitializers:"bulkEditForm:configureActions",AuditLogsTableColumnInitializers:"auditLogsTable:configureColumns",AuditLogsTableActionColumnInitializers:"auditLogsTable:configureItemActions",AuditLogsTableActionInitializers:"auditLogsTable:configureActions",SnapshotBlockInitializers:"popup:snapshot:addBlock",AddBlockButton:"workflowManual:popup:configureUserInterface:addBlock",AddCustomFormField:"workflowManual:customForm:configureFields",AddActionButton:"workflowManual:form:configureActions"};function E($,Q){return $===Q||R[$]===Q}},43868:function(He,ae,e){"use strict";e.d(ae,{e:function(){return K}});var Z=e(97857),c=e.n(Z),k=e(12444),i=e.n(k),g=e(72004),C=e.n(g),A=e(9783),r=e.n(A),K=function(){function v(j){i()(this,v),r()(this,"options",void 0),r()(this,"name",void 0),this.options=Object.assign({items:[]},j),this.name=j.name}return C()(v,[{key:"items",get:function(){return this.options.items}},{key:"add",value:function(h,M){var n=this,y=h.split("."),L=y[y.length-1],o=c()(c()({},M),{},{name:L}),a=function(p,b){var f=n.items.findIndex(function(x){return x.name===p});f===-1?n.items.push(b):n.items[f]=b};if(y.length===1){a(L,o);return}var R=y.slice(0,-1).join("."),E=this.get(R);if(E){E.children||(E.children=[]);var $=h.replace("".concat(E.name,"."),""),Q=E.children.findIndex(function(z){return z.name===$});Q===-1?E.children.push(o):E.children[Q]=o}else a(L,o)}},{key:"get",value:function(h){if(h){for(var M=h.split("."),n={children:this.items},y=function(){var R,E=M[o],$=(R=n.children)===null||R===void 0?void 0:R.find(function(Q){return Q.name===E});if($&&(n=$),o===M.length-1)return{v:$}},L,o=0;o<M.length;o++)if(L=y(),L)return L.v}}},{key:"remove",value:function(h){var M=h.split(".");if(M.length===1){var n=this.items.findIndex(function(a){return a.name===M[0]});n!==-1&&this.items.splice(n,1);return}var y=this.get(M.slice(0,-1).join("."));if(y&&y.children){var L=M[M.length-1],o=y.children.findIndex(function(a){return a.name===L});o!==-1&&y.children.splice(o,1)}}}]),v}()},916:function(He,ae,e){"use strict";e.d(ae,{H:function(){return E},I:function(){return $}});var Z=e(9783),c=e.n(Z),k=e(15009),i=e.n(k),g=e(99289),C=e.n(g),A=e(97857),r=e.n(A),K=e(13769),v=e.n(K),j=e(80844),h=e(67294),M=e(62954),n=e(24019),y=e(7849),L=e(84327),o=e(85893),a=["onClick"],R=h.forwardRef(function(Q,z){var p=Q.onClick,b=v()(Q,a);return(0,o.jsx)(y.l,r()(r()({ref:z},b),{},{onClick:function(x){return p==null?void 0:p(x.event,!1)}}))}),E=function(z){var p=z.title,b=z.icon,f=z.width,x=z.schema,m=z.buttonText,F=z.btnStyles,I=z.isItem,d=z.component,u=z.onCancel,l=z.onSubmit,S=(0,n.q_)(),H=S.setVisible,O=(0,h.useCallback)(function(){var V=(0,j.useForm)(),U=(0,M.XCj)();return{run:function(){return C()(i()().mark(function ne(){return i()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,u==null?void 0:u();case 2:U.setVisible(!1),V.reset();case 4:case"end":return J.stop()}},ne)}))()}}},[u]),N=(0,h.useCallback)(function(){var V=(0,j.useForm)(),U=(0,M.XCj)();return{run:function(){return C()(i()().mark(function ne(){return i()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,V.validate();case 2:return J.prev=2,J.next=5,l==null?void 0:l(V.values);case 5:U.setVisible(!1),V.reset(),J.next=12;break;case 9:J.prev=9,J.t0=J.catch(2),console.error(J.t0);case 12:case"end":return J.stop()}},ne,null,[[2,9]])}))()}}},[l]),t=(0,h.useMemo)(function(){return h.forwardRef(function(V,U){var D=V.onClick;return(0,o.jsx)(R,{onClick:D,ref:U,title:m,icon:b})})},[m,b]),B=(0,h.useMemo)(function(){return(0,L.uid)()},[]),X=(0,h.useMemo)(function(){return{type:"void",properties:c()({},B,{type:"void","x-component":"Action","x-component-props":d?{component:d,icon:b}:I?{component:t}:{icon:b||"PlusOutlined",style:r()({borderColor:"var(--colorSettings)",color:"var(--colorSettings)"},F||{}),title:m,type:"dashed"},properties:{drawer1:{"x-decorator":"Form","x-component":"Action.Modal","x-component-props":{width:f,style:{maxWidth:f||"520px",width:"100%"},afterOpenChange:function(){H(!1)}},type:"void",title:p,properties:r()(r()({},(x==null?void 0:x.properties)||x),{},{footer:{"x-component":"Action.Modal.Footer",type:"void",properties:{cancel:{title:'{{t("Cancel")}}',"x-component":"Action","x-component-props":{useAction:O}},submit:{title:'{{t("Submit")}}',"x-component":"Action","x-component-props":{type:"primary",useAction:N}}}}})}}})}},[m,d,B,x,p,O,N]);return(0,o.jsx)(M.n6,{schema:X})},$=function(){var z=(0,n.UR)();return(0,o.jsx)(E,r()({},z))}},45705:function(He,ae,e){"use strict";e.d(ae,{E:function(){return h},y:function(){return o}});var Z=e(19632),c=e.n(Z),k=e(13769),i=e.n(k),g=e(97857),C=e.n(g),A=e(67294),r=e(62954),K=e(24019),v=e(85893),j=["type","Component","component","children","useVisible","useChildren","useComponentProps","hideIfNoChildren","componentProps","sort"],h=function(R){var E=R.children;return E?(0,v.jsx)(v.Fragment,{children:E.sort(function($,Q){return($.sort||0)-(Q.sort||0)}).map(function($,Q){return(0,v.jsx)(o,C()({},$),$.name||$.key||Q)})}):null},M={item:"SchemaInitializerItemInternal",itemGroup:"SchemaInitializerItemGroupInternal",divider:"SchemaInitializerDivider",switch:"SchemaInitializerSwitchInternal",subMenu:"SchemaInitializerSubMenuInternal",actionModal:"SchemaInitializerActionModalInternal"},n=function(){},y=function(){return!0},L=function(){},o=(0,A.memo)(function(a){var R=a,E=R.type,$=R.Component,Q=R.component,z=R.children,p=R.useVisible,b=p===void 0?y:p,f=R.useChildren,x=f===void 0?n:f,m=R.useComponentProps,F=m===void 0?L:m,I=R.hideIfNoChildren,d=R.componentProps,u=R.sort,l=i()(R,j),S=x(),H=F(),O=(0,r.sRe)(),N=$||Q,t=!N&&E&&M[E],B=(0,A.useMemo)(function(){var D=[].concat(c()(S||[]),c()(z||[]));return D.length===0?void 0:D},[S,z]),X=(0,A.useMemo)(function(){return C()(C()(C()(C()({},l),t?H:{}),t?d:{}),{},{children:B})},[l,t,H,d,B]),V=b();if(!V||!E&&!N)return null;var U=O(t?M[E]:N);return!U||I&&!B?null:(0,v.jsx)(K.Mm.Provider,{value:X,children:(0,v.jsx)(U,C()(C()(C()({},d),H),{},{children:B}))})});o.displayName="SchemaInitializerChild"},7849:function(He,ae,e){"use strict";e.d(ae,{V:function(){return o},l:function(){return L}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(84327),C=e(93967),A=e.n(C),r=e(67294),K=e(82369),v=e(62954),j=e(24019),h=e(79143),M=e(70345),n=e(69960),y=e(85893),L=(0,r.memo)(r.forwardRef(function(a,R){var E,$=a.style,Q=a.closeInitializerMenuWhenClick,z=Q===void 0?!0:Q,p=a.name,b=p===void 0?(0,g.uid)():p,f=a.applyMenuStyle,x=f===void 0?!0:f,m=a.className,F=a.disabled,I=a.items,d=a.icon,u=a.title,l=a.onClick,S=a.children,H=(0,v.eJW)(),O=(0,h.hL)(I,b,l),N=(0,n._)(),t=N.componentCls,B=N.hashId,X=(0,h.ne)(),V=X.attribute,U=(0,j.q_)(),D=U.setVisible,ne=(0,r.useMemo)(function(){if(I&&I.length>0)return[{key:b,style:$,className:m,label:S||H(u),onClick:function(J){J.key===b&&(z&&(D==null||D(!1)),l==null||l(i()(i()({},J),{},{item:a})))},icon:typeof d=="string"?(0,y.jsx)(K.JO,{type:d}):d,children:O}]},[b,$,m,S,u,l,d,O]);return I&&I.length>0?(0,y.jsx)(M.tu,{items:ne}):(0,y.jsx)("div",{ref:R,onClick:function(J){J.stopPropagation(),z&&(D==null||D(!1)),l==null||l({event:J,item:a})},children:(0,y.jsx)("div",i()(i()({},V),{},{className:A()((E={},c()(E,"".concat(t,"-menu-item"),x),c()(E,"".concat(t,"-menu-item-disabled"),F),E),m),style:$,children:S||(0,y.jsxs)(y.Fragment,{children:[typeof d=="string"?(0,y.jsx)(K.JO,{type:d}):d,(0,y.jsx)("span",{className:A()(c()({},"".concat(B," ").concat(t,"-item-content"),!!d)),children:H(u)})]})}))})}));L.displayName="SchemaInitializerItem";var o=function(){var R=(0,j.UR)();return(0,y.jsx)(L,i()({},R))}},70345:function(He,ae,e){"use strict";e.d(ae,{eU:function(){return f},kw:function(){return z},tu:function(){return b},vH:function(){return p},xv:function(){return x}});var Z=e(68400),c=e.n(Z),k=e(97857),i=e.n(k),g=e(13769),C=e.n(g),A=e(91034),r=e(16165),K=e(97133),v=e(84327),j=e(9361),h=e(68508),M=e(67294),n=e(62954),y=e(24019),L=e(79143),o=e(69960),a=e(85893),R,E=["items"],$=["children","items","title","name","onOpenChange","icon"],Q=M.createContext({}),z=function(F){return(0,a.jsx)(Q.Provider,{value:{isInMenu:!0},children:F.children})},p=function(){return M.useContext(Q)},b=function(F){var I=(0,o._)(),d=I.componentCls,u=I.hashId,l=F.items,S=C()(F,E),H=j.Z.useToken(),O=H.token,N=(0,M.useMemo)(function(){return l.map(function(t){return i()(i()({},t),{},{popupClassName:"".concat(u," ").concat(d,"-menu-sub")})})},[d,u,l]);return(0,a.jsx)(z,{children:(0,a.jsx)(h.Z,i()({selectable:!1,expandIcon:(0,a.jsx)(A.Z,{style:{fontSize:O.fontSizeSM,color:O.colorTextDescription}}),rootClassName:(0,K.css)(R||(R=c()([`
          box-shadow: none !important;
          border-inline-end: 0 !important;
          .ant-menu-sub {
            max-height: 50vh !important;
            padding: `,`px !important;
          }
          .ant-menu-item {
            margin-inline: `,`px !important;
            margin-block: 0 !important;
            width: auto !important;
            padding: 0 `,"px 0 ",`px !important;
          }
          .ant-menu-item-group-title {
            padding: 0 `,`px;
            margin-inline: 0;
            line-height: 32px;
          }
          .ant-menu-submenu-title {
            margin: 0 `,`px !important;
            padding-left: `,`px !important;
            width: auto !important;
          }
          .ant-menu-root {
            margin: 0 -`,`px;
            .ant-menu-submenu-title,
            .ant-menu-item-only-child {
              margin-inline: 0;
              margin-block: 0;
              width: 100%;
            }
          }
        `])),O.paddingXXS,O.marginXXS,O.paddingSM,O.padding,O.padding,O.marginXXS,O.padding,O.margin),items:N},S))})},f=function(F){var I,d=F.children,u=F.items,l=F.title,S=F.name,H=F.onOpenChange,O=F.icon,N=C()(F,$),t=(0,n.eJW)(),B=(0,y.UR)(),X=(0,M.useMemo)(function(){return S||(B==null?void 0:B.name)||(0,v.uid)()},[S,B]),V=(I=u||d)===null||I===void 0?void 0:I.filter(function(ne){return ne.useVisible?ne.useVisible():!0}),U=(0,L.hL)(V,S),D=(0,M.useMemo)(function(){return[i()(i()({},N),{},{key:X,label:t(l),icon:typeof O=="string"?(0,a.jsx)(r.Z,{type:O}):O,children:U})]},[U,t,O,X,N,l]);return(0,a.jsx)(b,{onOpenChange:H,items:D})},x=function(){var F=(0,y.UR)();return(0,a.jsx)(f,i()({},F))}},1329:function(He,ae,e){"use strict";e.r(ae),e.d(ae,{SchemaInitializerActionModal:function(){return O.H},SchemaInitializerActionModalInternal:function(){return O.I},SchemaInitializerChild:function(){return a.y},SchemaInitializerChildren:function(){return a.E},SchemaInitializerDivider:function(){return E},SchemaInitializerItem:function(){return c.l},SchemaInitializerItemGroup:function(){return l},SchemaInitializerItemGroupInternal:function(){return S},SchemaInitializerItemInternal:function(){return c.V},SchemaInitializerItems:function(){return H},SchemaInitializerMenu:function(){return Z.tu},SchemaInitializerMenuProvider:function(){return Z.kw},SchemaInitializerSelect:function(){return B},SchemaInitializerSelectInternal:function(){return X},SchemaInitializerSubMenu:function(){return Z.eU},SchemaInitializerSubMenuInternal:function(){return Z.xv},SchemaInitializerSwitch:function(){return y},SchemaInitializerSwitchInternal:function(){return L},useSchemaInitializerStyles:function(){return $._},useSchemaInitializerSubMenuContext:function(){return Z.vH}});var Z=e(70345),c=e(7849),k=e(97857),i=e.n(k),g=e(13769),C=e.n(g),A=e(59637),r=e(67294),K=e(62954),v=e(24019),j=e(85893),h=["title","checked"],M={marginLeft:20},n={display:"flex",alignItems:"center",justifyContent:"space-between"},y=function(U){var D=U.title,ne=U.checked,q=C()(U,h),J=(0,K.eJW)();return(0,j.jsx)(c.l,i()(i()({},q),{},{closeInitializerMenuWhenClick:!1,children:(0,j.jsxs)("div",{style:n,children:[J(D),(0,j.jsx)(A.Z,{disabled:U.disabled,style:M,size:"small",checked:ne})]})}))},L=function(){var U=(0,v.UR)();return(0,j.jsx)(y,i()({},U))},o=e(9361),a=e(45705),R=e(96074),E=function(){var U=o.Z.useToken(),D=U.token;return(0,j.jsx)(R.Z,{style:{marginTop:D.marginXXS,marginBottom:D.marginXXS}})},$=e(69960),Q=e(5574),z=e.n(Q),p=e(84327),b=e(69677),f=e(32983),x=e(26793),m=e(21143);function F(V,U){var D=V.replace(/-displayCollectionFields$/,""),ne=U.replace(/-displayCollectionFields$/,"");return!D.includes(ne)}var I=function(U){var D=U.value,ne=U.onChange,q=U.name,J=(0,x.$)(),Y=J.t,P=(0,r.useState)(D),w=z()(P,2),ie=w[0],G=w[1],le=(0,r.useRef)(""),xe=(0,r.useRef)("".concat(q||Math.random().toString(10).substr(2,9)));(0,r.useEffect)(function(){G(D)},[D]),(0,r.useEffect)(function(){var Se,se=function(){var ee,ue;le.current&&((ee=document.activeElement)===null||ee===void 0?void 0:ee.id)!==le.current.input.id&&F((ue=document.activeElement)===null||ue===void 0?void 0:ue.id,le.current.input.id)&&le.current.focus()},me=new IntersectionObserver(function(pe){pe.some(function(ee){return ee.isIntersecting})&&se()});return(Se=le.current)!==null&&Se!==void 0&&Se.input&&(le.current.input.id=xe.current,me.observe(le.current.input)),function(){me.disconnect()}},[]);var _e=(0,r.useRef)(!1),Ee=function(se){_e.current||(ne(se.target.value),G(se.target.value))},ze=function(se){se.type==="compositionend"?(_e.current=!1,Ee(se)):_e.current=!0};return(0,j.jsxs)("div",{onClick:function(se){return se.stopPropagation()},children:[(0,j.jsx)(b.Z,{ref:le,allowClear:!0,style:{padding:"0 4px 6px 16px",boxShadow:"none"},bordered:!1,placeholder:Y("Search"),defaultValue:ie,onClick:function(se){se.stopPropagation()},onChange:Ee,onCompositionStart:ze,onCompositionEnd:ze,onCompositionUpdate:ze}),(0,j.jsx)(R.Z,{style:{margin:0}})]})},d=null,u=function(U){var D=U.children,ne=U.showType,q=U.hideSearch,J=U.name,Y=(0,m.useCompile)(),P=(0,r.useState)(null),w=z()(P,2),ie=w[0],G=w[1],le=function(ze,Se){if(!ie||ie===""||d&&d!==Se)return ze;var se=ie.toLocaleLowerCase();return ze.filter(function(me){return(me.title||me.label)&&String(Y(me.title||me.label)).toLocaleLowerCase().includes(se)})},xe=function Ee(ze,Se){var se,me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Set,pe=[];return!q&&(ze.length>10||ie)&&!["subMenu","itemGroup"].includes((se=ze[0])===null||se===void 0?void 0:se.type)&&pe.push(i()({key:"search-".concat((0,p.uid)()),Component:function(){return(0,j.jsx)(I,{name:Se,value:!d||d===Se?ie:"",onChange:function(ge){d=Se,G(ge)}})},onClick:function(ue){var ge=ue.domEvent;ge.stopPropagation()}},ne?{isMenuType:!0}:{})),ze.forEach(function(ee){if(!me.has(ee))if(me.add(ee),["subMenu","itemGroup"].includes(ee.type)){var ue=!d||d===ee.name?le(ee.children.concat(),ee.name):ee.children,ge=Ee(ue,ee.name,me);pe.push(i()(i()({},ee),{},{children:ge}))}else pe.push(ee)}),ze.length===0&&pe.push(i()({key:"empty",style:{height:150},Component:function(){return(0,j.jsx)("div",{onClick:function(ge){return ge.stopPropagation()},children:(0,j.jsx)(f.Z,{image:f.Z.PRESENTED_IMAGE_SIMPLE})})}},ne?{isMenuType:!0}:{})),pe},_e=xe(le((D==null?void 0:D.concat())||[],J),J);return D?_e:void 0},l=function(U){var D=U.children,ne=U.items,q=U.title,J=U.divider,Y=(0,K.eJW)(),P=(0,$._)(),w=P.componentCls,ie=o.Z.useToken(),G=ie.token;return(0,j.jsxs)("div",{style:{marginInline:G.marginXXS},children:[J&&(0,j.jsx)(E,{}),(0,j.jsx)("div",{className:"".concat(w,"-group-title"),children:Y(q)}),(0,j.jsx)(a.E,{children:ne||D})]})},S=function(){var U=(0,v.UR)(),D=u(U);return U.name&&U.name!=="displayFields"?(0,j.jsx)(l,i()({},U)):(0,j.jsx)(l,i()(i()({},U),{},{children:D}))},H=function(U){var D=U.items;return D.length===0?null:(0,j.jsx)(a.E,{children:D})},O=e(916),N=e(34041),t=["title","options","value","onChange","openOnHover","onClick"],B=function(U){var D=U.title,ne=U.options,q=U.value,J=U.onChange,Y=U.openOnHover,P=U.onClick,w=C()(U,t),ie=(0,r.useState)(!1),G=z()(ie,2),le=G[0],xe=G[1],_e=(0,r.useCallback)(function(){xe(!1);for(var Se=arguments.length,se=new Array(Se),me=0;me<Se;me++)se[me]=arguments[me];P==null||P.apply(void 0,se)},[xe,P]),Ee=(0,r.useCallback)(function(){return xe(!0)},[]),ze=(0,r.useMemo)(function(){return Y?{onMouseEnter:Ee,open:le}:{}},[Ee,le,Y]);return(0,j.jsx)(c.l,i()(i()({closeInitializerMenuWhenClick:!1},w),{},{children:(0,j.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[D,(0,j.jsx)(N.default,i()({"data-testid":"antd-select",popupMatchSelectWidth:!1,bordered:!1,defaultValue:q,onChange:function(){return xe(!1),J.apply(void 0,arguments)},options:ne,style:{textAlign:"right",minWidth:100},onClick:_e},ze))]})}))},X=function(){var U=(0,v.UR)();return(0,j.jsx)(B,i()({},U))}},69960:function(He,ae,e){"use strict";e.d(ae,{_:function(){return i}});var Z=e(9783),c=e.n(Z),k=e(46917),i=(0,k.l6)("nb-schema-initializer",function(g){var C,A,r,K=g.componentCls;return r={},c()(r,K,{".ant-menu":{background:"transparent",borderInlineEnd:"none !important"},":not(.ant-menu)":(A={},c()(A,"".concat(K,"-group-title"),{color:g.colorTextDescription,lineHeight:"".concat(g.controlHeight,"px"),paddingLeft:g.padding,paddingRight:g.paddingSM}),c()(A,"".concat(K,"-menu-item"),(C={marginInline:g.marginXXS,paddingLeft:g.padding,paddingRight:g.paddingSM,lineHeight:"".concat(g.controlHeight,"px"),color:g.colorText},c()(C,"&:not(".concat(K,"-menu-item-disabled)"),c()({cursor:"pointer"},"&:hover",{borderRadius:g.borderRadiusSM,backgroundColor:g.colorBgTextHover})),c()(C,"&".concat(K,"-menu-item-disabled"),{cursor:"not-allowed",color:g.colorTextDisabled}),C)),A)}),c()(r,"".concat(K,"-item-content"),{marginLeft:g.controlHeightSM-g.fontSize}),r})},24019:function(He,ae,e){"use strict";e.d(ae,{Mm:function(){return i},UR:function(){return g},V4:function(){return c},q_:function(){return k}});var Z=e(67294),c=(0,Z.createContext)({});c.displayName="SchemaInitializerContext";var k=function(){return Z.useContext(c)},i=(0,Z.createContext)({});i.displayName="SchemaInitializerItemContext";var g=function(){return Z.useContext(i)}},79143:function(He,ae,e){"use strict";e.d(ae,{ne:function(){return k},bw:function(){return b},hL:function(){return p},IU:function(){return Q}});var Z=e(67294),c=e(70345),k=function(){var x=(0,c.vH)(),m=x.isInMenu,F=(0,Z.useMemo)(function(){return m?{}:{role:"menuitem"}},[m]);return{attribute:F}},i=e(52677),g=e.n(i),C=e(97857),A=e.n(C),r=e(39270),K=e(43173),v=e(1329),j=e(13769),h=e.n(j),M=e(15867),n=e(82369),y=e(62954),L=e(96256),o=e(85893),a=["style","options"],R=Z.memo(function(f){var x=f.style,m=f.options,F=h()(f,a),I=(0,y.eJW)(),d=(0,L.d)(),u=d.getAriaLabel;return(0,o.jsx)(M.ZP,A()(A()({"data-testid":m["data-testid"],"aria-label":u(),"aria-disabled":"false",type:"dashed",style:A()({borderColor:"var(--colorSettings)",color:"var(--colorSettings)",flex:"none"},x),icon:typeof m.icon=="string"?(0,o.jsx)(n.JO,{type:m.icon}):m.icon},F),{},{children:m.title&&(0,o.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"inline-block",width:m.icon?"calc(100% - 14px)":"100%",verticalAlign:"bottom"},children:I(m.title)})}))});R.displayName="SchemaInitializerButton(memo)";var E=e(61024),$=function(x){var m=x.Component||R,F=x.ItemsComponent||v.SchemaInitializerItems,I=A()(A()({},x.itemsComponentProps),{},{options:x,items:x.items,style:x.itemsComponentStyle}),d=(0,Z.useMemo)(function(){return(0,E.W)(m)},[m]);return Z.createElement(d,x,Z.createElement(F,I))};$.displayName="InitializerComponent";function Q(f,x){var m=(0,K.qD)(),F=(0,r.B)()||{},I=F.isMobile;f==="popup:common:addBlock"&&m.schemaInitializerManager.has("mobile:popup:common:addBlock")&&I&&(f="mobile:popup:common:addBlock");var d=(0,Z.useMemo)(function(){return g()(f)==="object"?f:m.schemaInitializerManager.get(f)},[m.schemaInitializerManager,f]),u=(0,Z.useMemo)(function(){return f?d?{exists:!0,render:function(S){return Z.createElement($,A()(A()(A()({},d.options),x),S))}}:(console.error('[nocobase]: SchemaInitializer "'.concat(f,'" not found')),{exists:!1,render:function(){return null}}):{exists:!1,render:function(){return null}}},[d,f,x]);return u}var z=["isMenuType"];function p(f,x,m){var F=b(m);return(0,Z.useMemo)(function(){return F(f,x)},[F,f,x])}function b(f){var x=(0,y.eJW)(),m=(0,Z.useCallback)(function(F,I){return F!=null&&F.length?F.map(function(d,u){var l=d.component||d.Component,S,H=d.title||d.label?x(d.title||d.label):void 0;if(l&&(S=Z.createElement(v.SchemaInitializerChild,A()(A()({},d),{},{title:H}))),d.type==="divider")return{type:"divider",key:d.key||"divider-".concat(u)};if(d.type==="item"&&l)return d.key||(d.key="".concat(H,"-").concat(u)),d.associationField?{key:d.key,label:S,associationField:d.associationField}:{key:d.key,label:S};if(d.type==="itemGroup"){var O,N=typeof H=="string"?H:d.title,t=d.key||"".concat(I,"-item-group-").concat(u);return{type:"group",key:t,label:N,children:d!=null&&(O=d.children)!==null&&O!==void 0&&O.length?m(d.children,t):[]}}if(d.type==="subMenu"){var B,X=H,V=d.key||d.name||"".concat(I,"-sub-menu-").concat(u);return{key:V,label:X,children:d!=null&&(B=d.children)!==null&&B!==void 0&&B.length?m(d.children,V):[]}}if(d.isMenuType){var U=d.isMenuType,D=h()(d,z);return D}var ne=S||H,q=d.key||"".concat(I,"-").concat(H,"-").concat(u),J=function(P){P.domEvent.stopPropagation(),P.key===q&&(d.onClick?d.onClick(A()(A()({},P),{},{item:d})):f==null||f(A()(A()({},P),{},{item:d})))};return d.associationField?{key:q,label:ne,associationField:d.associationField,onClick:J}:{style:d.style,key:q,label:ne,onClick:J}}):[]},[x,f]);return m}},59582:function(He,ae,e){"use strict";e.d(ae,{nl:function(){return C.n},Ms:function(){return g.e},HS:function(){return i.SchemaInitializerActionModal},IQ:function(){return i.SchemaInitializerActionModalInternal},yH:function(){return i.SchemaInitializerChild},E0:function(){return i.SchemaInitializerChildren},V4:function(){return k.V4},qU:function(){return i.SchemaInitializerDivider},lV:function(){return i.SchemaInitializerItem},Mm:function(){return k.Mm},iP:function(){return i.SchemaInitializerItemGroup},IY:function(){return i.SchemaInitializerItemGroupInternal},VG:function(){return i.SchemaInitializerItemInternal},LU:function(){return i.SchemaInitializerItems},eN:function(){return y},tu:function(){return i.SchemaInitializerMenu},kw:function(){return i.SchemaInitializerMenuProvider},iW:function(){return i.SchemaInitializerSelect},ud:function(){return i.SchemaInitializerSelectInternal},eU:function(){return i.SchemaInitializerSubMenu},xv:function(){return i.SchemaInitializerSubMenuInternal},_n:function(){return i.SchemaInitializerSwitch},wH:function(){return i.SchemaInitializerSwitchInternal},h6:function(){return C.h},ne:function(){return c.ne},bw:function(){return c.bw},q_:function(){return k.q_},UR:function(){return k.UR},hL:function(){return c.hL},IU:function(){return c.IU},_$:function(){return i.useSchemaInitializerStyles},vH:function(){return i.useSchemaInitializerSubMenuContext},W_:function(){return Z.W}});var Z=e(61024),c=e(79143),k=e(24019),i=e(1329),g=e(43868),C=e(3806),A=e(19632),r=e.n(A),K=e(12444),v=e.n(K),j=e(72004),h=e.n(j),M=e(9783),n=e.n(M),y=function(){function L(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;v()(this,L),n()(this,"schemaInitializers",{}),n()(this,"actionList",{}),this._schemaInitializers=o,this.app=a,this.app=a,this.add.apply(this,r()(o))}return h()(L,[{key:"add",value:function(){for(var a=this,R=arguments.length,E=new Array(R),$=0;$<R;$++)E[$]=arguments[$];E.forEach(function(Q){a.schemaInitializers[Q.name]=Q,Array.isArray(a.actionList[Q.name])&&(a.actionList[Q.name].forEach(function(z){Q[z.type](z.itemName,z.data)}),a.actionList[Q.name]=void 0)})}},{key:"addItem",value:function(a,R,E){var $=this.get(a);$?$.add(R,E):(this.actionList[a]||(this.actionList[a]=[]),this.actionList[a].push({type:"add",itemName:R,data:E}))}},{key:"get",value:function(a){return this.schemaInitializers[a]}},{key:"getAll",value:function(){return this.schemaInitializers}},{key:"has",value:function(a){return!!this.get(a)}},{key:"remove",value:function(a){delete this.schemaInitializers[a]}},{key:"removeItem",value:function(a,R){var E=this.get(a);E?E.remove(R):(this.actionList[a]||(this.actionList[a]=[]),this.actionList[a].push({type:"remove",itemName:R}))}}]),L}()},61024:function(He,ae,e){"use strict";e.d(ae,{W:function(){return z}});var Z=e(68400),c=e.n(Z),k=e(97857),i=e.n(k),g=e(5574),C=e.n(g),A=e(80844),r=e(9361),K=e(55241),v=e(28459),j=e(67294),h=e(97133),M=e(4511),n=e(52967),y=e(53285),L=e(62954),o=e(69960),a=e(24019),R=e(85893),E,$=function(b){return b},Q=function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$;return b};function z(p){var b=(0,A.observer)(function(f){var x=(0,L.ngQ)(),m=x.designable,F=x.insertAdjacent,I=(0,y.P5)()||{},d=I.isInSubTable,u=f.insert,l=f.useInsert,S=f.useWrap,H=S===void 0?Q:S,O=f.wrap,N=O===void 0?$:O,t=f.insertPosition,B=t===void 0?"beforeEnd":t,X=f.onSuccess,V=f.designable,U=f.popoverProps,D=f.children,ne=f.popover,q=ne===void 0?!0:ne,J=f.style,Y=f.componentProps,P=l?l():u,w=H(N),ie=(0,j.useCallback)(function(Ae){P?P(w(Ae,{isInSubTable:d})):F(B,w(Ae,{isInSubTable:d}),{onSuccess:X})},[P,w,d,F,B,X]),G=(0,o._)(),le=G.wrapSSR,xe=G.hashId,_e=G.componentCls,Ee=(0,j.useState)(!1),ze=C()(Ee,2),Se=ze[0],se=ze[1],me=r.Z.useToken(),pe=me.token,ee=(0,n.e)([Se]),ue=(0,j.useMemo)(function(){return i()({options:f,style:J},Y)},[Y,f,J]),ge=(0,j.useMemo)(function(){return(0,h.css)(E||(E=c()([`
          .ant-popover-inner {
            padding: `,`;
            .ant-menu-submenu-title {
              margin-block: 0;
            }
            .ant-popover-inner-content {
              padding: 0;
            }
          }
        `])),"".concat(pe.paddingXXS,"px 0"))},[pe.paddingXXS]),Ie=(0,j.useMemo)(function(){return{maxHeight:ee,overflowY:"auto"}},[ee]);return!m&&V!==!0?null:(0,R.jsx)(M.SV,{FallbackComponent:L.Hj5.Modal,onError:console.error,children:(0,R.jsx)(a.V4.Provider,{value:{visible:Se,setVisible:se,insert:ie,options:f},children:q===!1?j.createElement(p,ue):(0,R.jsx)(K.Z,i()(i()({placement:"bottomLeft"},U),{},{arrow:!1,overlayClassName:ge,open:Se,onOpenChange:se,content:le((0,R.jsx)("div",{className:"".concat(_e," ").concat(xe),style:Ie,children:(0,R.jsx)(v.ZP,{theme:{components:{Menu:{itemHeight:pe.marginXL,borderRadius:pe.borderRadiusSM,itemBorderRadius:pe.borderRadiusSM,subMenuItemBorderRadius:pe.borderRadiusSM}}},children:D})})),children:j.createElement(p,ue)}))})})},{displayName:"WithInitializer(".concat(p.displayName||p.name,")")});return b}},91410:function(He,ae,e){"use strict";e.d(ae,{F:function(){return K}});var Z=e(97857),c=e.n(Z),k=e(12444),i=e.n(k),g=e(72004),C=e.n(g),A=e(9783),r=e.n(A),K=function(){function v(j){i()(this,v),r()(this,"options",void 0),r()(this,"name",void 0),this.options=Object.assign({items:[]},j),this.name=j.name}return C()(v,[{key:"items",get:function(){return this.options.items}},{key:"add",value:function(h,M){var n=h.split("."),y=c()(c()({},M),{},{name:n[n.length-1]});if(n.length===1){var L=this.items.findIndex(function($){return $.name===h});L===-1?this.items.push(y):this.items[L]=y;return}var o=n.slice(0,-1).join("."),a=this.get(o);if(a){a.children||(a.children=[]);var R=h.replace("".concat(a.name,"."),""),E=a.children.findIndex(function($){return $.name===R});E===-1?a.children.push(y):a.children[E]=y}}},{key:"get",value:function(h){if(h){for(var M=h.split("."),n=this.items,y=function(){var R=M[o];if(n=n.find(function(E){return E.name===R}),!n||o===M.length-1)return{v:n};if(n.children)n=n.children;else return{v:void 0}},L,o=0;o<M.length;o++)if(L=y(),L)return L.v}}},{key:"remove",value:function(h){var M=h.split(".");if(M.length===1){var n=this.items.findIndex(function(a){return a.name===M[0]});n!==-1&&this.items.splice(n,1);return}var y=this.get(M.slice(0,-1).join("."));if(y&&y.children){var L=M[M.length-1],o=y.children.findIndex(function(a){return a.name===L});o!==-1&&y.children.splice(o,1)}}}]),v}()},78807:function(He,ae,e){"use strict";e.d(ae,{kY:function(){return f},dk:function(){return Q},GC:function(){return d}});var Z=e(97857),c=e.n(Z),k=e(13769),i=e.n(k),g=e(80844),C=e(67294),A=e(62954),r=e(90297),K=e(19632),v=e.n(K),j=e(96486),h=e.n(j),M=e(4511),n=e(56318),y=e(62662),L=e(78722),o=e(85893),a=["title"],R={item:y.r2,itemGroup:y.bw,subMenu:y.m$,divider:y.Z5,remove:y.qx,select:y.Qf,cascader:y.ns,switch:y.hj,popup:y.D3,actionModal:y.Qh,modal:y.j0},E=function(l){var S=l.title,H=i()(l,a);return(0,o.jsx)(y.r2,{title:S,children:(0,o.jsx)(A.Hj5.Modal,c()({},H))})},$=h().memoize(function(u){return function(l){return(0,o.jsx)(E,c()(c()({},l),{},{title:u}))}}),Q=function(l){var S=l.children,H=(0,y.DD)(),O=H.visible,N=(0,C.useRef)(!1),t=(0,n.W)();return(0,C.useEffect)(function(){O&&(N.current=!0)},[O]),!O&&!N.current||!S||S.length===0?null:(0,o.jsx)(o.Fragment,{children:S.sort(function(B,X){return(B.sort||0)-(X.sort||0)}).map(function(B){var X="".concat(t?t+"-":"").concat(B==null?void 0:B.name);return(0,o.jsx)(M.SV,{FallbackComponent:$(X),onError:console.log,children:(0,o.jsx)(f,c()({},B))},X)})})},z=function(){},p=function(){},b=function(){return!0},f=function(l){var S=l,H=S.useVisible,O=H===void 0?b:H,N=S.useChildren,t=N===void 0?z:N,B=S.useComponentProps,X=B===void 0?p:B,V=S.type,U=S.Component,D=S.children,ne=S.hideIfNoChildren,q=S.componentProps,J=t(),Y=X(),P=(0,A.sRe)(),w=(0,C.useMemo)(function(){var xe=[].concat(v()(J||[]),v()(D||[]));return xe.length===0?void 0:xe},[J,D]),ie=O(),G=(0,C.useMemo)(function(){return!U&&V&&R[V]?R[V]:U},[V,U]);if(!ie||!V&&!U)return null;var le=P(G);return!le||ne&&!w?null:(0,o.jsx)(L.A.Provider,{value:l,children:(0,o.jsx)(le,c()(c()(c()({},q),Y),{},{children:Array.isArray(w)&&w.length>0&&(0,o.jsx)(Q,{children:w})}))})},x=e(58521),m=e(69054),F=C.memo(function(u){var l=u.name,S=(0,m.z)(),H=S.getAriaLabel,O=(0,C.useMemo)(function(){return{cursor:"pointer",fontSize:12}},[]);return(0,o.jsx)(x.Z,{role:"button",style:O,"aria-label":H("schema-settings",l)})});F.displayName="SchemaSettingsIcon";var I=["items","Component","name","componentProps","style"],d=C.memo(function(u){var l=u.items,S=u.Component,H=S===void 0?F:S,O=u.name,N=u.componentProps,t=u.style,B=i()(u,I),X=(0,A.ngQ)(),V=X.dn,U=(0,g.useField)(),D=(0,g.useFieldSchema)(),ne=(0,C.useMemo)(function(){return c()({options:u,style:t},N)},[N,u,t]);return(0,o.jsx)(r.cM,c()(c()({title:C.createElement(H,ne),dn:V,field:U,fieldSchema:D},B),{},{children:(0,o.jsx)(Q,{children:l})}))});d.displayName="SchemaSettingsWrapper"},78722:function(He,ae,e){"use strict";e.d(ae,{A:function(){return c},J:function(){return k}});var Z=e(67294),c=(0,Z.createContext)({});c.displayName="SchemaSettingItemContext";function k(){return(0,Z.useContext)(c)}},49966:function(He,ae,e){"use strict";e.d(ae,{m:function(){return r}});var Z=e(97857),c=e.n(Z),k=e(52677),i=e.n(k),g=e(67294),C=e(43173),A=e(78807);function r(K,v){var j=(0,C.qD)(),h=(0,g.useMemo)(function(){return i()(K)==="object"?K:j.schemaSettingsManager.get(K)},[j.schemaSettingsManager,K]);return K?h?{exists:!0,render:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return g.createElement(A.GC,c()(c()(c()({},h.options),v),n))}}:(console.error('[nocobase]: SchemaSettings "'.concat(K,'" not found')),{exists:!1,render:function(){return null}}):{exists:!1,render:function(){return null}}}},5537:function(He,ae,e){"use strict";e.d(ae,{A4:function(){return h.A},F5:function(){return Z.F},kY:function(){return j.kY},dk:function(){return j.dk},XD:function(){return v},GC:function(){return j.GC},J$:function(){return h.J}});var Z=e(91410),c=e(19632),k=e.n(c),i=e(12444),g=e.n(i),C=e(72004),A=e.n(C),r=e(9783),K=e.n(r),v=function(){function M(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],y=arguments.length>1?arguments[1]:void 0;g()(this,M),K()(this,"schemaSettings",{}),K()(this,"actionList",{}),this._schemaSettings=n,this.app=y,this.app=y,this.add.apply(this,k()(n))}return A()(M,[{key:"add",value:function(){for(var y=this,L=arguments.length,o=new Array(L),a=0;a<L;a++)o[a]=arguments[a];o.forEach(function(R){y.schemaSettings[R.name]=R,Array.isArray(y.actionList[R.name])&&(y.actionList[R.name].forEach(function(E){R[E.type](E.itemName,E.data)}),y.actionList[R.name]=void 0)})}},{key:"addItem",value:function(y,L,o){var a=this.get(y);a?a.add(L,o):(this.actionList[y]||(this.actionList[y]=[]),this.actionList[y].push({type:"add",itemName:L,data:o}))}},{key:"get",value:function(y){return this.schemaSettings[y]}},{key:"getAll",value:function(){return this.schemaSettings}},{key:"has",value:function(y){return!!this.get(y)}},{key:"remove",value:function(y){delete this.schemaSettings[y]}},{key:"removeItem",value:function(y,L){var o=this.get(y);o?o.remove(L):(this.actionList[y]||(this.actionList[y]=[]),this.actionList[y].push({type:"remove",itemName:L}))}}]),M}(),j=e(78807),h=e(78722)},93167:function(He,ae,e){"use strict";e.d(ae,{H:function(){return r}});var Z=e(96486),c=e.n(Z),k=e(26793),i=e(62954),g=e(96365),C=e(94516),A=e(4685);function r(K){var v=K.name,j=K.useVisible,h=K.schemaKey,M=K.title,n=K.type,y=n===void 0?"common":n,L=K.defaultValue,o=K.useDefaultValue,a=o===void 0?A.U2:o,R=K.useComponentProps;return{name:v,useVisible:j,type:"switch",useComponentProps:function(){var $=(0,A.h0)(y),Q=(0,C.ng)(),z=Q.dn,p=a(L),b=(0,g.e)(),f=(0,k.$)(),x=f.t,m=(0,i.z9d)()||{},F=m.fieldSchema,I=R==null?void 0:R();return{title:typeof M=="function"?M(x):b(M),checked:(I==null?void 0:I.checked)===void 0?!!c().get($,h,p):I==null?void 0:I.checked,onChange:function(u){var l;I==null||(l=I.onChange)===null||l===void 0||l.call(I,u);var S=(0,A.pg)({fieldSchema:$,schemaKey:h,value:u});F?(z.emit("patch",{schema:S}),z.refresh()):z.deepMerge(S)}}}}}},4685:function(He,ae,e){"use strict";e.d(ae,{U2:function(){return r},h0:function(){return K},pg:function(){return A}});var Z=e(52677),c=e.n(Z),k=e(80844),i=e(96486),g=e.n(i),C=e(62954);function A(v){var j=v,h=j.fieldSchema,M=j.schemaKey,n=j.parentSchemaKey,y=j.value,L=j.valueKeys;if(M)g().set(h,M,y);else if(n){if(y==null)return h;c()(y)==="object"?Object.keys(y).forEach(function(o){L&&!L.includes(o)||g().set(h,"".concat(n,".").concat(o),y[o])}):console.error("value must be object")}return h}var r=function(j){return j},K=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"common",h=(0,k.useFieldSchema)(),M=(0,C.z9d)()||{},n=M.fieldSchema;return j==="field"&&n||h}},1992:function(He,ae,e){"use strict";e.d(ae,{J1:function(){return C},Po:function(){return r},V$:function(){return A}});var Z=e(13769),c=e.n(Z),k=e(67294),i=e(85893),g=["children"],C=(0,k.createContext)({});C.displayName="SchemaToolbarContext";var A=function(v){var j=v.children,h=c()(v,g);return(0,i.jsx)(C.Provider,{value:h,children:j})};function r(){return(0,k.useContext)(C)}},78542:function(He,ae,e){"use strict";e.d(ae,{J1:function(){return Z.J1},V$:function(){return Z.V$},Po:function(){return Z.Po},du:function(){return v}});var Z=e(1992),c=e(97857),k=e.n(c),i=e(67294),g=e(4511),C=e(62954),A=e(50679),r=e(85893),K=function(h){var M=(0,C.ngQ)(),n=M.designable;return n?(0,r.jsx)(C.Hj5.Modal,k()(k()({},h),{},{children:(0,r.jsx)(A.Mf,{title:"render toolbar error: ".concat(h.error.message)})})):null},v=function(h){var M=(0,C.ngQ)(),n=M.designable,y=(0,i.useMemo)(function(){if(h["x-designer"]||h["x-toolbar"])return h["x-designer"]||h["x-toolbar"];if(h["x-settings"])return A.Mf},[h]),L=(0,C.Cor)(y);return{render:function(a){return!n||!L?null:(0,r.jsx)(g.SV,{FallbackComponent:K,onError:console.error,children:(0,r.jsx)(L,k()(k()({},h["x-toolbar-props"]),a))})},exists:!!L}}},57780:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{_:function(){return getRequireJs}});var _Users_krzysztof_Code_noco_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_typeof_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(52677),_Users_krzysztof_Code_noco_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_typeof_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_Users_krzysztof_Code_noco_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_typeof_js__WEBPACK_IMPORTED_MODULE_0__);function getRequireJs(){var requirejs,require,define,req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.6",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!!(typeof window<"u"&&typeof navigator<"u"&&window.document),isWebWorker=!isBrowser&&typeof importScripts<"u",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera<"u"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(He,ae){return ae||""}function isFunction(He){return ostring.call(He)==="[object Function]"}function isArray(He){return ostring.call(He)==="[object Array]"}function each(He,ae){if(He){var e;for(e=0;e<He.length&&!(He[e]&&ae(He[e],e,He));e+=1);}}function eachReverse(He,ae){if(He){var e;for(e=He.length-1;e>-1&&!(He[e]&&ae(He[e],e,He));e-=1);}}function hasProp(He,ae){return hasOwn.call(He,ae)}function getOwn(He,ae){return hasProp(He,ae)&&He[ae]}function eachProp(He,ae){var e;for(e in He)if(hasProp(He,e)&&ae(He[e],e))break}function mixin(He,ae,e,Z){return ae&&eachProp(ae,function(c,k){(e||!hasProp(He,k))&&(Z&&_Users_krzysztof_Code_noco_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_typeof_js__WEBPACK_IMPORTED_MODULE_0___default()(c)==="object"&&c&&!isArray(c)&&!isFunction(c)&&!(c instanceof RegExp)?(He[k]||(He[k]={}),mixin(He[k],c,e,Z)):He[k]=c)}),He}function bind(He,ae){return function(){return ae.apply(He,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(He){throw He}function getGlobal(He){if(!He)return He;var ae=__webpack_require__.g;return each(He.split("."),function(e){ae=ae[e]}),ae}function makeError(He,ae,e,Z){var c=new Error(ae+`
https://requirejs.org/docs/errors.html#`+He);return c.requireType=He,c.requireModules=Z,e&&(c.originalError=e),c}if(typeof define<"u")return;if(typeof requirejs<"u"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}typeof require<"u"&&!isFunction(require)&&(cfg=require,require=void 0);function newContext(He){var ae,e,Z,c,k,i={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},g={},C={},A={},r=[],K={},v={},j={},h=1,M=1;function n(d){var u,l;for(u=0;u<d.length;u++)if(l=d[u],l===".")d.splice(u,1),u-=1;else if(l===".."){if(u===0||u===1&&d[2]===".."||d[u-1]==="..")continue;u>0&&(d.splice(u-1,2),u-=2)}}function y(d,u,l){var S,H,O,N,t,B,X,V,U,D,ne,q,J=u&&u.split("/"),Y=i.map,P=Y&&Y["*"];if(d&&(d=d.split("/"),X=d.length-1,i.nodeIdCompat&&jsSuffixRegExp.test(d[X])&&(d[X]=d[X].replace(jsSuffixRegExp,"")),d[0].charAt(0)==="."&&J&&(q=J.slice(0,J.length-1),d=q.concat(d)),n(d),d=d.join("/")),l&&Y&&(J||P)){O=d.split("/");e:for(N=O.length;N>0;N-=1){if(B=O.slice(0,N).join("/"),J){for(t=J.length;t>0;t-=1)if(H=getOwn(Y,J.slice(0,t).join("/")),H&&(H=getOwn(H,B),H)){V=H,U=N;break e}}!D&&P&&getOwn(P,B)&&(D=getOwn(P,B),ne=N)}!V&&D&&(V=D,U=ne),V&&(O.splice(0,U,V),d=O.join("/"))}return S=getOwn(i.pkgs,d),S||d}function L(d){isBrowser&&each(scripts(),function(u){if(u.getAttribute("data-requiremodule")===d&&u.getAttribute("data-requirecontext")===Z.contextName)return u.parentNode.removeChild(u),!0})}function o(d){var u=getOwn(i.paths,d);if(u&&isArray(u)&&u.length>1)return u.shift(),Z.require.undef(d),Z.makeRequire(null,{skipMap:!0})([d]),!0}function a(d){var u,l=d?d.indexOf("!"):-1;return l>-1&&(u=d.substring(0,l),d=d.substring(l+1,d.length)),[u,d]}function R(d,u,l,S){var H,O,N,t,B=null,X=u?u.name:null,V=d,U=!0,D="";return d||(U=!1,d="_@r"+(h+=1)),t=a(d),B=t[0],d=t[1],B&&(B=y(B,X,S),O=getOwn(K,B)),d&&(B?l?D=d:O&&O.normalize?D=O.normalize(d,function(ne){return y(ne,X,S)}):D=d.indexOf("!")===-1?y(d,X,S):d:(D=y(d,X,S),t=a(D),B=t[0],D=t[1],l=!0,H=Z.nameToUrl(D))),N=B&&!O&&!l?"_unnormalized"+(M+=1):"",{prefix:B,name:D,parentMap:u,unnormalized:!!N,url:H,originalName:V,isDefine:U,id:(B?B+"!"+D:D)+N}}function E(d){var u=d.id,l=getOwn(g,u);return l||(l=g[u]=new Z.Module(d)),l}function $(d,u,l){var S=d.id,H=getOwn(g,S);hasProp(K,S)&&(!H||H.defineEmitComplete)?u==="defined"&&l(K[S]):(H=E(d),H.error&&u==="error"?l(H.error):H.on(u,l))}function Q(d,u){var l=d.requireModules,S=!1;u?u(d):(each(l,function(H){var O=getOwn(g,H);O&&(O.error=d,O.events.error&&(S=!0,O.emit("error",d)))}),S||req.onError(d))}function z(){globalDefQueue.length&&(each(globalDefQueue,function(d){var u=d[0];typeof u=="string"&&(Z.defQueueMap[u]=!0),r.push(d)}),globalDefQueue=[])}c={require:function(u){return u.require?u.require:u.require=Z.makeRequire(u.map)},exports:function(u){if(u.usingExports=!0,u.map.isDefine)return u.exports?K[u.map.id]=u.exports:u.exports=K[u.map.id]={}},module:function(u){return u.module?u.module:u.module={id:u.map.id,uri:u.map.url,config:function(){return getOwn(i.config,u.map.id)||{}},exports:u.exports||(u.exports={})}}};function p(d){delete g[d],delete C[d]}function b(d,u,l){var S=d.map.id;d.error?d.emit("error",d.error):(u[S]=!0,each(d.depMaps,function(H,O){var N=H.id,t=getOwn(g,N);t&&!d.depMatched[O]&&!l[N]&&(getOwn(u,N)?(d.defineDep(O,K[N]),d.check()):b(t,u,l))}),l[S]=!0)}function f(){var d,u,l=i.waitSeconds*1e3,S=l&&Z.startTime+l<new Date().getTime(),H=[],O=[],N=!1,t=!0;if(!ae){if(ae=!0,eachProp(C,function(B){var X=B.map,V=X.id;if(B.enabled&&(X.isDefine||O.push(B),!B.error)){if(!B.inited&&S)o(V)?(u=!0,N=!0):(H.push(V),L(V));else if(!B.inited&&B.fetched&&X.isDefine&&(N=!0,!X.prefix))return t=!1}}),S&&H.length)return d=makeError("timeout","Load timeout for modules: "+H,null,H),d.contextName=Z.contextName,Q(d);t&&each(O,function(B){b(B,{},{})}),(!S||u)&&N&&(isBrowser||isWebWorker)&&!k&&(k=setTimeout(function(){k=0,f()},50)),ae=!1}}e=function(u){this.events=getOwn(A,u.id)||{},this.map=u,this.shim=getOwn(i.shim,u.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},e.prototype={init:function(u,l,S,H){H=H||{},!this.inited&&(this.factory=l,S?this.on("error",S):this.events.error&&(S=bind(this,function(O){this.emit("error",O)})),this.depMaps=u&&u.slice(0),this.errback=S,this.inited=!0,this.ignore=H.ignore,H.enabled||this.enabled?this.enable():this.check())},defineDep:function(u,l){this.depMatched[u]||(this.depMatched[u]=!0,this.depCount-=1,this.depExports[u]=l)},fetch:function(){if(!this.fetched){this.fetched=!0,Z.startTime=new Date().getTime();var u=this.map;if(this.shim)Z.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return u.prefix?this.callPlugin():this.load()}));else return u.prefix?this.callPlugin():this.load()}},load:function(){var u=this.map.url;v[u]||(v[u]=!0,Z.load(this.map.id,u))},check:function(){if(!(!this.enabled||this.enabling)){var u,l,S=this.map.id,H=this.depExports,O=this.exports,N=this.factory;if(!this.inited)hasProp(Z.defQueueMap,S)||this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(N)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{O=Z.execCb(S,N,H,O)}catch(B){u=B}else O=Z.execCb(S,N,H,O);if(this.map.isDefine&&O===void 0&&(l=this.module,l?O=l.exports:this.usingExports&&(O=this.exports)),u)return u.requireMap=this.map,u.requireModules=this.map.isDefine?[this.map.id]:null,u.requireType=this.map.isDefine?"define":"require",Q(this.error=u)}else O=N;if(this.exports=O,this.map.isDefine&&!this.ignore&&(K[S]=O,req.onResourceLoad)){var t=[];each(this.depMaps,function(B){t.push(B.normalizedMap||B)}),req.onResourceLoad(Z,this.map,t)}p(S),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}},callPlugin:function(){var u=this.map,l=u.id,S=R(u.prefix);this.depMaps.push(S),$(S,"defined",bind(this,function(H){var O,N,t,B=getOwn(j,this.map.id),X=this.map.name,V=this.map.parentMap?this.map.parentMap.name:null,U=Z.makeRequire(u.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){H.normalize&&(X=H.normalize(X,function(D){return y(D,V,!0)})||""),N=R(u.prefix+"!"+X,this.map.parentMap,!0),$(N,"defined",bind(this,function(D){this.map.normalizedMap=N,this.init([],function(){return D},null,{enabled:!0,ignore:!0})})),t=getOwn(g,N.id),t&&(this.depMaps.push(N),this.events.error&&t.on("error",bind(this,function(D){this.emit("error",D)})),t.enable());return}if(B){this.map.url=Z.nameToUrl(B),this.load();return}O=bind(this,function(D){this.init([],function(){return D},null,{enabled:!0})}),O.error=bind(this,function(D){this.inited=!0,this.error=D,D.requireModules=[l],eachProp(g,function(ne){ne.map.id.indexOf(l+"_unnormalized")===0&&p(ne.map.id)}),Q(D)}),O.fromText=bind(this,function(D,ne){var q=u.name,J=R(q),Y=useInteractive;ne&&(D=ne),Y&&(useInteractive=!1),E(J),hasProp(i.config,l)&&(i.config[q]=i.config[l]);try{req.exec(D)}catch(P){return Q(makeError("fromtexteval","fromText eval for "+l+" failed: "+P,P,[l]))}Y&&(useInteractive=!0),this.depMaps.push(J),Z.completeLoad(q),U([q],O)}),H.load(u.name,U,O,i)})),Z.enable(S,this),this.pluginMaps[S.id]=S},enable:function(){C[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(u,l){var S,H,O;if(typeof u=="string"){if(u=R(u,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[l]=u,O=getOwn(c,u.id),O){this.depExports[l]=O(this);return}this.depCount+=1,$(u,"defined",bind(this,function(N){this.undefed||(this.defineDep(l,N),this.check())})),this.errback?$(u,"error",bind(this,this.errback)):this.events.error&&$(u,"error",bind(this,function(N){this.emit("error",N)}))}S=u.id,H=g[S],!hasProp(c,S)&&H&&!H.enabled&&Z.enable(u,this)})),eachProp(this.pluginMaps,bind(this,function(u){var l=getOwn(g,u.id);l&&!l.enabled&&Z.enable(u,this)})),this.enabling=!1,this.check()},on:function(u,l){var S=this.events[u];S||(S=this.events[u]=[]),S.push(l)},emit:function(u,l){each(this.events[u],function(S){S(l)}),u==="error"&&delete this.events[u]}};function x(d){hasProp(K,d[0])||E(R(d[0],null,!0)).init(d[1],d[2])}function m(d,u,l,S){d.detachEvent&&!isOpera?S&&d.detachEvent(S,u):d.removeEventListener(l,u,!1)}function F(d){var u=d.currentTarget||d.srcElement;return m(u,Z.onScriptLoad,"load","onreadystatechange"),m(u,Z.onScriptError,"error"),{node:u,id:u&&u.getAttribute("data-requiremodule")}}function I(){var d;for(z();r.length;){if(d=r.shift(),d[0]===null)return Q(makeError("mismatch","Mismatched anonymous define() module: "+d[d.length-1]));x(d)}Z.defQueueMap={}}return Z={config:i,contextName:He,registry:g,defined:K,urlFetched:v,defQueue:r,defQueueMap:{},Module:e,makeModuleMap:R,nextTick:req.nextTick,onError:Q,configure:function(u){if(u.baseUrl&&u.baseUrl.charAt(u.baseUrl.length-1)!=="/"&&(u.baseUrl+="/"),typeof u.urlArgs=="string"){var l=u.urlArgs;u.urlArgs=function(O,N){return(N.indexOf("?")===-1?"?":"&")+l}}var S=i.shim,H={paths:!0,bundles:!0,config:!0,map:!0};eachProp(u,function(O,N){H[N]?(i[N]||(i[N]={}),mixin(i[N],O,!0,!0)):i[N]=O}),u.bundles&&eachProp(u.bundles,function(O,N){each(O,function(t){t!==N&&(j[t]=N)})}),u.shim&&(eachProp(u.shim,function(O,N){isArray(O)&&(O={deps:O}),(O.exports||O.init)&&!O.exportsFn&&(O.exportsFn=Z.makeShimExports(O)),S[N]=O}),i.shim=S),u.packages&&each(u.packages,function(O){var N,t;O=typeof O=="string"?{name:O}:O,t=O.name,N=O.location,N&&(i.paths[t]=O.location),i.pkgs[t]=O.name+"/"+(O.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(g,function(O,N){!O.inited&&!O.map.unnormalized&&(O.map=R(N,null,!0))}),(u.deps||u.callback)&&Z.require(u.deps||[],u.callback)},makeShimExports:function(u){function l(){var S;return u.init&&(S=u.init.apply(__webpack_require__.g,arguments)),S||u.exports&&getGlobal(u.exports)}return l},makeRequire:function(u,l){l=l||{};function S(H,O,N){var t,B,X;return l.enableBuildCallback&&O&&isFunction(O)&&(O.__requireJsBuild=!0),typeof H=="string"?isFunction(O)?Q(makeError("requireargs","Invalid require call"),N):u&&hasProp(c,H)?c[H](g[u.id]):req.get?req.get(Z,H,u,S):(B=R(H,u,!1,!0),t=B.id,hasProp(K,t)?K[t]:Q(makeError("notloaded",'Module name "'+t+'" has not been loaded yet for context: '+He+(u?"":". Use require([])")))):(I(),Z.nextTick(function(){I(),X=E(R(null,u)),X.skipMap=l.skipMap,X.init(H,O,N,{enabled:!0}),f()}),S)}return mixin(S,{isBrowser,toUrl:function(O){var N,t=O.lastIndexOf("."),B=O.split("/")[0],X=B==="."||B==="..";return t!==-1&&(!X||t>1)&&(N=O.substring(t,O.length),O=O.substring(0,t)),Z.nameToUrl(y(O,u&&u.id,!0),N,!0)},defined:function(O){return hasProp(K,R(O,u,!1,!0).id)},specified:function(O){return O=R(O,u,!1,!0).id,hasProp(K,O)||hasProp(g,O)}}),u||(S.undef=function(H){z();var O=R(H,u,!0),N=getOwn(g,H);N.undefed=!0,L(H),delete K[H],delete v[O.url],delete A[H],eachReverse(r,function(t,B){t[0]===H&&r.splice(B,1)}),delete Z.defQueueMap[H],N&&(N.events.defined&&(A[H]=N.events),p(H))}),S},enable:function(u){var l=getOwn(g,u.id);l&&E(u).enable()},completeLoad:function(u){var l,S,H,O=getOwn(i.shim,u)||{},N=O.exports;for(z();r.length;){if(S=r.shift(),S[0]===null){if(S[0]=u,l)break;l=!0}else S[0]===u&&(l=!0);x(S)}if(Z.defQueueMap={},H=getOwn(g,u),!l&&!hasProp(K,u)&&H&&!H.inited){if(i.enforceDefine&&(!N||!getGlobal(N)))return o(u)?void 0:Q(makeError("nodefine","No define call for "+u,null,[u]));x([u,O.deps||[],O.exportsFn])}f()},nameToUrl:function(u,l,S){var H,O,N,t,B,X,V,U=getOwn(i.pkgs,u);if(U&&(u=U),V=getOwn(j,u),V)return Z.nameToUrl(V,l,S);if(req.jsExtRegExp.test(u))B=u+(l||"");else{for(H=i.paths,O=u.split("/"),N=O.length;N>0;N-=1)if(t=O.slice(0,N).join("/"),X=getOwn(H,t),X){isArray(X)&&(X=X[0]),O.splice(0,N,X);break}B=O.join("/"),B+=l||(/^data\:|^blob\:|\?/.test(B)||S?"":".js"),B=(B.charAt(0)==="/"||B.match(/^[\w\+\.\-]+:/)?"":i.baseUrl)+B}return i.urlArgs&&!/^blob\:/.test(B)?B+i.urlArgs(u,B):B},load:function(u,l){req.load(Z,u,l)},execCb:function(u,l,S,H){return l.apply(H,S)},onScriptLoad:function(u){if(u.type==="load"||readyRegExp.test((u.currentTarget||u.srcElement).readyState)){interactiveScript=null;var l=F(u);Z.completeLoad(l.id)}},onScriptError:function(u){var l=F(u);if(!o(l.id)){var S=[];return eachProp(g,function(H,O){O.indexOf("_@r")!==0&&each(H.depMaps,function(N){if(N.id===l.id)return S.push(O),!0})}),Q(makeError("scripterror",'Script error for "'+l.id+(S.length?'", needed by: '+S.join(", "):'"'),u,[l.id]))}}},Z.require=Z.makeRequire(),Z}req=requirejs=function(ae,e,Z,c){var k,i,g=defContextName;return!isArray(ae)&&typeof ae!="string"&&(i=ae,isArray(e)?(ae=e,e=Z,Z=c):ae=[]),i&&i.context&&(g=i.context),k=getOwn(contexts,g),k||(k=contexts[g]=req.s.newContext(g)),i&&k.configure(i),k.require(ae,e,Z)},req.config=function(He){return req(He)},req.nextTick=typeof setTimeout<"u"?function(He){setTimeout(He,4)}:function(He){He()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts,newContext},req({}),each(["toUrl","undef","defined","specified"],function(He){req[He]=function(){var ae=contexts[defContextName];return ae.require[He].apply(ae,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(He,ae,e){var Z=He.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return Z.type=He.scriptType||"text/javascript",Z.charset="utf-8",Z.async=!0,Z},req.load=function(He,ae,e){var Z=He&&He.config||{},c;if(isBrowser)return c=req.createNode(Z,ae,e),c.setAttribute("data-requirecontext",He.contextName),c.setAttribute("data-requiremodule",ae),c.attachEvent&&!(c.attachEvent.toString&&c.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,c.attachEvent("onreadystatechange",He.onScriptLoad)):(c.addEventListener("load",He.onScriptLoad,!1),c.addEventListener("error",He.onScriptError,!1)),c.src=e,Z.onNodeCreated&&Z.onNodeCreated(c,Z,ae,e),currentlyAddingScript=c,baseElement?head.insertBefore(c,baseElement):head.appendChild(c),currentlyAddingScript=null,c;if(isWebWorker)try{setTimeout(function(){},0),importScripts(e),He.completeLoad(ae)}catch(k){He.onError(makeError("importscripts","importScripts failed for "+ae+" at "+e,k,[ae]))}};function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"||eachReverse(scripts(),function(He){if(He.readyState==="interactive")return interactiveScript=He}),interactiveScript}return isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(He){if(head||(head=He.parentNode),dataMain=He.getAttribute("data-main"),dataMain)return mainScript=dataMain,!cfg.baseUrl&&mainScript.indexOf("!")===-1&&(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(ae,e,Z){var c,k;typeof ae!="string"&&(Z=e,e=ae,ae=null),isArray(e)||(Z=e,e=null),!e&&isFunction(Z)&&(e=[],Z.length&&(Z.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(i,g){e.push(g)}),e=(Z.length===1?["require"]:["require","exports","module"]).concat(e))),useInteractive&&(c=currentlyAddingScript||getInteractiveScript(),c&&(ae||(ae=c.getAttribute("data-requiremodule")),k=contexts[c.getAttribute("data-requirecontext")])),k?(k.defQueue.push([ae,e,Z]),k.defQueueMap[ae]=!0):globalDefQueue.push([ae,e,Z])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg),{requirejs,require,define}}},26124:function(He,ae,e){"use strict";e.d(ae,{pW:function(){return v},tO:function(){return K},w3:function(){return j}});var Z=e(97857),c=e.n(Z),k=e(13769),i=e.n(k),g=e(67294),C=e(12174),A=e(85893),r=["value","request","children"],K=(0,g.createContext)(null);K.displayName="AsyncDataContext";var v=function(M){var n=M.value,y=M.request,L=M.children,o=i()(M,r),a=(0,C.QT)(y,c()({},o));return n?(0,A.jsx)(K.Provider,{value:n,children:L}):(0,A.jsx)(K.Provider,{value:a,children:L})},j=function(){return(0,g.useContext)(K)}},75148:function(He,ae,e){"use strict";e.d(ae,{BU:function(){return l},C:function(){return X},DD:function(){return B},M0:function(){return u},MM:function(){return D},Qj:function(){return H},VG:function(){return O},WJ:function(){return m},ZJ:function(){return t},bH:function(){return d},br:function(){return F},e0:function(){return V},gY:function(){return S},hD:function(){return ne},lT:function(){return I},m:function(){return U},wH:function(){return x}});var Z=e(13769),c=e.n(Z),k=e(96695),i=e.n(k),g=e(97857),C=e.n(g),A=e(80844),r=e(90105),K=e(71230),v=e(15746),j=e(96486),h=e.n(j),M=e(41106),n=e.n(M),y=e(67294),L=e(79655),o=e(21143),a=e(75667),R=e(6145),E=e(57105),$=e(97703),Q=e(36586),z=e(10097),p=e(94658),b=e(85893),f=["title","to"],x=(0,y.createContext)(null);x.displayName="BlockResourceContext";var m=(0,y.createContext)(null);m.displayName="BlockAssociationContext";var F=(0,y.createContext)({});F.displayName="BlockRequestContext_deprecated";var I=function(){var J=(0,o.useDataBlockResource)();return(0,y.useContext)(x)||J},d=function(J){var Y=J.collection;return Y?(0,b.jsx)(R.CollectionProvider_deprecated,{collection:Y,children:(0,b.jsx)(a.Hh,{children:J.children})}):J.children},u=function(J){var Y=(0,A.useField)(),P=(0,o.useDataBlockResource)(),w=(0,o.useDataBlockRequest)(),ie=(0,o.useCollectionRecord)(),G=(0,o.useCollectionParentRecord)(),le=l(),xe=(0,y.useMemo)(function(){return{block:J.block,props:J,field:Y,service:w,resource:P,__parent:le,updateAssociationValues:(J==null?void 0:J.updateAssociationValues)||[]}},[le,Y,J,P,w]);return(0,b.jsx)(F.Provider,{value:xe,children:(0,b.jsx)(Q.HV,{isNew:ie==null?void 0:ie.isNew,record:ie==null?void 0:ie.data,parent:G==null?void 0:G.data,children:J.children})})},l=function(){return(0,y.useContext)(F)},S=function(J){var Y,P=(0,A.useFieldSchema)(),w=(0,o.useDesignable)(),ie=w.findComponent,G=(0,A.useField)(),le=ie((Y=G.component)===null||Y===void 0?void 0:Y[0])||y.Fragment,xe=P.reduceProperties(function(_e,Ee){return Ee["x-component"]==="AssociationFilter"?Ee:_e},null);return xe?(0,b.jsx)(le,C()(C()({},G.componentProps),{},{children:(0,b.jsxs)(K.Z,{style:{height:"100%"},gutter:16,wrap:!1,children:[(0,b.jsx)(v.Z,{style:C()({width:200,flex:"0 0 auto"},J.associationFilterStyle||{}),children:(0,b.jsx)(A.RecursionField,{schema:P,onlyRenderProperties:!0,filterProperties:function(Ee){return Ee["x-component"]==="AssociationFilter"}})}),(0,b.jsx)(v.Z,{style:{flex:"1 1 auto",minWidth:0},children:(0,b.jsx)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:(0,b.jsx)(A.RecursionField,{schema:P,onlyRenderProperties:!0,filterProperties:function(Ee){return Ee["x-component"]!=="AssociationFilter"}})})})]})})):J.children},H=(0,y.createContext)(null);H.displayName="BlockContext";var O=function(){return(0,y.useContext)(H)},N=function(J){var Y=(0,A.useFieldSchema)();return Y["x-use-decorator-props"]?J.parentRecord:(0,p.M)(J)},t=function(J){var Y=J.name,P=J.dataSource,w=J.useParams,ie=J.parentRecord,G=N(J),le=(0,E.QJ)(),xe=(0,r.Z)(),_e=(0,y.useCallback)(function(){xe(),le==null||le()},[xe,le]),Ee=w==null?void 0:w(),ze=(0,z.useAssociationNames)(P),Se=ze.getAssociationAppends,se=Se(),me=se.appends,pe=se.updateAssociationValues,ee=(0,y.useMemo)(function(){var ge;return(ge=J.params)!==null&&ge!==void 0&&ge.appends?C()(C()({},J.params),Ee):C()(C()({},J.params),{},{appends:me},Ee)},[me,Ee,J.params]),ue=(0,y.useMemo)(function(){return{name:Y}},[Y]);return(0,b.jsx)(H.Provider,{value:ue,children:(0,b.jsx)(o.DataBlockProvider,C()(C()({},J),{},{params:ee,parentRecord:ie||G,children:(0,b.jsx)(u,C()(C()({},J),{},{updateAssociationValues:pe,params:ee,children:(0,b.jsx)(E.ri,{refresh:_e,children:J.children})}))}))})},B=function(){var J=(0,o.useDataBlockProps)(),Y=J.association;return(0,y.useContext)(m)||Y},X=function(J){var Y=l(),P=Y.resource,w=Y.__parent,ie=(0,Q.pW)(),G=(0,o.useCollectionRecordData)(),le=(0,R.useCollection_deprecated)(),xe=B(),_e=(J==null?void 0:J.association)||xe,Ee=(0,y.useContext)(o.WithoutTableFieldResource),ze=(0,o.useCollectionManager)();if(!Ee&&(P instanceof o.TableFieldResource||(w==null?void 0:w.block)==="TableField"))return ie;if(_e){var Se=ze.getCollectionField(_e);return G==null?void 0:G[Se.targetKey||Se.sourceKey||"id"]}if((0,j.isArray)(le.filterTargetKey)){var se={},me=i()(le.filterTargetKey),pe;try{for(me.s();!(pe=me.n()).done;){var ee=pe.value;se[ee]=G==null?void 0:G[ee]}}catch(ue){me.e(ue)}finally{me.f()}return se}else return G==null?void 0:G[le.filterTargetKey||"id"]},V=function(){var J=(0,o.useRecord)(),Y=(0,R.useCollectionManager_deprecated)(),P=Y.getCollectionField,w=B();if(w){var ie=P(w);return J==null?void 0:J[ie.sourceKey||"id"]}},U=function(){return(0,$.G)()},D=function(J){var Y,P,w=X(J),ie=(0,o.useRecord)(),G=(0,R.useCollection_deprecated)(),le=G.fields,xe=(0,A.useFieldSchema)(),_e=(0,R.useCollectionManager_deprecated)(),Ee=_e.getCollectionJoinField,ze=Ee((xe==null||(Y=xe["x-decorator-props"])===null||Y===void 0?void 0:Y.resource)||(xe==null||(P=xe["x-decorator-props"])===null||P===void 0?void 0:P.association)),Se=le.filter(function(pe){return["boolean","date","integer","radio","sort","string","time","uid","uuid"].includes(pe.type)}).map(function(pe){return pe.name}),se=Object.keys(ie).filter(function(pe){return Se.includes(pe)}).reduce(function(pe,ee){return pe[ee]=ie[ee],pe},{}),me={filterByTk:w};return ie.__collection&&ze&&!["oho","m2o","obo"].includes(ze.interface)&&(me.targetCollection=ie.__collection),!w&&Object.keys(se).length>0&&(me.filter=se),me},ne=function(J){var Y=(0,A.useField)(),P=(0,o.useRecord)(),w=J.title,ie=J.to,G=c()(J,f),le=n()(ie||"");return(0,b.jsx)(L.Link,C()(C()({},G),{},{to:le({record:P||{}}),children:Y.title}))}},29250:function(He,ae,e){"use strict";e.d(ae,{H:function(){return A},Q:function(){return r}});var Z=e(97857),c=e.n(Z),k=e(67294),i=e(85893),g=function(){},C=(0,k.createContext)(null),A=function(v){var j=(0,k.useRef)(v.defaultOperators||{}),h=(0,k.useCallback)(function(L,o){j.current[L]=o},[]),M=(0,k.useCallback)(function(){return c()({},j.current)},[]),n=(0,k.useCallback)(function(L){return j.current[L]},[]),y=(0,k.useCallback)(function(L){delete j.current[L]},[]);return(0,i.jsx)(C.Provider,{value:{collectOperator:h,getOperators:M,getOperator:n,removeOperator:y},children:v.children})},r=function(){var v=k.useContext(C)||{},j=v.getOperator,h=j===void 0?g:j,M=v.getOperators,n=M===void 0?g:M,y=v.collectOperator,L=y===void 0?g:y,o=v.removeOperator,a=o===void 0?g:o;return{getOperator:h,getOperators:n,collectOperator:L,removeOperator:a}}},35964:function(He,ae,e){"use strict";e.d(ae,{BX:function(){return p},LR:function(){return R},nT:function(){return z},nw:function(){return Q}});var Z=e(97857),c=e.n(Z),k=e(86201),i=e(80844),g=e(90105),C=e(57953),A=e(67294),r=e(6145),K=e(94804),v=e(49834),j=e(15503),h=e(86693),M=e(36586),n=e(62954),y=e(96808),L=e(75148),o=e(31019),a=e(85893),R=(0,A.createContext)({});R.displayName="DetailsBlockContext";var E=function(f){var x,m,F=f.action,I=f.readPretty,d=(0,i.useField)(),u=(0,A.useMemo)(function(){return(0,k.createForm)({readPretty:I})},[I]),l=(0,K.Kx)(),S=(0,L.BU)(),H=S.resource,O=S.service,N=(0,v.RA)(),t=(F==="list"?O==null||(x=O.data)===null||x===void 0||(x=x.data)===null||x===void 0?void 0:x[0]:O==null||(m=O.data)===null||m===void 0?void 0:m.data)||{},B=(0,A.useRef)(),X=(0,A.useMemo)(function(){return{action:F,form:u,field:d,service:O,resource:H,formBlockRef:B}},[F,d,u,H,O]);return O.loading&&!d.loaded?(0,a.jsx)(C.Z,{}):(d.loaded=!0,(0,a.jsx)(y.ov,{recordData:t,collectionName:l==null?void 0:l.name,children:(0,a.jsx)(R.Provider,{value:X,children:(0,a.jsx)("div",{ref:B,children:(0,a.jsx)(M.HV,{isNew:!1,record:t,parent:N==null?void 0:N.data,children:f.children})})})}))},$=function(f){var x=(0,i.useFieldSchema)(),m,F=!1;if(x["x-use-decorator-props"])m=f==null?void 0:f.params,F=f==null?void 0:f.parseVariableLoading;else{var I=(0,h.l)(f);m=I.params,F=I.parseVariableLoading}return{params:m,parseVariableLoading:F}},Q=(0,j.t)(function(b){var f=$(b),x=f.params,m=f.parseVariableLoading,F=(0,K.nE)(),I=b.association,d=b.dataSource,u=b.action,l=(0,r.useCollectionManager_deprecated)(d),S=l.getCollection,H=F||{},O=H.__collection,N=(0,n.ngQ)(),t=N.designable,B=b.collection,X=!0;!t&&O&&u==="get"&&!I&&(X=O===B);var V=(0,g.Z)();return!X||m?null:(0,a.jsx)(o.T,{onTemplateLoaded:V,children:(0,a.jsx)(L.ZJ,c()(c()({name:"details"},b),{},{params:x,children:(0,a.jsx)(E,c()({},b))}))})}),z=function(){return(0,A.useContext)(R)},p=function(){var f,x=z();return(0,A.useEffect)(function(){if(!x.service.loading){var m,F,I=x.action==="list"?(m=x.service)===null||m===void 0||(m=m.data)===null||m===void 0||(m=m.data)===null||m===void 0?void 0:m[0]:(F=x.service)===null||F===void 0||(F=F.data)===null||F===void 0?void 0:F.data;x.form.reset().then(function(){x.form.setInitialValues(I||{}),x.form.setValues(I||{})}).catch(console.error)}},[x.action,x.form,(f=x.service)===null||f===void 0||(f=f.data)===null||f===void 0?void 0:f.data,x.service.loading]),{form:x.form}}},7340:function(He,ae,e){"use strict";e.d(ae,{$R:function(){return E},Fi:function(){return z},TC:function(){return L},WG:function(){return R},_$:function(){return Q},bz:function(){return $},th:function(){return a}});var Z=e(97857),c=e.n(Z),k=e(86201),i=e(80844),g=e(90105),C=e(67294),A=e(94804),r=e(15503),K=e(67354),v=e(36586),j=e(62954),h=e(75148),M=e(31019),n=e(44899),y=e(85893),L=(0,C.createContext)({});L.displayName="FormBlockContext";var o=function(b){var f,x=(0,A.d9)(),m=$(),F=b.action,I=b.readPretty,d=b.params,u=b.collection,l=b.association,S=(0,i.useField)(),H=(0,C.useMemo)(function(){return(0,k.createForm)({readPretty:I})},[I]),O=(0,h.BU)(),N=O.resource,t=O.service,B=O.updateAssociationValues,X=(0,C.useRef)(),V=(0,A.oV)(),U=(0,C.useMemo)(function(){var D;return c()(c()({},m),{},{params:d,action:F,form:H,type:F==="get"?"update":"create",field:S,service:t,resource:N,updateAssociationValues:B,formBlockRef:X,collectionName:u||((D=x.getCollectionField(l))===null||D===void 0?void 0:D.target),formRecord:V})},[F,l,x,u,m,S,H,d,V,N,t,B]);return(0,y.jsx)(L.Provider,{value:U,children:(0,y.jsx)(v.HV,{isNew:V==null?void 0:V.isNew,parent:V==null||(f=V.parentRecord)===null||f===void 0?void 0:f.data,record:V==null?void 0:V.data,children:(0,y.jsx)("div",{ref:X,children:b.children})})})},a=function(){var b=$()||{},f=(0,C.useMemo)(function(){return{type:b.type}},[b.type]);return f},R=function(){var b=$(),f=(0,j.XCj)(),x=f.fieldSchema;return b.type!=="create"&&(x==null?void 0:x["x-acl-action"])!=="create"&&(x==null?void 0:x["x-action"])!=="create"},E=(0,r.t)(function(p){var b=(0,A.Kv)(),f=p.parentRecord,x=p.action,m=(0,A.nE)(),F=p.association,I=(0,A.d9)(),d=m||{},u=d.__collection,l=(0,j.ngQ)(),S=l.designable,H=p.collection||I.getCollection(F).name,O=(0,g.Z)();return!S&&u&&x&&u!==H?null:(0,y.jsx)(M.T,{onTemplateLoaded:O,children:(0,y.jsx)(h.ZJ,c()(c()({name:p.name||"form"},p),{},{block:"form",parentRecord:f||b,children:(0,y.jsx)(n.T,{name:"form",children:(0,y.jsx)(o,c()({},p))})}))})}),$=function(){return(0,C.useContext)(L)},Q=function(){var b,f,x=$(),m=(0,K.t)();return(0,C.useEffect)(function(){if(m){var F;(F=x.form)===null||F===void 0||F.query("parent").take(function(I){I.disabled=!0,I.value=m})}}),(0,C.useEffect)(function(){var F,I,d=x.form;!d||(F=x.service)!==null&&F!==void 0&&F.loading||d.setInitialValues((I=x.service)===null||I===void 0||(I=I.data)===null||I===void 0?void 0:I.data)},[x.form,(b=x.service)===null||b===void 0||(b=b.data)===null||b===void 0?void 0:b.data,(f=x.service)===null||f===void 0?void 0:f.loading]),{form:x.form}},z=function(b){for(;b;){if(b["x-decorator"]==="FormBlockProvider")return b;if(b["x-component"]==="AssociationField.Selector")return null;b=b.parent}return null}},71176:function(He,ae,e){"use strict";e.d(ae,{$1:function(){return o},$Y:function(){return L},GK:function(){return R},e$:function(){return a},uW:function(){return n}});var Z=e(97857),c=e.n(Z),k=e(86201),i=e(80844),g=e(85667),C=e(84157),A=e(57953),r=e(67294),K=e(49834),v=e(36586),j=e(75148),h=e(7340),M=e(85893),n=(0,r.createContext)({});n.displayName="FormFieldContext";var y=function($){var Q,z,p=$.action,b=$.readPretty,f=$.fieldName,x=(0,h.bz)(),m=(0,K.Kv)();if(!(x!=null&&(Q=x.updateAssociationValues)!==null&&Q!==void 0&&Q.includes(f))){var F;x==null||(F=x.updateAssociationValues)===null||F===void 0||F.push(f)}var I=(0,i.useField)(),d=(0,r.useMemo)(function(){return(0,k.createForm)({effects:function(){(0,k.onFormValuesChange)(function(O){var N;x==null||(N=x.form)===null||N===void 0||N.setValuesIn(f,O.values)})},readPretty:b})},[]);(0,r.useEffect)(function(){var H=(0,g.autorun)(function(){var O,N=(x==null||(O=x.form)===null||O===void 0?void 0:O.values[f])||{};d.reset(),(0,C.forEach)(N,function(t,B){t&&(d.values[B]=t)})});return H},[]);var u=(0,j.BU)(),l=u.resource,S=u.service;return S.loading?(0,M.jsx)(A.Z,{}):(0,M.jsx)(v.HV,{record:S==null||(z=S.data)===null||z===void 0?void 0:z.data,parent:m,children:(0,M.jsx)(n.Provider,{value:{action:p,form:d,field:I,service:S,resource:l,fieldName:f},children:$.children})})},L=(0,r.createContext)(null);L.displayName="WithoutFormFieldResource";var o=function($){return(0,M.jsx)(L.Provider,{value:!1,children:(0,M.jsx)(j.ZJ,c()(c()({name:"form-field",block:"FormField"},$),{},{children:(0,M.jsx)(y,c()({},$))}))})},a=function(){return(0,r.useContext)(n)},R=function(){var $=a();return(0,r.useEffect)(function(){var Q,z;$==null||(Q=$.form)===null||Q===void 0||Q.setInitialValues((z=$.service)===null||z===void 0||(z=z.data)===null||z===void 0?void 0:z.data)},[]),{form:$.form}}},1892:function(He,ae,e){"use strict";e.d(ae,{Hz:function(){return E},Ns:function(){return Q},Si:function(){return f},_0:function(){return b},bE:function(){return x}});var Z=e(97857),c=e.n(Z),k=e(5574),i=e.n(k),g=e(19632),C=e.n(g),A=e(96695),r=e.n(A),K=e(86201),v=e(80844),j=e(67294),h=e(6145),M=e(15503),n=e(23639),y=e(62954),L=e(72160),o=e(75148),a=e(10097),R=e(85893),E=(0,j.createContext)({});E.displayName="TableBlockContext";var $=(0,j.createContext)(null);$.displayName="TableBlockContextBasicValue";function Q(m){var F=[];if(m){var I=r()(m),d;try{for(I.s();!(d=I.n()).done;){var u=d.value;u!=null&&u.children&&u.children.length>0&&(F.push(u.id),F.push.apply(F,C()(Q(u==null?void 0:u.children))))}}catch(l){I.e(l)}finally{I.f()}}return F}var z=function(F){var I=F.params,d=F.showIndex,u=F.dragSort,l=F.rowKey,S=F.childrenColumnName,H=F.expandFlag,O=H===void 0?!1:H,N=F.fieldNames,t=F.collection,B=(0,v.useField)(),X=(0,o.BU)(),V=X.resource,U=X.service,D=(0,v.useFieldSchema)(),ne=(0,j.useState)(!!(N||O)),q=i()(ne,2),J=q[0],Y=q[1],P=(0,a.useBlockHeightProps)(),w=P.heightProps,ie=(0,j.useRef)(null);(0,j.useEffect)(function(){Y(N||O)},[N||O]);var G=(0,j.useMemo)(function(){var Ee,ze=(D==null?void 0:D["x-decorator-props"])||{},Se=ze.treeTable,se=U==null||(Ee=U.data)===null||Ee===void 0?void 0:Ee.data;if(Se){var me=Q(se);return me}},[U==null?void 0:U.loading,D]),le=(0,j.useCallback)(function(Ee){Y(Ee||!J)},[J]),xe=(0,j.useMemo)(function(){return{field:B,rowKey:l,childrenColumnName:S,showIndex:d,dragSort:u,dragSortBy:F.dragSortBy}},[B,l,S,d,u,F.dragSortBy]),_e=(0,j.useMemo)(function(){return{collection:t,field:B,service:U,resource:V,params:I,showIndex:d,dragSort:u,rowKey:l,expandFlag:J,childrenColumnName:S,allIncludesChildren:G,setExpandFlag:le,heightProps:w}},[G,S,t,u,J,B,w,I,V,l,U,le,d]);return(0,R.jsx)(L.nO.Provider,{value:ie,children:(0,R.jsx)(E.Provider,{value:_e,children:(0,R.jsx)($.Provider,{value:xe,children:F.children})})})},p=function(F){var I=(0,v.useFieldSchema)(),d,u=!1;if(I["x-use-decorator-props"])d=F.params,u=F.parseVariableLoading;else{var l=(0,n.l)(F);d=l.params,u=l.parseVariableLoading}return{params:d,parseVariableLoading:u}},b=(0,M.t)(function(m){var F=m.resource||m.association,I=(0,v.useFieldSchema)(),d=(0,h.useCollectionManager_deprecated)(m.dataSource),u=d.getCollection,l=d.getCollectionField,S=u(m.collection,m.dataSource),H=(I==null?void 0:I["x-decorator-props"])||{},O=H.treeTable,N=p(m),t=N.params,B=N.parseVariableLoading,X="__nochildren__";if(O)if(X="children",F!=null&&F.includes(".")){var V=l(F);V!=null&&V.treeChildren&&(X=V.name),t.tree=!0}else{var U=S==null?void 0:S.fields.find(function(ne){return ne.treeChildren});U&&(X=U.name),t.tree=!0}else X="__nochildren__";var D=(0,j.useMemo)(function(){return(0,K.createForm)()},[O]);return B?null:(0,R.jsx)(y.G0E,{scope:{treeTable:O},children:(0,R.jsx)(v.FormContext.Provider,{value:D,children:(0,R.jsx)(o.ZJ,c()(c()({name:m.name||"table"},m),{},{params:t,runWhenParamsChanged:!0,children:(0,R.jsx)(z,c()(c()({},m),{},{childrenColumnName:X,params:t}))}))})})}),f=function(){return(0,j.useContext)(E)},x=function(){return(0,j.useContext)($)}},23523:function(He,ae,e){"use strict";e.d(ae,{CB:function(){return z},Q6:function(){return R},Qy:function(){return $},Wx:function(){return p},oA:function(){return b},s:function(){return Q}});var Z=e(97857),c=e.n(Z),k=e(15009),i=e.n(k),g=e(99289),C=e.n(g),A=e(12444),r=e.n(A),K=e(72004),v=e.n(K),j=e(9783),h=e.n(j),M=e(80844),n=e(67294),y=e(75148),L=e(7340),o=e(71176),a=e(85893),R=(0,n.createContext)({});R.displayName="TableFieldContext";var E=function(x){var m,F=x.params,I=F===void 0?{}:F,d=x.showIndex,u=x.dragSort,l=x.fieldName,S=(0,M.useField)(),H=(0,M.useFieldSchema)(),O=(0,y.BU)(),N=O.resource,t=O.service,B=(0,L.bz)(),X=(0,o.e$)(),V=X&&X.fieldName?"".concat(X.fieldName,".").concat(l):l;if(!(B!=null&&(m=B.updateAssociationValues)!==null&&m!==void 0&&m.includes(V))){var U;B==null||(U=B.updateAssociationValues)===null||U===void 0||U.push(V)}return(0,a.jsx)(R.Provider,{value:{field:S,fieldSchema:H,service:t,resource:N,params:I,showIndex:d,dragSort:u},children:x.children})},$=function(){function f(x){r()(this,f),h()(this,"field",void 0),h()(this,"api",void 0),h()(this,"sourceId",void 0),h()(this,"resource",void 0),this.field=x.field,this.api=x.api,this.sourceId=x.sourceId,this.resource=this.api.resource(x.resource,this.sourceId)}return v()(f,[{key:"list",value:function(){var x=C()(i()().mark(function F(I){var d;return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(this.field.data=this.field.data||{},!this.field.data.changed){l.next=4;break}return console.log("list.dataSource",this.field.data.dataSource),l.abrupt("return",{data:{data:this.field.data.dataSource}});case 4:if(this.sourceId){l.next=8;break}return console.log("list.sourceId",this.field.data.dataSource),this.field.data.dataSource=[],l.abrupt("return",{data:{data:[]}});case 8:return l.next=10,this.resource.list(I);case 10:return d=l.sent,console.log("list",d),this.field.data.dataSource=d.data.data,l.abrupt("return",{data:{data:d.data.data}});case 14:case"end":return l.stop()}},F,this)}));function m(F){return x.apply(this,arguments)}return m}()},{key:"get",value:function(){var x=C()(i()().mark(function F(I){var d;return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return console.log("get",I),d=I.filterByTk,l.abrupt("return",{data:{data:this.field.data.dataSource[d]}});case 3:case"end":return l.stop()}},F,this)}));function m(F){return x.apply(this,arguments)}return m}()},{key:"create",value:function(){var x=C()(i()().mark(function F(I){var d;return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:console.log("create",I),d=I.values,this.field.data.dataSource.push(d),this.field.data.changed=!0;case 4:case"end":return l.stop()}},F,this)}));function m(F){return x.apply(this,arguments)}return m}()},{key:"update",value:function(){var x=C()(i()().mark(function F(I){var d,u;return i()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:console.log("update",I),d=I.filterByTk,u=I.values,this.field.data.dataSource[d]=u,this.field.data.changed=!0;case 4:case"end":return S.stop()}},F,this)}));function m(F){return x.apply(this,arguments)}return m}()},{key:"destroy",value:function(){var x=C()(i()().mark(function F(I){var d;return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:console.log("destroy",I),d=I.filterByTk,Array.isArray(d)||(d=[d]),this.field.data.dataSource=this.field.data.dataSource.filter(function(S,H){return!d.includes(H)}),this.field.data.changed=!0;case 5:case"end":return l.stop()}},F,this)}));function m(F){return x.apply(this,arguments)}return m}()}]),f}(),Q=(0,n.createContext)(null);Q.displayName="WithoutTableFieldResource";var z=function(x){return(0,a.jsx)(Q.Provider,{value:!1,children:(0,a.jsx)(y.ZJ,c()(c()({name:"table-field",block:"TableField"},x),{},{children:(0,a.jsx)(E,c()({},x))}))})},p=function(){return(0,n.useContext)(R)},b=function(){var x,m,F,I,d,u=(0,M.useField)(),l=p();return(0,n.useEffect)(function(){var S;if(!(l!=null&&(S=l.service)!==null&&S!==void 0&&S.loading)){var H,O;u.value=l==null||(H=l.service)===null||H===void 0||(H=H.data)===null||H===void 0?void 0:H.data,u.data=u.data||{},u.data.selectedRowKeys=l==null||(O=l.field)===null||O===void 0||(O=O.data)===null||O===void 0?void 0:O.selectedRowKeys}},[l==null||(x=l.field)===null||x===void 0||(x=x.data)===null||x===void 0?void 0:x.selectedRowKeys,l==null||(m=l.service)===null||m===void 0||(m=m.data)===null||m===void 0?void 0:m.data,l==null||(F=l.service)===null||F===void 0?void 0:F.loading,u]),{size:"middle",loading:l==null||(I=l.service)===null||I===void 0?void 0:I.loading,showIndex:l.showIndex,dragSort:l.dragSort,pagination:!1,required:l==null||(d=l.fieldSchema)===null||d===void 0||(d=d.parent)===null||d===void 0?void 0:d.required,rowKey:function(H){var O,N;return(O=u.value)===null||O===void 0||(N=O.indexOf)===null||N===void 0?void 0:N.call(O,H)},onRowSelectionChange:function(H,O){var N;l.field.data=(l==null||(N=l.field)===null||N===void 0?void 0:N.data)||{},l.field.data.selectedRowKeys=H,l.field.data.selectedRowData=O},onChange:function(H){var O=H.current,N=H.pageSize;l.service.run({page:O,pageSize:N})}}}},78899:function(He,ae,e){"use strict";e.d(ae,{CL:function(){return t},RP:function(){return B},Vs:function(){return u},Yu:function(){return F},br:function(){return H},rL:function(){return N}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(9783),C=e.n(g),A=e(96695),r=e.n(A),K=e(5574),v=e.n(K),j=e(97857),h=e.n(j),M=e(80844),n=e(96486),y=e.n(n),L=e(44908),o=e.n(L),a=e(67294),R=e(6145),E=e(49834),$=e(18386),Q=e(87714),z=e(15503),p=e(36586),b=e(62954),f=e(75148),x=e(10097),m=e(85893),F=(0,a.createContext)({});F.displayName="TableSelectorContext";var I=(0,a.createContext)({});I.displayName="TableSelectorParamsContext";var d=function(){return(0,a.useContext)(I)},u=function(V){var U=V.params,D=V.children,ne=d();try{U.filter=(0,Q.EO)([ne.filter,U.filter]),U=h()(h()({},ne),U)}catch(q){console.error(q)}return(0,m.jsx)(I.Provider,{value:U,children:D})},l=function(V){var U=V.params,D=V.rowKey,ne=V.extraFilter,q=V.expandFlag,J=q===void 0?!1:q,Y=(0,M.useField)(),P=(0,f.BU)(),w=P.resource,ie=P.service,G=(0,a.useState)(J),le=v()(G,2),xe=le[0],_e=le[1],Ee=(0,E.Kv)();return(0,m.jsx)(p.HV,{record:{},parent:Ee,children:(0,m.jsx)(F.Provider,{value:{field:Y,service:ie,resource:w,params:U,extraFilter:ne,rowKey:D,expandFlag:xe,setExpandFlag:function(){_e(!xe)}},children:V.children})})},S=function(V){var U,D=useCollectionManager_deprecated(),ne=D.getCollectionFields,q=(U=ne(V))===null||U===void 0?void 0:U.filter(function(J){return J.target}).map(function(J){return J.name});return q},H=function X(V,U){return V["x-component"]===U?V:V.parent&&(V==null?void 0:V["x-component"])!=="AssociationField.Viewer"?X(V.parent,U):null},O=function(V){var U=(0,R.useCollectionManager_deprecated)(),D=U.getCollectionFields,ne=D(V),q=new Set,J=r()(ne),Y;try{for(J.s();!(Y=J.n()).done;){var P=Y.value;if(P.target){q.add(P.name);var w=D(P.target),ie=r()(w),G;try{for(ie.s();!(G=ie.n()).done;){var le=G.value;le.target&&q.add("".concat(P.name,".").concat(le.name))}}catch(Ee){ie.e(Ee)}finally{ie.f()}}}}catch(Ee){J.e(Ee)}finally{J.f()}var xe=(0,M.useFieldSchema)(),_e=xe.reduceProperties(function(Ee,ze){return ze["x-component"]==="TableV2.Selector"?ze:Ee},new M.Schema({}));return o()(_e.reduceProperties(function(Ee,ze){if(ze["x-component"]==="TableV2.Column"){var Se=ze.reduceProperties(function(ee,ue){var ge=ue.name.split("."),Ie=v()(ge,1),Ae=Ie[0];return ue["x-collection-field"]&&q.has(Ae)?ue:ee},null);if(Se){var se=Se.name.split("."),me=v()(se,1),pe=me[0];q.has(Se.name)?Ee.push(Se.name):q.has(pe)&&Ee.push(pe)}}return Ee},[]))},N=(0,z.t)(function(X){var V,U,D,ne=d(),q=(0,M.useFieldSchema)(),J=(0,R.useCollectionManager_deprecated)(),Y=J.getCollectionJoinField,P=J.getCollectionFields,w=(0,p.a)(),ie=(0,R.useCollectionManager_deprecated)(),G=ie.getCollection,le=(q==null?void 0:q["x-decorator-props"])||{},xe=le.treeTable,_e=H(q,"CollectionField"),Ee=Y(_e==null?void 0:_e["x-collection-field"]),ze=G(Ee==null?void 0:Ee.collectionName),Se=ze==null?void 0:ze.getPrimaryKey(),se=O(X.collection),me=h()({},X.params);if(X.dragSort&&(me.sort=["sort"]),(Ee==null?void 0:Ee.target)===(Ee==null?void 0:Ee.collectionName)&&ze!==null&&ze!==void 0&&ze.tree&&xe&&(me.tree=!0,_e.name==="parent")){var pe;me.filter=h()(h()({},(pe=me.filter)!==null&&pe!==void 0?pe:{}),{},{id:w[Se]&&{$ne:w[Se]}})}Object.keys(me).includes("appends")||(me.appends=se);var ee;if(Ee&&(["oho","o2m"].includes(Ee.interface)&&!(0,$.Op)(q)&&(w!=null&&w[Ee.sourceKey]?ee={$or:[C()({},Ee.foreignKey,{$is:null}),C()({},Ee.foreignKey,{$eq:w==null?void 0:w[Ee.sourceKey]})]}:ee=C()({},Ee.foreignKey,{$is:null})),["obo"].includes(Ee.interface)&&!(0,$.Op)(q))){var ue=P(Ee.target),ge=ue.find(function(je){return je.foreignKey&&je.foreignKey===Ee.foreignKey});ge&&(w!=null&&w[Ee.foreignKey]?ee={$or:[C()({},"".concat(ge.name,".").concat(ge.foreignKey),{$is:null}),C()({},"".concat(ge.name,".").concat(ge.foreignKey),{$eq:w==null?void 0:w[Ee.foreignKey]})]}:ee=C()({},"".concat(ge.name,".").concat(ge.foreignKey),{$is:null}))}if(ee){var Ie;(Ie=me)!==null&&Ie!==void 0&&Ie.filter?me.filter={$and:[ee,me.filter]}:me.filter=ee}try{me.filter=(0,Q.EO)([ne.filter,me.filter]),me=h()(h()({},ne),me)}catch(je){console.error(je)}var Ae=(0,x.useParsedFilter)({filterOption:(V=me)===null||V===void 0?void 0:V.filter}),Le=Ae.filter,Te=Ae.parseVariableLoading;return!y().isEmpty((U=me)===null||U===void 0?void 0:U.filter)&&y().isEmpty(Le)||Te?null:((D=me)!==null&&D!==void 0&&D.filter&&(me.filter=Le),(0,m.jsx)(b.G0E,{scope:{treeTable:xe},children:(0,m.jsx)(f.ZJ,h()(h()({name:"table-selector"},X),{},{params:me,children:(0,m.jsx)(l,h()(h()({},X),{},{params:me,extraFilter:ee}))}))}))}),t=function(){return(0,a.useContext)(F)},B=function(){var V,U,D,ne,q,J,Y,P,w=(0,M.useField)(),ie=t(),G=(0,M.useFieldSchema)(),le=(0,R.useCollectionManager_deprecated)(),xe=le.getCollectionJoinField,_e=H(G,"CollectionField"),Ee=xe(_e==null?void 0:_e["x-collection-field"]);return(0,a.useEffect)(function(){var ze;if(!(ie!=null&&(ze=ie.service)!==null&&ze!==void 0&&ze.loading)){var Se,se,me,pe,ee,ue=ie==null||(Se=ie.service)===null||Se===void 0||(Se=Se.data)===null||Se===void 0?void 0:Se.data.map(function(ge){return ge});w.value=ue,w==null||(se=w.setInitialValue)===null||se===void 0||se.call(w,ue),w.data=w.data||{},w.data.selectedRowKeys=[],w.componentProps.pagination=w.componentProps.pagination||{},w.componentProps.pagination.pageSize=ie==null||(me=ie.service)===null||me===void 0||(me=me.data)===null||me===void 0||(me=me.meta)===null||me===void 0?void 0:me.pageSize,w.componentProps.pagination.total=ie==null||(pe=ie.service)===null||pe===void 0||(pe=pe.data)===null||pe===void 0||(pe=pe.meta)===null||pe===void 0?void 0:pe.count,w.componentProps.pagination.current=ie==null||(ee=ie.service)===null||ee===void 0||(ee=ee.data)===null||ee===void 0||(ee=ee.meta)===null||ee===void 0?void 0:ee.page}},[Ee==null?void 0:Ee.foreignKey,ie==null||(V=ie.field)===null||V===void 0||(V=V.data)===null||V===void 0?void 0:V.selectedRowKeys,ie==null||(U=ie.service)===null||U===void 0||(U=U.data)===null||U===void 0?void 0:U.data,ie==null||(D=ie.service)===null||D===void 0||(D=D.data)===null||D===void 0||(D=D.meta)===null||D===void 0?void 0:D.count,ie==null||(ne=ie.service)===null||ne===void 0||(ne=ne.data)===null||ne===void 0||(ne=ne.meta)===null||ne===void 0?void 0:ne.page,ie==null||(q=ie.service)===null||q===void 0||(q=q.data)===null||q===void 0||(q=q.meta)===null||q===void 0?void 0:q.pageSize,ie==null||(J=ie.service)===null||J===void 0?void 0:J.loading,w]),{loading:ie==null||(Y=ie.service)===null||Y===void 0?void 0:Y.loading,showIndex:!1,dragSort:!1,rowKey:ie.rowKey||"id",pagination:(G==null||(P=G["x-component-props"])===null||P===void 0?void 0:P.pagination)===!1?!1:w.componentProps.pagination,onRowSelectionChange:function(Se,se){var me;ie.field.data=(ie==null||(me=ie.field)===null||me===void 0?void 0:me.data)||{},ie.field.data.selectedRowKeys=Se,ie.field.data.selectedRowData=se},onRowDragEnd:function(Se){return i()(c()().mark(function se(){var me,pe;return c()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return me=Se.from,pe=Se.to,ue.next=3,ie.resource.move({sourceId:me[ie.rowKey||"id"],targetId:pe[ie.rowKey||"id"]});case 3:ie.service.refresh();case 4:case"end":return ue.stop()}},se)}))()},onChange:function(Se){var se,me=Se.current,pe=Se.pageSize;ie.service.run(h()(h()({},(se=ie.service.params)===null||se===void 0?void 0:se[0]),{},{page:me,pageSize:pe}))}}}},31019:function(He,ae,e){"use strict";e.d(ae,{T:function(){return A},u:function(){return C}});var Z=e(5574),c=e.n(Z),k=e(67294),i=e(85893),g=(0,k.createContext)({});g.displayName="TemplateBlockContext";var C=function(){return(0,k.useContext)(g)},A=function(K){var v=K.onTemplateLoaded,j=K.children,h=(0,k.useState)(!1),M=c()(h,2),n=M[0],y=M[1],L=(0,k.useCallback)(function(){y(!0),setTimeout(function(){v==null||v()})},[v]),o=(0,k.useMemo)(function(){return{templateFinished:n,onTemplateSuccess:L}},[L,n]);return(0,i.jsx)(g.Provider,{value:o,children:j})}},10097:function(He,ae,e){"use strict";e.r(ae),e.d(ae,{FormActiveFieldsProvider:function(){return ze.T},appendQueryStringToUrl:function(){return xn},completeURL:function(){return rr},fillParentFields:function(){return Er},findFilterTargets:function(){return Le},getAppends:function(){return an},getAssociationPath:function(){return vn},getCardItemSchema:function(){return _e.Gn},getFormValues:function(){return ue},getPageSchema:function(){return _e.tj},navigateWithinSelf:function(){return mr},parseVariablesAndChangeParamsToQueryString:function(){return An},reduceValueSize:function(){return Zn},replaceVariableValue:function(){return en},updateFilterTargets:function(){return Te},useAssociationCreateActionProps:function(){return Ae},useAssociationFilterBlockProps:function(){return Je},useAssociationFilterProps:function(){return lt},useAssociationNames:function(){return fn},useBlockHeightProps:function(){return _e.gp},useBulkDestroyActionProps:function(){return tt},useCollectValuesToSubmit:function(){return ge},useCreateActionProps:function(){return Ie},useCustomizeBulkUpdateActionProps:function(){return ce},useCustomizeRequestActionProps:function(){return be},useCustomizeUpdateActionProps:function(){return T},useDataBlockParentRecord:function(){return Ee.M},useDestroyActionProps:function(){return Re},useDetailsPaginationProps:function(){return Tt},useDisassociateActionProps:function(){return We},useFilterBlockActionProps:function(){return Pe},useFormActiveFields:function(){return ze.z},useLinkActionProps:function(){return Et},useOptionalFieldList:function(){return ut},useParseURLAndParams:function(){return Qt},useParsedFilter:function(){return Se.v},usePickActionProps:function(){return me},useRefreshActionProps:function(){return St},useRemoveActionProps:function(){return Ze},useResetBlockActionProps:function(){return re},useUpdateActionProps:function(){return oe}});var Z=e(96695),c=e.n(Z),k=e(68400),i=e.n(k),g=e(9783),C=e.n(g),A=e(19632),r=e.n(A),K=e(15009),v=e.n(K),j=e(99289),h=e.n(j),M=e(97857),n=e.n(M),y=e(52677),L=e.n(y),o=e(97133),a=e(80844),R=e(85667),E=e(27655),$=e(84157),Q=e(3321),z=e(45360),p=e(96486),b=e.n(p),f=e(27361),x=e.n(f),m=e(57557),F=e.n(m),I=e(80129),d=e.n(I),u=e(67294),l=e(26793),S=e(21143),H=e(12174),O=e(85782),N=e(7340),t=e(6145),B=e(67205),X=e(87714),V=e(67354),U=e(36586),D=e(62954),ne=e(37696),q=e(22229),J=e(6438),Y=e(64910),P=e(76690),w=e(65565),ie=e(75148),G=e(29250),le=e(35964),xe=e(23523),_e=e(3192),Ee=e(94658),ze=e(44899),Se=e(12929),se,me=function(){var ct=(0,a.useForm)();return{onClick:function(){console.log("usePickActionProps",ct.values)}}};function pe(Ft,ct){var Mt=/\{\{\s*((\w+\.?)+)\s*\}\}/g;return Ft.replace(Mt,function(kt,Rt){return x()(ct,Rt)||""})}var ee=function Ft(ct){if(_typeof(ct)!=="object"||!ct)return ct;if(Array.isArray(ct))return ct.map(function(_t){return Ft(_t)});var Mt={};for(var kt in ct)if(Object.prototype.hasOwnProperty.call(ct,kt)){var Rt=ct[kt];if(Array.isArray(Rt)||Rt&&_typeof(Rt)==="object")continue;Mt[kt]=Rt}return Mt};function ue(Ft){var ct=Ft.filterByTk,Mt=Ft.field,kt=Ft.form,Rt=Ft.fieldNames,_t=Ft.getField,Bt=Ft.resource,jt=Ft.actionFields;if(ct&&jt){var Xt=Object.keys(kt.values).filter(function(Wt){var Nt=_t(Wt);return!jt.includes(Wt)&&["hasOne","hasMany","belongsTo","belongsToMany"].includes(Nt==null?void 0:Nt.type)});return F()(n()({},kt.values),Xt)}return kt.values}function ge(){var Ft=(0,a.useForm)(),ct=(0,ie.C)(),Mt=(0,ie.BU)(),kt=Mt.field,Rt=Mt.resource,_t=(0,t.useCollection_deprecated)(),Bt=_t.fields,jt=_t.getField,Xt=_t.getTreeParentField,Wt=_t.name,Nt=Bt.map(function(Hn){return Hn.name}),nn=(0,D.XCj)(),Zt=nn.fieldSchema,Cn=(0,S.useFormActiveFields)()||{},Yt=Cn.getActiveFieldsName,Mn=(0,Y.OQ)(),bn=(0,Y.Kp)({currentForm:Ft}),Gt=(0,a.useFieldSchema)(),ln=(0,V.t)();return(0,u.useCallback)(h()(v()().mark(function Hn(){var sn,Ln,Bn,wn,st,Ke,De,Ce,Oe,Fe,Ne,Xe,dt;return v()().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:return Bn=(sn=Gt==null?void 0:Gt["x-action-settings"])!==null&&sn!==void 0?sn:{},wn=Bn.assignedValues,st=wn===void 0?{}:wn,Ke=Bn.overwriteValues,De=ue({filterByTk:ct,field:kt,form:Ft,fieldNames:Nt,getField:jt,resource:Rt,actionFields:(Yt==null?void 0:Yt("form"))||[]}),Ce={},Oe=Object.keys(st).map(function(){var Ct=h()(v()().mark(function Dt(Vt){var Ht,Ut,wt,ot;return v()().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:Ht=st[Vt],Ut=jt(Vt),Be.next=5;break;case 5:if(!(0,P.cG)(Ht)){Be.next=16;break}return Be.next=8,Mn==null?void 0:Mn.parseVariable(Ht,bn);case 8:if(Be.t0=Be.sent,Be.t0){Be.next=11;break}Be.t0={};case 11:wt=Be.t0,ot=wt.value,ot!=null&&(Ce[Vt]=(0,w.J)(ot,{targetCollectionField:Ut})),Be.next=17;break;case 16:Ht!=null&&Ht!==""&&(Ce[Vt]=Ht);case 17:case"end":return Be.stop()}},Dt)}));return function(Dt){return Ct.apply(this,arguments)}}()),xt.next=6,Promise.all(Oe);case 6:return Fe=Zt==null||(Ln=Zt["x-component-props"])===null||Ln===void 0?void 0:Ln.addChild,Fe&&(dt=Xt(),De[(Ne=dt==null?void 0:dt.name)!==null&&Ne!==void 0?Ne:"parent"]=ln,De[(Xe=dt==null?void 0:dt.foreignKey)!==null&&Xe!==void 0?Xe:"parentId"]=ln==null?void 0:ln.id),xt.abrupt("return",n()(n()(n()({},De),Ke),Ce));case 9:case"end":return xt.stop()}},Hn)})),[Gt,kt,Nt,Zt,ct,Ft,Yt,jt,Xt,bn,Wt,Rt,ln,Mn])}var Ie=function(){var ct,Mt=(0,ie.C)(),kt=(0,S.useCollectionRecord)(),Rt=(0,a.useForm)(),_t=(0,ie.BU)(),Bt=_t.field,jt=_t.resource,Xt=(0,D.XCj)(),Wt=Xt.setVisible,Nt=Xt.setSubmitted,nn=Xt.setFormValueChanged,Zt=(0,O.WO)(),Cn=(0,a.useFieldSchema)(),Yt=(0,a.useField)(),Mn=(0,D.eJW)(),bn=Q.Z.useApp(),Gt=bn.modal,ln=(0,l.$)(),Hn=ln.t,sn=(0,N.bz)(),Ln=sn.updateAssociationValues,Bn=ge(),wn=kt.isNew?Yt.componentProps.saveMode||"create":"update",st=((ct=Yt.componentProps.filterKeys)===null||ct===void 0?void 0:ct.checked)||[];return{onClick:function(){return h()(v()().mark(function De(){var Ce,Oe,Fe,Ne,Xe,dt,ht,xt,Ct,Dt,Vt,Ht,Ut;return v()().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(Oe=(Ce=Cn==null?void 0:Cn["x-action-settings"])!==null&&Ce!==void 0?Ce:{},Fe=Oe.onSuccess,Ne=Oe.skipValidator,Xe=Oe.triggerWorkflows,dt=Fe||{},ht=dt.manualClose,xt=dt.redirecting,Ct=dt.redirectTo,Dt=dt.successMessage,Vt=dt.actionAfterSuccess,Ne){ot.next=5;break}return ot.next=5,Rt.submit();case 5:return ot.next=7,Bn();case 7:return Ht=ot.sent,Yt.data=Bt.data||{},Yt.data.loading=!0,ot.prev=10,ot.next=13,jt[wn]({values:Ht,filterKeys:st,filterByTk:Mt,triggerWorkflows:Xe!=null&&Xe.length?Xe.map(function(qe){return[qe.workflowKey,qe.context].filter(Boolean).join("!")}).join(","):void 0,updateAssociationValues:Ln});case 13:if(Ut=ot.sent,(Vt==="previous"||!Vt&&xt!==!0)&&(Wt==null||Wt(!1)),Nt==null||Nt(!0),nn==null||nn(!1),Yt.data.loading=!1,Yt.data.data=Ut,Dt){ot.next=25;break}return z.ZP.success(Hn("Saved successfully")),ot.next=23,_n(Rt);case 23:return(xt&&!Vt||Vt==="redirect")&&Ct&&((0,$.isURL)(Ct)?window.location.href=Ct:Zt(Ct)),ot.abrupt("return");case 25:if(!ht){ot.next=29;break}Gt.success({title:Mn(Dt),onOk:function(){var qe=h()(v()().mark(function rt(){return v()().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return $e.next=2,_n(Rt);case 2:(xt&&!Vt||Vt==="redirect")&&Ct&&((0,$.isURL)(Ct)?window.location.href=Ct:Zt(Ct));case 3:case"end":return $e.stop()}},rt)}));function Be(){return qe.apply(this,arguments)}return Be}()}),ot.next=33;break;case 29:return z.ZP.success(Mn(Dt)),ot.next=32,_n(Rt);case 32:(xt&&!Vt||Vt==="redirect")&&Ct&&((0,$.isURL)(Ct)?window.location.href=Ct:Zt(Ct));case 33:ot.next=38;break;case 35:ot.prev=35,ot.t0=ot.catch(10),Yt.data.loading=!1;case 38:case"end":return ot.stop()}},De,null,[[10,35]])}))()}}},Ae=function(){var ct,Mt=(0,a.useForm)(),kt=(0,ie.BU)(),Rt=kt.field,_t=kt.resource,Bt=kt.__parent,jt=(0,D.XCj)(),Xt=jt.setVisible,Wt=jt.fieldSchema,Nt=jt.setSubmitted,nn=(0,a.useFieldSchema)(),Zt=(0,a.useField)(),Cn=(0,t.useCollection_deprecated)(),Yt=Cn.fields,Mn=Cn.getField,bn=Cn.getTreeParentField,Gt=Cn.name,ln=(0,D.eJW)(),Hn=(0,ie.C)(),sn=(0,U.a)(),Ln=(0,Y.OQ)(),Bn=(0,Y.Kp)({currentForm:Mt}),wn=(0,S.useFormActiveFields)()||{},st=wn.getActiveFieldsName,Ke=Zt.componentProps.saveMode||"create",De=((ct=Zt.componentProps.filterKeys)===null||ct===void 0?void 0:ct.checked)||[];return{onClick:function(){return h()(v()().mark(function Oe(){var Fe,Ne,Xe,dt,ht,xt,Ct,Dt,Vt,Ht,Ut,wt,ot,qe,Be,rt,Ve,$e,it,Pt,Lt,$t;return v()().wrap(function(pn){for(;;)switch(pn.prev=pn.next){case 0:return Xe=Yt.map(function(un){return un.name}),dt=(Fe=nn==null?void 0:nn["x-action-settings"])!==null&&Fe!==void 0?Fe:{},ht=dt.assignedValues,xt=ht===void 0?{}:ht,Ct=dt.onSuccess,Dt=dt.overwriteValues,Vt=dt.skipValidator,Ht=dt.triggerWorkflows,Ut=Wt==null||(Ne=Wt["x-component-props"])===null||Ne===void 0?void 0:Ne.addChild,wt=Ct||{},ot=wt.successMessage,qe={},Be=Object.keys(xt).map(function(){var un=h()(v()().mark(function Xn(Yn){var jn,ir,fr,Ar;return v()().wrap(function(Kr){for(;;)switch(Kr.prev=Kr.next){case 0:jn=xt[Yn],ir=Mn(Yn),Kr.next=5;break;case 5:if(!(0,P.cG)(jn)){Kr.next=16;break}return Kr.next=8,Ln==null?void 0:Ln.parseVariable(jn,Bn);case 8:if(Kr.t0=Kr.sent,Kr.t0){Kr.next=11;break}Kr.t0={};case 11:fr=Kr.t0,Ar=fr.value,Ar&&(qe[Yn]=(0,w.J)(Ar,{targetCollectionField:ir})),Kr.next=17;break;case 16:jn!=null&&jn!==""&&(qe[Yn]=jn);case 17:case"end":return Kr.stop()}},Xn)}));return function(Xn){return un.apply(this,arguments)}}()),pn.next=8,Promise.all(Be);case 8:if(Vt){pn.next=11;break}return pn.next=11,Mt.submit();case 11:return rt=ue({filterByTk:Hn,field:Rt,form:Mt,fieldNames:Xe,getField:Mn,resource:_t,actionFields:(st==null?void 0:st("form"))||[]}),Ut&&(it=bn(),rt[(Ve=it==null?void 0:it.name)!==null&&Ve!==void 0?Ve:"parent"]=sn,rt[($e=it==null?void 0:it.foreignKey)!==null&&$e!==void 0?$e:"parentId"]=sn.id),Zt.data=Rt.data||{},Zt.data.loading=!0,pn.prev=15,pn.next=18,_t[Ke]({values:n()(n()(n()({},rt),Dt),qe),filterKeys:De,triggerWorkflows:Ht!=null&&Ht.length?Ht.map(function(un){return[un.workflowKey,un.context].filter(Boolean).join("!")}).join(","):void 0});case 18:if($t=pn.sent,Zt.data.loading=!1,Zt.data.data=$t,Bt==null||(Pt=Bt.service)===null||Pt===void 0||(Lt=Pt.refresh)===null||Lt===void 0||Lt.call(Pt),Xt==null||Xt(!1),Nt==null||Nt(!0),ot){pn.next=26;break}return pn.abrupt("return");case 26:z.ZP.success(ln(ot)),pn.next=33;break;case 29:pn.prev=29,pn.t0=pn.catch(15),Zt.data.data=null,Zt.data.loading=!1;case 33:case"end":return pn.stop()}},Oe,null,[[15,29]])}))()}}},Le=function(ct){for(;ct;){if(ct["x-filter-targets"])return{targets:ct["x-filter-targets"],uid:ct["x-uid"]};ct=ct.parent}return{}},Te=function(ct,Mt){for(;ct;){if(ct["x-filter-targets"]){ct["x-filter-targets"]=Mt;return}ct=ct.parent}},je=function(){var ct=(0,a.useForm)(),Mt=(0,B.kO)(),kt=Mt.getDataBlocks,Rt=(0,S.useCollectionManager)(),_t=(0,G.Q)(),Bt=_t.getOperators,jt=(0,a.useFieldSchema)(),Xt=(0,S.useCollection)(),Wt=Xt.name,Nt=(0,u.useMemo)(function(){return Le(jt)},[jt]),nn=Nt.targets,Zt=nn===void 0?[]:nn,Cn=Nt.uid,Yt=(0,u.useCallback)(function(){return(0,D.WmO)((0,X.jE)(ct.values,Bt(),Rt.getCollectionField.bind(Rt),Wt))},[ct.values,Rt,Bt,Wt]),Mn=(0,u.useCallback)(h()(v()().mark(function bn(){var Gt,ln,Hn,sn=arguments;return v()().wrap(function(Bn){for(;;)switch(Bn.prev=Bn.next){case 0:return Gt=sn.length>0&&sn[0]!==void 0?sn[0]:{},ln=Gt.doNothingWhenFilterIsEmpty,Hn=ln===void 0?!1:ln,Bn.prev=1,Bn.next=4,Promise.all(kt().map(function(){var wn=h()(v()().mark(function st(Ke){var De,Ce,Oe,Fe,Ne,Xe,dt;return v()().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:if(Oe=Zt.find(function(Ct){return Ct.uid===Ke.uid}),Oe){xt.next=3;break}return xt.abrupt("return");case 3:if(Fe=((De=Ke.service.params)===null||De===void 0?void 0:De[0])||{},Ne=((Ce=Ke.service.params)===null||Ce===void 0||(Ce=Ce[1])===null||Ce===void 0?void 0:Ce.filters)||{},Ne[Cn]=Yt(),Xe=(0,X.EO)([].concat(r()(Object.values(Ne).map(function(Ct){return(0,D.WmO)(Ct)})),[Ke.defaultFilter])),b().isEmpty(Ne[Cn])&&((dt=Ke.clearSelection)===null||dt===void 0||dt.call(Ke)),!(Hn&&b().isEmpty(Ne[Cn]))){xt.next=10;break}return xt.abrupt("return");case 10:if(!(Ke.dataLoadingMode==="manual"&&b().isEmpty(Ne[Cn]))){xt.next=12;break}return xt.abrupt("return",Ke.clearData());case 12:return xt.abrupt("return",Ke.doFilter(n()(n()({},Fe),{},{page:1,filter:Xe}),{filters:Ne}));case 13:case"end":return xt.stop()}},st)}));return function(st){return wn.apply(this,arguments)}}()));case 4:Bn.next=9;break;case 6:Bn.prev=6,Bn.t0=Bn.catch(1),console.error(Bn.t0);case 9:case"end":return Bn.stop()}},bn,null,[[1,6]])})),[kt,Yt,Zt,Cn]);return(0,u.useEffect)(function(){setTimeout(function(){Mn({doNothingWhenFilterIsEmpty:!0})},100)},[kt().length]),{doFilter:Mn,getFilterFromCurrentForm:Yt}},Pe=function(){var ct=je(),Mt=ct.doFilter,kt=(0,a.useField)();return kt.data=kt.data||{},{onClick:function(){return h()(v()().mark(function _t(){return v()().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return kt.data.loading=!0,jt.next=3,Mt();case 3:kt.data.loading=!1;case 4:case"end":return jt.stop()}},_t)}))()}}},fe=function(){var ct=(0,a.useForm)(),Mt=(0,a.useFieldSchema)(),kt=(0,B.kO)(),Rt=kt.getDataBlocks,_t=Le(Mt),Bt=_t.targets,jt=_t.uid,Xt=je(),Wt=Xt.doFilter,Nt=Xt.getFilterFromCurrentForm;return{doReset:function(){var nn=h()(v()().mark(function Cn(){var Yt;return v()().wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:return bn.next=2,ct.reset(void 0,{forceClear:!!(Mt!=null&&(Yt=Mt["x-component-props"])!==null&&Yt!==void 0&&Yt.clearDefaultValue)});case 2:if(!b().isEmpty(Nt())){bn.next=4;break}return bn.abrupt("return",hn({getDataBlocks:Rt,targets:Bt,uid:jt}));case 4:return bn.next=6,Wt();case 6:case"end":return bn.stop()}},Cn)}));function Zt(){return nn.apply(this,arguments)}return Zt}()}},re=function(){var ct=(0,a.useField)(),Mt=fe(),kt=Mt.doReset;return ct.data=ct.data||{},{onClick:function(){return h()(v()().mark(function _t(){return v()().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return ct.data.loading=!0,jt.next=3,kt();case 3:ct.data.loading=!1;case 4:case"end":return jt.stop()}},_t)}))()}}},T=function(){var ct=(0,ie.BU)(),Mt=ct.resource,kt=ct.__parent,Rt=ct.service,_t=(0,ie.C)(),Bt=(0,a.useFieldSchema)(),jt=(0,O.WO)(),Xt=(0,D.eJW)(),Wt=(0,a.useForm)(),Nt=Q.Z.useApp(),nn=Nt.modal,Zt=(0,Y.OQ)(),Cn=(0,Y.Kp)({currentForm:Wt}),Yt=(0,t.useCollection_deprecated)(),Mn=Yt.name,bn=Yt.getField,Gt=(0,D.XCj)(),ln=Gt.setVisible;return{onClick:function(sn,Ln){return h()(v()().mark(function Bn(){var wn,st,Ke,De,Ce,Oe,Fe,Ne,Xe,dt,ht,xt,Ct,Dt,Vt,Ht,Ut;return v()().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return st=(wn=Bt==null?void 0:Bt["x-action-settings"])!==null&&wn!==void 0?wn:{},Ke=st.assignedValues,De=Ke===void 0?{}:Ke,Ce=st.onSuccess,Oe=st.skipValidator,Fe=st.triggerWorkflows,Ne=Ce||{},Xe=Ne.manualClose,dt=Ne.redirecting,ht=Ne.redirectTo,xt=Ne.successMessage,Ct=Ne.actionAfterSuccess,Dt={},Vt=Object.keys(De).map(function(){var qe=h()(v()().mark(function Be(rt){var Ve,$e,it,Pt;return v()().wrap(function($t){for(;;)switch($t.prev=$t.next){case 0:Ve=De[rt],$e=bn(rt),$t.next=5;break;case 5:if(!(0,P.cG)(Ve)){$t.next=16;break}return $t.next=8,Zt==null?void 0:Zt.parseVariable(Ve,Cn);case 8:if($t.t0=$t.sent,$t.t0){$t.next=11;break}$t.t0={};case 11:it=$t.t0,Pt=it.value,Pt&&(Dt[rt]=(0,w.J)(Pt,{targetCollectionField:$e})),$t.next=17;break;case 16:Ve!=null&&Ve!==""&&(Dt[rt]=Ve);case 17:case"end":return $t.stop()}},Be)}));return function(Be){return qe.apply(this,arguments)}}()),ot.next=6,Promise.all(Vt);case 6:if(Oe!==!1){ot.next=9;break}return ot.next=9,Wt.submit();case 9:return ot.next=11,Mt.update({filterByTk:_t,values:n()({},Dt),triggerWorkflows:Fe!=null&&Fe.length?Fe.map(function(qe){return[qe.workflowKey,qe.context].filter(Boolean).join("!")}).join(","):void 0});case 11:if((Ct==="previous"||!Ct&&dt!==!0)&&(ln==null||ln(!1)),Ln&&(Ln==null||Ln()),Mt instanceof xe.Qy||kt==null||(Ht=kt.service)===null||Ht===void 0||(Ut=Ht.refresh)===null||Ut===void 0||Ut.call(Ht),xt){ot.next=16;break}return ot.abrupt("return");case 16:Xe?nn.success({title:Xt(xt),onOk:function(){var qe=h()(v()().mark(function rt(){return v()().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:(dt&&!Ct||Ct==="redirect")&&ht&&((0,$.isURL)(ht)?window.location.href=ht:jt(ht));case 1:case"end":return $e.stop()}},rt)}));function Be(){return qe.apply(this,arguments)}return Be}()}):(z.ZP.success(Xt(xt)),(dt&&!Ct||Ct==="redirect")&&ht&&((0,$.isURL)(ht)?window.location.href=ht:jt(ht)));case 17:case"end":return ot.stop()}},Bn)}))()}}},ce=function(){var ct,Mt,kt,Rt=(0,ie.BU)(),_t=Rt.field,Bt=Rt.resource,jt=Rt.__parent,Xt=Rt.service,Wt=(0,u.useContext)(a.SchemaExpressionScopeContext),Nt=(0,a.useFieldSchema)(),nn=(0,S.useTableBlockContext)(),Zt=nn.rowKey,Cn=(ct=(Mt=(kt=nn.field)===null||kt===void 0||(kt=kt.data)===null||kt===void 0?void 0:kt.selectedRowKeys)!==null&&Mt!==void 0?Mt:Wt==null?void 0:Wt.selectedRecordKeys)!==null&&ct!==void 0?ct:{},Yt=(0,O.WO)(),Mn=(0,D.eJW)(),bn=(0,l.$)(),Gt=bn.t,ln=(0,a.useField)(),Hn=Q.Z.useApp(),sn=Hn.modal,Ln=(0,Y.OQ)(),Bn=(0,U.a)(),wn=(0,t.useCollection_deprecated)(),st=wn.name,Ke=wn.getField,De=(0,Y.Kp)(),Ce=(0,D.XCj)(),Oe=Ce.setVisible;return{onClick:function(){return h()(v()().mark(function Ne(){var Xe,dt,ht,xt,Ct,Dt,Vt,Ht,Ut,wt,ot,qe,Be,rt;return v()().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return dt=(Xe=Nt==null?void 0:Nt["x-action-settings"])!==null&&Xe!==void 0?Xe:{},ht=dt.assignedValues,xt=ht===void 0?{}:ht,Ct=dt.onSuccess,Dt=dt.updateMode,Vt=Ct||{},Ht=Vt.manualClose,Ut=Vt.redirecting,wt=Vt.redirectTo,ot=Vt.successMessage,qe=Vt.actionAfterSuccess,ln.data=_t.data||{},ln.data.loading=!0,Be={},rt=Object.keys(xt).map(function(){var it=h()(v()().mark(function Pt(Lt){var $t,$n,pn,un;return v()().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:$t=xt[Lt],$n=Ke(Lt),Yn.next=5;break;case 5:if(!(0,P.cG)($t)){Yn.next=16;break}return Yn.next=8,Ln==null?void 0:Ln.parseVariable($t,De);case 8:if(Yn.t0=Yn.sent,Yn.t0){Yn.next=11;break}Yn.t0={};case 11:pn=Yn.t0,un=pn.value,un&&(Be[Lt]=(0,w.J)(un,{targetCollectionField:$n})),Yn.next=17;break;case 16:$t!=null&&$t!==""&&(Be[Lt]=$t);case 17:case"end":return Yn.stop()}},Pt)}));return function(Pt){return it.apply(this,arguments)}}()),$e.next=8,Promise.all(rt);case 8:(qe==="previous"||!qe&&Ut!==!0)&&(Oe==null||Oe(!1)),sn.confirm({title:Gt("Bulk update"),content:Gt(Dt==="selected"?"Update selected data?":"Update all data?"),onOk:function(){return h()(v()().mark(function Pt(){var Lt,$t,$n,pn,un,Xn,Yn;return v()().wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:if($n=(Lt=($t=Xt.params)===null||$t===void 0?void 0:$t[0])!==null&&Lt!==void 0?Lt:{},pn=$n.filter,un={values:n()({},Be),filter:pn,forceUpdate:!1},Dt!=="selected"){ir.next=8;break}if(Cn!=null&&Cn.length){ir.next=7;break}return z.ZP.error(Gt("Please select the records to be updated")),ln.data.loading=!1,ir.abrupt("return");case 7:un.filter={$and:[C()({},Zt||"id",{$in:Cn})]};case 8:return un.filter||(un.forceUpdate=!0),ir.prev=9,ir.next=12,Bt.update(un);case 12:ir.next=16;break;case 14:ir.prev=14,ir.t0=ir.catch(9);case 16:return ir.prev=16,ln.data.loading=!1,ir.finish(16);case 19:if(Bt instanceof xe.Qy||jt==null||(Xn=jt.service)===null||Xn===void 0||(Yn=Xn.refresh)===null||Yn===void 0||Yn.call(Xn),ot){ir.next=22;break}return ir.abrupt("return");case 22:Ht?sn.success({title:Mn(ot),onOk:function(){var fr=h()(v()().mark(function wr(){return v()().wrap(function(ao){for(;;)switch(ao.prev=ao.next){case 0:(Ut&&!qe||qe==="redirect")&&wt&&((0,$.isURL)(wt)?window.location.href=wt:Yt(wt));case 1:case"end":return ao.stop()}},wr)}));function Ar(){return fr.apply(this,arguments)}return Ar}()}):(z.ZP.success(Mn(ot)),(Ut&&!qe||qe==="redirect")&&wt&&((0,$.isURL)(wt)?window.location.href=wt:Yt(wt)));case 23:case"end":return ir.stop()}},Pt,null,[[9,14,16,19]])}))()},onCancel:function(){return h()(v()().mark(function Pt(){return v()().wrap(function($t){for(;;)switch($t.prev=$t.next){case 0:ln.data.loading=!1;case 1:case"end":return $t.stop()}},Pt)}))()}});case 10:case"end":return $e.stop()}},Ne)}))()}}},be=function(){var ct,Mt=(0,H.LY)(),kt=(0,O.WO)(),Rt=(0,ie.C)(),_t=(0,a.useFieldSchema)(),Bt=(0,D.eJW)(),jt=(0,a.useForm)(),Xt=(0,t.useCollection_deprecated)(),Wt=Xt.fields,Nt=Xt.getField,nn=(0,ie.BU)(),Zt=nn.field,Cn=nn.resource,Yt=nn.__parent,Mn=nn.service,bn=(0,U.a)(),Gt=(0,J.OP)(),ln=Gt==null||(ct=Gt.data)===null||ct===void 0?void 0:ct.data,Hn=(0,a.useField)(),sn=(0,l.$)(),Ln=sn.t,Bn=(0,D.XCj)(),wn=Bn.setVisible,st=Q.Z.useApp(),Ke=st.modal,De=(0,S.useFormActiveFields)()||{},Ce=De.getActiveFieldsName;return{onClick:function(){return h()(v()().mark(function Fe(){var Ne,Xe,dt,ht,xt,Ct,Dt,Vt,Ht,Ut,wt,ot,qe,Be,rt,Ve,$e,it,Pt,Lt,$t,$n;return v()().wrap(function(un){for(;;)switch(un.prev=un.next){case 0:if(Xe=(Ne=_t==null?void 0:_t["x-action-settings"])!==null&&Ne!==void 0?Ne:{},dt=Xe.skipValidator,ht=Xe.onSuccess,xt=Xe.requestSettings,Ct=ht||{},Dt=Ct.manualClose,Vt=Ct.redirecting,Ht=Ct.redirectTo,Ut=Ct.successMessage,wt=Ct.actionAfterSuccess,ot=_t==null?void 0:_t["x-action"],xt.url){un.next=5;break}return un.abrupt("return");case 5:if(!(dt!==!0&&ot==="customize:form:request")){un.next=8;break}return un.next=8,jt.submit();case 8:return qe=xt.headers?JSON.parse(xt.headers):{},Be=xt.params?JSON.parse(xt.params):{},rt=xt.data?JSON.parse(xt.data):{},Ve=["POST","PUT","PATCH"],ot==="customize:form:request"&&Ve.includes(xt.method)&&($e=Wt.map(function(Xn){return Xn.name}),it=ue({filterByTk:Rt,field:Zt,form:jt,fieldNames:$e,getField:Nt,resource:Cn,actionFields:(Ce==null?void 0:Ce("form"))||[]}),Object.assign(rt,it)),Pt={url:pe(xt.url,{currentRecord:bn,currentUser:ln}),method:xt.method,headers:(0,$.parse)(qe)({currentRecord:bn,currentUser:ln}),params:(0,$.parse)(Be)({currentRecord:bn,currentUser:ln}),data:(0,$.parse)(rt)({currentRecord:bn,currentUser:ln})},Hn.data=Zt.data||{},Hn.data.loading=!0,un.prev=16,un.next=19,Mt.request(n()({},Pt));case 19:if(Hn.data.loading=!1,Cn instanceof xe.Qy||Yt==null||($t=Yt.service)===null||$t===void 0||($n=$t.refresh)===null||$n===void 0||$n.call($t),Mn==null||(Lt=Mn.refresh)===null||Lt===void 0||Lt.call(Mn),ot==="customize:form:request"&&(wt==="previous"||!wt&&Vt!==!0)&&(wn==null||wn(!1)),Ut){un.next=28;break}return z.ZP.success(Ln("Saved successfully")),un.next=27,_n(jt);case 27:(Vt&&!wt||wt==="redirect")&&Ht&&((0,$.isURL)(Ht)?window.location.href=Ht:kt(Ht));case 28:Dt?Ke.success({title:Bt(Ut),onOk:function(){var Xn=h()(v()().mark(function jn(){return v()().wrap(function(fr){for(;;)switch(fr.prev=fr.next){case 0:(Vt&&!wt||wt==="redirect")&&Ht&&((0,$.isURL)(Ht)?window.location.href=Ht:kt(Ht));case 1:case"end":return fr.stop()}},jn)}));function Yn(){return Xn.apply(this,arguments)}return Yn}()}):z.ZP.success(Bt(Ut));case 29:return un.prev=29,Hn.data.loading=!1,un.finish(29);case 32:case"end":return un.stop()}},Fe,null,[[16,,29,32]])}))()}}},oe=function(){var ct=(0,a.useForm)(),Mt=(0,ie.C)(),kt=(0,ie.BU)(),Rt=kt.field,_t=kt.resource,Bt=kt.__parent,jt=(0,D.XCj)(),Xt=jt.setVisible,Wt=jt.setFormValueChanged,Nt=(0,a.useFieldSchema)(),nn=(0,O.WO)(),Zt=(0,t.useCollection_deprecated)(),Cn=Zt.fields,Yt=Zt.getField,Mn=Zt.name,bn=(0,D.eJW)(),Gt=(0,a.useField)(),ln=(0,N.bz)(),Hn=ln.updateAssociationValues,sn=Q.Z.useApp(),Ln=sn.modal,Bn=(0,ie.MM)(),wn=(0,Y.OQ)(),st=(0,Y.Kp)({currentForm:ct}),Ke=(0,S.useFormActiveFields)()||{},De=Ke.getActiveFieldsName;return{onClick:function(Oe,Fe){return h()(v()().mark(function Ne(){var Xe,dt,ht,xt,Ct,Dt,Vt,Ht,Ut,wt,ot,qe,Be,rt,Ve,$e,it,Pt;return v()().wrap(function($t){for(;;)switch($t.prev=$t.next){case 0:return dt=(Xe=Nt==null?void 0:Nt["x-action-settings"])!==null&&Xe!==void 0?Xe:{},ht=dt.assignedValues,xt=ht===void 0?{}:ht,Ct=dt.onSuccess,Dt=dt.overwriteValues,Vt=dt.skipValidator,Ht=dt.triggerWorkflows,Ut=Ct||{},wt=Ut.manualClose,ot=Ut.redirecting,qe=Ut.redirectTo,Be=Ut.successMessage,rt=Ut.actionAfterSuccess,Ve={},$e=Object.keys(xt).map(function(){var $n=h()(v()().mark(function pn(un){var Xn,Yn,jn,ir;return v()().wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:Xn=xt[un],Yn=Yt(un),Ar.next=5;break;case 5:if(!(0,P.cG)(Xn)){Ar.next=16;break}return Ar.next=8,wn==null?void 0:wn.parseVariable(Xn,st);case 8:if(Ar.t0=Ar.sent,Ar.t0){Ar.next=11;break}Ar.t0={};case 11:jn=Ar.t0,ir=jn.value,ir&&(Ve[un]=(0,w.J)(ir,{targetCollectionField:Yn})),Ar.next=17;break;case 16:Xn!=null&&Xn!==""&&(Ve[un]=Xn);case 17:case"end":return Ar.stop()}},pn)}));return function(pn){return $n.apply(this,arguments)}}()),$t.next=6,Promise.all($e);case 6:if(Vt){$t.next=9;break}return $t.next=9,ct.submit();case 9:return it=Cn.map(function($n){return $n.name}),Pt=ue({filterByTk:Mt,field:Rt,form:ct,fieldNames:it,getField:Yt,resource:_t,actionFields:(De==null?void 0:De("form"))||[]}),Gt.data=Rt.data||{},Gt.data.loading=!0,$t.prev=13,$t.next=16,_t.update(n()(n()({filterByTk:Mt,values:n()(n()(n()({},Pt),Dt),Ve)},Bn),{},{updateAssociationValues:Hn,triggerWorkflows:Ht!=null&&Ht.length?Ht.map(function($n){return[$n.workflowKey,$n.context].filter(Boolean).join("!")}).join(","):void 0}));case 16:if(Gt.data.loading=!1,Fe&&(Fe==null||Fe()),(rt==="previous"||!rt&&ot!==!0)&&(Xt==null||Xt(!1)),Wt==null||Wt(!1),Be){$t.next=22;break}return $t.abrupt("return");case 22:wt?Ln.success({title:bn(Be),onOk:function(){var $n=h()(v()().mark(function un(){return v()().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:return Yn.next=2,ct.reset();case 2:(ot&&!rt||rt==="redirect")&&qe&&((0,$.isURL)(qe)?window.location.href=qe:nn(qe));case 3:case"end":return Yn.stop()}},un)}));function pn(){return $n.apply(this,arguments)}return pn}()}):(z.ZP.success(bn(Be)),(ot&&!rt||rt==="redirect"||rt==="redirect")&&qe&&((0,$.isURL)(qe)?window.location.href=qe:nn(qe))),$t.next=28;break;case 25:$t.prev=25,$t.t0=$t.catch(13),Gt.data.loading=!1;case 28:case"end":return $t.stop()}},Ne,null,[[13,25]])}))()}}},Re=function(){var ct=(0,ie.C)(),Mt=(0,ie.BU)(),kt=Mt.resource,Rt=Mt.service,_t=Mt.block,Bt=Mt.__parent,jt=(0,D.XCj)(),Xt=jt.setVisible,Wt=jt.setSubmitted,Nt=(0,ie.MM)(),nn=(0,a.useFieldSchema)();return{onClick:function(Cn,Yt){return h()(v()().mark(function Mn(){var bn,Gt,ln,Hn,sn,Ln,Bn,wn,st,Ke,De,Ce,Oe,Fe;return v()().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:return ln=(bn=nn==null?void 0:nn["x-action-settings"])!==null&&bn!==void 0?bn:{},Hn=ln.triggerWorkflows,Xe.next=3,kt.destroy(n()({filterByTk:ct,triggerWorkflows:Hn!=null&&Hn.length?Hn.map(function(dt){return[dt.workflowKey,dt.context].filter(Boolean).join("!")}).join(","):void 0},Nt));case 3:sn=(Rt==null||(Gt=Rt.data)===null||Gt===void 0?void 0:Gt.meta)||{},Ln=sn.count,Bn=Ln===void 0?0:Ln,wn=sn.page,st=wn===void 0?0:wn,Ke=sn.pageSize,De=Ke===void 0?0:Ke,Bn%De===1&&st!==1&&Rt.run(n()(n()({},Rt==null||(Ce=Rt.params)===null||Ce===void 0?void 0:Ce[0]),{},{page:st-1})),Yt&&(Yt==null||Yt()),Wt==null||Wt(!0),_t&&_t!=="TableField"&&(Bt==null||(Oe=Bt.service)===null||Oe===void 0||(Fe=Oe.refresh)===null||Fe===void 0||Fe.call(Oe),Xt==null||Xt(!1),Wt==null||Wt(!0));case 8:case"end":return Xe.stop()}},Mn)}))()}}},Ze=function(ct){var Mt=(0,ie.C)(),kt=(0,H.LY)(),Rt=kt.resource(ct,Mt);return{onClick:function(Bt){return h()(v()().mark(function jt(){return v()().wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:return Wt.next=2,Rt.remove({values:[Bt.id]});case 2:case"end":return Wt.stop()}},jt)}))()}}},We=function(){var ct=(0,ie.C)(),Mt=(0,ie.BU)(),kt=Mt.resource,Rt=Mt.service,_t=Mt.block,Bt=Mt.__parent,jt=(0,D.XCj)(),Xt=jt.setVisible,Wt=jt.setSubmitted,Nt=jt.setFormValueChanged;return{onClick:function(Zt,Cn){return h()(v()().mark(function Yt(){var Mn,bn,Gt,ln,Hn,sn,Ln,Bn,wn,st,Ke;return v()().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,kt.remove({values:[ct]});case 2:bn=(Rt==null||(Mn=Rt.data)===null||Mn===void 0?void 0:Mn.meta)||{},Gt=bn.count,ln=Gt===void 0?0:Gt,Hn=bn.page,sn=Hn===void 0?0:Hn,Ln=bn.pageSize,Bn=Ln===void 0?0:Ln,ln%Bn===1&&sn!==1?Rt.run(n()(n()({},Rt==null||(wn=Rt.params)===null||wn===void 0?void 0:wn[0]),{},{page:sn-1})):Cn&&(Cn==null||Cn()),Wt==null||Wt(!0),_t&&_t!=="TableField"&&(Bt==null||(st=Bt.service)===null||st===void 0||(Ke=st.refresh)===null||Ke===void 0||Ke.call(st),Xt==null||Xt(!1),Nt==null||Nt(!1));case 6:case"end":return Ce.stop()}},Yt)}))()}}},tt=function(){var ct=(0,ie.BU)(),Mt=ct.field,kt=(0,ie.BU)(),Rt=kt.resource,_t=kt.service,Bt=(0,D.XCj)(),jt=Bt.setSubmitted,Xt=(0,t.useCollection_deprecated)(),Wt=Xt.filterTargetKey;return{onClick:function(nn,Zt){return h()(v()().mark(function Cn(){var Yt,Mn,bn,Gt,ln,Hn,sn,Ln;return v()().wrap(function(wn){for(;;)switch(wn.prev=wn.next){case 0:if(Hn=(Yt=Mt.data)===null||Yt===void 0?void 0:Yt.selectedRowKeys,Array.isArray(Wt)&&(Hn=Mt.data.selectedRowData.map(function(st){var Ke={};return Wt.map(function(De){Ke[De]=st[De]}),Ke})),Mt!=null&&(Mn=Mt.data)!==null&&Mn!==void 0&&(Mn=Mn.selectedRowKeys)!==null&&Mn!==void 0&&Mn.length){wn.next=4;break}return wn.abrupt("return");case 4:return wn.next=6,Rt.destroy({filterByTk:Hn});case 6:Mt.data.selectedRowKeys=[],sn=(bn=_t.params[0])===null||bn===void 0?void 0:bn.page,Ln=(Gt=_t.data)===null||Gt===void 0||(Gt=Gt.meta)===null||Gt===void 0?void 0:Gt.totalPage,sn===Ln&&_t.params[0]&&sn!==1&&(_t.params[0].page=sn-1),Zt&&(Zt==null||Zt()),jt==null||jt(!0),_t==null||(ln=_t.refresh)===null||ln===void 0||ln.call(_t);case 13:case"end":return wn.stop()}},Cn)}))()}}},St=function(){var ct=(0,ie.BU)(),Mt=ct.service;return{onClick:function(){return h()(v()().mark(function Rt(){var _t;return v()().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:Mt==null||(_t=Mt.refresh)===null||_t===void 0||_t.call(Mt);case 1:case"end":return jt.stop()}},Rt)}))()}}},Tt=function(){var ct,Mt,kt,Rt=(0,le.nT)(),_t=((ct=Rt.service)===null||ct===void 0||(ct=ct.data)===null||ct===void 0||(ct=ct.meta)===null||ct===void 0?void 0:ct.count)||0,Bt=(Mt=Rt.service)===null||Mt===void 0||(Mt=Mt.data)===null||Mt===void 0||(Mt=Mt.meta)===null||Mt===void 0?void 0:Mt.page;if(!_t&&Bt){var jt,Xt;return{simple:!0,current:((jt=Rt.service)===null||jt===void 0||(jt=jt.data)===null||jt===void 0||(jt=jt.meta)===null||jt===void 0?void 0:jt.page)||1,pageSize:1,showSizeChanger:!1,onChange:function(Nt){return h()(v()().mark(function nn(){var Zt,Cn;return v()().wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:Cn=(Zt=Rt.service)===null||Zt===void 0||(Zt=Zt.params)===null||Zt===void 0?void 0:Zt[0],Rt.service.run(n()(n()({},Cn),{},{page:Nt}));case 2:case"end":return Mn.stop()}},nn)}))()},style:{marginTop:24,textAlign:"center"},showTotal:!1,showTitle:!1,total:(Xt=Rt.service)!==null&&Xt!==void 0&&(Xt=Xt.data)!==null&&Xt!==void 0&&(Xt=Xt.data)!==null&&Xt!==void 0&&Xt.length?1*Bt+1:1*Bt,className:(0,o.css)(se||(se=i()([`
        .ant-pagination-simple-pager {
          display: none !important;
        }
      `])))}}return{simple:!0,hidden:_t<=1,current:((kt=Rt.service)===null||kt===void 0||(kt=kt.data)===null||kt===void 0||(kt=kt.meta)===null||kt===void 0?void 0:kt.page)||1,total:_t,pageSize:1,showSizeChanger:!1,onChange:function(Nt){return h()(v()().mark(function nn(){var Zt,Cn;return v()().wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:Cn=(Zt=Rt.service)===null||Zt===void 0||(Zt=Zt.params)===null||Zt===void 0?void 0:Zt[0],Rt.service.run(n()(n()({},Cn),{},{page:Nt}));case 2:case"end":return Mn.stop()}},nn)}))()},style:{marginTop:24,textAlign:"center"}}},lt=function(){var ct,Mt,kt,Rt,_t=S.AssociationFilter.useAssociationField(),Bt=(0,ie.BU)(),jt=Bt.service,Xt=Bt.props,Wt=(0,a.useFieldSchema)(),Nt=(0,t.useCollectionManager_deprecated)(),nn=_t!=null&&_t.target?(ct=Nt.getCollection(_t.target))===null||ct===void 0?void 0:ct.getPrimaryKey():"id",Zt=((Mt=Wt["x-component-props"])===null||Mt===void 0||(Mt=Mt.fieldNames)===null||Mt===void 0?void 0:Mt.label)||nn,Cn=(0,a.useField)(),Yt=_t.name,Mn=(0,S.useDataSourceHeaders)(Xt==null?void 0:Xt.dataSource),bn=(0,H.QT)({headers:Mn,resource:_t.target,action:"list",params:n()({fields:[Zt,nn],pageSize:200,page:1},(kt=Cn.componentProps)===null||kt===void 0?void 0:kt.params)},{refreshDeps:[Zt,nn,JSON.stringify(((Rt=Cn.componentProps)===null||Rt===void 0?void 0:Rt.params)||{})],debounceWait:300}),Gt=bn.data,ln=bn.params,Hn=bn.run,sn=(Gt==null?void 0:Gt.data)||[],Ln=function(st){var Ke,De,Ce,Oe=((Ke=jt.params)===null||Ke===void 0||(Ke=Ke[1])===null||Ke===void 0?void 0:Ke.filters)||{};st.length?Oe["af.".concat(Yt)]=C()({},"".concat(Yt,".").concat(nn,".$in"),st):delete Oe["af.".concat(Yt)],jt.run(n()(n()({},(De=jt.params)===null||De===void 0?void 0:De[0]),{},{pageSize:200,page:1,filter:(0,X.EO)([].concat(r()(Object.values(Oe)),[Xt==null||(Ce=Xt.params)===null||Ce===void 0?void 0:Ce.filter]))}),{filters:Oe})},Bn=function(st){Hn(n()(n()({},ln==null?void 0:ln[0]),{},{filter:C()({},"".concat(Zt,".$includes"),st.target.value)}))};return{list:sn,onSelected:Ln,handleSearchInput:Bn,params:ln,run:Hn}},ut=function(){var ct=(0,t.useCollection_deprecated)(),Mt=ct.currentFields,kt=Mt===void 0?[]:Mt;return kt.filter(function(Rt){return nt(Rt)})},nt=function(ct){var Mt,kt=["select","multipleSelect","checkbox","checkboxGroup","chinaRegion"];return kt.includes(ct==null?void 0:ct.interface)&&(ct==null||(Mt=ct.uiSchema)===null||Mt===void 0?void 0:Mt.enum)},Je=function(){var ct,Mt,kt,Rt,_t,Bt,jt=S.AssociationFilter.useAssociationField(),Xt=(0,a.useFieldSchema)(),Wt=ut(),Nt=(0,B.kO)(),nn=Nt.getDataBlocks,Zt=jt==null?void 0:jt.name,Cn=(0,a.useField)(),Yt=(0,ie.BU)(),Mn=Yt.props,bn=(0,S.useDataSourceHeaders)(Mn==null?void 0:Mn.dataSource),Gt=(0,S.useCollectionManager)(),ln=(0,S.useParsedFilter)({filterOption:(ct=Cn.componentProps)===null||ct===void 0||(ct=ct.params)===null||ct===void 0?void 0:ct.filter}),Hn=ln.filter,sn=ln.parseVariableLoading,Ln,Bn,wn,st,Ke,De,Ce,Oe;De=jt!=null&&jt.target?Gt==null||(Mt=Gt.getCollection(jt.target))===null||Mt===void 0?void 0:Mt.getPrimaryKey():"id",Ce=((kt=Xt["x-component-props"])===null||kt===void 0||(kt=kt.fieldNames)===null||kt===void 0?void 0:kt.label)||De;var Fe=(0,H.QT)({headers:bn,resource:jt==null?void 0:jt.target,action:"list",params:n()(n()({fields:[Ce,De],pageSize:200,page:1},(Bt=Cn.componentProps)===null||Bt===void 0?void 0:Bt.params),{},{filter:Hn})},{manual:!0,debounceWait:300});Ke=Fe.data,wn=Fe.params,st=Fe.run,(0,u.useEffect)(function(){jt&&!nt(jt)&&sn===!1&&st()},[jt,Ce,st,De,(Rt=Cn.componentProps)===null||Rt===void 0?void 0:Rt.params,(_t=Cn.componentProps)===null||_t===void 0||(_t=_t.params)===null||_t===void 0?void 0:_t.sort,sn]);var Ne=(0,u.useCallback)(function(Dt){var Vt=Le(Xt),Ht=Vt.targets,Ut=Vt.uid;nn().forEach(function(wt){var ot,qe,Be=Ht.find(function(Lt){return Lt.uid===wt.uid});if(Be){var rt="".concat(Ut).concat(Xt.name),Ve=((ot=wt.service.params)===null||ot===void 0?void 0:ot[0])||{};(qe=wt.service.params)!==null&&qe!==void 0&&(qe=qe[1])!==null&&qe!==void 0&&qe.filters||b().set(wt.service.params,"[1].filters",{});var $e=wt.service.params[1].filters;if(Dt.length)$e[rt]=C()({},Oe,Dt);else{var it;if((it=wt.clearSelection)===null||it===void 0||it.call(wt),wt.dataLoadingMode==="manual")return wt.clearData();delete $e[rt]}var Pt=(0,X.EO)([].concat(r()(Object.values($e)),[wt.defaultFilter]));return wt.doFilter(n()(n()({},Ve),{},{page:1,filter:Pt}),{filters:$e})}})},[Xt,Oe,nn]);if(!jt)return{};if(nt(jt)){var Xe,dt=Wt.find(function(Dt){return Dt.name===Xt.name}),ht={select:"$in",multipleSelect:"$anyOf",checkbox:"$in",checkboxGroup:"$anyOf"},xt=(dt==null||(Xe=dt.uiSchema)===null||Xe===void 0?void 0:Xe.enum)||[];De="value",Ce="label",Ln=xt,wn={},st=function(){},Oe="".concat(dt.name,".").concat(ht[dt.interface]),Bn=function(Vt){var Ht=Vt.target.value;if(!Ht){Ln=xt;return}Ln=xt.filter(function(Ut){return Ut.label.includes(Ht)})}}else{var Ct;Oe="".concat(Zt,".").concat(De,".$in"),Ln=((Ct=Ke)===null||Ct===void 0?void 0:Ct.data)||[],Bn=function(Vt){var Ht;st(n()(n()({},(Ht=wn)===null||Ht===void 0?void 0:Ht[0]),{},{filter:C()({},"".concat(Ce,".$includes"),Vt.target.value)}))}}return{list:Ln,onSelected:Ne,handleSearchInput:Bn,params:wn,run:st,valueKey:De,labelKey:Ce}};function hn(Ft){return mn.apply(this,arguments)}function mn(){return mn=h()(v()().mark(function Ft(ct){var Mt,kt,Rt;return v()().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:return Mt=ct.getDataBlocks,kt=ct.targets,Rt=ct.uid,Bt.prev=1,Bt.next=4,Promise.all(Mt().map(function(){var jt=h()(v()().mark(function Xt(Wt){var Nt,nn,Zt,Cn,Yt,Mn,bn;return v()().wrap(function(ln){for(;;)switch(ln.prev=ln.next){case 0:if(Cn=kt.find(function(Hn){return Hn.uid===Wt.uid}),Cn){ln.next=3;break}return ln.abrupt("return");case 3:if((Nt=Wt.clearSelection)===null||Nt===void 0||Nt.call(Wt),Wt.dataLoadingMode!=="manual"){ln.next=6;break}return ln.abrupt("return",Wt.clearData());case 6:return Yt=((nn=Wt.service.params)===null||nn===void 0?void 0:nn[0])||{},Mn=((Zt=Wt.service.params)===null||Zt===void 0||(Zt=Zt[1])===null||Zt===void 0?void 0:Zt.filters)||{},delete Mn[Rt],bn=(0,X.EO)([].concat(r()(Object.values(Mn)),[Wt.defaultFilter])),ln.abrupt("return",Wt.doFilter(n()(n()({},Yt),{},{page:1,filter:bn}),{filters:Mn}));case 11:case"end":return ln.stop()}},Xt)}));return function(Xt){return jt.apply(this,arguments)}}()));case 4:Bt.next=9;break;case 6:Bt.prev=6,Bt.t0=Bt.catch(1),console.error(Bt.t0);case 9:case"end":return Bt.stop()}},Ft,null,[[1,6]])})),mn.apply(this,arguments)}function vn(Ft){var ct=Ft.lastIndexOf(".");return ct!==-1?Ft.substring(0,ct):Ft}var an=function Ft(ct){var Mt=ct.schema,kt=ct.prefix,Rt=ct.updateAssociationValues,_t=ct.appends,Bt=ct.getCollectionJoinField,jt=ct.getCollection,Xt=ct.dataSource;Mt.reduceProperties(function(Wt,Nt){var nn,Zt=Wt||kt,Cn=Nt["x-collection-field"]&&Bt(Nt["x-collection-field"],Xt),Yt=Nt.name.includes("."),Mn=Cn&&["hasOne","hasMany","belongsTo","belongsToMany","belongsToArray"].includes(Cn.type);if(Nt["x-linkage-rules"]&&!(0,ne.r$)(Nt)){var bn=function Ke(De){var Ce=Object.keys(De)[0]||"$and",Oe=De[Ce];Oe.forEach(function(Fe){if("$and"in Fe||"$or"in Fe)return Ke(Fe);var Ne=cn(Fe);Ne.length>1&&_t.add(Ne.join("."))})},Gt=Nt["x-linkage-rules"];Gt.forEach(function(Ke){var De=Ke.condition;bn(De)})}var ln=Mn&&((nn=jt(Cn.target,Xt))===null||nn===void 0?void 0:nn.template)==="tree";if(Cn&&(Mn||Yt)&&Nt["x-component"]!=="TableField"){var Hn=!Mn&&Yt?vn(Nt.name):Nt.name,sn=Zt===""||!Zt?Hn:Zt+"."+Hn;if(ln)_t.add(sn),_t.add("".concat(sn,".parent")+"(recursively=true)");else{var Ln;if((Ln=Nt["x-component-props"])!==null&&Ln!==void 0&&Ln.sortArr){var Bn,wn=(Bn=Nt["x-component-props"])===null||Bn===void 0?void 0:Bn.sortArr;_t.add("".concat(sn,"(sort=").concat(wn,")"))}else _t.add(sn)}if((0,ne.r$)(Nt)){Rt.add(sn);var st=Zt&&Zt!==""?Zt+"."+Nt.name:Nt.name;Ft({schema:Nt,prefix:st,updateAssociationValues:Rt,appends:_t,getCollectionJoinField:Bt,getCollection:jt,dataSource:Xt})}}else["Action","Action.Link","Action.Modal","Selector","Viewer","AddNewer","AssociationField.Selector","AssociationField.AddNewer","TableField","Kanban.CardViewer","Action.Container"].includes(Nt["x-component"])||Ft({schema:Nt,prefix:kt,updateAssociationValues:Rt,appends:_t,getCollectionJoinField:Bt,getCollection:jt,dataSource:Xt})},kt)},fn=function(ct){var Mt=(0,t.useCollectionManager_deprecated)(ct),kt=Mt.getCollectionJoinField,Rt=Mt.getCollection,_t=(0,a.useFieldSchema)(),Bt=(0,u.useRef)(null),jt=(0,u.useCallback)(function(){var Xt=new Set([]),Wt=new Set([]);an({schema:_t,prefix:"",updateAssociationValues:Xt,appends:Wt,getCollectionJoinField:kt,getCollection:Rt,dataSource:ct}),Wt=Er(Wt);var Nt=r()(Wt),nn=r()(Xt),Zt={appends:b().isEqual(Bt.current,Nt)?Bt.current:Nt,updateAssociationValues:nn};return Bt.current=Zt.appends,Zt},[ct,_t,Rt,kt]);return{getAssociationAppends:jt}};function cn(Ft){function ct(_t){var Bt=[];function jt(Xt){Object.keys(Xt).sort().forEach(function(Wt){Bt.push(Wt),Xt[Wt]&&L()(Xt[Wt])==="object"&&jt(Xt[Wt])})}return jt(_t),Bt}var Mt=ct(Ft),kt=b().findIndex(Mt,function(_t,Bt){if(_t.includes("$")&&Bt>0)return!0}),Rt=Mt.slice(0,kt);return Rt}function _n(Ft){return zt.apply(this,arguments)}function zt(){return zt=h()(v()().mark(function Ft(ct){return v()().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return(0,R.untracked)(function(){Object.keys(ct.fields).forEach(function(Rt){(0,ne.r$)(ct.fields[Rt])&&(ct.fields[Rt].initialValue=null)})}),kt.next=3,ct.reset();case 3:case"end":return kt.stop()}},Ft)})),zt.apply(this,arguments)}function xn(Ft,ct){return ct?Ft+(Ft.includes("?")?"&":"?")+ct:Ft}var Qt=function(){var ct=(0,Y.OQ)(),Mt=(0,Y.Kp)(),kt=(0,u.useCallback)(function(){var Rt=h()(v()().mark(function _t(Bt,jt){var Xt,Wt,Nt;return v()().wrap(function(Zt){for(;;)switch(Zt.prev=Zt.next){case 0:return Zt.next=2,An({searchParams:jt,variables:ct,localVariables:Mt,replaceVariableValue:en});case 2:return Xt=Zt.sent,Zt.next=5,en(Bt,ct,Mt);case 5:return Wt=Zt.sent,Nt=xn(Wt,Xt),Zt.abrupt("return",Nt);case 8:case"end":return Zt.stop()}},_t)}));return function(_t,Bt){return Rt.apply(this,arguments)}}(),[ct,Mt]);return{parseURLAndParams:kt}};function Et(Ft){var ct,Mt=(0,O.WO)(),kt=(0,a.useFieldSchema)(),Rt=(kt==null?void 0:kt["x-component-props"])||Ft,_t=(0,l.$)(),Bt=_t.t,jt=Rt==null?void 0:Rt.url,Xt=(Rt==null?void 0:Rt.params)||[],Wt=(Rt==null?void 0:Rt.type)||"default",Nt=kt==null||(ct=kt["x-component-props"])===null||ct===void 0?void 0:ct.openInNewWindow,nn=Qt(),Zt=nn.parseURLAndParams,Cn=(0,S.useRouterBasename)();return{type:Wt,onClick:function(){return h()(v()().mark(function Mn(){var bn;return v()().wrap(function(ln){for(;;)switch(ln.prev=ln.next){case 0:if(jt){ln.next=3;break}return z.ZP.warning(Bt("Please configure the URL")),ln.abrupt("return");case 3:return ln.next=5,Zt(jt,Xt);case 5:bn=ln.sent,bn?Nt?window.open(rr(bn),"_blank"):mr(bn,Mt,window.location.origin+Cn):console.error("link should be a string");case 7:case"end":return ln.stop()}},Mn)}))()}}}function en(Ft,ct,Mt){return Rn.apply(this,arguments)}function Rn(){return Rn=h()(v()().mark(function Ft(ct,Mt,kt){var Rt,_t,Bt,jt,Xt,Wt;return v()().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:if(ct){nn.next=2;break}return nn.abrupt("return");case 2:return Rt=E.evaluators.get("string"),_t=Rt.evaluate,nn.next=5,(0,q.bU)(ct,{variables:Mt,localVariables:kt});case 5:return Bt=nn.sent,jt=Bt.exp,Xt=Bt.scope,nn.prev=8,Wt=_t(jt,n()({now:function(){return new Date().toString()}},Xt)),nn.abrupt("return",Wt);case 13:nn.prev=13,nn.t0=nn.catch(8),console.error(nn.t0);case 16:case"end":return nn.stop()}},Ft,null,[[8,13]])})),Rn.apply(this,arguments)}function An(Ft){return Jn.apply(this,arguments)}function Jn(){return Jn=h()(v()().mark(function Ft(ct){var Mt,kt,Rt,_t,Bt,jt,Xt,Wt,Nt,nn,Zt;return v()().wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:return Mt=ct.searchParams,kt=ct.variables,Rt=ct.localVariables,_t=ct.replaceVariableValue,Yt.next=3,Promise.all(Mt.map(function(){var Mn=h()(v()().mark(function bn(Gt){var ln,Hn,sn,Ln,Bn;return v()().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:if(ln=Gt.name,Hn=Gt.value,typeof Hn!="string"){st.next=15;break}if(!(0,P.cG)(Hn)){st.next=11;break}return st.next=5,kt.parseVariable(Hn,Rt);case 5:if(st.t0=st.sent,st.t0){st.next=8;break}st.t0={};case 8:return sn=st.t0,Ln=sn.value,st.abrupt("return",{name:ln,value:Ln});case 11:return st.next=13,_t(Hn,kt,Rt);case 13:return Bn=st.sent,st.abrupt("return",{name:ln,value:Bn});case 15:return st.abrupt("return",{name:ln,value:Hn});case 16:case"end":return st.stop()}},bn)}));return function(bn){return Mn.apply(this,arguments)}}()));case 3:Bt=Yt.sent,jt={},Xt=c()(Bt);try{for(Xt.s();!(Wt=Xt.n()).done;)Nt=Wt.value,nn=Nt.name,Zt=Nt.value,nn&&Zt&&(jt[nn]=Zn(Zt))}catch(Mn){Xt.e(Mn)}finally{Xt.f()}return Yt.abrupt("return",d().stringify(jt));case 8:case"end":return Yt.stop()}},Ft)})),Jn.apply(this,arguments)}function Zn(Ft){if(b().isPlainObject(Ft)){var ct={};return Object.keys(Ft).forEach(function(Mt){b().isPlainObject(Ft[Mt])||b().isArray(Ft[Mt])||b().isString(Ft[Mt])&&Ft[Mt].length>100||(ct[Mt]=Ft[Mt])}),ct}return b().isArray(Ft)?Ft.map(function(Mt){return b().isPlainObject(Mt)||b().isArray(Mt)?Zn(Mt):Mt}):Ft}function rr(Ft){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window.location.origin;return Ft?(0,$.isURL)(Ft)?Ft:Ft.startsWith("/")?"".concat(ct).concat(Ft):"".concat(ct,"/").concat(Ft):""}function mr(Ft,ct){var Mt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:window.location.origin;if(!b().isString(Ft))return console.error("link should be a string");(0,$.isURL)(Ft)?Ft.startsWith(Mt)?ct(rr(Ft.replace(Mt,""),"")):window.open(Ft,"_self"):ct(rr(Ft,""))}function Er(Ft){var ct=Array.from(Ft).filter(function(Mt){return Mt.includes(".")});return ct.forEach(function(Mt){var kt=Mt.split(".");kt.pop();var Rt=kt.join(".");Ft.add(Rt)}),Ft}},3192:function(He,ae,e){"use strict";e.d(ae,{Gn:function(){return j},gp:function(){return K},tj:function(){return v}});var Z=e(97857),c=e.n(Z),k=e(80844),i=e(67294),g=e(23461),C=e(18243),A=e(4530),r=e(85782),K=function(){var M,n,y,L=(0,k.useFieldSchema)(),o=j(L),a=(M=(0,g.rE)())===null||M===void 0?void 0:M.fieldSchema,R=(0,i.useMemo)(function(){return v(a||L)},[]),E=(R==null?void 0:R["x-component-props"])||{},$=E.disablePageHeader,Q=E.enablePageTabs,z=E.hidePageTitle,p=(0,i.useContext)(C.s)||{},b=p.titleHeight,f=(0,A.Kf)(),x=f.allAccessRoutes,m=(0,r.V$)(),F=(0,i.useMemo)(function(){return(0,A.gY)(m,x)},[m,x]);return{heightProps:c()(c()({},o==null?void 0:o["x-component-props"]),{},{title:(o==null||(n=o["x-component-props"])===null||n===void 0?void 0:n.title)||(o==null||(y=o["x-component-props"])===null||y===void 0?void 0:y.description),disablePageHeader:$,enablePageTabs:(F==null?void 0:F.enableTabs)||Q,hidePageTitle:z,titleHeight:b})}},v=function h(M){return M?M["x-component"]==="Page"?M:h(M.parent):null},j=function h(M){return M?["BlockItem","CardItem"].includes(M["x-component"])?M:h(M.parent):null}},94658:function(He,ae,e){"use strict";e.d(ae,{M:function(){return c}});var Z=e(21143),c=function(i){var g,C=i.association,A=(0,Z.useCollectionRecordData)(),r=(0,Z.useCollectionParentRecordData)(),K=(0,Z.useCollectionManager)(),v=(0,Z.useCollection)();if(C){var j=K.getCollection(C.split(".")[0]);return v.name===j.name||(g=v.getParentCollectionsName)!==null&&g!==void 0&&g.call(v).includes(j.name)?A:r}}},44899:function(He,ae,e){"use strict";e.d(ae,{T:function(){return i},z:function(){return g}});var Z=e(67294),c=e(85893),k=(0,Z.createContext)(null),i=function(A){var r=A.children,K=A.name,v=A.getActiveFieldsName,j=A.addActiveFieldName,h=A.removeActiveFieldName,M=(0,Z.useRef)(new Set),n=(0,Z.useContext)(k),y=(0,Z.useMemo)(function(){return{getActiveFieldsName:v||function(L){return!L||L===K?Array.from(M.current):n==null?void 0:n.getActiveFieldsName(L)},addActiveFieldName:j||function(L){M.current.add(L)},removeActiveFieldName:h||function(L){M.current.delete(L)},name:K,parent:n}},[j,v,K,h,n]);return(0,c.jsx)(k.Provider,{value:y,children:r})},g=function(){return(0,Z.useContext)(k)}},12929:function(He,ae,e){"use strict";e.d(ae,{v:function(){return R}});var Z=e(9783),c=e.n(Z),k=e(15009),i=e.n(k),g=e(99289),C=e.n(g),A=e(5574),r=e.n(A),K=e(85667),v=e(84157),j=e(96486),h=e.n(j),M=e(67294),n=e(90297),y=e(64910),L=e(90615),o=e(44256),a=e(76690);function R(E){var $=E.filterOption,Q=(0,n._Y)(),z=Q.parseFilter,p=Q.findVariable,b=(0,M.useState)({}),f=r()(b,2),x=f[0],m=f[1],F=(0,M.useState)(!!$),I=r()(F,2),d=I[0],u=I[1];return(0,M.useEffect)(function(){if($){var l=function(){var H=C()(i()().mark(function O(){var N;return i()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return u(!0),B.next=3,z($);case 3:N=B.sent,u(!1),m(N);case 6:case"end":return B.stop()}},O)}));return function(){return H.apply(this,arguments)}}();l();var S=h().debounce(l,y.on);(0,K.reaction)(function(){var H=(0,v.flatten)($,{breakOn:function(N){var t=N.key;return t.startsWith("$")&&t!=="$and"&&t!=="$or"},transformValue:function(N){if(!(0,a.cG)(N))return N;var t=(0,o.H)(N),B=p(t),X=null,V=(0,L.D)(N),U=V.split(".");return U.forEach(function(D,ne){var q=U.slice(0,ne+1).join("."),J=(0,v.getValuesByPath)(c()({},t,(B==null?void 0:B.ctx)||{}),q);h().isEmpty(J)||(X=J)}),X}});return H},S,{equals:h().isEqual})}},[JSON.stringify($),z,p]),{filter:x,parseVariableLoading:d}}},67174:function(He,ae,e){"use strict";e.d(ae,{WJ:function(){return Z.WJ},Qj:function(){return Z.Qj},ZJ:function(){return Z.ZJ},br:function(){return Z.br},M0:function(){return Z.M0},wH:function(){return Z.wH},jF:function(){return Ze},UC:function(){return Re},LR:function(){return Ee.LR},nw:function(){return Ee.nw},WI:function(){return fe},T2:function(){return oe.FormActiveFieldsProvider},TC:function(){return F.TC},$R:function(){return F.$R},uW:function(){return re.uW},$1:function(){return re.$1},bH:function(){return Z.bH},hD:function(){return Z.hD},gY:function(){return Z.gY},Hz:function(){return T.Hz},_0:function(){return T._0},Q6:function(){return ce.Q6},CB:function(){return ce.CB},Qy:function(){return ce.Qy},Yu:function(){return be.Yu},Vs:function(){return be.Vs},rL:function(){return be.rL},$Y:function(){return re.$Y},s:function(){return ce.s},HQ:function(){return oe.appendQueryStringToUrl},jR:function(){return oe.completeURL},Xe:function(){return oe.fillParentFields},SK:function(){return oe.findFilterTargets},Fi:function(){return F.Fi},iF:function(){return oe.getAppends},dP:function(){return oe.getAssociationPath},Gn:function(){return oe.getCardItemSchema},X7:function(){return oe.getFormValues},Ns:function(){return T.Ns},tj:function(){return oe.getPageSchema},nl:function(){return oe.navigateWithinSelf},_f:function(){return oe.parseVariablesAndChangeParamsToQueryString},zA:function(){return be.br},ID:function(){return oe.reduceValueSize},UY:function(){return oe.replaceVariableValue},iJ:function(){return oe.updateFilterTargets},Yo:function(){return oe.useAssociationCreateActionProps},_S:function(){return oe.useAssociationFilterBlockProps},rD:function(){return oe.useAssociationFilterProps},P_:function(){return oe.useAssociationNames},DD:function(){return Z.DD},VG:function(){return Z.VG},gp:function(){return oe.useBlockHeightProps},BU:function(){return Z.BU},lT:function(){return Z.lT},ns:function(){return oe.useBulkDestroyActionProps},hu:function(){return oe.useCollectValuesToSubmit},cD:function(){return oe.useCreateActionProps},UQ:function(){return oe.useCustomizeBulkUpdateActionProps},xx:function(){return oe.useCustomizeRequestActionProps},X0:function(){return oe.useCustomizeUpdateActionProps},M_:function(){return oe.useDataBlockParentRecord},z2:function(){return oe.useDestroyActionProps},nT:function(){return Ee.nT},BX:function(){return Ee.BX},bF:function(){return oe.useDetailsPaginationProps},ii:function(){return oe.useDisassociateActionProps},Oy:function(){return oe.useFilterBlockActionProps},C:function(){return Z.C},zj:function(){return oe.useFormActiveFields},bz:function(){return F.bz},_$:function(){return F._$},th:function(){return F.th},e$:function(){return re.e$},GK:function(){return re.GK},WG:function(){return F.WG},ee:function(){return oe.useLinkActionProps},Lh:function(){return oe.useOptionalFieldList},MM:function(){return Z.MM},VC:function(){return oe.useParseURLAndParams},vs:function(){return oe.useParsedFilter},St:function(){return oe.usePickActionProps},Xk:function(){return oe.useRefreshActionProps},PJ:function(){return oe.useRemoveActionProps},NP:function(){return oe.useResetBlockActionProps},m:function(){return Z.m},e0:function(){return Z.e0},Si:function(){return T.Si},bE:function(){return T.bE},Wx:function(){return ce.Wx},oA:function(){return ce.oA},CL:function(){return be.CL},RP:function(){return be.RP},HD:function(){return oe.useUpdateActionProps}});var Z=e(75148),c=e(15009),k=e.n(c),i=e(99289),g=e.n(i),C=e(12444),A=e.n(C),r=e(72004),K=e.n(r),v=e(31996),j=e.n(v),h=e(26037),M=e.n(h),n=e(97857),y=e.n(n),L=e(15771),o=e(67294),a=e(31601),R=e(50679),E=e(85893),$=function(tt){return(0,E.jsx)(R.Mf,y()({initializer:!1,showBorder:!1,showBackground:!0},tt))},Q=e(16966),z=e(21109),p=e(31793),b=e(80159),f=e(95216),x=e(3169),m=e(92700),F=e(7340),I=e(58837),d=e(36586),u=e(94516),l=function(tt){var St=(0,d.a)(),Tt=tt.collection,lt=tt.isCusomeizeCreate,ut=tt.hidden,nt=St.__collection,Je=(0,I.Kx)(),hn=(0,u.ng)(),mn=hn.designable,vn=(0,F.WG)();if(!Je)return{hidden:ut||!1};var an=!1;vn&&(an=!0,!mn&&nt&&(an=nt===Tt));var fn=Je.name===((Tt==null?void 0:Tt.name)||Tt)&&!vn||!Je.name||!Tt;return{hidden:ut||!an&&!fn&&!lt}};function S(We){var tt,St=l(We),Tt=St.hidden;return We.association&&(tt=(0,m._)(We.association)),{parentRecord:tt,hidden:Tt}}function H(){return(0,F._$)()}function O(We){var tt=N(),St,Tt=l(We),lt=Tt.hidden;return We.association&&(St=(0,b.j)(We.association)),{params:tt,parentRecord:St,hidden:lt}}function N(){return(0,Z.MM)()}function t(){return(0,F._$)()}var B=e(76314),X=e(20046);function V(We){var tt=(0,X.s)(We),St=tt.params,Tt=tt.parseVariableLoading,lt;return We.association&&(lt=(0,m._)(We.association)),{params:St,parentRecord:lt,parseVariableLoading:Tt}}function U(We){var tt;return We.association&&(tt=(0,m._)(We.association)),{parentRecord:tt}}function D(){}var ne=e(31463),q=e(23639),J=e(44112),Y=e(90297),P=function(tt){return(0,E.jsx)(Y.Mf,y()({initializer:!1},tt))};function w(){}function ie(){}function G(){return(0,F._$)()}var le=e(15079),xe=function(){(0,le.K)()},_e=e(62954),Ee=e(35964),ze=e(80844),Se=e(15503),se=e(29250),me=e(85667),pe=e(84327),ee=e(96486),ue=e(4511),ge=e(29124),Ie=e(21143),Ae=e(67668),Le=function(tt,St,Tt){(0,me.untracked)(function(){tt[St]===void 0&&(tt[St]=Tt)})},Te=function(tt,St,Tt){typeof St.required>"u"&&(tt.required=!!Tt.required)},je=function(tt){var St,Tt,lt,ut,nt=(0,_e.eJW)(),Je=(0,ze.useField)(),hn=(0,ze.useFieldSchema)(),mn=(0,Ie.useCollectionManager_deprecated)(),vn=mn.getInterface,an=(0,Ae.Hy)(),fn=an.uiSchema,cn=an.defaultValue,_n=an.interface,zt=(0,ge.SF)(),xn=zt.isAllowToSetDefaultValue,Qt=vn(_n),Et=(Qt==null||(St=Qt.filterable)===null||St===void 0||(St=St.operators)===null||St===void 0?void 0:St.find(function(Jn,Zn){return Jn.value===(hn==null?void 0:hn["x-filter-operator"])}))||(Qt==null||(Tt=Qt.filterable)===null||Tt===void 0||(Tt=Tt.operators)===null||Tt===void 0?void 0:Tt[0]),en=(0,_e.Cor)((Et==null||(lt=Et.schema)===null||lt===void 0?void 0:lt["x-component"])||((ut=hn["x-component-props"])===null||ut===void 0?void 0:ut.component)||(fn==null?void 0:fn["x-component"])||"Input"),Rn=(0,F.bz)(),An=(0,Se.M)(fn==null?void 0:fn["x-use-component-props"],tt);return(0,o.useEffect)(function(){var Jn;if(fn){var Zn=nt(fn);if(Le(Je,"content",Zn["x-content"]),Le(Je,"title",Zn.title),Le(Je,"description",Zn.description),Rn!=null&&Rn.form){var rr=xn()?hn.default||cn:void 0;rr!=null&&Le(Je,"initialValue",rr)}if(!Je.validator&&(Zn["x-validator"]||hn["x-validator"])){var mr=(0,ee.concat)([],Zn["x-validator"]||[],hn["x-validator"]||[]);Je.validator=mr}hn["x-disabled"]===!0&&(Je.disabled=!0),hn["x-read-pretty"]===!0&&(Je.readPretty=!0),Te(Je,hn,Zn),Je.dataSource=Zn.enum;var Er=nt(y()(y()({},(Et==null||(Jn=Et.schema)===null||Jn===void 0?void 0:Jn["x-component-props"])||{}),Zn["x-component-props"]||{}))||{};Je.componentProps=(0,pe.merge)(Er,Je.componentProps||{},An||{})}},[fn]),fn?(0,E.jsx)(en,y()(y()({},tt),An)):null},Pe=(0,ze.connect)(function(We){var tt=(0,ze.useFieldSchema)(),St=(0,ze.useField)();return(0,E.jsx)(ue.SV,{FallbackComponent:_e.Hj5.Modal,onError:function(lt){return console.log(lt)},children:(0,E.jsx)(Ae.YT,{name:tt.name,children:(0,E.jsx)(je,y()({},We))})})});Pe.displayName="FilterCollectionField";var fe=(0,Se.t)(function(We){var tt=(0,ze.useFieldSchema)(),St=tt["x-filter-operators"]||{};return(0,E.jsx)(_e.G0E,{components:{CollectionField:Pe},children:(0,E.jsx)(se.H,{defaultOperators:St,children:(0,E.jsx)(_e.iNu,{value:{utc:!1},children:(0,E.jsx)(_e.N0i,{forceProps:{style:{overflowX:"auto",maxWidth:"100%",float:"right"}},children:(0,E.jsx)(Y.yT,{isAllowToSetDefaultValue:function(){return!1},children:(0,E.jsx)(F.$R,y()({name:"filter-form"},We))})})})})})}),re=e(71176),T=e(1892),ce=e(23523),be=e(78899),oe=e(10097),Re=function(tt){return(0,E.jsx)(_e.G0E,{components:{TableFieldProvider:ce.CB,TableBlockProvider:T._0,TableSelectorProvider:be.rL,FormBlockProvider:F.$R,FilterFormBlockProvider:fe,FormFieldProvider:re.$1,DetailsBlockProvider:Ee.nw,RecordLink:Z.hD,Slider:L.Z},scope:y()(y()({},oe),{},{useSourceIdFromRecord:Z.e0,useSourceIdFromParentRecord:Z.m,useParamsFromRecord:Z.MM,useFormBlockProps:F._$,useCreateFormBlockProps:H,useCreateFormBlockDecoratorProps:S,useEditFormBlockDecoratorProps:O,useEditFormBlockProps:t,useFormFieldProps:re.GK,useDetailsBlockProps:Ee.BX,useDetailsProps:f.o,useDetailsWithPaginationProps:p.t,useDetailsDecoratorProps:b.d,useDetailsWithPaginationDecoratorProps:z.e,useTableFieldProps:ce.oA,useTableBlockProps:J.G,useTableSelectorProps:be.RP,useTableBlockDecoratorProps:q.c,useListBlockDecoratorProps:U,useTableSelectorDecoratorProps:D,useCollapseBlockDecoratorProps:w,useFilterFormBlockProps:G,useFilterFormBlockDecoratorProps:ie,useGridCardBlockDecoratorProps:V,useFormItemProps:xe,useDataFormItemProps:B.Z}),children:tt.children})},Ze=function(We){j()(St,We);var tt=M()(St);function St(){return A()(this,St),tt.apply(this,arguments)}return K()(St,[{key:"load",value:function(){var Tt=g()(k()().mark(function ut(){return k()().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:this.addComponents(),this.addScopes();case 2:case"end":return Je.stop()}},ut,this)}));function lt(){return Tt.apply(this,arguments)}return lt}()},{key:"addComponents",value:function(){this.app.addComponents({TableFieldProvider:ce.CB,TableBlockProvider:T._0,TableSelectorProvider:be.rL,FormBlockProvider:F.$R,FilterFormBlockProvider:fe,FormFieldProvider:re.$1,DetailsBlockProvider:Ee.nw,RecordLink:Z.hD,BlockSchemaToolbar:Q.G,ActionSchemaToolbar:$,FormItemSchemaToolbar:x.O,CollapseItemSchemaToolbar:P,TableColumnSchemaToolbar:ne.u,Slider:L.Z})}},{key:"addScopes",value:function(){this.app.addScopes(y()(y()({},oe),{},{useSourceIdFromRecord:Z.e0,useSourceIdFromParentRecord:Z.m,useParamsFromRecord:Z.MM,useFormBlockProps:F._$,useCreateFormBlockProps:H,useCreateFormBlockDecoratorProps:S,useEditFormBlockDecoratorProps:O,useEditFormBlockProps:t,useFormFieldProps:re.GK,useDetailsBlockProps:Ee.BX,useDetailsProps:f.o,useDetailsWithPaginationProps:p.t,useDetailsDecoratorProps:b.d,useDetailsWithPaginationDecoratorProps:z.e,useTableFieldProps:ce.oA,useTableBlockProps:J.G,useTableSelectorProps:be.RP,useTableBlockDecoratorProps:q.c,useListBlockDecoratorProps:U,useTableSelectorDecoratorProps:D,useCollapseBlockDecoratorProps:w,useFilterFormBlockProps:G,useFilterFormBlockDecoratorProps:ie,useGridCardBlockDecoratorProps:V,useFormItemProps:xe,useDataFormItemProps:B.Z}))}}]),St}(a.S)},67574:function(He,ae,e){"use strict";e.d(ae,{LE:function(){return h},iJ:function(){return j},nh:function(){return M}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(67294),C=e(12174),A=e(85782),r=e(85893),K=(0,g.createContext)({historyCollections:[],refreshCH:function(){}});K.displayName="CollectionHistoryContext";var v={resource:"collectionsHistory",action:"list",params:{paginate:!1,appends:["fields"],filter:{},sort:["sort"]}},j=function(y){var L,o=(0,C.LY)(),a=(0,A.mI)(),R=o.auth.getToken()||"",E=(0,C.QT)(v,{refreshDeps:[a,R],ready:!!(a&&R)}),$=(0,g.useCallback)(i()(c()().mark(function z(){var p,b;return c()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,o.request(v);case 2:return p=x.sent,b=p.data,E.mutate(b),x.abrupt("return",(b==null?void 0:b.data)||[]);case 6:case"end":return x.stop()}},z)})),[E]),Q=(0,g.useMemo)(function(){var z;return{historyCollections:(z=E.data)===null||z===void 0?void 0:z.data,refreshCH:$}},[$,(L=E.data)===null||L===void 0?void 0:L.data]);return(0,r.jsx)(K.Provider,{value:Q,children:y.children})},h=function(y){var L=(0,g.useContext)(K),o=L.historyCollections;return(o==null?void 0:o.filter(function(a){return y.includes(a.name)}))||[]},M=function(){return(0,g.useContext)(K)}},54195:function(He,ae,e){"use strict";e.d(ae,{Fq:function(){return n},GP:function(){return j},Kk:function(){return M},T2:function(){return y}});var Z=e(97857),c=e.n(Z),k=e(67294),i=e(12174),g=e(35746),C=e(13511),A=e(67574),r=e(76896),K=e(91970),v=e(85893),j=function(o){return(0,v.jsx)(g.xw,{children:(0,v.jsx)(r.E,{children:o.children})})},h=(0,k.createContext)(!1),M=function(){return(0,k.useContext)(h)},n=function(o){var a=(0,C.fp)(),R=(0,A.nh)(),E=R.refreshCH,$=(0,i.QT)(function(){return a.reload().then(E)});return(0,v.jsx)(h.Provider,{value:$.loading,children:(0,v.jsx)(j,c()({},o))})},y=function(o){var a,R=o.service,E=o.refreshCategory,$=(0,k.useMemo)(function(){var Q;return c()({data:R==null||(Q=R.data)===null||Q===void 0?void 0:Q.data,refresh:E},o)},[R==null||(a=R.data)===null||a===void 0?void 0:a.data,E,o]);return(0,v.jsx)(K.g.Provider,{value:$,children:o.children})}},76896:function(He,ae,e){"use strict";e.d(ae,{E:function(){return j}});var Z=e(97857),c=e.n(Z),k=e(67294),i=e(21143),g=e(52028),C=e(63250),A=e(44355),r=e(40802),K=e(85893),v={SubFieldDataSourceProvider_deprecated:r.m1,DataSourceProvider_deprecated:r.PI,CollectionProvider_deprecated:g.o,ResourceActionProvider:C.pv},j=function(M){var n=(0,k.useMemo)(function(){return{cm:c()(c()({},A),{},{useDataSourceFromRAC:C.KD}),ds:r.ds}},[]);return(0,K.jsx)(i.SchemaComponentOptions,{scope:n,components:v,children:M.children})}},52028:function(He,ae,e){"use strict";e.d(ae,{o:function(){return g}});var Z=e(58837),c=e(35746),k=e(67294),i=e(85893),g=function(A){var r=A.children,K=A.allowNull,v=A.name,j=A.dataSource,h=A.collection;return j?(0,i.jsx)(c.xw,{dataSource:j,children:(0,i.jsx)(Z.YQ,{allowNull:K,name:v||h,children:r})}):(0,i.jsx)(Z.YQ,{allowNull:K,name:v||h,children:r})}},50567:function(He,ae,e){"use strict";e.d(ae,{b4:function(){return tt},F3:function(){return St},rz:function(){return Y},eD:function(){return P},WJ:function(){return Gt},hU:function(){return wn},Hr:function(){return Bn},CE:function(){return st},fe:function(){return Wt},_L:function(){return Yt},QO:function(){return nt},lz:function(){return Je},Qb:function(){return fn},g3:function(){return cn},qF:function(){return ee},b3:function(){return ue},oq:function(){return sn},Np:function(){return Ln},s9:function(){return V},kO:function(){return Ae},DF:function(){return Te},c9:function(){return t},vw:function(){return H},sc:function(){return B},Tf:function(){return en},Z9:function(){return Rn},rs:function(){return Er},YE:function(){return N},_i:function(){return X},$E:function(){return Re},JN:function(){return U},HO:function(){return O},xs:function(){return Pe},eu:function(){return fe},x8:function(){return Cn},tM:function(){return nn},jI:function(){return q},RD:function(){return Zt},aX:function(){return Nt},EB:function(){return an},d8:function(){return vn}});var Z={};e.r(Z),e.d(Z,{ForeignKey:function(){return V},SourceCollection:function(){return t},SourceForeignKey:function(){return H},SourceKey:function(){return B},TargetForeignKey:function(){return N},TargetKey:function(){return X},ThroughCollection:function(){return U},ThroughForeignKey:function(){return O}});var c=e(86201),k=e(5574),i=e.n(k),g=e(15009),C=e.n(g),A=e(99289),r=e.n(A),K=e(9783),v=e.n(K),j=e(97857),h=e.n(j),M=e(38308),n=e(5552),y=e(80844),L=e(84327),o=e(85418),a=e(15867),R=e(96486),E=e(67294),$=e(26793),Q=e(12174),z=e(36586),p=e(62954),b=e(63250),f=e(44355),x=e(29796),m=e(80347),F=function(){var De=(0,m._S)()||{data:{database:{}}},Ce=De.data.database,Oe=function(Ne){return(Ce==null?void 0:Ce.dialect)===Ne};return{isDialect:Oe,dialect:Ce==null?void 0:Ce.dialect}},I=F,d=e(34041),u=e(49288),l=e(85893),S=["string","bigInt","integer","uuid","uid","nanoid"],H=(0,y.observer)(function(){var Ke=(0,z.a)(),De=(0,x.Bu)(),Ce=De.getCollection,Oe=Ke!=null&&Ke.collectionName?Ce(Ke.collectionName):Ke,Fe=(0,y.useField)(),Ne=(0,y.useForm)(),Xe=(0,x.Bu)(),dt=Xe.getCollectionFields;return(0,l.jsx)("div",{children:(0,l.jsx)(d.default,{allowClear:!0,placeholder:"\u7559\u7A7A\u65F6\uFF0C\u81EA\u52A8\u751F\u6210 FK \u5B57\u6BB5",disabled:Fe.disabled,value:Fe.value,options:dt(Oe.name).filter(function(ht){return ht.type}).map(function(ht){var xt;return{label:(ht==null||(xt=ht.uiSchema)===null||xt===void 0?void 0:xt.title)||ht.name,value:ht.name}})})})},{displayName:"SourceForeignKey"}),O=(0,y.observer)(function(){var Ke=(0,y.useField)(),De=(0,y.useForm)(),Ce=(0,x.Bu)(),Oe=Ce.getCollectionFields;return(0,l.jsx)("div",{children:(0,l.jsx)(d.default,{allowClear:!0,popupMatchSelectWidth:!1,placeholder:"\u7559\u7A7A\u65F6\uFF0C\u81EA\u52A8\u751F\u6210 FK \u5B57\u6BB5",disabled:Ke.disabled,value:Ke.value,options:Oe(De.values.through).filter(function(Fe){return Fe.type}).map(function(Fe){var Ne;return{label:(Fe==null||(Ne=Fe.uiSchema)===null||Ne===void 0?void 0:Ne.title)||Fe.name,value:Fe.name}})})})},{displayName:"ThroughForeignKey"}),N=(0,y.observer)(function(){var Ke=(0,y.useField)(),De=(0,y.useForm)(),Ce=(0,x.Bu)(),Oe=Ce.getCollectionFields;return(0,l.jsx)("div",{children:(0,l.jsx)(d.default,{allowClear:!0,popupMatchSelectWidth:!1,placeholder:"\u7559\u7A7A\u65F6\uFF0C\u81EA\u52A8\u751F\u6210 FK \u5B57\u6BB5",disabled:Ke.disabled,value:Ke.value,options:Oe(De.values.target).filter(function(Fe){return Fe.type}).map(function(Fe){var Ne;return{label:(Fe==null||(Ne=Fe.uiSchema)===null||Ne===void 0?void 0:Ne.title)||Fe.name,value:Fe.name}})})})},{displayName:"TargetForeignKey"}),t=(0,y.observer)(function(){var Ke=(0,z.a)(),De=(0,x.Bu)(),Ce=De.getCollection,Oe=Ke!=null&&Ke.collectionName?Ce(Ke.collectionName):Ke,Fe=(0,p.eJW)();return(0,l.jsx)("div",{children:(0,l.jsx)(d.default,{disabled:!0,popupMatchSelectWidth:!1,value:Oe.name,options:[{value:Oe.name,label:Fe(Oe.title)}]})})},{displayName:"SourceCollection"}),B=(0,y.observer)(function(Ke){var De,Ce,Oe=(0,z.a)(),Fe=Oe.sourceKey,Ne=Oe.collectionName,Xe=Oe.name,dt=(0,x.Bu)(),ht=dt.getCollection,xt=(0,y.useField)(),Ct=(0,p.eJW)(),Dt=(De=ht(Ne||Xe).fields)===null||De===void 0?void 0:De.filter(function(Vt){return Vt.primaryKey||Vt.unique}).map(function(Vt){var Ht;return{value:Vt.name,label:Ct(((Ht=Vt.uiSchema)===null||Ht===void 0?void 0:Ht.title)||Vt.name)}});return(0,E.useEffect)(function(){var Vt;xt.initialValue=(Dt==null||(Vt=Dt[0])===null||Vt===void 0?void 0:Vt.value)||Fe},[]),(0,l.jsx)("div",{children:(0,l.jsx)(d.default,{disabled:Fe,options:Dt,defaultValue:Fe||(Dt==null||(Ce=Dt[0])===null||Ce===void 0?void 0:Ce.value),onChange:Ke==null?void 0:Ke.onChange,showSearch:!0,filterOption:function(Ht,Ut){return Ut==null?void 0:Ut.label.toLowerCase().includes(Ht.toLowerCase())}})})},{displayName:"SourceKey"}),X=(0,y.observer)(function(Ke){var De=Ke.value,Ce=Ke.disabled,Oe=(0,z.a)(),Fe=Oe.targetKey,Ne=Oe.target,Xe=Oe.type,dt=(0,x.Bu)(),ht=dt.getCollection,xt=(0,E.useState)([]),Ct=i()(xt,2),Dt=Ct[0],Vt=Ct[1],Ht=(0,E.useState)(De||Fe),Ut=i()(Ht,2),wt=Ut[0],ot=Ut[1],qe=(0,y.useForm)(),Be=(0,p.eJW)(),rt=(0,y.useField)();return rt.required=!0,(0,E.useEffect)(function(){if(Ne){var Ve;Vt((Ve=ht(Ne).fields)===null||Ve===void 0?void 0:Ve.filter(function($e){return $e.primaryKey||$e.unique?!0:Xe==="hasMany"&&S.includes($e.type)}).map(function($e){var it;return{value:$e.name,label:Be(($e==null||(it=$e.uiSchema)===null||it===void 0?void 0:it.title)||$e.title||$e.name)}}))}},[]),(0,l.jsx)("div",{children:(0,l.jsx)(d.default,{showSearch:!0,options:Dt,onDropdownVisibleChange:function(){var Ve=r()(C()().mark(function $e(it){var Pt,Lt,$t,$n;return C()().wrap(function(un){for(;;)switch(un.prev=un.next){case 0:Pt=qe.values,Lt=Pt.target,$t=Pt.type,Lt&&it&&Vt(($n=ht(Lt).fields)===null||$n===void 0?void 0:$n.filter(function(Xn){return Xn.primaryKey||Xn.unique?!0:$t==="hasMany"&&S.includes(Xn.type)}).map(function(Xn){var Yn;return{value:Xn.name,label:Be((Xn==null||(Yn=Xn.uiSchema)===null||Yn===void 0?void 0:Yn.title)||Xn.title||Xn.name)}}));case 2:case"end":return un.stop()}},$e)}));return function($e){return Ve.apply(this,arguments)}}(),onChange:function($e){var it;Ke==null||(it=Ke.onChange)===null||it===void 0||it.call(Ke,$e),ot($e)},value:wt,disabled:Ce,filterOption:function($e,it){return it==null?void 0:it.label.toLowerCase().includes($e.toLowerCase())}})})},{displayName:"TargetKey"}),V=(0,y.observer)(function(Ke){var De=Ke.disabled,Ce=(0,E.useState)([]),Oe=i()(Ce,2),Fe=Oe[0],Ne=Oe[1],Xe=(0,x.Bu)(),dt=Xe.getCollection,ht=(0,z.a)(),xt=(0,y.useField)(),Ct=ht.collectionName,Dt=ht.target,Vt=ht.type,Ht=ht.through,Ut=ht.name,wt=ht.template,ot=ht[xt.props.name],qe=(0,p.eJW)(),Be=(0,y.useForm)(),rt=(0,E.useState)(ot||(wt==="view"?null:xt.initialValue)),Ve=i()(rt,2),$e=Ve[0],it=Ve[1],Pt=(0,E.useState)([]),Lt=i()(Pt,2),$t=Lt[0],$n=Lt[1];(0,E.useEffect)(function(){var un,Xn=["belongsTo"].includes(Vt)?Ct:["belongsToMany"].includes(Vt)?Ht:Dt,Yn=(un=dt(Xn))===null||un===void 0?void 0:un.fields;if(Yn){var jn=Yn==null?void 0:Yn.filter(function(fr){return S.includes(fr.type)}).map(function(fr){var Ar;return{value:fr.name,label:qe(((Ar=fr.uiSchema)===null||Ar===void 0?void 0:Ar.title)||fr.name)}});if(Ne(jn),$n(jn),ot){var ir=jn.find(function(fr){return fr.value===ot});it((ir==null?void 0:ir.label)||ot)}}},[Vt]);var pn=wt==="view"?d.default:u.Z;return(0,l.jsx)("div",{children:(0,l.jsx)(pn,{disabled:De,value:$e,options:Fe,showSearch:!0,onDropdownVisibleChange:function(){var un=r()(C()().mark(function Xn(Yn){var jn,ir,fr,Ar,wr,Kr,ao;return C()().wrap(function(_r){for(;;)switch(_r.prev=_r.next){case 0:jn=Be.values,ir=jn.target,fr=jn.type,Ar=jn.through,wr=["belongsTo"].includes(fr)?Ct||Ut:["belongsToMany"].includes(fr)?Ar:ir,wr&&Yn&&(ao=((Kr=dt(wr))===null||Kr===void 0?void 0:Kr.fields)||[],Ne(ao==null?void 0:ao.filter(function(Rr){return S.includes(Rr.type)}).map(function(Rr){var Hr;return{value:Rr.name,label:qe(((Hr=Rr.uiSchema)===null||Hr===void 0?void 0:Hr.title)||Rr.name)}})));case 3:case"end":return _r.stop()}},Xn)}));return function(Xn){return un.apply(this,arguments)}}(),onChange:function(Xn,Yn){var jn;Ke==null||(jn=Ke.onChange)===null||jn===void 0||jn.call(Ke,Xn),it(Yn.label||Xn)},onSearch:function(Xn){if(Xn){var Yn=Xn.toLocaleLowerCase(),jn=Fe.filter(function(ir){return ir.label.toLocaleLowerCase().includes(Yn)});Ne(jn)}else Ne($t)}})})},{displayName:"ForeignKey"}),U=(0,y.observer)(function(Ke){var De=Ke.disabled,Ce=(0,p.eJW)(),Oe=(0,x.Bu)(),Fe=Oe.getCollections,Ne=(0,E.useState)([]),Xe=i()(Ne,2),dt=Xe[0],ht=Xe[1],xt=(0,y.useField)(),Ct=(0,z.a)(),Dt=Ct[xt.props.name],Vt=(0,E.useState)(Dt||xt.initialValue),Ht=i()(Vt,2),Ut=Ht[0],wt=Ht[1],ot=function(){var rt=Fe().filter(function(Ve){var $e=Ve.autoCreate&&Ve.isThrough;return!$e});return rt.map(function(Ve){return{label:Ce(Ve.title),value:Ve.name}})};(0,E.useEffect)(function(){var Be=ot();if(ht(Be),Dt){var rt=Be.find(function(Ve){return Ve.value===Dt});wt((rt==null?void 0:rt.label)||Dt)}},[]);var qe=function(rt){var Ve=ot();if(rt){var $e=Ve.filter(function(it){return it.label.toLowerCase().includes(rt.toLowerCase())});ht($e)}else ht(Ve)};return(0,l.jsx)("div",{children:(0,l.jsx)(u.Z,{disabled:De,showSearch:!0,popupMatchSelectWidth:!1,value:Ut,options:dt,onSearch:qe,onChange:function(rt,Ve){var $e;Ke==null||($e=Ke.onChange)===null||$e===void 0||$e.call(Ke,rt),wt(Ve.label||rt)}})})},{displayName:"ThroughCollection"}),D=e(47047),ne=function(De,Ce,Oe){if(De){var Fe=De.getConfigureFormProperties(),Ne=h()(h()({name:"f_".concat((0,L.uid)())},(0,R.cloneDeep)(De.default)),{},{interface:De.name});return Ne.reverseField&&(Ne.reverseField.name="f_".concat((0,L.uid)())),{type:"object",properties:v()({},(0,L.uid)(),{type:"void","x-component":"Action.Drawer","x-component-props":{getContainer:"{{ getContainer }}"},"x-decorator":"Form","x-decorator-props":{useValues:function(dt){return(0,Q.QT)(function(){return Promise.resolve({data:Ne})},dt)}},title:"".concat(Oe(Ce.title)," - ").concat(Oe('{{ t("Add field") }}')),properties:h()(h()({summary:{type:"void","x-component":"FieldSummary","x-component-props":{schemaKey:De.name}}},Fe),{},{description:{type:"string",title:'{{t("Description")}}',"x-decorator":"FormItem","x-component":"Input.TextArea"},footer:{type:"void","x-component":"Action.Drawer.Footer",properties:{action1:{title:'{{ t("Cancel") }}',"x-component":"Action","x-component-props":{useAction:"{{ useCancelAction }}"}},action2:{title:'{{ t("Submit") }}',"x-component":"Action","x-component-props":{type:"primary",useAction:"{{ useCreateCollectionField }}"}}}}})})}}},q=function(){var De=(0,y.useForm)();return{getValues:function(){var Oe=(0,R.cloneDeep)(De.values);return Oe.autoCreateReverseField||delete Oe.reverseField,delete Oe.autoCreateReverseField,Oe}}},J=function(){var De=(0,y.useForm)(),Ce=(0,x.Bu)(),Oe=Ce.refreshCM,Fe=(0,p.XCj)(),Ne=(0,b.u3)(),Xe=Ne.refresh,dt=(0,b.eS)(),ht=dt.resource,xt=(0,y.useField)();return{run:function(){return r()(C()().mark(function Dt(){var Vt;return C()().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return Ut.next=2,De.submit();case 2:return xt.data=xt.data||{},xt.data.loading=!0,Vt=(0,R.cloneDeep)(De.values),Vt.autoCreateReverseField||delete Vt.reverseField,delete Vt.autoCreateReverseField,Ut.prev=7,Ut.next=10,ht.create({values:Vt});case 10:return Fe.setVisible(!1),Ut.next=13,De.reset();case 13:return xt.data.loading=!1,Xe(),Ut.next=17,Oe();case 17:Ut.next=22;break;case 19:Ut.prev=19,Ut.t0=Ut.catch(7),xt.data.loading=!1;case 22:case"end":return Ut.stop()}},Dt,null,[[7,19]])}))()}}},Y=function(De){var Ce=(0,z.a)();return(0,l.jsx)(P,h()({item:Ce},De))},P=function(De){var Ce,Oe=De.scope,Fe=De.getContainer,Ne=De.item,Xe=De.children,dt=De.trigger,ht=De.align,xt=De.database,Ct=(0,x.Bu)(),Dt=Ct.getInterface,Vt=Ct.getTemplate,Ht=Ct.collections,Ut=Ct.getCollection,wt=(0,E.useState)(!1),ot=i()(wt,2),qe=ot[0],Be=ot[1],rt=(0,E.useState)(),Ve=i()(rt,2),$e=Ve[0],it=Ve[1],Pt=(0,E.useState)({}),Lt=i()(Pt,2),$t=Lt[0],$n=Lt[1],pn=(0,p.eJW)(),un=(0,$.$)(),Xn=un.t,Yn=I(),jn=Yn.isDialect,ir=(0,D.r)(),fr=((Ce=Ut(Ne.name))===null||Ce===void 0||(Ce=Ce.options)===null||Ce===void 0?void 0:Ce.fields)||Ne.fields||[],Ar=(0,E.useMemo)(function(){return Ht.map(function(_r){return{label:pn(_r.title),value:_r.name}})},[]),wr=(0,E.useCallback)(function(){var _r=Vt(Ne.template)||{},Rr=_r.availableFieldInterfaces,Hr=Rr||{},Yr=Hr.exclude,eo=Hr.include,ho=[];return ir.forEach(function(co){if(co.key==="systemInfo")ho.push(h()(h()({},co),{},{children:co.children.filter(function(Gr){return Gr.hidden?!1:Gr.value==="tableoid"?eo!=null&&eo.length?eo.includes(Gr.value):(xt==null?void 0:xt.dialect)==="postgres":typeof Ne[Gr.value]=="boolean"?Ne[Gr.value]:!0})}));else{var po,Wo=[];if(eo!=null&&eo.length)eo.forEach(function(Gr){var to,lo=co==null||(to=co.children)===null||to===void 0?void 0:to.find(function(mo){return[Gr,Gr.interface].includes(mo.name)});lo&&Wo.push(h()(h()({},lo),{},{targetScope:Gr==null?void 0:Gr.targetScope}))});else if(Yr!=null&&Yr.length){var Vr;Wo=co==null||(Vr=co.children)===null||Vr===void 0?void 0:Vr.filter(function(Gr){return!Yr.includes(Gr.name)})}else Wo=co==null?void 0:co.children;!((po=Wo)===null||po===void 0)&&po.length&&ho.push(h()(h()({},co),{},{children:Wo}))}}),ho},[Vt,Ne]),Kr=(0,E.useMemo)(function(){return wr().map(function(_r){var Rr;return(_r==null||(Rr=_r.children)===null||Rr===void 0?void 0:Rr.length)===0?null:Ne.template==="view"?{type:"group",label:pn(_r.label),title:pn(_r.label),key:_r.label,children:_r.children.filter(function(Hr){return["m2o"].includes(Hr.name)}).map(function(Hr){return{label:pn(Hr.title),title:pn(Hr.title),key:Hr.name,dataTargetScope:Hr.targetScope}})}:{type:"group",label:pn(_r.label),title:pn(_r.label),key:_r.label,children:_r==null?void 0:_r.children.filter(function(Hr){return!["o2o","subTable","linkTo"].includes(Hr.name)}).map(function(Hr){return{label:pn(Hr.title),title:pn(Hr.title),key:Hr.name,dataTargetScope:Hr.targetScope}})}}).filter(function(_r){var Rr;return _r==null||(Rr=_r.children)===null||Rr===void 0?void 0:Rr.length})},[wr]),ao=(0,E.useMemo)(function(){return{style:{maxHeight:"60vh",overflow:"auto"},onClick:function(Rr){var Hr=Rr.item.props["data-targetScope"];Hr&&it(Hr);var Yr=ne(Dt(Rr.key),Ne,pn);Yr&&($n(Yr),Be(!0))},items:Kr}},[Dt,Kr,Ne]),Qr=(0,E.useMemo)(function(){return fr.filter(function(_r){return["string","bigInt","integer"].includes(_r.type)}).map(function(_r){var Rr;return{value:_r.name,label:pn((Rr=_r.uiSchema)===null||Rr===void 0?void 0:Rr.title)}})},[fr==null?void 0:fr.length]);return Ne.template!=="sql"&&(0,l.jsx)(z.HV,{record:Ne,children:(0,l.jsxs)(p.EIK,{value:{visible:qe,setVisible:Be},children:[(0,l.jsx)(o.Z,{getPopupContainer:Fe,trigger:dt,align:ht,menu:ao,children:Xe||(0,l.jsx)(a.ZP,{icon:(0,l.jsx)(M.Z,{}),type:"primary",children:Xn("Add field")})}),(0,l.jsx)(p.n6,{schema:$t,distributed:!1,components:h()(h()({},Z),{},{ArrayTable:n.ArrayTable}),scope:h()({getContainer:Fe,useCancelAction:f.useCancelAction,createOnly:!0,isOverride:!1,override:!1,useCreateCollectionField:J,record:Ne,showReverseFieldConfig:!0,targetScope:$e,collections:Ar,isDialect:jn,disabledJSONB:!1,scopeKeyOptions:Qr,createMainOnly:!0,editMainOnly:!0},Oe)})]})})},w=e(13769),ie=e.n(w),G=e(50361),le=e.n(G),xe=e(57557),_e=e.n(xe),Ee=e(36968),ze=e.n(Ee),Se=e(49834),se=["scope","getContainer","item","parentItem","children"],me=function(De,Ce,Oe,Fe,Ne){var Xe;if(De){var dt=De.getConfigureFormProperties();return dt!=null&&dt.name&&(dt.name["x-disabled"]=!0),{type:"object",properties:v()({},(0,L.uid)(),{type:"void","x-component":"Action.Drawer","x-component-props":{getContainer:"{{ getContainer }}"},"x-decorator":"Form","x-decorator-props":{useValues:function(xt){return(0,Q.QT)(function(){return Promise.resolve({data:le()(_e()(Ce,["uiSchema.rawTitle"]))})},xt)}},title:"".concat(Fe((Xe=Oe.__parent)===null||Xe===void 0?void 0:Xe.title)," - ").concat(Fe('{{ t("Edit field") }}')),properties:h()(h()({summary:{type:"void","x-component":"FieldSummary","x-component-props":{schemaKey:De.name}}},dt),{},{description:{type:"string",title:'{{t("Description")}}',"x-decorator":"FormItem","x-component":"Input.TextArea"},footer:{type:"void","x-component":"Action.Drawer.Footer",properties:{action1:{title:'{{ t("Cancel") }}',"x-component":"Action","x-component-props":{useAction:"{{ useCancelAction }}"}},action2:{title:'{{ t("Submit") }}',"x-component":"Action","x-component-props":{type:"primary",useAction:"{{ useUpdateCollectionField }}"}}}}})})}}},pe=function(){var De=(0,y.useForm)(),Ce=(0,x.Bu)(),Oe=Ce.refreshCM,Fe=(0,p.XCj)(),Ne=(0,b.u3)(),Xe=Ne.refresh,dt=(0,b.eS)(),ht=dt.resource,xt=dt.targetKey,Ct=(0,z.a)(),Dt=Ct[xt];return{run:function(){return r()(C()().mark(function Ht(){var Ut;return C()().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return ot.next=2,De.submit();case 2:return Ut=le()(De.values),Ut.autoCreateReverseField||delete Ut.reverseField,delete Ut.autoCreateReverseField,ot.next=7,ht.update({filterByTk:Dt,values:Ut});case 7:return Fe.setVisible(!1),ot.next=10,De.reset();case 10:return Xe(),ot.next=13,Oe();case 13:case"end":return ot.stop()}},Ht)}))()}}},ee=function(De){var Ce=(0,z.a)(),Oe=(0,Se.Kv)();return(0,l.jsx)(ue,h()({item:Ce,parentItem:Oe},De))},ue=function(De){var Ce=De.scope,Oe=De.getContainer,Fe=De.item,Ne=De.parentItem,Xe=De.children,dt=ie()(De,se),ht=(0,x.Bu)(),xt=ht.getInterface,Ct=ht.collections,Dt=ht.getCollection,Vt=(0,E.useState)(!1),Ht=i()(Vt,2),Ut=Ht[0],wt=Ht[1],ot=(0,E.useState)({}),qe=i()(ot,2),Be=qe[0],rt=qe[1],Ve=(0,Q.LY)(),$e=(0,$.$)(),it=$e.t,Pt=(0,p.eJW)(),Lt=(0,E.useState)({}),$t=i()(Lt,2),$n=$t[0],pn=$t[1],un=I(),Xn=un.isDialect,Yn=Ne||{},jn=Yn.template,ir=(0,E.useMemo)(function(){var Ar;return(Fe==null?void 0:Fe.fields)||((Ar=Dt(Fe.collectionName))===null||Ar===void 0?void 0:Ar.options.fields.filter(function(wr){return["string","bigInt","integer"].includes(wr.type)}).map(function(wr){var Kr;return{value:wr.name,label:Pt((Kr=wr.uiSchema)===null||Kr===void 0?void 0:Kr.title)}}))},[Fe.name]),fr=(0,E.useMemo)(function(){return Ct.map(function(Ar){return{label:Pt(Ar.title),value:Ar.name}})},[]);return(0,l.jsx)(z.HV,{record:Fe,parent:Ne,children:(0,l.jsxs)(p.EIK,{value:{visible:Ut,setVisible:wt},children:[(0,l.jsx)("a",h()(h()({},dt),{},{onClick:r()(C()().mark(function Ar(){var wr,Kr,ao,Qr,_r,Rr,Hr;return C()().wrap(function(eo){for(;;)switch(eo.prev=eo.next){case 0:return eo.next=2,Ve.resource("collections.fields",Fe.collectionName).get({filterByTk:Fe.name,appends:["reverseField"]});case 2:wr=eo.sent,Kr=wr.data,pn(Kr==null?void 0:Kr.data),ao=xt(Fe.interface),Qr=le()(Kr==null?void 0:Kr.data)||{},Qr!=null&&Qr.reverseField||(Qr.autoCreateReverseField=!1,Qr.reverseField=ao==null||(_r=ao.default)===null||_r===void 0?void 0:_r.reverseField,ze()(Qr.reverseField,"name","f_".concat((0,L.uid)())),ze()(Qr.reverseField,"uiSchema.title",(Rr=Fe.__parent)===null||Rr===void 0?void 0:Rr.title)),Hr=me(ao,Qr,Fe,Pt,Oe),rt(Hr),wt(!0);case 11:case"end":return eo.stop()}},Ar)})),children:Xe||it("Edit")})),(0,l.jsx)(p.n6,{schema:Be,distributed:!1,components:h()(h()({},Z),{},{ArrayTable:n.ArrayTable}),scope:h()({getContainer:Oe,useUpdateCollectionField:pe,useCancelAction:f.useCancelAction,showReverseFieldConfig:!($n!=null&&$n.reverseField),collections:fr,isDialect:Xn,disabledJSONB:!0,scopeKeyOptions:ir,createMainOnly:!1},Ce)})]})})},ge=e(94804),Ie=function(De,Ce,Oe,Fe){var Ne;if(De){var Xe=le()(De.properties);return Xe.name["x-disabled"]=!0,De.hasDefaultValue===!0&&(Xe.defaultValue=le()(De.default.uiSchema),Xe.defaultValue.title=Oe('{{ t("Default value") }}'),Xe.defaultValue["x-decorator"]="FormItem"),{type:"object",properties:v()({},(0,L.uid)(),{type:"void","x-component":"Action.Drawer","x-decorator":"Form","x-decorator-props":{useValues:function(ht){return(0,Q.QT)(function(){return Promise.resolve({data:le()(De.default)})},ht)}},title:"".concat(Oe((Ne=Ce.__parent)===null||Ne===void 0?void 0:Ne.title)," - ").concat(Oe('{{ t("Override field") }}')),properties:h()(h()({summary:{type:"void","x-component":"FieldSummary","x-component-props":{schemaKey:De.name}}},Xe),{},{description:{type:"string",title:'{{t("Description")}}',"x-decorator":"FormItem","x-component":"Input.TextArea"},footer:{type:"void","x-component":"Action.Drawer.Footer",properties:{action1:{title:'{{ t("Cancel") }}',"x-component":"Action","x-component-props":{useAction:"{{ useCancelAction }}"}},action2:{title:'{{ t("Submit") }}',"x-component":"Action","x-component-props":{type:"primary",useAction:"{{ useOverridingCollectionField }}"}}}}})})}}},Ae=function(De){var Ce=(0,z.a)(),Oe=(0,ge.Kv)();return(0,l.jsx)(Te,h()({item:Ce,parentItem:Oe},De))},Le=function(De,Ce,Oe){var Fe=Ce.find(function(Ne){return Ne.name===Oe.name});return Fe.collectionName===De},Te=function(De){var Ce=De.scope,Oe=De.getContainer,Fe=De.item,Ne=De.parentItem,Xe=De.children,dt=De.currentCollection,ht=Fe.target,xt=Fe.through,Ct=(0,x.Bu)(),Dt=Ct.getInterface,Vt=Ct.getCollection,Ht=Ct.getCurrentCollectionFields,Ut=Ct.getChildrenCollections,wt=Ct.collections,ot=(0,E.useState)(!1),qe=i()(ot,2),Be=qe[0],rt=qe[1],Ve=(0,E.useState)({}),$e=i()(Ve,2),it=$e[0],Pt=$e[1],Lt=(0,Q.LY)(),$t=(0,$.$)(),$n=$t.t,pn=(0,p.eJW)(),un=function(_r){var Rr,Hr=_r&&((Rr=Ut(_r))===null||Rr===void 0?void 0:Rr.map(function(Yr){return Yr.name}).concat([_r]));return Hr},Xn=(0,E.useState)({}),Yn=i()(Xn,2),jn=Yn[0],ir=Yn[1],fr=Ht(dt),Ar=Le(dt,fr,Fe),wr=(0,E.useMemo)(function(){return wt.map(function(Qr){return{label:pn(Qr.title),value:Qr.name}})},[]),Kr=function(){var _r=(0,y.useForm)(),Rr=(0,b.u3)(),Hr=Rr.refresh,Yr=(0,x.Bu)(),eo=Yr.refreshCM,ho=(0,p.XCj)(),co=(0,b.eS)(),po=co.resource;return{run:function(){return r()(C()().mark(function Vr(){var Gr,to;return C()().wrap(function(mo){for(;;)switch(mo.prev=mo.next){case 0:return mo.next=2,_r.submit();case 2:return Gr=le()(_r.values),to=(0,R.omit)(Gr,["key","uiSchemaUid","collectionName","autoCreateReverseField","uiSchema.x-uid","reverseField","reverseKey","parentKey"]),mo.next=6,po.create({values:to});case 6:return mo.next=8,_r.reset();case 8:return mo.next=10,eo();case 10:return mo.next=12,Hr();case 12:ho.setVisible(!1);case 13:case"end":return mo.stop()}},Vr)}))()}}},ao=(0,E.useMemo)(function(){var Qr;return(Fe==null?void 0:Fe.fields)||((Qr=Vt(Fe.collectionName))===null||Qr===void 0?void 0:Qr.options.fields.filter(function(_r){return["string","bigInt","integer"].includes(_r.type)}).map(function(_r){var Rr;return{value:_r.name,label:pn((Rr=_r.uiSchema)===null||Rr===void 0?void 0:Rr.title)}}))},[Fe.name]);return(0,l.jsx)(z.HV,{record:h()(h()({},Fe),{},{collectionName:Ne.name}),parent:Ne,children:(0,l.jsxs)(p.EIK,{value:{visible:Be,setVisible:rt},children:[(0,l.jsx)("a",{disabled:Ar,onClick:r()(C()().mark(function Qr(){var _r,Rr,Hr,Yr,eo,ho;return C()().wrap(function(po){for(;;)switch(po.prev=po.next){case 0:if(Ar){po.next=12;break}return po.next=3,Lt.resource("collections.fields",Fe.collectionName).get({filterByTk:Fe.name,appends:["reverseField"]});case 3:_r=po.sent,Rr=_r.data,ir(Rr==null?void 0:Rr.data),Hr=Dt(Fe.interface),Yr=le()(Rr==null?void 0:Rr.data)||{},Yr!=null&&Yr.reverseField||(Yr.autoCreateReverseField=!1,Yr.reverseField=(eo=Hr.default)===null||eo===void 0?void 0:eo.reverseField,(0,R.set)(Yr.reverseField,"name","f_".concat((0,L.uid)())),(0,R.set)(Yr.reverseField,"uiSchema.title",Fe.__parent.title)),ho=Ie(h()(h()({},Hr),{},{default:Yr}),Fe,pn,Oe),Pt(ho),rt(!0);case 12:case"end":return po.stop()}},Qr)})),children:Xe||$n("Override")}),(0,l.jsx)(p.n6,{schema:it,components:h()(h()({},Z),{},{ArrayTable:n.ArrayTable}),scope:h()({getContainer:Oe,useOverridingCollectionField:Kr,useCancelAction:f.useCancelAction,showReverseFieldConfig:!(jn!=null&&jn.reverseField),createOnly:!0,override:!0,isOverride:!0,targetScope:{target:un(ht),through:un(xt)},collections:wr,scopeKeyOptions:ao},Ce)})]})})},je=function(De,Ce,Oe,Fe){var Ne;if(De){var Xe=le()(De.properties);return Xe.name["x-disabled"]=!0,De.hasDefaultValue===!0&&(Xe.defaultValue=le()(De.default.uiSchema),Xe.defaultValue.title=Oe('{{ t("Default value") }}'),Xe.defaultValue["x-decorator"]="FormItem"),{type:"object",properties:v()({},(0,L.uid)(),{type:"void","x-component":"Action.Drawer","x-component-props":{getContainer:"{{ getContainer }}"},"x-decorator":"Form","x-decorator-props":{useValues:function(ht){return(0,Q.QT)(function(){return Promise.resolve({data:le()(De.default)})},ht)}},title:"".concat(Oe((Ne=Ce.__parent)===null||Ne===void 0?void 0:Ne.title)," - ").concat(Oe('{{ t("View") }}')),properties:h()(h()({summary:{type:"void","x-component":"FieldSummary","x-component-props":{schemaKey:De.name}}},Xe),{},{description:{type:"string",title:'{{t("Description")}}',"x-decorator":"FormItem","x-component":"Input.TextArea"}})})}}},Pe=function(De){var Ce=(0,z.a)(),Oe=(0,ge.Kv)();return(0,l.jsx)(fe,h()({item:Ce,parentItem:Oe},De))},fe=function(De){var Ce=De.scope,Oe=De.getContainer,Fe=De.item,Ne=De.parentItem,Xe=De.children,dt=(0,x.Bu)(),ht=dt.getInterface,xt=dt.collections,Ct=(0,E.useState)(!1),Dt=i()(Ct,2),Vt=Dt[0],Ht=Dt[1],Ut=(0,E.useState)({}),wt=i()(Ut,2),ot=wt[0],qe=wt[1],Be=(0,Q.LY)(),rt=(0,$.$)(),Ve=rt.t,$e=(0,p.eJW)(),it=(0,E.useState)({}),Pt=i()(it,2),Lt=Pt[0],$t=Pt[1],$n=(0,E.useMemo)(function(){return xt.map(function(pn){return{label:$e(pn.title),value:pn.name}})},[]);return(0,l.jsx)(z.HV,{record:Fe,parent:Ne,children:(0,l.jsxs)(p.EIK,{value:{visible:Vt,setVisible:Ht},children:[(0,l.jsx)("a",{onClick:r()(C()().mark(function pn(){var un,Xn,Yn,jn,ir,fr;return C()().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return wr.next=2,Be.resource("collections.fields",Fe.collectionName).get({filterByTk:Fe.name,appends:["reverseField"]});case 2:un=wr.sent,Xn=un.data,$t(Xn==null?void 0:Xn.data),Yn=ht(Fe.interface),jn=le()(Xn==null?void 0:Xn.data)||{},jn!=null&&jn.reverseField||(jn.autoCreateReverseField=!1,jn.reverseField=(ir=Yn.default)===null||ir===void 0?void 0:ir.reverseField,ze()(jn.reverseField,"name","f_".concat((0,L.uid)())),ze()(jn.reverseField,"uiSchema.title",Fe.__parent.title)),fr=je(h()(h()({},Yn),{},{default:jn}),Fe,$e,Oe),qe(fr),Ht(!0);case 11:case"end":return wr.stop()}},pn)})),children:Xe||Ve("View")}),(0,l.jsx)(p.n6,{schema:ot,components:h()(h()({},Z),{},{ArrayTable:n.ArrayTable}),scope:h()({getContainer:Oe,showReverseFieldConfig:!(Lt!=null&&Lt.reverseField),createOnly:!1,collections:$n},Ce)})]})})},re=e(42922),T=e(66309),ce=e(23497),be=(0,y.observer)(function(Ke){var De=Ke.schema,Ce=Ke.label,Oe=(0,p.eJW)(),Fe=(0,ce.S)(),Ne=(0,E.useMemo)(function(){return{container:{backgroundColor:Fe.colorFillAlter,marginBottom:Fe.marginLG,padding:Fe.paddingSM+Fe.paddingXXS},title:{color:Fe.colorText},description:{marginTop:Fe.marginXS,color:Fe.colorTextDescription},tag:{background:"none"}}},[Fe.colorFillAlter,Fe.colorText,Fe.colorTextDescription,Fe.marginLG,Fe.marginXS,Fe.paddingSM,Fe.paddingXXS]);return De?(0,l.jsxs)("div",{style:Ne.container,children:[(0,l.jsxs)("div",{style:Ne.title,children:[Ce,": ",(0,l.jsx)(T.Z,{style:Ne.tag,children:Oe(De.title)})]}),De.description?(0,l.jsx)("div",{style:Ne.description,children:Oe(De.description)}):null]}):null},{displayName:"Summary"}),oe=be,Re=function(De){var Ce=(0,$.$)(),Oe=Ce.t,Fe=(0,x.Bu)(),Ne=Fe.getTemplate,Xe=(0,E.useMemo)(function(){return Ne(De.schemaKey)},[Ne,De.schemaKey]);return(0,l.jsx)(oe,{label:Oe("Collection template"),schema:Xe})};Re.displayName="TemplateSummary";var Ze=function(De,Ce,Oe){if(De){var Fe=(0,R.cloneDeep)(De.configurableProperties);De.hasDefaultValue===!0&&(Fe.defaultValue=(0,R.cloneDeep)(De.default.uiSchema),Fe.defaultValue.title=Oe('{{ t("Default value") }}'),Fe.defaultValue["x-decorator"]="FormItem");var Ne=h()({name:"t_".concat((0,L.uid)()),template:De.name,view:De.name==="view",category:Ce},(0,R.cloneDeep)(De.default));return Ne.reverseField&&(Ne.reverseField.name="f_".concat((0,L.uid)())),{type:"object",properties:v()({},(0,L.uid)(),{type:"void","x-component":"Action.Drawer","x-component-props":{getContainer:"{{ getContainer }}"},"x-decorator":"Form","x-decorator-props":{useValues:function(dt){return(0,Q.QT)(function(){return Promise.resolve({data:Ne})},dt)}},title:'{{ t("Create collection") }}',properties:h()(h()({summary:{type:"void","x-component":"TemplateSummay","x-component-props":{schemaKey:De.name}}},Fe),{},{footer:{type:"void","x-component":"Action.Drawer.Footer",properties:{action1:{title:'{{ t("Cancel") }}',"x-component":"Action","x-component-props":{useAction:"{{ useCancelAction }}"}},action2:{title:'{{ t("Submit") }}',"x-component":"Action","x-component-props":{type:"primary",useAction:function(){return We(De)}}}}}})})}}},We=function(De){var Ce=(0,y.useForm)(),Oe=(0,x.Bu)(),Fe=Oe.refreshCM,Ne=(0,p.XCj)(),Xe=(0,b.u3)(),dt=Xe.refresh,ht=(0,b.eS)(),xt=ht.resource,Ct=(0,y.useField)();return{run:function(){return r()(C()().mark(function Vt(){var Ht,Ut;return C()().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return Ct.data=Ct.data||{},Ct.data.loading=!0,ot.prev=2,ot.next=5,Ce.submit();case 5:return Ut=(0,R.cloneDeep)(Ce.values),De!=null&&(Ht=De.events)!==null&&Ht!==void 0&&Ht.beforeSubmit&&De.events.beforeSubmit(Ut),Ut.autoCreateReverseField||delete Ut.reverseField,delete Ut.autoCreateReverseField,ot.next=11,xt.create({values:h()({logging:!0},Ut)});case 11:return Ne.setVisible(!1),ot.next=14,Ce.reset();case 14:return Ct.data.loading=!1,dt(),ot.next=18,Fe();case 18:ot.next=23;break;case 20:ot.prev=20,ot.t0=ot.catch(2),Ct.data.loading=!1;case 23:case"end":return ot.stop()}},Vt,null,[[2,20]])}))()}}},tt=function(De){var Ce=(0,z.a)();return(0,l.jsx)(St,h()({item:Ce},De))},St=function(De){var Ce=De.scope,Oe=De.getContainer,Fe=De.item,Ne=De.children,Xe=De.trigger,dt=De.align,ht=(0,x.Bu)(),xt=ht.getTemplate,Ct=ht.templates,Dt=(0,E.useState)(!1),Vt=i()(Dt,2),Ht=Vt[0],Ut=Vt[1],wt=(0,E.useState)({}),ot=i()(wt,2),qe=ot[0],Be=ot[1],rt=(0,E.useState)(null),Ve=i()(rt,2),$e=Ve[0],it=Ve[1],Pt=(0,p.eJW)(),Lt=(0,$.$)(),$t=Lt.t,$n=(0,E.useMemo)(function(){var Yn=[];return Ct.forEach(function(jn){jn.divider&&Yn.push({type:"divider"}),Yn.push({label:Pt(jn.title),key:jn.name})}),Yn},[Ct]),pn=(0,b.u3)(),un=pn.state.category,Xn=(0,E.useMemo)(function(){return{style:{maxHeight:"60vh",overflow:"auto"},onClick:function(jn){var ir=Ze(xt(jn.key),un,Pt);it(xt(jn.key)),Be(ir),Ut(!0)},items:$n}},[un,$n]);return(0,l.jsx)(z.HV,{record:Fe,children:(0,l.jsxs)(p.EIK,{value:{visible:Ht,setVisible:Ut},children:[(0,l.jsx)(o.Z,{getPopupContainer:Oe,trigger:Xe,align:dt,menu:Xn,children:Ne||(0,l.jsxs)(a.ZP,{icon:(0,l.jsx)(M.Z,{}),type:"primary",children:[$t("Create collection")," ",(0,l.jsx)(re.Z,{})]})}),(0,l.jsx)(p.n6,{schema:qe,components:h()(h()({},Z),{},{ArrayTable:n.ArrayTable,TemplateSummay:Re}),scope:h()({getContainer:Oe,useCancelAction:f.useCancelAction,createOnly:!0,useCreateCollection:We,record:Fe,showReverseFieldConfig:!0,presetFieldsDisabled:$e==null?void 0:$e.presetFieldsDisabled,presetFieldsDisabledIncludes:$e==null?void 0:$e.presetFieldsDisabledIncludes},Ce)})]})})},Tt=function(){var De=(0,$.$)(),Ce=De.t;return(0,l.jsx)("span",{children:(0,l.jsx)("span",{style:{fontSize:"19px"},children:Ce("Duplicate collection")})})},lt=function(De){var Ce,Oe,Fe,Ne,Xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dt=arguments.length>2?arguments[2]:void 0;return{type:"object",properties:v()({},(0,L.uid)(),{type:"void","x-component":"Action.Drawer","x-component-props":{destroyOnClose:!0},title:(0,l.jsx)(Tt,{}),"x-decorator":"Form","x-reactions":function(xt){var Ct=xt.path.segments[1],Dt=xt.path.segments[0],Vt=xt.form.getValuesIn("".concat(Dt,".").concat(Ct));Vt&&(xt.title="".concat(De(Vt.title)," - ").concat(De('{{ t("Duplicate") }}')))},properties:{title:{type:"string",title:'{{ t("Collection display name") }}',required:!0,default:(Ce=Xe==null?void 0:Xe.title)!==null&&Ce!==void 0?Ce:"","x-decorator":"FormItem","x-component":"Input"},name:{type:"string",title:'{{t("Collection name")}}',required:!0,default:((Oe=Xe==null?void 0:Xe.name)!==null&&Oe!==void 0?Oe:"")+"_copy","x-decorator":"FormItem","x-component":"Input","x-validator":"uid",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}"},inherits:{title:'{{t("Inherits")}}',type:"hasMany",name:"inherits",default:(Fe=Xe==null?void 0:Xe.inherits)!==null&&Fe!==void 0?Fe:void 0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{mode:"multiple"},"x-disabled":"{{ !createOnly }}","x-visible":"{{ enableInherits}}","x-reactions":['{{useAsyncDataSource(loadCollections, ["file"])}}']},category:{title:'{{t("Categories")}}',type:"hasMany",name:"category",default:[],"x-decorator":"FormItem","x-component":"Select","x-component-props":{mode:"multiple"},"x-reactions":["{{useAsyncDataSource(loadCategories)}}"]},description:{title:'{{t("Description")}}',type:"string",name:"description",default:(Ne=Xe==null?void 0:Xe.description)!==null&&Ne!==void 0?Ne:void 0,"x-decorator":"FormItem","x-component":"Input.TextArea"},footer:{type:"void","x-component":"Action.Drawer.Footer",properties:{action1:{title:'{{ t("Cancel") }}',"x-component":"Action","x-component-props":{useAction:"{{ useCancelAction }}"}},action2:{title:'{{ t("Submit") }}',"x-component":"Action","x-component-props":{type:"primary",useAction:function(){return ut(null,dt)}}}}}}})}},ut=function(De){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Oe=(0,y.useForm)(),Fe=(0,x.Bu)(),Ne=Fe.refreshCM,Xe=(0,p.XCj)(),dt=(0,b.u3)(),ht=dt.refresh,xt=(0,Q.LY)(),Ct=(0,y.useField)(),Dt=xt.resource("collections");return{run:function(){return r()(C()().mark(function Ht(){var Ut,wt,ot;return C()().wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Ct.data=Ct.data||{},Ct.data.loading=!0,Be.prev=2,Be.next=5,Oe.submit();case 5:return wt=(0,R.cloneDeep)(Oe.values),De!=null&&(Ut=De.events)!==null&&Ut!==void 0&&Ut.beforeSubmit&&De.events.beforeSubmit(wt),wt.autoCreateReverseField||delete wt.reverseField,delete wt.autoCreateReverseField,ot=Ce.item.name,Be.next=12,Dt.duplicate({values:wt,filterByTk:ot});case 12:return Xe.setVisible(!1),Be.next=15,Oe.reset();case 15:return Ct.data.loading=!1,ht(),Be.next=19,Ne();case 19:Be.next=24;break;case 21:Be.prev=21,Be.t0=Be.catch(2),Ct.data.loading=!1;case 24:case"end":return Be.stop()}},Ht,null,[[2,21]])}))()}}},nt=function(De){var Ce=(0,z.a)();return(0,l.jsx)(Je,h()({item:Ce},De))},Je=function(De){var Ce=De.scope,Oe=De.getContainer,Fe=De.item,Ne=De.children,Xe=De.trigger,dt=De.align,ht=(0,E.useMemo)(function(){return(0,c.createForm)()},[]),xt=(0,y.useField)(),Ct=(0,p.eJW)(),Dt=(0,p.lIL)(ht.createArrayField(h()(h()({},xt.props),{},{basePath:""}))),Vt=(0,z.a)(),Ht=Vt.name,Ut=Vt.template,wt=(0,x.Bu)(),ot=wt.getInterface,qe=wt.getInheritCollections,Be=wt.getCollection,rt=wt.getTemplate,Ve=rt(Ut),$e=(0,$.$)(),it=$e.t,Pt=lt(Ct,h()({},Fe),De),Lt=(0,E.useState)(!1),$t=i()(Lt,2),$n=$t[0],pn=$t[1];return(0,l.jsx)(z.HV,{record:Fe,children:(0,l.jsxs)(p.EIK,{value:{visible:$n,setVisible:pn},children:[(0,l.jsx)("a",{onClick:function(){return pn(!0)},children:Ne||it("Duplicate")}),(0,l.jsx)(p.n6,{schema:Pt,scope:h()({getContainer:Oe},Ce)})]})})},hn=["scope","getContainer","item","children"],mn=function(De,Ce,Oe,Fe){if(De){var Ne=le()(De.configurableProperties)||{title:{"x-component":"CollectionField","x-decorator":"FormItem"},name:{"x-component":"CollectionField","x-decorator":"FormItem"}};return De.hasDefaultValue===!0&&(Ne.defaultValue=le()(De.default.uiSchema),Ne.defaultValue.title=Oe('{{ t("Default value") }}'),Ne.defaultValue["x-decorator"]="FormItem"),{type:"object",properties:v()({},(0,L.uid)(),{type:"void","x-component":"Action.Drawer","x-decorator":"Form","x-decorator-props":{useValues:"{{ useValuesFromRecord }}"},title:'{{ t("Edit collection") }}',properties:h()(h()({},Ne),{},{filterTargetKey:{title:'{{ t("Record unique key")}}',type:"single",description:'{{t( "If a collection lacks a primary key, you must configure a unique record key to locate row records within a block, failure to configure this will prevent the creation of data blocks for the collection.")}}',"x-decorator":"FormItem","x-component":"Select","x-component-props":{multiple:!0},"x-reactions":["{{useAsyncDataSource(loadFilterTargetKeys)}}"]},footer:{type:"void","x-component":"Action.Drawer.Footer",properties:{action1:{title:'{{ t("Cancel") }}',"x-component":"Action","x-component-props":{useAction:"{{ useCancelAction }}"}},action2:{title:'{{ t("Submit") }}',"x-component":"Action","x-component-props":{type:"primary",useAction:"{{ useUpdateCollectionActionAndRefreshCM }}"}}}}})})}}},vn=function(De){var Ce=(0,z.a)(),Oe=(0,Q.QT)(function(){return Promise.resolve({data:h()(h()({},_e()(le()(Ce),["__parent","__collectionName"])),{},{category:Ce==null?void 0:Ce.category.map(function(Ne){return Ne.id})})})},h()(h()({},De),{},{manual:!0})),Fe=(0,p.XCj)();return(0,E.useEffect)(function(){Fe.visible&&Oe.run()},[Fe.visible]),Oe},an=function(De){var Ce=(0,x.Bu)(),Oe=Ce.refreshCM,Fe=(0,y.useForm)(),Ne=(0,p.XCj)(),Xe=(0,b.u3)(),dt=Xe.refresh,ht=(0,b.eS)(),xt=ht.resource,Ct=ht.targetKey,Dt=(0,z.a)(),Vt=Dt[Ct],Ht=Dt.template,Ut=(0,Q.LY)(),wt=Ht==="sql"?Ut.resource("sqlCollection"):xt;return{run:function(){return r()(C()().mark(function qe(){return C()().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:return rt.next=2,Fe.submit();case 2:return rt.next=4,wt.update({filterByTk:Vt,values:Ht==="sql"?Fe.values:_e()(Fe.values,["fields"])});case 4:return Ne.setVisible(!1),rt.next=7,Fe.reset();case 7:return dt(),rt.next=10,Oe();case 10:case"end":return rt.stop()}},qe)}))()}}},fn=function(De){var Ce=(0,z.a)();return(0,l.jsx)(cn,h()({item:Ce},De))},cn=function(De){var Ce=De.scope,Oe=De.getContainer,Fe=De.item,Ne=De.children,Xe=ie()(De,hn),dt=(0,x.Bu)(),ht=dt.getTemplate,xt=(0,E.useState)(!1),Ct=i()(xt,2),Dt=Ct[0],Vt=Ct[1],Ht=(0,E.useState)({}),Ut=i()(Ht,2),wt=Ut[0],ot=Ut[1],qe=(0,$.$)(),Be=qe.t,rt=(0,p.eJW)();return(0,l.jsx)(z.HV,{record:Fe,children:(0,l.jsxs)(p.EIK,{value:{visible:Dt,setVisible:Vt},children:[(0,l.jsx)("a",h()(h()({},Xe),{},{onClick:r()(C()().mark(function Ve(){var $e,it;return C()().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:$e=ht(Fe.template),it=mn(h()({},$e),Fe,rt,Oe),ot(it),Vt(!0);case 4:case"end":return Lt.stop()}},Ve)})),children:Ne||Be("Edit")})),(0,l.jsx)(p.n6,{schema:wt,components:h()(h()({},Z),{},{ArrayTable:n.ArrayTable}),scope:h()({getContainer:Oe,useValuesFromRecord:vn,useUpdateCollectionActionAndRefreshCM:an,useCancelAction:f.useCancelAction,createOnly:!1},Ce)})]})})},_n=e(89250),zt=e(87078),xn=e(88962),Qt=function(De,Ce,Oe){if(De){var Fe=(0,R.cloneDeep)(De.properties);if(De.hasDefaultValue===!0){var Ne;Fe.defaultValue=(0,R.cloneDeep)(De==null||(Ne=De.default)===null||Ne===void 0?void 0:Ne.uiSchema),Fe.defaultValue.title=Oe('{{ t("Default value") }}'),Fe.defaultValue["x-decorator"]="FormItem"}var Xe=h()(h()({name:"f_".concat((0,L.uid)())},(0,R.cloneDeep)(De.default)),{},{interface:De.name});return Xe.reverseField&&(Xe.reverseField.name="f_".concat((0,L.uid)())),{type:"object",properties:v()({},(0,L.uid)(),{type:"void","x-component":"Action.Drawer","x-component-props":{getContainer:"{{ getContainer }}"},"x-decorator":"Form","x-decorator-props":{useValues:function(ht){return(0,Q.QT)(function(){return Promise.resolve({data:Xe})},ht)}},title:"".concat(Oe('{{ t("Sync from database") }}')),properties:{schema:{type:"string","x-hidden":!0,default:Ce==null?void 0:Ce.schema},viewName:{type:"string","x-hidden":!0,default:Ce==null?void 0:Ce.viewName},fields:{type:"array","x-component":zt.f,"x-component-props":h()({},Ce),default:Ce.fields},preview:{type:"object","x-component":xn.S,"x-component-props":h()({},Ce),"x-reactions":{dependencies:["fields"],fulfill:{schema:{"x-component-props":"{{{...record,...$form.values}}}"}}}},footer:{type:"void","x-component":"Action.Drawer.Footer",properties:{action1:{title:'{{ t("Cancel") }}',"x-component":"Action","x-component-props":{useAction:"{{ useCancelAction }}"}},action2:{title:'{{ t("Submit") }}',"x-component":"Action","x-component-props":{type:"primary",useAction:"{{ useSyncFromDatabase }}"}}}}}})}}},Et=function(){var De=(0,y.useForm)(),Ce=(0,x.Bu)(),Oe=Ce.refreshCM,Fe=(0,p.XCj)(),Ne=(0,b.u3)(),Xe=Ne.refresh,dt=(0,b.eS)(),ht=dt.targetKey,xt=(0,z.a)(),Ct=xt[ht],Dt=(0,Q.LY)(),Vt=(0,y.useField)();return{run:function(){return r()(C()().mark(function Ut(){return C()().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return ot.next=2,De.submit();case 2:return Vt.data=Vt.data||{},Vt.data.loading=!0,ot.prev=4,ot.next=7,Dt.resource("collections").setFields({filterByTk:Ct,values:(0,R.omit)(De.values,"preview")});case 7:return Fe.setVisible(!1),ot.next=10,De.reset();case 10:return Vt.data.loading=!1,Xe(),ot.next=14,Oe();case 14:ot.next=19;break;case 16:ot.prev=16,ot.t0=ot.catch(4),Vt.data.loading=!1;case 19:case"end":return ot.stop()}},Ut,null,[[4,16]])}))()}}},en=function(De){var Ce=(0,z.a)();return(0,l.jsx)(Rn,h()({item:Ce},De))},Rn=function(De){var Ce=De.scope,Oe=De.getContainer,Fe=De.item,Ne=De.children,Xe=(0,E.useState)(!1),dt=i()(Xe,2),ht=dt[0],xt=dt[1],Ct=(0,E.useState)({}),Dt=i()(Ct,2),Vt=Dt[0],Ht=Dt[1],Ut=(0,p.eJW)(),wt=(0,$.$)(),ot=wt.t,qe=(0,_n.useParams)(),Be=qe.name,rt=Be===void 0?"main":Be;return Fe.template==="view"&&rt==="main"&&(0,l.jsx)(z.HV,{record:Fe,children:(0,l.jsxs)(p.EIK,{value:{visible:ht,setVisible:xt,drawerProps:{width:900}},children:[Ne||(0,l.jsx)(a.ZP,{icon:(0,l.jsx)(M.Z,{}),onClick:function($e){var it=Qt({},Fe,Ut);it&&(Ht(it),xt(!0))},children:ot("Sync from database")}),(0,l.jsx)(p.n6,{schema:Vt,components:h()(h()({},Z),{},{ArrayTable:n.ArrayTable}),scope:h()({getContainer:Oe,useCancelAction:f.useCancelAction,createOnly:!0,isOverride:!1,useSyncFromDatabase:Et,record:Fe},Ce)})]})})},An=e(55195),Jn=e(99986),Zn=e(78317),rr={type:"object",properties:v()({},(0,L.uid)(),{type:"void",title:'{{ t("Sync from database") }}',"x-component":"Action.Drawer","x-decorator":"FormLayout","x-decorator-props":{layout:"vertical"},properties:{config:{type:"void","x-decorator":Zn._E,"x-decorator-props":{manual:!1},properties:{sql:{type:"string"},sources:{type:"array",title:'{{t("Source collections")}}',"x-decorator":"FormItem","x-component":"Select","x-component-props":{multiple:!0},"x-reactions":["{{useAsyncDataSource(loadCollections)}}"]},fields:{type:"array",title:'{{t("Fields")}}',"x-decorator":"FormItem","x-component":Zn.V0,required:!0},table:{type:"void",title:'{{t("Preview")}}',"x-decorator":"FormItem","x-component":Zn.SN}}},footer:{type:"void","x-component":"Action.Drawer.Footer",properties:{cancel:{title:'{{ t("Cancel") }}',"x-component":"Action","x-component-props":{useAction:"{{ useCancelAction }}"}},submit:{title:'{{ t("Submit") }}',"x-component":"Action","x-component-props":{type:"primary",useAction:"{{ useSyncFromDB }}"}}}}}})},mr=function(De){var Ce=(0,y.useForm)(),Oe=(0,p.XCj)(),Fe=(0,Jn.B)(),Ne=Fe.refreshCM,Xe=(0,b.u3)(),dt=Xe.refresh,ht=(0,b.eS)(),xt=ht.targetKey,Ct=(0,z.a)(),Dt=Ct[xt],Vt=(0,Q.LY)(),Ht=(0,y.useField)();return{run:function(){return r()(C()().mark(function wt(){return C()().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return qe.next=2,Ce.submit();case 2:return Ht.data=Ht.data||{},Ht.data.loading=!0,qe.prev=4,qe.next=7,Vt.resource("sqlCollection").setFields({filterByTk:Dt,values:{fields:Ce.values.fields,sources:Ce.values.sources}});case 7:return Oe.setVisible(!1),qe.next=10,Ce.reset();case 10:return Ht.data.loading=!1,dt(),qe.next=14,Ne();case 14:return qe.next=16,De==null?void 0:De();case 16:qe.next=21;break;case 18:qe.prev=18,qe.t0=qe.catch(4),Ht.data.loading=!1;case 21:case"end":return qe.stop()}},wt,null,[[4,18]])}))()}}},Er=function(De){var Ce=De.refreshCMList,Oe=(0,z.a)(),Fe=(0,Se.Kv)(),Ne=(0,$.$)(),Xe=Ne.t,dt=(0,E.useState)(!1),ht=i()(dt,2),xt=ht[0],Ct=ht[1],Dt=(0,E.useMemo)(function(){return(0,c.createForm)({initialValues:Oe})},[Oe]);return Oe.template==="sql"&&(0,l.jsx)(z.HV,{record:Oe,parent:Fe,children:(0,l.jsx)(p.RVL,{form:Dt,children:(0,l.jsxs)(p.EIK,{value:{visible:xt,setVisible:Ct},children:[(0,l.jsx)(a.ZP,{icon:(0,l.jsx)(An.Z,{}),onClick:function(Ht){return Ct(!0)},children:Xe("Sync from database")}),(0,l.jsx)(p.n6,{schema:rr,components:{FormLayout:n.FormLayout},scope:{useCancelAction:f.useCancelAction,useSyncFromDB:function(){return mr(Ce)}}})]})})})},Ft=e(68400),ct=e.n(Ft),Mt=e(87995),kt=e(84249),Rt=e(97133),_t=e(45360),Bt=e(21143),jt,Xt=["scope","getContainer","item","children","isBulk","useAction"],Wt=function(De){var Ce=(0,z.a)();return(0,l.jsx)(Yt,h()({item:Ce},De))},Nt=function(){var De=Zt(),Ce=De.run,Oe=(0,Bt.useCollectionManager_deprecated)(),Fe=Oe.refreshCM;return{run:function(){return r()(C()().mark(function Xe(){return C()().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.next=2,Ce();case 2:return ht.next=4,Fe();case 4:case"end":return ht.stop()}},Xe)}))()}}},nn=function(De){var Ce=Cn(),Oe=Ce.run,Fe=(0,Bt.useCollectionManager_deprecated)(),Ne=Fe.refreshCM;return{run:function(){return r()(C()().mark(function dt(){return C()().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:return xt.next=2,Oe(De);case 2:return xt.next=4,Ne();case 4:case"end":return xt.stop()}},dt)}))()}}},Zt=function(){var De=(0,Bt.useResourceActionContext)(),Ce=De.refresh,Oe=(0,Bt.useResourceContext)(),Fe=Oe.resource,Ne=Oe.targetKey,Xe=(0,z.a)(),dt=Xe[Ne],ht=(0,y.useForm)(),xt=(ht==null?void 0:ht.values)||{},Ct=xt.cascade;return{run:function(){return r()(C()().mark(function Vt(){return C()().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return Ut.next=2,Fe.destroy({filterByTk:dt,cascade:Ct});case 2:Ce();case 3:case"end":return Ut.stop()}},Vt)}))()}}},Cn=function(){var De=(0,Bt.useResourceActionContext)(),Ce=De.state,Oe=De.setState,Fe=De.refresh,Ne=(0,Bt.useResourceContext)(),Xe=Ne.resource,dt=(0,Bt.useActionContext)(),ht=(0,$.$)(),xt=ht.t,Ct=(0,y.useForm)(),Dt=(Ct==null?void 0:Ct.values)||{},Vt=Dt.cascade,Ht=Object.values(Ce).flat();return{run:function(wt){return r()(C()().mark(function ot(){var qe;return C()().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(Ht!=null&&Ht.length){rt.next=2;break}return rt.abrupt("return",_t.ZP.error(xt("Please select the records you want to delete")));case 2:return rt.next=4,Xe.destroy({filterByTk:Ht||[],cascade:Vt});case 4:Ct.reset(),!wt&&(dt==null||(qe=dt.setVisible)===null||qe===void 0||qe.call(dt,!1)),Oe==null||Oe({}),Fe();case 8:case"end":return rt.stop()}},ot)}))()}}},Yt=function(De){var Ce=De.scope,Oe=De.getContainer,Fe=De.item,Ne=De.children,Xe=De.isBulk,dt=De.useAction,ht=ie()(De,Xt),xt=(0,$.$)(),Ct=xt.t,Dt=(0,E.useState)(!1),Vt=i()(Dt,2),Ht=Vt[0],Ut=Vt[1],wt=function(){return Xe?nn:dt||Nt},ot=function(){return(0,l.jsxs)("span",{children:[(0,l.jsx)(Mt.Z,{style:{color:"#faad14",marginRight:"12px",fontSize:"22px"}}),(0,l.jsx)("span",{style:{fontSize:"19px"},children:Ct("Delete collection")})]})};return(0,l.jsx)(z.HV,{record:Fe,children:(0,l.jsxs)(p.EIK,{value:{visible:Ht,setVisible:Ut},children:[Xe?(0,l.jsx)(a.ZP,{icon:(0,l.jsx)(kt.Z,{}),onClick:function(){return Ut(!0)},children:Ne||Ct("Delete")}):(0,l.jsx)("a",h()(h()({onClick:function(){return Ut(!0)}},ht),{},{children:Ne||Ct("Delete")})),(0,l.jsx)(p.n6,{schema:{type:"object",properties:{deleteCollection:{type:"void","x-decorator":"Form","x-component":"Action.Modal",title:(0,l.jsx)(ot,{}),"x-component-props":{width:520,getContainer:"{{ getContainer }}",className:(0,Rt.css)(jt||(jt=ct()([`
                    .ant-modal-body {
                      margin-left: 35px;
                      margin-bottom: 35px;
                      .ant-checkbox-wrapper {
                        height: 25px;
                      }
                    }
                  `])))},properties:{info:{type:"string","x-component":"div","x-content":"{{t('Are you sure you want to delete it?')}}"},cascade:{type:"boolean","x-decorator":"FormItem","x-component":"Checkbox",default:!1,"x-content":Ct("Automatically drop objects that depend on the collection (such as views), and in turn all objects that depend on those objects")},footer:{type:"void","x-component":"Action.Modal.Footer",properties:{action1:{title:'{{ t("Cancel") }}',"x-component":"Action","x-component-props":{useAction:"{{ useCancelAction }}"}},action2:{title:'{{ t("Ok") }}',"x-component":"Action","x-component-props":{type:"primary",useAction:"{{ useDestroyCollectionAction }}",style:{marginLeft:"8px"}}}}}}}}},components:h()({},Z),scope:h()({getContainer:Oe,useDestroyCollectionAction:wt(),useCancelAction:f.useCancelAction},Ce)})]})})};Yt.displayName="DeleteCollectionAction";var Mn=function(De){if(De){var Ce=(0,R.cloneDeep)(De.properties),Oe=h()(h()({name:"f_".concat((0,L.uid)())},(0,R.cloneDeep)(De.default)),{},{interface:De.name});return{type:"object",properties:v()({},(0,L.uid)(),{type:"void","x-component":"Action.Drawer","x-decorator":"Form","x-decorator-props":{useValues:function(Ne){return(0,Q.QT)(function(){return Promise.resolve({data:Oe})},Ne)}},title:'{{ t("Add field") }}',properties:h()(h()({},Ce),{},{footer:{type:"void","x-component":"Action.Drawer.Footer",properties:{action1:{title:'{{ t("Cancel") }}',"x-component":"Action","x-component-props":{useAction:"{{ cm.useCancelAction }}"}},action2:{title:'{{ t("Submit") }}',"x-component":"Action","x-component-props":{type:"primary",useAction:"{{ ds.useCreateAction }}"}}}}})})}}},bn=function(){var De=(0,p.XCj)();return{run:function(){return r()(C()().mark(function Oe(){return C()().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:case"end":return Ne.stop()}},Oe)}))()}}},Gt=function(){var De=(0,x.Bu)(),Ce=De.getInterface,Oe=(0,E.useState)(!1),Fe=i()(Oe,2),Ne=Fe[0],Xe=Fe[1],dt=(0,E.useState)({}),ht=i()(dt,2),xt=ht[0],Ct=ht[1],Dt=(0,p.eJW)(),Vt=(0,D.r)(),Ht=(0,$.$)(),Ut=Ht.t,wt=(0,E.useMemo)(function(){return Vt.map(function(Be){var rt=Be.children.map(function(Ve){return{label:Dt(Ve.title),key:Ve.name}});return{label:Dt(Be.label),key:Be.key,children:rt}})},[Vt]),ot=(0,E.useMemo)(function(){return{style:{maxHeight:"60vh",overflow:"auto"},onClick:function(rt){var Ve=Mn(Ce(rt.key));Ct(Ve),Xe(!0)},items:wt}},[wt]),qe=(0,ge.nE)();return(0,l.jsxs)(p.EIK,{value:{visible:Ne,setVisible:Xe},children:[(0,l.jsx)(o.Z,{menu:ot,children:(0,l.jsx)(a.ZP,{icon:(0,l.jsx)(M.Z,{}),type:"primary",children:Ut("Add field")})}),(0,l.jsx)(z.HV,{record:{},parent:qe,children:(0,l.jsx)(p.n6,{schema:xt,components:h()(h()({},Z),{},{ArrayTable:n.ArrayTable}),scope:{createOnly:!0,useCreateSubField:bn}})})]})},ln=function(De){if(De){var Ce=le()(De.properties);return Ce.name["x-disabled"]=!0,{type:"object",properties:v()({},(0,L.uid)(),{type:"void","x-component":"Action.Drawer","x-decorator":"Form","x-decorator-props":{useValues:function(Fe){return(0,Q.QT)(function(){return Promise.resolve({data:le()(De.default)})},Fe)}},title:'{{ t("Edit field") }}',properties:h()(h()({},Ce),{},{footer:{type:"void","x-component":"Action.Drawer.Footer",properties:{action1:{title:'{{ t("Cancel") }}',"x-component":"Action","x-component-props":{useAction:"{{ cm.useCancelAction }}"}},action2:{title:'{{ t("Submit") }}',"x-component":"Action","x-component-props":{type:"primary",useAction:"{{ ds.useUpdateAction }}"}}}}})})}}},Hn=function(){var De=(0,y.useForm)(),Ce=(0,f.useUpdateAction)(),Oe=Ce.run,Fe=(0,x.Bu)(),Ne=Fe.refreshCM;return{run:function(){return r()(C()().mark(function dt(){var ht,xt;return C()().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:return Dt.next=2,De.submit();case 2:return xt=(De==null||(ht=De.values)===null||ht===void 0||(ht=ht.uiSchema)===null||ht===void 0||(ht=ht.enum)===null||ht===void 0?void 0:ht.slice())||[],De.setValuesIn("uiSchema.enum",xt.map(function(Vt){return h()({value:(0,L.uid)()},Vt)})),Dt.next=6,Oe();case 6:return Dt.next=8,Ne();case 8:case"end":return Dt.stop()}},dt)}))()}}},sn=function(De){var Ce=(0,z.a)(),Oe=(0,x.Bu)(),Fe=Oe.getInterface,Ne=(0,E.useState)(!1),Xe=i()(Ne,2),dt=Xe[0],ht=Xe[1],xt=(0,E.useState)({}),Ct=i()(xt,2),Dt=Ct[0],Vt=Ct[1],Ht=(0,Q.LY)(),Ut=(0,$.$)(),wt=Ut.t;return(0,l.jsxs)(p.EIK,{value:{visible:dt,setVisible:ht},children:[(0,l.jsx)("a",{onClick:r()(C()().mark(function ot(){var qe;return C()().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:qe=ln(h()(h()({},Fe(Ce.interface)),{},{default:Ce})),Vt(qe),ht(!0);case 3:case"end":return rt.stop()}},ot)})),children:wt("Edit")}),(0,l.jsx)(p.n6,{schema:Dt,components:h()(h()({},Z),{},{ArrayTable:n.ArrayTable}),scope:{useUpdateCollectionField:Hn}})]})},Ln=function(De){var Ce=(0,$.$)(),Oe=Ce.t,Fe=(0,x.Bu)(),Ne=Fe.getInterface,Xe=(0,E.useMemo)(function(){return Ne(De.schemaKey)},[Ne,De.schemaKey]);return(0,l.jsx)(oe,{label:Oe("Field interface"),schema:Xe})};Ln.displayName="FieldSummary";var Bn=(0,y.observer)(function(Ke){var De=Ke.value,Ce=(0,x.Bu)(),Oe=Ce.getInterface,Fe=(0,p.eJW)(),Ne=Oe(De);return Ne?(0,l.jsx)(T.Z,{children:Fe(Ne.title)}):null},{displayName:"CollectionFieldInterfaceTag"}),wn=(0,y.observer)(function(Ke){var De=Ke.value,Ce=(0,p.eJW)();return(0,l.jsx)(l.Fragment,{children:De==null?void 0:De.map(function(Oe){return(0,l.jsx)(T.Z,{color:Oe.color,children:Ce(Oe==null?void 0:Oe.name)},Oe.name)})})},{displayName:"CollectionCategory"}),st=(0,y.observer)(function(Ke){var De=Ke.value,Ce=(0,x.Bu)(),Oe=Ce.getTemplate,Fe=(0,p.eJW)(),Ne=Oe(De);return(0,l.jsx)(T.Z,{children:Fe((Ne==null?void 0:Ne.title)||'{{t("General collection")}}')})},{displayName:"CollectionTemplateTag"});(0,c.registerValidateFormats)({uid:/^[a-zA-Z][a-zA-Z0-9_-]*$/})},47047:function(He,ae,e){"use strict";e.d(ae,{r:function(){return C}});var Z=e(97857),c=e.n(Z),k=e(67294),i=e(13511),g=function(r,K){return Object.keys(K).map(function(v){var j=K[v];return c()(c()({},j),{},{key:v,children:Object.keys(r[v]||{}).filter(function(h){return!r[v][h].hidden}).map(function(h){var M=r[v][h];return c()({value:h,label:M.title,name:h},r[v][h])}).sort(function(h,M){return h.order-M.order})})}).sort(function(v,j){return v.order-j.order})},C=function(){var r=(0,i.fp)();return(0,k.useMemo)(function(){var K=r.collectionFieldInterfaceManager.getFieldInterfaces(),v=r.collectionFieldInterfaceManager.getFieldInterfaceGroups(),j=K.reduce(function(h,M){var n=M.group||"basic";return h[n]||(h[n]=[]),h[n].push(M),h},{});return g(j,v)},[r])}},63250:function(He,ae,e){"use strict";e.d(ae,{KD:function(){return o},eS:function(){return a},pv:function(){return y},rf:function(){return j},u3:function(){return L}});var Z=e(19632),c=e.n(Z),k=e(97857),i=e.n(k),g=e(80844),C=e(67294),A=e(6145),r=e(21143),K=e(12174),v=e(85893),j=(0,C.createContext)(null);j.displayName="ResourceActionContext";var h=(0,C.createContext)(null);h.displayName="ResourceContext";var M=function(E){var $,Q,z,p,b=E.collection,f=E.request,x=E.uid,m=E.dragSort,F=(0,K.LY)(),I=(0,r.useRecord)(),d=f==null?void 0:f.action,u={};d==="get"&&(u.filterByTk=I[b.targetKey||b.filterTargetKey||"id"]);var l=(f==null||($=f.params)===null||$===void 0?void 0:$.appends)||[],S=(0,K.QT)(i()(i()({},f),{},{params:i()(i()(i()({},u),f==null?void 0:f.params),{},{appends:[].concat(c()((b==null||(Q=b.fields)===null||Q===void 0||(z=Q.filter)===null||z===void 0?void 0:z.call(Q,function(t){return t.target}).map(function(t){return t.name}))||[]),c()(l)),sort:m?[b.sortable===!0?"sort":b.sortable]:f==null||(p=f.params)===null||p===void 0?void 0:p.sort})}),{uid:x}),H=F.resource(f.resource),O=(0,C.useMemo)(function(){return i()(i()({},S),{},{defaultRequest:f,dragSort:m})},[m,f,S]),N=(0,C.useMemo)(function(){return{type:"collection",resource:H,collection:b}},[b,H]);return(0,v.jsx)(h.Provider,{value:N,children:(0,v.jsx)(j.Provider,{value:O,children:(0,v.jsx)(r.CollectionProvider_deprecated,{collection:b,children:E.children})})})},n=function(E){var $,Q,z,p=E.collection,b=E.association,f=E.request,x=E.uid,m=E.dragSort,F=(0,K.LY)(),I=(0,r.useRecord)(),d=I[b.sourceKey],u=(f==null||($=f.params)===null||$===void 0?void 0:$.appends)||[],l=(0,K.QT)(i()(i()({resourceOf:d},f),{},{params:i()(i()({},f==null?void 0:f.params),{},{appends:[].concat(c()((p==null||(Q=p.fields)===null||Q===void 0||(z=Q.filter)===null||z===void 0?void 0:z.call(Q,function(N){return N.target}).map(function(N){return N.name}))||[]),c()(u))})}),{uid:x}),S=F.resource(f.resource,d),H=(0,C.useMemo)(function(){return{type:"association",resource:S,association:b,collection:p}},[b,p,S]),O=(0,C.useMemo)(function(){return i()(i()({},l),{},{defaultRequest:f,dragSort:m})},[m,f,l]);return(0,v.jsx)(h.Provider,{value:H,children:(0,v.jsx)(j.Provider,{value:O,children:(0,v.jsx)(r.CollectionProvider_deprecated,{collection:p,children:E.children})})})},y=function(E){var $,Q=E.collection,z=E.request,p=(0,A.useCollectionManager_deprecated)(),b=p.getCollection;return typeof Q=="string"&&(Q=b(Q)),Q?z!=null&&($=z.resource)!==null&&$!==void 0&&$.includes(".")?(0,v.jsx)(n,i()(i()({},E),{},{collection:Q})):(0,v.jsx)(M,i()(i()({},E),{},{collection:Q})):null},L=function(){return(0,C.useContext)(j)||{}},o=function(E){var $=(0,C.useContext)(j),Q=(0,g.useField)();return(0,C.useEffect)(function(){$.loading||(E==null||E.onSuccess($.data),Q.componentProps.dragSort=!!$.dragSort)},[$.loading]),$},a=function(){var E=(0,C.useContext)(h)||{},$=E.type,Q=E.resource,z=E.collection,p=E.association;return{type:$,resource:Q,collection:z,association:p,targetKey:(p==null?void 0:p.targetKey)||(z==null?void 0:z.filterTargetKey)||(z==null?void 0:z.targetKey)||"id"}}},44355:function(He,ae,e){"use strict";e.r(ae),e.d(ae,{isDeleteButtonDisabled:function(){return _e},useBulkDestroyAction:function(){return P},useBulkDestroyActionAndRefreshCM:function(){return Ee},useCancelAction:function(){return F},useChildrenCollections:function(){return S},useCollectionFieldsOptions:function(){return B},useCollectionFilterOptions:function(){return O},useCollectionFilterOptionsV2:function(){return N},useCreateAction:function(){return U},useCreateActionAndRefreshCM:function(){return ie},useCreateActionWithoutRefresh:function(){return D},useDeleteButtonDisabled:function(){return xe},useDestroyAction:function(){return Y},useDestroyActionAndRefreshCM:function(){return le},useFilterAction:function(){return V},useFilterActionProps:function(){return ze},useFilterDataSource:function(){return X},useKanbanEvents:function(){return u},useLinkageCollectionFilterOptions:function(){return t},useMoveAction:function(){return q},useResetFilterAction:function(){return d},useSelfAndChildrenCollections:function(){return H},useSortFields:function(){return l},useUpdateAction:function(){return J},useUpdateActionAndRefreshCM:function(){return G},useUpdateViewAction:function(){return ne},useValuesFromRA:function(){return w},useValuesFromRecord:function(){return I}});var Z=e(61227),c=e.n(Z),k=e(19632),i=e.n(k),g=e(9783),C=e.n(g),A=e(97857),r=e.n(A),K=e(15009),v=e.n(K),j=e(99289),h=e.n(j),M=e(80844),n=e(45360),y=e(96486),L=e.n(y),o=e(50361),a=e.n(o),R=e(57557),E=e.n(R),$=e(67294),Q=e(26793),z=e(6145),p=e(12174),b=e(36586),f=e(62954),x=e(89127),m=e(63250),F=function(){var se=(0,M.useForm)(),me=(0,f.XCj)();return{run:function(){return h()(v()().mark(function ee(){return v()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:me.setVisible(!1),se.reset();case 2:case"end":return ge.stop()}},ee)}))()}}},I=function(se){var me=(0,b.a)(),pe=(0,p.QT)(function(){return Promise.resolve({data:E()(a()(me),["__parent","__collectionName"])})},r()(r()({},se),{},{manual:!0})),ee=(0,f.XCj)();return(0,$.useEffect)(function(){ee.visible&&pe.run()},[ee.visible]),pe},d=function(){var se=(0,m.u3)(),me=se.run,pe=(0,M.useForm)(),ee=(0,f.XCj)();return{run:function(){return h()(v()().mark(function ge(){return v()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:pe.reset(),me(),ee.setVisible(!1);case 3:case"end":return Ae.stop()}},ge)}))()}}},u=function(){var se=(0,z.useCollection_deprecated)(),me=se.resource;return{onCardDragEnd:function(ee,ue,ge){return h()(v()().mark(function Ie(){var Ae,Le,Te,je,Pe,fe,re,T,ce,be,oe,Re,Ze;return v()().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return Te=ee.columns,je=ee.groupField,Pe=ue.fromColumnId,fe=ue.fromPosition,re=ge.toColumnId,T=ge.toPosition,ce=Te.find(function(St){return St.id===Pe}),be=Te.find(function(St){return St.id===re}),oe=ce==null||(Ae=ce.cards)===null||Ae===void 0?void 0:Ae[fe],Re=be==null||(Le=be.cards)===null||Le===void 0?void 0:Le[T],Ze={sourceId:oe.id,sortField:"".concat(je.name,"_sort")},Re?Ze.targetId=Re.id:Ze.targetScope=C()({},je.name,re),tt.next=11,me.move(Ze);case 11:case"end":return tt.stop()}},Ie)}))()}}},l=function(se){var me=(0,z.useCollectionManager_deprecated)(),pe=me.getCollectionFields,ee=me.getInterface,ue=pe(se);return ue.filter(function(ge){if(!ge.interface)return!1;var Ie=ee(ge.interface);return!!(Ie!=null&&Ie.sortable)}).map(function(ge){var Ie;return{value:ge.name,label:(ge==null||(Ie=ge.uiSchema)===null||Ie===void 0?void 0:Ie.title)||ge.name}})},S=function(se){var me=(0,z.useCollectionManager_deprecated)(),pe=me.getChildrenCollections,ee=pe(se);return ee.map(function(ue){return{value:ue.name,label:(ue==null?void 0:ue.title)||ue.name}})},H=function(se){var me=(0,z.useCollectionManager_deprecated)(),pe=me.getChildrenCollections,ee=me.getCollection,ue=pe(se),ge=ee(se);if(!se)return null;var Ie=ue.map(function(Ae){return{value:Ae.name,label:(Ae==null?void 0:Ae.title)||Ae.name}});return Ie.unshift({value:ge.name,label:(ge==null?void 0:ge.title)||ge.name}),Ie},O=function(se,me){var pe=(0,z.useCollectionManager_deprecated)(),ee=pe.getCollectionFields,ue=pe.getInterface;return(0,$.useMemo)(function(){var ge=ee(se,me),Ie=function(je,Pe){var fe,re;if(je.interface){var T=ue(je.interface);if(T!=null&&T.filterable){var ce=T.filterable,be=ce.nested,oe=ce.children,Re=ce.operators,Ze={name:je.name,title:(je==null||(fe=je.uiSchema)===null||fe===void 0?void 0:fe.title)||je.name,schema:je==null?void 0:je.uiSchema,operators:(Re==null||(re=Re.filter)===null||re===void 0?void 0:re.call(Re,function(Tt){return!(Tt!=null&&Tt.visible)||Tt.visible(je)}))||[],interface:je.interface};if(!(je.target&&Pe>2)){if(Pe>2)return Ze;if(oe!=null&&oe.length&&(Ze.children=oe),be){var We,tt=ee(je.target,me),St=Ae(tt,Pe+1).filter(Boolean);Ze.children=Ze.children||[],(We=Ze.children).push.apply(We,i()(St))}return Ze}}}},Ae=function(je,Pe){var fe=[];return je.forEach(function(re){var T=Ie(re,Pe);T&&fe.push(T)}),fe},Le=Ae(ge,1);return Le},[L().isString(se)?se:se==null?void 0:se.name,me])},N=function(se){var me=(0,z.useCollectionManager_deprecated)(),pe=me.getCollectionFields,ee=me.getInterface,ue=(0,$.useCallback)(function(){var ge=pe(se),Ie=function(je,Pe){var fe,re;if(je.interface){var T=ee(je.interface);if(T!=null&&T.filterable){var ce=T.filterable,be=ce.nested,oe=ce.children,Re=ce.operators,Ze={name:je.name,title:(je==null||(fe=je.uiSchema)===null||fe===void 0?void 0:fe.title)||je.name,schema:je==null?void 0:je.uiSchema,operators:(Re==null||(re=Re.filter)===null||re===void 0?void 0:re.call(Re,function(Tt){return!(Tt!=null&&Tt.visible)||Tt.visible(je)}))||[],interface:je.interface};if(!(je.target&&Pe>2)){if(Pe>2)return Ze;if(oe!=null&&oe.length&&(Ze.children=oe),be){var We,tt=pe(je.target),St=Ae(tt,Pe+1).filter(Boolean);Ze.children=Ze.children||[],(We=Ze.children).push.apply(We,i()(St))}return Ze}}}},Ae=function(je,Pe){var fe=[];return je.forEach(function(re){var T=Ie(re,Pe);T&&fe.push(T)}),fe},Le=Ae(ge,1);return Le},[L().isString(se)?se:se==null?void 0:se.name]);return{getFields:ue}},t=function(se){var me=(0,z.useCollectionManager_deprecated)(),pe=me.getCollectionFields,ee=me.getInterface,ue=pe(se),ge=function(Te,je){var Pe,fe;if(Te.interface){var re=ee(Te.interface);if(re!=null&&re.filterable){var T=re.filterable,ce=T.nested,be=T.children,oe=T.operators,Re={name:Te.name,title:(Te==null||(Pe=Te.uiSchema)===null||Pe===void 0?void 0:Pe.title)||Te.name,schema:Te==null?void 0:Te.uiSchema,operators:(oe==null||(fe=oe.filter)===null||fe===void 0?void 0:fe.call(oe,function(St){return!(St!=null&&St.visible)||St.visible(Te)}))||[],interface:Te.interface};if(!(Te.target&&je>2)){if(je>2)return Re;if(be!=null&&be.length&&(Re.children=be),ce){var Ze,We=pe(Te.target).filter(function(St){return["hasMany","belongsToMany"].includes(Te.type)?!["hasOne","hasMany","belongsTo","belongsToMany"].includes(St.type):!["hasMany","belongsToMany"].includes(St.type)}),tt=Ie(We,je+1).filter(Boolean);Re.children=Re.children||[],(Ze=Re.children).push.apply(Ze,i()(tt))}return Re}}}},Ie=function(Te,je){var Pe=[];return Te.forEach(function(fe){var re=ge(fe,je);re&&Pe.push(re)}),Pe},Ae=Ie(ue,1);return Ae},B=function(se){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],ee=(0,z.useCollectionManager_deprecated)(),ue=ee.getCollectionFields,ge=ee.getInterface,Ie=ue(se).filter(function(je){return!pe.includes(je.interface)}),Ae=function(Pe,fe,re){var T;if(Pe.interface){var ce=ge(Pe.interface);if(ce!=null&&ce.filterable){var be=ce.filterable,oe=be.nested,Re=be.children,Ze=re?"".concat(re,".").concat(Pe.name):Pe.name,We=r()(r()({},Pe),{},{name:Pe.name,title:(Pe==null||(T=Pe.uiSchema)===null||T===void 0?void 0:T.title)||Pe.name,schema:Pe==null?void 0:Pe.uiSchema,key:Ze});if(!(Pe.target&&fe>me)){if(fe>me)return We;if(Re!=null&&Re.length&&(We.children=Re.map(function(lt){return r()(r()({},lt),{},{key:"".concat(Pe.name,".").concat(lt.name)})})),oe){var tt,St=ue(Pe.target).filter(function(lt){return!pe.includes(lt.interface)}),Tt=Le(St,fe+1,Pe.name).filter(Boolean);We.children=We.children||[],(tt=We.children).push.apply(tt,i()(Tt))}return We}}}},Le=function(Pe,fe,re){var T=[];return Pe.forEach(function(ce){var be=Ae(ce,fe,re);be&&T.push(be)}),T},Te=Le(Ie,1);return Te},X=function(se){var me=(0,z.useCollection_deprecated)(),pe=me.name,ee=O(pe);return(0,p.QT)(function(){return Promise.resolve({data:ee})},se)},V=function(){var se=(0,m.u3)(),me=se.run,pe=se.params,ee=se.defaultRequest,ue=(0,M.useForm)(),ge=(0,f.XCj)(),Ie=c()(pe),Ae=Ie[0],Le=Ie.slice(1);return{run:function(){return h()(v()().mark(function je(){var Pe,fe,re;return v()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:fe=ee==null||(Pe=ee.params)===null||Pe===void 0?void 0:Pe.filter,re=fe?{$and:[fe,ue.values.filter]}:ue.values.filter,me.apply(void 0,[r()(r()({},Ae),{},{filter:re})].concat(i()(Le))),ge.setVisible(!1);case 4:case"end":return ce.stop()}},je)}))()}}},U=function(se){var me=(0,M.useForm)(),pe=(0,M.useField)(),ee=(0,f.XCj)(),ue=(0,m.u3)(),ge=ue.refresh,Ie=(0,m.eS)(),Ae=Ie.resource;return{run:function(){return h()(v()().mark(function Te(){var je,Pe;return v()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.prev=0,re.next=3,me.submit();case 3:return pe.data=pe.data||{},pe.data.loading=!0,re.next=7,Ae.create({values:me.values});case 7:return Pe=re.sent,ee.setVisible(!1),se==null||se(Pe==null||(je=Pe.data)===null||je===void 0?void 0:je.data),re.next=12,me.reset();case 12:pe.data.loading=!1,ge(),re.next=19;break;case 16:re.prev=16,re.t0=re.catch(0),pe.data&&(pe.data.loading=!1);case 19:case"end":return re.stop()}},Te,null,[[0,16]])}))()}}},D=function(se){var me=(0,M.useForm)(),pe=(0,m.eS)(),ee=pe.resource;return{run:function(){return h()(v()().mark(function ge(){var Ie,Ae;return v()().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,me.submit();case 2:return Te.next=4,ee.create({values:me.values});case 4:return Ae=Te.sent,se==null||se(Ae==null||(Ie=Ae.data)===null||Ie===void 0?void 0:Ie.data),Te.next=8,me.reset();case 8:case"end":return Te.stop()}},ge)}))()}}},ne=function(se){var me=(0,M.useForm)(),pe=(0,f.XCj)(),ee=(0,m.eS)(),ue=ee.resource,ge=ee.targetKey,Ie=(0,b.a)(),Ae=Ie[ge];return{run:function(){return h()(v()().mark(function Te(){var je,Pe;return v()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,me.submit();case 2:return re.next=4,ue.update({filterByTk:Ae,values:me.values});case 4:Pe=re.sent,se==null||se(Ae,Pe==null||(je=Pe.data)===null||je===void 0?void 0:je.data),n.ZP.success("\u4FDD\u5B58\u6210\u529F");case 7:case"end":return re.stop()}},Te)}))()}}},q=function(){var se=(0,m.eS)(),me=se.resource,pe=(0,m.u3)(),ee=pe.refresh;return{move:function(ge,Ie){return h()(v()().mark(function Ae(){return v()().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,me.move({sourceId:ge.id,targetId:Ie.id});case 2:ee();case 3:case"end":return Te.stop()}},Ae)}))()}}},J=function(se){var me=(0,M.useField)(),pe=(0,M.useForm)(),ee=(0,f.XCj)(),ue=(0,m.u3)(),ge=ue.refresh,Ie=(0,m.eS)(),Ae=Ie.resource,Le=Ie.targetKey,Te=(0,b.a)(),je=Te[Le];return{run:function(){return h()(v()().mark(function fe(){var re,T;return v()().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return be.next=2,pe.submit();case 2:return me.data=me.data||{},me.data.loading=!0,be.prev=4,be.next=7,Ae.update({filterByTk:je,values:pe.values});case 7:return T=be.sent,ee.setVisible(!1),se==null||se(je,T==null||(re=T.data)===null||re===void 0?void 0:re.data),be.next=12,pe.reset();case 12:ge(),be.next=18;break;case 15:be.prev=15,be.t0=be.catch(4),console.log(be.t0);case 18:return be.prev=18,me.data.loading=!1,be.finish(18);case 21:case"end":return be.stop()}},fe,null,[[4,15,18,21]])}))()}}},Y=function(se){var me=(0,m.u3)(),pe=me.refresh,ee=(0,m.eS)(),ue=ee.resource,ge=ee.targetKey,Ie=(0,b.a)(),Ae=Ie[ge];return{run:function(){return h()(v()().mark(function Te(){return v()().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,ue.destroy({filterByTk:Ae});case 2:se==null||se(Ae),pe();case 4:case"end":return Pe.stop()}},Te)}))()}}},P=function(se){var me=(0,m.u3)(),pe=me.state,ee=me.setState,ue=me.refresh,ge=(0,m.eS)(),Ie=ge.resource,Ae=(0,Q.$)(),Le=Ae.t;return{run:function(){return h()(v()().mark(function je(){var Pe;return v()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if(pe!=null&&(Pe=pe.selectedRowKeys)!==null&&Pe!==void 0&&Pe.length){re.next=2;break}return re.abrupt("return",n.ZP.error(Le("Please select the records you want to delete")));case 2:return re.next=4,Ie.destroy({filterByTk:(pe==null?void 0:pe.selectedRowKeys)||[]});case 4:se==null||se(pe==null?void 0:pe.selectedRowKeys),ee==null||ee({selectedRowKeys:[]}),ue();case 7:case"end":return re.stop()}},je)}))()}}},w=function(se){var me=(0,m.u3)();return(0,p.QT)(function(){return Promise.resolve(me.data)},r()(r()({},se),{},{refreshDeps:[me.data]}))},ie=function(){var se=U(),me=se.run,pe=(0,z.useCollectionManager_deprecated)(),ee=pe.refreshCM;return{run:function(){return h()(v()().mark(function ge(){return v()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,me();case 2:return Ae.next=4,ee();case 4:case"end":return Ae.stop()}},ge)}))()}}},G=function(){var se=J(),me=se.run,pe=(0,z.useCollectionManager_deprecated)(),ee=pe.refreshCM;return{run:function(){return h()(v()().mark(function ge(){return v()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,me();case 2:return Ae.next=4,ee();case 4:case"end":return Ae.stop()}},ge)}))()}}},le=function(){var se=Y(),me=se.run,pe=(0,z.useCollectionManager_deprecated)(),ee=pe.refreshCM;return{run:function(){return h()(v()().mark(function ge(){return v()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,me();case 2:return Ae.next=4,ee();case 4:case"end":return Ae.stop()}},ge)}))()}}},xe=function(se){var me=(0,b.a)();return _e(se||me)},_e=function(se){var me=se||{},pe=me.interface,ee=me.deletable,ue=ee===void 0?!0:ee;return!ue||pe==="id"},Ee=function(){var se=P(),me=se.run,pe=(0,z.useCollectionManager_deprecated)(),ee=pe.refreshCM;return{run:function(){return h()(v()().mark(function ge(){return v()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,me();case 2:return Ae.next=4,ee();case 4:case"end":return Ae.stop()}},ge)}))()}}},ze=function(){var se,me=(0,m.eS)(),pe=me.collection,ee=(0,x.V8)(pe.fields),ue=(0,m.u3)();return(0,x.tM)({options:ee.filter(function(ge){return["title","name"].includes(ge.name)}),params:((se=ue.state)===null||se===void 0||(se=se.params)===null||se===void 0?void 0:se[0])||ue.params,service:ue})}},9842:function(He,ae,e){"use strict";e.d(ae,{w:function(){return H}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(12444),C=e.n(g),A=e(72004),r=e.n(A),K=e(31996),v=e.n(K),j=e(26037),h=e.n(j),M=e(31601),n=e(88049),y=e(77269),L=e(25098),o=e.n(L),a=e(9783),R=e.n(a),E=e(34096),$=e(66704),Q=function(O){v()(t,O);var N=h()(t);function t(){var B;C()(this,t);for(var X=arguments.length,V=new Array(X),U=0;U<X;U++)V[U]=arguments[U];return B=N.call.apply(N,[this].concat(V)),R()(o()(B),"name","general"),R()(o()(B),"title",'{{t("General collection")}}'),R()(o()(B),"order",1),R()(o()(B),"color","blue"),R()(o()(B),"default",{fields:[]}),R()(o()(B),"configurableProperties",(0,$.p)("title","name","inherits","category","description","simplePaginate","presetFields")),B}return r()(t)}(E.P),z=function(O){v()(t,O);var N=h()(t);function t(){var B;C()(this,t);for(var X=arguments.length,V=new Array(X),U=0;U<X;U++)V[U]=arguments[U];return B=N.call.apply(N,[this].concat(V)),R()(o()(B),"name","tree"),R()(o()(B),"title",'{{t("Tree collection")}}'),R()(o()(B),"order",3),R()(o()(B),"color","blue"),R()(o()(B),"default",{tree:"adjacencyList",fields:[{interface:"integer",name:"parentId",type:"bigInt",isForeignKey:!0,uiSchema:{type:"number",title:'{{t("Parent ID")}}',"x-component":"InputNumber","x-read-pretty":!0}},{interface:"m2o",type:"belongsTo",name:"parent",foreignKey:"parentId",treeParent:!0,onDelete:"CASCADE",uiSchema:{title:'{{t("Parent")}}',"x-component":"AssociationField","x-component-props":{multiple:!1,fieldNames:{label:"id",value:"id"}}}},{interface:"o2m",type:"hasMany",name:"children",foreignKey:"parentId",treeChildren:!0,onDelete:"CASCADE",uiSchema:{title:'{{t("Children")}}',"x-component":"AssociationField","x-component-props":{multiple:!0,fieldNames:{label:"id",value:"id"}}}}]}),R()(o()(B),"presetFieldsDisabledIncludes",["id"]),R()(o()(B),"events",{beforeSubmit:function(ne){Array.isArray(ne==null?void 0:ne.fields)&&(ne==null||ne.fields.map(function(q){!q.target&&["belongsToMany","belongsTo","hasMany","hasOne"].includes(q.type)&&(q.target=ne.name)}))}}),R()(o()(B),"configurableProperties",(0,$.p)("title","name","inherits","category","description","presetFields")),B}return r()(t)}(E.P),p=e(97857),b=e.n(p),f=e(87078),x=e(88962),m=function(O){v()(t,O);var N=h()(t);function t(){var B;C()(this,t);for(var X=arguments.length,V=new Array(X),U=0;U<X;U++)V[U]=arguments[U];return B=N.call.apply(N,[this].concat(V)),R()(o()(B),"name","view"),R()(o()(B),"title",'{{t("Connect to database view")}}'),R()(o()(B),"order",4),R()(o()(B),"color","yellow"),R()(o()(B),"default",{fields:[]}),R()(o()(B),"divider",!0),R()(o()(B),"configurableProperties",b()({title:{type:"string",title:'{{ t("Collection display name") }}',required:!0,"x-decorator":"FormItem","x-component":"Input"},databaseView:{title:'{{t("Connect to database view")}}',type:"single",required:!0,"x-decorator":"FormItem","x-component":"Select","x-reactions":["{{useAsyncDataSource(loadDBViews)}}"],"x-disabled":"{{ !createOnly }}","x-visible":"{{!createMainOnly}}"},name:{type:"string",title:'{{t("Collection name")}}',required:!0,"x-disabled":"{{ !createOnly }}","x-decorator":"FormItem","x-component":"Input","x-validator":"uid",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}","x-reactions":{dependencies:["databaseView"],when:"{{isPG}}",fulfill:{state:{initialValue:"{{$deps[0]&&$deps[0].match(/^([^_]+)_(.*)$/)?.[2]}}"}},otherwise:{state:{value:null}}}},schema:{type:"string","x-hidden":!0,"x-reactions":{dependencies:["databaseView"],when:"{{isPG}}",fulfill:{state:{value:"{{$deps[0].split('@')?.[0]}}"}},otherwise:{state:{value:null}}}},viewName:{type:"string","x-hidden":!0,"x-reactions":{dependencies:["databaseView"],when:"{{isPG}}",fulfill:{state:{value:"{{$deps[0].split('@')?.[1]}}"}},otherwise:{state:{value:"{{$deps[0]}}"}}}},writableView:{type:"boolean","x-content":'{{t("Allow add new, update and delete actions")}}',"x-decorator":"FormItem","x-component":"Checkbox",default:!1,"x-visible":"{{!createMainOnly}}"},sources:{type:"array",title:'{{ t("Source collections") }}',"x-decorator":"FormItem","x-component":"Select","x-component-props":{multiple:!0},"x-reactions":["{{useAsyncDataSource(loadCollections)}}"],"x-disabled":!0,"x-visible":"{{!createMainOnly}}"},fields:{type:"array","x-component":f.f,"x-hidden":"{{ !createOnly }}","x-decorator":"FormItem","x-reactions":{dependencies:["name"],fulfill:{schema:{"x-component-props":"{{$form.values}}"}}},description:'{{t("Fields can only be used correctly if they are defined with an interface.")}}'},preview:{type:"void","x-visible":"{{ createOnly }}","x-component":x.S,"x-reactions":{dependencies:["name","fields"],fulfill:{schema:{"x-component-props":"{{$form.values}}"}}}},filterTargetKey:{title:'{{ t("Record unique key")}}',type:"single",description:'{{t( "If a collection lacks a primary key, you must configure a unique record key to locate row records within a block, failure to configure this will prevent the creation of data blocks for the collection.")}}',"x-decorator":"FormItem","x-component":"Select","x-component-props":{multiple:!0},"x-reactions":["{{useAsyncDataSource(loadFilterTargetKeys)}}"]}},(0,$.p)("category","description"))),B}return r()(t)}(E.P),F=e(58384),I=e(78317),d=function(O){v()(t,O);var N=h()(t);function t(){var B;C()(this,t);for(var X=arguments.length,V=new Array(X),U=0;U<X;U++)V[U]=arguments[U];return B=N.call.apply(N,[this].concat(V)),R()(o()(B),"name","sql"),R()(o()(B),"title",'{{t("SQL collection")}}'),R()(o()(B),"order",4),R()(o()(B),"color","yellow"),R()(o()(B),"default",{fields:[]}),R()(o()(B),"configurableProperties",b()({title:{type:"string",title:'{{ t("Collection display name") }}',required:!0,"x-decorator":"FormItem","x-component":"Input"},name:{type:"string",title:'{{t("Collection name")}}',required:!0,"x-disabled":"{{ !createOnly }}","x-decorator":"FormItem","x-component":"Input","x-validator":"uid",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}"},config:{type:"void","x-decorator":I._E,properties:{sql:{type:"string",title:'{{t("SQL")}}',"x-decorator":"FormItem","x-component":I.sv,required:!0,"x-validator":function(ne,q,J){var Y=J.form,P=Y.query("sql").take();return P.componentProps.disabled?"":F.a.t("Please confirm the SQL statement first")}},sources:{type:"array",title:'{{t("Source collections")}}',"x-decorator":"FormItem","x-component":"Select","x-component-props":{multiple:!0},"x-reactions":["{{useAsyncDataSource(loadCollections)}}"]},fields:{type:"array",title:'{{t("Fields")}}',"x-decorator":"FormItem","x-component":I.V0,required:!0},table:{type:"void",title:'{{t("Preview")}}',"x-decorator":"FormItem","x-component":I.SN}}},filterTargetKey:{title:'{{ t("Record unique key")}}',type:"single",description:'{{t( "If a collection lacks a primary key, you must configure a unique record key to locate row records within a block, failure to configure this will prevent the creation of data blocks for the collection.")}}',"x-decorator":"FormItem","x-component":"Select","x-component-props":{multiple:!0},"x-reactions":["{{useAsyncDataSource(loadFilterTargetKeys)}}"]}},(0,$.p)("category","description"))),B}return r()(t)}(E.P),u=e(57638),l=e(35519),S=function(O){v()(t,O);var N=h()(t);function t(){return C()(this,t),N.apply(this,arguments)}return r()(t,[{key:"getDataSource",value:function(){var B=i()(c()().mark(function V(){var U,D,ne;return c()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,this.app.apiClient.request({resource:"collections",action:"listMeta"});case 2:return D=J.sent,ne=(D==null||(U=D.data)===null||U===void 0?void 0:U.data)||[],J.abrupt("return",{collections:ne});case 5:case"end":return J.stop()}},V,this)}));function X(){return B.apply(this,arguments)}return X}()}]),t}(l.o),H=function(O){v()(t,O);var N=h()(t);function t(){return C()(this,t),N.apply(this,arguments)}return r()(t,[{key:"load",value:function(){var B=i()(c()().mark(function V(){return c()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:this.dataSourceManager.addCollectionMixins([n.d]),this.addFieldInterfaces(),this.addCollectionTemplates(),this.addFieldInterfaces(),this.addFieldInterfaceGroups(),this.addMainDataSource();case 6:case"end":return D.stop()}},V,this)}));function X(){return B.apply(this,arguments)}return X}()},{key:"addMainDataSource",value:function(){var X;((X=this.options)===null||X===void 0||(X=X.config)===null||X===void 0?void 0:X.enableRemoteDataSource)!==!1&&this.dataSourceManager.addDataSource(S,{key:u.ym,displayName:u.UC})}},{key:"addFieldInterfaceGroups",value:function(){this.dataSourceManager.addFieldInterfaceGroups({basic:{label:'{{t("Basic")}}'},choices:{label:'{{t("Choices")}}'},media:{label:'{{t("Media")}}'},datetime:{label:'{{t("Date & Time")}}'},relation:{label:'{{t("Relation")}}'},advanced:{label:'{{t("Advanced type")}}'},systemInfo:{label:'{{t("System info")}}'},others:{label:'{{t("Others")}}'}})}},{key:"addFieldInterfaces",value:function(){this.dataSourceManager.addFieldInterfaces([y.gV,y.kN,y.fe,y.uK,y.O6,y.M6,y.kE,y.mb,y.hF,y.Op,y.MF,y.E$,y.V1,y.ck,y.MU,y.mc,y.Rh,y.AU,y.hy,y.zG,y.Yj,y.Ax,y.sy,y.sG,y.GK,y.Hz,y.yN,y.UZ,y.ti,y.xo,y.g3,y.zp,y.Hw,y.Sw,y.rb,y.lS,y.B7,y.rB,y.Dr,y.Bh,y.xl])}},{key:"addCollectionTemplates",value:function(){this.dataSourceManager.addCollectionTemplates([Q,d,z,m])}}]),t}(M.S)},91970:function(He,ae,e){"use strict";e.d(ae,{g:function(){return c}});var Z=e(67294),c=(0,Z.createContext)({data:[],refresh:function(){}});c.displayName="CollectionCategoriesContext"},29796:function(He,ae,e){"use strict";e.d(ae,{s7:function(){return j},Wm:function(){return r},Bu:function(){return K.B},UJ:function(){return Z.U}});var Z=e(7939),c=e(97857),k=e.n(c),i=e(12174),g=e(67668),C=e(36586),A=e(62954),r=function(){var M=(0,Z.U)(),n=(0,C.a)(),y=(0,i.LY)(),L=(0,A.eJW)(),o=(0,g.Hy)();if(!o)return{};var a="".concat((o==null?void 0:o.collectionName)||(M==null?void 0:M.name),".").concat(o.name),R=y==null?void 0:y.resource(a,n[o.sourceKey]);return k()(k()({},o),{},{uiSchema:L(o.uiSchema),resource:R})},K=e(99986),v=e(85667);function j(h){var M=(0,A.eJW)(),n=(0,K.B)(),y=n.collections,L=y===void 0?[]:y;return function(o){v.action.bound(function(a){var R=typeof h=="function"?a.filter(h):a;o.dataSource=R.map(function(E){return{label:M(E.title),value:E.name}})})(L)}}},99986:function(He,ae,e){"use strict";e.d(ae,{B:function(){return L}});var Z=e(19632),c=e.n(Z),k=e(97857),i=e.n(k),g=e(5574),C=e.n(g),A=e(84327),r=e(96486),K=e.n(r),v=e(67294),j=e(35746),h=e(57638),M=e(13511),n=e(44990),y=e(62954),L=function(a){var R=(0,M.fp)(),E=(0,n.wl)(),$=(0,j.d9)(),Q=a||(E==null?void 0:E.key)||void 0,z=(0,v.useState)((0,A.uid)()),p=C()(z,2),b=p[0],f=p[1],x=(0,y.Dmu)(),m=x.refresh,F=(0,v.useMemo)(function(){var G;return R==null||(G=R.collectionFieldInterfaceManager)===null||G===void 0?void 0:G.getFieldInterfaces().reduce(function(le,xe){return le[xe.name]=xe,le},{})},[R,b]),I=(0,v.useMemo)(function(){return R==null?void 0:R.collectionTemplateManager.getCollectionTemplates()},[R,b]),d=(0,v.useCallback)(function(){var G;return R==null||(G=R.getDataSource(Q))===null||G===void 0||(G=G.collectionManager)===null||G===void 0?void 0:G.getCollections().map(function(le){return le.getOptions()})},[R,E]),u=(0,v.useCallback)(function(G){var le;return $&&!G?$:R==null||(le=R.getDataSource(G||Q))===null||le===void 0?void 0:le.collectionManager},[$,R,Q]),l=(0,v.useMemo)(function(){var G;return R==null||(G=R.getDataSource(h.ym))===null||G===void 0||(G=G.collectionManager)===null||G===void 0?void 0:G.getCollections()},[R,b]),S=(0,v.useCallback)(function(){return R==null?void 0:R.getDataSource(h.ym).reload().then(function(){m(),f((0,A.uid)())})},[R]),H=(0,v.useCallback)(function(){return R==null?void 0:R.getDataSource(h.ym).reload().then(function(){m(),f((0,A.uid)())})},[R]),O=(0,y.eJW)(),N=(0,v.useCallback)(function(G,le){var xe;return((xe=u(le))===null||xe===void 0||(xe=xe.getCollection(G))===null||xe===void 0?void 0:xe.getInheritedFields())||[]},[R,u]),t=(0,v.useCallback)(function(G,le){var xe,_e;if(!G)return[];var Ee=(xe=u(le))===null||xe===void 0?void 0:xe.getCollection(G);return(Ee==null||(_e=Ee.getAllFields)===null||_e===void 0?void 0:_e.call(Ee))||(Ee==null?void 0:Ee.getFields())||[]},[R,u]),B=(0,v.useCallback)(function(G,le){var xe;if(!(!G||G.split(".").length<2))return(xe=u(le))===null||xe===void 0?void 0:xe.getCollectionField(G)},[R,u]),X=(0,v.useCallback)(function(G,le){var xe;return G?((xe=u(le))===null||xe===void 0||(xe=xe.getCollection(G))===null||xe===void 0?void 0:xe.getParentCollectionsName())||[]:[]},[R,u]),V=(0,v.useCallback)(function(G){var le,xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_e=arguments.length>2?arguments[2]:void 0;if(!G)return[];var Ee=(le=u(_e))===null||le===void 0?void 0:le.getCollection(G),ze=Ee==null?void 0:Ee.getChildrenCollections(xe);return ze||[]},[R,u]),U=(0,v.useCallback)(function(G,le){var xe;return G?((xe=u(le))===null||xe===void 0||(xe=xe.getCollection(G))===null||xe===void 0?void 0:xe.getCurrentFields())||[]:[]},[R,u]),D=(0,v.useCallback)(function(G,le,xe,_e){var Ee,ze=_e||{},Se=ze.association,se=Se===void 0?!1:Se,me=ze.cached,pe=me===void 0?{}:me,ee=ze.collectionNames,ue=ee===void 0?[G]:ee,ge=ze.maxDepth,Ie=ge===void 0?1:ge,Ae=ze.allowAllTypes,Le=Ae===void 0?!1:Ae,Te=ze.exceptInterfaces,je=Te===void 0?[]:Te,Pe=ze.prefixFieldValue,fe=Pe===void 0?"":Pe,re=ze.usePrefix,T=re===void 0?!1:re,ce=ze.dataSource;if(!(ue.length-1>Ie)){if(pe[G])return K().cloneDeep(pe[G]);le&&typeof le=="string"&&(le=[le]),xe&&typeof xe=="string"&&(xe=[xe]);var be=t(G,ce),oe=be==null||(Ee=be.filter(function(Re){return Re.interface&&!je.includes(Re.interface)&&(Le||le&&le.includes(Re.type)||xe&&xe.includes(Re.interface)||(se&&Re.target&&Re.target!==G&&Array.isArray(se)?se.includes(Re.interface):!1))}))===null||Ee===void 0?void 0:Ee.map(function(Re){var Ze,We=i()({value:T&&fe?"".concat(fe,".").concat(Re.name):Re.name,label:O(Re==null||(Ze=Re.uiSchema)===null||Ze===void 0?void 0:Ze.title)||Re.name},Re);if(se&&Re.target){var tt;if(We.children=ue.includes(Re.target)?[]:D(Re.target,le,xe,i()(i()({},_e),{},{cached:pe,dataSource:ce,collectionNames:[].concat(c()(ue),[Re.target]),prefixFieldValue:T?fe?"".concat(fe,".").concat(Re.name):Re.name:"",usePrefix:T})),!((tt=We.children)!==null&&tt!==void 0&&tt.length))return null}return We}).filter(Boolean);return pe[G]=oe,oe}},[t]),ne=(0,v.useCallback)(function(G,le){var xe;return(xe=u(le))===null||xe===void 0?void 0:xe.getCollection(G)},[R,u]),q=(0,v.useCallback)(function(G,le){var xe;return(xe=u(le))===null||xe===void 0||(xe=xe.getCollection(G))===null||xe===void 0?void 0:xe.getAllCollectionsInheritChain()},[R,u]),J=(0,v.useCallback)(function(G,le){return function(){var xe;return(xe=u(le))===null||xe===void 0||(xe=xe.getCollection(G))===null||xe===void 0?void 0:xe.getInheritCollectionsChain()}},[R,u]),Y=(0,v.useCallback)(function(G){return R==null?void 0:R.collectionFieldInterfaceManager.getFieldInterface(G)},[R]),P=(0,v.useCallback)(function(G){var le;return(le=Y(G.interface))===null||le===void 0?void 0:le.titleUsable},[Y]),w=(0,v.useCallback)(function(G,le,xe){var _e;return(_e=u(xe))===null||_e===void 0||(_e=_e.getCollection(le))===null||_e===void 0?void 0:_e.getParentCollectionFields(G)},[R,u]),ie=(0,v.useCallback)(function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"general";return R==null?void 0:R.collectionTemplateManager.getCollectionTemplate(G)},[R]);return{service:S,interfaces:F,collections:l,templates:I,getTemplate:ie,getInterface:Y,getCollections:d,getParentCollectionFields:w,getInheritCollections:X,getChildrenCollections:V,refreshCM:H,get:ne,getInheritedFields:N,getCollectionField:B,getCollectionFields:t,getCollectionFieldsOptions:D,getCurrentCollectionFields:U,getCollection:ne,getCollectionJoinField:B,getAllCollectionsInheritChain:q,getInheritCollectionsChain:J,isTitleField:P}}},7939:function(He,ae,e){"use strict";e.d(ae,{U:function(){return C}});var Z=e(97857),c=e.n(Z),k=e(12174),i=e(67294),g=e(58837),C=function(){var r,K=(0,g.Kx)(),v=(0,k.LY)(),j=v==null?void 0:v.resource(K==null?void 0:K.name),h=(0,i.useMemo)(function(){return(K==null?void 0:K.fields)||[]},[K]),M=(0,i.useMemo)(function(){var R;return(K==null||(R=K.getInheritedFields)===null||R===void 0?void 0:R.call(K))||[]},[K]),n=(0,i.useMemo)(function(){var R,E;return(K==null||(R=K.getAllFields)===null||R===void 0?void 0:R.call(K))||(K==null||(E=K.getFields)===null||E===void 0?void 0:E.call(K))||[]},[K]),y=(0,i.useMemo)(function(){var R;return(K==null||(R=K.getForeignKeyFields)===null||R===void 0?void 0:R.call(K))||[]},[K]),L=(0,i.useCallback)(function(){return n==null?void 0:n.find(function(R){return R.treeParent})},[n]),o=(0,i.useCallback)(function(R){var E;return K==null||(E=K.getField)===null||E===void 0?void 0:E.call(K,R)},[K]),a=(0,i.useCallback)(function(){return K==null?void 0:K.getPrimaryKey()},[K]);return c()(c()({},K==null||(r=K.getOptions)===null||r===void 0?void 0:r.call(K)),{},{resource:j,getTreeParentField:L,fields:n,getField:o,getPrimaryKey:a,currentFields:h,inheritedFields:M,foreignKeyFields:y})}},6145:function(He,ae,e){"use strict";e.r(ae),e.d(ae,{AddCollection:function(){return g.b4},AddCollectionAction:function(){return g.F3},AddCollectionField:function(){return g.rz},AddFieldAction:function(){return g.eD},AddSubFieldAction:function(){return g.WJ},CheckboxFieldInterface:function(){return a.gV},CheckboxGroupFieldInterface:function(){return a.kN},CollectionCategoriesContext:function(){return A.g},CollectionCategoriesProvider:function(){return c.T2},CollectionCategory:function(){return g.hU},CollectionFieldInterfaceTag:function(){return g.Hr},CollectionHistoryProvider:function(){return Q.iJ},CollectionManagerProvider_deprecated:function(){return c.GP},CollectionManagerSchemaComponentProvider:function(){return k.E},CollectionPlugin:function(){return R.w},CollectionProvider_deprecated:function(){return i.o},CollectionSelectFieldInterface:function(){return a.fe},CollectionTemplateTag:function(){return g.CE},ColorFieldInterface:function(){return a.uK},CreatedAtFieldInterface:function(){return a.O6},CreatedByFieldInterface:function(){return a.M6},DataSourceContext_deprecated:function(){return $.Nz},DataSourceProvider_deprecated:function(){return $.PI},DateFieldInterface:function(){return a.Bh},DatetimeFieldInterface:function(){return a.kE},DatetimeNoTzFieldInterface:function(){return a.xl},DeleteCollection:function(){return g.fe},DeleteCollectionAction:function(){return g._L},DuplicateCollection:function(){return g.QO},DuplicateCollectionAction:function(){return g.lz},EditCollection:function(){return g.Qb},EditCollectionAction:function(){return g.g3},EditCollectionField:function(){return g.qF},EditFieldAction:function(){return g.b3},EditSubFieldAction:function(){return g.oq},EmailFieldInterface:function(){return a.mb},FieldSummary:function(){return g.Np},ForeignKey:function(){return g.s9},IconFieldInterface:function(){return a.hF},IdFieldInterface:function(){return a.Op},InheritanceCollectionMixin:function(){return E.d},InputFieldInterface:function(){return a.MF},IntegerFieldInterface:function(){return a.E$},JsonFieldInterface:function(){return a.V1},LinkToFieldInterface:function(){return a.ck},M2MFieldInterface:function(){return a.MU},M2OFieldInterface:function(){return a.mc},MarkdownFieldInterface:function(){return a.Rh},MultipleSelectFieldInterface:function(){return a.AU},NanoidFieldInterface:function(){return a.rB},NumberFieldInterface:function(){return a.hy},O2MFieldInterface:function(){return a.zG},O2OFieldInterface:function(){return a.Yj},OBOFieldInterface:function(){return a.sy},OHOFieldInterface:function(){return a.Ax},OverridingCollectionField:function(){return g.kO},OverridingFieldAction:function(){return g.DF},PasswordFieldInterface:function(){return a.sG},PercentFieldInterface:function(){return a.GK},PhoneFieldInterface:function(){return a.Hz},RadioGroupFieldInterface:function(){return a.yN},RemoteCollectionManagerProvider:function(){return c.Fq},ResourceActionContext:function(){return v.rf},ResourceActionProvider:function(){return v.pv},RichTextFieldInterface:function(){return a.UZ},SelectFieldInterface:function(){return a.ti},SourceCollection:function(){return g.c9},SourceForeignKey:function(){return g.vw},SourceKey:function(){return g.sc},SubFieldDataSourceProvider_deprecated:function(){return $.m1},SubTableFieldInterface:function(){return a.xo},SyncFieldsAction:function(){return g.Tf},SyncFieldsActionCom:function(){return g.Z9},SyncSQLFieldsAction:function(){return g.rs},TableoidFieldInterface:function(){return a.g3},TargetForeignKey:function(){return g.YE},TargetKey:function(){return g._i},TemplateSummary:function(){return g.$E},TextareaFieldInterface:function(){return a.zp},ThroughCollection:function(){return g.JN},ThroughForeignKey:function(){return g.HO},TimeFieldInterface:function(){return a.Hw},UUIDFieldInterface:function(){return a.B7},UnSupportFields:function(){return p.r},UnixTimestampFieldInterface:function(){return a.Dr},UpdatedAtFieldInterface:function(){return a.Sw},UpdatedByFieldInterface:function(){return a.rb},UrlFieldInterface:function(){return a.lS},ViewCollectionField:function(){return g.xs},ViewFieldAction:function(){return g.eu},autoFill:function(){return K.autoFill},autoIncrement:function(){return K.autoIncrement},collectionDataSource:function(){return K.collectionDataSource},constraintsProps:function(){return K.constraintsProps},dataSource:function(){return K.dataSource},dateTimeProps:function(){return K.dateTimeProps},defaultProps:function(){return K.defaultProps},ds:function(){return $.ds},getConfigurableProperties:function(){return j.p},getUniqueKeyFromCollection:function(){return a.in},interfacesProperties:function(){return K},isDeleteButtonDisabled:function(){return Z.isDeleteButtonDisabled},joinCollectionName:function(){return z.l},operators:function(){return K.operators},parseCollectionName:function(){return z.U},primaryKey:function(){return K.primaryKey},recordPickerViewer:function(){return K.recordPickerViewer},relationshipType:function(){return K.relationshipType},reverseFieldProperties:function(){return K.reverseFieldProperties},timeProps:function(){return K.timeProps},type:function(){return K.type},unique:function(){return K.unique},useBulkDestroyAction:function(){return g.x8},useBulkDestroyActionAndRefreshCM:function(){return g.tM},useCancelAction:function(){return Z.useCancelAction},useCollectionDataSource:function(){return r.s7},useCollectionFieldFormValues:function(){return g.jI},useCollectionField_deprecated:function(){return r.Wm},useCollectionFieldsOptions:function(){return Z.useCollectionFieldsOptions},useCollectionFilterOptions:function(){return Z.useCollectionFilterOptions},useCollectionHistory:function(){return Q.nh},useCollectionManager_deprecated:function(){return r.Bu},useCollection_deprecated:function(){return r.UJ},useDataSourceFromRAC:function(){return v.KD},useDestroyAction:function(){return g.RD},useDestroyActionAndRefreshCM:function(){return g.aX},useFieldInterfaceOptions:function(){return C.r},useHistoryCollectionsByNames:function(){return Q.LE},useLinkageCollectionFilterOptions:function(){return Z.useLinkageCollectionFilterOptions},useRemoteCollectionManagerLoading:function(){return c.Kk},useResourceActionContext:function(){return v.u3},useResourceContext:function(){return v.eS},useSortFields:function(){return Z.useSortFields},useUpdateCollectionActionAndRefreshCM:function(){return g.EB},useValuesFromRecord:function(){return g.d8}});var Z=e(44355),c=e(54195),k=e(76896),i=e(52028),g=e(50567),C=e(47047),A=e(91970),r=e(29796),K=e(65375),v=e(63250),j=e(66704),h=e(44605),M=e.n(h),o={};for(var n in h)["default","useCancelAction","useCollectionFilterOptions","useSortFields","useLinkageCollectionFilterOptions","useCollectionFieldsOptions","isDeleteButtonDisabled","useFieldInterfaceOptions","interfacesProperties","getConfigurableProperties","UnSupportFields","CollectionCategoriesProvider","CollectionManagerProvider_deprecated","RemoteCollectionManagerProvider","useRemoteCollectionManagerLoading","CollectionManagerSchemaComponentProvider","CollectionProvider_deprecated","AddCollection","AddCollectionAction","AddCollectionField","AddFieldAction","AddSubFieldAction","CollectionCategory","CollectionFieldInterfaceTag","CollectionTemplateTag","DeleteCollection","DeleteCollectionAction","DuplicateCollection","DuplicateCollectionAction","EditCollection","EditCollectionAction","EditCollectionField","EditFieldAction","EditSubFieldAction","FieldSummary","ForeignKey","OverridingCollectionField","OverridingFieldAction","SourceCollection","SourceForeignKey","SourceKey","SyncFieldsAction","SyncFieldsActionCom","SyncSQLFieldsAction","TargetForeignKey","TargetKey","TemplateSummary","ThroughCollection","ThroughForeignKey","ViewCollectionField","ViewFieldAction","useBulkDestroyAction","useBulkDestroyActionAndRefreshCM","useCollectionFieldFormValues","useDestroyAction","useDestroyActionAndRefreshCM","useUpdateCollectionActionAndRefreshCM","useValuesFromRecord","CollectionCategoriesContext","useCollectionDataSource","useCollectionField_deprecated","useCollectionManager_deprecated","useCollection_deprecated","ResourceActionContext","ResourceActionProvider","useDataSourceFromRAC","useResourceActionContext","useResourceContext"].indexOf(n)<0&&(o[n]=function(b){return h[b]}.bind(0,n));e.d(ae,o);var y=e(53772),L=e.n(y),o={};for(var n in y)["default","useCancelAction","useCollectionFilterOptions","useSortFields","useLinkageCollectionFilterOptions","useCollectionFieldsOptions","isDeleteButtonDisabled","useFieldInterfaceOptions","interfacesProperties","getConfigurableProperties","UnSupportFields","CollectionCategoriesProvider","CollectionManagerProvider_deprecated","RemoteCollectionManagerProvider","useRemoteCollectionManagerLoading","CollectionManagerSchemaComponentProvider","CollectionProvider_deprecated","AddCollection","AddCollectionAction","AddCollectionField","AddFieldAction","AddSubFieldAction","CollectionCategory","CollectionFieldInterfaceTag","CollectionTemplateTag","DeleteCollection","DeleteCollectionAction","DuplicateCollection","DuplicateCollectionAction","EditCollection","EditCollectionAction","EditCollectionField","EditFieldAction","EditSubFieldAction","FieldSummary","ForeignKey","OverridingCollectionField","OverridingFieldAction","SourceCollection","SourceForeignKey","SourceKey","SyncFieldsAction","SyncFieldsActionCom","SyncSQLFieldsAction","TargetForeignKey","TargetKey","TemplateSummary","ThroughCollection","ThroughForeignKey","ViewCollectionField","ViewFieldAction","useBulkDestroyAction","useBulkDestroyActionAndRefreshCM","useCollectionFieldFormValues","useDestroyAction","useDestroyActionAndRefreshCM","useUpdateCollectionActionAndRefreshCM","useValuesFromRecord","CollectionCategoriesContext","useCollectionDataSource","useCollectionField_deprecated","useCollectionManager_deprecated","useCollection_deprecated","ResourceActionContext","ResourceActionProvider","useDataSourceFromRAC","useResourceActionContext","useResourceContext"].indexOf(n)<0&&(o[n]=function(f){return y[f]}.bind(0,n));e.d(ae,o);var a=e(77269),R=e(9842),E=e(88049),$=e(40802),Q=e(67574),z=e(99899),p=e(95193)},77269:function(He,ae,e){"use strict";e.d(ae,{gV:function(){return o},kN:function(){return R},fe:function(){return E},uK:function(){return $},O6:function(){return Q},M6:function(){return p},Bh:function(){return Te},kE:function(){return b},xl:function(){return je},mb:function(){return f},hF:function(){return x},Op:function(){return m},MF:function(){return l},E$:function(){return H},V1:function(){return B},ck:function(){return X},MU:function(){return U},mc:function(){return D},Rh:function(){return ne},AU:function(){return q},rB:function(){return Ae},hy:function(){return J},zG:function(){return Y},Yj:function(){return P},sy:function(){return ie},Ax:function(){return w},sG:function(){return G},GK:function(){return le},Hz:function(){return xe},yN:function(){return _e},UZ:function(){return Ee},ti:function(){return ze},xo:function(){return Se},g3:function(){return se},zp:function(){return me},Hw:function(){return pe},B7:function(){return Ie},Dr:function(){return Le},Sw:function(){return ee},rb:function(){return ue},lS:function(){return ge},in:function(){return V}});var Z=e(97857),c=e.n(Z),k=e(12444),i=e.n(k),g=e(72004),C=e.n(g),A=e(25098),r=e.n(A),K=e(31996),v=e.n(K),j=e(26037),h=e.n(j),M=e(9783),n=e.n(M),y=e(6145),L=e(31959),o=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","checkbox"),n()(r()(T),"type","object"),n()(r()(T),"group","choices"),n()(r()(T),"order",1),n()(r()(T),"title",'{{t("Checkbox")}}'),n()(r()(T),"default",{type:"boolean",uiSchema:{type:"boolean","x-component":"Checkbox"}}),n()(r()(T),"availableTypes",["boolean","integer","bigInt"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()({},y.defaultProps)),n()(r()(T),"filterable",{operators:y.operators.boolean}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.block;["Table","Kanban"].includes(oe)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0)}}]),re}(L.S),a=e(65375),R=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","checkboxGroup"),n()(r()(T),"type","object"),n()(r()(T),"group","choices"),n()(r()(T),"order",5),n()(r()(T),"title",'{{t("Checkbox group")}}'),n()(r()(T),"default",{interface:"checkboxGroup",type:"array",defaultValue:[],uiSchema:{type:"string","x-component":"Checkbox.Group"}}),n()(r()(T),"availableTypes",["array","json"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{"uiSchema.enum":a.dataSource})),n()(r()(T),"filterable",{operators:a.operators.array}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.block;["Table","Kanban"].includes(oe)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0)}}]),re}(L.S),E=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","collection"),n()(r()(T),"type","string"),n()(r()(T),"group","advanced"),n()(r()(T),"order",5),n()(r()(T),"title",'{{t("Collection selector")}}'),n()(r()(T),"description",'{{t("Providing certain collections as options for users, typically used in polymorphic or inheritance scenarios")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"string",uiSchema:{type:"string","x-component":"CollectionSelect"}}),n()(r()(T),"availableTypes",["string"]),n()(r()(T),"hasDefaultValue",!1),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{"uiSchema.enum":a.collectionDataSource})),n()(r()(T),"filterable",{operators:a.operators.collection}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.block,Re=ce["x-component-props"]=ce["x-component-props"]||{};Re.style=c()(c()({},Re.style||{}),{},{width:"100%"}),["Table","Kanban"].includes(oe)&&(Re.ellipsis=!0)}}]),re}(L.S),$=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","color"),n()(r()(T),"type","object"),n()(r()(T),"group","basic"),n()(r()(T),"order",10),n()(r()(T),"title",'{{t("Color")}}'),n()(r()(T),"default",{type:"string",uiSchema:{type:"string","x-component":"ColorPicker",default:"#1677FF"}}),n()(r()(T),"availableTypes",["string"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()({},a.defaultProps)),n()(r()(T),"filterable",{operators:a.operators.string}),T}return C()(re)}(L.S),Q=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","createdAt"),n()(r()(T),"type","object"),n()(r()(T),"group","systemInfo"),n()(r()(T),"order",1),n()(r()(T),"title",'{{t("Created at")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"date",field:"createdAt",uiSchema:{type:"datetime",title:'{{t("Created at")}}',"x-component":"DatePicker","x-component-props":{},"x-read-pretty":!0}}),n()(r()(T),"description",'{{t("Store the creation time of each record")}}'),n()(r()(T),"availableTypes",[]),n()(r()(T),"properties",c()(c()({},a.defaultProps),a.dateTimeProps)),n()(r()(T),"filterable",{operators:a.operators.datetime}),n()(r()(T),"titleUsable",!0),T}return C()(re)}(L.S),z=e(96486),p=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","createdBy"),n()(r()(T),"type","object"),n()(r()(T),"group","systemInfo"),n()(r()(T),"order",3),n()(r()(T),"title",'{{t("Created by")}}'),n()(r()(T),"isAssociation",!0),n()(r()(T),"default",{type:"belongsTo",target:"users",foreignKey:"createdById",uiSchema:{type:"object",title:'{{t("Created by")}}',"x-component":"AssociationField","x-component-props":{fieldNames:{value:"id",label:"nickname"}},"x-read-pretty":!0}}),n()(r()(T),"availableTypes",["belongsTo"]),n()(r()(T),"properties",c()({},a.defaultProps)),n()(r()(T),"filterable",{nested:!0,children:[]}),n()(r()(T),"description",'{{t("Store the creation user of each record")}}'),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.block;ce.properties={viewer:(0,z.cloneDeep)(a.recordPickerViewer)},["Table","Kanban"].includes(oe)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0)}}]),re}(L.S),b=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","datetime"),n()(r()(T),"type","object"),n()(r()(T),"group","datetime"),n()(r()(T),"order",1),n()(r()(T),"title",'{{t("Datetime (with time zone)")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"date",defaultToCurrentTime:!1,onUpdateToCurrentTime:!1,timezone:!0,uiSchema:{type:"string","x-component":"DatePicker","x-component-props":{showTime:!1,utc:!0}}}),n()(r()(T),"availableTypes",["date","string","datetime","datetimeTz"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()(c()({},a.defaultProps),a.dateTimeProps),{},{defaultToCurrentTime:{type:"boolean","x-decorator":"FormItem","x-component":"Checkbox","x-content":'{{t("Default value to current time")}}'},onUpdateToCurrentTime:{type:"boolean","x-decorator":"FormItem","x-component":"Checkbox","x-content":'{{t("Automatically update timestamp on update")}}'},"uiSchema.x-component-props.gmt":{type:"boolean",title:'{{t("GMT")}}',"x-hidden":!0,"x-component":"Checkbox","x-content":'{{t("Use the same time zone (GMT) for all users")}}',"x-decorator":"FormItem",default:!1}})),n()(r()(T),"filterable",{operators:a.operators.datetime}),n()(r()(T),"titleUsable",!0),T}return C()(re)}(L.S),f=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","email"),n()(r()(T),"type","object"),n()(r()(T),"group","basic"),n()(r()(T),"order",4),n()(r()(T),"title",'{{t("Email")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"string",uiSchema:{type:"string","x-component":"Input","x-validator":"email"}}),n()(r()(T),"availableTypes",["string"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{unique:a.unique})),n()(r()(T),"filterable",{operators:a.operators.string}),n()(r()(T),"titleUsable",!0),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.block;["Table","Kanban"].includes(oe)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0)}}]),re}(L.S),x=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","icon"),n()(r()(T),"type","object"),n()(r()(T),"group","basic"),n()(r()(T),"order",10),n()(r()(T),"title",'{{t("Icon")}}'),n()(r()(T),"default",{type:"string",uiSchema:{type:"string","x-component":"IconPicker"}}),n()(r()(T),"availableTypes",["string"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()({},a.defaultProps)),T}return C()(re)}(L.S),m=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","id"),n()(r()(T),"type","object"),n()(r()(T),"group","systemInfo"),n()(r()(T),"order",0),n()(r()(T),"title",'{{t("ID")}}'),n()(r()(T),"hidden",!0),n()(r()(T),"sortable",!0),n()(r()(T),"default",{name:"id",type:"bigInt",autoIncrement:!0,primaryKey:!0,allowNull:!1,uiSchema:{type:"number",title:'{{t("ID")}}',"x-component":"InputNumber","x-read-pretty":!0}}),n()(r()(T),"availableTypes",["bigInt","integer"]),n()(r()(T),"properties",{"uiSchema.title":{type:"string",title:'{{t("Field display name")}}',required:!0,default:"ID","x-decorator":"FormItem","x-component":"Input"},name:{type:"string",title:'{{t("Field name")}}',required:!0,"x-disabled":!0,"x-decorator":"FormItem","x-component":"Input",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}"}}),n()(r()(T),"filterable",{operators:a.operators.id}),n()(r()(T),"description",'{{t("Primary key, unique identifier, self growth") }}'),n()(r()(T),"titleUsable",!0),T}return C()(re)}(L.S),F=e(84327),I=e(50754),d=e(58384),u=function(fe){if((0,F.isArr)(fe)){for(var re=0;re<fe.length;re++)if((0,F.isValid)(fe[re]))return!1;return!0}else{if(fe!=null&&fe.getCurrentContent){var T;return!((T=fe.getCurrentContent())!==null&&T!==void 0&&T.hasText())}return(0,F.isEmpty)(fe)}};(0,I.registerValidateRules)({username:function(fe){return/^[^@.<>"'/]{1,50}$/.test(fe)||d.a.t(`Must be 1-50 characters in length (excluding @.<>"'/)`)},required:function(fe,re){return re.required===!1?"":(typeof fe=="string"&&(fe=fe.trim()),u(fe)?re.message:"")}});var l=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","input"),n()(r()(T),"type","object"),n()(r()(T),"group","basic"),n()(r()(T),"order",1),n()(r()(T),"title",'{{t("Single line text")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{interface:"input",type:"string",uiSchema:{type:"string","x-component":"Input"}}),n()(r()(T),"availableTypes",["string","uid"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{layout:{type:"void",title:'{{t("Index")}}',"x-component":"Space","x-decorator":"FormItem","x-decorator-props":{style:{marginBottom:"0px"}},properties:{primaryKey:a.primaryKey,unique:a.unique}}})),n()(r()(T),"filterable",{operators:a.operators.string}),n()(r()(T),"titleUsable",!0),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.block;["Table","Kanban"].includes(oe)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0)}},{key:"validateSchema",value:function(ce){return{max:{type:"number",title:'{{ t("Max length") }}',minimum:0,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{precision:0},"x-reactions":`{{(field) => {
          const targetValue = field.query('.min').value();
          field.selfErrors =
            !!targetValue && !!field.value && targetValue > field.value ? '`.concat(d.a.t("Max length must greater than min length"),`' : ''
        }}}`)},min:{type:"number",title:'{{ t("Min length") }}',minimum:0,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{precision:0},"x-reactions":{dependencies:[".max"],fulfill:{state:{selfErrors:"{{!!$deps[0] && !!$self.value && $deps[0] < $self.value ? '".concat(d.a.t("Min length must less than max length"),"' : ''}}")}}}},len:{type:"number",title:'{{ t("Length") }}',minimum:0,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{precision:0}},format:{type:"string",title:'{{ t("Format") }}',"x-decorator":"FormItem","x-component":"Select","x-component-props":{allowClear:!0},enum:[{label:'{{ t("url") }}',value:"url"},{label:'{{ t("email") }}',value:"email"},{label:'{{ t("ipv6") }}',value:"ipv6"},{label:'{{ t("ipv4") }}',value:"ipv4"},{label:'{{ t("number") }}',value:"number"},{label:'{{ t("integer") }}',value:"integer"},{label:'{{ t("idcard") }}',value:"idcard"},{label:'{{ t("qq") }}',value:"qq"},{label:'{{ t("phone") }}',value:"phone"},{label:'{{ t("money") }}',value:"money"},{label:'{{ t("zh") }}',value:"zh"},{label:'{{ t("date") }}',value:"date"},{label:'{{ t("zip") }}',value:"zip"}]},pattern:{type:"string",title:'{{ t("Regular expression") }}',"x-decorator":"FormItem","x-component":"Input","x-component-props":{prefix:"/",suffix:"/"}}}}}]),re}(L.S),S=e(86201);(0,S.registerValidateFormats)({odd:/^-?\d*[13579]$/,even:/^-?\d*[02468]$/});var H=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","integer"),n()(r()(T),"type","object"),n()(r()(T),"group","basic"),n()(r()(T),"order",6),n()(r()(T),"title",'{{t("Integer")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"bigInt",uiSchema:{type:"number","x-component":"InputNumber","x-component-props":{stringMode:!0,step:"1"},"x-validator":"integer"}}),n()(r()(T),"availableTypes",["bigInt","integer","sort"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{layout:{type:"void",title:'{{t("Index")}}',"x-component":"Space","x-decorator":"FormItem","x-decorator-props":{style:{marginBottom:"0px"}},properties:{primaryKey:a.primaryKey,unique:a.unique}},autoIncrement:a.autoIncrement})),n()(r()(T),"filterable",{operators:a.operators.number}),n()(r()(T),"titleUsable",!0),n()(r()(T),"validateSchema",function(Re){return{maximum:{type:"number",title:'{{ t("Maximum") }}',"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{precision:0},"x-reactions":`{{(field) => {
          const targetValue = field.query('.minimum').value();
          field.selfErrors =
            !!targetValue && !!field.value && targetValue > field.value ? '`.concat(d.a.t("Maximum must greater than minimum"),`' : ''
        }}}`)},minimum:{type:"number",title:'{{ t("Minimum") }}',"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{precision:0},"x-reactions":{dependencies:[".maximum"],fulfill:{state:{selfErrors:"{{!!$deps[0] && !!$self.value && $deps[0] < $self.value ? '".concat(d.a.t("Minimum must less than maximum"),"' : ''}}")}}}},format:{type:"string",title:'{{ t("Format") }}',"x-decorator":"FormItem","x-component":"Select","x-component-props":{allowClear:!0},enum:[{label:'{{ t("Odd") }}',value:"odd"},{label:'{{ t("Even") }}',value:"even"}]},pattern:{type:"string",title:'{{ t("Regular expression") }}',"x-decorator":"FormItem","x-component":"Input","x-component-props":{prefix:"/",suffix:"/"}}}}),T}return C()(re)}(L.S),O=e(5552),N=e(67294),t=e(85893);(0,S.registerValidateRules)({json:function(fe){try{return JSON.parse(fe),!0}catch(re){return{type:"error",message:re.message}}}});var B=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","json"),n()(r()(T),"type","object"),n()(r()(T),"group","advanced"),n()(r()(T),"order",4),n()(r()(T),"title",'{{t("JSON")}}'),n()(r()(T),"sortable",!1),n()(r()(T),"default",{type:"json",uiSchema:{type:"object","x-component":"Input.JSON","x-component-props":{autoSize:{minRows:5}},default:null}}),n()(r()(T),"availableTypes",["json","array","set","jsonb","text","circle","lineString","point","polygon"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{jsonb:{type:"boolean",title:"JSONB","x-decorator":function(Ze){var We=Ze.children;return(0,t.jsx)(O.FormLayout,{children:(0,t.jsx)(O.FormItem,{children:We})})},"x-component":"Checkbox","x-hidden":"{{ !isDialect('postgres') }}","x-disabled":"{{ disabledJSONB }}"}})),T}return C()(re)}(L.S),X=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","linkTo"),n()(r()(T),"type","object"),n()(r()(T),"group","relation"),n()(r()(T),"order",1),n()(r()(T),"title",'{{t("Link to")}}'),n()(r()(T),"description",'{{t("Link to description")}}'),n()(r()(T),"isAssociation",!0),n()(r()(T),"default",{type:"belongsToMany",uiSchema:{"x-component":"AssociationField","x-component-props":{multiple:!0,fieldNames:{label:"id",value:"id"}}},reverseField:{interface:"linkTo",type:"belongsToMany",uiSchema:{"x-component":"AssociationField","x-component-props":{multiple:!0,fieldNames:{label:"id",value:"id"}}}}}),n()(r()(T),"initialize",function(Re){Re.type==="belongsToMany"&&(Re.through||(Re.through="t_".concat((0,F.uid)())),Re.foreignKey||(Re.foreignKey="f_".concat((0,F.uid)())),Re.otherKey||(Re.otherKey="f_".concat((0,F.uid)())),Re.sourceKey||(Re.sourceKey="id"),Re.targetKey||(Re.targetKey="id"))}),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{target:{type:"string",title:'{{t("Related collection")}}',required:!0,"x-reactions":["{{useAsyncDataSource(loadCollections)}}"],"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{ !createOnly }}"},"uiSchema.x-component-props.multiple":{type:"boolean","x-content":'{{t("Allow linking to multiple records")}}',"x-decorator":"FormItem","x-component":"Checkbox"}})),n()(r()(T),"filterable",{nested:!0,children:[]}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.readPretty,Re=be.block,Ze=be.targetCollection;Ze!=null&&Ze.titleField&&ce["x-component-props"]&&(ce["x-component-props"].fieldNames=ce["x-component-props"].fieldNames||{value:Ze.filterTargetKey||"id"},ce["x-component-props"].fieldNames.label=Ze.titleField),["Table","Kanban"].includes(Re)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0,ce["x-component-props"].size="small")}}]),re}(L.S);function V(Pe){if(Pe!=null&&Pe.filterTargetKey){if(Array.isArray(Pe.filterTargetKey)){var fe;return Pe==null||(fe=Pe.filterTargetKey)===null||fe===void 0?void 0:fe[0]}return Pe==null?void 0:Pe.filterTargetKey}return(Pe==null?void 0:Pe.getPrimaryKey())||"id"}var U=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","m2m"),n()(r()(T),"type","object"),n()(r()(T),"group","relation"),n()(r()(T),"order",6),n()(r()(T),"title",'{{t("Many to many")}}'),n()(r()(T),"description",'{{t("Many to many description")}}'),n()(r()(T),"isAssociation",!0),n()(r()(T),"default",{type:"belongsToMany",uiSchema:{"x-component":"AssociationField","x-component-props":{multiple:!0}},reverseField:{interface:"m2m",type:"belongsToMany",uiSchema:{"x-component":"AssociationField","x-component-props":{multiple:!0}}}}),n()(r()(T),"availableTypes",["belongsToMany"]),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{type:a.relationshipType,grid:{type:"void","x-component":"Grid",properties:{row1:{type:"void","x-component":"Grid.Row",properties:{col11:{type:"void","x-component":"Grid.Col",properties:{source:{type:"string",title:'{{t("Source collection")}}',"x-decorator":"FormItem","x-component":"SourceCollection","x-disabled":!0}}},col12:{type:"void","x-component":"Grid.Col",properties:{through:{type:"string",title:'{{t("Through collection")}}',description:'{{ t("Generated automatically if left blank") }}',"x-decorator":"FormItem","x-disabled":"{{ !createOnly }}","x-component":"ThroughCollection","x-component-props":{allowClear:!0}}}},col13:{type:"void","x-component":"Grid.Col",properties:{target:{type:"string",title:'{{t("Target collection")}}',required:!0,"x-reactions":["{{useAsyncDataSource(loadCollections)}}"],"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{ !createOnly }}"}}}}},row2:{type:"void","x-component":"Grid.Row",properties:{col21:{type:"void","x-component":"Grid.Col",properties:{sourceKey:{type:"string",title:'{{t("Source key")}}',description:"{{t('Field values must be unique.')}}","x-decorator":"FormItem","x-component":"SourceKey","x-disabled":"{{ !createOnly }}"}}},col22:{type:"void","x-component":"Grid.Col",properties:{foreignKey:{type:"string",title:'{{t("Foreign key 1")}}',required:!0,default:'{{ useNewId("f_") }}',description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}","x-decorator":"FormItem","x-component":"ForeignKey","x-validator":"uid","x-disabled":"{{ !createOnly||override }}"}}},col23:{type:"void","x-component":"Grid.Col",properties:{}}}},row3:{type:"void","x-component":"Grid.Row",properties:{col21:{type:"void","x-component":"Grid.Col",properties:{}},col22:{type:"void","x-component":"Grid.Col",properties:{otherKey:{type:"string",title:'{{t("Foreign key 2")}}',required:!0,default:'{{ useNewId("f_") }}',description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}","x-decorator":"FormItem","x-component":"ForeignKey","x-validator":"uid","x-disabled":"{{ !createOnly||override }}"}}},col23:{type:"void","x-component":"Grid.Col",properties:{targetKey:{type:"string",title:'{{t("Target key")}}',"x-decorator":"FormItem","x-component":"TargetKey","x-disabled":"{{ !createOnly }}",description:"{{t('Field values must be unique.')}}"}}}}}}}},a.reverseFieldProperties)),n()(r()(T),"filterable",{nested:!0,children:[]}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe,Re=be.field,Ze=be.readPretty,We=be.block,tt=be.targetCollection;ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].fieldNames=ce["x-component-props"].fieldNames||{value:V(tt)},ce["x-component-props"].fieldNames.label=((oe=ce["x-component-props"].fieldNames)===null||oe===void 0?void 0:oe.label)||(tt==null?void 0:tt.titleField)||V(tt),["Table","Kanban"].includes(We)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0,ce["x-component-props"].size="small")}},{key:"initialize",value:function(ce){ce.type==="belongsToMany"&&(ce.through||(ce.through="t_".concat((0,F.uid)())),ce.foreignKey||(ce.foreignKey="f_".concat((0,F.uid)())),ce.otherKey||(ce.otherKey="f_".concat((0,F.uid)())),ce.sourceKey||(ce.sourceKey="id"),ce.targetKey||(ce.targetKey="id"))}}]),re}(L.S),D=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","m2o"),n()(r()(T),"type","object"),n()(r()(T),"group","relation"),n()(r()(T),"order",5),n()(r()(T),"title",'{{t("Many to one")}}'),n()(r()(T),"description",'{{t("Many to one description")}}'),n()(r()(T),"isAssociation",!0),n()(r()(T),"default",{type:"belongsTo",uiSchema:{"x-component":"AssociationField","x-component-props":{multiple:!1}},reverseField:{interface:"o2m",type:"hasMany",uiSchema:{"x-component":"AssociationField","x-component-props":{multiple:!0}}}}),n()(r()(T),"availableTypes",["belongsTo"]),n()(r()(T),"properties",c()(c()({"uiSchema.title":{type:"string",title:'{{t("Field display name")}}',required:!0,"x-decorator":"FormItem","x-component":"Input"},name:{type:"string",title:'{{t("Field name")}}',required:!0,"x-disabled":"{{ !createOnly }}","x-decorator":"FormItem","x-component":"Input",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}"},type:a.relationshipType,grid:{type:"void","x-component":"Grid",properties:{row1:{type:"void","x-component":"Grid.Row",properties:{col11:{type:"void","x-component":"Grid.Col",properties:{source:{type:"void",title:'{{t("Source collection")}}',"x-decorator":"FormItem","x-component":"SourceCollection","x-disabled":!0}}},col12:{type:"void","x-component":"Grid.Col",properties:{target:{type:"string",title:'{{t("Target collection")}}',required:!0,"x-reactions":["{{useAsyncDataSource(loadCollections)}}"],"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{ !createOnly }}"}}}}},row2:{type:"void","x-component":"Grid.Row",properties:{col21:{type:"void","x-component":"Grid.Col",properties:{foreignKey:{type:"string",title:'{{t("Foreign key")}}',required:!0,default:'{{ useNewId("f_") }}',description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}","x-decorator":"FormItem","x-component":"ForeignKey","x-validator":"uid","x-disabled":"{{ !createOnly }}"}}},col22:{type:"void","x-component":"Grid.Col",properties:{targetKey:{type:"string",title:'{{t("Target key")}}',description:"{{t('Field values must be unique.')}}","x-decorator":"FormItem","x-component":"TargetKey","x-disabled":"{{ !createOnly }}"}}}}}}}},a.constraintsProps),a.reverseFieldProperties)),n()(r()(T),"filterable",{nested:!0,children:[]}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe,Re=be.field,Ze=be.block,We=be.readPretty,tt=be.targetCollection;ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].fieldNames=ce["x-component-props"].fieldNames||{value:V(tt)},ce["x-component-props"].fieldNames.label=((oe=ce["x-component-props"].fieldNames)===null||oe===void 0?void 0:oe.label)||(tt==null?void 0:tt.titleField)||V(tt),["Table","Kanban"].includes(Ze)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0,ce["x-component-props"].size="small")}}]),re}(L.S),ne=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","markdown"),n()(r()(T),"type","object"),n()(r()(T),"title",'{{t("Markdown")}}'),n()(r()(T),"group","media"),n()(r()(T),"default",{type:"text",uiSchema:{type:"string","x-component":"Markdown"}}),n()(r()(T),"availableTypes",["text","json","string"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()({},a.defaultProps)),n()(r()(T),"filterable",{operators:a.operators.bigField}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.block;["Table","Kanban"].includes(oe)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0)}},{key:"validateSchema",value:function(ce){return{max:{type:"number",title:'{{ t("Max length") }}',minimum:0,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{precision:0},"x-reactions":`{{(field) => {
          const targetValue = field.query('.min').value();
          field.selfErrors =
            !!targetValue && !!field.value && targetValue > field.value ? '`.concat(d.a.t("Max length must greater than min length"),`' : ''
        }}}`)},min:{type:"number",title:'{{ t("Min length") }}',minimum:0,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{precision:0},"x-reactions":{dependencies:[".max"],fulfill:{state:{selfErrors:"{{!!$deps[0] && !!$self.value && $deps[0] < $self.value ? '".concat(d.a.t("Min length must less than max length"),"' : ''}}")}}}}}}}]),re}(L.S),q=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","multipleSelect"),n()(r()(T),"type","object"),n()(r()(T),"group","choices"),n()(r()(T),"order",3),n()(r()(T),"title",'{{t("Multiple select")}}'),n()(r()(T),"default",{type:"array",defaultValue:[],uiSchema:{type:"array","x-component":"Select","x-component-props":{mode:"multiple"},enum:[]}}),n()(r()(T),"availableTypes",["array","json"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{"uiSchema.enum":a.dataSource})),n()(r()(T),"filterable",{operators:a.operators.array}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.block,Re=ce["x-component-props"]=ce["x-component-props"]||{};Re.style=c()(c()({},Re.style||{}),{},{width:"100%"}),["Table","Kanban"].includes(oe)&&(Re.ellipsis=!0)}}]),re}(L.S),J=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","number"),n()(r()(T),"type","object"),n()(r()(T),"group","basic"),n()(r()(T),"order",7),n()(r()(T),"title",'{{t("Number")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"double",uiSchema:{type:"number","x-component":"InputNumber","x-component-props":{stringMode:!0,step:"1"}}}),n()(r()(T),"availableTypes",["double","float","decimal"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{unique:a.unique,"uiSchema.x-component-props.step":{type:"string",title:'{{t("Precision")}}',"x-component":"Select","x-decorator":"FormItem",default:"1",enum:[{value:"1",label:"1"},{value:"0.1",label:"1.0"},{value:"0.01",label:"1.00"},{value:"0.001",label:"1.000"},{value:"0.0001",label:"1.0000"},{value:"0.00001",label:"1.00000"},{value:"0.000001",label:"1.000000"},{value:"0.0000001",label:"1.0000000"},{value:"0.00000001",label:"1.00000000"}]}})),n()(r()(T),"filterable",{operators:a.operators.number}),n()(r()(T),"titleUsable",!0),T}return C()(re,[{key:"validateSchema",value:function(ce){return{maximum:{type:"number",title:'{{ t("Maximum") }}',"x-decorator":"FormItem","x-component":"InputNumber","x-reactions":`{{(field) => {
          const targetValue = field.query('.minimum').value();
          field.selfErrors =
            !!targetValue && !!field.value && targetValue > field.value ? '`.concat(d.a.t("Maximum must greater than minimum"),`' : ''
        }}}`)},minimum:{type:"number",title:'{{ t("Minimum") }}',"x-decorator":"FormItem","x-component":"InputNumber","x-reactions":{dependencies:[".maximum"],fulfill:{state:{selfErrors:"{{!!$deps[0] && !!$self.value && $deps[0] < $self.value ? '".concat(d.a.t("Minimum must less than maximum"),"' : ''}}")}}}},format:{type:"string",title:'{{ t("Format") }}',"x-decorator":"FormItem","x-component":"Select","x-component-props":{allowClear:!0},enum:[{label:'{{ t("Integer") }}',value:"integer"},{label:'{{ t("Odd") }}',value:"odd"},{label:'{{ t("Even") }}',value:"even"}]},pattern:{type:"string",title:'{{ t("Regular expression") }}',"x-decorator":"FormItem","x-component":"Input","x-component-props":{prefix:"/",suffix:"/"}}}}}]),re}(L.S),Y=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","o2m"),n()(r()(T),"type","object"),n()(r()(T),"group","relation"),n()(r()(T),"order",4),n()(r()(T),"title",'{{t("One to many")}}'),n()(r()(T),"description",'{{t("One to many description")}}'),n()(r()(T),"isAssociation",!0),n()(r()(T),"default",{type:"hasMany",uiSchema:{"x-component":"AssociationField","x-component-props":{multiple:!0}},reverseField:{interface:"m2o",type:"belongsTo",uiSchema:{"x-component":"AssociationField","x-component-props":{multiple:!1}}}}),n()(r()(T),"availableTypes",["hasMany"]),n()(r()(T),"properties",c()(c()({"uiSchema.title":{type:"string",title:'{{t("Field display name")}}',required:!0,"x-decorator":"FormItem","x-component":"Input"},name:{type:"string",title:'{{t("Field name")}}',required:!0,"x-disabled":"{{ !createOnly }}","x-decorator":"FormItem","x-component":"Input",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}"},type:a.relationshipType,grid:{type:"void","x-component":"Grid",properties:{row1:{type:"void","x-component":"Grid.Row",properties:{col11:{type:"void","x-component":"Grid.Col",properties:{source:{type:"void",title:'{{t("Source collection")}}',"x-decorator":"FormItem","x-component":"SourceCollection"}}},col12:{type:"void","x-component":"Grid.Col",properties:{target:{type:"string",title:'{{t("Target collection")}}',required:!0,"x-reactions":["{{useAsyncDataSource(loadCollections)}}"],"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{ !createOnly }}"}}}}},row2:{type:"void","x-component":"Grid.Row",properties:{col21:{type:"void","x-component":"Grid.Col",properties:{sourceKey:{type:"string",title:'{{t("Source key")}}',description:"{{t('Field values must be unique.')}}",default:"id",enum:[{label:"ID",value:"id"}],"x-decorator":"FormItem","x-component":"SourceKey"}}},col22:{type:"void","x-component":"Grid.Col",properties:{foreignKey:{type:"string",title:'{{t("Foreign key")}}',required:!0,default:'{{ useNewId("f_") }}',description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}","x-decorator":"FormItem","x-component":"ForeignKey","x-validator":"uid","x-disabled":"{{ !createOnly }}"}}}}},row3:{type:"void","x-component":"Grid.Row",properties:{col21:{type:"void","x-component":"Grid.Col",properties:{}},col22:{type:"void","x-component":"Grid.Col",properties:{targetKey:{type:"string",title:'{{t("Target key")}}',"x-decorator":"FormItem","x-component":"TargetKey","x-disabled":"{{ !createOnly }}",description:"{{t('Field values must be unique.')}}"}}}}}}}},a.constraintsProps),a.reverseFieldProperties)),n()(r()(T),"filterable",{nested:!0,children:[]}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe,Re=be.field,Ze=be.block,We=be.readPretty,tt=be.targetCollection;ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].fieldNames=ce["x-component-props"].fieldNames||{value:V(tt)},ce["x-component-props"].fieldNames.label=((oe=ce["x-component-props"].fieldNames)===null||oe===void 0?void 0:oe.label)||(tt==null?void 0:tt.titleField)||V(tt),["Table","Kanban"].includes(Ze)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0,ce["x-component-props"].size="small")}}]),re}(L.S),P=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","o2o"),n()(r()(T),"type","object"),n()(r()(T),"group","relation"),n()(r()(T),"order",3),n()(r()(T),"title",'{{t("One to one")}}'),n()(r()(T),"description",'{{t("One to one description")}}'),n()(r()(T),"isAssociation",!0),n()(r()(T),"default",{type:"hasOne",uiSchema:{"x-component":"AssociationField","x-component-props":{multiple:!1}},reverseField:{interface:"obo",type:"belongsTo",uiSchema:{"x-component":"AssociationField","x-component-props":{multiple:!1}}}}),n()(r()(T),"availableTypes",["hasOne"]),n()(r()(T),"properties",{"uiSchema.title":{type:"string",title:'{{t("Field display name")}}',required:!0,"x-decorator":"FormItem","x-component":"Input"},name:{type:"string",title:'{{t("Field name")}}',required:!0,"x-disabled":"{{ !createOnly }}","x-decorator":"FormItem","x-component":"Input",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}"},type:a.relationshipType,grid:{type:"void","x-component":"Grid",properties:{row1:{type:"void","x-component":"Grid.Row",properties:{col11:{type:"void","x-component":"Grid.Col",properties:{source:{type:"void",title:'{{t("Source collection")}}',"x-decorator":"FormItem","x-component":"SourceCollection","x-disabled":!0}}},col12:{type:"void","x-component":"Grid.Col",properties:{target:{type:"string",title:'{{t("Target collection")}}',required:!0,"x-reactions":["{{useAsyncDataSource(loadCollections)}}"],"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{ !createOnly }}"}}}}},row2:{type:"void","x-component":"Grid.Row",properties:{col21:{type:"void","x-component":"Grid.Col",properties:{sourceKey:{type:"string",title:'{{t("Source key")}}',description:"{{t('Field values must be unique.')}}","x-decorator":"FormItem","x-component":"SourceKey"}}},col22:{type:"void","x-component":"Grid.Col",properties:{foreignKey:{type:"string",title:'{{t("Foreign key")}}',required:!0,default:'{{ useNewId("f_") }}',description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}","x-decorator":"FormItem","x-component":"ForeignKey","x-validator":"uid","x-disabled":"{{ !createOnly }}"}}}}}}},"reverseField.name":{type:"string",title:'{{t("Inverse field name")}}',"x-hidden":"{{ !createOnly }}","x-decorator":"FormItem","x-component":"Input",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}"}}),n()(r()(T),"filterable",{nested:!0,children:[]}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.field,Re=be.block,Ze=be.readPretty,We=be.action,tt=be.targetCollection;["Table","Kanban"].includes(Re)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0,ce["x-component-props"].size="small"),ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].fieldNames=ce["x-component-props"].fieldNames||{value:V(tt)},ce["x-component-props"].fieldNames.label=(tt==null?void 0:tt.titleField)||V(tt)}}]),re}(L.S),w=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","oho"),n()(r()(T),"type","object"),n()(r()(T),"group","relation"),n()(r()(T),"order",3),n()(r()(T),"title",'{{t("One to one (has one)")}}'),n()(r()(T),"description",'{{t("One to one description")}}'),n()(r()(T),"isAssociation",!0),n()(r()(T),"default",{type:"hasOne",uiSchema:{"x-component":"AssociationField","x-component-props":{multiple:!1}},reverseField:{interface:"obo",type:"belongsTo",uiSchema:{"x-component":"AssociationField","x-component-props":{multiple:!1}}}}),n()(r()(T),"availableTypes",["hasOne"]),n()(r()(T),"properties",c()(c()({"uiSchema.title":{type:"string",title:'{{t("Field display name")}}',required:!0,"x-decorator":"FormItem","x-component":"Input"},name:{type:"string",title:'{{t("Field name")}}',required:!0,"x-disabled":"{{ !createOnly }}","x-decorator":"FormItem","x-component":"Input",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}"},type:a.relationshipType,grid:{type:"void","x-component":"Grid",properties:{row1:{type:"void","x-component":"Grid.Row",properties:{col11:{type:"void","x-component":"Grid.Col",properties:{source:{type:"void",title:'{{t("Source collection")}}',"x-decorator":"FormItem","x-component":"SourceCollection","x-disabled":!0}}},col12:{type:"void","x-component":"Grid.Col",properties:{target:{type:"string",title:'{{t("Target collection")}}',required:!0,"x-reactions":["{{useAsyncDataSource(loadCollections)}}"],"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{ !createOnly }}"}}}}},row2:{type:"void","x-component":"Grid.Row",properties:{col21:{type:"void","x-component":"Grid.Col",properties:{sourceKey:{type:"string",title:'{{t("Source key")}}',description:"{{t('Field values must be unique.')}}","x-decorator":"FormItem","x-component":"SourceKey"}}},col22:{type:"void","x-component":"Grid.Col",properties:{foreignKey:{type:"string",title:'{{t("Foreign key")}}',required:!0,default:'{{ useNewId("f_") }}',description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}","x-decorator":"FormItem","x-component":"ForeignKey","x-validator":"uid","x-disabled":"{{ !createOnly }}"}}}}}}}},a.constraintsProps),a.reverseFieldProperties)),n()(r()(T),"filterable",{nested:!0,children:[]}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe,Re=be.field,Ze=be.block,We=be.readPretty,tt=be.action,St=be.targetCollection;["Table","Kanban"].includes(Ze)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0,ce["x-component-props"].size="small"),ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].fieldNames=ce["x-component-props"].fieldNames||{value:V(St)},ce["x-component-props"].fieldNames.label=((oe=ce["x-component-props"].fieldNames)===null||oe===void 0?void 0:oe.label)||(St==null?void 0:St.titleField)||V(St)}}]),re}(L.S),ie=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","obo"),n()(r()(T),"type","object"),n()(r()(T),"group","relation"),n()(r()(T),"order",3),n()(r()(T),"title",'{{t("One to one (belongs to)")}}'),n()(r()(T),"description",'{{t("One to one description")}}'),n()(r()(T),"isAssociation",!0),n()(r()(T),"default",{type:"belongsTo",uiSchema:{"x-component":"AssociationField","x-component-props":{multiple:!1}},reverseField:{interface:"oho",type:"hasOne",uiSchema:{"x-component":"AssociationField","x-component-props":{multiple:!1}}}}),n()(r()(T),"availableTypes",["hasOne"]),n()(r()(T),"properties",c()(c()({"uiSchema.title":{type:"string",title:'{{t("Field display name")}}',required:!0,"x-decorator":"FormItem","x-component":"Input"},name:{type:"string",title:'{{t("Field name")}}',required:!0,"x-disabled":"{{ !createOnly }}","x-decorator":"FormItem","x-component":"Input",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}"},type:a.relationshipType,grid:{type:"void","x-component":"Grid",properties:{row1:{type:"void","x-component":"Grid.Row",properties:{col11:{type:"void","x-component":"Grid.Col",properties:{source:{type:"void",title:'{{t("Source collection")}}',"x-decorator":"FormItem","x-component":"SourceCollection","x-disabled":!0}}},col12:{type:"void","x-component":"Grid.Col",properties:{target:{type:"string",title:'{{t("Target collection")}}',required:!0,"x-reactions":["{{useAsyncDataSource(loadCollections)}}"],"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{ !createOnly }}"}}}}},row2:{type:"void","x-component":"Grid.Row",properties:{col21:{type:"void","x-component":"Grid.Col",properties:{foreignKey:{type:"string",title:'{{t("Foreign key")}}',required:!0,default:'{{ useNewId("f_") }}',description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}","x-decorator":"FormItem","x-component":"ForeignKey","x-validator":"uid","x-disabled":"{{ !createOnly }}"}}},col22:{type:"void","x-component":"Grid.Col",properties:{targetKey:{type:"string",title:'{{t("Target key")}}',description:"{{t('Field values must be unique.')}}","x-decorator":"FormItem","x-component":"TargetKey","x-disabled":"{{ !createOnly }}"}}}}}}}},a.constraintsProps),a.reverseFieldProperties)),n()(r()(T),"filterable",{nested:!0,children:[]}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe,Re=be.field,Ze=be.block,We=be.readPretty,tt=be.action,St=be.targetCollection;["Table","Kanban"].includes(Ze)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0,ce["x-component-props"].size="small"),ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].fieldNames=ce["x-component-props"].fieldNames||{value:V(St)},ce["x-component-props"].fieldNames.label=((oe=ce["x-component-props"].fieldNames)===null||oe===void 0?void 0:oe.label)||(St==null?void 0:St.titleField)||V(St)}}]),re}(L.S),G=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","password"),n()(r()(T),"type","object"),n()(r()(T),"group","basic"),n()(r()(T),"order",9),n()(r()(T),"title",'{{t("Password")}}'),n()(r()(T),"default",{type:"password",hidden:!0,uiSchema:{type:"string","x-component":"Password"}}),n()(r()(T),"availableTypes",["password","string"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{unique:a.unique})),n()(r()(T),"validateSchema",function(Re){return{max:{type:"number",title:'{{ t("Max length") }}',minimum:0,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{precision:0},"x-reactions":`{{(field) => {
          const targetValue = field.query('.min').value();
          field.selfErrors =
            !!targetValue && !!field.value && targetValue > field.value ? '`.concat(d.a.t("Max length must greater than min length"),`' : ''
        }}}`)},min:{type:"number",title:'{{ t("Min length") }}',minimum:0,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{precision:0},"x-reactions":{dependencies:[".max"],fulfill:{state:{selfErrors:"{{!!$deps[0] && !!$self.value && $deps[0] < $self.value ? '".concat(d.a.t("Min length must less than max length"),"' : ''}}")}}}}}}),T}return C()(re)}(L.S);(0,S.registerValidateRules)({percentMode:function(fe,re){var T=re.maxValue,ce=re.minValue;return T&&fe>T?{type:"error",message:"".concat(d.a.t("The field value cannot be greater than ")).concat(T*100,"%")}:ce&&fe<ce?{type:"error",message:"".concat(d.a.t("The field value cannot be less than ")).concat(ce*100,"%")}:!0},percentFormats:function(fe,re){var T=re.percentFormat;return fe&&T==="Integer"&&/^-?[1-9]\d*$/.test((fe*100).toString())===!1?{type:"error",message:"".concat(d.a.t("The field value is not an integer number"))}:!0}});var le=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","percent"),n()(r()(T),"type","object"),n()(r()(T),"group","basic"),n()(r()(T),"order",8),n()(r()(T),"title",'{{t("Percent")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"float",uiSchema:{type:"string","x-component":"Percent","x-component-props":{stringMode:!0,step:"1",addonAfter:"%"}}}),n()(r()(T),"availableTypes",["float","double","decimal"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{unique:a.unique,"uiSchema.x-component-props.step":{type:"string",title:'{{t("Precision")}}',"x-component":"Select","x-decorator":"FormItem",default:"1",enum:[{value:"1",label:"1%"},{value:"0.1",label:"1.0%"},{value:"0.01",label:"1.00%"},{value:"0.001",label:"1.000%"},{value:"0.0001",label:"1.0000%"},{value:"0.00001",label:"1.00000%"}]}})),n()(r()(T),"filterable",{operators:a.operators.number}),n()(r()(T),"titleUsable",!0),n()(r()(T),"validateSchema",function(Re){return{maxValue:{type:"number",title:'{{ t("Maximum") }}',"x-decorator":"FormItem","x-component":"Percent","x-component-props":{addonAfter:"%"},"x-reactions":`{{(field) => {
          const targetValue = field.query('.minimum').value();
          field.selfErrors =
            !!targetValue && !!field.value && targetValue > field.value ? '`.concat(d.a.t("Maximum must greater than minimum"),`' : ''
        }}}`)},minValue:{type:"number",title:'{{ t("Minimum") }}',"x-decorator":"FormItem","x-component":"Percent","x-component-props":{addonAfter:"%"},"x-reactions":{dependencies:[".maximum"],fulfill:{state:{selfErrors:"{{!!$deps[0] && !!$self.value && $deps[0] < $self.value ? '".concat(d.a.t("Minimum must less than maximum"),"' : ''}}")}}}},percentFormat:{type:"string",title:'{{ t("Format") }}',"x-decorator":"FormItem","x-component":"Select","x-component-props":{allowClear:!0},enum:[{label:'{{ t("Integer") }}',value:"Integer"}]},pattern:{type:"string",title:'{{ t("Regular expression") }}',"x-decorator":"FormItem","x-component":"Input","x-component-props":{prefix:"/",suffix:"/"}}}}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.field,Re=be.block,Ze=be.readPretty,We=be.action,tt=ce["x-component-props"]=ce["x-component-props"]||{};ce["x-component-props"].style=c()(c()({},tt.style||{}),{},{width:"100%"})}}]),re}(L.S),xe=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","phone"),n()(r()(T),"type","object"),n()(r()(T),"group","basic"),n()(r()(T),"order",3),n()(r()(T),"title",'{{t("Phone")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"string",uiSchema:{type:"string","x-component":"Input","x-component-props":{type:"tel"}}}),n()(r()(T),"availableTypes",["string"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{unique:a.unique})),n()(r()(T),"filterable",{operators:a.operators.string}),n()(r()(T),"titleUsable",!0),T}return C()(re)}(L.S),_e=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","radioGroup"),n()(r()(T),"type","object"),n()(r()(T),"group","choices"),n()(r()(T),"order",4),n()(r()(T),"title",'{{t("Radio group")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"string",uiSchema:{type:"string","x-component":"Radio.Group"}}),n()(r()(T),"availableTypes",["string","integer","boolean","integer"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{"uiSchema.enum":a.dataSource})),n()(r()(T),"filterable",{operators:a.operators.enumType}),n()(r()(T),"titleUsable",!0),T}return C()(re)}(L.S),Ee=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","richText"),n()(r()(T),"type","object"),n()(r()(T),"group","media"),n()(r()(T),"order",2),n()(r()(T),"title",'{{t("Rich Text")}}'),n()(r()(T),"default",{interface:"richText",type:"text",uiSchema:{type:"string","x-component":"RichText"}}),n()(r()(T),"availableTypes",["text","json","string"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()({},a.defaultProps)),n()(r()(T),"validateSchema",function(Re){return{max:{type:"number",title:'{{ t("Max length") }}',minimum:0,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{precision:0},"x-reactions":`{{(field) => {
          const targetValue = field.query('.min').value();
          field.selfErrors =
            !!targetValue && !!field.value && targetValue > field.value ? '`.concat(d.a.t("Max length must greater than min length"),`' : ''
        }}}`)},min:{type:"number",title:'{{ t("Min length") }}',minimum:0,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{precision:0},"x-reactions":{dependencies:[".max"],fulfill:{state:{selfErrors:"{{!!$deps[0] && !!$self.value && $deps[0] < $self.value ? '".concat(d.a.t("Min length must less than max length"),"' : ''}}")}}}}}}),n()(r()(T),"filterable",{operators:a.operators.bigField}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.block;["Table","Kanban"].includes(oe)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0)}}]),re}(L.S),ze=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","select"),n()(r()(T),"type","object"),n()(r()(T),"group","choices"),n()(r()(T),"order",2),n()(r()(T),"title",'{{t("Single select")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"string",uiSchema:{type:"string","x-component":"Select",enum:[]}}),n()(r()(T),"availableTypes",["string","bigInt","boolean"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{"uiSchema.enum":a.dataSource})),n()(r()(T),"filterable",{operators:a.operators.enumType}),n()(r()(T),"titleUsable",!0),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.block,Re=ce["x-component-props"]=ce["x-component-props"]||{};Re.style=c()(c()({},Re.style||{}),{},{width:"100%"}),["Table","Kanban"].includes(oe)&&(Re.ellipsis=!0)}}]),re}(L.S),Se=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","subTable"),n()(r()(T),"type","object"),n()(r()(T),"group","relation"),n()(r()(T),"order",2),n()(r()(T),"title",'{{t("Sub-table")}}'),n()(r()(T),"isAssociation",!0),n()(r()(T),"default",{type:"hasMany",uiSchema:{type:"void","x-component":"TableField","x-component-props":{}}}),n()(r()(T),"availableTypes",["hasMany"]),n()(r()(T),"initialize",function(Re){Re.target||(Re.target="t_".concat((0,F.uid)())),Re.foreignKey||(Re.foreignKey="f_".concat((0,F.uid)()))}),n()(r()(T),"properties",c()(c()({},a.defaultProps),{},{subtable:{type:"void","x-component":"SubFieldDataSourceProvider",properties:{actions:{type:"void","x-component":"ActionBar","x-component-props":{},properties:{delete:{type:"void",title:'{{ t("Delete") }}',"x-component":"Action","x-component-props":{useAction:"{{ ds.useBulkDestroyAction }}",confirm:{title:"{{t('Delete record')}}",content:"{{t('Are you sure you want to delete it?')}}"}}},create:{type:"void",title:'{{ t("Add new") }}',"x-component":"AddSubFieldAction","x-component-props":{type:"primary"}}}},children:{type:"array",title:'{{t("Fields")}}',"x-decorator":"FormItem","x-component":"Table.Array","x-component-props":{pagination:!1,expandable:{childrenColumnName:"__nochildren__"},rowKey:"name",rowSelection:{type:"checkbox"},useSelectedRowKeys:"{{ ds.useSelectedRowKeys }}",useDataSource:"{{ ds.useDataSource }}"},properties:{column1:{type:"void",title:'{{ t("Field display name") }}',"x-component":"Table.Column",properties:{"uiSchema.title":{type:"number","x-component":"Input","x-read-pretty":!0}}},column2:{type:"void",title:'{{ t("Field name") }}',"x-component":"Table.Column",properties:{name:{"x-component":"Input","x-read-pretty":!0}}},column3:{type:"void",title:'{{ t("Field interface") }}',"x-component":"Table.Column",properties:{interface:{"x-component":"Input","x-read-pretty":!0}}},column4:{type:"void",title:'{{ t("Actions") }}',"x-component":"Table.Column",properties:{actions:{type:"void","x-component":"Space","x-component-props":{split:"|"},properties:{update:{type:"void",title:'{{ t("Edit") }}',"x-component":"EditSubFieldAction","x-component-props":{}},delete:{type:"void",title:'{{ t("Delete") }}',"x-component":"Action.Link","x-component-props":{useAction:"{{ ds.useDestroyAction }}",confirm:{title:"{{t('Delete record')}}",content:"{{t('Are you sure you want to delete it?')}}"}}}}}}}}}}}})),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.field,Re=be.readPretty,Ze="".concat(oe.collectionName,".").concat(oe.name);ce.type="void",ce["x-component"]="TableField",ce.properties={block:{type:"void","x-decorator":"TableFieldProvider","x-acl-action":"".concat(oe.target,":list"),"x-decorator-props":{collection:oe.target,association:Ze,resource:Ze,action:"list",params:{paginate:!1},showIndex:!0,dragSort:!1},properties:n()({actions:{type:"void","x-initializer":"subTable:configureActions","x-component":"TableField.ActionBar","x-component-props":{}}},oe.name,{type:"array","x-initializer":"table:configureColumns","x-component":"TableV2","x-use-component-props":"useTableFieldProps","x-component-props":{rowSelection:{type:"checkbox"}}})}}}}]),re}(L.S),se=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","tableoid"),n()(r()(T),"type","object"),n()(r()(T),"group","systemInfo"),n()(r()(T),"order",0),n()(r()(T),"title",'{{t("Table OID")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{name:"__collection",type:"virtual",uiSchema:{type:"string",title:'{{t("Table OID")}}',"x-component":"CollectionSelect","x-component-props":{isTableOid:!0},"x-read-pretty":!0}}),n()(r()(T),"properties",{"uiSchema.title":{type:"string",title:'{{t("Field display name")}}',required:!0,"x-decorator":"FormItem","x-component":"Input"},name:{type:"string",title:'{{t("Field name")}}',required:!0,"x-disabled":!0,"x-decorator":"FormItem","x-component":"Input"}}),n()(r()(T),"filterable",{operators:a.operators.tableoid}),T}return C()(re)}(L.S),me=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","textarea"),n()(r()(T),"type","object"),n()(r()(T),"group","basic"),n()(r()(T),"order",2),n()(r()(T),"title",'{{t("Long text")}}'),n()(r()(T),"default",{interface:"textarea",type:"text",uiSchema:{type:"string","x-component":"Input.TextArea"}}),n()(r()(T),"availableTypes",["text","json","string"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()({},a.defaultProps)),n()(r()(T),"validateSchema",function(Re){return{max:{type:"number",title:'{{ t("Max length") }}',minimum:0,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{precision:0},"x-reactions":`{{(field) => {
          const targetValue = field.query('.min').value();
          field.selfErrors =
            !!targetValue && !!field.value && targetValue > field.value ? '`.concat(d.a.t("Max length must greater than min length"),`' : ''
        }}}`)},min:{type:"number",title:'{{ t("Min length") }}',minimum:0,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{precision:0},"x-reactions":{dependencies:[".max"],fulfill:{state:{selfErrors:"{{!!$deps[0] && !!$self.value && $deps[0] < $self.value ? '".concat(d.a.t("Min length must less than max length"),"' : ''}}")}}}}}}),n()(r()(T),"filterable",{operators:a.operators.string}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.block;["Table","Kanban"].includes(oe)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0)}}]),re}(L.S),pe=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","time"),n()(r()(T),"type","object"),n()(r()(T),"group","datetime"),n()(r()(T),"order",4),n()(r()(T),"title",'{{t("Time")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"time",uiSchema:{type:"string","x-component":"TimePicker"}}),n()(r()(T),"availableTypes",["time"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()({},a.defaultProps),a.timeProps)),n()(r()(T),"filterable",{operators:a.operators.time}),n()(r()(T),"titleUsable",!0),T}return C()(re)}(L.S),ee=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","updatedAt"),n()(r()(T),"type","object"),n()(r()(T),"group","systemInfo"),n()(r()(T),"order",2),n()(r()(T),"title",'{{t("Last updated at")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"date",field:"updatedAt",uiSchema:{type:"datetime",title:'{{t("Last updated at")}}',"x-component":"DatePicker","x-component-props":{},"x-read-pretty":!0}}),n()(r()(T),"description",'{{t("Store the last update time of each record")}}'),n()(r()(T),"availableTypes",[]),n()(r()(T),"properties",c()(c()({},a.defaultProps),a.dateTimeProps)),n()(r()(T),"filterable",{operators:a.operators.datetime}),n()(r()(T),"titleUsable",!0),T}return C()(re)}(L.S),ue=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","updatedBy"),n()(r()(T),"type","object"),n()(r()(T),"group","systemInfo"),n()(r()(T),"order",4),n()(r()(T),"title",'{{t("Last updated by")}}'),n()(r()(T),"isAssociation",!0),n()(r()(T),"default",{type:"belongsTo",target:"users",foreignKey:"updatedById",uiSchema:{type:"object",title:'{{t("Last updated by")}}',"x-component":"AssociationField","x-component-props":{fieldNames:{value:"id",label:"nickname"}},"x-read-pretty":!0}}),n()(r()(T),"availableTypes",["belongsTo"]),n()(r()(T),"properties",c()({},a.defaultProps)),n()(r()(T),"filterable",{nested:!0,children:[]}),n()(r()(T),"description",'{{t("Store the last update user of each record")}}'),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.block;ce.properties={viewer:(0,z.cloneDeep)(a.recordPickerViewer)},["Table","Kanban"].includes(oe)&&(ce["x-component-props"]=ce["x-component-props"]||{},ce["x-component-props"].ellipsis=!0)}}]),re}(L.S),ge=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","url"),n()(r()(T),"type","string"),n()(r()(T),"group","basic"),n()(r()(T),"order",5),n()(r()(T),"title",'{{t("URL")}}'),n()(r()(T),"default",{type:"text",uiSchema:{type:"string","x-component":"Input.URL"}}),n()(r()(T),"componentOptions",[{label:"URL",value:"Input.URL"},{label:"Preview",value:"Input.Preview"}]),n()(r()(T),"availableTypes",["string","text"]),n()(r()(T),"properties",c()({},a.defaultProps)),n()(r()(T),"titleUsable",!0),n()(r()(T),"filterable",{operators:a.operators.string}),T}return C()(re,[{key:"schemaInitialize",value:function(ce,be){var oe=be.block}}]),re}(L.S),Ie=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","uuid"),n()(r()(T),"type","object"),n()(r()(T),"group","advanced"),n()(r()(T),"order",0),n()(r()(T),"title",'{{t("UUID")}}'),n()(r()(T),"hidden",!1),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"uuid",uiSchema:{type:"string","x-component":"Input","x-validator":"uuid"}}),n()(r()(T),"availableTypes",["uid","uuid"]),n()(r()(T),"properties",{"uiSchema.title":{type:"string",title:'{{t("Field display name")}}',required:!0,"x-decorator":"FormItem","x-component":"Input"},name:{type:"string",title:'{{t("Field name")}}',required:!0,"x-decorator":"FormItem","x-component":"Input","x-disabled":"{{ !createOnly }}",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}"},autoFill:a.autoFill,layout:{type:"void",title:'{{t("Index")}}',"x-component":"Space","x-decorator":"FormItem","x-decorator-props":{style:{marginBottom:"0px"}},properties:{primaryKey:a.primaryKey,unique:a.unique}}}),n()(r()(T),"filterable",{operators:a.operators.string}),n()(r()(T),"titleUsable",!0),T}return C()(re)}(L.S),Ae=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","nanoid"),n()(r()(T),"type","object"),n()(r()(T),"group","advanced"),n()(r()(T),"order",0),n()(r()(T),"title",'{{t("Nano ID")}}'),n()(r()(T),"hidden",!1),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"nanoid",uiSchema:{type:"string","x-component":"NanoIDInput"}}),n()(r()(T),"availableTypes",["nanoid"]),n()(r()(T),"properties",{"uiSchema.title":{type:"string",title:'{{t("Field display name")}}',required:!0,"x-decorator":"FormItem","x-component":"Input"},name:{type:"string",title:'{{t("Field name")}}',required:!0,"x-decorator":"FormItem","x-component":"Input","x-disabled":"{{ !createOnly }}",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}"},customAlphabet:{type:"string",title:'{{t("Alphabet")}}',default:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz","x-decorator":"FormItem","x-component":"Input"},size:{type:"number",title:'{{t("Length")}}',default:21,"x-decorator":"FormItem","x-component":"InputNumber"},autoFill:a.autoFill,layout:{type:"void",title:'{{t("Index")}}',"x-component":"Space","x-decorator":"FormItem","x-decorator-props":{style:{marginBottom:"0px"}},properties:{primaryKey:a.primaryKey,unique:a.unique}}}),n()(r()(T),"filterable",{operators:a.operators.string}),n()(r()(T),"titleUsable",!0),T}return C()(re)}(L.S),Le=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","unixTimestamp"),n()(r()(T),"type","object"),n()(r()(T),"group","datetime"),n()(r()(T),"order",4),n()(r()(T),"title",'{{t("Unix Timestamp")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"unixTimestamp",accuracy:"second",timezone:!0,defaultToCurrentTime:!1,onUpdateToCurrentTime:!1,uiSchema:{type:"number","x-component":"UnixTimestamp","x-component-props":{showTime:!0}}}),n()(r()(T),"availableTypes",["unixTimestamp"]),n()(r()(T),"hasDefaultValue",!1),n()(r()(T),"properties",c()(c()(c()({},a.defaultProps),a.dateTimeProps),{},{accuracy:{type:"string",title:'{{t("Accuracy")}}',"x-component":"Radio.Group","x-decorator":"FormItem",default:"second",enum:[{value:"millisecond",label:'{{t("Millisecond")}}'},{value:"second",label:'{{t("Second")}}'}]},defaultToCurrentTime:{type:"boolean","x-decorator":"FormItem","x-component":"Checkbox","x-content":'{{t("Default value to current time")}}'},onUpdateToCurrentTime:{type:"boolean","x-decorator":"FormItem","x-component":"Checkbox","x-content":'{{t("Automatically update timestamp on update")}}'}})),n()(r()(T),"filterable",{operators:a.operators.datetime}),n()(r()(T),"titleUsable",!0),T}return C()(re)}(L.S),Te=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","date"),n()(r()(T),"type","object"),n()(r()(T),"group","datetime"),n()(r()(T),"order",3),n()(r()(T),"title",'{{t("DateOnly")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"dateOnly",uiSchema:{type:"string","x-component":"DatePicker","x-component-props":{dateOnly:!0}}}),n()(r()(T),"availableTypes",["dateOnly"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()(c()({},a.defaultProps),a.dateTimeProps),{},{"uiSchema.x-component-props.showTime":{type:"boolean","x-decorator":"FormItem","x-component":"Checkbox","x-visible":!1}})),n()(r()(T),"filterable",{operators:a.operators.datetime}),n()(r()(T),"titleUsable",!0),T}return C()(re)}(L.S),je=function(Pe){v()(re,Pe);var fe=h()(re);function re(){var T;i()(this,re);for(var ce=arguments.length,be=new Array(ce),oe=0;oe<ce;oe++)be[oe]=arguments[oe];return T=fe.call.apply(fe,[this].concat(be)),n()(r()(T),"name","datetimeNoTz"),n()(r()(T),"type","object"),n()(r()(T),"group","datetime"),n()(r()(T),"order",2),n()(r()(T),"title",'{{t("Datetime (without time zone)")}}'),n()(r()(T),"sortable",!0),n()(r()(T),"default",{type:"datetimeNoTz",defaultToCurrentTime:!1,onUpdateToCurrentTime:!1,timezone:!1,uiSchema:{type:"string","x-component":"DatePicker","x-component-props":{showTime:!1,utc:!1}}}),n()(r()(T),"availableTypes",["string","datetimeNoTz"]),n()(r()(T),"hasDefaultValue",!0),n()(r()(T),"properties",c()(c()(c()({},a.defaultProps),a.dateTimeProps),{},{defaultToCurrentTime:{type:"boolean","x-decorator":"FormItem","x-component":"Checkbox","x-content":'{{t("Default value to current server time")}}'},onUpdateToCurrentTime:{type:"boolean","x-decorator":"FormItem","x-component":"Checkbox","x-content":'{{t("Automatically update timestamp to the current server time on update")}}'},"uiSchema.x-component-props.gmt":{type:"boolean",title:'{{t("GMT")}}',"x-hidden":!0,"x-component":"Checkbox","x-content":'{{t("Use the same time zone (GMT) for all users")}}',"x-decorator":"FormItem",default:!1}})),n()(r()(T),"filterable",{operators:a.operators.datetime}),n()(r()(T),"titleUsable",!0),T}return C()(re)}(L.S)},65375:function(He,ae,e){"use strict";e.r(ae),e.d(ae,{autoFill:function(){return x},autoIncrement:function(){return f},collectionDataSource:function(){return O},constraintsProps:function(){return F},dataSource:function(){return l},dateTimeProps:function(){return d},defaultProps:function(){return S},operators:function(){return Z},primaryKey:function(){return b},recordPickerViewer:function(){return H},relationshipType:function(){return m},reverseFieldProperties:function(){return I},timeProps:function(){return u},type:function(){return z},unique:function(){return p}});var Z={};e.r(Z),e.d(Z,{array:function(){return v},bigField:function(){return E},boolean:function(){return o},collection:function(){return R},datetime:function(){return h},enumType:function(){return y},id:function(){return n},number:function(){return M},object:function(){return j},string:function(){return K},tableoid:function(){return a},time:function(){return L}});var c=e(68400),k=e.n(c),i=e(97857),g=e.n(i),C=e(84327),A=e(97133),r=e(74327),K=[{label:'{{t("contains")}}',value:"$includes",selected:!0},{label:'{{t("does not contain")}}',value:"$notIncludes"},{label:'{{t("is")}}',value:"$eq"},{label:'{{t("is not")}}',value:"$ne"},{label:'{{t("is empty")}}',value:"$empty",noValue:!0},{label:'{{t("is not empty")}}',value:"$notEmpty",noValue:!0}],v=[{label:'{{t("is")}}',value:"$match",selected:!0,schema:{"x-component":"Select","x-component-props":{mode:"tags"}}},{label:'{{t("is not")}}',value:"$notMatch",schema:{"x-component":"Select","x-component-props":{mode:"tags"}}},{label:'{{t("is any of")}}',value:"$anyOf",schema:{"x-component":"Select","x-component-props":{mode:"tags"}}},{label:'{{t("is none of")}}',value:"$noneOf",schema:{"x-component":"Select","x-component-props":{mode:"tags"}}},{label:'{{t("is empty")}}',value:"$empty",noValue:!0},{label:'{{t("is not empty")}}',value:"$notEmpty",noValue:!0}],j=[{label:'{{t("is")}}',value:"$eq",selected:!0},{label:'{{t("is not")}}',value:"$ne"}],h=[{label:"{{ t('is') }}",value:"$dateOn",selected:!0,schema:{"x-component":"DatePicker.FilterWithPicker"},onlyFilterAction:!0},{label:"{{ t('is not') }}",value:"$dateNotOn",schema:{"x-component":"DatePicker.FilterWithPicker"},onlyFilterAction:!0},{label:"{{ t('is before') }}",value:"$dateBefore",schema:{"x-component":"DatePicker.FilterWithPicker"},onlyFilterAction:!0},{label:"{{ t('is after') }}",value:"$dateAfter",schema:{"x-component":"DatePicker.FilterWithPicker"},onlyFilterAction:!0},{label:"{{ t('is on or after') }}",value:"$dateNotBefore",schema:{"x-component":"DatePicker.FilterWithPicker"},onlyFilterAction:!0},{label:"{{ t('is on or before') }}",value:"$dateNotAfter",schema:{"x-component":"DatePicker.FilterWithPicker"},onlyFilterAction:!0},{label:"{{ t('is between') }}",value:"$dateBetween",schema:{"x-component":"DatePicker.RangePicker"}},{label:"{{ t('is empty') }}",value:"$empty",noValue:!0},{label:"{{ t('is not empty') }}",value:"$notEmpty",noValue:!0}],M=[{label:'{{t("=")}}',value:"$eq",selected:!0},{label:'{{t("\u2260")}}',value:"$ne"},{label:'{{t(">")}}',value:"$gt"},{label:'{{t("\u2265")}}',value:"$gte"},{label:'{{t("<")}}',value:"$lt"},{label:'{{t("\u2264")}}',value:"$lte"},{label:'{{t("is empty")}}',value:"$empty",noValue:!0},{label:'{{t("is not empty")}}',value:"$notEmpty",noValue:!0}],n=[{label:'{{t("is")}}',value:"$eq",selected:!0},{label:'{{t("is not")}}',value:"$ne"},{label:'{{t("exists")}}',value:"$exists",noValue:!0},{label:'{{t("not exists")}}',value:"$notExists",noValue:!0}],y=[{label:'{{t("is")}}',value:"$eq",selected:!0,schema:{"x-component":"Select"}},{label:'{{t("is not")}}',value:"$ne",schema:{"x-component":"Select"}},{label:'{{t("is any of")}}',value:"$in",schema:{"x-component":"Select","x-component-props":{mode:"tags"}}},{label:'{{t("is none of")}}',value:"$notIn",schema:{"x-component":"Select","x-component-props":{mode:"tags"}}},{label:'{{t("is empty")}}',value:"$empty",noValue:!0},{label:'{{t("is not empty")}}',value:"$notEmpty",noValue:!0}],L=[{label:'{{t("is")}}',value:"$eq",selected:!0},{label:'{{t("is not")}}',value:"$neq"},{label:'{{t("is empty")}}',value:"$empty",noValue:!0},{label:'{{t("is not empty")}}',value:"$notEmpty",noValue:!0}],o=[{label:'{{t("Yes")}}',value:"$isTruly",selected:!0,noValue:!0,schema:{"x-component":"Select","x-component-props":{multiple:!1,options:[{label:'{{t("Yes")}}',value:!0},{label:'{{t("No")}}',value:!1}]}}},{label:'{{t("No")}}',value:"$isFalsy",noValue:!0,schema:{"x-component":"Select","x-component-props":{multiple:!1,options:[{label:'{{t("Yes")}}',value:!0},{label:'{{t("No")}}',value:!1}]}}}],a=[{label:'{{t("is any of")}}',value:"$childIn",schema:{"x-component":"CollectionSelect","x-component-props":{mode:"tags"}}},{label:'{{t("is none of")}}',value:"$childNotIn",schema:{"x-component":"CollectionSelect","x-component-props":{mode:"tags"}}}],R=[{label:'{{t("is")}}',value:"$eq",selected:!0,schema:{"x-component":"DataSourceCollectionCascader"}},{label:'{{t("is not")}}',value:"$ne",schema:{"x-component":"DataSourceCollectionCascader"}},{label:'{{t("is any of")}}',value:"$in",schema:{"x-component":"DataSourceCollectionCascader","x-component-props":{mode:"tags"}}},{label:'{{t("is none of")}}',value:"$notIn",schema:{"x-component":"DataSourceCollectionCascader","x-component-props":{mode:"tags"}}},{label:'{{t("is empty")}}',value:"$empty",noValue:!0},{label:'{{t("is not empty")}}',value:"$notEmpty",noValue:!0}],E=[{label:'{{t("contains")}}',value:"$includes",selected:!0,schema:{type:"string","x-component":"Input"}},{label:'{{t("does not contain")}}',value:"$notIncludes",schema:{type:"string","x-component":"Input"}},{label:'{{t("is")}}',value:"$eq",schema:{type:"string","x-component":"Input"}},{label:'{{t("is not")}}',value:"$ne",schema:{type:"string","x-component":"Input"}},{label:'{{t("is empty")}}',value:"$empty",noValue:!0,schema:{type:"string","x-component":"Input"}},{label:'{{t("is not empty")}}',value:"$notEmpty",noValue:!0,schema:{type:"string","x-component":"Input"}}],$,Q,z={type:"string",title:'{{t("Storage type")}}',required:!0,"x-disabled":!0,"x-decorator":"FormItem","x-component":"Select",enum:[{label:"Boolean",value:"boolean"},{label:"String",value:"string"},{label:"Text",value:"text"},{label:"Integer",value:"integer"},{label:"BigInteger",value:"bigInt"},{label:"Float",value:"float"},{label:"Double",value:"double"},{label:"Decimal",value:"decimal"},{label:"Date",value:"date"},{label:"DateOnly",value:"dateonly"},{label:"Time",value:"time"},{label:"Virtual",value:"virtual"},{label:"JSON",value:"json"},{label:"Password",value:"password"},{label:"One to one",value:"hasOne"},{label:"One to many",value:"hasMany"},{label:"Many to one",value:"belongsTo"},{label:"Many to many",value:"belongsToMany"},{label:"Snapshot",value:"snapshot"}]},p={type:"boolean","x-content":'{{t("Unique")}}',"x-decorator":"FormItem","x-component":"Checkbox","x-disabled":"{{ !createMainOnly }}","x-reactions":[{dependencies:["primaryKey"],when:"{{$deps[0]}}",fulfill:{state:{value:!1}}}]},b={type:"boolean","x-content":'{{t("Primary")}}',"x-decorator":"FormItem","x-component":"Checkbox","x-disabled":"{{ !createMainOnly }}","x-reactions":[{dependencies:["unique"],when:"{{$deps[0]&&createMainOnly}}",fulfill:{state:{value:!1}}}]},f={type:"boolean",title:'{{t("Auto increment")}}',"x-content":'{{t("Auto increment")}}',"x-decorator":"FormItem","x-component":"Checkbox","x-disabled":"{{ !createMainOnly }}","x-reactions":[{dependencies:["primaryKey"],when:"{{$deps[0]&&createMainOnly}}",fulfill:{state:{value:!0}}}]},x={type:"boolean",title:'{{t("Default value")}}',"x-content":'{{t("Automatically generate default values")}}',"x-decorator":"FormItem","x-component":"Checkbox",default:!0},m={type:"string",title:'{{t("Relationship type")}}',required:!0,"x-disabled":!0,"x-decorator":"FormItem","x-component":"Select",enum:[{label:"{{t('HasOne')}}",value:"hasOne"},{label:"{{t('HasMany')}}",value:"hasMany"},{label:"{{t('BelongsTo')}}",value:"belongsTo"},{label:"{{t('BelongsToMany')}}",value:"belongsToMany"}]},F={onDelete:{type:"string",title:'{{t("ON DELETE")}}',required:!0,default:"SET NULL","x-disabled":"{{ !createOnly }}","x-decorator":"FormItem","x-component":"Select",enum:[{label:"{{t('SET NULL')}}",value:"SET NULL"},{label:"{{t('RESTRICT')}}",value:"RESTRICT"},{label:"{{t('CASCADE')}}",value:"CASCADE"},{label:"{{t('NO ACTION')}}",value:"NO ACTION"}]}},I={reverse:{type:"void","x-component":"div",properties:{autoCreateReverseField:{type:"boolean",default:!1,"x-decorator":"FormItem","x-component":"Checkbox","x-content":'{{t("Create inverse field in the target collection")}}',"x-reactions":[{target:"reverseField.type",when:"{{!!$self.value}}",fulfill:{state:{hidden:!1}},otherwise:{state:{hidden:!0}}},{target:"reverseField.uiSchema.title",when:"{{!!$self.value}}",fulfill:{state:{hidden:!1}},otherwise:{state:{hidden:!0}}},{target:"reverseField.name",when:"{{!!$self.value}}",fulfill:{state:{hidden:!1}},otherwise:{state:{hidden:!0}}},function(N){var t=N.form.values,B=t.reverseField;N.value=!!(B!=null&&B.key),N.disabled=!!(B!=null&&B.key)}]},"reverseField.type":g()(g()({},m),{},{title:'{{t("Inverse relationship type")}}'}),"reverseField.uiSchema.title":{type:"string",title:'{{t("Inverse field display name")}}',default:"{{record.title}}",required:!0,"x-decorator":"FormItem","x-component":"Input","x-disabled":"{{ !showReverseFieldConfig }}"},"reverseField.name":{type:"string",title:'{{t("Inverse field name")}}',required:!0,"x-decorator":"FormItem","x-component":"Input","x-validator":"uid","x-disabled":"{{ !showReverseFieldConfig }}",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}"}}}},d={"uiSchema.x-component-props.picker":{type:"string",title:'{{t("Picker")}}',"x-decorator":"FormItem","x-component":"Radio.Group",default:"date",enum:[{label:'{{t("Date")}}',value:"date"},{label:'{{t("Month")}}',value:"month"},{label:'{{t("Quarter")}}',value:"quarter"},{label:'{{t("Year")}}',value:"year"}]},"uiSchema.x-component-props.dateFormat":{type:"string",title:'{{t("Date format")}}',"x-decorator":"FormItem","x-component":"ExpiresRadio","x-decorator-props":{},"x-component-props":{className:(0,A.css)($||($=k()([`
        .ant-radio-wrapper {
          display: flex;
          margin: 5px 0px;
        }
      `]))),defaultValue:"dddd",formats:["MMMM Do YYYY","YYYY-MM-DD","MM/DD/YY","YYYY/MM/DD","DD/MM/YYYY"]},default:"YYYY-MM-DD",enum:[{label:(0,r.W)({format:"MMMM Do YYYY"}),value:"MMMM Do YYYY"},{label:(0,r.W)({format:"YYYY-MM-DD"}),value:"YYYY-MM-DD"},{label:(0,r.W)({format:"MM/DD/YY"}),value:"MM/DD/YY"},{label:(0,r.W)({format:"YYYY/MM/DD"}),value:"YYYY/MM/DD"},{label:(0,r.W)({format:"DD/MM/YYYY"}),value:"DD/MM/YYYY"},{label:"custom",value:"custom"}],"x-reactions":{dependencies:["uiSchema.x-component-props.picker"],fulfill:{state:{value:"{{ getPickerFormat($deps[0])}}",componentProps:{picker:"{{$deps[0]}}"}}}}},"uiSchema.x-component-props.showTime":{type:"boolean","x-decorator":"FormItem","x-component":"Checkbox","x-content":'{{t("Show time")}}',"x-reactions":[`{{(field) => {
         field.query('..[].timeFormat').take(f => {
           f.display = field.value ? 'visible' : 'none';
           f.value='HH:mm:ss'
         });
       }}}`,{dependencies:["uiSchema.x-component-props.picker"],when:'{{$deps[0]==="date"}}',fulfill:{state:{hidden:!1}},otherwise:{state:{hidden:!0,value:!1}}}]},"uiSchema.x-component-props.timeFormat":{type:"string",title:'{{t("Time format")}}',"x-component":"Radio.Group","x-decorator":"FormItem",default:"HH:mm:ss",enum:[{label:'{{t("12 hour")}}',value:"hh:mm:ss a"},{label:'{{t("24 hour")}}',value:"HH:mm:ss"}],"x-reactions":{dependencies:["uiSchema.x-component-props.showTime"],fulfill:{state:{hidden:"{{ !$deps[0] }}"}}}}},u={"uiSchema.x-component-props.format":{type:"string",title:'{{t("Time format")}}',"x-component":"ExpiresRadio","x-decorator":"FormItem","x-component-props":{className:(0,A.css)(Q||(Q=k()([`
        color: red;
        .ant-radio-wrapper {
          display: flex;
          margin: 5px 0px;
        }
      `]))),defaultValue:"h:mm a",formats:["hh:mm:ss a","HH:mm:ss"],timeFormat:!0},default:"HH:mm:ss",enum:[{label:(0,r.W)({format:"hh:mm:ss a"}),value:"hh:mm:ss a"},{label:(0,r.W)({format:"HH:mm:ss"}),value:"HH:mm:ss"},{label:"custom",value:"custom"}]}},l={type:"array",title:'{{t("Options")}}',"x-decorator":"FormItem","x-component":"ArrayTable","x-component-props":{pagination:{pageSize:1e3}},items:{type:"object",properties:{column1:{type:"void","x-component":"ArrayTable.Column","x-component-props":{width:50,title:"",align:"center"},properties:{sort:{type:"void","x-component":"ArrayTable.SortHandle"}}},column2:{type:"void","x-component":"ArrayTable.Column","x-component-props":{title:'{{t("Option value")}}'},properties:{value:{type:"string",required:!0,"x-decorator":"FormItem","x-component":"Input","x-reactions":function(t){!t.initialValue&&!t.initialized&&(t.initialValue=(0,C.uid)(),t.setValue((0,C.uid)()))}}}},column3:{type:"void","x-component":"ArrayTable.Column","x-component-props":{title:'{{t("Option label")}}'},properties:{label:{type:"string",required:!0,"x-decorator":"FormItem","x-component":"Input"}}},column4:{type:"void","x-component":"ArrayTable.Column","x-component-props":{title:'{{t("Color")}}'},properties:{color:{type:"string","x-decorator":"FormItem","x-component":"ColorSelect"}}},column5:{type:"void","x-component":"ArrayTable.Column","x-component-props":{title:"",dataIndex:"operations",fixed:"right"},properties:{item:{type:"void","x-component":"FormItem",properties:{remove:{type:"void","x-component":"ArrayTable.Remove"}}}}}}},properties:{add:{type:"void","x-component":"ArrayTable.Addition","x-component-props":{randomValue:!0},title:"{{t('Add option')}}"}}},S={"uiSchema.title":{type:"string",title:'{{t("Field display name")}}',required:!0,"x-decorator":"FormItem","x-component":"Input"},name:{type:"string",title:'{{t("Field name")}}',required:!0,"x-disabled":"{{ !createOnly }}","x-decorator":"FormItem","x-component":"Input","x-validator":"uid",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}"}},H={type:"void",title:'{{ t("View record") }}',"x-component":"RecordPicker.Viewer","x-component-props":{className:"nb-action-popup"},properties:{tabs:{type:"void","x-component":"Tabs","x-component-props":{},"x-initializer":"popup:addTab",properties:{tab1:{type:"void",title:'{{t("Details")}}',"x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{},properties:{grid:{type:"void","x-component":"Grid","x-initializer":"popup:common:addBlock",properties:{}}}}}}}},O={type:"string",title:'{{t("Options")}}',"x-decorator":"FormItem","x-component":"Select","x-component-props":{multiple:!0},enum:"{{collections}}"}},88049:function(He,ae,e){"use strict";e.d(ae,{d:function(){return E}});var Z=e(12444),c=e.n(Z),k=e(72004),i=e.n(k),g=e(25098),C=e.n(g),A=e(28785),r=e.n(A),K=e(48374),v=e.n(K),j=e(31996),h=e.n(j),M=e(26037),n=e.n(M),y=e(9783),L=e.n(y),o=e(5282),a=e(96486),R=e.n(a),E=function($){h()(z,$);var Q=n()(z);function z(){var p;c()(this,z);for(var b=arguments.length,f=new Array(b),x=0;x<b;x++)f[x]=arguments[x];return p=Q.call.apply(Q,[this].concat(f)),L()(C()(p),"parentCollectionsName",void 0),L()(C()(p),"parentCollections",void 0),L()(C()(p),"childrenCollections",{}),L()(C()(p),"childrenCollectionsName",{}),L()(C()(p),"inheritsFields",void 0),L()(C()(p),"currentFields",void 0),L()(C()(p),"allFields",void 0),L()(C()(p),"parentCollectionFields",{}),L()(C()(p),"allCollectionsInheritChain",void 0),L()(C()(p),"inheritCollectionsChain",void 0),L()(C()(p),"foreignKeyFields",void 0),p}return i()(z,[{key:"getParentCollectionsName",value:function(){var b=this;if(this.parentCollectionsName)return this.parentCollectionsName.slice();var f=[],x=function m(F){var I=b.collectionManager.getCollection(F);if(I){var d=I.inherits;if(d)for(var u=0;u<d.length;u++){var l=d[u];f.push(l),m(l)}}return(0,a.uniq)(f)};return this.parentCollectionsName=x(this.name),this.parentCollectionsName}},{key:"getParentCollections",value:function(){var b=this;return this.parentCollections?this.parentCollections.slice():(this.parentCollections=this.getParentCollectionsName().map(function(f){return b.collectionManager.getCollection(f)}),this.parentCollections)}},{key:"getChildrenCollectionsName",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,f=b?"supportView":"notSupportView";if(this.childrenCollectionsName[f])return this.childrenCollectionsName[f].slice();var x=[],m=this.collectionManager.getCollections(),F=function I(d){var u=m.filter(function(S){var H;return(H=S.inherits)===null||H===void 0?void 0:H.includes(d)});if(u.forEach(function(S){var H=S.name;return x.push(H),I(H)}),b){var l=m.filter(function(S){var H;return((H=S.sources)===null||H===void 0?void 0:H.length)===1&&(S==null?void 0:S.sources[0])===d});l.forEach(function(S){var H=S.name;return x.push(S.name),I(H)})}return(0,a.uniq)(x)};return this.childrenCollectionsName[f]=F(this.name),this.childrenCollectionsName[f]}},{key:"getChildrenCollections",value:function(){var b=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,x=f?"supportView":"notSupportView";return this.childrenCollections[x]?this.childrenCollections[x].slice():(this.childrenCollections[x]=this.getChildrenCollectionsName(f).map(function(m){return b.collectionManager.getCollection(m)}),this.childrenCollections[x])}},{key:"getInheritedFields",value:function(){var b=this;if(this.inheritsFields)return this.inheritsFields.slice();var f=this.getParentCollectionsName();return this.inheritsFields=f.map(function(x){var m;return(m=b.collectionManager.getCollection(x))===null||m===void 0?void 0:m.getFields()}).flat().filter(Boolean),this.inheritsFields}},{key:"getFieldsMap",value:function(){return this.fieldsMap?this.fieldsMap:(this.fieldsMap=this.getAllFields().reduce(function(b,f){return b[f.name]=f,b},{}),this.fieldsMap)}},{key:"getCurrentFields",value:function(b){return r()(v()(z.prototype),"getFields",this).call(this,b)}},{key:"getParentCollectionFields",value:function(b){var f=this;if(this.parentCollectionFields||(this.parentCollectionFields={}),this.parentCollectionFields[b])return this.parentCollectionFields[b];var x=this.getCurrentFields(),m=this.getParentCollectionsName(),F=this.collectionManager.getCollection(b),I=F.getCurrentFields(),d=m.indexOf(b),u=x;return d>0&&(m.splice(d),m.forEach(function(l){var S=f.collectionManager.getCollection(l);u=u.concat(S.getCurrentFields())})),this.parentCollectionFields[b]=I.filter(function(l){var S=u.find(function(H){return H.name===l.name});return S.collectionName!==f.name}),this.parentCollectionFields[b]}},{key:"getAllCollectionsInheritChain",value:function(){var b=this;if(this.allCollectionsInheritChain)return this.allCollectionsInheritChain.slice();var f=[this.name],x=function m(F){var I=b.collectionManager.getCollection(F);if(I){var d=I.inherits,u=I.getChildrenCollectionsName();if(d)for(var l=0;l<d.length;l++){var S=d[l];f.includes(S)||(f.push(S),m(S))}if(u)for(var H=0;H<u.length;H++){var O=b.collectionManager.getCollection(u[H]),N=O.name;f.includes(N)||(f.push(N),m(N))}}return f};return this.allCollectionsInheritChain=x(this.name),this.allCollectionsInheritChain||[]}},{key:"getInheritCollectionsChain",value:function(){var b=this;if(this.inheritCollectionsChain)return this.inheritCollectionsChain.slice();var f=[this.name],x=function m(F){var I=b.collectionManager.getCollection(F);if(I){var d=I.inherits;if(d)for(var u=0;u<d.length;u++){var l=d[u];f.includes(l)||(f.push(l),m(l))}}return f};return this.inheritCollectionsChain=x(this.name),this.inheritCollectionsChain}},{key:"getAllFields",value:function(b){if(this.allFields)return this.allFields.slice();var f=this.getCurrentFields(),x=this.getInheritedFields(),m=(0,a.unionBy)((f==null?void 0:f.concat(x))||[],"name");return this.allFields=m,b?(0,a.filter)(m,b):m}},{key:"getForeignKeyFields",value:function(){if(this.foreignKeyFields)return this.foreignKeyFields.slice();var b=this.getCurrentFields(),f=this.getInheritedFields(),x=(0,a.unionBy)((b==null?void 0:b.concat(f))||[],"name");return x}}]),z}(o.F)},40802:function(He,ae,e){"use strict";e.d(ae,{Nz:function(){return R},PI:function(){return m},ds:function(){return f},m1:function(){return x}});var Z=e(5574),c=e.n(Z),k=e(15009),i=e.n(k),g=e(19632),C=e.n(g),A=e(99289),r=e.n(A),K=e(97857),v=e.n(K),j=e(80844),h=e(96486),M=e.n(h),n=e(67294),y=e(21143),L=e(12174),o=e(85893),a={name:"fields",targetKey:"name",fields:[{type:"string",name:"type",interface:"input",uiSchema:{title:'{{ t("Storage type") }}',type:"string","x-component":"Select",enum:[{label:"String",value:"string"}],required:!0}},{type:"string",name:"interface",interface:"input",uiSchema:{title:'{{ t("Field interface") }}',type:"string","x-component":"Select",enum:"{{interfaces}}"}},{type:"string",name:"title",interface:"input",uiSchema:{title:'{{ t("Field display name") }}',type:"string","x-component":"Input",required:!0}},{type:"string",name:"name",interface:"input",uiSchema:{title:'{{ t("Field name") }}',type:"string","x-component":"Input"}}]},R=(0,n.createContext)(null);R.displayName="DataSourceContext_deprecated";var E=function(){var I=(0,n.useContext)(R);return[I.selectedRowKeys,I.setSelectedRowKeys]},$=function(I){var d=(0,n.useContext)(R);return(0,y.useRequest)(function(){return Promise.resolve({data:d.dataSource})},v()(v()({},I),{},{refreshDeps:[JSON.stringify(d.dataSource)]}))},Q=function(){var I=(0,n.useContext)(R),d=(0,j.useForm)(),u=(0,y.useActionContext)(),l=u.setVisible;return{run:function(){return r()(i()().mark(function H(){var O;return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("form.values",d.values),O=I.dataSource||[],O.push((0,h.cloneDeep)(d.values)),I.setDataSource(C()(O)),l(!1),t.next=7,d.reset();case 7:case"end":return t.stop()}},H)}))()}}},z=function(){var I=(0,n.useContext)(R),d=I.selectedRowKeys,u=I.setSelectedRowKeys;return{run:function(){return r()(i()().mark(function S(){var H;return i()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:H=I.dataSource||[],I.setDataSource(H.filter(function(t,B){return!d.includes(B)})),u([]);case 3:case"end":return N.stop()}},S)}))()}}},p=function(){var I=(0,y.useRecordIndex)(),d=(0,j.useForm)(),u=(0,y.useActionContext)(),l=u.setVisible,S=(0,n.useContext)(R);return{run:function(){return r()(i()().mark(function O(){var N,t;return i()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:N=(S==null?void 0:S.dataSource)||[],t=N.map(function(V,U){return U===I?v()({},d.values):V}),S.setDataSource(C()(t)),l(!1);case 4:case"end":return X.stop()}},O)}))()}}},b=function(){var I=(0,y.useRecordIndex)(),d=(0,n.useContext)(R);return{run:function(){return r()(i()().mark(function l(){var S;return i()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:S=d.dataSource||[],d.setDataSource(S.filter(function(N,t){return I!==t}));case 2:case"end":return O.stop()}},l)}))()}}},f={useSelectedRowKeys:E,useDataSource_deprecated:$,useCreateAction:Q,useBulkDestroyAction:z,useUpdateAction:p,useDestroyAction:b},x=(0,j.observer)(function(F){var I=(0,n.useState)([]),d=c()(I,2),u=d[0],l=d[1],S=(0,n.useState)([]),H=c()(S,2),O=H[0],N=H[1],t=(0,y.useRecord)(),B=(0,L.LY)(),X=(0,y.useRequest)(function(){if(t.interface==="subTable"){var V;return t!=null&&(V=t.children)!==null&&V!==void 0&&V.length?Promise.resolve({data:(t==null?void 0:t.children)||[]}):B.resource("fields").list({paginate:!1,sort:"sort",filter:{parentKey:t.key}}).then(function(U){return U==null?void 0:U.data})}return Promise.resolve({data:[]})},{onSuccess:function(U){console.log("dataSource1",U==null?void 0:U.data),N(U==null?void 0:U.data)}});return(0,o.jsx)(y.CollectionProvider_deprecated,{collection:a,children:(0,o.jsx)(R.Provider,{value:{rowKey:"name",service:X,dataSource:O,setDataSource:N,selectedRowKeys:u,setSelectedRowKeys:l},children:F.children})})},{displayName:"SubFieldDataSourceProvider_deprecated"}),m=(0,j.observer)(function(F){var I=F.rowKey,d=F.collection,u=F.association,l=(0,n.useState)([]),S=c()(l,2),H=S[0],O=S[1],N=(0,n.useState)([]),t=c()(N,2),B=t[0],X=t[1],V=(0,y.useRecord)(),U=(0,L.LY)(),D=(0,y.useCollectionManager_deprecated)(),ne=D.getCollection,q=ne(d),J=V==null?void 0:V[u.targetKey||"id"],Y=(0,y.useRequest)(function(){if(J){var P;return U.request({resource:"".concat(u.collectionName,".").concat(u.name),resourceOf:J,action:"list",params:{appends:q==null||(P=q.fields)===null||P===void 0||(P=P.filter(function(w){return w.target}))===null||P===void 0?void 0:P.map(function(w){return w.name})}}).then(function(w){return w.data})}return Promise.resolve({data:(V==null?void 0:V[u.name])||[]})},{onSuccess:function(w){X(w==null?void 0:w.data)}});return(0,o.jsx)(y.CollectionProvider_deprecated,{collection:q,children:(0,o.jsx)(R.Provider,{value:{rowKey:I,service:Y,dataSource:B,setDataSource:X,selectedRowKeys:H,setSelectedRowKeys:O},children:F.children})})},{displayName:"DataSourceProvider_deprecated"})},87078:function(He,ae,e){"use strict";e.d(ae,{f:function(){return b}});var Z=e(97857),c=e.n(Z),k=e(5574),i=e.n(k),g=e(80844),C=e(38089),A=e(66309),r=e(34041),K=e(69677),v=e(57953),j=e(16455),h=e(96486),M=e.n(h),n=e(67294),y=e(26793),L=e(21143),o=e(12174),a=e(47047),R=e(99986),E=e(95193),$=e(85893),Q=function(x,m){var F=[];return x.forEach(function(I){var d=I.children.filter(function(u){var l;return u==null||(l=u.availableTypes)===null||l===void 0?void 0:l.includes(m)});F.push({label:I.label,key:I.key,children:d})}),F.filter(function(I){return I.children.length>0})},z=function(x){var m=x.databaseView,F=x.viewName,I=x.sources,d=x.schema,u=(0,n.useContext)(L.ResourceActionContext),l=u.data,S=(0,o.LY)(),H=(0,y.$)(),O=H.t,N=(0,n.useState)(!1),t=i()(N,2),B=t[0],X=t[1],V=(0,n.useState)([]),U=i()(V,2),D=U[0],ne=U[1],q=(0,n.useState)([]),J=i()(q,2),Y=J[0],P=J[1],w=(0,n.useState)(I),ie=i()(w,2),G=ie[0],le=ie[1],xe=(0,n.useState)([]),_e=i()(xe,2),Ee=_e[0],ze=_e[1],Se=(0,g.useField)(),se=(0,g.useForm)(),me=(0,R.B)(),pe=me.getCollection,ee=me.getInterface,ue=me.getCollectionFields,ge=me.getInheritCollections,Ie=me.getParentCollectionFields,Ae=(0,L.useCompile)(),Le=(0,a.r)(),Te=Le.filter(function(fe){return!["relation","systemInfo"].includes(fe.key)});(0,n.useEffect)(function(){var fe=[];G.forEach(function(re){var T,ce=pe(re),be=ge(re),oe=be.map(function(Ze){var We=Ie(Ze,re);return{type:"group",key:Ze,label:O("Parent collection fields")+O("(".concat(pe(Ze).title,")")),children:We.filter(function(tt){return!["hasOne","hasMany","belongsToMany"].includes(tt==null?void 0:tt.type)}).map(function(tt){var St;return{value:tt.name,label:O((St=tt.uiSchema)===null||St===void 0?void 0:St.title)}})}}),Re=(T=ce.fields.filter(function(Ze){return!["obo","oho","m2m","o2m"].includes(Ze==null?void 0:Ze.interface)}))===null||T===void 0?void 0:T.map(function(Ze){var We;return{value:Ze.name,key:Ze.name,label:O(((We=Ze.uiSchema)===null||We===void 0?void 0:We.title)||Ze.name)}}).concat(oe);fe.push({value:re,label:O(ce.title||ce.name),children:Re})}),P(fe)},[G,m]),(0,n.useEffect)(function(){m&&(X(!0),S.resource("dbViews").get({filterByTk:F,schema:d}).then(function(fe){var re=fe.data;if(re){var T,ce;X(!1),ne([]);var be=(T=Object.values(re==null||(ce=re.data)===null||ce===void 0?void 0:ce.fields))===null||T===void 0?void 0:T.map(function(oe){if(oe.source){var Re,Ze=(l==null?void 0:l.data.find(function(St){return St.name===oe.name}))||oe;return c()(c()({},oe),{},{uiSchema:c()(c()({},(0,h.omit)(Ze.uiSchema,"rawTitle")),{},{title:((Re=Ze.uiSchema)===null||Re===void 0?void 0:Re.title)||Ze.name})})}else{var We,tt=(l==null?void 0:l.data.find(function(St){return St.name===oe.name}))||oe;return c()(c()({},tt),{},{uiSchema:c()(c()({},(0,h.omit)(tt.uiSchema,"rawTitle")),{},{title:((We=tt.uiSchema)===null||We===void 0?void 0:We.title)||tt.name})})}});Se.value=be,setTimeout(function(){var oe,Re,Ze;ne(be),se.setValuesIn("sources",(oe=re.data)===null||oe===void 0?void 0:oe.sources),le((Re=re.data)===null||Re===void 0?void 0:Re.sources),ze(re==null||(Ze=re.data)===null||Ze===void 0?void 0:Ze.unsupportedFields)})}}).catch)},[m]);var je=function(re,T){D.splice(T,1,re),ne(D),Se.value=D.map(function(ce){var be,oe,Re=typeof ce.source=="string"?ce.source:(be=ce.source)===null||be===void 0||(oe=be.filter)===null||oe===void 0||(oe=oe.call(be,Boolean))===null||oe===void 0?void 0:oe.join(".");return c()(c()({},ce),{},{source:Re})})},Pe=[{title:O("Field name"),dataIndex:"name",key:"name",width:130},{title:O("Field source"),dataIndex:"source",key:"source",width:200,render:function(re,T,ce){return(0,$.jsx)(C.Z,{defaultValue:typeof re=="string"?re==null?void 0:re.split("."):re,allowClear:!0,style:{width:"100%"},options:Ae(Y),onChange:function(oe,Re){var Ze,We=(Ze=ue(oe==null?void 0:oe[0]))===null||Ze===void 0?void 0:Ze.find(function(tt){return tt.name===(0,h.last)(oe)});je(c()(c()({},T),{},{source:oe,uiSchema:We==null?void 0:We.uiSchema}),ce)},placeholder:O("Select field source")})}},{title:O("Field type"),dataIndex:"type",width:140,key:"type",render:function(re,T,ce){var be=D[ce];return be!=null&&be.source||!(be!=null&&be.possibleTypes)?(0,$.jsx)(A.Z,{children:re}):(0,$.jsx)(r.default,{defaultValue:re,popupMatchSelectWidth:!1,style:{width:"100%"},options:(be==null?void 0:be.possibleTypes.map(function(oe){return{label:oe,value:oe}}))||[],onChange:function(Re){return je(c()(c()({},be),{},{type:Re}),ce)}})}},{title:O("Field interface"),dataIndex:"interface",key:"interface",width:150,render:function(re,T,ce){var be=D[ce],oe=Q(Te,be.type);return be.source?re:(0,$.jsx)(r.default,{defaultValue:re,style:{width:"100%"},popupMatchSelectWidth:!1,onChange:function(Ze){var We,tt=ee(Ze);je(c()(c()({},be),{},{interface:Ze,uiSchema:tt==null||(We=tt.default)===null||We===void 0?void 0:We.uiSchema}),ce)},children:oe.map(function(Re){return(0,$.jsx)(r.default.OptGroup,{label:Ae(Re.label),children:Re.children.map(function(Ze){return(0,$.jsx)(r.default.Option,{value:Ze.name,children:Ae(Ze.label)},Ze.value)})},Re.key)})})}},{title:O("Field display name"),dataIndex:"title",key:"title",width:180,render:function(re,T,ce){var be,oe=D[ce];return(0,$.jsx)(K.Z,{defaultValue:(oe==null||(be=oe.uiSchema)===null||be===void 0?void 0:be.title)||re,onChange:function(Ze){return je(c()(c()({},oe),{},{uiSchema:c()(c()({},(0,h.omit)(oe==null?void 0:oe.uiSchema,"rawTitle")),{},{title:Ze.target.value})}),ce)}})}}];return(0,$.jsxs)(v.Z,{spinning:B,children:[D.length>0&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)("div",{className:"ant-formily-item-label",style:{display:"flex",padding:"0 0 8px"},children:[(0,$.jsx)("div",{className:"ant-formily-item-label-content",children:(0,$.jsx)("span",{children:(0,$.jsx)("label",{children:O("Fields")})})}),(0,$.jsx)("span",{className:"ant-formily-item-colon",children:":"})]}),(0,$.jsx)(j.Z,{bordered:!0,size:"middle",columns:Pe,dataSource:D,scroll:{y:300},pagination:!1,rowClassName:"editable-row"},F)]}),(0,$.jsx)(E.r,{dataSource:Ee})]})};function p(f,x){return x.viewName===f.viewName&&x.schema===f.schema&&x.source===f.source}var b=n.memo(z,p);b.displayName="PreviewFields"},88962:function(He,ae,e){"use strict";e.d(ae,{S:function(){return y}});var Z=e(9783),c=e.n(Z),k=e(5574),i=e.n(k),g=e(80844),C=e(57953),A=e(16455),r=e(67294),K=e(26793),v=e(21143),j=e(12174),h=e(99986),M=e(85893),n=["lineString","point","circle","polygon"],y=function(o){var a=o.databaseView,R=o.schema,E=o.viewName,$=o.fields,Q=(0,r.useState)([]),z=i()(Q,2),p=z[0],b=z[1],f=(0,r.useState)([]),x=i()(f,2),m=x[0],F=x[1],I=(0,v.useCompile)(),d=(0,r.useState)(!1),u=i()(d,2),l=u[0],S=u[1],H=(0,h.B)(),O=H.getInterface,N=H.getCollectionFields,t=(0,j.LY)(),B=(0,K.$)(),X=B.t,V=(0,g.useForm)();(0,r.useEffect)(function(){a&&U()},[E,R]),(0,r.useEffect)(function(){var ne=D($);b(ne)},[V.values.fields]);var U=function(){var q={};V.values.fields.map(function(J){n.includes(J.type)&&(q[J.name]=J.type)}),S(!0),t.resource("dbViews").query({filterByTk:E,schema:R,fieldTypes:q}).then(function(J){var Y=J.data;Y&&(S(!1),F((Y==null?void 0:Y.data)||[]))}).catch},D=function(q){var J;return(J=q.filter(function(Y){return Y.source||Y.interface}))===null||J===void 0?void 0:J.map(function(Y){var P,w,ie,G,le=typeof(Y==null?void 0:Y.source)=="string"?Y==null||(P=Y.source)===null||P===void 0?void 0:P.split("."):Y==null?void 0:Y.source,xe=(w=N(le==null?void 0:le[0]))===null||w===void 0||(w=w.find(function(ze){return ze.name===(le==null?void 0:le[1])}))===null||w===void 0?void 0:w.uiSchema,_e=(Y==null||(ie=Y.uiSchema)===null||ie===void 0?void 0:ie.title)||(xe==null?void 0:xe.title)||Y.name,Ee=Y.source?xe:(G=O(Y.interface))===null||G===void 0||(G=G.default)===null||G===void 0?void 0:G.uiSchema;return{title:I(_e),dataIndex:Y.name,key:Y.name,width:200,render:function(Se,se,me){var pe=se[Y.name],ee={type:"object",properties:c()({},Y.name,{name:"".concat(Y.name),"x-component":Ee&&le?"CollectionField":"Input","x-read-pretty":!0,"x-collection-field":le==null?void 0:le.join("."),default:Y.interface==="json"?JSON.stringify(pe):pe})};return(0,M.jsx)(v.EllipsisWithTooltip,{ellipsis:!0,children:(0,M.jsx)(g.RecursionField,{schema:ee,name:me,onlyRenderProperties:!0})})}}})};return(0,M.jsx)(C.Z,{spinning:l,children:(0,M.jsxs)("div",{style:{marginBottom:22},children:[(0,M.jsxs)("div",{className:"ant-formily-item-label",style:{marginTop:24,display:"flex",padding:"0 0 8px"},children:[(0,M.jsx)("div",{className:"ant-formily-item-label-content",children:(0,M.jsx)("span",{children:(0,M.jsx)("label",{children:X("Preview")})})}),(0,M.jsx)("span",{className:"ant-formily-item-colon",children:":"})]},E),(p==null?void 0:p.length)>0&&(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(A.Z,{size:"middle",pagination:!1,bordered:!0,columns:p,dataSource:m,scroll:{x:1e3,y:300}},"".concat(E,"-preview"))})]})},"preview")}},95193:function(He,ae,e){"use strict";e.d(ae,{r:function(){return C}});var Z=e(67294),c=e(96074),k=e(16455),i=e(26793),g=e(85893),C=function(r){var K=r.dataSource,v=(0,i.$)(),j=v.t,h=[{title:j("Field name"),dataIndex:"name",key:"name"},{title:j("Field database type"),dataIndex:"rawType",key:"rawType"}];return(K==null?void 0:K.length)>0&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Z,{plain:!0,orientation:"left",orientationMargin:"0",children:(0,g.jsx)("h3",{children:j("Unknown field type")})}),(0,g.jsx)("div",{style:{marginBottom:"15px"},children:j("The following field types are not compatible and do not support output and display")}),(0,g.jsx)(k.Z,{columns:h,dataSource:K,pagination:!1})]})}},78317:function(He,ae,e){"use strict";e.d(ae,{V0:function(){return x},SN:function(){return m},sv:function(){return B},_E:function(){return d}});var Z=e(97857),c=e.n(Z),k=e(5574),i=e.n(k),g=e(19632),C=e.n(g),A=e(26793),r=e(26124),K=e(67294),v=e(57953),j=e(38925),h=e(38089),M=e(66309),n=e(34041),y=e(69677),L=e(16455),o=e(80844),a=e(47047),R=e(62954),E=e(29796),$=e(27484),Q=e.n($),z=e(63250),p=e(85893),b=function(V,U){return V.toLowerCase().includes("id")?"id":typeof U=="number"?Number.isInteger(U)?"integer":"number":typeof U=="boolean"?"checkbox":Q()(U).isValid()?"datetime":"input"},f=function(){var V=(0,o.useForm)(),U=V.values.sources,D=U===void 0?[]:U,ne=(0,A.$)(),q=ne.t,J=(0,E.Bu)(),Y=J.getCollection,P=J.getInheritCollections,w=J.getParentCollectionFields,ie=[];return D.forEach(function(G){var le,xe=Y(G),_e=P(G),Ee=_e.map(function(Se){var se=w(Se,G);return{type:"group",key:Se,label:q("Parent collection fields")+q("(".concat(Y(Se).title,")")),children:se.filter(function(me){return!["hasOne","hasMany","belongsToMany"].includes(me==null?void 0:me.type)}).map(function(me){var pe;return{value:me.name,label:q((pe=me.uiSchema)===null||pe===void 0?void 0:pe.title)}})}});if(xe){var ze=(le=xe.fields.filter(function(Se){return!["hasOne","hasMany","belongsToMany","belongsTo"].includes(Se==null?void 0:Se.type)}))===null||le===void 0?void 0:le.map(function(Se){var se;return{value:Se.name,label:q((se=Se.uiSchema)===null||se===void 0?void 0:se.title)}});ie.push({value:G,label:q(xe.title),children:[].concat(C()(ze),C()(Ee))})}}),ie},x=(0,o.observer)(function(){var X=(0,A.$)(),V=X.t,U=(0,K.useState)([]),D=i()(U,2),ne=D[0],q=D[1],J=(0,r.w3)(),Y=J.data,P=J.error,w=J.loading,ie=Y||{},G=ie.data,le=ie.fields,xe=(0,o.useField)(),_e=(0,K.useContext)(z.rf),Ee=_e.data,ze=(0,R.eJW)(),Se=(0,E.Bu)(),se=Se.getInterface,me=Se.getCollectionField,pe=(0,a.r)(),ee=(0,K.useMemo)(function(){return pe.filter(function(fe){return!["relation"].includes(fe.key)}).map(function(fe,re){return{key:re,label:ze(fe.label),options:fe.children.map(function(T,ce){return{value:T.name,key:"".concat(re,"-").concat(ce),label:ze(T.label)}})}})},[ze]),ue=f(),ge=(0,K.useRef)(se);if((0,K.useEffect)(function(){var fe,re=new Map;w||(G&&G.length?Object.entries((G==null?void 0:G[0])||{}).forEach(function(ce){var be,oe=i()(ce,2),Re=oe[0],Ze=oe[1],We=le[Re],tt=b(Re,Ze),St=(be=ge.current(tt))===null||be===void 0?void 0:be.default,Tt=(We==null?void 0:We.uiSchema)||(St==null?void 0:St.uiSchema)||{};re.set(Re,{name:Re,interface:(We==null?void 0:We.interface)||tt,type:(We==null?void 0:We.type)||(St==null?void 0:St.type),source:We==null?void 0:We.source,uiSchema:c()({title:Re},Tt)})}):Object.entries(le||{}).forEach(function(ce){var be=i()(ce,2),oe=be[0],Re=be[1];return re.set(oe,c()(c()({name:oe,type:"string"},Re),{},{uiSchema:c()({title:oe},(Re==null?void 0:Re.uiSchema)||{})}))})),(fe=xe.value)!==null&&fe!==void 0&&fe.length&&xe.value.forEach(function(ce){re.has(ce.name)&&re.set(ce.name,ce)});var T=Array.from(re.values());T.length&&(q(T),xe.setValue(T))},[w,G,xe,le,Ee]),w)return(0,p.jsx)(v.Z,{});if(!G&&!P)return(0,p.jsx)(j.Z,{showIcon:!0,message:V("Please use a valid SELECT or WITH AS statement")});var Ie=P;if(Ie){var Ae,Le,Te=(Ie==null||(Ae=Ie.response)===null||Ae===void 0||(Ae=Ae.data)===null||Ae===void 0||(Ae=Ae.errors)===null||Ae===void 0||(Le=Ae.map)===null||Le===void 0?void 0:Le.call(Ae,function(fe){return fe.message}).join(`
`))||Ie.message;return(0,p.jsx)(j.Z,{showIcon:!0,message:"".concat(V("SQL error: ")).concat(Te),type:"error"})}var je=function(re,T){var ce=C()(ne);ce.splice(T,1,re),q(ce),xe.setValue(ce.map(function(be){var oe,Re;return c()(c()({},be),{},{source:typeof be.source=="string"?be.source:((oe=be.source)===null||oe===void 0||(Re=oe.filter)===null||Re===void 0||(Re=Re.call(oe,Boolean))===null||Re===void 0?void 0:Re.join("."))||null})}))},Pe=[{title:V("Field name"),dataIndex:"name",key:"name",width:130},{title:V("Field source"),dataIndex:"source",key:"source",width:200,render:function(re,T,ce){var be=ne[ce];return(0,p.jsx)(h.Z,{defaultValue:typeof re=="string"?re==null?void 0:re.split("."):re,allowClear:!0,options:ze(ue),placeholder:V("Select field source"),onChange:function(Re){var Ze,We,tt,St,Tt=le[Re==null?void 0:Re[1]];(Ze=Tt)!==null&&Ze!==void 0&&Ze.interface||(Tt=me((Re==null?void 0:Re.join("."))||"")),je(c()(c()({},be),{},{source:Re,interface:(We=Tt)===null||We===void 0?void 0:We.interface,type:(tt=Tt)===null||tt===void 0?void 0:tt.type,uiSchema:(St=Tt)===null||St===void 0?void 0:St.uiSchema}),ce)}})}},{title:V("Field interface"),dataIndex:"interface",key:"interface",width:150,render:function(re,T,ce){var be,oe=ne[ce];return oe.source?(0,p.jsx)(M.Z,{children:ze((be=se(re))===null||be===void 0?void 0:be.title)||re}):(0,p.jsx)(n.default,{defaultValue:oe.interface||"input",style:{width:"100%"},popupMatchSelectWidth:!1,onChange:function(Ze){var We,tt,St,Tt,lt=se(Ze);je(c()(c()({},oe),{},{interface:Ze||null,uiSchema:c()(c()({},lt==null||(We=lt.default)===null||We===void 0?void 0:We.uiSchema),{},{title:(lt==null||(tt=lt.default)===null||tt===void 0||(tt=tt.uiSchema)===null||tt===void 0?void 0:tt.title)||((St=oe.uiSchema)===null||St===void 0?void 0:St.title)}),type:lt==null||(Tt=lt.default)===null||Tt===void 0?void 0:Tt.type}),ce)},allowClear:!0,options:ee})}},{title:V("Field display name"),dataIndex:"title",key:"title",width:180,render:function(re,T,ce){var be,oe,Re=ne[ce];return(0,p.jsx)(y.Z,{value:((be=Re.uiSchema)===null||be===void 0?void 0:be.title)||re,defaultValue:((oe=Re.uiSchema)===null||oe===void 0?void 0:oe.title)!==void 0?Re.uiSchema.title:Re==null?void 0:Re.name,onChange:function(We){return je(c()(c()({},Re),{},{uiSchema:c()(c()({},Re==null?void 0:Re.uiSchema),{},{title:We.target.value})}),ce)}})}}];return(0,p.jsx)(L.Z,{bordered:!0,size:"small",columns:Pe,dataSource:ne,scroll:{y:300},pagination:!1,rowClassName:"editable-row",rowKey:"name"})},{displayName:"FieldsConfigure"}),m=(0,o.observer)(function(){var X=(0,r.w3)(),V=X.data,U=X.loading,D=X.error,ne=V||{},q=ne.data,J=(0,A.$)(),Y=J.t,P=(0,o.useForm)(),w=P.values.fields||[],ie=w.reduce(function(xe,_e){var Ee;return xe[_e.name]=_e==null||(Ee=_e.uiSchema)===null||Ee===void 0?void 0:Ee.title,xe},{}),G=D?[]:Object.keys((q==null?void 0:q[0])||{}).map(function(xe){var _e=ie[xe];return{title:o.Schema.compile(_e||xe,{t:Y}),dataIndex:xe,key:xe}}),le=D?[]:q==null?void 0:q.map(function(xe,_e){var Ee=Object.entries(xe).reduce(function(ze,Se){var se=i()(Se,2),me=se[0],pe=se[1];if(typeof pe!="string")return ze[me]=pe,ze;var ee=o.Schema.compile(pe,{t:Y});return ze[me]=Y(ee),ze},{});return c()(c()({},Ee),{},{key:_e})});return(0,p.jsx)(L.Z,{bordered:!0,dataSource:le,columns:G,scroll:{x:G.length*150,y:300},loading:U,rowKey:"key"})},{displayName:"PreviewTable"}),F=e(12174),I=e(36586),d=function(V){var U=(0,F.LY)(),D=(0,o.useForm)(),ne=(0,I.a)(),q=V.manual;q=q===void 0?!0:q;var J=(0,F.QT)(function(ie){return U.resource("sqlCollection").execute({values:{sql:ie}}).then(function(G){var le;return(G==null||(le=G.data)===null||le===void 0?void 0:le.data)||{data:[],fields:[],sources:[]}})},{manual:!0,onSuccess:function(G){var le=G.sources,xe=D.values.sources||[];D.setValuesIn("sources",Array.from(new Set([].concat(C()(xe),C()(le)))))}}),Y=J.run,P=D.values.sql||ne.sql,w=(0,K.useRef)(!0);return(0,K.useEffect)(function(){P&&w.current&&Y(P),w.current=!1},[q,Y,P]),(0,p.jsx)(r.pW,{value:J,children:V.children})},u=e(68400),l=e.n(u),S=e(97133),H=e(15867),O=e(25120),N=e(37098),t,B=function(V){var U=V.disabled,D=(0,A.$)(),ne=D.t,q=(0,r.w3)(),J=q.run,Y=q.loading,P=q.error,w=(0,o.useField)(),ie=function(){w.value&&J(w.value)},G=function(){!U&&!w.value||(U||J(w.value),w.setComponentProps({disabled:!U}))};return(0,K.useEffect)(function(){P&&w.setComponentProps({disabled:!1})},[w,P]),(0,p.jsxs)("div",{className:(0,S.css)(t||(t=l()([`
        position: relative;
        .ant-input {
          width: 100%;
        }
      `]))),children:[(0,p.jsx)(R.IIB.TextArea,{value:w.value,disabled:U,onChange:function(xe){return w.value=xe.target.value}}),(0,p.jsxs)(H.ZP.Group,{children:[(0,p.jsx)(H.ZP,{onClick:G,ghost:!0,size:"small",type:"primary",icon:(0,p.jsx)(O.Z,{}),children:ne(U?"Edit":"Confirm")}),(0,p.jsx)(H.ZP,{onClick:function(){return ie()},loading:Y,ghost:!0,size:"small",type:"primary",icon:(0,p.jsx)(N.Z,{}),children:ne("Execute")})]})]})}},66704:function(He,ae,e){"use strict";e.d(ae,{p:function(){return E}});var Z=e(68400),c=e.n(Z),k=e(97133),i=e(97857),g=e.n(i),C=e(5574),A=e.n(C),r=e(80844),K=e(66309),v=e(16455),j=e(67294),h=e(26793),M=e(6145),n=e(21143),y=e(85893),L=function(Q,z,p){var b;if((z==null?void 0:z.template)==="view"||(z==null?void 0:z.template)==="sql")return z.fields;var f=((b=z.fields)===null||b===void 0?void 0:b.filter(function(x){var m=p.find(function(F){return F.value.name===x.name});return!m}))||[];return Q.map(function(x){var m=p.find(function(F){return F.value.name===x});m&&f.push(m.value)}),f},o=(0,r.observer)(function($){var Q=(0,M.useCollectionManager_deprecated)(),z=Q.getInterface,p=(0,r.useForm)(),b=(0,n.useCompile)(),f=(0,j.useState)([]),x=A()(f,2),m=x[0],F=x[1],I=(0,h.$)(),d=I.t,u=(0,n.useApp)(),l=u.pm.get("data-source-main"),S=l.getCollectionPresetFields(),H=(0,j.useMemo)(function(){return S.map(function(N){return{field:N.value.uiSchema.title,interface:N.value.interface,description:N.description,name:N.value.name}})},[]),O=[{title:d("Field"),dataIndex:"field",key:"field",render:function(t){return b(t)}},{title:d("Interface"),dataIndex:"interface",key:"interface",render:function(t){var B;return(0,y.jsx)(K.Z,{children:b((B=z(t))===null||B===void 0?void 0:B.title)})}},{title:d("Description"),dataIndex:"description",key:"description",render:function(t){return b(t)}}];return(0,j.useEffect)(function(){var N=H.map(function(t){return t.name});F(N),p.setValues(g()(g()({},p.values),{},{autoGenId:!1}))},[H]),(0,j.useEffect)(function(){var N=L(m.map(function(t){return t}),p.values,S);p.setValuesIn("fields",N)},[m]),(0,y.jsx)(v.Z,{size:"small",pagination:!1,rowKey:"name",bordered:!0,scroll:{x:600},dataSource:H,columns:O,rowSelection:{type:"checkbox",selectedRowKeys:m,getCheckboxProps:function(t){var B,X;return{name:t.name,disabled:($==null?void 0:$.disabled)||($==null||(B=$.presetFieldsDisabledIncludes)===null||B===void 0||(X=B.includes)===null||X===void 0?void 0:X.call(B,t.name))}},onChange:function(t,B){var X=L(t,p.values,S);F(t),p.setValues(g()(g()({},p.values),{},{fields:X,autoGenId:!1}))}}})},{displayName:"PresetFields"}),a,R={title:{type:"string",title:'{{ t("Collection display name") }}',required:!0,"x-decorator":"FormItem","x-component":"Input"},name:{type:"string",title:'{{t("Collection name")}}',required:!0,"x-disabled":"{{ !createOnly }}","x-decorator":"FormItem","x-component":"Input","x-validator":"uid",description:"{{t('Randomly generated and can be modified. Support letters, numbers and underscores, must start with an letter.')}}"},inherits:{title:'{{t("Inherits")}}',type:"hasMany",name:"inherits","x-decorator":"FormItem","x-component":"Select","x-component-props":{mode:"multiple"},"x-disabled":"{{ !createOnly }}","x-visible":"{{ enableInherits}}","x-reactions":['{{useAsyncDataSource(loadCollections, ["file"])}}']},category:{title:'{{t("Categories")}}',type:"hasMany",name:"category","x-decorator":"FormItem","x-component":"Select","x-component-props":{mode:"multiple"},"x-reactions":["{{useAsyncDataSource(loadCategories)}}"]},description:{title:'{{t("Description")}}',type:"string",name:"description","x-decorator":"FormItem","x-component":"Input.TextArea"},simplePaginate:{"x-content":'{{t("Use simple pagination mode")}}',type:"string",name:"simplePaginate","x-decorator":"FormItem","x-component":"Checkbox",description:'{{t("Skip getting the total number of table records during paging to speed up loading. It is recommended to enable this option for data tables with a large amount of data")}}'},presetFields:{title:'{{t("Preset fields")}}',type:"void","x-decorator":"FormItem","x-visible":"{{ createOnly }}","x-decorator-props":{className:(0,k.css)(a||(a=c()([`
        .ant-formily-item {
          margin-bottom: 0;
        }
      `])))},"x-component":o,"x-component-props":{disabled:"{{ presetFieldsDisabled }}",presetFieldsDisabledIncludes:"{{presetFieldsDisabledIncludes}}"}}},E=function(){for(var Q={},z=arguments.length,p=new Array(z),b=0;b<z;b++)p[b]=arguments[b];for(var f=0,x=p;f<x.length;f++){var m=x[f];R[m]&&(Q[m]=R[m])}return Q}},44605:function(){},53772:function(){},99899:function(He,ae,e){"use strict";e.d(ae,{U:function(){return Z},l:function(){return c}});function Z(k){var i;if(!k)return[];var g=k.split(":"),C=g.pop(),A=(i=g[0])!==null&&i!==void 0?i:"main";return[A,C]}function c(k,i){return!k||k==="main"?i:"".concat(k,":").concat(i)}},5346:function(He,ae,e){"use strict";e.d(ae,{T:function(){return C}});var Z=e(5574),c=e.n(Z),k=e(34041),i=e(67294),g=e(85893);function C(A){var r=A.title,K=A.defaultValue,v=A.onChange,j=A.options,h=A.fieldNames,M=(0,i.useState)(!1),n=c()(M,2),y=n[0],L=n[1],o=(0,i.useRef)(null);return(0,g.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},onClick:function(R){R.stopPropagation(),L(function(E){return!E})},onMouseLeave:function(){o.current=setTimeout(function(){L(!1)},200)},children:[r,(0,g.jsx)(k.default,{open:y,"data-testid":"select-".concat(r),popupMatchSelectWidth:!1,bordered:!1,defaultValue:K,onChange:v,popupClassName:"select-popup-".concat(r.replaceAll(" ","-")),fieldNames:h,options:j,style:{textAlign:"right",minWidth:100},onMouseEnter:function(){clearTimeout(o.current)}})]})}},7737:function(He,ae,e){"use strict";e.d(ae,{T:function(){return Z.T},W:function(){return c.W}});var Z=e(5346),c=e(56318)},56318:function(He,ae,e){"use strict";e.d(ae,{W:function(){return g}});var Z=e(80844),c=e(67668),k=e(38752),i=e(81230);function g(){var C,A,r,K,v=(0,i.z9)(),j=v.fieldSchema,h=v.collectionField,M=(0,Z.useField)(),n=(0,k.G5)(),y=(0,Z.useFieldSchema)(),L=(0,c.Hy)(),o=j||y,a=h||L,R={AssociationField:"Select"},E=(o==null||(C=o["x-component-props"])===null||C===void 0?void 0:C.mode)||(M==null||(A=M.componentProps)===null||A===void 0?void 0:A.mode)||(n?"FileManager":"")||(o==null||(r=o["x-component-props"])===null||r===void 0?void 0:r.component)||(a==null||(K=a.uiSchema)===null||K===void 0?void 0:K["x-component"]);return R[E]||E}},52967:function(He,ae,e){"use strict";e.d(ae,{e:function(){return c}});var Z=e(67294),c=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=(0,Z.useRef)(0);return(0,Z.useEffect)(function(){var C=function(r){var K=r.clientY,v=Math.max(K,window.innerHeight-K);g.current=v};return window.addEventListener("mousemove",C),function(){window.removeEventListener("mousemove",C)}},[]),(0,Z.useMemo)(function(){return g.current-40},i)}},20085:function(He,ae,e){"use strict";e.d(ae,{O:function(){return C}});var Z=e(10274),c=e(67294),k=e(69962),i=e(68230),g=function(r){var K=r.children,v=(0,i.d)(),j=v.token,h=j.colorFillTertiary,M=new Z.C(j.colorFill).onBackground(j.colorFillSecondary).toHexShortString(),n=new Z.C(j.colorFill).onBackground(j.colorFill).toHexShortString(),y=new Z.C(j.colorFill).onBackground(j.colorFill).onBackground(j.colorFill).toHexShortString();return(0,c.useEffect)(function(){document.body.style.setProperty("--nb-spacing","".concat(j.marginLG,"px")),document.body.style.setProperty("--nb-designer-offset","".concat(j.marginXS,"px")),document.body.style.setProperty("--nb-header-height","".concat(j.sizeXXL-2,"px")),document.body.style.setProperty("--nb-box-bg",j.colorBgLayout),document.body.style.setProperty("--nb-box-bg",j.colorBgLayout),document.body.style.setProperty("--controlHeightLG","".concat(j.controlHeightLG,"px")),document.body.style.setProperty("--paddingContentVerticalSM","".concat(j.paddingContentVerticalSM,"px")),document.body.style.setProperty("--marginSM","".concat(j.marginSM,"px")),document.body.style.setProperty("--colorInfoBg",j.colorInfoBg),document.body.style.setProperty("--colorInfoBorder",j.colorInfoBorder),document.body.style.setProperty("--colorWarningBg",j.colorWarningBg),document.body.style.setProperty("--colorWarningBorder",j.colorWarningBorder),document.body.style.setProperty("--colorText",j.colorText),document.body.style.setProperty("--colorPrimaryText",j.colorPrimaryText),document.body.style.setProperty("--colorPrimaryTextActive",j.colorPrimaryTextActive),document.body.style.setProperty("--colorPrimaryTextHover",j.colorPrimaryTextHover),document.body.style.setProperty("--colorBgScrollTrack",h),document.body.style.setProperty("--colorBgScrollBar",M),document.body.style.setProperty("--colorBgScrollBarHover",n),document.body.style.setProperty("--colorBgScrollBarActive",y),document.body.style.setProperty("--colorSettings",j.colorSettings||k.uH.token.colorSettings),document.body.style.setProperty("--colorBgSettingsHover",j.colorBgSettingsHover),document.body.style.setProperty("--colorBorderSettingsHover",j.colorBorderSettingsHover),document.body.style.setProperty("--colorBgMenuItemSelected",j.colorBgHeaderMenuActive),document.body.style.setProperty("background-color",j.colorBgContainer)},[M,y,n,h,j.colorBgContainer,j.colorBgLayout,j.colorBgSettingsHover,j.colorBorderSettingsHover,j.colorInfoBg,j.colorInfoBorder,j.colorPrimaryText,j.colorPrimaryTextActive,j.colorPrimaryTextHover,j.colorSettings,j.colorText,j.colorWarningBg,j.colorWarningBorder,j.controlHeightLG,j.marginLG,j.marginSM,j.marginXS,j.paddingContentVerticalSM,j.sizeXXL]),K};g.displayName="CSSVariableProvider";var C=g},31959:function(He,ae,e){"use strict";e.d(ae,{S:function(){return M}});var Z=e(97857),c=e.n(Z),k=e(12444),i=e.n(k),g=e(72004),C=e.n(g),A=e(9783),r=e.n(A),K=e(96486),v=e.n(K),j=e(65375),h=e(84157),M=function(){function n(y){i()(this,n),r()(this,"name",void 0),r()(this,"group",void 0),r()(this,"title",void 0),r()(this,"description",void 0),r()(this,"order",void 0),r()(this,"default",void 0),r()(this,"sortable",void 0),r()(this,"availableTypes",void 0),r()(this,"supportDataSourceType",void 0),r()(this,"notSupportDataSourceType",void 0),r()(this,"hasDefaultValue",void 0),r()(this,"componentOptions",void 0),r()(this,"isAssociation",void 0),r()(this,"operators",void 0),r()(this,"properties",void 0),r()(this,"filterable",void 0),r()(this,"titleUsable",void 0),r()(this,"hidden",void 0),this.collectionFieldInterfaceManager=y}return C()(n,[{key:"addComponentOption",value:function(L){if(!this.componentOptions){var o,a;this.componentOptions=[];var R=(o=this.default)===null||o===void 0||(o=o.uiSchema)===null||o===void 0?void 0:o["x-component"],E=(a=this.default)===null||a===void 0||(a=a.uiSchema)===null||a===void 0?void 0:a["x-component-props"];if(R){var $,Q=(($=this.default)===null||$===void 0||($=$.uiSchema)===null||$===void 0?void 0:$.type)||"string",z=(0,h.tval)(R.startsWith("Input")?(0,K.capitalize)(Q):R.split(".").pop());this.componentOptions=[{label:z,value:R,useProps:function(){return E||{}}}]}}this.componentOptions.push(L)}},{key:"getConfigureFormProperties",value:function(){var L=this.hasDefaultValue?this.getDefaultValueProperty():{};return c()(c()({},(0,K.cloneDeep)(c()(c()({},j.defaultProps),this===null||this===void 0?void 0:this.properties))),L)}},{key:"getDefaultValueProperty",value:function(){var L,o;return{defaultValue:c()(c()(c()({},(0,K.cloneDeep)(this===null||this===void 0||(L=this.default)===null||L===void 0?void 0:L.uiSchema)),this===null||this===void 0||(o=this.properties)===null||o===void 0?void 0:o.uiSchema),{},{required:!1,title:'{{ t("Default value") }}',"x-decorator":"FormItem","x-reactions":[{dependencies:["uiSchema.x-component-props.gmt","uiSchema.x-component-props.showTime","uiSchema.x-component-props.dateFormat","uiSchema.x-component-props.timeFormat","uiSchema.x-component-props.picker","uiSchema.x-component-props.format"],fulfill:{state:{componentProps:{gmt:"{{$deps[0]}}",showTime:"{{$deps[1]}}",dateFormat:"{{$deps[2]}}",timeFormat:"{{$deps[3]}}",picker:"{{$deps[4]}}",format:"{{$deps[5]}}"}}}},{dependencies:["uiSchema.x-component-props.picker"],fulfill:{state:{value:null}}},{dependencies:["primaryKey","unique","autoIncrement","defaultToCurrentTime"],when:"{{$deps[0]||$deps[1]||$deps[2]||$deps[3]}}",fulfill:{state:{hidden:!0,value:null}},otherwise:{state:{hidden:!1}}},{dependencies:["uiSchema.enum"],fulfill:{state:{dataSource:"{{$deps[0]}}"}}}]})}}}]),n}()},65050:function(He,ae,e){"use strict";e.d(ae,{S:function(){return Z.S},Z:function(){return r}});var Z=e(31959),c=e(12444),k=e.n(c),i=e(72004),g=e.n(i),C=e(9783),A=e.n(C),r=function(){function K(v,j,h){k()(this,K),A()(this,"collectionFieldInterfaceInstances",{}),A()(this,"collectionFieldGroups",{}),A()(this,"actionList",{}),this.dataSourceManager=h,this.addFieldInterfaces(v),this.addFieldInterfaceGroups(j)}return g()(K,[{key:"addFieldInterfaces",value:function(){var j=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=h.reduce(function(n,y){var L=new y(j);return n[L.name]=L,Array.isArray(j.actionList[L.name])&&(j.actionList[L.name].forEach(function(o){L[o.type](o.data)}),j.actionList[L.name]=void 0),n},{});Object.assign(this.collectionFieldInterfaceInstances,M)}},{key:"addFieldInterfaceComponentOption",value:function(j,h){var M=this.getFieldInterface(j);if(!M){this.actionList[j]||(this.actionList[j]=[]),this.actionList[j].push({type:"addComponentOption",data:h});return}M.addComponentOption(h)}},{key:"getFieldInterface",value:function(j){return this.collectionFieldInterfaceInstances[j]}},{key:"getFieldInterfaces",value:function(j){return Object.values(this.collectionFieldInterfaceInstances).filter(function(h){if(!j||!h.supportDataSourceType&&!h.notSupportDataSourceType)return!0;if(h.supportDataSourceType){var M;return(M=h.supportDataSourceType)===null||M===void 0?void 0:M.includes(j)}if(h.notSupportDataSourceType){var n;return!((n=h.notSupportDataSourceType)!==null&&n!==void 0&&n.includes(j))}})}},{key:"addFieldInterfaceGroups",value:function(j){Object.assign(this.collectionFieldGroups,j)}},{key:"getFieldInterfaceGroups",value:function(){return this.collectionFieldGroups}},{key:"getFieldInterfaceGroup",value:function(j){return this.collectionFieldGroups[j]}}]),K}()},52020:function(He,ae,e){"use strict";e.d(ae,{s:function(){return Q}});var Z=e(97857),c=e.n(Z),k=e(80844),i=e(85667),g=e(84327),C=e(96486),A=e.n(C),r=e(67294),K=e(7340),v=e(57105),j=e(15503),h=e(62954),M=e(29124),n=e(67668),y=e(26793),L=e(85893),o=function(p,b,f){(0,i.untracked)(function(){p[b]===void 0&&(p[b]=f)})},a=function(p,b,f){typeof b.required>"u"&&(p.required=!!f.required)},R=function(p,b,f){return typeof b.required>"u"?!!f.required:typeof b.required=="boolean"?b.required:!!b.required},E=function(p){var b,f=(0,h.eJW)(),x=(0,k.useField)(),m=(0,k.useFieldSchema)(),F=(0,n.Hy)(),I=F.uiSchema,d=F.defaultValue,u=(0,M.SF)(),l=u.isAllowToSetDefaultValue,S=(0,h.Cor)(((b=m["x-component-props"])===null||b===void 0?void 0:b.component)||(I==null?void 0:I["x-component"])||"Input"),H=(0,K.bz)(),O=(0,j.M)(I==null?void 0:I["x-use-component-props"],p);return(0,r.useEffect)(function(){if(I){var N=f(I);if(o(x,"content",N["x-content"]),o(x,"title",N.title),o(x,"description",N.description),H!=null&&H.form){var t=l()?m.default||d:void 0;t!=null&&o(x,"initialValue",t)}if(!x.validator&&(N["x-validator"]||m["x-validator"])){var B=(0,C.concat)([],N["x-validator"]||[],m["x-validator"]||[]);x.validator=B}m["x-disabled"]===!0&&(x.disabled=!0),m["x-read-pretty"]===!0&&(x.readPretty=!0),a(x,m,N),x.dataSource=N.enum;var X=f(N["x-component-props"])||{};x.componentProps=(0,g.merge)(X,x.componentProps||{},O||{})}},[I]),I?(0,L.jsx)(S,c()(c()({},p),O)):null},$=function(p){var b,f=(0,k.useField)(),x=(0,k.useFieldSchema)(),m=(0,v.mz)(),F=m.uiSchema,I=(0,y.$)(),d=I.t,u=(0,h.Cor)(((b=x["x-component-props"])===null||b===void 0?void 0:b.component)||(F==null?void 0:F["x-component"])||"Input"),l=(0,j.M)(F==null?void 0:F["x-use-component-props"],p);return(0,r.useEffect)(function(){x["x-read-pretty"]===!0&&!f.readPretty&&(f.readPretty=!0),R(f,x,F)&&(f.validator=(0,C.concat)(f.validator||[],[function(S){if(!S)return d("This field is invalid")}]),f.required=!1)},[f,x]),F?(0,L.jsx)(u,c()(c()({},p),l)):null},Q=(0,k.connect)(function(z){var p=(0,k.useFieldSchema)(),b=(0,v.cl)();return(0,L.jsx)(n.YT,{name:p.name,children:b?(0,L.jsx)($,c()({},z)):(0,L.jsx)(E,c()({},z))})});Q.displayName="CollectionField"},67668:function(He,ae,e){"use strict";e.d(ae,{Hy:function(){return K},YT:function(){return A},m9:function(){return r},v_:function(){return C}});var Z=e(67294),c=e(80844),k=e(1836),i=e(36032),g=e(85893),C=(0,Z.createContext)(null);C.displayName="CollectionFieldContext";var A=function(j){var h=j.name,M=j.children,n=j.allowNull,y=(0,c.useFieldSchema)(),L=(0,k.Kx)(),o=(0,k.d9)(),a=(0,Z.useMemo)(function(){var R;if(!L)return null;var E=y==null||(R=y["x-component-props"])===null||R===void 0?void 0:R.field;return o.getCollectionField(y==null?void 0:y["x-collection-field"])||E||L.getField((E==null?void 0:E.name)||h)},[L,y,o,h]);return!a&&n?(0,g.jsx)(g.Fragment,{children:M}):a?(0,g.jsx)(C.Provider,{value:a,children:M}):(0,g.jsx)(i.z,{type:"Field",name:h})},r=function(j){return(0,g.jsx)(C.Provider,{value:null,children:j.children})},K=function(){var j=(0,Z.useContext)(C);return j}},58530:function(He,ae,e){"use strict";e.d(ae,{D:function(){return A}});var Z=e(12444),c=e.n(Z),k=e(72004),i=e.n(k),g=e(9783),C=e.n(g),A=function(){function r(K){c()(this,r),C()(this,"data",void 0),C()(this,"parentRecord",void 0),C()(this,"isNew",void 0);var v=K.data,j=K.parentRecord,h=K.isNew;this.isNew=h,this.data=v,this.parentRecord=j}return i()(r,[{key:"setData",value:function(v){this.data=v}},{key:"setParentRecord",value:function(v){this.parentRecord=v}}]),r}()},49834:function(He,ae,e){"use strict";e.d(ae,{E0:function(){return g},Kv:function(){return K},RA:function(){return r},nE:function(){return A},oV:function(){return C},vI:function(){return i}});var Z=e(67294),c=e(58530),k=e(85893),i=(0,Z.createContext)(null);i.displayName="CollectionRecordContext";var g=Z.memo(function(v){var j=v.isNew,h=v.record,M=v.parentRecord,n=v.children,y=(0,Z.useMemo)(function(){if(M)return M instanceof c.D?M:new c.D({data:M});if(h instanceof c.D)return h.parentRecord},[M,h]),L=(0,Z.useMemo)(function(){var o;return h?h instanceof c.D?(o=h,o.isNew=h.isNew||j):o=new c.D({data:h,isNew:j}):o=new c.D({isNew:j}),o.setParentRecord(y),o},[h,y,j]);return(0,k.jsx)(i.Provider,{value:L,children:n})});g.displayName="CollectionRecordProvider";function C(){var v=(0,Z.useContext)(i);return v}function A(){var v=C();return v==null?void 0:v.data}function r(){var v=C();return v==null?void 0:v.parentRecord}function K(){var v,j=C();return j==null||(v=j.parentRecord)===null||v===void 0?void 0:v.data}},88496:function(He,ae,e){"use strict";e.d(ae,{DI:function(){return Z.D},E0:function(){return c.E0},Kv:function(){return c.Kv},RA:function(){return c.RA},nE:function(){return c.nE},oV:function(){return c.oV},vI:function(){return c.vI}});var Z=e(58530),c=e(49834)},373:function(He,ae,e){"use strict";e.d(ae,{d:function(){return C},k:function(){return g}});var Z=e(85667),c=e(96486),k=e.n(c),i="__isNewRecord__",g=function(r){return(0,Z.untracked)(function(){return!!(r!=null&&r[i])})},C=function(r){if(!(0,c.isObject)(r))throw new Error("markRecordAsNew: record must be an object");return r[i]=!0,r}},34096:function(He,ae,e){"use strict";e.d(ae,{P:function(){return A}});var Z=e(72004),c=e.n(Z),k=e(12444),i=e.n(k),g=e(9783),C=e.n(g),A=c()(function r(K){i()(this,r),C()(this,"name",void 0),C()(this,"Collection",void 0),C()(this,"title",void 0),C()(this,"color",void 0),C()(this,"order",void 0),C()(this,"default",void 0),C()(this,"events",void 0),C()(this,"configurableProperties",void 0),C()(this,"availableFieldInterfaces",void 0),C()(this,"divider",void 0),C()(this,"description",void 0),C()(this,"configureActions",void 0),C()(this,"forbidDeletion",void 0),C()(this,"supportDataSourceType",void 0),C()(this,"notSupportDataSourceType",void 0),this.collectionTemplateManager=K})},67836:function(He,ae,e){"use strict";e.d(ae,{P:function(){return Z.P},y:function(){return r}});var Z=e(34096),c=e(12444),k=e.n(c),i=e(72004),g=e.n(i),C=e(9783),A=e.n(C),r=function(){function K(v,j){k()(this,K),A()(this,"collectionTemplateInstances",{}),this.dataSourceManager=j,this.addCollectionTemplates(v)}return g()(K,[{key:"addCollectionTemplates",value:function(){var j=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=h.reduce(function(n,y){var L=new y(j);return n[L.name]=L,n},{});return Object.assign(this.collectionTemplateInstances,M),this.dataSourceManager.getDataSources().forEach(function(n){var y=n.collectionManager.getCollections(function(L){return M[L.template]});n.collectionManager.reAddCollections(y)}),M}},{key:"getCollectionTemplate",value:function(j){return this.collectionTemplateInstances[j]}},{key:"getCollectionTemplates",value:function(j){return Object.values(this.collectionTemplateInstances).filter(function(h){if(!j||!h.supportDataSourceType&&!h.notSupportDataSourceType)return!0;if(h.supportDataSourceType){var M;return(M=h.supportDataSourceType)===null||M===void 0?void 0:M.includes(j)}if(h.notSupportDataSourceType){var n;return!((n=h.notSupportDataSourceType)!==null&&n!==void 0&&n.includes(j))}}).sort(function(h,M){return(h.order||0)-(M.order||0)})}}]),K}()},19271:function(He,ae,e){"use strict";e.d(ae,{Xo:function(){return j},lb:function(){return K},ym:function(){return v}});var Z=e(67294),c=e(67668),k=e(36032),i=e(35746),g=e(58837),C=e(85893),A=(0,Z.createContext)(null);A.displayName="ParentCollectionContext";var r=function(M){var n=(0,g.Kx)();return(0,C.jsx)(A.Provider,{value:n,children:M.children})},K=function(){return(0,Z.useContext)(A)},v=function(M){var n=M.name,y=M.children,L=(0,i.d9)(),o=L.getCollectionName(n);return o?(0,C.jsx)(g.YQ,{name:String(n).split(".")[0],children:(0,C.jsx)(r,{children:(0,C.jsx)(c.YT,{name:n,children:(0,C.jsx)(g.YQ,{name:o,children:y})})})}):(0,C.jsx)(k.z,{type:"Collection",name:n})},j=function(){var M=(0,c.Hy)();return M!=null&&M.target?"".concat(M.collectionName,".").concat(M.name):null}},5282:function(He,ae,e){"use strict";e.d(ae,{F:function(){return j}});var Z=e(61227),c=e.n(Z),k=e(12444),i=e.n(k),g=e(72004),C=e.n(g),A=e(9783),r=e.n(A),K=e(96486),v=e.n(K),j=function(){function h(M,n){i()(this,h),r()(this,"fieldsMap",void 0),r()(this,"primaryKey",void 0),this.options=M,this.collectionManager=n}return C()(h,[{key:"fields",get:function(){return this.options.fields||[]}},{key:"app",get:function(){return this.collectionManager.app}},{key:"dataSource",get:function(){return this.options.dataSource}},{key:"sourceKey",get:function(){return this.options.sourceKey}},{key:"name",get:function(){return this.options.name}},{key:"key",get:function(){return this.options.key}},{key:"title",get:function(){return this.options.title}},{key:"inherit",get:function(){return this.options.inherit}},{key:"hidden",get:function(){return this.options.hidden}},{key:"description",get:function(){return this.options.description}},{key:"duplicator",get:function(){return this.options.duplicator}},{key:"category",get:function(){return this.options.category}},{key:"targetKey",get:function(){return this.options.targetKey}},{key:"model",get:function(){return this.options.model}},{key:"createdBy",get:function(){return this.options.createdBy}},{key:"updatedBy",get:function(){return this.options.updatedBy}},{key:"logging",get:function(){return this.options.logging}},{key:"from",get:function(){return this.options.from}},{key:"rawTitle",get:function(){return this.options.rawTitle}},{key:"getPrimaryKey",value:function(){if(this.primaryKey)return this.primaryKey;if(this.options.targetKey)return this.options.targetKey;var n=this.getFields({primaryKey:!0})[0];return this.primaryKey=n==null?void 0:n.name,this.primaryKey}},{key:"getFilterTargetKey",value:function(){return this.filterTargetKey||this.getPrimaryKey()||"id"}},{key:"inherits",get:function(){return this.options.inherits||[]}},{key:"titleField",get:function(){return this.hasField(this.options.titleField)?this.options.titleField:this.getPrimaryKey()}},{key:"sources",get:function(){return this.options.sources||[]}},{key:"template",get:function(){return this.options.template}},{key:"tableName",get:function(){return this.options.tableName}},{key:"viewName",get:function(){return this.options.viewName}},{key:"writableView",get:function(){return this.options.writableView}},{key:"filterTargetKey",get:function(){return this.options.filterTargetKey}},{key:"sortable",get:function(){return this.options.sortable}},{key:"autoGenId",get:function(){return this.options.autoGenId}},{key:"magicAttribute",get:function(){return this.options.magicAttribute}},{key:"tree",get:function(){return this.options.tree}},{key:"isThrough",get:function(){return this.options.isThrough}},{key:"autoCreate",get:function(){return this.options.autoCreate}},{key:"resource",get:function(){return this.options.resource}},{key:"setOption",value:function(n,y){return this.options[n]=y,this}},{key:"getOptions",value:function(){return this.options}},{key:"getOption",value:function(n){return this.options[n]}},{key:"getFields",value:function(n){return n?(0,K.filter)(this.fields,n):this.fields}},{key:"getAllFields",value:function(n){return this.getFields(n)}},{key:"getFieldsMap",value:function(){return this.fieldsMap||(this.fieldsMap=this.getFields().reduce(function(n,y){return n[y.name]=y,n},{})),this.fieldsMap}},{key:"getFieldByAssociationName",value:function(n){var y=this.getFieldsMap(),L=String(n).split("."),o=c()(L),a=o[0],R=o.slice(1),E=y[a];if(E){var $=E==null?void 0:E.target;if($){var Q=this.collectionManager.getCollection($);if(Q)return Q.getField(R.join("."))}}}},{key:"getField",value:function(n){if(n){var y=this.getFieldsMap();if(String(n).split(".").length>1){var L=this.getFieldByAssociationName(n);return L||(typeof n=="string"&&n.startsWith("".concat(this.name,"."))?(n=n.replace("".concat(this.name,"."),""),this.getField(n)):void 0)}return y[n]}}},{key:"hasField",value:function(n){return!!this.getField(n)}},{key:"isTitleField",value:function(n){var y;return(y=this.app.dataSourceManager.collectionFieldInterfaceManager.getFieldInterface(n.interface))===null||y===void 0?void 0:y.titleUsable}},{key:"isInherited",value:function(){return this.inherits.length>0}}]),h}()},35746:function(He,ae,e){"use strict";e.d(ae,{IX:function(){return A},bX:function(){return j},d9:function(){return v},xw:function(){return K}});var Z=e(5574),c=e.n(Z),k=e(67294),i=e(44990),g=e(58861),C=e(85893),A=(0,k.createContext)(null);A.displayName="CollectionManagerContext";var r=function(M){var n=M.instance,y=M.children,L=(0,i.wl)(),o=(0,g.P5)(),a=(0,k.useMemo)(function(){return n||(L==null?void 0:L.collectionManager)},[n,L]),R=k.useState(Math.random()),E=c()(R,2),$=E[0],Q=E[1];(0,k.useEffect)(function(){a.dataSource.addReloadCallback(function(){Q(Math.random())})},[a]);var z=(0,k.useMemo)(function(){var p=a;return o!=null&&o.length?p.clone(o):p},[a,o,$]);return(0,C.jsx)(A.Provider,{value:z,children:y})},K=function(M){var n=M.instance,y=M.dataSource,L=M.children;return(0,C.jsx)(i.LX,{dataSource:y,children:(0,C.jsx)(r,{instance:n,children:L})})};function v(){var h=(0,k.useContext)(A);return h}var j=function(M){var n=v(),y=(0,k.useMemo)(function(){return n.getCollections(M)},[n,M]);return y}},58837:function(He,ae,e){"use strict";e.d(ae,{Kx:function(){return j},Pd:function(){return v},WH:function(){return r},YQ:function(){return K},ge:function(){return h}});var Z=e(97857),c=e.n(Z),k=e(67294),i=e(67668),g=e(36032),C=e(35746),A=e(85893),r=(0,k.createContext)(null);r.displayName="CollectionContext";var K=function(n){var y=n.name,L=n.children,o=n.allowNull,a=(0,C.d9)(),R=(0,k.useMemo)(function(){return a==null?void 0:a.getCollection(y)},[a,y]);return!R&&o?(0,A.jsx)(A.Fragment,{children:n.children}):!R&&!o?(0,A.jsx)(g.z,{type:"Collection",name:y}):(0,A.jsx)(r.Provider,{value:R,children:L})},v=function(n){return(0,A.jsx)(i.v_.Provider,{value:null,children:(0,A.jsx)(K,c()({},n))})};function j(){var M=(0,k.useContext)(r);return M}var h=function(n){var y=j(),L=(0,k.useMemo)(function(){return y.getFields(n)},[y,n]);return L}},58861:function(He,ae,e){"use strict";e.d(ae,{P5:function(){return K},Xc:function(){return A},j5:function(){return r}});var Z=e(19632),c=e.n(Z),k=e(67294),i=e(44990),g=e(35746),C=e(85893),A=(0,k.createContext)(null);A.displayName="ExtendCollectionsContext";var r=function(j){var h=j.children,M=j.collections,n=K(),y=(0,k.useMemo)(function(){return n?[].concat(c()(n),c()(M)):M},[n,M]),L=(0,i.FC)();return(0,C.jsx)(A.Provider,{value:y,children:(0,C.jsx)(g.xw,{dataSource:L,children:h})})};function K(){var v=(0,k.useContext)(A);return v}},1836:function(He,ae,e){"use strict";e.d(ae,{ym:function(){return k.ym},FE:function(){return Z.F},WH:function(){return c.WH},w4:function(){return p},IX:function(){return b.IX},xw:function(){return b.xw},YQ:function(){return c.YQ},Xc:function(){return f.Xc},j5:function(){return f.j5},Pd:function(){return c.Pd},Xo:function(){return k.Xo},Kx:function(){return c.Kx},ge:function(){return c.ge},d9:function(){return b.d9},bX:function(){return b.bX},P5:function(){return f.P5},lb:function(){return k.lb}});var Z=e(5282),c=e(58837),k=e(19271),i=e(61227),g=e.n(i),C=e(52677),A=e.n(C),r=e(97857),K=e.n(r),v=e(12444),j=e.n(v),h=e(72004),M=e.n(h),n=e(9783),y=e.n(n),L=e(80129),o=e.n(L),a=e(13769),R=e.n(a),E=["rawTitle","title","fields"],$=["uiSchema"],Q=function(m,F){var I=m.rawTitle,d=m.title,u=m.fields,l=u===void 0?[]:u,S=R()(m,E);return K()(K()({},S),{},{title:I?d:F.i18n.t(d,{ns:"lm-collections"}),rawTitle:I||d,fields:l==null?void 0:l.map(function(H){var O=H.uiSchema,N=R()(H,$);if(O!=null&&O.title){var t=O.title;O.title=O.rawTitle?t:F.i18n.t(t,{ns:"lm-collections"}),O.rawTitle=O.rawTitle||t}return Array.isArray(O==null?void 0:O.enum)&&(O.enum=O.enum.map(function(B){return K()(K()({},B),{},{value:(B==null?void 0:B.value)===void 0?B:B.value,label:B.rawLabel?B.label:F.i18n.t(B.label,{ns:"lm-collections"}),rawLabel:B.rawLabel||B.label})})),K()({uiSchema:O},N)})})};function z(x,m,F,I){var d=new x(F,I);return m.forEach(function(u){var l=new u(F,I);Object.getOwnPropertyNames(l).forEach(function(S){var H=Object.getOwnPropertyDescriptor(l,S);H?Object.defineProperty(d,S,H):d[S]=l[S]}),Object.getOwnPropertyNames(u.prototype).forEach(function(S){S!=="constructor"&&(d.__proto__[S]=u.prototype[S])})}),d}var p=function(){function x(m,F){j()(this,x),y()(this,"collectionInstancesMap",{}),y()(this,"collectionInstancesArr",[]),this.dataSource=F,this.addCollections(m)}return M()(x,[{key:"dataSourceManager",get:function(){return this.dataSource.dataSourceManager}},{key:"app",get:function(){return this.dataSourceManager.app}},{key:"getCollectionInstance",value:function(F){var I=this.dataSource.dataSourceManager.collectionTemplateManager.getCollectionTemplate(F.template),d=(I==null?void 0:I.Collection)||Z.F,u=I==null?void 0:I.transform,l=u?u(Q(F,this.app),this.app):Q(F,this.dataSource.dataSourceManager.app),S=K()(K()({},l),{},{dataSource:this.dataSource.key}),H=z(d,this.dataSourceManager.collectionMixins,S,this);return H}},{key:"getInstancesMap",value:function(){var F=this,I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=I.map(function(u){return F.getCollectionInstance(u)});return d.reduce(function(u,l){return u[l.name]=l,u},{})}},{key:"addCollections",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],I=this.getInstancesMap(F);this.collectionInstancesMap=K()(K()({},this.collectionInstancesMap),I),this.collectionInstancesArr=Object.values(this.collectionInstancesMap)}},{key:"setCollections",value:function(F){this.collectionInstancesMap=this.getInstancesMap(F),this.collectionInstancesArr=Object.values(this.collectionInstancesMap)}},{key:"reAddCollections",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.collectionInstancesArr,I=F.map(function(d){return d.getOptions()});this.addCollections(I)}},{key:"getCollection",value:function(F){if(F){if(A()(F)==="object")return this.getCollectionInstance(F);if(String(F).split(".").length>1){var I=this.getCollectionField(F);return I?this.getCollection(I.target):void 0}return this.collectionInstancesMap[F]}}},{key:"getCollections",value:function(F){return F?this.collectionInstancesArr.filter(F):this.collectionInstancesArr}},{key:"getCollectionName",value:function(F){var I=this.getCollection(F);return I==null?void 0:I.name}},{key:"getCollectionField",value:function(F){if(F){if(A()(F)==="object")return F;if(String(F).split(".").length<2){console.error('[@nocobase/client]: CollectionManager.getField() path "'.concat(F,'" is invalid'));return}var I=String(F).split("."),d=g()(I),u=d[0],l=d.slice(1),S=this.getCollection(u);if(S)return S.getField(l.join("."))}}},{key:"getCollectionFields",value:function(F,I){var d;return((d=this.getCollection(F))===null||d===void 0?void 0:d.getFields(I))||[]}},{key:"getCollectionAllFields",value:function(F,I){var d;return((d=this.getCollection(F))===null||d===void 0?void 0:d.getAllFields(I))||[]}},{key:"getFilterByTK",value:function(F,I){if(!F||!I){console.error("@nocobase/client]: CollectionManager.getFilterByTK() collectionOrAssociation or collectionRecordOrAssociationRecord is invalid");return}var d=function(N,t){if(Array.isArray(N)){var B={};return N.forEach(function(X){B[X]=t[X]}),o().stringify(B)}else return t[N]};if(F instanceof Z.F){var u=F.getFilterTargetKey();return d(u,I)}if(F.includes(".")){var l=this.getCollectionField(F);if(!l){console.error('[@nocobase/client]: CollectionManager.getFilterByTK() field "'.concat(F,'" is invalid'));return}if(l.targetKey)return I[l.targetKey]}var S=this.getCollection(F);if(!S){console.error('[@nocobase/client]: CollectionManager.getFilterByTK() collection "'.concat(F,'" is invalid'));return}var H=S.getFilterTargetKey();return d(H,I)}},{key:"getSourceKeyByAssociation",value:function(F){if(F){var I=this.getCollectionField(F);if(I){if(I.sourceKey)return I.sourceKey;var d=this.getCollection(F.split(".")[0]);if(d)return d.filterTargetKey||d.getPrimaryKey()||"id"}}}},{key:"clone",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],I=new x([],this.dataSource);return I.collectionInstancesArr=this.collectionInstancesArr,I.collectionInstancesMap=this.collectionInstancesMap,I.addCollections(F),I}}]),x}(),b=e(35746),f=e(58861)},22558:function(He,ae,e){"use strict";e.d(ae,{K:function(){return h}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(80844),C=e(96486),A=e.n(C),r=e(26793),K=e(13511),v=e(67668),j=e(62954),h={name:"fieldComponent",type:"select",useVisible:function(){var n=(0,v.Hy)(),y=(0,K.fp)();if(!n)return!1;var L=y.collectionFieldInterfaceManager.getFieldInterface(n==null?void 0:n.interface);return Array.isArray(L==null?void 0:L.componentOptions)&&L.componentOptions.length>1&&L.componentOptions.filter(function(o){return!o.useVisible||o.useVisible()}).length>1},useComponentProps:function(){var n,y,L,o=(0,r.$)(),a=o.t,R=(0,g.useField)(),E=(0,g.useFieldSchema)(),$=(0,v.Hy)(),Q=(0,K.fp)(),z=Q.collectionFieldInterfaceManager.getFieldInterface($==null?void 0:$.interface),p=(0,j.z9d)(),b=p.fieldSchema,f=b||E,x=(0,j.ngQ)(),m=x.dn,F=(0,j.eJW)(),I=(z==null||(n=z.componentOptions)===null||n===void 0||(n=n.filter(function(d){return!d.useVisible||d.useVisible()}))===null||n===void 0?void 0:n.map(function(d){return{label:F(d.label),value:d.value,useProps:d.useProps}}))||[];return{title:a("Field component"),options:I,value:((y=f["x-component-props"])===null||y===void 0?void 0:y.component)||((L=I[0])===null||L===void 0?void 0:L.value),onChange:function(u){var l,S,H=I.find(function(N){return N.value===u}),O=i()({component:u},(H==null||(l=H.useProps)===null||l===void 0?void 0:l.call(H))||{});A().set(f,"x-component-props",O),R.componentProps=O,m.emit("patch",{schema:(S={},c()(S,"x-uid",f["x-uid"]),c()(S,"x-component-props",O),S)})}}}}},36032:function(He,ae,e){"use strict";e.d(ae,{p:function(){return R},z:function(){return o}});var Z=e(97857),c=e.n(Z),k=e(48997),i=e(3321),g=e(59720),C=e(15867),A=e(67294),r=e(26793),K=e(62954),v=e(44990),j=e(49453),h=e(57638),M=e(1836),n=e(18243),y=e(85893),L=k.Z.Text,o=function($){var Q=$.type,z=$.name,p=$.message,b=(0,K.ngQ)(),f=b.designable,x=b.dn,m=i.Z.useApp(),F=m.modal,I=(0,r.$)(),d=I.t,u=(0,v.wl)(),l=(0,K.eJW)(),S=(0,M.Kx)(),H=(0,j.fp)(),O=(0,A.useMemo)(function(){if(Q==="Data Source")return z;var B=(H==null?void 0:H.getDataSources().length)>=1&&u&&u.key!==h.ym?"".concat(l(u.displayName||u.key)," > "):"";if(Q==="Collection")return"".concat(B).concat(z);var X=S?"".concat(l(S.title)||S.name||S.tableName," > "):"";return"".concat(B).concat(X).concat(z)},[]),N=(0,A.useMemo)(function(){return Q==="Field"?"Field":"Block"},[Q]),t=(0,A.useMemo)(function(){return z?p?"".concat(d(Q),' "').concat(O,'" ').concat(p):d('The {{type}} "{{name}}" may have been deleted. Please remove this {{blockType}}.',{type:d(Q).toLocaleLowerCase(),name:O,blockType:d(N).toLocaleLowerCase()}).replaceAll("&gt;",">"):"".concat(d(Q)," ","name is required")},[p,O,Q,d,N]);return f?Q==="Field"?(0,y.jsx)(K.BQs,{ellipsis:!0,children:(0,y.jsx)(L,{type:"secondary",children:t})}):(0,y.jsx)(n.P,{children:(0,y.jsx)(g.ZP,{status:"404",subTitle:t,extra:(0,y.jsx)(C.ZP,{onClick:function(){return F.confirm(c()(c()({title:d("Delete block"),content:d("Are you sure you want to delete it?")},confirm),{},{onOk:function(){x.remove(null,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}),x.refresh({refreshParentSchema:!0})}}))},children:d("Delete")},"Delete")})}):null},a=function(){var $=(0,r.$)(),Q=$.t,z=(0,v.wl)(),p=(0,K.eJW)(),b=(0,M.Kx)(),f=(0,j.fp)(),x=(0,A.useMemo)(function(){var F=(f==null?void 0:f.getDataSources().length)>=1&&z&&z.key!==h.ym?"".concat(p(z.displayName||z.key)," > "):"";if(b)return"".concat(F).concat(b.name);var I=b?"".concat(p(b.title)||b.name||b.tableName," > "):"";return"".concat(F).concat(I).concat(b.name)},[]),m=(0,A.useMemo)(function(){return Q(`The current user only has the UI configuration permission, but don't have view permission for collection "{{name}}"`,{name:x}).replaceAll("&gt;",">")},[x,Q]);return(0,y.jsx)(n.P,{children:(0,y.jsx)(g.ZP,{status:"404",subTitle:m})})},R=function(){var $=(0,K.ngQ)(),Q=$.designable;return Q?(0,y.jsx)(a,{}):null}},88996:function(He,ae,e){"use strict";e.d(ae,{i:function(){return v}});var Z=e(97857),c=e.n(Z),k=e(13769),i=e.n(k),g=e(67294),C=e(13511),A=e(35746),r=e(85893),K=["children","dataSourceManager"],v=function(h){var M=h.children,n=h.dataSourceManager,y=i()(h,K);return(0,r.jsx)(C.kv,{dataSourceManager:n,children:(0,r.jsx)(A.xw,c()(c()({},y),{},{children:M}))})}},87180:function(He,ae,e){"use strict";e.d(ae,{KY:function(){return $},Rr:function(){return p},dq:function(){return E},eS:function(){return Q},hZ:function(){return o},sI:function(){return R},zh:function(){return z}});var Z=e(97857),c=e.n(Z),k=e(13769),i=e.n(k),g=e(5574),C=e.n(g),A=e(67294),r=e(75667),K=e(67205),v=e(15503),j=e(62954),h=e(1836),M=e(39742),n=e(14310),y=e(85893),L=["collection","association","dataSource","children","hidden"],o=(0,A.createContext)({});o.displayName="DataBlockContext";var a=(0,A.createContext)(null),R=function(f){var x=f.children,m=A.useState(!1),F=C()(m,2),I=F[0],d=F[1],u=(0,A.useMemo)(function(){return{rerenderDataBlock:function(){d(!0),setTimeout(function(){d(!1)})}}},[]);return I?null:(0,y.jsx)(a.Provider,{value:u,children:x})},E=function(f){var x=f.collection,m=f.association,F=f.allowNull,I=F===void 0?!1:F,d=(0,A.useMemo)(function(){return m?{Component:h.ym,name:m}:{Component:h.Pd,name:x}},[x,m]);return(0,y.jsx)(d.Component,{name:d.name,allowNull:I,children:f.children})},$=(0,v.t)(A.memo(function(b){var f=b,x=f.collection,m=f.association,F=f.dataSource,I=f.children,d=f.hidden,u=i()(f,L),l=(0,j.ngQ)(),S=l.dn;return d?null:(0,y.jsx)(o.Provider,{value:{dn:S,props:c()(c()({},u),{},{collection:x,association:m,dataSource:F})},children:(0,y.jsx)(h.xw,{dataSource:F,children:(0,y.jsx)(E,{collection:x,association:m,children:(0,y.jsx)(r.Hh,{children:(0,y.jsx)(n.eh,{children:(0,y.jsx)(M.N4,{children:(0,y.jsx)(K.vY,{params:b.params,children:(0,y.jsx)(R,{children:I})})})})})})})})}),{displayName:"DataBlockProvider"}),Q=function(){var f=(0,A.useContext)(o);if(!f)throw new Error("useDataBlock() must be used within a DataBlockProvider");return f},z=function(){var f=Q();return f.props},p=function(){var f=(0,A.useContext)(a);if(!f)throw new Error("useRerenderDataBlock() must be used within a DataBlockProvider");return f}},39742:function(He,ae,e){"use strict";e.d(ae,{H0:function(){return f},N4:function(){return F},Pt:function(){return d},hS:function(){return I},q4:function(){return z},uz:function(){return m},xQ:function(){return u}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(97857),C=e.n(g),A=e(5574),r=e.n(A),K=e(67294),v=e(96486),j=e.n(v),h=e(12174),M=e(4277),n=e(19530),y=e(54724),L=e(21044),o=e(88496),a=e(8341),R=e(87180),E=e(14310),$=e(85893),Q=(0,K.createContext)(null);Q.displayName="BlockRequestRefContext";var z=(0,K.createContext)(!1);z.displayName="BlockRequestLoadingContext";var p=(0,K.createContext)(null);p.displayName="BlockRequestDataContext";function b(l){var S=(0,M.tU)(),H=(0,E.wb)(),O=l.action,N=l.params,t=N===void 0?{}:N,B=l.record,X=l.requestService,V=l.requestOptions,U=l.sourceId,D=l.association,ne=l.parentRecord,q=(0,h.LY)(),J=(0,R.zh)(),Y=(0,a.FE)(J.dataSource),P=(0,n.U)(D),w=(0,K.useMemo)(function(){return[JSON.stringify(t),JSON.stringify(B)]},[t,B]),ie=r()(w,2),G=ie[0],le=ie[1],xe=function(Se){var se;if(B)return Promise.resolve({data:B});if(!O)throw new Error("[nocobase]: The 'action' parameter is missing in the 'DataBlockRequestProvider' component");if(O==="get"&&j().isNil(t.filterByTk))return console.warn('[nocobase]: The "filterByTk" parameter is missing in the "DataBlockRequestProvider" component');var me=t.filterByTk===void 0?j().omit(t,"filterByTk"):t;return(se=H[O])===null||se===void 0?void 0:se.call(H,C()(C()({},me),Se)).then(function(pe){return pe.data})},_e=function(){var ze=i()(c()().mark(function Se(){var se,me,pe,ee,ue=arguments;return c()().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Ie.next=2,Promise.all([(X||xe).apply(void 0,ue),f({sourceId:U,association:D,parentRecord:ne,api:q,headers:Y,sourceKey:P})]);case 2:return se=Ie.sent,me=r()(se,2),pe=me[0],ee=me[1],pe&&(pe.parentRecord=ee==null?void 0:ee.data),Ie.abrupt("return",pe);case 8:case"end":return Ie.stop()}},Se)}));return function(){return ze.apply(this,arguments)}}(),Ee=(0,h.QT)(_e,C()(C()({},V),{},{manual:S==="manual",ready:!!O,refreshDeps:[O,G,le,H,D,ne,U]}));return Ee}function f(l){return x.apply(this,arguments)}function x(){return x=i()(c()().mark(function l(S){var H,O,N,t,B,X,V,U,D;return c()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(H=S.sourceId,O=S.association,N=S.parentRecord,t=S.api,B=S.headers,X=S.sourceKey,!N){q.next=3;break}return q.abrupt("return",Promise.resolve({data:N}));case 3:if(!(!O||!X||!H)){q.next=5;break}return q.abrupt("return",Promise.resolve({data:void 0}));case 5:return V=O.split("."),U="".concat(V[0],":get?filter[").concat(X,"]=").concat(H),q.next=9,t.request({url:U,headers:B});case 9:return D=q.sent,q.abrupt("return",D.data);case 11:case"end":return q.stop()}},l)})),x.apply(this,arguments)}var m=function(S){var H,O,N,t,B=(0,K.useRef)(S.recordRequest),X=(0,K.useRef)((H=S.recordRequest)===null||H===void 0?void 0:H.data),V=(0,y.Du)(),U=V.active,D=(0,K.useRef)(U),ne=(0,K.useDeferredValue)(U),q=(0,R.zh)();if(ne&&!D.current&&(j().isNil(q.dataLoadingMode)||q.dataLoadingMode==="auto")){var J;(J=S.recordRequest)===null||J===void 0||J.refresh()}if(ne&&D.current&&!((O=S.recordRequest)!==null&&O!==void 0&&O.loading)&&!j().isEqual(X.current,(N=S.recordRequest)===null||N===void 0?void 0:N.data)){var Y;X.current=(Y=S.recordRequest)===null||Y===void 0?void 0:Y.data}return ne!==D.current&&(D.current=ne),B.current=S.recordRequest,(0,$.jsx)(Q.Provider,{value:B,children:(0,$.jsx)(z.Provider,{value:(t=S.recordRequest)===null||t===void 0?void 0:t.loading,children:(0,$.jsx)(p.Provider,{value:X.current,children:S.children})})})},F=K.memo(function(l){var S,H,O=l.children,N=(0,R.zh)(),t=N.action,B=N.filterByTk,X=N.sourceId,V=N.params,U=V===void 0?L.Nu:V,D=N.association,ne=N.collection,q=N.record,J=N.parentRecord,Y=N.requestOptions,P=N.requestService,w=(0,K.useMemo)(function(){return C()(C()({},U),{},{filterByTk:B||U.filterByTk})},[B,U]),ie=b({action:t,sourceId:X,record:q,association:D,collection:ne,requestOptions:Y,requestService:P,params:w,parentRecord:J}),G=(S=ie.data)===null||S===void 0?void 0:S.parentRecord,le=(0,K.useMemo)(function(){return G&&new o.DI({isNew:!1,data:G instanceof o.DI?G.data:G})},[G]);return(0,$.jsx)(m,{recordRequest:ie,children:t!=="list"?(0,$.jsx)(o.E0,{isNew:t==null,record:((H=ie.data)===null||H===void 0?void 0:H.data)||q,parentRecord:le||J,children:O}):(0,$.jsx)(o.E0,{isNew:!1,record:null,parentRecord:le||J,children:O})})});F.displayName="DataBlockRequestProvider";var I=function(){var S=(0,K.useContext)(Q),H=(0,K.useContext)(z),O=(0,K.useContext)(p);return(0,K.useMemo)(function(){return S?C()(C()({},S.current),{},{loading:H,data:O}):null},[S,O,H])},d=function(){var S=(0,K.useContext)(Q);return(0,K.useMemo)(function(){return{getDataBlockRequest:function(){return S?S.current:null}}},[S])},u=function(){return(0,K.useContext)(p)}},14310:function(He,ae,e){"use strict";e.d(ae,{T1:function(){return h},eh:function(){return M},wb:function(){return n}});var Z=e(96695),c=e.n(Z),k=e(96486),i=e.n(k),g=e(67294),C=e(12174),A=e(1836),r=e(88496),K=e(8341),v=e(87180),j=e(85893),h=(0,g.createContext)(null);h.displayName="DataBlockResourceContext";var M=function(L){var o=L.children,a=(0,v.zh)(),R=(0,A.d9)(),E=a.association,$=a.collection,Q=a.dataSource,z=a.sourceId,p=a.parentRecord,b=(0,C.LY)(),f=(0,K.FE)(Q),x=(0,g.useMemo)(function(){return typeof $=="string"?$:$==null?void 0:$.name},[$]),m=(0,g.useMemo)(function(){if(z)return z;if(E&&p){var I=R.getSourceKeyByAssociation(E),d=p instanceof r.DI?p.data:p;if((0,k.isArray)(I)){var u={},l=c()(I),S;try{for(l.s();!(S=l.n()).done;){var H=S.value;u[H]=d==null?void 0:d[H]}}catch(O){l.e(O)}finally{l.f()}return encodeURIComponent(JSON.stringify(u))}else return d[I]}},[E,z,p]),F=(0,g.useMemo)(function(){return E?b.resource(E,m,f,!m):b.resource(x,void 0,f)},[b,E,$,m,f]);return(0,j.jsx)(h.Provider,{value:F,children:o})};function n(){var y=(0,g.useContext)(h);if(!y)throw new Error("useDataBlockResource() must be used within a DataBlockResourceProvider");return y}},35519:function(He,ae,e){"use strict";e.d(ae,{n:function(){return o},o:function(){return L}});var Z=e(31996),c=e.n(Z),k=e(26037),i=e.n(k),g=e(15009),C=e.n(g),A=e(99289),r=e.n(A),K=e(12444),v=e.n(K),j=e(72004),h=e.n(j),M=e(9783),n=e.n(M),y=e(1836),L=function(){function a(R,E){v()(this,a),n()(this,"collectionManager",void 0),n()(this,"reloadCallbacks",[]),this.options=R,this.dataSourceManager=E,this.collectionManager=new y.w4(R.collections,this)}return h()(a,[{key:"app",get:function(){return this.dataSourceManager.app}},{key:"key",get:function(){return this.options.key}},{key:"displayName",get:function(){return this.options.displayName}},{key:"status",get:function(){return this.options.status}},{key:"errorMessage",get:function(){return this.options.errorMessage}},{key:"collections",get:function(){return this.collectionManager.getCollections()||[]}},{key:"getOptions",value:function(){return this.options}},{key:"setOptions",value:function(E){Object.assign(this.options,E)}},{key:"getOption",value:function(E){return this.options[E]}},{key:"addReloadCallback",value:function(E){this.reloadCallbacks.includes(E)||this.reloadCallbacks.push(E)}},{key:"removeReloadCallback",value:function(E){this.reloadCallbacks=this.reloadCallbacks.filter(function($){return $!==E})}},{key:"reload",value:function(){var R=r()(C()().mark(function $(){var Q;return C()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.getDataSource();case 2:return Q=p.sent,this.setOptions(Q),this.collectionManager.setCollections(Q.collections||[]),this.reloadCallbacks.forEach(function(b){return b(Q.collections)}),p.abrupt("return",this.options);case 7:case"end":return p.stop()}},$,this)}));function E(){return R.apply(this,arguments)}return E}()}]),a}(),o=function(a){c()(E,a);var R=i()(E);function E(){return v()(this,E),R.apply(this,arguments)}return h()(E,[{key:"getDataSource",value:function(){return{collections:this.collections}}}]),E}(L)},57638:function(He,ae,e){"use strict";e.d(ae,{AK:function(){return p},UC:function(){return z},ym:function(){return Q}});var Z=e(97857),c=e.n(Z),k=e(15009),i=e.n(k),g=e(5574),C=e.n(g),A=e(99289),r=e.n(A),K=e(19632),v=e.n(K),j=e(12444),h=e.n(j),M=e(72004),n=e.n(M),y=e(9783),L=e.n(y),o=e(35519),a=e(67836),R=e(65050),E=e(96486),$=e.n(E),Q="main",z='{{t("Main")}}',p=function(){function b(){var f,x=this,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=arguments.length>1?arguments[1]:void 0;h()(this,b),L()(this,"dataSourceInstancesMap",{}),L()(this,"multiDataSources",[]),L()(this,"collectionMixins",[]),L()(this,"collectionTemplateManager",void 0),L()(this,"collectionFieldInterfaceManager",void 0),this.options=m,this.app=F,this.collectionTemplateManager=new a.y(m.collectionTemplates,this),this.collectionFieldInterfaceManager=new R.Z(m.fieldInterfaces,m.fieldInterfaceGroups,this),(f=this.collectionMixins).push.apply(f,v()(m.collectionMixins||[])),this.addDataSource(o.n,{key:Q,displayName:z,collections:m.collections||[]}),(m.dataSources||[]).forEach(function(I){x.addDataSource(o.n,I)})}return n()(b,[{key:"addCollectionMixins",value:function(){var x=this,m,F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],I=F.filter(function(d){return!x.collectionMixins.includes(d)});I.length&&((m=this.collectionMixins).push.apply(m,v()(I)),this.getDataSources().forEach(function(d){return d.collectionManager.reAddCollections()}))}},{key:"getDataSources",value:function(x){var m=Object.values(this.dataSourceInstancesMap);return x?$().filter(m,x):m}},{key:"getDataSource",value:function(x){return x?this.dataSourceInstancesMap[x]:this.dataSourceInstancesMap[Q]}},{key:"removeDataSources",value:function(x){var m=this;x.forEach(function(F){delete m.dataSourceInstancesMap[F]})}},{key:"addDataSource",value:function(x,m){var F=new x(m,this);return this.dataSourceInstancesMap[F.key]=F,F}},{key:"addDataSources",value:function(){var f=r()(i()().mark(function m(F,I){return i()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!this.multiDataSources.some(function(l){var S=C()(l,2),H=S[0],O=S[1];return H===F&&O===I})){u.next=2;break}return u.abrupt("return");case 2:this.multiDataSources.push([F,I]);case 3:case"end":return u.stop()}},m,this)}));function x(m,F){return f.apply(this,arguments)}return x}()},{key:"getAllCollections",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=x.filterCollection,F=x.filterDataSource;return this.getDataSources(F).reduce(function(I,d){return I.push(c()(c()({},d.getOptions()),{},{collections:d.collectionManager.getCollections(m)})),I},[])}},{key:"addFieldInterfaceGroups",value:function(x){this.collectionFieldInterfaceManager.addFieldInterfaceGroups(x)}},{key:"addCollectionTemplates",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.collectionTemplateManager.addCollectionTemplates(x)}},{key:"addFieldInterfaces",value:function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.collectionFieldInterfaceManager.addFieldInterfaces(x)}},{key:"reload",value:function(){var f=r()(i()().mark(function m(){var F=this;return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Promise.all(this.multiDataSources.map(function(){var u=r()(i()().mark(function l(S){var H,O,N,t;return i()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return H=C()(S,2),O=H[0],N=H[1],X.next=3,O();case 3:t=X.sent,t.map(function(V){return F.addDataSource(N,V)});case 5:case"end":return X.stop()}},l)}));return function(l){return u.apply(this,arguments)}}()));case 2:return d.abrupt("return",Promise.all(this.getDataSources().map(function(u){return u.reload()})));case 3:case"end":return d.stop()}},m,this)}));function x(){return f.apply(this,arguments)}return x}()}]),b}()},13511:function(He,ae,e){"use strict";e.d(ae,{Uv:function(){return C},fp:function(){return g},kv:function(){return i},up:function(){return k}});var Z=e(67294),c=e(85893),k=(0,Z.createContext)(null);k.displayName="DataSourceManagerContext";var i=function(r){var K=r.children,v=r.dataSourceManager;return(0,c.jsx)(k.Provider,{value:v,children:K})};function g(){var A=(0,Z.useContext)(k);return A}function C(){var A=g(),r=(0,Z.useCallback)(function(K,v){var j;return A==null||(j=A.getDataSource(v))===null||j===void 0||(j=j.collectionManager)===null||j===void 0||(j=j.getCollection(K))===null||j===void 0?void 0:j.getAllCollectionsInheritChain()},[A]);return{getAllCollectionsInheritChain:r}}},44990:function(He,ae,e){"use strict";e.d(ae,{FC:function(){return y},LX:function(){return M},NT:function(){return h},wl:function(){return n}});var Z=e(5574),c=e.n(Z),k=e(67294),i=e(13511),g=e(36032),C=e(62954),A=e(59720),r=e(15867),K=e(3407),v=e(26793),j=e(85893),h=(0,k.createContext)(null);h.displayName="DataSourceContext";var M=function(o){var a=o.children,R=o.dataSource,E=(0,i.fp)(),$=(0,v.$)(),Q=$.t,z=(0,C.Dmu)(),p=z.refresh,b=k.useState(0),f=c()(b,2),x=f[0],m=f[1],F=E==null?void 0:E.getDataSource(R);return F?F.status==="loading-failed"?(0,j.jsx)(g.z,{type:"Data Source",name:F.displayName||R,message:F.errorMessage||"loading failed"}):F.status==="loading"||F.status==="reloading"?(0,j.jsx)(C.Ssf,{children:(0,j.jsx)(A.ZP,{icon:(0,j.jsx)(K.Z,{}),title:"".concat(F.displayName||R," ").concat(Q("data source")," ").concat(Q("loading"),"..."),extra:(0,j.jsx)(r.ZP,{type:"primary",onClick:function(){return F.reload().then(function(){p(),m(Math.random())})},children:Q("Refresh")})})}):(0,j.jsx)(h.Provider,{value:F,children:a}):(0,j.jsx)(g.z,{type:"Data Source",name:R})};function n(){var L=(0,k.useContext)(h);return L}function y(){var L=(0,k.useContext)(h);return L==null?void 0:L.key}},49453:function(He,ae,e){"use strict";e.d(ae,{AK:function(){return c.AK},FC:function(){return k.FC},LX:function(){return k.LX},NT:function(){return k.NT},UC:function(){return c.UC},Uv:function(){return i.Uv},fp:function(){return i.fp},kv:function(){return i.kv},nC:function(){return Z.n},o2:function(){return Z.o},up:function(){return i.up},wl:function(){return k.wl},ym:function(){return c.ym}});var Z=e(35519),c=e(57638),k=e(44990),i=e(13511)},94804:function(He,ae,e){"use strict";e.d(ae,{dq:function(){return v.dq},ym:function(){return Z.ym},uz:function(){return K.uz},q4:function(){return K.q4},N4:function(){return K.N4},m9:function(){return k.m9},FE:function(){return Z.FE},WH:function(){return Z.WH},zW:function(){return C.z},sb:function(){return c.s},v_:function(){return k.v_},SY:function(){return i.S},Z:function(){return i.Z},YT:function(){return k.YT},Cd:function(){return t},rJ:function(){return H},lC:function(){return X},w4:function(){return Z.w4},IX:function(){return Z.IX},xw:function(){return Z.xw},pD:function(){return C.p},YQ:function(){return Z.YQ},DI:function(){return h.DI},vI:function(){return h.vI},E0:function(){return h.E0},Pl:function(){return g.P},yM:function(){return g.y},Ip:function(){return j.ym},UC:function(){return j.UC},hZ:function(){return v.hZ},KY:function(){return v.KY},T1:function(){return r.T1},eh:function(){return r.eh},o2:function(){return j.o2},i:function(){return A.i},NT:function(){return j.NT},AK:function(){return j.AK},up:function(){return j.up},kv:function(){return j.kv},LX:function(){return j.LX},Xc:function(){return Z.Xc},j5:function(){return Z.j5},nC:function(){return j.nC},sI:function(){return v.sI},Pd:function(){return Z.Pd},K0:function(){return V.K},iv:function(){return N},GX:function(){return M.GX},Yj:function(){return M.Yj},H0:function(){return K.H0},Uv:function(){return j.Uv},Xo:function(){return Z.Xo},Kx:function(){return Z.Kx},Hy:function(){return k.Hy},ge:function(){return Z.ge},d9:function(){return Z.d9},RA:function(){return h.RA},Kv:function(){return h.Kv},oV:function(){return h.oV},nE:function(){return h.nE},bX:function(){return Z.bX},eS:function(){return v.eS},zh:function(){return v.zh},hS:function(){return K.hS},xQ:function(){return K.xQ},Pt:function(){return K.Pt},wb:function(){return r.wb},wl:function(){return j.wl},on:function(){return M.FE},FC:function(){return j.FC},fp:function(){return j.fp},P5:function(){return Z.P5},lb:function(){return Z.lb},Rr:function(){return v.Rr}});var Z=e(1836),c=e(52020),k=e(67668),i=e(65050),g=e(67836),C=e(36032),A=e(88996),r=e(14310),K=e(39742),v=e(87180),j=e(49453),h=e(88496),M=e(8341),n=e(97857),y=e.n(n),L=e(67294);function o(U,D,ne){var q,J=U.block,Y=U.isReadPretty,P=Y===void 0?function(pe){var ee=pe.form;return ee.readPretty}:Y,w=U.filter,ie=w===void 0?function(){return!0}:w,G=U.getInitializerItem,le=G===void 0?function(){return{}}:G,xe=U.getSchema,_e=xe===void 0?function(){return{}}:xe,Ee=ne.collectionManager,ze=ne.collection,Se=ne.dataSourceManager,se=ne.actionContext,me=(q=se.fieldSchema)===null||q===void 0?void 0:q["x-action"];return ze?D.map(function(pe){var ee=Ee.getCollection(pe.target),ue=Se.collectionFieldInterfaceManager.getFieldInterface(pe.interface);return{collectionField:pe,context:y()(y()({},ne),{},{targetCollection:ee,collectionFieldInterface:ue})}}).filter(function(pe){var ee=pe.collectionField;return ee.interface}).filter(function(pe){var ee=pe.collectionField,ue=pe.context;return ie(ee,ue)}).map(function(pe){var ee,ue,ge=pe.collectionField,Ie=pe.context,Ae={type:"string",title:(ge==null||(ee=ge.uiSchema)===null||ee===void 0?void 0:ee.title)||ge.name,name:ge.name,"x-component":"CollectionField","x-collection-field":"".concat(ze.name,".").concat(ge.name),"x-read-pretty":ge==null||(ue=ge.uiSchema)===null||ue===void 0?void 0:ue["x-read-pretty"]},Le=_e(ge,y()(y()({},Ie),{},{defaultSchema:Ae})),Te=y()(y()({},Ae),Le||{});return{collectionField:ge,schema:Te,context:y()(y()({},Ie),{},{schema:Te})}}).map(function(pe){var ee,ue=pe.collectionField,ge=pe.context,Ie={type:"item",name:ue.name,title:(ue==null||(ee=ue.uiSchema)===null||ee===void 0?void 0:ee.title)||ue.name,Component:"CollectionFieldInitializer",schemaInitialize:function(Le){var Te,je;(Te=ge.collectionFieldInterface)===null||Te===void 0||(je=Te.schemaInitialize)===null||je===void 0||je.call(Te,Le,{field:ue,block:J,readPretty:P==null?void 0:P(ge),action:me,targetCollection:ge.targetCollection})},schema:ge.schema};return{collectionField:ue,context:ge,defaultInitializerItem:Ie}}).map(function(pe){var ee=pe.collectionField,ue=pe.defaultInitializerItem,ge=pe.context,Ie=le(ee,y()(y()({},ge),{},{defaultInitializerItem:ue}));return y()(y()({},ue),Ie||{})}):[]}var a=e(80844),R=e(26793),E=e(58837),$=e(44990),Q=e(76157),z=e(35746),p=e(13511),b=e(62954);function f(){var U=(0,R.$)(),D=U.t,ne=(0,E.Kx)(),q=(0,p.fp)(),J=(0,Q.XC)(),Y=(0,$.wl)(),P=(0,a.useForm)(),w=(0,a.useFieldSchema)(),ie=(0,z.d9)(),G=(0,b.eJW)();return{t:D,compile:G,actionContext:J,fieldSchema:w,collection:ne,dataSource:Y,form:P,collectionManager:ie,dataSourceManager:q}}var x=e(59582),m=e(85893),F=function(D){var ne=f(),q=ne.t,J=ne.collection,Y=J.getFields(),P=o(D,Y,ne);return(0,m.jsx)(x.iP,{title:q("Display fields"),children:P})},I=function(D){var ne=f(),q=ne.collection,J=ne.t,Y=ne.collectionManager,P=q.getParentCollectionsName();if(!P.length)return null;var w=P.map(function(ie){var G=q.getParentCollectionFields(ie);if(G.length===0)return null;var le=Y.getCollection(ie);return{parentCollection:le,parentCollectionFields:G}}).filter(Boolean).map(function(ie){var G=ie,le=G.parentCollection,xe=G.parentCollectionFields,_e=y()(y()({},ne),{},{collection:le});return{type:"itemGroup",divider:!0,title:J("Parent collection fields")+"("+ne.compile(le.title)+")",children:o(D,xe,_e)}});return(0,m.jsx)(x.E0,{children:w})},d=e(13769),u=e.n(d),l=["filterAssociationField","filterSelfField","getSchema"],S=function(D){var ne=D.filterAssociationField,q=D.filterSelfField,J=q===void 0?function(){return!0}:q,Y=D.getSchema,P=u()(D,l),w=D.context,ie=w.collection,G=w.t,le=w.collectionManager,xe=ie.getFields(),_e=["o2o","oho","obo","m2o"],Ee=xe.filter(function(Se){return _e.includes(Se.interface)}).filter(function(Se){return J(Se,D.context)});if(!Ee.length)return null;var ze=Ee.map(function(Se){var se=le.getCollection(Se.target);if(!se)return null;var me=se==null?void 0:se.getAllFields();return me.length?{associationField:Se,associationCollection:se,associationCollectionFields:me}:null}).filter(Boolean).map(function(Se){var se,me,pe=Se.associationField,ee=Se.associationCollection,ue=Se.associationCollectionFields,ge=y()(y()({},D.context),{},{collection:ee}),Ie=function(Le,Te){var je=Y(Le,Te);return y()(y()({},je||{}),{},{"x-read-pretty":!0,name:"".concat(pe.name,".").concat(Le.name),"x-collection-field":"".concat(ie.name,".").concat(pe.name,".").concat(Le.name)})};return{type:"subMenu",name:(se=pe.uiSchema)===null||se===void 0?void 0:se.title,title:(me=pe.uiSchema)===null||me===void 0?void 0:me.title,children:o(y()(y()({},P),{},{filter:ne,getSchema:Ie}),ue,ge)}});return ze.length?(0,m.jsx)(x.iP,{title:G("Display association fields"),children:ze}):null},H=function(D){var ne=D.selfField,q=D.parentField,J=D.associationField,Y=D.block,P=f();return P.collection?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(F,y()(y()({block:Y},ne),{},{context:y()(y()({},P),{},{collection:P.collection})})),q&&(0,m.jsx)(I,y()(y()({block:Y},q),{},{context:y()(y()({},P),{},{collection:P.collection})})),J&&(0,m.jsx)(S,y()(y()({block:Y},J),{},{context:y()(y()({},P),{},{collection:P.collection})}))]}):null},O=e(40341),N=function(D,ne,q){var J=(0,O.nD)(D,"x-component","Kanban");return(0,O.nD)(J,ne,q)},t=function(D){var ne=(D==null?void 0:D.block)||"Form",q={"x-toolbar":"FormItemSchemaToolbar","x-settings":"fieldSettings:FormItem","x-decorator":"FormItem"},J={remove:O.YT};return(0,m.jsx)(H,{block:ne,selfField:{filter:function(P){return!P.treeChildren},getSchema:function(P,w){var ie,G=w.targetCollection,le=(G==null?void 0:G.template)==="file",xe=G,_e=P==null||(ie=P.uiSchema)===null||ie===void 0||(ie=ie["x-component-props"])===null||ie===void 0?void 0:ie.fieldNames;return y()(y()({},q),{},{"x-component-props":le?{fieldNames:{label:"preview",value:"id"}}:xe&&_e?{fieldNames:y()(y()({},_e),{},{label:(G==null?void 0:G.titleField)||_e.label})}:{}})},getInitializerItem:function(){return y()(y()({},J),{},{find:(D==null?void 0:D.block)==="Kanban"?N:void 0})}},parentField:{getSchema:function(){return q},getInitializerItem:function(){return J}},associationField:{filterSelfField:function(P){return ne!=="Form"?!0:(P==null?void 0:P.interface)==="m2o"},filterAssociationField:function(P){return(P==null?void 0:P.interface)&&!["subTable"].includes(P==null?void 0:P.interface)&&!P.treeChildren},getSchema:function(){return q},getInitializerItem:function(){return J}}})},B=["attachment","textarea","markdown","json","richText","polygon","circle","point","lineString"],X=function(D){function ne(q){var J=q.fieldSchema,Y=q.form,P=J["x-component"]==="AssociationField.SubTable",w=P?Y.readPretty:!0;return w}return(0,m.jsx)(H,{block:"Table",selfField:{isReadPretty:ne,filter:function(J){return J.interface!=="subTable"&&!J.treeChildren},getSchema:function(J,Y){var P,w,ie=Y.targetCollection,G=Y.fieldSchema,le=Y.form,xe=(ie==null?void 0:ie.template)==="file",_e=((P=J.uiSchema)===null||P===void 0?void 0:P["x-component"])==="Preview",Ee=G["x-component"]==="AssociationField.SubTable",ze=ne({fieldSchema:G,form:le});return{"x-component-props":xe?{fieldNames:{label:"preview",value:"id"}}:_e?{size:"small"}:{},"x-read-pretty":ze||((w=J.uiSchema)===null||w===void 0?void 0:w["x-read-pretty"]),"x-decorator":Ee?B.includes(J.interface)||xe?"QuickEdit":"FormItem":null,"x-decorator-props":{labelStyle:{display:"none"}}}},getInitializerItem:function(){return{find:O.p$,remove:O.pP}}},parentField:{isReadPretty:ne,getSchema:function(J,Y){var P,w=Y.targetCollection,ie=Y.fieldSchema,G=Y.form,le=(w==null?void 0:w.template)==="file",xe=ie["x-component"]==="AssociationField.SubTable",_e=ne({fieldSchema:ie,form:G});return{"x-component-props":le?{fieldNames:{label:"preview",value:"id"}}:{},"x-read-pretty":_e||((P=J.uiSchema)===null||P===void 0?void 0:P["x-read-pretty"]),"x-decorator":xe?B.includes(J.interface)||le?"QuickEdit":"FormItem":null,"x-decorator-props":{labelStyle:{display:"none"}}}},getInitializerItem:function(){return{remove:O.YT}}},associationField:{filterAssociationField:function(J){return!["subTable"].includes(J.interface)&&!J.treeChildren},getSchema:function(){return{}},getInitializerItem:function(){return{find:O.p$,remove:O.pP}}}})},V=e(22558)},8341:function(He,ae,e){"use strict";e.d(ae,{FE:function(){return A},GX:function(){return r},Yj:function(){return C}});var Z=e(9783),c=e.n(Z),k=e(67294),i=e(57638),g="x-data-source",C=function(v,j){var h;return(h=v.collectionFieldInterfaceManager.getFieldInterface(j.interface))===null||h===void 0?void 0:h.titleUsable},A=function(v){var j=(0,k.useMemo)(function(){if(v&&v!==i.ym)return c()({},g,v)},[v]);return j},r=function(v){return v&&v!==i.ym?c()({},g,v):{}}},69803:function(He,ae,e){"use strict";e.d(ae,{AL:function(){return Q},C$:function(){return R},PE:function(){return a},jr:function(){return $},uN:function(){return z},yq:function(){return E}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(12444),C=e.n(g),A=e(72004),r=e.n(A),K=e(31996),v=e.n(K),j=e(26037),h=e.n(j),M=e(67294),n=e(26793),y=e(31601),L=e(15585),o=e(85893),a=(0,M.createContext)({getTitle:function(){return""},setTitle:function(){}});a.displayName="DocumentTitleContext";var R=M.memo(function(p){var b=p.addonBefore,f=p.addonAfter,x=(0,n.$)(),m=x.t,F=(0,n.$)("lm-desktop-routes"),I=F.t,d=(0,n.$)("lm-collections"),u=d.t,l=M.useRef(""),S=(0,M.useCallback)(function(){return l.current},[]),H=(0,M.useCallback)(function(N){document.title=l.current="".concat(b?" - ".concat(m(b)):"").concat(I(N||"")).concat(f?" - ".concat(u(f)):"")},[f,b,m,I,u]),O=(0,M.useMemo)(function(){return{getTitle:S,setTitle:H}},[S,H]);return(0,o.jsx)(a.Provider,{value:O,children:p.children})});R.displayName="DocumentTitleProvider";var E=function(b){var f,x=(0,L.HX)();return(0,o.jsx)(R,{addonAfter:x==null||(f=x.data)===null||f===void 0||(f=f.data)===null||f===void 0?void 0:f.title,children:b.children})},$=function(){return(0,M.useContext)(a)},Q=function(b){var f=$(),x=f.setTitle;(0,M.useEffect)(function(){x(b)},[x,b])},z=function(p){v()(f,p);var b=h()(f);function f(){return C()(this,f),b.apply(this,arguments)}return r()(f,[{key:"load",value:function(){var x=i()(c()().mark(function F(){return c()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:this.app.use(E,this.options);case 1:case"end":return d.stop()}},F,this)}));function m(){return x.apply(this,arguments)}return m}()}]),f}(y.S)},67205:function(He,ae,e){"use strict";e.d(ae,{XA:function(){return o},kO:function(){return R},vY:function(){return a}});var Z=e(97857),c=e.n(Z),k=e(19632),i=e.n(k),g=e(80844),C=e(96486),A=e.n(C),r=e(58837),K=e(39742),v=e(4277),j=e(62954),h=e(87714),M=e(67294),n=e(85893),y=function(E){return E.AND="$and",E.OR="$or",E}(y||{}),L=(0,M.createContext)(null);L.displayName="FilterContext";var o=M.memo(function(E){var $=E.children,Q=M.useRef([]),z=(0,M.useCallback)(function(f){typeof f=="function"?Q.current=f(Q.current):Q.current=f},[]),p=(0,M.useCallback)(function(){return Q.current},[]),b=(0,M.useMemo)(function(){return{getDataBlocks:p,setDataBlocks:z}},[p,z]);return(0,n.jsx)(L.Provider,{value:b,children:$})});o.displayName="FilterBlockProvider";var a=function($){var Q=$.children,z=$.params,p=(0,r.Kx)(),b=R(),f=b.recordDataBlocks,x=(0,K.Pt)(),m=x.getDataBlockRequest,F=(0,g.useField)(),I=(0,g.useFieldSchema)(),d=(0,h.Fp)(),u=(0,M.useRef)(null),l=(0,v.tU)(),S=F&&F.decoratorType!=="FilterFormBlockProvider"&&F.decoratorType!=="FormBlockProvider"&&F.decoratorProps.blockType!=="filter",H=(0,M.useCallback)(function(){var O=m();f({uid:I["x-uid"],title:F.componentProps.title,doFilter:O.runAsync,collection:p,associatedFields:d,foreignKeyFields:p==null?void 0:p.getFields("isForeignKey"),defaultFilter:(z==null?void 0:z.filter)||{},service:O,dom:u.current,dataLoadingMode:l,clearFilter:function(t){var B,X,V=((B=this.service.params)===null||B===void 0?void 0:B[0])||{},U=((X=this.service.params)===null||X===void 0||(X=X[1])===null||X===void 0?void 0:X.filters)||{};delete U[t];var D=(0,h.EO)([].concat(i()(Object.values(U).map(function(ne){return(0,j.WmO)(ne)})),[(z==null?void 0:z.filter)||{}]));this.service.run(c()(c()({},V),{},{page:1,filter:D}),{filters:U})},clearData:function(){this.service.mutate(void 0)},clearSelection:function(){if(F){var t,B;(t=(B=F.data).clearSelectedRowKeys)===null||t===void 0||t.call(B)}}})},[d,p,l,I,z==null?void 0:z.filter,f,m,F]);return(0,M.useEffect)(function(){S&&H()},[H,S]),(0,n.jsx)("div",{ref:u,children:Q})},R=function(){var $=M.useContext(L),Q=(0,M.useCallback)(function(){return($==null?void 0:$.getDataBlocks())||[]},[$]),z=(0,M.useCallback)(function(b){var f=$==null?void 0:$.getDataBlocks().find(function(x){return x.uid===b.uid});if(f){Object.assign(f,b);return}$==null||$.setDataBlocks(function(x){return[].concat(i()(x),[b])})},[$]),p=(0,M.useCallback)(function(b){$!=null&&$.getDataBlocks().every(function(f){return f.uid!==b})||$==null||$.setDataBlocks(function(f){return f.filter(function(x){return x.uid!==b})})},[$]);return $?{recordDataBlocks:z,getDataBlocks:Q,removeDataBlock:p,inProvider:!0}:{inProvider:!1,recordDataBlocks:A().noop,getDataBlocks:Q,removeDataBlock:A().noop}}},18386:function(He,ae,e){"use strict";e.d(ae,{$f:function(){return c.$f},EO:function(){return c.EO},Fp:function(){return c.Fp},Op:function(){return c.Op},Um:function(){return c.Um},XA:function(){return Z.XA},hi:function(){return c.hi},jE:function(){return c.jE},kO:function(){return Z.kO},vC:function(){return c.vC},vY:function(){return Z.vY},x5:function(){return c.x5},yr:function(){return c.yr},zv:function(){return c.zv}});var Z=e(67205),c=e(87714)},87714:function(He,ae,e){"use strict";e.d(ae,{$f:function(){return m},EO:function(){return Q},Fp:function(){return x},Op:function(){return d},Um:function(){return b},hi:function(){return I},jE:function(){return f},vC:function(){return $},x5:function(){return z},yr:function(){return F},zv:function(){return p}});var Z=e(97857),c=e.n(Z),k=e(19632),i=e.n(k),g=e(5574),C=e.n(g),A=e(9783),r=e.n(A),K=e(52677),v=e.n(K),j=e(80844),h=e(84157),M=e(96486),n=e.n(M),y=e(67294),L=e(10097),o=e(58837),a=e(13511),R=e(62954),E=e(67205),$=function(u){return u[u.FORM=0]="FORM",u[u.TABLE=1]="TABLE",u[u.TREE=2]="TREE",u[u.COLLAPSE=3]="COLLAPSE",u}({}),Q=function(l){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"$and",H=l.filter(function(O){if(O&&v()(O)==="object"&&!Array.isArray(O))return Object.values(O).filter(function(N){return N!==void 0}).length});return H.length===0?{}:H.length===1?H[0]:r()({},S,H)},z=function(l,S){var H;return(H=S.associatedFields)===null||H===void 0?void 0:H.filter(function(O){return l==null?void 0:l.some(function(N){return N===O.target})})},p=function(l,S){var H;return(H=S.foreignKeyFields)===null||H===void 0?void 0:H.filter(function(O){return l.fields.some(function(N){return N.type!=="belongsTo"&&N.foreignKey===O.name})})},b=function(l){var S=(0,E.kO)(),H=S.getDataBlocks,O=(0,j.useFieldSchema)(),N=(0,o.Kx)(),t=(0,a.Uv)(),B=t.getAllCollectionsInheritChain;if(l===$.FORM||l===$.COLLAPSE)return H().filter(function(X){return F(X.collection,N)});if(l===$.TABLE||l===$.TREE)return H().filter(function(X){var V,U;return O["x-uid"]!==X.uid&&(F(X.collection,N)||((V=z(B(N.name,N.dataSource),X))===null||V===void 0?void 0:V.length)||((U=p(N,X))===null||U===void 0?void 0:U.length))})},f=function(l,S,H,O){l=(0,h.flatten)(l,{breakOn:function(B){var X=B.value,V=B.path;if(["$match","$notMatch","$anyOf","$noneOf","$childIn","$childNotIn","$dateBetween","$in","$notIn"].includes(S[V]))return!0;var U=H("".concat(O,".").concat(V));if(U!=null&&U.target){if(Array.isArray(X))return!0;var D=U.targetKey||"id";if(X&&X[D]!=null)return!0}return!1}});var N={$and:Object.keys(l).map(function(t){var B=n().get(l,t),X=H("".concat(O,".").concat(t));return X!=null&&X.target&&["hasOne","hasMany","belongsTo","belongsToMany","belongsToArray"].includes(X.type)&&(B=(0,h.getValuesByPath)(B,X.targetKey||"id"),t="".concat(t,".").concat(X.targetKey||"id"),(X==null?void 0:X.interface)==="chinaRegion"&&(B=n().last(B))),!B&&B!==0&&B!==!1?null:r()({},t,r()({},S[t]||"$eq",B))}).filter(Boolean)};return N},x=function(){var l;return((l=(0,o.Kx)())===null||l===void 0?void 0:l.fields.filter(function(S){return m(S)}))||[]},m=function(l){return["o2o","oho","obo","m2o","createdBy","updatedBy","o2m","m2m","linkTo","chinaRegion","mbm"].includes(l==null?void 0:l.interface)},F=function(l,S){return l.name===S.name&&l.dataSource===S.dataSource},I=function(){var l=(0,j.useFieldSchema)(),S=(0,E.kO)(),H=S.getDataBlocks,O=(0,L.findFilterTargets)(l),N=O.targets,t=O.uid,B=H(),X=(0,y.useState)(function(){return N&&N.some(function(J){return B.some(function(Y){return Y.uid===J.uid})})}),V=C()(X,2),U=V[0],D=V[1],ne=Object.keys(N||{});(0,y.useEffect)(function(){D(N&&N.some(function(J){return B.some(function(Y){return Y.uid===J.uid})}))},[ne.length,N,B]);var q=(0,y.useCallback)(function(J){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"id",P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"$eq";B.forEach(function(w){var ie,G,le=N.find(function(Se){return Se.uid===w.uid});if(le){n().isFunction(J)&&(J=J(le,w)),n().isFunction(Y)&&(Y=Y(le,w)),n().isFunction(P)&&(P=P(le));var xe=((ie=w.service.params)===null||ie===void 0?void 0:ie[0])||{},_e=((G=w.service.params)===null||G===void 0||(G=G[1])===null||G===void 0?void 0:G.filters)||{};if(J!=null)_e[t]={$and:[r()({},Y,r()({},P,J))]};else{var Ee;if((Ee=w.clearSelection)===null||Ee===void 0||Ee.call(w),delete _e[t],w.dataLoadingMode==="manual")return w.clearData()}var ze=Q([].concat(i()(Object.values(_e).map(function(Se){return(0,R.WmO)(Se)})),[w.defaultFilter]));w.doFilter(c()(c()({},xe),{},{page:1,filter:ze}),{filters:_e})}})},[B,N,t]);return{isConnected:U,doFilter:q}},d=function(l){for(;l;){if(l["x-filter-targets"])return l["x-decorator"]==="FilterFormBlockProvider";l=l.parent}return!1}},5772:function(He,ae,e){"use strict";e.d(ae,{C:function(){return i},z:function(){return k}});var Z=e(67294),c=e(85893),k=Z.createContext(null),i=function(C){return(0,c.jsx)(k.Provider,{value:C,children:C.children})}},7686:function(He,ae,e){"use strict";e.d(ae,{P:function(){return k}});var Z=e(67294),c=e(5772),k=function(){return(0,Z.useContext)(c.z)||{}}},53285:function(He,ae,e){"use strict";e.d(ae,{Cm:function(){return Z.C},P5:function(){return c.P},z_:function(){return Z.z}});var Z=e(5772),c=e(7686)},57105:function(He,ae,e){"use strict";e.d(ae,{_9:function(){return B},$:function(){return q},sq:function(){return Y},ri:function(){return H},mz:function(){return t},cl:function(){return J},QJ:function(){return O},gR:function(){return N}});var Z=e(97857),c=e.n(Z),k=e(80844),i=e(84327),g=e(90105),C=e(96486),A=e.n(C),r=e(67294),K=e(35746),v=e(58837),j=e(93323),h=e(64910),M=e(96365),n=e(52677),y=e.n(n),L=e(85893),o=function(w,ie){if(!(!w&&!ie)&&!(0,i.isFn)(w))return(0,L.jsxs)(r.Fragment,{children:[w,ie]})},a=function(w){return w&&(y()(w)==="object"||typeof w=="function")},R=function(w,ie,G){return(0,i.isFn)(w)?w(ie,G):w},E=function(w){var ie,G=(0,r.useContext)(k.SchemaComponentsContext),le=w.field,xe=o(R(w.children,le,le.form),(ie=le.content)!==null&&ie!==void 0?ie:le.componentProps.children);if(le.display!=="visible")return null;var _e=function(se){var me;return a(se)?se:(me=i.FormPath.getIn(G,se))!==null&&me!==void 0?me:se},Ee=function(se){return le.decoratorType?r.createElement(_e(le.decoratorType),le.decoratorProps,se):(0,L.jsx)(r.Fragment,{children:se})},ze=function(){return le.componentType?r.createElement(_e(le.componentType),c()(c()({},le.componentProps),{},{value:le.value}),xe):xe};return Ee(ze())};E.displayName="NocoBaseReactiveInternal";var $=E;$.displayName="NocoBaseReactiveField";var Q=e(12444),z=e.n(Q),p=e(72004),b=e.n(p),f=e(9783),x=e.n(f);function m(P){return new F(P)}var F=function(){function P(w){z()(this,P),x()(this,"props",void 0),x()(this,"initialized",void 0),x()(this,"loading",void 0),x()(this,"validating",void 0),x()(this,"submitting",void 0),x()(this,"selfModified",void 0),x()(this,"active",void 0),x()(this,"visited",void 0),x()(this,"mounted",void 0),x()(this,"unmounted",void 0),x()(this,"inputValues",void 0),x()(this,"inputValue",void 0),x()(this,"feedbacks",void 0),x()(this,"title",void 0),x()(this,"description",void 0),x()(this,"display",void 0),x()(this,"pattern",void 0),x()(this,"editable",void 0),x()(this,"disabled",void 0),x()(this,"readOnly",void 0),x()(this,"readPretty",void 0),x()(this,"visible",void 0),x()(this,"hidden",void 0),x()(this,"dataSource",void 0),x()(this,"validator",void 0),x()(this,"required",void 0),x()(this,"content",void 0),x()(this,"initialValue",void 0),x()(this,"value",void 0),x()(this,"data",void 0),x()(this,"decorator",void 0),x()(this,"component",void 0),x()(this,"decoratorProps",void 0),x()(this,"componentProps",void 0),x()(this,"decoratorType",void 0),x()(this,"componentType",void 0),x()(this,"path",void 0),x()(this,"form",void 0),x()(this,"address",void 0),this.props=w,this.initialize()}return b()(P,[{key:"initialize",value:function(){var ie,G,le,xe,_e,Ee,ze,Se,se,me,pe,ee,ue,ge,Ie,Ae,Le,Te,je,Pe,fe=this.props.compile;this.pattern="readPretty",this.readPretty=!0,this.initialized=!0,this.loading=!1,this.validating=!1,this.submitting=!1,this.selfModified=!1,this.active=!1,this.visited=!0,this.mounted=!0,this.unmounted=!1,this.inputValues=[],this.inputValue=null,this.feedbacks=[],this.title=fe(this.props.title||((ie=this.props.schema)===null||ie===void 0?void 0:ie.title)),this.description=fe(this.props.description||((G=this.props.schema)===null||G===void 0?void 0:G.description)),this.display="visible",this.editable=this.props.editable||((le=this.props.schema)===null||le===void 0?void 0:le["x-editable"]),this.disabled=this.props.disabled||((xe=this.props.schema)===null||xe===void 0?void 0:xe["x-disabled"]),this.readOnly=this.props.readOnly||((_e=this.props.schema)===null||_e===void 0?void 0:_e["x-read-only"]),this.visible=this.props.visible||((Ee=this.props.schema)===null||Ee===void 0?void 0:Ee["x-visible"]),this.hidden=this.props.hidden||((ze=this.props.schema)===null||ze===void 0?void 0:ze["x-hidden"]),this.dataSource=fe(this.props.dataSource||((Se=this.props.schema)===null||Se===void 0?void 0:Se.enum)),this.validator=this.props.validator,this.required=this.props.required||!!((se=this.props.schema)!==null&&se!==void 0&&se.required),this.content=fe(this.props.content||((me=this.props.schema)===null||me===void 0?void 0:me["x-content"])),this.initialValue=fe(this.props.initialValue||((pe=this.props.schema)===null||pe===void 0?void 0:pe.default)),this.value=fe(this.props.value),this.data=this.props.data||((ee=this.props.schema)===null||ee===void 0?void 0:ee["x-data"]),this.decorator=this.props.decorator?(0,i.toArr)(this.props.decorator):[(ue=this.props.schema)===null||ue===void 0?void 0:ue["x-decorator"],(ge=this.props.schema)===null||ge===void 0?void 0:ge["x-decorator-props"]],this.component=this.props.component?(0,i.toArr)(this.props.component):[(Ie=this.props.schema)===null||Ie===void 0?void 0:Ie["x-component"],(Ae=this.props.schema)===null||Ae===void 0?void 0:Ae["x-component-props"]],this.decoratorProps=((Le=this.props.schema)===null||Le===void 0?void 0:Le["x-decorator-props"])||{},this.componentProps=((Te=this.props.schema)===null||Te===void 0?void 0:Te["x-component-props"])||{},this.decoratorType=(je=this.props.schema)===null||je===void 0?void 0:je["x-decorator"],this.componentType=(Pe=this.props.schema)===null||Pe===void 0?void 0:Pe["x-component"],this.path={},this.form={},this.address={concat:A().noop}}}]),P}(),I=function(w){var ie=(0,M.e)(),G=(0,k.useFieldSchema)(),le=(0,r.useMemo)(function(){return m(c()(c()({},w),{},{compile:ie}))},[]);return Object.assign(le.componentProps,G["x-component-props"]),le.value=w.value,(0,L.jsx)(k.FieldContext.Provider,{value:le,children:(0,L.jsx)($,{field:le,children:w.children})})},d=r.createContext({}),u=r.createContext(A().noop),l=function(w){var ie=w.children,G=w.refresh,le=N(),xe=(0,r.useCallback)(function(_e){G(),_e!=null&&_e.refreshParentSchema&&(le==null||le())},[le,G]);return(0,L.jsx)(u.Provider,{value:xe,children:ie})},S=r.createContext(A().noop),H=function(w){var ie=w.children,G=w.refresh;return(0,L.jsx)(S.Provider,{value:G,children:ie})},O=function(){return r.useContext(S)},N=function(){return r.useContext(u)},t=function(){return r.useContext(d)||{}},B=function(w){var ie=w.children,G=w.fieldSchema,le=(0,v.Kx)(),xe=(0,K.d9)(),_e=G==null?void 0:G.name,Ee=(0,r.useMemo)(function(){var ze;if(!le)return null;var Se=G==null||(ze=G["x-component-props"])===null||ze===void 0?void 0:ze.field;return xe.getCollectionField(G==null?void 0:G["x-collection-field"])||Se||le.getField((Se==null?void 0:Se.name)||_e)},[le,xe,G,_e]);return(0,L.jsx)(d.Provider,{value:Ee,children:ie})},X=A().memoize(function(P,w){return P.toFieldProps({scope:w})}),V=function(w){var ie=(0,k.useExpressionScope)();return X(w,ie)},U=function(w){var ie=(0,k.useField)();if(w.onlyRenderProperties){var G;return w.basePath||(ie==null||(G=ie.address)===null||G===void 0?void 0:G.concat(w.name))}return w.basePath||(ie==null?void 0:ie.address)},D=function(w,ie,G){var le=w.toJSON();if(G){if(!le.properties)return w;var xe=Object.keys(le.properties)[0],_e=Object.values(le.properties)[0];return le.properties[xe]=(0,i.merge)(A().omit(ie,"type","x-read-pretty"),_e),new k.Schema(le)}return new k.Schema((0,i.merge)(A().omit(ie,"type","x-read-pretty"),le))},ne=function(w){var ie=w.schema,G=w.field,le=w.basePath,xe=w.mapProperties,_e=w.filterProperties,Ee=w.propsRecursion,ze=w.values,Se=w.isUseFormilyField,se=k.Schema.getOrderProperties(ie);return se.length?(0,L.jsx)(r.Fragment,{children:se.map(function(me,pe){var ee=me.schema,ue=me.key,ge=(G==null?void 0:G.address)||le,Ie=ee;if((0,i.isFn)(xe)){var Ae=xe(ee,ue);Ae&&(Ie=Ae)}if((0,i.isFn)(_e)&&_e(Ie,ue)===!1)return null;var Le=(0,i.isBool)(Ee)&&Ee?(0,L.jsx)(Y,{propsRecursion:!0,filterProperties:_e,mapProperties:xe,schema:Ie,name:ue,basePath:ge,values:A().get(ze,ue),isUseFormilyField:Se}):(0,L.jsx)(Y,{schema:Ie,name:ue,basePath:ge,values:A().get(ze,ue),isUseFormilyField:Se});return Ie["x-component"]==="CollectionField"?(0,L.jsx)(q.Provider,{value:!0,children:(0,L.jsx)(B,{fieldSchema:Ie,children:Le})},"".concat(pe,"-").concat(ue)):(0,L.jsx)(q.Provider,{value:!1,children:(0,L.jsx)(d.Provider,{value:h.Nu,children:Le})},"".concat(pe,"-").concat(ue))})}):null},q=r.createContext(!1),J=function(){return r.useContext(q)},Y=r.memo(function(P){var w=P.schema,ie=P.name,G=P.onlyRenderProperties,le=P.onlyRenderSelf,xe=P.mapProperties,_e=P.filterProperties,Ee=P.propsRecursion,ze=P.values,Se=P.isUseFormilyField,se=Se===void 0?!0:Se,me=P.uiSchema,pe=U(P),ee=(0,r.useRef)(null),ue=(0,r.useMemo)(function(){return ee.current=null,new k.Schema(w)},[w]),ge=t(),Ie=ge.uiSchema,Ae=ge.defaultValue,Le=(0,g.Z)(),Te=(0,r.useContext)(j.A),je=Te.onChange,Pe=ee.current||ue,fe=(0,r.useCallback)(function(){var oe=Pe.parent;ee.current=new k.Schema(Pe.toJSON(),oe),oe!=null&&oe.properties&&Object.keys(oe.properties).forEach(function(Re){Re===Pe.name&&(oe.properties[Re]=ee.current)}),Le(),je==null||je()},[Pe,je,Le]),re=(0,r.useMemo)(function(){return me?D(Pe,me,G):Ie?(Ie.default=Ae,D(Pe,Ie,G)):Pe},[Ie,Ae,Pe,G,me]),T=V(re),ce=function(Re){if(!le)return ne({schema:Pe,field:Re,basePath:pe,mapProperties:xe,filterProperties:_e,propsRecursion:Ee,values:ze,isUseFormilyField:se})},be=function(){return(0,i.isValid)(ie)?re.type==="object"?G?ce():(0,L.jsx)(k.ObjectField,c()(c()({},T),{},{name:ie,basePath:pe,children:ce})):re.type==="array"?(0,L.jsx)(k.ArrayField,c()(c()({},T),{},{name:ie,basePath:pe})):re.type==="void"?G?ce():(0,L.jsx)(k.VoidField,c()(c()({},T),{},{name:ie,basePath:pe,children:ce})):se?(0,L.jsx)(k.Field,c()(c()({},T),{},{name:ie,basePath:pe})):(0,L.jsx)(I,{name:ie,value:ze,initialValue:ze,basePath:pe,schema:re}):ce()};return Pe?(0,L.jsx)(k.SchemaContext.Provider,{value:Pe,children:(0,L.jsx)(l,{refresh:fe,children:be()})}):(0,L.jsx)(r.Fragment,{})});Y.displayName="NocoBaseRecursionField"},69962:function(He,ae,e){"use strict";e.d(ae,{wI:function(){return Q},YO:function(){return b},kK:function(){return M},uH:function(){return j},mg:function(){return p}});var Z=e(5574),c=e.n(Z),k=e(9361),i=e(28459),g=e(96486),C=e.n(g),A=e(67294),r=e(97857),K=e.n(r),v={name:"",token:{colorPrimaryHeader:"#001529",colorBgHeader:"#001529",colorBgHeaderMenuHover:"#ffffff1a",colorBgHeaderMenuActive:"#ffffff1a",colorTextHeaderMenu:"#ffffffa6",colorTextHeaderMenuHover:"#ffffff",colorTextHeaderMenuActive:"#ffffff",colorSettings:"#F18B62",colorBgSettingsHover:"rgba(241, 139, 98, 0.06)",colorBorderSettingsHover:"rgba(241, 139, 98, 0.3)",motionUnit:.03,motion:!0}},j=v;function h(f){var x;return(x=f.token)!==null&&x!==void 0&&x.colorSettings||(f.token=K()(K()({},f.token),j.token)),f}var M=h,n=function(x,m){var F=m||k.Z.defaultAlgorithm(x);return F.paddingPageHorizontal===void 0&&(F.paddingPageHorizontal=F.sizeLG),F.paddingPageVertical===void 0&&(F.paddingPageVertical=F.sizeLG),F.paddingPopupHorizontal===void 0&&(F.paddingPopupHorizontal=F.sizeLG),F.paddingPopupVertical===void 0&&(F.paddingPopupVertical=F.size),F.marginBlock===void 0&&(F.marginBlock=F.sizeLG),F.borderRadiusBlock===void 0&&(F.borderRadiusBlock=F.borderRadiusLG),F},y=function(x){return Array.isArray(x.algorithm)?x.algorithm.includes(n)||x.algorithm.push(n):x.algorithm=[x.algorithm,n].filter(Boolean),x.algorithm=x.algorithm.filter(Boolean),x},L=e(85893),o=e(3321),a=e(12174),R=e(68091),E=(0,A.memo)(function(f){var x=f.children,m=(0,R.qD)(),F=o.Z.useApp(),I=F.notification,d=(0,a.LY)();return(0,A.useEffect)(function(){d.notification=I,m.notification=I},[I]),(0,L.jsx)(L.Fragment,{children:x})});E.displayName="AppInner";var $=function(x){var m=x.children,F=x.className,I=x.style;return(0,L.jsx)(o.Z,{className:F,style:K()({height:"100%"},I),children:(0,L.jsx)(E,{children:m})})};$.displayName="AntdAppProvider";var Q=$,z=(0,A.createContext)(null);z.displayName="GlobalThemeContext";var p=function(){return A.useContext(z)||{theme:{},isDarkTheme:!1}},b=function(x){var m=x.children,F=x.theme,I=A.useState(F||j),d=c()(I,2),u=d[0],l=d[1],S=(0,A.useRef)(null),H=(0,A.useRef)(null),O=(0,A.useMemo)(function(){var U=u==null?void 0:u.algorithm;return Array.isArray(U)?U.includes(k.Z.darkAlgorithm):U===k.Z.darkAlgorithm},[u==null?void 0:u.algorithm]),N=(0,A.useCallback)(function(U){H.current=U&&C().cloneDeep(U)},[]),t=(0,A.useCallback)(function(){return H.current},[]),B=(0,A.useCallback)(function(U){S.current=U&&C().cloneDeep(U)},[]),X=(0,A.useCallback)(function(){return S.current},[]),V=(0,A.useMemo)(function(){return{theme:y(u),setTheme:l,setCurrentSettingTheme:B,getCurrentSettingTheme:X,setCurrentEditingTheme:N,getCurrentEditingTheme:t,isDarkTheme:O}},[t,X,O,N,B,u]);return(0,L.jsx)(z.Provider,{value:V,children:(0,L.jsx)(i.ZP,{theme:M(V.theme),children:m})})}},15503:function(He,ae,e){"use strict";e.d(ae,{M:function(){return y},t:function(){return L}});var Z=e(97857),c=e.n(Z),k=e(96695),i=e.n(k),g=e(80844),C=e(96486),A=e.n(C),r=e(67294),K=e(62954),v=e(57953),j=e(85893),h=function(){},M=function(a,R,E){var $=void 0;return A().isFunction(a)?$=a:($=R[a],$||console.error("".concat(E," is not registered"))),$||h},n=function(a,R){if(!a)return h;if(A().isFunction(a))return a;var E=a.split("."),$,Q=i()(E),z;try{for(Q.s();!(z=Q.n()).done;){var p=z.value;$=M(p,$||R,a)}}catch(b){Q.e(b)}finally{Q.f()}return $};function y(o,a){var R=(0,g.useExpressionScope)(),E=n(o,R)(a);return E}function L(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=a.displayName||o.displayName||o.name,E=function $(Q){var z=(0,K.ngQ)(),p=z.dn,b=z.findComponent,f=(0,r.useMemo)(function(){var F=p.getSchemaAttribute("x-component"),I=p.getSchemaAttribute("x-decorator"),d=p.getSchemaAttribute("x-use-component-props"),u=p.getSchemaAttribute("x-use-decorator-props");if(F&&d&&b(F)===$)return d;if(I&&u&&b(I)===$)return u},[p]),x=y(f,Q),m=(0,r.useMemo)(function(){return c()(c()({},Q),x)},[x,Q]);return(0,j.jsx)(r.Suspense,{fallback:(0,j.jsx)(v.Z,{}),children:(0,j.jsx)(o,c()(c()({},m),{},{children:Q.children}))})};return o.displayName=R,E.displayName="withSchemaProps(".concat(R,")"),E}},83335:function(He,ae,e){"use strict";e.d(ae,{C:function(){return r}});var Z=e(97857),c=e.n(Z),k=e(48054),i=e(39742),g=e(67294),C=e(85893),A=function(){var v;return!!((v=(0,i.hS)())!==null&&v!==void 0&&v.loading)},r=function(v,j){var h=j||{},M=h.useLoading,n=M===void 0?A:M,y=h.displayName,L=h.SkeletonComponent,o=L===void 0?k.Z:L,a=g.memo(function(R){var E=n(),$=(0,g.useRef)(!1);return!$.current&&E?(0,C.jsx)(o,{}):($.current=!0,(0,C.jsx)(v,c()({},R)))});return a.displayName=y||"".concat(v.displayName,"(withSkeletonComponent)")||0,a}},65633:function(He,ae,e){"use strict";e.d(ae,{r:function(){return r}});var Z=e(97857),c=e.n(Z),k=e(67294),i=e(83062),g=e(17663),C=e(85893),A={display:"flex",alignItems:"center",gap:4},r=function(v){return function(j){var h=j.tooltip;return h?(0,C.jsxs)("div",{style:A,children:[(0,C.jsx)(v,c()({},j)),(0,C.jsx)(i.Z,{title:h,children:(0,C.jsx)(g.Z,{style:{zIndex:1}})})]}):(0,C.jsx)(v,c()({},j))}}},29392:function(He,ae,e){"use strict";e.d(ae,{W:function(){return Z},S:function(){return i}});var Z=function(){return"nocobase-admin-menu"},c=e(67294),k=function(){var C=(0,c.useRef)("initial-scale=0.1"),A=(0,c.useRef)();(0,c.useEffect)(function(){var K=document.querySelector('meta[name="viewport"]');K?C.current=K.content:(K=document.createElement("meta"),K.name="viewport"),K&&(K.content="width=device-width, initial-scale=1, user-scalable=0",A.current=K)},[]);var r=function(){A.current&&(A.current.content=C.current)};return{metaRef:A,restore:r}};function i(){var g=k(),C=g.metaRef,A=g.restore;(0,c.useEffect)(function(){if(C.current)return document.head.insertBefore(C.current,document.head.firstChild),function(){A()}},[])}},74820:function(He,ae,e){"use strict";e.d(ae,{d5:function(){return K},iX:function(){return j},nu:function(){return v}});var Z=e(19632),c=e.n(Z),k=e(96486),i=e.n(k),g=e(67294),C=e(85893),A=(0,g.createContext)(null);A.displayName="GetMenuItemContext";var r=(0,g.createContext)(null);r.displayName="GetMenuItemsContext";var K=function(){return(0,g.useContext)(A)||{}},v=function(){return(0,g.useContext)(r)||{}},j=function(){var M=(0,g.useRef)([]),n=(0,g.useRef)(null),y=(0,g.useRef)(!1),L=(0,g.useCallback)(function(E){var $=E.limitCount;return y.current?(y.current=!1,n.current?n.current():$&&M.current.length>$?(0,C.jsx)(C.Fragment,{children:M.current.slice(0,$).map(function(Q,z){return(0,C.jsx)(Q,{},z)})}):(0,C.jsx)(C.Fragment,{children:M.current.map(function(Q,z){return(0,C.jsx)(Q,{},z)})})):null},[]),o=(0,g.useCallback)(function(E){var $=[],Q=function(p){$.push(p),$.sort(function(b,f){return(b.order||0)-(f.order||0)})};return y.current=!0,n.current=function(){var z=$.filter(function(p){return p.notdelete}).map(function(p){return i().omit(p,"notdelete")});return $.length=0,$.push.apply($,c()(z)),(0,C.jsx)(r.Provider,{value:{pushMenuItem:Q},children:E()})},$},[]),a=(0,g.useCallback)(function(E){var $={},Q=function(p){Object.assign($,p)};return y.current=!0,M.current.push(function(){return(0,C.jsx)(A.Provider,{value:{collectMenuItem:Q},children:E()})}),$},[]),R=(0,g.useCallback)(function(){M.current=[]},[]);return{Component:L,getMenuItems:o,getMenuItem:a,clean:R}}},71098:function(He,ae,e){"use strict";e.d(ae,{j:function(){return K}});var Z=e(93804),c=e(85418),k=e(42075),i=e(67294),g=e(12174),C=e(35310),A=e(15585),r=e(85893);function K(){var j,h,M=(0,A.HX)()||{},n=M.data,y=(0,g.LY)();return(n==null||(j=n.data)===null||j===void 0?void 0:j.enabledLanguages.length)>1&&(0,r.jsx)(c.Z,{menu:{onClick:function(o){y.auth.setLocale(o.key),window.location.reload()},selectable:!0,defaultSelectedKeys:[y.auth.locale],items:n==null||(h=n.data)===null||h===void 0||(h=h.enabledLanguages)===null||h===void 0?void 0:h.map(function(L){return{key:L,label:C.ZP[L].label}})},children:(0,r.jsx)(k.Z,{children:(0,r.jsx)(v,{locale:y.auth.locale.toString()})})})}var v=i.forwardRef(function(j,h){switch(j.locale){case"pl-PL":return(0,r.jsx)("div",{ref:h,children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",children:[(0,r.jsx)("path",{d:"M1,24c0,2.209,1.791,4,4,4H27c2.209,0,4-1.791,4-4V15H1v9Z",fill:"#cb2e40"}),(0,r.jsx)("path",{d:"M27,4H5c-2.209,0-4,1.791-4,4v8H31V8c0-2.209-1.791-4-4-4Z",fill:"#fff"}),(0,r.jsx)("path",{d:"M5,28H27c2.209,0,4-1.791,4-4V8c0-2.209-1.791-4-4-4H5c-2.209,0-4,1.791-4,4V24c0,2.209,1.791,4,4,4ZM2,8c0-1.654,1.346-3,3-3H27c1.654,0,3,1.346,3,3V24c0,1.654-1.346,3-3,3H5c-1.654,0-3-1.346-3-3V8Z",opacity:".15"}),(0,r.jsx)("path",{d:"M27,5H5c-1.657,0-3,1.343-3,3v1c0-1.657,1.343-3,3-3H27c1.657,0,3,1.343,3,3v-1c0-1.657-1.343-3-3-3Z",fill:"#fff",opacity:".2"})]})});case"en-US":return(0,r.jsx)("div",{ref:h,children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",children:[(0,r.jsx)("rect",{x:"1",y:"4",width:"30",height:"24",rx:"4",ry:"4",fill:"#fff"}),(0,r.jsx)("path",{d:"M1.638,5.846H30.362c-.711-1.108-1.947-1.846-3.362-1.846H5c-1.414,0-2.65,.738-3.362,1.846Z",fill:"#a62842"}),(0,r.jsx)("path",{d:"M2.03,7.692c-.008,.103-.03,.202-.03,.308v1.539H31v-1.539c0-.105-.022-.204-.03-.308H2.03Z",fill:"#a62842"}),(0,r.jsx)("path",{fill:"#a62842",d:"M2 11.385H31V13.231H2z"}),(0,r.jsx)("path",{fill:"#a62842",d:"M2 15.077H31V16.923000000000002H2z"}),(0,r.jsx)("path",{fill:"#a62842",d:"M1 18.769H31V20.615H1z"}),(0,r.jsx)("path",{d:"M1,24c0,.105,.023,.204,.031,.308H30.969c.008-.103,.031-.202,.031-.308v-1.539H1v1.539Z",fill:"#a62842"}),(0,r.jsx)("path",{d:"M30.362,26.154H1.638c.711,1.108,1.947,1.846,3.362,1.846H27c1.414,0,2.65-.738,3.362-1.846Z",fill:"#a62842"}),(0,r.jsx)("path",{d:"M5,4h11v12.923H1V8c0-2.208,1.792-4,4-4Z",fill:"#102d5e"}),(0,r.jsx)("path",{d:"M27,4H5c-2.209,0-4,1.791-4,4V24c0,2.209,1.791,4,4,4H27c2.209,0,4-1.791,4-4V8c0-2.209-1.791-4-4-4Zm3,20c0,1.654-1.346,3-3,3H5c-1.654,0-3-1.346-3-3V8c0-1.654,1.346-3,3-3H27c1.654,0,3,1.346,3,3V24Z",opacity:".15"}),(0,r.jsx)("path",{d:"M27,5H5c-1.657,0-3,1.343-3,3v1c0-1.657,1.343-3,3-3H27c1.657,0,3,1.343,3,3v-1c0-1.657-1.343-3-3-3Z",fill:"#fff",opacity:".2"}),(0,r.jsx)("path",{fill:"#fff",d:"M4.601 7.463L5.193 7.033 4.462 7.033 4.236 6.338 4.01 7.033 3.279 7.033 3.87 7.463 3.644 8.158 4.236 7.729 4.827 8.158 4.601 7.463z"}),(0,r.jsx)("path",{fill:"#fff",d:"M7.58 7.463L8.172 7.033 7.441 7.033 7.215 6.338 6.989 7.033 6.258 7.033 6.849 7.463 6.623 8.158 7.215 7.729 7.806 8.158 7.58 7.463z"}),(0,r.jsx)("path",{fill:"#fff",d:"M10.56 7.463L11.151 7.033 10.42 7.033 10.194 6.338 9.968 7.033 9.237 7.033 9.828 7.463 9.603 8.158 10.194 7.729 10.785 8.158 10.56 7.463z"}),(0,r.jsx)("path",{fill:"#fff",d:"M6.066 9.283L6.658 8.854 5.927 8.854 5.701 8.158 5.475 8.854 4.744 8.854 5.335 9.283 5.109 9.979 5.701 9.549 6.292 9.979 6.066 9.283z"}),(0,r.jsx)("path",{fill:"#fff",d:"M9.046 9.283L9.637 8.854 8.906 8.854 8.68 8.158 8.454 8.854 7.723 8.854 8.314 9.283 8.089 9.979 8.68 9.549 9.271 9.979 9.046 9.283z"}),(0,r.jsx)("path",{fill:"#fff",d:"M12.025 9.283L12.616 8.854 11.885 8.854 11.659 8.158 11.433 8.854 10.702 8.854 11.294 9.283 11.068 9.979 11.659 9.549 12.251 9.979 12.025 9.283z"}),(0,r.jsx)("path",{fill:"#fff",d:"M6.066 12.924L6.658 12.494 5.927 12.494 5.701 11.799 5.475 12.494 4.744 12.494 5.335 12.924 5.109 13.619 5.701 13.19 6.292 13.619 6.066 12.924z"}),(0,r.jsx)("path",{fill:"#fff",d:"M9.046 12.924L9.637 12.494 8.906 12.494 8.68 11.799 8.454 12.494 7.723 12.494 8.314 12.924 8.089 13.619 8.68 13.19 9.271 13.619 9.046 12.924z"}),(0,r.jsx)("path",{fill:"#fff",d:"M12.025 12.924L12.616 12.494 11.885 12.494 11.659 11.799 11.433 12.494 10.702 12.494 11.294 12.924 11.068 13.619 11.659 13.19 12.251 13.619 12.025 12.924z"}),(0,r.jsx)("path",{fill:"#fff",d:"M13.539 7.463L14.13 7.033 13.399 7.033 13.173 6.338 12.947 7.033 12.216 7.033 12.808 7.463 12.582 8.158 13.173 7.729 13.765 8.158 13.539 7.463z"}),(0,r.jsx)("path",{fill:"#fff",d:"M4.601 11.104L5.193 10.674 4.462 10.674 4.236 9.979 4.01 10.674 3.279 10.674 3.87 11.104 3.644 11.799 4.236 11.369 4.827 11.799 4.601 11.104z"}),(0,r.jsx)("path",{fill:"#fff",d:"M7.58 11.104L8.172 10.674 7.441 10.674 7.215 9.979 6.989 10.674 6.258 10.674 6.849 11.104 6.623 11.799 7.215 11.369 7.806 11.799 7.58 11.104z"}),(0,r.jsx)("path",{fill:"#fff",d:"M10.56 11.104L11.151 10.674 10.42 10.674 10.194 9.979 9.968 10.674 9.237 10.674 9.828 11.104 9.603 11.799 10.194 11.369 10.785 11.799 10.56 11.104z"}),(0,r.jsx)("path",{fill:"#fff",d:"M13.539 11.104L14.13 10.674 13.399 10.674 13.173 9.979 12.947 10.674 12.216 10.674 12.808 11.104 12.582 11.799 13.173 11.369 13.765 11.799 13.539 11.104z"}),(0,r.jsx)("path",{fill:"#fff",d:"M4.601 14.744L5.193 14.315 4.462 14.315 4.236 13.619 4.01 14.315 3.279 14.315 3.87 14.744 3.644 15.44 4.236 15.01 4.827 15.44 4.601 14.744z"}),(0,r.jsx)("path",{fill:"#fff",d:"M7.58 14.744L8.172 14.315 7.441 14.315 7.215 13.619 6.989 14.315 6.258 14.315 6.849 14.744 6.623 15.44 7.215 15.01 7.806 15.44 7.58 14.744z"}),(0,r.jsx)("path",{fill:"#fff",d:"M10.56 14.744L11.151 14.315 10.42 14.315 10.194 13.619 9.968 14.315 9.237 14.315 9.828 14.744 9.603 15.44 10.194 15.01 10.785 15.44 10.56 14.744z"}),(0,r.jsx)("path",{fill:"#fff",d:"M13.539 14.744L14.13 14.315 13.399 14.315 13.173 13.619 12.947 14.315 12.216 14.315 12.808 14.744 12.582 15.44 13.173 15.01 13.765 15.44 13.539 14.744z"})]})});default:return(0,r.jsx)(Z.Z,{ref:h,style:{fontSize:20}})}})},58384:function(He,ae,e){"use strict";e.d(ae,{a:function(){return g},v:function(){return i}});var Z=e(36609),c=e(57715),k=e(35310);function i(A,r){return r?"{{t(".concat(JSON.stringify(A),", ").concat(JSON.stringify(r),")}}"):"{{t(".concat(JSON.stringify(A),")}}")}var g=Z.default.createInstance(),C={};Object.keys(k.ZP).forEach(function(A){C[A]=k.ZP[A].resources}),g.use(c.Db).init({lng:"en-US",defaultNS:"client",resources:{},keySeparator:!1,nsSeparator:!1})},82369:function(He,ae,e){"use strict";e.d(ae,{JO:function(){return L},OL:function(){return n},ci:function(){return h},q5:function(){return M},fm:function(){return y}});var Z=e(97857),c=e.n(Z),k=e(13769),i=e.n(k),g=e(92052),C=e(16165),A=e(91321),r=e(67294),K=e(85893),v=["type","component"],j,h=new Map;function M(a){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:j;h.set(a.toLowerCase(),R)}function n(a){return a?h.has(a.toLowerCase()):!1}function y(a){Object.keys(a).forEach(function(R){M(R,a[R])})}Object.keys(g).forEach(function(a){M(a,g[a])});var L=function(R){var E=R.type,$=E===void 0?"":E,Q=R.component,z=i()(R,v);if(Q)return(0,K.jsx)(C.Z,c()({component:Q},z));if($&&h.has($.toLowerCase())){var p=h.get($.toLowerCase());return(0,K.jsx)(p,c()({},z))}return $&&j?(0,K.jsx)(j,{type:$}):null};L.createFromIconfontCN=function(a){j=(0,A.Z)(a)},L.register=function(a){y(a)};var o=null},21143:function(He,ae,e){"use strict";e.r(ae),e.d(ae,{ACLActionParamsContext:function(){return E.R1},ACLActionProvider:function(){return E.mE},ACLCollectionFieldProvider:function(){return E.tq},ACLCollectionProvider:function(){return E.Hh},ACLContext:function(){return E.R3},ACLCustomContext:function(){return E.a3},ACLMenuItemProvider:function(){return E.fJ},ACLPane:function(){return E.$M},ACLPlugin:function(){return E.pz},ACLProvider:function(){return E.Z5},ACLRolesCheckProvider:function(){return E.VV},ADMIN_SETTINGS_KEY:function(){return p.eB},ADMIN_SETTINGS_PATH:function(){return p.oz},APIClient:function(){return Q.lP},APIClientContext:function(){return Q._Z},APIClientProvider:function(){return Q.Xb},AccessControl:function(){return G.Mj},Action:function(){return P.aUM},ActionBar:function(){return P.olz},ActionBarAssociationFilterAction:function(){return w.cm},ActionBarProvider:function(){return P.N0i},ActionContext:function(){return P.fWn},ActionContextNoRerender:function(){return P.mlL},ActionContextProvider:function(){return P.EIK},ActionDesigner:function(){return P.$Lt},ActionInitializer:function(){return w.$M},ActionInitializerItem:function(){return w.eq},AdminDynamicPage:function(){return Y.zf},AdminLayout:function(){return Y.lq},AdminLayoutPlugin:function(){return Y.r3},AdminProvider:function(){return Y.IA},AdminSettingsLayout:function(){return ne.i9},AfterSuccess:function(){return P.$b8},AntdAppProvider:function(){return O.wI},AntdConfigPlugin:function(){return $.kT},AntdConfigProvider:function(){return $.zy},AntdSchemaComponentPlugin:function(){return P.HTy},AntdSchemaComponentProvider:function(){return P.lkv},AppComponent:function(){return p.y$},AppLangContext:function(){return $.UJ},AppNotFound:function(){return U.p},AppendsTreeSelect:function(){return P.rDu},Application:function(){return p.Mx},ApplicationContext:function(){return p.Zz},AssignedFieldValues:function(){return P.eYL},AssociatedFields:function(){return w.Pg},AssociationField:function(){return P.Rat},AssociationFieldMode:function(){return P.oAt},AssociationFieldModeProvider:function(){return P.E7E},AssociationFilter:function(){return w.tr},AssociationFilterDesignerDelete:function(){return w.nr},AssociationFilterDesignerDisplayField:function(){return w.N2},AssociationFilterPlugin:function(){return w.Ys},AssociationOrCollectionProvider:function(){return u.dq},AssociationProvider:function(){return u.ym},AssociationSelect:function(){return P.$SD},AsyncDataContext:function(){return b.tO},AsyncDataProvider:function(){return b.pW},AttachmentList:function(){return P.fUi},AutoComplete:function(){return P.QcG},BackButtonUsedInSubPage:function(){return P.MLy},BaseVariableProvider:function(){return G.Nx},BlankComponent:function(){return p.X_},Block:function(){return P.gOu},BlockAssociationContext:function(){return f.WJ},BlockContext:function(){return f.Qj},BlockInitializer:function(){return w.bn},BlockItem:function(){return P.jYG},BlockItemCard:function(){return P.PuU},BlockItemCardContext:function(){return P.smG},BlockItemInitializer:function(){return w.VD},BlockProvider:function(){return f.ZJ},BlockRequestContextProvider:function(){return u.uz},BlockRequestContext_deprecated:function(){return f.br},BlockRequestLoadingContext:function(){return u.q4},BlockRequestProvider:function(){return u.N4},BlockRequestProvider_deprecated:function(){return f.M0},BlockResourceContext:function(){return f.wH},BlockSchemaComponentPlugin:function(){return f.jF},BlockSchemaComponentProvider:function(){return f.UC},BlockSchemaToolbar:function(){return ge.G},BlockTemplateContext:function(){return le.k0},BlockTemplateDetails:function(){return le.bs},BlockTemplatePage:function(){return le.EF},BlockTemplateProvider:function(){return le.AG},BlockTemplatesPane:function(){return le.L},ButtonEditor:function(){return P.C1I},CSSVariableProvider:function(){return d.O},CardItem:function(){return P.Ssf},Cascader:function(){return P.vTp},Checkbox:function(){return P.XZJ},ClearCollectionFieldContext:function(){return u.m9},Collection:function(){return u.FE},CollectionContext:function(){return u.WH},CollectionDeletedPlaceholder:function(){return u.zW},CollectionField:function(){return u.sb},CollectionFieldContext:function(){return u.v_},CollectionFieldInterface:function(){return u.SY},CollectionFieldInterfaceManager:function(){return u.Z},CollectionFieldProvider:function(){return u.YT},CollectionFieldUISchemaProvider:function(){return oe._9},CollectionFieldsToFormInitializerItems:function(){return u.Cd},CollectionFieldsToInitializerItems:function(){return u.rJ},CollectionFieldsToTableInitializerItems:function(){return u.lC},CollectionManager:function(){return u.w4},CollectionManagerContext:function(){return u.IX},CollectionManagerProvider:function(){return u.xw},CollectionNotAllowViewPlaceholder:function(){return u.pD},CollectionProvider:function(){return u.YQ},CollectionRecord:function(){return u.DI},CollectionRecordContext:function(){return u.vI},CollectionRecordProvider:function(){return u.E0},CollectionSelect:function(){return P.Tt2},CollectionTemplate:function(){return u.Pl},CollectionTemplateManager:function(){return u.yM},ColorPicker:function(){return P.zH8},ColorSelect:function(){return P.Q5L},CompatibleSchemaInitializer:function(){return p.nl},CreateFilterActionInitializer:function(){return w.nl},CreateResetActionInitializer:function(){return w.cz},Cron:function(){return P.Pok},CronSet:function(){return P.Vm0},CurrentAppInfoContext:function(){return z.RQ},CurrentAppInfoProvider:function(){return z.Gq},CurrentPageUidContext:function(){return p.WY},CurrentPageUidProvider:function(){return p.lN},CurrentRouteProvider:function(){return Y.ng},CurrentTabUidContext:function(){return p.yt},CurrentTabUidProvider:function(){return p.vm},CurrentUserContext:function(){return ze.Ec},CurrentUserProvider:function(){return ze.MF},CurrentUserSettingsMenuProvider:function(){return ze.mY},CustomRouterContextProvider:function(){return p.O6},CustomizeActionInitializer:function(){return w.yE},DEBOUNCE_WAIT:function(){return Se.on},DEFAULT_DATA_SOURCE_KEY:function(){return u.Ip},DEFAULT_DATA_SOURCE_TITLE:function(){return u.UC},DataBlockCollector:function(){return S.vY},DataBlockContext:function(){return u.hZ},DataBlockInitializer:function(){return w.dn},DataBlockProvider:function(){return u.KY},DataBlockResourceContext:function(){return u.T1},DataBlockResourceProvider:function(){return u.eh},DataSource:function(){return u.o2},DataSourceApplicationProvider:function(){return u.i},DataSourceCollectionCascader:function(){return P.xI_},DataSourceContext:function(){return u.NT},DataSourceManager:function(){return u.AK},DataSourceManagerContext:function(){return u.up},DataSourceManagerProvider:function(){return u.kv},DataSourceProvider:function(){return u.LX},DataSourceSelect:function(){return P.Lip},DateFormatCom:function(){return P.WN4},DatePicker:function(){return P.Mtg},DatePickerProvider:function(){return P.iNu},DefaultValueProvider:function(){return G.yT},Designable:function(){return P.zzt},DesignableSwitch:function(){return P._bl},Details:function(){return P.POi},DetailsBlockContext:function(){return f.LR},DetailsBlockProvider:function(){return f.nw},DetailsDesigner:function(){return P.AOY},Divider:function(){return P.izJ},DndContext:function(){return P.LBT},DocumentTitleContext:function(){return l.PE},DocumentTitleProvider:function(){return l.C$},DragHandler:function(){return P.IWB},DraggableContext:function(){return P.LCt},DropdownVisibleContext:function(){return ze.yI},EMPTY_OBJECT:function(){return Se.Nu},EditComponent:function(){return P.FyH},EditDefaultValue:function(){return P.Nir},EditDescription:function(){return P.q8U},EditOperator:function(){return P.HGA},EditPattern:function(){return P.QTe},EditRequired:function(){return P.JEX},EditSortField:function(){return P.fAH},EditTitle:function(){return P.$w$},EditTitleField:function(){return P.nBj},EditTooltip:function(){return P.Oct},EditValidationRules:function(){return P.zdw},Editable:function(){return P.CXR},EllipsisWithTooltip:function(){return P.BQs},ErrorFallback:function(){return P.Hj5},Expand:function(){return P.M0b},ExpiresRadio:function(){return P.Dnz},ExtendCollectionsContext:function(){return u.Xc},ExtendCollectionsProvider:function(){return u.j5},Filter:function(){return P.wn$},FilterAction:function(){return P.GzZ},FilterActionContext:function(){return P.tJZ},FilterAssociatedFields:function(){return w.EC},FilterBlockProvider:function(){return S.XA},FilterBlockType:function(){return S.vC},FilterContext:function(){return P.fox},FilterDynamicComponent:function(){return P.VTd},FilterFormBlockProvider:function(){return f.WI},FilterLogicContext:function(){return P.XsZ},FilterParentCollectionFields:function(){return w.d6},FlagContext:function(){return H.z_},FlagProvider:function(){return H.Cm},Form:function(){return P.l09},FormActiveFieldsProvider:function(){return f.T2},FormBlockContext:function(){return f.TC},FormBlockInitializer:function(){return Ie.Jo},FormBlockProvider:function(){return f.$R},FormDialog:function(){return P.D_t},FormDrawer:function(){return P._80},FormField:function(){return P.WiK},FormFieldContext:function(){return f.uW},FormFieldProvider:function(){return f.$1},FormItem:function(){return P.xJW},FormItemSchemaToolbar:function(){return Ie.Oo},FormProvider:function(){return P.RVL},FormV2:function(){return P.Bc8},G2Plot:function(){return P.hG9},G2PlotInitializer:function(){return w.oY},G2PlotRenderer:function(){return P.DCh},GeneralSchemaDesigner:function(){return G.aN},GeneralSchemaItems:function(){return ie.Mj},GlobalThemeProvider:function(){return O.YO},Grid:function(){return P.rjZ},GridCard:function(){return P.Cqo},GridRowContext:function(){return P.jg7},HTMLEncode:function(){return P.gsn},HeightMode:function(){return G.j0},Icon:function(){return B.JO},IconPicker:function(){return P.$18},InitializerWithSwitch:function(){return w.sp},Input:function(){return P.IIB},InputNumber:function(){return P.RnZ},InputReadPretty:function(){return P.mX2},InputRecordPicker:function(){return P.zDC},InternalAdminLayout:function(){return Y.Me},IsInNocoBaseRecursionFieldContext:function(){return oe.$},IsSubPageClosedByPageMenuProvider:function(){return p.oO},Json:function(){return P.Phs},KeepAlive:function(){return Y.Ob},LAZY_COMPONENT_KEY:function(){return X.XI},LOADING_DELAY:function(){return Se.fw},Layout:function(){return G.Ar},LayoutContent:function(){return Y.bU},List:function(){return P.aVo},LocalDataSource:function(){return u.nC},LocationSearchContext:function(){return p.xJ},Markdown:function(){return P.UGj},MarkdownReadPretty:function(){return P.yq5},MaybeCollectionProvider:function(){return f.bH},Menu:function(){return P.v2r},MenuConfigure:function(){return E.dr},ModalActionSchemaInitializerItem:function(){return w.gy},NanoIDInput:function(){return P.HIW},NocoBaseAuthLogo:function(){return Y.Se},NocoBaseBuildInPlugin:function(){return U.q},NocoBaseDesktopRouteType:function(){return Y.HQ},NocoBaseLogo:function(){return Y.y2},NocoBaseRecursionField:function(){return oe.sq},NocoBaseRouteContext:function(){return Y.IN},OpenModeProvider:function(){return fe.W},PMPlugin:function(){return ne.Np},Page:function(){return P.T3C},PagePopups:function(){return P.d97},PageTabs:function(){return P.hGv},Pagination:function(){return P.tlE},ParentCollectionFields:function(){return w.cd},ParentRouteContext:function(){return P.irr},Password:function(){return P.rop},Percent:function(){return P.gGi},PermissionContext:function(){return E.Bk},PermissionProvider:function(){return E.Wx},PinnedListPlugin:function(){return D.r1},PinnedPluginList:function(){return D.B$},PinnedPluginListContext:function(){return D.uv},PinnedPluginListProvider:function(){return D.tc},Plugin:function(){return p.Sy},PluginManager:function(){return ne.Q$},PluginManagerLink:function(){return ne.s0},PluginSettingsManager:function(){return p.nS},PopupContextProvider:function(){return re.y},PopupSettingsProvider:function(){return P.DBW},PoweredBy:function(){return q.C},Preview:function(){return P.MBS},QuickEdit:function(){return P.pGO},REGEX_OF_VARIABLE:function(){return Se.ts},REGEX_OF_VARIABLE_IN_EXPRESSION:function(){return Se.Bj},Radio:function(){return P.Y8K},ReadPretty:function(){return P.iVT},ReadPrettyRecordPicker:function(){return P.ODP},RecordAssociationBlockInitializer:function(){return w.$i},RecordAssociationDetailsBlockInitializer:function(){return w.Mr},RecordAssociationFormBlockInitializer:function(){return w.EK},RecordAssociationGridCardBlockInitializer:function(){return w.zb},RecordAssociationListBlockInitializer:function(){return w.Ok},RecordContext_deprecated:function(){return J.rY},RecordFormBlockInitializer:function(){return Ie.se},RecordIndexContext:function(){return J.Pc},RecordIndexProvider:function(){return J.li},RecordLink:function(){return f.hD},RecordPicker:function(){return P.lbb},RecordPickerContext:function(){return P.b7w},RecordPickerProvider:function(){return P.sUk},RecordProvider:function(){return J.HV},RecordReadPrettyAssociationFormBlockInitializer:function(){return w.CC},RecordSimpleProvider:function(){return J.Qh},RefreshComponentProvider:function(){return oe.ri},RefreshDataBlockRequest:function(){return P.x1j},RemoteDocumentTitlePlugin:function(){return l.uN},RemoteDocumentTitleProvider:function(){return l.yq},RemoteSchemaComponent:function(){return P.m1v},RemoteSchemaTemplateManagerPlugin:function(){return le.Wc},RemoteSchemaTemplateManagerProvider:function(){return le.Jv},RemoteSelect:function(){return P.glM},RemoveButton:function(){return P.xZD},RemoveConditionContext:function(){return P.IuH},RenderChildrenWithAssociationFilter:function(){return f.gY},RequestSettings:function(){return P.MkN},RerenderDataBlockProvider:function(){return u.sI},Resizable:function(){return Ae.ez},RichText:function(){return P.Hof},RoleConfigure:function(){return E.XU},RoleResourceCollectionContext:function(){return E.O9},RoleTable:function(){return E.No},RolesResourcesActions:function(){return E.kF},RouteSchemaComponent:function(){return Y.GX},RouterContextCleaner:function(){return p.OW},RouterManager:function(){return p.k2},SNIPPET_PREFIX:function(){return p.MC},SanitizedCollectionProvider:function(){return u.Pd},SchemaComponent:function(){return P.n6},SchemaComponentContext:function(){return P.DDd},SchemaComponentOnChangeContext:function(){return P.ATq},SchemaComponentOptions:function(){return P.G0E},SchemaComponentPlugin:function(){return P.a$w},SchemaComponentProvider:function(){return P.TzZ},SchemaInitializer:function(){return p.Ms},SchemaInitializerActionModal:function(){return p.HS},SchemaInitializerActionModalInternal:function(){return p.IQ},SchemaInitializerChild:function(){return p.yH},SchemaInitializerChildren:function(){return p.E0},SchemaInitializerContext:function(){return p.V4},SchemaInitializerDivider:function(){return p.qU},SchemaInitializerItem:function(){return p.lV},SchemaInitializerItemContext:function(){return p.Mm},SchemaInitializerItemGroup:function(){return p.iP},SchemaInitializerItemGroupInternal:function(){return p.IY},SchemaInitializerItemInternal:function(){return p.VG},SchemaInitializerItems:function(){return p.LU},SchemaInitializerManager:function(){return p.eN},SchemaInitializerMenu:function(){return p.tu},SchemaInitializerMenuProvider:function(){return p.kw},SchemaInitializerOpenModeSchemaItems:function(){return ie.EU},SchemaInitializerPlugin:function(){return w.dH},SchemaInitializerSelect:function(){return p.iW},SchemaInitializerSelectInternal:function(){return p.ud},SchemaInitializerSubMenu:function(){return p.eU},SchemaInitializerSubMenuInternal:function(){return p.xv},SchemaInitializerSwitch:function(){return p._n},SchemaInitializerSwitchInternal:function(){return p.wH},SchemaSettingAccessControl:function(){return G.U4},SchemaSettingItemContext:function(){return p.A4},SchemaSettingOpenModeSchemaItems:function(){return ie.HA},SchemaSettings:function(){return p.F5},SchemaSettingsActionLinkItem:function(){return ee.s},SchemaSettingsActionModalItem:function(){return G.Qh},SchemaSettingsBlockHeightItem:function(){return G.qf},SchemaSettingsBlockTitleItem:function(){return G._E},SchemaSettingsCascaderItem:function(){return G.ns},SchemaSettingsChild:function(){return p.kY},SchemaSettingsChildren:function(){return p.dk},SchemaSettingsConnectDataBlocks:function(){return G.FE},SchemaSettingsDataScope:function(){return G.HF},SchemaSettingsDataTemplates:function(){return G.ON},SchemaSettingsDateFormat:function(){return G.yu},SchemaSettingsDefaultSortingRules:function(){return G.y5},SchemaSettingsDefaultValue:function(){return G.Nn},SchemaSettingsDivider:function(){return G.Z5},SchemaSettingsDropdown:function(){return G.cM},SchemaSettingsEnableChildCollections:function(){return G.L3},SchemaSettingsFixed:function(){return Ae.rI},SchemaSettingsFormItemTemplate:function(){return G.vC},SchemaSettingsItem:function(){return G.r2},SchemaSettingsItemGroup:function(){return G.bw},SchemaSettingsLayoutItem:function(){return G.JM},SchemaSettingsLinkageRules:function(){return G.lc},SchemaSettingsManager:function(){return p.XD},SchemaSettingsModalItem:function(){return G.B0},SchemaSettingsNumberFormat:function(){return G.wH},SchemaSettingsPlugin:function(){return G.zM},SchemaSettingsPopupItem:function(){return G.D3},SchemaSettingsProvider:function(){return G.Rh},SchemaSettingsRemove:function(){return G.qx},SchemaSettingsRenderEngine:function(){return G.cK},SchemaSettingsSelectItem:function(){return G.Qf},SchemaSettingsSortingRule:function(){return G.wL},SchemaSettingsSubMenu:function(){return G.m$},SchemaSettingsSwitchItem:function(){return G.hj},SchemaSettingsTemplate:function(){return G.Gk},SchemaSettingsWrapper:function(){return p.GC},SchemaTemplateManagerContext:function(){return le.Kb},SchemaToolbar:function(){return G.Mf},SchemaToolbarContext:function(){return p.J1},SchemaToolbarProvider:function(){return p.V$},SchemaToolbarVisibleContext:function(){return G.dI},ScopeSelect:function(){return E.X$},SearchCollections:function(){return w.zH},SecondConFirm:function(){return P.y00},Select:function(){return P.PhF},SelectActionInitializer:function(){return w.w_},SelectWithTitle:function(){return I.T},SetDataLoadingMode:function(){return Te.jI},SettingCenterPermissionProvider:function(){return E.P2},SettingCenterProvider:function(){return E.S3},SettingsCenterConfigure:function(){return E.H3},SettingsCenterContext:function(){return ne.EV},SettingsCenterDropdown:function(){return ne.zK},SettingsMenuProvider:function(){return ze.SV},ShowFormData:function(){return P.Cqv},SkipValidation:function(){return P.cof},Sortable:function(){return P.bts},SortableContext:function(){return P.Fop},SortableItem:function(){return P.TRI},SortableProvider:function(){return P.ORg},Space:function(){return P.TaI},StablePopover:function(){return P.qHe},StrategyActions:function(){return E.R6},SubmitActionInitializer:function(){return w.ss},SwitchLanguage:function(){return pe.j},SystemSettingsContext:function(){return _e.YO},SystemSettingsPane:function(){return _e.a$},SystemSettingsPlugin:function(){return _e.j8},SystemSettingsProvider:function(){return _e.C6},Table:function(){return P.iA_},TableActionColumnInitializer:function(){return w.VU},TableBlockContext:function(){return f.Hz},TableBlockDesigner:function(){return P.gvM},TableBlockInitializer:function(){return Ae.kD},TableBlockProvider:function(){return f._0},TableColumnSchemaToolbar:function(){return Ae.u6},TableField:function(){return P.SnY},TableFieldContext:function(){return f.Q6},TableFieldProvider:function(){return f.CB},TableFieldResource:function(){return f.Qy},TableSelectorContext:function(){return f.Yu},TableSelectorDesigner:function(){return P.ASv},TableSelectorInitializer:function(){return Le.S},TableSelectorParamsProvider:function(){return f.Vs},TableSelectorProvider:function(){return f.rL},TableV2:function(){return P.bwk},Tabs:function(){return P.mQc},TabsContextProvider:function(){return P.c__},Templates:function(){return P.QZ3},TestDesigner:function(){return P.L39},TextAreaWithGlobalScope:function(){return P.feF},TimePicker:function(){return P.jII},TreeSelect:function(){return P.mPs},UnixTimestamp:function(){return P.tgM},Upload:function(){return P.gqx},Uploader:function(){return P.Qm7},Variable:function(){return P._wD},VariableInput:function(){return G.qj},VariablePopupRecordProvider:function(){return ce.Rm},VariableScopeProvider:function(){return P.rjl},VariablesContext:function(){return Se.cB},VariablesProvider:function(){return Se.Uj},WithoutFormFieldResource:function(){return f.$Y},WithoutTableFieldResource:function(){return f.s},actionSettings:function(){return P.SLL},actionSettingsItems:function(){return P.sBv},allowAddNew:function(){return P.iTm},appendQueryStringToUrl:function(){return f.HQ},attachmentFileTypes:function(){return P.BDK},cache:function(){return R.cache},canMakeAssociationBlock:function(){return w.Tc},compatOldTheme:function(){return O.kK},completeURL:function(){return f.jR},compose:function(){return p.qC},createCreateFormBlockUISchema:function(){return Ie.lJ},createDesignable:function(){return P.Pls},createDetailsBlockSchema:function(){return w.e6},createFormActionInitializers:function(){return Ie.nr},createFormActionInitializers_deprecated:function(){return Ie.$G},createFormBlockSchema:function(){return w.NH},createFormBlockSettings:function(){return Ie.K9},createModalSettingsItem:function(){return p.lo},createReadPrettyFormBlockSchema:function(){return w.Uc},createRouterManager:function(){return p.w9},createSelectSchemaSettingsItem:function(){return p.NB},createStyles:function(){return xe.k},createSwitchSettingsItem:function(){return p.HL},createTableBlockSchema:function(){return w.BU},createTableBlockUISchema:function(){return Ae.OO},createTextSettingsItem:function(){return p.yq},css:function(){return R.css},customFormItemInitializers:function(){return w.Ic},customFormItemInitializers_deprecated:function(){return w.Jn},cx:function(){return R.cx},defaultAppComponents:function(){return p.FH},defaultFieldNames:function(){return P.Oxq},defaultInputStyle:function(){return G.ZL},defaultTheme:function(){return O.uH},editFormBlockSettings:function(){return Ie.rB},encodeFileURL:function(){return P.Xgz},fetchTemplateData:function(){return P.WLi},fieldComponentSettingsItem:function(){return u.K0},fieldSettingsFormItem:function(){return Ie.dV},fillParentFields:function(){return f.Xe},filterFormItemSettings:function(){return P.$9M},findByUid:function(){return P.nCn},findFilterTargets:function(){return f.SK},findFormBlock:function(){return f.Fi},findKanbanFormItem:function(){return u.iv},findKeysByUid:function(){return P.iNG},findMenuItem:function(){return P.tD8},findParentFieldSchema:function(){return G.PO},findRouteBySchemaUid:function(){return Y.gY},flush:function(){return R.flush},formActionInitializers:function(){return Ie.vR},formDetailsSettings:function(){return P.pg9},formItemInitializers:function(){return Ie.ex},formItemInitializers_deprecated:function(){return Ie.eh},formItemSettings:function(){return P.Ofb},formSettings:function(){return P.ibf},formV1Settings:function(){return P.WyG},genStyleHook:function(){return P.l6$},getAppends:function(){return f.iF},getAssociationPath:function(){return f.dP},getCardItemSchema:function(){return f.Gn},getCollectionTitle:function(){return ge.A},getCurrentOptions:function(){return P.WGR},getDataSourceHeaders:function(){return u.GX},getDatePickerLabels:function(){return P.C$H},getDateRanges:function(){return P.SET},getFieldDefaultValue:function(){return G.os},getFormValues:function(){return f.X7},getIdsWithChildren:function(){return f.Ns},getLabelFormatValue:function(){return P.cNQ},getLabelWithTooltip:function(){return G.rB},getPageMenuSchema:function(){return Pe.a4},getPageSchema:function(){return f.tj},getPopupPathFromParams:function(){return P.NCb},getRegisteredStyles:function(){return R.getRegisteredStyles},getRenderContent:function(){return P.I9l},getShouldChange:function(){return G.Vc},getStoredPopupContext:function(){return P.XQ2},getSupportFieldsByAssociation:function(){return S.x5},getSupportFieldsByForeignKey:function(){return S.zv},getTabSchema:function(){return P.Fxc},getURLSearchParams:function(){return G.Uz},getURLSearchParamsChildren:function(){return G.n9},getVariableComponentWithScope:function(){return ue.M},getVariablesFromExpression:function(){return Se.fN},getZIndex:function(){return P.KKi},gridRowColWrap:function(){return w.BM},handleDateChangeOnForm:function(){return P.MDU},hasIcon:function(){return B.OL},hydrate:function(){return R.hydrate},i18n:function(){return t.a},icons:function(){return B.ci},inferPickerType:function(){return P.CEH},injectGlobal:function(){return R.injectGlobal},interfacesOfUnsupportedDefaultValue:function(){return G.TU},isAssocField:function(){return S.$f},isBulkEditAction:function(){return P.vUN},isFileCollection:function(){return P.ZZb},isInFilterFormBlock:function(){return S.Op},isInitializersSame:function(){return p.h6},isMobile:function(){return P.tqC},isPatternDisabled:function(){return G.VZ},isSameCollection:function(){return S.yr},isShowFilePicker:function(){return P.elO},isSystemField:function(){return G.Mq},isTabPage:function(){return P.CfU},isTitleField:function(){return u.Yj},isVariable:function(){return Se.cG},itemsMerge:function(){return w.Z_},keyframes:function(){return R.keyframes},languageCodes:function(){return V.m9},lazy:function(){return X.Vo},locale:function(){return V.ZP},mapDatePicker:function(){return P.LPx},mapRangePicker:function(){return P.fY6},mapTimeFormat:function(){return P.Vm},merge:function(){return R.merge},mergeFilter:function(){return S.EO},mockAPIClient:function(){return Ee.G},moment2str:function(){return P.w_o},navigateToTab:function(){return P.SJF},navigateWithinSelf:function(){return f.nl},normalizeContainer:function(){return p.pn},pageSettings:function(){return P._Ko},pageTabSettings:function(){return P.Mev},parseVariablesAndChangeParamsToQueryString:function(){return f._f},readPrettyFormSettings:function(){return P.i2K},recordBlockInitializers:function(){return w.vV},recordBlockInitializers_deprecated:function(){return w.Sq},recursiveParent:function(){return f.zA},reduceValueSize:function(){return f.ID},registerIcon:function(){return B.q5},registerIcons:function(){return B.fm},removeNullCondition:function(){return P.WmO},replaceVariableValue:function(){return f.UY},requestParentRecordData:function(){return u.H0},schemaSettingsLabelLayout:function(){return G.ut},setDataLoadingModeSettingsItem:function(){return Te.wq},setDefaultSortingRulesSchemaSettingsItem:function(){return G.rf},setTheDataScopeSchemaSettingsItem:function(){return G.aP},sheet:function(){return R.sheet},showFileName:function(){return be.y},splitWrapSchema:function(){return P.oBi},storePopupContext:function(){return P.hKP},subTableActionInitializers:function(){return w.U2},subTableActionInitializers_deprecated:function(){return w.o_},systemKeys:function(){return G.ob},tabPaneInitializers:function(){return w.$T},tabPaneInitializersForBulkEditFormBlock:function(){return w.zg},tabPaneInitializersForRecordBlock:function(){return w.d4},tabPaneInitializers_deprecated:function(){return w.xc},tableActionColumnInitializers:function(){return Ae.Rp},tableActionColumnInitializers_deprecated:function(){return Ae.Xe},tableActionInitializers:function(){return Ae.H1},tableActionInitializers_deprecated:function(){return Ae.EG},tableBlockSettings:function(){return Ae.Oe},tableColumnInitializers:function(){return Ae.Ug},tableColumnInitializers_deprecated:function(){return Ae.T$},tableColumnSettings:function(){return Ae.FY},tableSelectorBlockSettings:function(){return Le.v},transformToFilter:function(){return S.jE},transformVariableValue:function(){return Se.J8},tval:function(){return t.v},updateFilterTargets:function(){return f.iJ},updateFormActionInitializers:function(){return Ie.SW},updateFormActionInitializers_deprecated:function(){return Ie.Cw},useACLActionParamsContext:function(){return E.Hq},useACLContext:function(){return E.TR},useACLFieldWhitelist:function(){return E.Aj},useACLRoleContext:function(){return E.ov},useACLRolesCheck:function(){return E.xd},useAPIClient:function(){return Q.LY},useAPITokenVariable:function(){return G.IG},useActionAvailable:function(){return Te.vn},useActionBarContext:function(){return P.DU1},useActionContext:function(){return P.XCj},useAdminSchemaUid:function(){return N.W},useAllAccessDesktopRoutes:function(){return Y.Kf},useAllCollectionsInheritChainGetter:function(){return u.Uv},useApp:function(){return p.qD},useAppLangContext:function(){return $.GW},useAppSpin:function(){return p.rM},useAriaAttributeOfMenuItem:function(){return p.ne},useAssociatedFields:function(){return S.Fp},useAssociatedFormItemInitializerFields:function(){return w.hg},useAssociatedTableColumnInitializerFields:function(){return w.V0},useAssociationCreateActionProps:function(){return f.Yo},useAssociationFieldContext:function(){return P.KyD},useAssociationFieldModeContext:function(){return P.Vpg},useAssociationFilterBlockProps:function(){return f._S},useAssociationFilterProps:function(){return f.rD},useAssociationName:function(){return u.Xo},useAssociationNames:function(){return f.P_},useAsyncData:function(){return b.w3},useAttach:function(){return P.lIL},useBackButton:function(){return P.KxP},useBaseVariable:function(){return G.zI},useBlockAssociationContext:function(){return f.DD},useBlockContext:function(){return f.VG},useBlockHeight:function(){return P.hi9},useBlockHeightProps:function(){return f.gp},useBlockRequestContext:function(){return f.BU},useBlockResource:function(){return f.lT},useBlockTemplateContext:function(){return le.rE},useBuiltinVariables:function(){return Se.L7},useBulkDestroyActionProps:function(){return f.ns},useCloseAction:function(){return P.p27},useCollectValuesToSubmit:function(){return f.hu},useCollection:function(){return u.Kx},useCollectionDataSourceItems:function(){return w.HD},useCollectionField:function(){return u.Hy},useCollectionFields:function(){return u.ge},useCollectionManager:function(){return u.d9},useCollectionParentRecord:function(){return u.RA},useCollectionParentRecordData:function(){return u.Kv},useCollectionRecord:function(){return u.oV},useCollectionRecordData:function(){return u.nE},useCollectionState:function(){return G.IO},useCollections:function(){return u.bX},useColumnSchema:function(){return P.z9d},useCompatOldVariables:function(){return G.b1},useCompile:function(){return P.eJW},useComponent:function(){return P.Cor},useContextVariable:function(){return Se.Ym},useCreateActionProps:function(){return f.cD},useCreateAssociationDetailsBlock:function(){return w.Dc},useCreateAssociationDetailsWithoutPagination:function(){return w.yZ},useCreateAssociationFormBlock:function(){return w.Qr},useCreateAssociationGridCardBlock:function(){return w.yG},useCreateAssociationListBlock:function(){return w.R_},useCreateAssociationTableBlock:function(){return w.Rm},useCreateEditFormBlock:function(){return Ie.$R},useCreateFormBlock:function(){return Ie.kQ},useCreateTableBlock:function(){return Ae.Ez},useCurrentAppInfo:function(){return z._S},useCurrentDocumentTitle:function(){return l.AL},useCurrentPageUid:function(){return p.Rx},useCurrentPopupContext:function(){return P.Zmk},useCurrentPopupRecord:function(){return ce.Sw},useCurrentRoleVariable:function(){return G.KR},useCurrentRoles:function(){return ze.ih},useCurrentRoute:function(){return Y.Hb},useCurrentSchema:function(){return w.pZ},useCurrentSearchParams:function(){return p.r_},useCurrentTabUid:function(){return p.zJ},useCurrentUserContext:function(){return ze.OP},useCurrentUserSettingsMenu:function(){return ze.t$},useCurrentUserVariable:function(){return G.AO},useCustomizeBulkUpdateActionProps:function(){return f.UQ},useCustomizeRequestActionProps:function(){return f.xx},useCustomizeUpdateActionProps:function(){return f.X0},useDataBlock:function(){return u.eS},useDataBlockHeight:function(){return P.aZq},useDataBlockParentRecord:function(){return f.M_},useDataBlockProps:function(){return u.zh},useDataBlockRequest:function(){return u.hS},useDataBlockRequestData:function(){return u.xQ},useDataBlockRequestGetter:function(){return u.Pt},useDataBlockResource:function(){return u.wb},useDataLoadingMode:function(){return Te.tU},useDataSource:function(){return u.wl},useDataSourceHeaders:function(){return u.on},useDataSourceKey:function(){return u.FC},useDataSourceManager:function(){return u.fp},useDataTemplates:function(){return G.dD},useDatePickerContext:function(){return P.P1D},useDateVariable:function(){return G.ds},useDatetimeVariable:function(){return G.Ld},useDatetimeVariableContext:function(){return G.FB},useDesignable:function(){return P.ngQ},useDesigner:function(){return P.ett},useDestroyActionProps:function(){return f.z2},useDetailsBlockContext:function(){return f.nT},useDetailsBlockProps:function(){return f.BX},useDetailsDecoratorProps:function(){return Te.dS},useDetailsPaginationProps:function(){return f.bF},useDetailsParentRecord:function(){return Te.jM},useDetailsProps:function(){return Te.os},useDetailsWithPaginationBlockParams:function(){return Te.ln},useDetailsWithPaginationDecoratorProps:function(){return Te.ec},useDetailsWithPaginationProps:function(){return Te.tm},useDisassociateActionProps:function(){return f.ii},useDocumentTitle:function(){return l.jr},useDownloadLogs:function(){return P.ySm},useEnsureOperatorsValid:function(){return P.Zd$},useExtendCollections:function(){return u.P5},useFieldComponentName:function(){return I.W},useFieldComponentOptions:function(){return P.cLh},useFieldMode:function(){return P.baz},useFieldModeOptions:function(){return P.fde},useFieldNames:function(){return P.Xdt},useFieldProps:function(){return P.Cld},useFieldTitle:function(){return P.vH8},useFilterAPI:function(){return S.hi},useFilterActionProps:function(){return P.PLH},useFilterBlock:function(){return S.kO},useFilterBlockActionProps:function(){return f.Oy},useFilterByTk:function(){return f.C},useFilterFieldOptions:function(){return P.V8t},useFilterFieldProps:function(){return P.tMk},useFilterOptions:function(){return P.xQm},useFindComponent:function(){return P.sRe},useFlag:function(){return H.P5},useFormActiveFields:function(){return f.zj},useFormBlockContext:function(){return f.bz},useFormBlockProps:function(){return f._$},useFormBlockType:function(){return f.th},useFormDataTemplates:function(){return P.U1u},useFormFieldContext:function(){return f.e$},useFormFieldProps:function(){return f.GK},useFormItemInitializerFields:function(){return w.I_},useGetAriaLabelOfAction:function(){return P.HS$},useGetAriaLabelOfDesigner:function(){return G.zf},useGetAriaLabelOfDrawer:function(){return P.vBu},useGetAriaLabelOfModal:function(){return P.QYZ},useGetAriaLabelOfPopover:function(){return P.t9d},useGetFilterFieldOptions:function(){return P.Kgy},useGetFilterOptions:function(){return P.aJ2},useGetSchemaInitializerMenuItems:function(){return p.bw},useGlobalTheme:function(){return O.mg},useGlobalVariable:function(){return p.Xb},useGridContext:function(){return P.n14},useGridRowContext:function(){return P.DiB},useInheritsTableColumnInitializerFields:function(){return w.yi},useInsertPageSchema:function(){return Pe.r3},useIsAddNewForm:function(){return P.l1O},useIsAdminPage:function(){return p.mI},useIsAllowToSetDefaultValue:function(){return G.SF},useIsAssociationField:function(){return P.w5o},useIsDetailBlock:function(){return f.WG},useIsFieldReadPretty:function(){return P.p3Q},useIsFileField:function(){return P.G5e},useIsFormReadPretty:function(){return P.xj2},useIsInSettingsPage:function(){return p.Bb},useIsSelectFieldMode:function(){return P.rxY},useIsSubPageClosedByPageMenu:function(){return p.ce},useLabelUiSchema:function(){return P.Ils},useLazy:function(){return X.lN},useLinkActionProps:function(){return f.ee},useLinkageAction:function(){return P.zCB},useLocalVariables:function(){return Se.Kp},useLocationNoUpdate:function(){return p.fj},useLocationSearch:function(){return p.HU},useMatchAdmin:function(){return p.xi},useMatchAdminName:function(){return p.tJ},useMenuDragEnd:function(){return P.CMh},useMenuSearch:function(){return w.jA},useMenuTranslation:function(){return P.v$P},useNavigateNoUpdate:function(){return p.WO},useNocoBaseRoutes:function(){return P.FMn},useOpenModeContext:function(){return fe.B},useOptionalFieldList:function(){return f.Lh},useParamsFromRecord:function(){return f.MM},useParentCollection:function(){return u.lb},useParentRecordCommon:function(){return je._},useParentRoute:function(){return P.T0O},useParseDataScopeFilter:function(){return G._Y},useParseURLAndParams:function(){return f.VC},useParsedFilter:function(){return f.vs},usePickActionProps:function(){return f.St},usePlugin:function(){return p.j7},usePopupSettings:function(){return P.a4r},usePopupUtils:function(){return T.E},usePopupVariable:function(){return G.AJ},usePopupVariableContext:function(){return G.gG},useProps:function(){return P.wNf},useRecord:function(){return J.a},useRecordCollectionDataSourceItems:function(){return w.bQ},useRecordIndex:function(){return J.pW},useRecordIsOwn:function(){return J.Px},useRecordPkValue:function(){return E.Jn},useRefreshActionProps:function(){return f.Xk},useRefreshFieldSchema:function(){return oe.gR},useRemoveActionProps:function(){return f.PJ},useRemoveGridFormItem:function(){return w.EY},useRequest:function(){return Q.QT},useRerenderDataBlock:function(){return u.Rr},useResetBlockActionProps:function(){return f.NP},useResource:function(){return Q.Wf},useRoleRecheck:function(){return E.fG},useRoleVariable:function(){return G.bs},useRolesResourcesScopesSelectedRowKeys:function(){return E.cm},useRouter:function(){return p.tv},useRouterBasename:function(){return p.hZ},useSchemaComponentContext:function(){return P.Dmu},useSchemaInitializer:function(){return p.q_},useSchemaInitializerItem:function(){return p.UR},useSchemaInitializerMenuItems:function(){return p.hL},useSchemaInitializerRender:function(){return p.IU},useSchemaInitializerStyles:function(){return p._$},useSchemaInitializerSubMenuContext:function(){return p.vH},useSchemaOptionsContext:function(){return P.Bsl},useSchemaSettings:function(){return G.DD},useSchemaSettingsItem:function(){return p.J$},useSchemaSettingsRender:function(){return p.mQ},useSchemaTemplate:function(){return le.zy},useSchemaTemplateManager:function(){return le.$t},useSchemaToolbar:function(){return p.Po},useSchemaToolbarRender:function(){return p.du},useSourceId:function(){return Te.GL},useSourceIdFromParentRecord:function(){return f.m},useSourceIdFromRecord:function(){return f.e0},useStyles:function(){return P.yKv},useSupportedBlocks:function(){return S.Um},useSyncFromForm:function(){return G.F1},useSystemSettings:function(){return _e.HX},useTableBlockContext:function(){return f.Si},useTableBlockContextBasicValue:function(){return f.bE},useTableBlockDecoratorProps:function(){return Ae.cL},useTableBlockParams:function(){return Ae.lo},useTableBlockProps:function(){return Ae.GK},useTableColumnInitializerFields:function(){return w.bJ},useTableFieldContext:function(){return f.Wx},useTableFieldProps:function(){return f.oA},useTableSelectorContext:function(){return f.CL},useTableSelectorProps:function(){return f.RP},useTableSize:function(){return P.fMB},useTabsContext:function(){return P.gCg},useTitleFieldOptions:function(){return P.eT6},useToken:function(){return xe.d},useUIConfigurationPermissions:function(){return E.mR},useURLAndHTMLSchema:function(){return ue.R},useURLSearchParamsCtx:function(){return G.MD},useURLSearchParamsVariable:function(){return G.F5},useUpdateActionProps:function(){return f.HD},useUploadStyles:function(){return P.$SN},useUserVariable:function(){return G.KD},useValidateSchema:function(){return P.q4O},useVariableOptions:function(){return G.Y5},useVariableScope:function(){return P.ymE},useVariables:function(){return Se.OQ},useViewport:function(){return N.S},useZIndexContext:function(){return P.uqQ},withDynamicSchemaProps:function(){return se.t},withInitializer:function(){return p.W_},withSearchParams:function(){return P.Q3P},withSkeletonComponent:function(){return me.C},zIndexContext:function(){return P.K5K}});var Z=e(66607),c=e.n(Z),k=e(79212),i=e.n(k),g=e(37412),C=e.n(g),A=e(59542),r=e.n(A),K=e(96036),v=e.n(K),j=e(96671),h=e.n(j),M=e(70178),n=e.n(M),y=e(72540),L=e.n(y),o=e(90844),a=e(14994),R=e(97133),E=e(47646),$=e(75599),Q=e(12174),z=e(80347),p=e(68091),b=e(26124),f=e(67174),x=e(6145),m={};for(var F in x)["default","locale","withDynamicSchemaProps","withSkeletonComponent","SwitchLanguage","SchemaSettingsActionLinkItem","getVariableComponentWithScope","useURLAndHTMLSchema","getPageMenuSchema","useInsertPageSchema","OpenModeProvider","useOpenModeContext","PopupContextProvider","usePopupUtils","VariablePopupRecordProvider","showFileName","useCurrentPopupRecord","languageCodes","CollectionFieldUISchemaProvider","IsInNocoBaseRecursionFieldContext","NocoBaseRecursionField","RefreshComponentProvider","useRefreshFieldSchema","cache","css","cx","flush","getRegisteredStyles","hydrate","injectGlobal","keyframes","merge","sheet","ACLActionParamsContext","ACLActionProvider","ACLCollectionFieldProvider","ACLCollectionProvider","ACLContext","ACLCustomContext","ACLMenuItemProvider","ACLPane","ACLPlugin","ACLProvider","ACLRolesCheckProvider","MenuConfigure","PermissionContext","PermissionProvider","RoleConfigure","RoleResourceCollectionContext","RoleTable","RolesResourcesActions","ScopeSelect","SettingCenterPermissionProvider","SettingCenterProvider","SettingsCenterConfigure","StrategyActions","useACLActionParamsContext","useACLContext","useACLFieldWhitelist","useACLRoleContext","useACLRolesCheck","useRecordPkValue","useRoleRecheck","useRolesResourcesScopesSelectedRowKeys","useUIConfigurationPermissions","AntdConfigPlugin","AntdConfigProvider","AppLangContext","useAppLangContext","APIClient","APIClientContext","APIClientProvider","useAPIClient","useRequest","useResource","CurrentAppInfoContext","CurrentAppInfoProvider","useCurrentAppInfo","ADMIN_SETTINGS_KEY","ADMIN_SETTINGS_PATH","AppComponent","Application","ApplicationContext","BlankComponent","CompatibleSchemaInitializer","CurrentPageUidContext","CurrentPageUidProvider","CurrentTabUidContext","CurrentTabUidProvider","CustomRouterContextProvider","IsSubPageClosedByPageMenuProvider","LocationSearchContext","Plugin","PluginSettingsManager","RouterContextCleaner","RouterManager","SNIPPET_PREFIX","SchemaInitializer","SchemaInitializerActionModal","SchemaInitializerActionModalInternal","SchemaInitializerChild","SchemaInitializerChildren","SchemaInitializerContext","SchemaInitializerDivider","SchemaInitializerItem","SchemaInitializerItemContext","SchemaInitializerItemGroup","SchemaInitializerItemGroupInternal","SchemaInitializerItemInternal","SchemaInitializerItems","SchemaInitializerManager","SchemaInitializerMenu","SchemaInitializerMenuProvider","SchemaInitializerSelect","SchemaInitializerSelectInternal","SchemaInitializerSubMenu","SchemaInitializerSubMenuInternal","SchemaInitializerSwitch","SchemaInitializerSwitchInternal","SchemaSettingItemContext","SchemaSettings","SchemaSettingsChild","SchemaSettingsChildren","SchemaSettingsManager","SchemaSettingsWrapper","SchemaToolbarContext","SchemaToolbarProvider","compose","createModalSettingsItem","createRouterManager","createSelectSchemaSettingsItem","createSwitchSettingsItem","createTextSettingsItem","defaultAppComponents","isInitializersSame","normalizeContainer","useApp","useAppSpin","useAriaAttributeOfMenuItem","useCurrentPageUid","useCurrentSearchParams","useCurrentTabUid","useGetSchemaInitializerMenuItems","useGlobalVariable","useIsAdminPage","useIsInSettingsPage","useIsSubPageClosedByPageMenu","useLocationNoUpdate","useLocationSearch","useMatchAdmin","useMatchAdminName","useNavigateNoUpdate","usePlugin","useRouter","useRouterBasename","useSchemaInitializer","useSchemaInitializerItem","useSchemaInitializerMenuItems","useSchemaInitializerRender","useSchemaInitializerStyles","useSchemaInitializerSubMenuContext","useSchemaSettingsItem","useSchemaSettingsRender","useSchemaToolbar","useSchemaToolbarRender","withInitializer","AsyncDataContext","AsyncDataProvider","useAsyncData","BlockAssociationContext","BlockContext","BlockProvider","BlockRequestContext_deprecated","BlockRequestProvider_deprecated","BlockResourceContext","BlockSchemaComponentPlugin","BlockSchemaComponentProvider","DetailsBlockContext","DetailsBlockProvider","FilterFormBlockProvider","FormActiveFieldsProvider","FormBlockContext","FormBlockProvider","FormFieldContext","FormFieldProvider","MaybeCollectionProvider","RecordLink","RenderChildrenWithAssociationFilter","TableBlockContext","TableBlockProvider","TableFieldContext","TableFieldProvider","TableFieldResource","TableSelectorContext","TableSelectorParamsProvider","TableSelectorProvider","WithoutFormFieldResource","WithoutTableFieldResource","appendQueryStringToUrl","completeURL","fillParentFields","findFilterTargets","findFormBlock","getAppends","getAssociationPath","getCardItemSchema","getFormValues","getIdsWithChildren","getPageSchema","navigateWithinSelf","parseVariablesAndChangeParamsToQueryString","recursiveParent","reduceValueSize","replaceVariableValue","updateFilterTargets","useAssociationCreateActionProps","useAssociationFilterBlockProps","useAssociationFilterProps","useAssociationNames","useBlockAssociationContext","useBlockContext","useBlockHeightProps","useBlockRequestContext","useBlockResource","useBulkDestroyActionProps","useCollectValuesToSubmit","useCreateActionProps","useCustomizeBulkUpdateActionProps","useCustomizeRequestActionProps","useCustomizeUpdateActionProps","useDataBlockParentRecord","useDestroyActionProps","useDetailsBlockContext","useDetailsBlockProps","useDetailsPaginationProps","useDisassociateActionProps","useFilterBlockActionProps","useFilterByTk","useFormActiveFields","useFormBlockContext","useFormBlockProps","useFormBlockType","useFormFieldContext","useFormFieldProps","useIsDetailBlock","useLinkActionProps","useOptionalFieldList","useParamsFromRecord","useParseURLAndParams","useParsedFilter","usePickActionProps","useRefreshActionProps","useRemoveActionProps","useResetBlockActionProps","useSourceIdFromParentRecord","useSourceIdFromRecord","useTableBlockContext","useTableBlockContextBasicValue","useTableFieldContext","useTableFieldProps","useTableSelectorContext","useTableSelectorProps","useUpdateActionProps"].indexOf(F)<0&&(m[F]=function(Re){return x[Re]}.bind(0,F));e.d(ae,m);var I=e(7737),d=e(20085),u=e(94804),l=e(69803),S=e(18386),H=e(53285),O=e(69962),N=e(29392),t=e(58384),B=e(82369),X=e(98902),V=e(35310),U=e(7825),D=e(36203),ne=e(65213),q=e(53181),J=e(36586),Y=e(8918),P=e(62954),w=e(67096),ie=e(90810),G=e(90297),le=e(15195),xe=e(39863),_e=e(15585),Ee=e(16779),ze=e(6438),Se=e(64910),se=e(15503),me=e(83335),pe=e(71098),ee=e(29245),ue=e(83954),ge=e(16966),Ie=e(67565),Ae=e(77681),Le=e(75145),Te=e(56995),je=e(92700),Pe=e(18591),fe=e(39270),re=e(74483),T=e(23048),ce=e(73691),be=e(69435),oe=e(57105)},98902:function(He,ae,e){"use strict";e.d(ae,{Vo:function(){return v},XI:function(){return K},lN:function(){return j}});var Z=e(97857),c=e.n(Z),k=e(67294),i=e(57953),g=e(96486),C=e.n(g),A=e(97289),r=e(85893),K=Symbol("LAZY_COMPONENT_KEY");function v(h){for(var M=arguments.length,n=new Array(M>1?M-1:0),y=1;y<M;y++)n[y-1]=arguments[y];if(n.length===0){var L=(0,k.lazy)(function(){return h().then(function(a){var R=a.default;return o[K]=R,{default:R}})}),o=function(R){return(0,r.jsx)(k.Suspense,{fallback:(0,r.jsx)(i.Z,{}),children:(0,r.jsx)(L,c()({},R))})};return o}return n.reduce(function(a,R){var E=(0,k.lazy)(function(){return h().then(function($){var Q=(0,g.get)($,R);return a[R][K]=Q,{default:Q}})});return a[R]=function($){return(0,r.jsx)(k.Suspense,{fallback:(0,r.jsx)(i.Z,{}),children:(0,r.jsx)(E,c()({},$))})},a},{})}function j(h,M){var n=typeof M=="function"?M:function(o){return o[M]},y=(0,A.I6)(h);if(!y.payload)throw new Promise(function(o,a){y.loadIfNeeded(),y.resolution.then(o).catch(a)});var L=n(y.payload);return L}},35310:function(He,ae,e){"use strict";e.d(ae,{m9:function(){return c},yx:function(){return Z}});var Z={"ar-EG":"ar","az-AZ":"az","bg-BG":"bg","bn-BD":"bn-bd","by-BY":"en","ca-ES":"ca","cs-CZ":"cs","da-DK":"da","de-DE":"de","el-GR":"el","en-GB":"en-gb","en-US":"en","es-ES":"es","et-EE":"et","fa-IR":"fa","fi-FI":"fi","fr-BE":"fr","fr-CA":"fr","fr-FR":"fr","ga-IE":"ga","gl-ES":"gl","he-IL":"he","hi-IN":"hi","hr-HR":"hr","hu-HU":"hu","hy-AM":"hy-am","id-ID":"id","is-IS":"is","it-IT":"it","ja-JP":"ja","ka-GE":"ka","kk-KZ":"kk","km-KH":"km","kn-IN":"kn","ko-KR":"ko","ku-IQ":"ku","lt-LT":"lt","lv-LV":"lv","mk-MK":"mk","ml-IN":"ml","mn-MN":"mn","ms-MY":"ms","nb-NO":"nb","ne-NP":"ne","nl-BE":"nl-be","nl-NL":"nl","pl-PL":"pl","pt-BR":"pt-br","pt-PT":"pt","ro-RO":"ro","ru-RU":"ru","si-LK":"si","sk-SK":"sk","sl-SI":"sl","sr-RS":"sr","sv-SE":"sv","ta-IN":"ta","th-TH":"th","tk-TK":"tk","tr-TR":"tr","uk-UA":"uk","ur-PK":"ur","vi-VN":"vi","zh-CN":"zh-cn","zh-HK":"zh-hk","zh-TW":"zh-tw"},c={"ar-EG":{label:"\u0627\u0644\u0639\u0631\u0628\u064A\u0629"},"az-AZ":{label:"Az\u0259rbaycan dili"},"bg-BG":{label:"\u0411\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438"},"bn-BD":{label:"Bengali"},"by-BY":{label:"\u0411\u0435\u043B\u0430\u0440\u0443\u0441\u043A\u0456"},"ca-ES":{label:"\u0421atal\xE0/Espanya"},"cs-CZ":{label:"\u010Cesky"},"da-DK":{label:"Dansk"},"de-DE":{label:"Deutsch"},"el-GR":{label:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC"},"en-GB":{label:"English(GB)"},"en-US":{label:"English"},"es-ES":{label:"Espa\xF1ol"},"et-EE":{label:"Estonian (Eesti)"},"fa-IR":{label:"\u0641\u0627\u0631\u0633\u06CC"},"fi-FI":{label:"Suomi"},"fr-BE":{label:"Fran\xE7ais(BE)"},"fr-CA":{label:"Fran\xE7ais(CA)"},"fr-FR":{label:"Fran\xE7ais"},"ga-IE":{label:"Gaeilge"},"gl-ES":{label:"Galego"},"he-IL":{label:"\u05E2\u05D1\u05E8\u05D9\u05EA"},"hi-IN":{label:"\u0939\u093F\u0928\u094D\u0926\u0940"},"hr-HR":{label:"Hrvatski jezik"},"hu-HU":{label:"Magyar"},"hy-AM":{label:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576"},"id-ID":{label:"Bahasa Indonesia"},"is-IS":{label:"\xCDslenska"},"it-IT":{label:"Italiano"},"ja-JP":{label:"\u65E5\u672C\u8A9E"},"ka-GE":{label:"\u10E5\u10D0\u10E0\u10D7\u10E3\u10DA\u10D8"},"kk-KZ":{label:"\u049A\u0430\u0437\u0430\u049B \u0442\u0456\u043B\u0456"},"km-KH":{label:"\u1797\u17B6\u179F\u17B6\u1781\u17D2\u1798\u17C2\u179A"},"kn-IN":{label:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1"},"ko-KR":{label:"\uD55C\uAD6D\uC5B4"},"ku-IQ":{label:"\u06A9\u0648\u0631\u062F\u06CC"},"lt-LT":{label:"lietuvi\u0173"},"lv-LV":{label:"Latvie\u0161u valoda"},"mk-MK":{label:"\u043C\u0430\u043A\u0435\u0434\u043E\u043D\u0441\u043A\u0438 \u0458\u0430\u0437\u0438\u043A"},"ml-IN":{label:"\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02"},"mn-MN":{label:"\u041C\u043E\u043D\u0433\u043E\u043B \u0445\u044D\u043B"},"ms-MY":{label:"\u0628\u0647\u0627\u0633 \u0645\u0644\u0627\u064A\u0648"},"nb-NO":{label:"Norsk bokm\xE5l"},"ne-NP":{label:"\u0928\u0947\u092A\u093E\u0932\u0940"},"nl-BE":{label:"Vlaams"},"nl-NL":{label:"Nederlands"},"pl-PL":{label:"Polski"},"pt-BR":{label:"Portugu\xEAs brasileiro"},"pt-PT":{label:"Portugu\xEAs"},"ro-RO":{label:"Rom\xE2nia"},"ru-RU":{label:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"},"si-LK":{label:"\u0DC3\u0DD2\u0D82\u0DC4\u0DBD"},"sk-SK":{label:"Sloven\u010Dina"},"sl-SI":{label:"Sloven\u0161\u010Dina"},"sr-RS":{label:"\u0441\u0440\u043F\u0441\u043A\u0438 \u0458\u0435\u0437\u0438\u043A"},"sv-SE":{label:"Svenska"},"ta-IN":{label:"Tamil"},"th-TH":{label:"\u0E20\u0E32\u0E29\u0E32\u0E44\u0E17\u0E22"},"tk-TK":{label:"Turkmen"},"tr-TR":{label:"T\xFCrk\xE7e"},"uk-UA":{label:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430"},"ur-PK":{label:"O\u02BBzbekcha"},"vi-VN":{label:"Ti\u1EBFng Vi\u1EC7t"},"zh-CN":{label:"\u7B80\u4F53\u4E2D\u6587"},"zh-HK":{label:"\u7E41\u9AD4\u4E2D\u6587\uFF08\u9999\u6E2F\uFF09"},"zh-TW":{label:"\u7E41\u9AD4\u4E2D\u6587\uFF08\u53F0\u6E7E\uFF09"}};ae.ZP=c},29245:function(He,ae,e){"use strict";e.d(ae,{f:function(){return E},s:function(){return R}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(5552),C=e(80844),A=e(96486),r=e.n(A),K=e(67294),v=e(26793),j=e(21143),h=e(68091),M=e(91410),n=e(6145),y=e(55642),L=e(90297),o=e(83954),a=e(85893),R=function(){var Q=(0,C.useField)(),z=(0,C.useFieldSchema)(),p=(0,j.useDesignable)(),b=p.dn,f=(0,v.$)(),x=f.t,m=(0,o.R)(),F=m.urlSchema,I=m.paramsSchema,d=m.openInNewWindowSchema,u=z["x-component-props"]||{},l={url:u.url,params:u.params||[{}],openInNewWindow:u.openInNewWindow};return(0,a.jsx)(L.B0,{title:x("Edit link"),components:{ArrayItems:g.ArrayItems},schema:{type:"object",title:x("Edit link"),properties:{url:i()(i()({},F),{},{required:!0}),params:I,openInNewWindow:d}},onSubmit:function(H){var O,N=H.url,t=H.params,B=H.openInNewWindow;u.url=N,u.params=t,u.openInNewWindow=B,z["x-component-props"]=u,Q.componentProps.url=N,Q.componentProps.params=t,Q.componentProps.openInNewWindow=B,b.emit("patch",{schema:(O={},c()(O,"x-uid",z["x-uid"]),c()(O,"x-component-props",u),O)}),b.refresh()},initialValues:l})},E=new M.F({name:"actionSettings:link",items:[{name:"editButton",Component:y.C1,useComponentProps:function(){var Q=(0,h.Po)(),z=Q.buttonEditorProps;return z}},{name:"editLink",Component:R},{name:"linkageRules",Component:L.lc,useVisible:function(){var Q=(0,j.useCollectionRecord)();return!r().isEmpty(Q==null?void 0:Q.data)},useComponentProps:function(){var Q=(0,n.useCollection_deprecated)(),z=Q.name,p=(0,h.Po)(),b=p.linkageRulesProps;return i()(i()({},b),{},{collectionName:z})}},L.U4,{name:"remove",sort:100,Component:y.xZ,useComponentProps:function(){var Q=(0,h.Po)(),z=Q.removeButtonProps;return z}}]})},83954:function(He,ae,e){"use strict";e.d(ae,{M:function(){return y},R:function(){return L}});var Z=e(68400),c=e.n(Z),k=e(97857),i=e.n(k),g=e(97133),C=e(80844),A=e(67294),r=e(26793),K=e(7340),v=e(36586),j=e(91053),h=e(54885),M=e(85893),n,y=function(a){return function(R){var E=(0,C.useFieldSchema)(),$=(0,K.bz)(),Q=$.form,z=(0,v.a)(),p=(0,h.Y)({collectionField:{uiSchema:E},form:Q,record:z,uiSchema:E,noDisabled:!0});return(0,M.jsx)(a,i()(i()({},R),{},{scope:p}))}},L=function(){var a=(0,r.$)(),R=a.t,E=(0,A.useMemo)(function(){return y(j._w.TextArea)},[]),$=(0,A.useMemo)(function(){return{title:R("URL"),type:"string","x-decorator":"FormItem","x-component":E,description:R("Do not concatenate search params in the URL"),"x-reactions":{dependencies:["mode"],fulfill:{state:{hidden:'{{$deps[0] === "html"}}'}}}}},[R,E]),Q=(0,A.useMemo)(function(){return{title:'{{t("Mode")}}',"x-component":"Radio.Group","x-decorator":"FormItem",default:"url",enum:[{value:"url",label:R("URL")},{value:"html",label:R("HTML")}]}},[R]),z=(0,A.useMemo)(function(){return{title:R("html"),type:"string","x-decorator":"FormItem","x-component":y(j._w.RawTextArea),"x-component-props":{rows:10},"x-reactions":{dependencies:["mode"],fulfill:{state:{hidden:'{{$deps[0] === "url"}}'}}}}},[R]),p=(0,A.useMemo)(function(){return{type:"array","x-component":"ArrayItems","x-decorator":"FormItem",title:'{{t("Search parameters")}}',items:{type:"object",properties:{space:{type:"void","x-component":"Space","x-component-props":{style:{flexWrap:"nowrap",maxWidth:"100%"},className:(0,g.css)(n||(n=c()([`
                & > .ant-space-item:first-child,
                & > .ant-space-item:last-child {
                  flex-shrink: 0;
                }
              `])))},properties:{name:{type:"string","x-decorator":"FormItem","x-component":"Input","x-component-props":{placeholder:'{{t("Name")}}'}},value:{type:"string","x-decorator":"FormItem","x-component":E,"x-component-props":{placeholder:'{{t("Value")}}',useTypedConstant:!0,changeOnSelect:!0}},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},"x-reactions":{dependencies:["mode"],fulfill:{state:{hidden:'{{$deps[0] === "html"}}'}}},properties:{add:{type:"void",title:'{{t("Add parameter")}}',"x-component":"ArrayItems.Addition"}}}},[E]),b=(0,A.useMemo)(function(){return{type:"boolean","x-content":R("Open in new window"),"x-decorator":"FormItem","x-component":"Checkbox","x-reactions":{dependencies:["mode"],fulfill:{state:{hidden:'{{$deps[0] === "html"}}'}}}}},[R]);return{urlSchema:$,paramsSchema:p,openInNewWindowSchema:b,modeSchema:Q,htmlSchema:z}}},85711:function(He,ae,e){"use strict";e.d(ae,{J:function(){return Q},L:function(){return z}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(5574),C=e.n(g),A=e(80844),r=e(20863),K=e(67294),v=e(26793),j=e(68091),h=e(91410),M=e(6145),n=e(62954),y=e(55642),L=e(77517),o=e(62662),a=e(73691),R=e(94804),E=e(85893),$=(0,A.connect)(r.Z,(0,A.mapProps)(function(p,b){(0,K.useEffect)(function(){b.value=p.defaultCheckedKeys||[]},[]);var f=(0,K.useState)(p.defaultCheckedKeys||[]),x=C()(f,2),m=x[0],F=x[1],I=function(u){F(u),b.value=u};return b.onCheck=I,i()(i()({},p),{},{checkedKeys:m,onCheck:I})}));function Q(){var p=(0,n.ngQ)(),b=p.dn,f=(0,v.$)(),x=f.t,m=(0,A.useField)(),F=(0,A.useFieldSchema)(),I=(0,M.useCollection_deprecated)(),d=I.name,u=(0,L.I)(d,!1,function(H){return["belongsTo","belongsToMany","hasOne","hasMany"].includes(H.type)}),l=u.getEnableFieldTree,S=u.getOnLoadData;return(0,E.jsx)(o.j0,{title:x("Save mode"),components:{Tree:$},scope:{getEnableFieldTree:l,name:d,getOnLoadData:S},schema:{type:"object",title:x("Save mode"),properties:{saveMode:{"x-decorator":"FormItem","x-component":"Radio.Group",default:m.componentProps.saveMode||"create",enum:[{value:"create",label:'{{t("Insert")}}'},{value:"firstOrCreate",label:'{{t("Insert if not exists")}}'},{value:"updateOrCreate",label:'{{t("Insert if not exists, or update")}}'}]},filterKeys:{type:"array",title:'{{ t("Determine whether a record exists by the following fields") }}',required:!0,default:m.componentProps.filterKeys,"x-decorator":"FormItem","x-component":"Tree","x-component-props":{treeData:[],checkable:!0,checkStrictly:!0,selectable:!1,loadData:"{{ getOnLoadData($self) }}",defaultCheckedKeys:m.componentProps.filterKeys,rootStyle:{padding:"8px 0",border:"1px solid #d9d9d9",borderRadius:"2px",maxHeight:"30vh",overflow:"auto",margin:"2px 0"}},"x-reactions":[{dependencies:[".saveMode"],fulfill:{state:{hidden:'{{ $deps[0]==="create"}}',componentProps:{treeData:"{{ getEnableFieldTree(name, $self) }}"}}}}]}}},onSubmit:function(O){var N,t=O.saveMode,B=O.filterKeys;m.componentProps.saveMode=t,m.componentProps.filterKeys=B,F["x-component-props"]=F["x-component-props"]||{},F["x-component-props"].saveMode=t,F["x-component-props"].filterKeys=B,b.emit("patch",{schema:(N={},c()(N,"x-uid",F["x-uid"]),c()(N,"x-component-props",i()({},F["x-component-props"])),N)}),b.refresh()}})}var z=new h.F({name:"actionSettings:createSubmit",items:[{name:"editButton",Component:y.C1,useComponentProps:function(){var b=(0,j.Po)(),f=b.buttonEditorProps;return f}},{name:"secondConfirmation",Component:y.y0},{name:"saveMode",Component:Q,useVisible:function(){var b=(0,R.zh)()||{},f=b.type;return f!=="publicForm"}},{name:"assignFieldValues",Component:y.eY},{name:"skipRequiredValidation",Component:y.co},{name:"afterSuccessfulSubmission",Component:y.$b,useVisible:function(){var b=(0,R.zh)()||{},f=b.type;return f!=="publicForm"}},{name:"refreshDataBlockRequest",Component:y.x1,useComponentProps:function(){return{isPopupAction:!1}},useVisible:function(){var b=(0,a.ec)();return!!b}},{name:"remove",sort:100,Component:y.xZ,useComponentProps:function(){var b=(0,j.Po)(),f=b.removeButtonProps;return f}}]})},16966:function(He,ae,e){"use strict";e.d(ae,{A:function(){return n},G:function(){return M}});var Z=e(97857),c=e.n(Z),k=e(5574),i=e.n(k),g=e(67294),C=e(26793),A=e(94804),r=e(58837),K=e(62954),v=e(50679),j=e(15195),h=e(85893),M=function(L){var o=(0,C.$)(),a=o.t,R=(0,A.d9)(),E=(0,r.Kx)()||{},$=E.name,Q=E.title,z=(0,j.zy)(),p=(0,A.zh)()||{},b=p.association,f=p.collection,x=(0,K.eJW)();if(b){var m=b.split("."),F=i()(m,1),I=F[0],d=R.getCollection(I),u=d.name,l=d.title;$=u,Q=l}var S=R.getCollectionField(b),H=R.getCollection(f||(S==null?void 0:S.target)),O=["FormItem","ReadPrettyFormItem"].includes(z==null?void 0:z.componentName)?"".concat(z==null?void 0:z.name," ").concat(a("(Fields only)")):z==null?void 0:z.name,N=(0,g.useMemo)(function(){return[n({collectionTitle:Q,collectionName:$,associationField:S,associationCollection:H,compile:x}),O].filter(Boolean)},[Q,$,S,H,x,O]);return(0,h.jsx)(v.Mf,c()({title:N},L))};function n(y){var L=y.collectionTitle,o=y.collectionName,a=y.associationField,R=y.compile,E=y.associationCollection;if(a){var $;return"".concat(R(L||o)," > ").concat(R((($=a.uiSchema)===null||$===void 0?void 0:$.title)||a.name)," (").concat(R((E==null?void 0:E.title)||(E==null?void 0:E.name)),")")}return R(L||o)}},86693:function(He,ae,e){"use strict";e.d(ae,{l:function(){return g}});var Z=e(97857),c=e.n(Z),k=e(67294),i=e(12929),g=function(A){var r=A.params,K=(0,i.v)({filterOption:r==null?void 0:r.filter}),v=K.filter,j=K.parseVariableLoading,h=(0,k.useMemo)(function(){return c()(c()({},r),{},{filter:v})},[JSON.stringify(v)]);return{params:h,parseVariableLoading:j}}},21109:function(He,ae,e){"use strict";e.d(ae,{e:function(){return k}});var Z=e(92700),c=e(86693);function k(i){var g,C=(0,c.l)(i),A=C.params,r=C.parseVariableLoading;return i.association&&(g=(0,Z._)(i.association)),{parentRecord:g,params:A,parseVariableLoading:r}}},31793:function(He,ae,e){"use strict";e.d(ae,{t:function(){return c}});var Z=e(35964);function c(){return(0,Z.BX)()}},4277:function(He,ae,e){"use strict";e.d(ae,{jI:function(){return L},tU:function(){return y},wq:function(){return n}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(80844),C=e(96486),A=e.n(C),r=e(67294),K=e(26793),v=e(94804),j=e(62954),h=e(90297),M=e(85893),n={name:"setDataLoadingMode",Component:L};function y(){var o=(0,v.zh)()||{},a=o.dataLoadingMode;return a||"auto"}function L(){var o,a=(0,j.ngQ)(),R=a.dn,E=(0,K.$)(),$=E.t,Q=(0,g.useField)(),z=(0,g.useFieldSchema)(),p=(0,v.Kx)(),b=(0,h.IO)(p==null?void 0:p.name),f=b.getEnableFieldTree,x=b.getOnLoadData,m=(0,v.Pt)(),F=m.getDataBlockRequest;return(0,M.jsx)(h.B0,{title:$("Set data loading mode"),scope:{getEnableFieldTree:f,name:p==null?void 0:p.name,getOnLoadData:x},schema:{type:"object",title:$("Data loading mode"),properties:{dataLoadingMode:{"x-decorator":"FormItem","x-component":"Radio.Group",default:((o=z["x-decorator-props"])===null||o===void 0?void 0:o.dataLoadingMode)||"auto",enum:[{value:"auto",label:$("Load all data when filter is empty")},{value:"manual",label:$("Do not load data when filter is empty")}]}}},onSubmit:function(d){var u,l=d.dataLoadingMode,S=F();A().set(z,"x-decorator-props.dataLoadingMode",l),Q.decoratorProps.dataLoadingMode=l,R.emit("patch",{schema:(u={},c()(u,"x-uid",z["x-uid"]),c()(u,"x-decorator-props",i()({},z["x-decorator-props"])),u)}),R.refresh(),l==="auto"?S.run():S.mutate(void 0)}})}},80159:function(He,ae,e){"use strict";e.d(ae,{d:function(){return i},j:function(){return g}});var Z=e(80844),c=e(75148),k=e(49834);function i(C){var A=(0,c.MM)(C),r;return C.association&&(r=g(C.association)),{params:A,parentRecord:r}}function g(C){var A=(0,Z.useFieldSchema)(),r=(0,k.nE)(),K=(0,k.Kv)();if(C)return A["x-is-current"]?K:r}},95216:function(He,ae,e){"use strict";e.d(ae,{o:function(){return c}});var Z=e(35964);function c(){return(0,Z.BX)()}},12445:function(He,ae,e){"use strict";e.d(ae,{J:function(){return v},k:function(){return j}});var Z=e(97857),c=e.n(Z),k=e(53555),i=e(67294),g=e(68091),C=e(19271),A=e(61818),r=e(58590),K=e(85893),v=function(M){var n=M.filterCollections,y=M.onlyCurrentDataSource,L=M.hideSearch,o=M.createBlockSchema,a=M.componentType,R=a===void 0?"FormItem":a,E=M.templateWrap,$=M.showAssociationFields,Q=M.hideChildrenIfSingleCollection,z=M.hideOtherRecordsInPopup,p=M.currentText,b=M.otherText,f=(0,g.UR)(),x=j(),m=x.createFormBlock,F=x.templateWrap,I=(0,i.useCallback)(function(u){if(o)return o(u);m(u)},[o,m]),d=(0,i.useCallback)(function(u,l){return E?E(u,l):F(u,l)},[E,F]);return(0,K.jsx)(A.dn,c()(c()({},f),{},{icon:(0,K.jsx)(k.Z,{}),componentType:R,templateWrap:d,onCreateBlockSchema:I,filter:n,onlyCurrentDataSource:y,hideSearch:L,showAssociationFields:$,hideChildrenIfSingleCollection:Q,hideOtherRecordsInPopup:z,currentText:p,otherText:b}))},j=function(){var M=(0,g.q_)(),n=M.insert,y=(0,C.Xo)(),L=(0,g.UR)(),o=L.isCusomeizeCreate,a=(0,i.useCallback)(function(E){var $=E.item,Q=E.fromOthersInPopup;n(Q?(0,r.l)({collectionName:$.collectionName||$.name,dataSource:$.dataSource,isCusomeizeCreate:!0}):(0,r.l)(y?{association:y,dataSource:$.dataSource,isCusomeizeCreate:o}:{collectionName:$.collectionName||$.name,dataSource:$.dataSource,isCusomeizeCreate:o}))},[y,n,o]),R=(0,i.useCallback)(function(E,$){var Q=$.item,z=$.fromOthersInPopup,p;return z?p=(0,r.l)({dataSource:Q.dataSource,templateSchema:E,collectionName:Q.name,isCusomeizeCreate:!0}):p=(0,r.l)(y?{dataSource:Q.dataSource,templateSchema:E,collectionName:Q.name,association:y,isCusomeizeCreate:o}:{dataSource:Q.dataSource,templateSchema:E,collectionName:Q.name,isCusomeizeCreate:o}),Q.template&&Q.mode==="reference"&&(p["x-template-key"]=Q.template.key),p},[y,o]);return{createFormBlock:a,templateWrap:R}}},3169:function(He,ae,e){"use strict";e.d(ae,{O:function(){return C}});var Z=e(97857),c=e.n(Z),k=e(67294),i=e(90297),g=e(85893),C=function(r){return(0,g.jsx)(i.Mf,c()({showBorder:!1,showBackground:!0},r))}},12002:function(He,ae,e){"use strict";e.d(ae,{s:function(){return Q},$:function(){return z}});var Z=e(97857),c=e.n(Z),k=e(15009),i=e.n(k),g=e(99289),C=e.n(g),A=e(13769),r=e.n(A),K=e(53555),v=e(67294),j=e(68091),h=e(6145),M=e(94804),n=e(40341),y=e(15195),L=e(9783),o=e.n(L),a=e(84327);function R(p){var b=p.collectionName,f=p.dataSource,x=p.association,m=p.templateSchema,F=x||b,I=p.isCurrent?{"x-is-current":!0}:{};if(!f)throw new Error("dataSource are required");return c()(c()({type:"void","x-acl-action-props":{skipScopeCheck:!1},"x-acl-action":"".concat(F,":update"),"x-decorator":"FormBlockProvider","x-use-decorator-props":"useEditFormBlockDecoratorProps","x-decorator-props":{action:"get",dataSource:f,collection:b,association:x},"x-toolbar":"BlockSchemaToolbar","x-settings":"blockSettings:editForm","x-component":"CardItem"},I),{},{properties:o()({},(0,a.uid)(),{type:"void","x-component":"FormV2","x-use-component-props":"useEditFormBlockProps",properties:o()({grid:m||{type:"void","x-component":"Grid","x-initializer":"form:configureFields",properties:{}}},(0,a.uid)(),{type:"void","x-initializer":"editForm:configureActions","x-component":"ActionBar","x-component-props":{layout:"one-column"}})})})}var E=e(85893),$=["targetCollection"],Q=function(){var b=(0,j.UR)(),f=b.targetCollection,x=r()(b,$),m=(0,j.q_)(),F=m.insert,I=(0,y.$t)(),d=I.getTemplateSchemaByMode,u=(0,h.useCollection_deprecated)(),l=f||u,S=z(),H=S.createEditFormBlock,O=S.templateWrap;return(0,E.jsx)(j.lV,c()(c()({icon:(0,E.jsx)(K.Z,{})},x),{},{onClick:function(){var N=C()(i()().mark(function t(B){var X,V;return i()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(X=B.item,!X.template){D.next=8;break}return D.next=4,d(X);case 4:V=D.sent,F(O(V,{item:X})),D.next=9;break;case 8:H({item:X});case 9:case"end":return D.stop()}},t)}));return function(t){return N.apply(this,arguments)}}(),items:(0,n.bQ)("FormItem",null,l==null?void 0:l.name)}))};function z(){var p=(0,j.q_)(),b=p.insert,f=(0,M.Xo)(),x=(0,M.d9)(),m=(0,y.rE)(),F=m.componentNamePrefix,I=(0,v.useCallback)(function(u){var l=u.item,S=l.collectionName||l.name,H=x.getCollection(S);b(R(f?{association:f,collectionName:H.isInherited()?S:void 0,dataSource:l.dataSource,isCurrent:!0}:{collectionName:S,dataSource:l.dataSource}))},[f,x,b]),d=(0,v.useCallback)(function(u,l){var S=l.item;if(S.template.componentName==="".concat(F,"FormItem")){var H=S.collectionName||S.name,O=x.getCollection(H),N=R(f?{association:f,collectionName:O.isInherited()?H:void 0,dataSource:S.dataSource,templateSchema:u,isCurrent:!0}:{collectionName:H,dataSource:S.dataSource,templateSchema:u});return S.mode==="reference"&&(N["x-template-key"]=S.template.key),N}else return u},[f,x,F]);return{createEditFormBlock:I,templateWrap:d}}},58590:function(He,ae,e){"use strict";e.d(ae,{l:function(){return i}});var Z=e(9783),c=e.n(Z),k=e(84327);function i(g){var C=g.collectionName,A=g.association,r=g.dataSource,K=g.templateSchema,v=g.isCusomeizeCreate,j=A||C;if(!r)throw new Error("dataSource are required");var h={type:"void","x-acl-action-props":{skipScopeCheck:!0},"x-acl-action":"".concat(j,":create"),"x-decorator":"FormBlockProvider","x-use-decorator-props":"useCreateFormBlockDecoratorProps","x-decorator-props":{dataSource:r,collection:C,association:A,isCusomeizeCreate:v},"x-toolbar":"BlockSchemaToolbar","x-settings":"blockSettings:createForm","x-component":"CardItem",properties:c()({},(0,k.uid)(),{type:"void","x-component":"FormV2","x-use-component-props":"useCreateFormBlockProps",properties:c()({grid:K||{type:"void","x-component":"Grid","x-initializer":"form:configureFields",properties:{}}},(0,k.uid)(),{type:"void","x-initializer":"createForm:configureActions","x-component":"ActionBar","x-component-props":{layout:"one-column"}})})};return h}},73377:function(He,ae,e){"use strict";e.d(ae,{$:function(){return C},n:function(){return A}});var Z=e(97857),c=e.n(Z),k=e(3806),i=e(94804),g={title:'{{t("Configure actions")}}',icon:"SettingOutlined",items:[{name:"submit",title:'{{t("Submit")}}',Component:"CreateSubmitActionInitializer",schema:{"x-action-settings":{}}},{name:"customRequest",title:'{{t("Custom request")}}',Component:"CustomRequestInitializer",useVisible:function(){var K=(0,i.zh)()||{},v=K.type;return v!=="publicForm"}}]},C=new k.n(c()({name:"CreateFormActionInitializers"},g)),A=new k.n(c()({name:"createForm:configureActions"},g),C)},19298:function(He,ae,e){"use strict";e.d(ae,{K:function(){return j}});var Z=e(80844),c=e(91410),k=e(7340),i=e(6145),g=e(58837),C=e(90297),A=e(28561),r=e(25750),K=e(23461),v=e(81432),j=new c.F({name:"blockSettings:createForm",items:[{name:"title",Component:r._},{name:"setTheBlockHeight",Component:A.q},{name:"linkageRules",Component:C.lc,useComponentProps:function(){var M=(0,i.useCollection_deprecated)(),n=M.name;return{collectionName:n}}},{name:"dataTemplates",Component:C.ON,useVisible:function(){var M=(0,k.bz)(),n=M.action,y=(0,Z.useFieldSchema)();return!n&&(y==null?void 0:y["x-acl-action"].includes("create"))},useComponentProps:function(){var M=(0,i.useCollection_deprecated)(),n=M.name;return{collectionName:n}}},{name:"divider",type:"divider"},{name:"formItemTemplate",Component:C.vC,useComponentProps:function(){var M,n,y=(0,K.rE)(),L=y.componentNamePrefix,o=(0,g.Kx)(),a=o.name,R=(0,Z.useFieldSchema)(),E=(R==null||(M=R["x-decorator-props"])===null||M===void 0?void 0:M.resource)||(R==null||(n=R["x-decorator-props"])===null||n===void 0?void 0:n.association);return{componentName:"".concat(L,"FormItem"),collectionName:a,resourceName:E}}},{name:"setBlockLayout",Component:v.J},{name:"divider2",type:"divider"},{name:"remove",type:"remove",componentProps:{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}]})},35441:function(He,ae,e){"use strict";e.d(ae,{r:function(){return j}});var Z=e(80844),c=e(91410),k=e(7340),i=e(6145),g=e(58837),C=e(90297),A=e(28561),r=e(25750),K=e(23461),v=e(81432),j=new c.F({name:"blockSettings:editForm",items:[{name:"title",Component:r._},{name:"setTheBlockHeight",Component:A.q},{name:"linkageRules",Component:C.lc,useComponentProps:function(){var M=(0,i.useCollection_deprecated)(),n=M.name;return{collectionName:n}}},{name:"dataTemplates",Component:C.ON,useVisible:function(){var M=(0,k.bz)(),n=M.action;return!n},useComponentProps:function(){var M=(0,i.useCollection_deprecated)(),n=M.name;return{collectionName:n}}},{name:"divider",type:"divider"},{name:"formItemTemplate",Component:C.vC,useComponentProps:function(){var M,n,y=(0,K.rE)(),L=y.componentNamePrefix,o=(0,g.Kx)(),a=o.name,R=(0,Z.useFieldSchema)(),E=(R==null||(M=R["x-decorator-props"])===null||M===void 0?void 0:M.resource)||(R==null||(n=R["x-decorator-props"])===null||n===void 0?void 0:n.association);return{componentName:"".concat(L,"FormItem"),collectionName:a,resourceName:E}}},{name:"setBlockLayout",Component:v.J},{name:"divider2",type:"divider"},{name:"remove",type:"remove",componentProps:{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}]})},29760:function(He,ae,e){"use strict";e.d(ae,{d:function(){return m}});var Z=e(96695),c=e.n(Z),k=e(9783),i=e.n(k),g=e(97857),C=e.n(g),A=e(5552),r=e(80844),K=e(96486),v=e.n(K),j=e(67294),h=e(26793),M=e(68091),n=e(91410),y=e(7340),L=e(6145),o=e(56318),a=e(94804),R=e(22558),E=e(62954),$=e(38752),Q=e(90297),z=e(29124),p=e(22229),b=e(4595),f=e(21774),x=e(85893),m=new n.F({name:"fieldSettings:FormItem",items:[{name:"decoratorOptions",type:"itemGroup",hideIfNoChildren:!0,useComponentProps:function(){var I=(0,h.$)(),d=I.t;return{title:d("Generic properties")}},useChildren:function(){return[{name:"editFieldTitle",type:"modal",useComponentProps:function(){var d,u=(0,h.$)(),l=u.t,S=(0,E.ngQ)(),H=S.dn,O=(0,r.useField)(),N=(0,r.useFieldSchema)(),t=(0,E.eJW)(),B=(0,L.useCollectionManager_deprecated)(),X=B.getCollectionJoinField,V=(0,L.useCollection_deprecated)(),U=V.getField,D=U(N.name)||X(N["x-collection-field"]);return{title:l("Edit field title"),schema:{type:"object",title:l("Edit field title"),properties:{title:{title:l("Field title"),default:O==null?void 0:O.title,description:"".concat(l("Original field title: ")).concat(D==null||(d=D.uiSchema)===null||d===void 0?void 0:d.title),"x-decorator":"FormItem","x-component":"Input","x-component-props":{}}}},onSubmit:function(q){var J,Y=q.title,P=Y.trim()===""?D==null||(J=D.uiSchema)===null||J===void 0?void 0:J.title:Y;O.title=t(P),N.title=P,H.emit("patch",{schema:{"x-uid":N["x-uid"],title:N.title}}),H.refresh()}}}},{name:"displayTitle",type:"switch",useComponentProps:function(){var d,u=(0,h.$)(),l=u.t,S=(0,E.ngQ)(),H=S.dn,O=(0,r.useField)(),N=(0,r.useFieldSchema)();return{title:l("Display title"),checked:(d=O.decoratorProps.showTitle)!==null&&d!==void 0?d:!0,onChange:function(B){N["x-decorator-props"]=N["x-decorator-props"]||{},N["x-decorator-props"].showTitle=B,O.decoratorProps.showTitle=B,H.emit("patch",{schema:{"x-uid":N["x-uid"],"x-decorator-props":C()(C()({},N["x-decorator-props"]),{},{showTitle:B})}}),H.refresh()}}}},{name:"editDescription",type:"modal",useComponentProps:function(){var d=(0,h.$)(),u=d.t,l=(0,E.ngQ)(),S=l.dn,H=(0,r.useField)(),O=(0,r.useFieldSchema)();return{title:u("Edit description"),schema:{type:"object",title:u("Edit description"),properties:{description:{default:H==null?void 0:H.description,"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}},onSubmit:function(t){var B=t.description;H.description=B,O.description=B,S.emit("patch",{schema:{"x-uid":O["x-uid"],description:O.description}})}}}},{name:"editTooltip",type:"modal",useComponentProps:function(){var d,u=(0,h.$)(),l=u.t,S=(0,E.ngQ)(),H=S.dn,O=(0,r.useField)(),N=(0,r.useFieldSchema)();return{title:l("Edit tooltip"),schema:{type:"object",title:l("Edit tooltip"),properties:{tooltip:{default:N==null||(d=N["x-decorator-props"])===null||d===void 0?void 0:d.tooltip,"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}},onSubmit:function(B){var X=B.tooltip;O.decoratorProps.tooltip=X,N["x-decorator-props"]=N["x-decorator-props"]||{},N["x-decorator-props"].tooltip=X,H.emit("patch",{schema:{"x-uid":N["x-uid"],"x-decorator-props":N["x-decorator-props"]}}),H.refresh()}}}},{name:"required",type:"switch",useVisible:function(){var d=(0,r.useField)(),u=(0,r.useFieldSchema)(),l=(0,M.Po)(),S=l.required,H=S===void 0?!0:S;return!d.readPretty&&u["x-component"]!=="FormField"&&H},useComponentProps:function(){var d=(0,h.$)(),u=d.t,l=(0,r.useField)(),S=(0,r.useFieldSchema)(),H=(0,E.ngQ)(),O=H.dn,N=H.refresh;return{title:u("Required"),checked:l.required,onChange:function(B){var X=i()({},"x-uid",S["x-uid"]);l.required=B,S.required=B,X.required=B,O.emit("patch",{schema:X}),N()}}}},{name:"setDefaultValue",useVisible:function(){var d=(0,z.SF)(),u=d.isAllowToSetDefaultValue;return u()},Component:f.N},{name:"pattern",type:"select",useVisible:function(){var d=(0,y.bz)(),u=d.form,l=(0,r.useFieldSchema)();return u&&!(u!=null&&u.readPretty)&&!(0,Q.VZ)(l)},useComponentProps:function(){var d=(0,h.$)(),u=d.t,l=(0,r.useField)(),S=(0,r.useFieldSchema)(),H=(0,E.ngQ)(),O=H.dn,N="editable";return S["x-disabled"]===!0&&(N="readonly"),S["x-read-pretty"]===!0&&(N="read-pretty"),{title:u("Pattern"),options:[{label:u("Editable"),value:"editable"},{label:u("Readonly"),value:"readonly"},{label:u("Easy-reading"),value:"read-pretty"}],value:N,onChange:function(B){var X=i()({},"x-uid",S["x-uid"]);switch(B){case"readonly":{S["x-read-pretty"]=!1,S["x-disabled"]=!0,X["x-read-pretty"]=!1,X["x-disabled"]=!0,l.readPretty=!1,l.disabled=!0,v().set(l,"initStateOfLinkageRules.pattern",(0,p.TF)(!0,b.Us.ReadOnly));break}case"read-pretty":{S["x-read-pretty"]=!0,S["x-disabled"]=!1,X["x-read-pretty"]=!0,X["x-disabled"]=!1,l.readPretty=!0,v().set(l,"initStateOfLinkageRules.pattern",(0,p.TF)(!0,b.Us.ReadPretty));break}default:{S["x-read-pretty"]=!1,S["x-disabled"]=!1,X["x-read-pretty"]=!1,X["x-disabled"]=!1,l.readPretty=!1,l.disabled=!1,v().set(l,"initStateOfLinkageRules.pattern",(0,p.TF)(!0,b.Us.Editable));break}}O.emit("patch",{schema:X}),O.refresh()}}}},{name:"setValidationRules",type:"modal",useComponentProps:function(){var d=(0,h.$)(),u=d.t,l=(0,r.useField)(),S=(0,r.useFieldSchema)(),H=(0,E.ngQ)(),O=H.dn,N=H.refresh,t=(0,E.q4O)(),B=(0,L.useCollectionManager_deprecated)(),X=B.getCollectionJoinField,V=(0,L.useCollection_deprecated)(),U=V.getField,D=U(S.name)||X(S["x-collection-field"]),ne=function(J){return J!=null&&!Number.isNaN(J)};return{title:u("Set validation rules"),components:{ArrayCollapse:A.ArrayCollapse,FormLayout:A.FormLayout},schema:{type:"object",title:u("Set validation rules"),properties:{rules:{type:"array",default:S==null?void 0:S["x-validator"],"x-component":"ArrayCollapse","x-decorator":"FormItem","x-component-props":{accordion:!0},maxItems:3,items:{type:"object","x-component":"ArrayCollapse.CollapsePanel","x-component-props":{header:'{{ t("Validation rule") }}'},properties:{index:{type:"void","x-component":"ArrayCollapse.Index"},layout:{type:"void","x-component":"FormLayout","x-component-props":{labelStyle:{marginTop:"6px"},labelCol:8,wrapperCol:16},properties:C()(C()({},t),{},{message:{type:"string",title:'{{ t("Error message") }}',"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{autoSize:{minRows:2,maxRows:2}}}})},remove:{type:"void","x-component":"ArrayCollapse.Remove"},moveUp:{type:"void","x-component":"ArrayCollapse.MoveUp"},moveDown:{type:"void","x-component":"ArrayCollapse.MoveDown"}}},properties:{add:{type:"void",title:'{{ t("Add validation rule") }}',"x-component":"ArrayCollapse.Addition","x-reactions":{dependencies:["rules"],fulfill:{state:{disabled:"{{$deps[0].length >= 3}}"}}}}}}}},onSubmit:function(J){var Y,P=[],w=c()(J.rules),ie;try{for(w.s();!(ie=w.n()).done;){var G=ie.value;P.push(v().pickBy(G,ne))}}catch(Se){w.e(Se)}finally{w.f()}var le=i()({},"x-uid",S["x-uid"]);if(["percent"].includes(D==null?void 0:D.interface)){var xe=c()(P),_e;try{for(xe.s();!(_e=xe.n()).done;){var Ee=_e.value;(Ee.maxValue||Ee.minValue)&&(Ee.percentMode=!0),Ee.percentFormat&&(Ee.percentFormats=!0)}}catch(Se){xe.e(Se)}finally{xe.f()}}var ze=v().concat([],(D==null||(Y=D.uiSchema)===null||Y===void 0?void 0:Y["x-validator"])||[],P);l.validator=ze,l.required=S.required,S["x-validator"]=P,le["x-validator"]=P,O.emit("patch",{schema:le}),N()}}},useVisible:function(){var d=(0,y.bz)(),u=d.form,l=(0,$.xj)(),S=(0,E.q4O)();return u&&!l&&S}},{name:"style",Component:function(d){var u=C()(C()({},d),{},{category:"style"});return(0,x.jsx)(Q.lc,C()({},u))},useVisible:function(){var d=(0,$.p3)();return d},useComponentProps:function(){var d=(0,a.Kx)(),u=d.name,l=(0,M.Po)(),S=l.linkageRulesProps;return C()(C()({},S),{},{collectionName:u})}},R.K]}},{name:"componentOptions",type:"itemGroup",hideIfNoChildren:!0,useComponentProps:function(){var I=(0,h.$)(),d=I.t;return{title:d("Specific properties")}},useChildren:function(){var I=(0,M.qD)(),d=(0,o.W)(),u=I.schemaSettingsManager.get("fieldSettings:component:".concat(d));return(u==null?void 0:u.items)||[]}},{name:"divider",type:"divider"},{name:"delete",type:"remove",sort:100,useComponentProps:function(){var I=(0,h.$)(),d=I.t;return{removeParentsIfNoChildren:!0,confirm:{title:d("Delete field")},breakRemoveOn:{"x-component":"Grid"}}}}]})},68942:function(He,ae,e){"use strict";e.d(ae,{v:function(){return c}});var Z=e(43868),c=new Z.e({name:"FormActionInitializers",title:'{{t("Configure actions")}}',icon:"SettingOutlined",items:[{name:"submit",title:'{{t("Submit")}}',Component:"CreateSubmitActionInitializer",schema:{"x-action-settings":{}}},{name:"customRequest",title:'{{t("Custom request")}}',Component:"CustomRequestInitializer"}]})},25616:function(He,ae,e){"use strict";e.d(ae,{A:function(){return r},e:function(){return A}});var Z=e(97857),c=e.n(Z),k=e(3806),i=e(76326),g=e(40341),C={wrap:g.BM,icon:"SettingOutlined",title:'{{t("Configure fields")}}',items:[{type:"itemGroup",name:"displayFields",title:'{{t("Display fields")}}',useChildren:g.I_},{name:"parentCollectionFields",Component:i.cd},{name:"associationFields",Component:i.Pg},{name:"divider",type:"divider"},{name:"addText",title:'{{t("Add Markdown")}}',Component:"MarkdownFormItemInitializer"},{name:"addDivider",title:'{{t("Add group")}}',Component:"DividerFormItemInitializer"}]},A=new k.n(c()({name:"FormItemInitializers"},C)),r=new k.n(c()({name:"form:configureFields"},C),A)},76314:function(He,ae,e){"use strict";e.d(ae,{Z:function(){return g}});var Z=e(49834),c=e(76126),k=e(67174),i=e(29132);function g(){var C=(0,Z.nE)(),A=(0,k.bz)(),r=A.form,K=(0,i.eI)(),v=(0,c.j)({category:"style",formValues:(K==null?void 0:K.formValue)||(r==null?void 0:r.values)||C,form:r}),j=v.valueMap;return{wrapperStyle:j}}},67565:function(He,ae,e){"use strict";e.d(ae,{$G:function(){return g.$},$R:function(){return k.$},Cw:function(){return j.C},Jo:function(){return Z.J},K9:function(){return C.K},Oo:function(){return c.O},SW:function(){return j.S},dV:function(){return r.d},eh:function(){return v.e},ex:function(){return v.A},kQ:function(){return Z.k},lJ:function(){return i.l},nr:function(){return g.n},rB:function(){return A.r},se:function(){return k.s},vR:function(){return K.v}});var Z=e(12445),c=e(3169),k=e(12002),i=e(58590),g=e(73377),C=e(19298),A=e(35441),r=e(29760),K=e(68942),v=e(25616),j=e(56994)},56994:function(He,ae,e){"use strict";e.d(ae,{C:function(){return g},S:function(){return C}});var Z=e(97857),c=e.n(Z),k=e(3806),i={title:'{{t("Configure actions")}}',icon:"SettingOutlined",items:[{name:"submit",title:'{{t("Submit")}}',Component:"UpdateSubmitActionInitializer",schema:{"x-action-settings":{}}},{name:"popup",title:'{{t("Popup")}}',Component:"PopupActionInitializer",useComponentProps:function(){return{"x-component":"Action"}}},{type:"item",name:"customRequest",title:'{{t("Custom request")}}',Component:"CustomRequestInitializer"}]},g=new k.n(c()({name:"UpdateFormActionInitializers"},i)),C=new k.n(c()({name:"editForm:configureActions"},i),g)},89265:function(He,ae,e){"use strict";e.d(ae,{X:function(){return y}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(80844),C=e(96486),A=e.n(C),r=e(67294),K=e(26793),v=e(21305),j=e(43759),h=e(84577),M=e(90297),n=e(85893);function y(){var L=(0,K.$)(),o=L.t,a=(0,g.useFieldSchema)(),R=(0,g.useField)(),E=(0,h.ng)(),$=E.dn,Q=R.decoratorProps.columnCount||j.he,z=(0,r.useMemo)(function(){return{"x-component":"Slider","x-decorator":"FormItem","x-component-props":{min:1,max:24,marks:v.V,tooltip:{formatter:function(f){return"".concat(f).concat(o("Column"))}},step:null}}},[o]),p=(0,r.useMemo)(function(){return j.FR.reduce(function(b,f){return b[f]=i()(i()({},z),{},{title:o(j.wl[f]),description:"".concat(o("Screen size")," ").concat(j.UY[f]," ").concat(o("pixels"))}),b},{})},[z,o]);return(0,n.jsx)(M.B0,{title:o("Set the count of columns displayed in a row"),initialValues:Q,schema:{type:"object",title:o("Set the count of columns displayed in a row"),properties:p},onSubmit:function(f){var x;A().set(a,"x-decorator-props.columnCount",f),R.decoratorProps.columnCount=f,$.emit("patch",{schema:(x={},c()(x,"x-uid",a["x-uid"]),c()(x,"x-decorator-props",a["x-decorator-props"]),x)})}})}},20046:function(He,ae,e){"use strict";e.d(ae,{s:function(){return g}});var Z=e(97857),c=e.n(Z),k=e(67294),i=e(12929);function g(C){var A=C.params,r=(0,i.v)({filterOption:A==null?void 0:A.filter}),K=r.filter,v=r.parseVariableLoading,j=(0,k.useMemo)(function(){return c()(c()({},A),{},{filter:K})},[K,A]);return{params:j,parseVariableLoading:v}}},38889:function(He,ae,e){"use strict";e.d(ae,{S:function(){return R}});var Z=e(97857),c=e.n(Z),k=e(15009),i=e.n(k),g=e(99289),C=e.n(g),A=e(13769),r=e.n(A),K=e(53555),v=e(67294),j=e(6145),h=e(9783),M=e.n(h),n=e(84327),y=function($){var Q,z=$.collectionName,p=$.dataSource,b=$.rowKey;if(!z||!p||!b)throw new Error("collectionName, dataSource, rowKey is required");return{type:"void","x-acl-action":"".concat(z,":list"),"x-decorator":"TableSelectorProvider","x-use-decorator-props":"useTableSelectorDecoratorProps","x-decorator-props":{collection:z,dataSource:p,action:"list",params:{pageSize:20},rowKey:b},"x-toolbar":"BlockSchemaToolbar","x-settings":"blockSettings:tableSelector","x-component":"CardItem",properties:(Q={},M()(Q,(0,n.uid)(),{type:"void","x-initializer":"table:configureActions","x-component":"ActionBar","x-component-props":{style:{marginBottom:"var(--nb-spacing)"}}}),M()(Q,"value",{type:"array","x-initializer":"table:configureColumns","x-component":"TableV2.Selector","x-use-component-props":"useTableSelectorProps","x-component-props":{rowSelection:{type:"checkbox"}}}),Q)}},L=e(68091),o=e(85893),a=["onCreateBlockSchema","componentType","createBlockSchema"],R=function(){var $=(0,L.UR)(),Q=$.onCreateBlockSchema,z=$.componentType,p=$.createBlockSchema,b=r()($,a),f=(0,L.q_)(),x=f.insert,m=(0,j.useCollection_deprecated)();return(0,o.jsx)(L.lV,c()(c()({icon:(0,o.jsx)(K.Z,{})},b),{},{onClick:C()(i()().mark(function F(){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:x(y({rowKey:m.filterTargetKey,collectionName:m.name,dataSource:m.dataSource}));case 1:case"end":return d.stop()}},F)}))}))}},75145:function(He,ae,e){"use strict";e.d(ae,{S:function(){return Z.S},v:function(){return c.v}});var Z=e(38889),c=e(67718)},67718:function(He,ae,e){"use strict";e.d(ae,{v:function(){return a}});var Z=e(97857),c=e.n(Z),k=e(9783),i=e.n(k),g=e(5552),C=e(80844),A=e(96486),r=e.n(A),K=e(67294),v=e(26793),j=e(91410),h=e(67174),M=e(7340),n=e(6145),y=e(62954),L=e(43319),o=e(4277),a=new j.F({name:"blockSettings:tableSelector",items:[{name:"SetTheDataScope",Component:L.H,useComponentProps:function(){var E,$=(0,n.useCollection_deprecated)(),Q=$.name,z=(0,C.useField)(),p=(0,C.useFieldSchema)(),b=(0,M.bz)(),f=b.form,x=(0,h.CL)(),m=x.service,F=x.extraFilter,I=(0,y.ngQ)(),d=I.dn,u=(0,o.tU)(),l=(0,K.useCallback)(function(S){var H,O=S.filter;O=(0,y.WmO)(O);var N=z.decoratorProps.params||{};N.filter=O,z.decoratorProps.params=N,p["x-decorator-props"].params=N;var t=(0,A.cloneDeep)(O);F&&(t?t={$and:[F,t]}:t=F),d.emit("patch",{schema:(H={},i()(H,"x-uid",p["x-uid"]),i()(H,"x-decorator-props",p["x-decorator-props"]),H)})},[z.decoratorProps,p,F,u,d,m]);return{collectionName:Q,defaultFilter:(p==null||(E=p["x-decorator-props"])===null||E===void 0||(E=E.params)===null||E===void 0?void 0:E.filter)||{},form:f,onSubmit:l}}},{name:"treeTable",type:"switch",useComponentProps:function(){var E=(0,C.useField)(),$=(0,C.useFieldSchema)(),Q=(0,h.CL)(),z=Q.service,p=(0,v.$)(),b=p.t,f=(0,y.ngQ)(),x=f.dn;return{title:b("Tree table"),defaultChecked:!0,checked:E.decoratorProps.treeTable,onChange:function(F){var I;E.form.clearFormGraph("".concat(E.address,".*")),E.decoratorProps.treeTable=F,$["x-decorator-props"].treeTable=F;var d=c()(c()({},(I=z.params)===null||I===void 0?void 0:I[0]),{},{tree:F?!0:null});x.emit("patch",{schema:$}),x.refresh(),z.run(d)}}},useVisible:function(){var E=(0,n.useCollectionManager_deprecated)(),$=E.getCollectionJoinField,Q=(0,C.useFieldSchema)(),z=(0,n.useCollection_deprecated)(),p=(0,h.zA)(Q,"CollectionField"),b=$(p==null?void 0:p["x-collection-field"]);return(z==null?void 0:z.tree)&&(b==null?void 0:b.target)===(b==null?void 0:b.collectionName)}},{name:"SetDefaultSortingRules",type:"modal",useComponentProps:function(){var E,$=(0,n.useCollection_deprecated)(),Q=$.name,z=(0,C.useField)(),p=(0,C.useFieldSchema)(),b=(0,n.useSortFields)(Q),f=(0,h.CL)(),x=f.service,m=(0,v.$)(),F=m.t,I=(0,y.ngQ)(),d=I.dn,u=(p==null||(E=p["x-decorator-props"])===null||E===void 0||(E=E.params)===null||E===void 0?void 0:E.sort)||[],l=u==null?void 0:u.map(function(S){return S.startsWith("-")?{field:S.substring(1),direction:"desc"}:{field:S,direction:"asc"}});return{title:F("Set default sorting rules"),components:{ArrayItems:g.ArrayItems},schema:{type:"object",title:F("Set default sorting rules"),properties:{sort:{type:"array",default:l,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:b,required:!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:F("ASC"),value:"asc"},{label:F("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:F("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function(H){var O,N,t=H.sort,B=t.map(function(V){return V.direction==="desc"?"-".concat(V.field):V.field}),X=z.decoratorProps.params||{};X.sort=B,z.decoratorProps.params=X,p["x-decorator-props"].params=X,d.emit("patch",{schema:(O={},i()(O,"x-uid",p["x-uid"]),i()(O,"x-decorator-props",p["x-decorator-props"]),O)}),x.run(c()(c()({},(N=x.params)===null||N===void 0?void 0:N[0]),{},{sort:B}))}}},useVisible:function(){var E=(0,C.useField)(),$=E.decoratorProps.dragSort;return!$}},o.wq,{name:"RecordsPerPage",type:"select",useComponentProps:function(){var E,$=(0,C.useField)(),Q=(0,C.useFieldSchema)(),z=(0,h.CL)(),p=z.service,b=(0,v.$)(),f=b.t,x=(0,y.ngQ)(),m=x.dn;return{title:f("Records per page"),value:((E=$.decoratorProps)===null||E===void 0||(E=E.params)===null||E===void 0?void 0:E.pageSize)||20,options:[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100},{label:"200",value:200}],onChange:function(I){var d,u,l=$.decoratorProps.params||{};l.pageSize=I,$.decoratorProps.params=l,Q["x-decorator-props"].params=l,p.run(c()(c()({},(d=p.params)===null||d===void 0?void 0:d[0]),{},{pageSize:I,page:1})),m.emit("patch",{schema:(u={},i()(u,"x-uid",Q["x-uid"]),i()(u,"x-decorator-props",Q["x-decorator-props"]),u)})}}}},{name:"divider",type:"divider"},{name:"delete",type:"remove",useComponentProps:function(){return{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}}]})},61403:function(He,ae,e){"use strict";e.d(ae,{Rp:function(){return m},Xe:function(){return x},ez:function(){return p},rI:function(){return b}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(13769),C=e.n(g),A=e(38308),r=e(80844),K=e(96486),v=e.n(K),j=e(67294),h=e(26793),M=e(12174),n=e(3806),y=e(916),L=e(7849),o=e(5346),a=e(94804),R=e(62954),E=e(69054),$=e(57086),Q=e(85893),z=["children","onClick"],p=function(){var I,d=(0,h.$)(),u=d.t,l=(0,R.ngQ)(),S=l.dn,H=(0,r.useFieldSchema)();return(0,Q.jsx)(y.H,{title:u("Column width"),component:j.forwardRef(function(O,N){var t=O.children,B=O.onClick,X=C()(O,z);return(0,Q.jsx)(L.l,i()(i()({ref:N,onClick:function(U){var D=U.event;B(D)}},X),{},{title:u("Column width")}))}),schema:{type:"object",title:u("Column width"),properties:{width:{"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{},default:(H==null||(I=H["x-component-props"])===null||I===void 0?void 0:I.width)||100}}},onSubmit:function(N){var t=N.width,B=H["x-component-props"]||{};B.width=t;var X=c()({},"x-uid",H["x-uid"]);X["x-component-props"]=B,H["x-component-props"]=B,S.emit("patch",{schema:X}),S.refresh()}})},b=function(){var I,d=(0,r.useField)(),u=(0,r.useFieldSchema)(),l=(0,h.$)(),S=l.t,H=(0,R.ngQ)(),O=H.dn,N=[{label:S("Not fixed"),value:"none"},{label:S("Left fixed"),value:"left"},{label:S("Right fixed"),value:"right"}];return(0,Q.jsx)(L.l,{children:(0,Q.jsx)(o.T,{title:S("Fixed"),options:N,defaultValue:((I=d.componentProps)===null||I===void 0?void 0:I.fixed)||"none",onChange:function(B){var X=c()({},"x-uid",u["x-uid"]);u["x-component-props"]=u["x-component-props"]||{},u["x-component-props"].fixed=B,X["x-component-props"]=u["x-component-props"],d.componentProps=d.componentProps||{},d.componentProps.fixed=B,O.emit("patch",{schema:X}),O.refresh()}},"fixed")})},f={insertPosition:"beforeEnd",useInsert:function(){var I=(0,R.ngQ)(),d=I.refresh,u=(0,r.useFieldSchema)(),l=(0,M.LY)(),S=(0,h.$)(),H=S.t;return function(N){var t=u.reduceProperties(function(X,V){return V["x-component"]==="Space"?V:X},null);if(t){v().set(N,"x-designer-props.linkageAction",!0);var B=(0,R.Pls)({t:H,api:l,refresh:d,current:t});B.loadAPIClientEvents(),B.insertBeforeEnd(N)}}},Component:function(I){var d=(0,E.z)(),u=d.getAriaLabel;return(0,Q.jsx)(A.Z,i()(i()({},I),{},{role:"button","aria-label":u("schema-initializer"),style:{cursor:"pointer"}}))},items:[{type:"item",title:'{{t("View")}}',name:"view",Component:"ViewActionInitializer",schema:{"x-component":"Action.Link","x-action":"view","x-decorator":"ACLActionProvider"},useVisible:function(){return(0,$.v)("get")}},{type:"item",name:"edit",title:'{{t("Edit")}}',Component:"UpdateActionInitializer",schema:{"x-component":"Action.Link","x-action":"update","x-decorator":"ACLActionProvider"},useVisible:function(){return(0,$.v)("update")}},{type:"item",title:'{{t("Delete")}}',name:"delete",Component:"DestroyActionInitializer",schema:{"x-component":"Action.Link","x-action":"destroy","x-decorator":"ACLActionProvider"},useVisible:function(){return(0,$.v)("destroy")}},{type:"item",title:'{{t("Disassociate")}}',name:"disassociate",Component:"DisassociateActionInitializer",schema:{"x-component":"Action.Link","x-action":"disassociate","x-acl-action":"update","x-decorator":"ACLActionProvider"},useVisible:function(){var I=(0,a.zh)(),d=(0,a.Kx)()||{},u=(d==null?void 0:d.options)||{},l=u.unavailableActions,S=u.availableActions;if(S){var H;return!!(I!=null&&I.association)&&((H=S.includes)===null||H===void 0?void 0:H.call(S,"update"))}if(l){var O;return!!(I!=null&&I.association)&&!(l!=null&&(O=l.includes)!==null&&O!==void 0&&O.call(l,"update"))}return!0}},{type:"item",title:'{{t("Add child")}}',name:"addChildren",Component:"CreateChildInitializer",schema:{"x-component":"Action.Link","x-action":"create","x-decorator":"ACLActionProvider"},useVisible:function(){var I,d=(0,r.useFieldSchema)(),u=(0,a.Kx)(),l=(d==null||(I=d.parent)===null||I===void 0?void 0:I.parent["x-decorator-props"])||{},S=l.treeTable;return u.tree&&S}},{type:"item",title:'{{t("Popup")}}',name:"popup",Component:"PopupActionInitializer"},{type:"item",title:'{{t("Update record")}}',name:"updateRecord",Component:"UpdateRecordActionInitializer",useVisible:function(){return(0,$.v)("update")}},{name:"customRequest",title:'{{t("Custom request")}}',Component:"CustomRequestInitializer",schema:{"x-action":"customize:table:request"}},{name:"link",title:'{{t("Link")}}',Component:"LinkActionInitializer",useComponentProps:function(){return{"x-component":"Action.Link"}}}]},x=new n.n(i()({name:"TableActionColumnInitializers"},f)),m=new n.n(i()({name:"table:configureItemActions"},f),x)},93355:function(He,ae,e){"use strict";e.d(ae,{E:function(){return r},H:function(){return K}});var Z=e(97857),c=e.n(Z),k=e(80844),i=e(3806),g=e(94804),C=e(57086),A={title:"{{t('Configure actions')}}",icon:"SettingOutlined",style:{marginLeft:8},items:[{type:"item",name:"filter",title:"{{t('Filter')}}",Component:"FilterActionInitializer",schema:{"x-align":"left"}},{type:"item",title:"{{t('Add new')}}",name:"addNew",Component:"CreateActionInitializer",schema:{"x-align":"right","x-decorator":"ACLActionProvider","x-acl-action-props":{skipScopeCheck:!0}},useVisible:function(){return(0,C.v)("create")}},{type:"item",title:'{{t("Associate")}}',name:"associate",Component:"AssociateActionInitializer",useVisible:function(){var j=(0,g.zh)(),h=(0,g.Kx)()||{},M=(h==null?void 0:h.options)||{},n=M.unavailableActions,y=M.availableActions;if(y){var L;return!!(j!=null&&j.association)&&((L=y.includes)===null||L===void 0?void 0:L.call(y,"update"))}if(n){var o;return!!(j!=null&&j.association)&&!(n!=null&&(o=n.includes)!==null&&o!==void 0&&o.call(n,"update"))}return!0}},{type:"item",title:"{{t('Popup')}}",name:"popup",Component:"PopupActionInitializer",componentProps:{"x-component":"Action","x-initializer":"page:addBlock"},schema:{"x-align":"right"}},{type:"item",title:"{{t('Delete')}}",name:"delete",Component:"BulkDestroyActionInitializer",schema:{"x-align":"right","x-decorator":"ACLActionProvider"},useVisible:function(){return(0,C.v)("destroyMany")}},{type:"item",title:"{{t('Refresh')}}",name:"refresh",Component:"RefreshActionInitializer",schema:{"x-align":"right"}},{type:"item",title:"{{t('Link')}}",name:"link",Component:"LinkActionInitializer",schema:{"x-align":"right"},useComponentProps:function(){return{"x-component":"Action"}}},{name:"toggle",title:"{{t('Expand/Collapse')}}",Component:"ExpandableActionInitializer",schema:{"x-align":"right"},useVisible:function(){var j,h=(0,k.useFieldSchema)(),M=(0,g.Kx)(),n=(h==null||(j=h.parent)===null||j===void 0?void 0:j["x-decorator-props"])||{},y=n.treeTable;return M.tree&&y}},{name:"customRequest",title:'{{t("Custom request")}}',Component:"CustomRequestInitializer",schema:{"x-action":"customize:table:request:global"}}]},r=new i.n(c()({name:"TableActionInitializers"},A)),K=new i.n(c()({name:"table:configureActions"},A),r)},7497:function(He,ae,e){"use strict";e.d(ae,{E:function(){return y},k:function(){return n}});var Z=e(97857),c=e.n(Z),k=e(15009),i=e.n(k),g=e(99289),C=e.n(g),A=e(72132),r=e(67294),K=e(24019),v=e(99986),j=e(61818),h=e(54961),M=e(85893),n=function(o){var a=o.filterCollections,R=o.onlyCurrentDataSource,E=o.hideSearch,$=o.createBlockSchema,Q=o.templateWrap,z=o.showAssociationFields,p=(0,K.UR)(),b=y(),f=b.createTableBlock;return(0,M.jsx)(j.dn,c()(c()({},p),{},{icon:(0,M.jsx)(A.Z,{}),componentType:"Table",onCreateBlockSchema:function(){var x=C()(i()().mark(function m(F){return i()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!$){d.next=2;break}return d.abrupt("return",$(F));case 2:f(F);case 3:case"end":return d.stop()}},m)}));return function(m){return x.apply(this,arguments)}}(),onlyCurrentDataSource:R,hideSearch:E,filter:a,showAssociationFields:z}))},y=function(){var o=(0,K.q_)(),a=o.insert,R=(0,v.B)(),E=R.getCollection,$=function(z){var p=z.item,b=E(p.name,p.dataSource),f=(0,h.O)({collectionName:p.name,dataSource:p.dataSource,rowKey:b.filterTargetKey||"id"});a(f)};return{createTableBlock:$}}},26105:function(He,ae,e){"use strict";e.d(ae,{T:function(){return L},U:function(){return o}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(80844),C=e(67294),A=e(26793),r=e(3806),K=e(45705),v=e(96365),j=e(40341),h=e(85893),M=function(){var R=(0,j.yi)(),E=(0,A.$)(),$=E.t,Q=(0,v.e)();if(!(R!=null&&R.length))return null;var z=[];return R.forEach(function(p){Object.values(p)[0].length&&z.push({type:"itemGroup",divider:!0,title:$("Parent collection fields")+"("+Q("".concat(Object.keys(p)[0]))+")",children:Object.values(p)[0]})}),(0,h.jsx)(K.E,{children:z})},n=function(){var R=(0,j.V0)(),E=(0,g.useFieldSchema)(),$=(0,A.$)(),Q=$.t,z=(0,C.useMemo)(function(){return[{type:"itemGroup",title:Q("Display association fields"),children:R}]},[R,Q]);return!(R!=null&&R.length)||E["x-component"]==="AssociationField.SubTable"?null:(0,h.jsx)(K.E,{children:z})},y={insertPosition:"beforeEnd",icon:"SettingOutlined",title:'{{t("Configure columns")}}',wrap:function(R,E){var $=E.isInSubTable;return R["x-action-column"]?R:{type:"void","x-decorator":"TableV2.Column.Decorator","x-toolbar":"TableColumnSchemaToolbar","x-settings":"fieldSettings:TableColumn","x-component":"TableV2.Column",properties:c()({},R.name,i()({},R))}},items:[{name:"displayFields",type:"itemGroup",title:'{{t("Display fields")}}',useChildren:j.bJ},{name:"parentCollectionFields",Component:M},{name:"associationFields",Component:n},{name:"divider",type:"divider",useVisible:function(){var R=(0,g.useFieldSchema)();return R["x-component"]!=="AssociationField.SubTable"}},{type:"item",name:"add",title:'{{t("Action column")}}',Component:"TableActionColumnInitializer",useVisible:function(){var R=(0,g.useFieldSchema)();return R["x-component"]!=="AssociationField.SubTable"}}]},L=new r.n(i()({name:"TableColumnInitializers"},y)),o=new r.n(i()({name:"table:configureColumns"},y),L)},31463:function(He,ae,e){"use strict";e.d(ae,{u:function(){return K}});var Z=e(97857),c=e.n(Z),k=e(96486),i=e.n(k),g=e(67294),C=e(31732),A=e(90297),r=e(85893),K=g.memo(function(v){return(0,r.jsx)(C.jg.Provider,{value:null,children:(0,r.jsx)(A.Mf,c()({initializer:v.initializer||!1,showBorder:!1,showBackground:!0},i().omit(v,"initializer")))})});K.displayName="TableColumnSchemaToolbar"},67354:function(He,ae,e){"use strict";e.d(ae,{q:function(){return i},t:function(){return g}});var Z=e(67294),c=e(85893),k=(0,Z.createContext)(null),i=function(A){var r=A.children,K=A.parent;return(0,c.jsx)(k.Provider,{value:{parent:K},children:r})},g=function(){var A=Z.useContext(k);return A==null?void 0:A.parent}},54961:function(He,ae,e){"use strict";e.d(ae,{O:function(){return i}});var Z=e(9783),c=e.n(Z),k=e(84327),i=function(C){var A=C.collectionName,r=C.dataSource,K=C.rowKey,v=C.association;if(!r)throw new Error("dataSource is required");return{type:"void","x-decorator":"TableBlockProvider","x-acl-action":"".concat(v||A,":list"),"x-use-decorator-props":"useTableBlockDecoratorProps","x-decorator-props":{collection:A,association:v,dataSource:r,action:"list",params:{pageSize:20},rowKey:K,showIndex:!0,dragSort:!1},"x-toolbar":"BlockSchemaToolbar","x-settings":"blockSettings:table","x-component":"CardItem","x-filter-targets":[],properties:c()({actions:{type:"void","x-initializer":"table:configureActions","x-component":"ActionBar","x-component-props":{style:{marginBottom:"var(--nb-spacing)"}},properties:{}}},(0,k.uid)(),{type:"array","x-initializer":"table:configureColumns","x-component":"TableV2","x-use-component-props":"useTableBlockProps","x-component-props":{rowKey:"id",rowSelection:{type:"checkbox"}},properties:{actions:{type:"void",title:'{{ t("Actions") }}',"x-action-column":"actions","x-decorator":"TableV2.Column.ActionBar","x-component":"TableV2.Column","x-toolbar":"TableColumnSchemaToolbar","x-initializer":"table:configureItemActions","x-settings":"fieldSettings:TableColumn","x-toolbar-props":{initializer:"table:configureItemActions"},properties:c()({},(0,k.uid)(),{type:"void","x-decorator":"DndContext","x-component":"Space","x-component-props":{split:"|"}})}}})}}},23639:function(He,ae,e){"use strict";e.d(ae,{c:function(){return A},l:function(){return r}});var Z=e(97857),c=e.n(Z),k=e(80844),i=e(67294),g=e(12929),C=e(92700),A=function(v){var j=r(v),h=j.params,M=j.parseVariableLoading,n=(0,C._)(v.association);return{params:h,parentRecord:n,parseVariableLoading:M}};function r(K){var v,j=(0,k.useFieldSchema)(),h=(0,g.v)({filterOption:(v=K.params)===null||v===void 0?void 0:v.filter}),M=h.filter,n=h.parseVariableLoading,y=(0,i.useMemo)(function(){var L=K.params||{},o=(j==null?void 0:j["x-decorator-props"])||{},a=o.dragSortBy;K.dragSort&&a&&(L.sort=a);var R=c()(c()({},L),{},{filter:M});return R},[j,M,K.dragSort,K.params]);return{params:y,parseVariableLoading:n}}},44112:function(He,ae,e){"use strict";e.d(ae,{G:function(){return z}});var Z=e(19632),c=e.n(Z),k=e(9783),i=e.n(k),g=e(97857),C=e.n(g),A=e(15009),r=e.n(A),K=e(99289),v=e.n(K),j=e(80844),h=e(96486),M=e.n(h),n=e(67294),y=e(1892),L=e(10097),o=e(39742),a=e(14310),R=e(67205),E=e(87714),$=e(62954),Q=e(72160),z=function(){var f,x,m,F,I,d=(0,j.useField)(),u=(0,j.useFieldSchema)(),l=(0,a.wb)(),S=(0,o.hS)(),H=(0,R.kO)(),O=H.getDataBlocks,N=(0,y.bE)(),t=(0,n.useRef)(null);t.current={service:S,resource:l};var B=(S==null||(f=S.data)===null||f===void 0?void 0:f.meta)||{},X=(0,Q.Ge)(),V=(0,n.useCallback)(function(){if(X!=null&&X.current){var ne;(ne=X.current.parentElement)===null||ne===void 0||ne.scrollIntoView({block:"start"})}},[X]),U=(0,n.useMemo)(function(){return{pageSize:B==null?void 0:B.pageSize,total:B==null?void 0:B.count,current:B==null?void 0:B.page,onChange:V}},[B==null?void 0:B.count,B==null?void 0:B.page,B==null?void 0:B.pageSize,V]),D=(S==null||(x=S.data)===null||x===void 0?void 0:x.data)||[];return(0,n.useEffect)(function(){if(!(S!=null&&S.loading)){var ne,q=(ne=N.field)===null||ne===void 0||(ne=ne.data)===null||ne===void 0?void 0:ne.selectedRowKeys;d.data=d.data||{},(0,h.isEqual)(d.data.selectedRowKeys,q)||(d.data.selectedRowKeys=q)}},[d,S==null?void 0:S.data,S==null?void 0:S.loading,(m=N.field)===null||m===void 0||(m=m.data)===null||m===void 0?void 0:m.selectedRowKeys]),{optimizeTextCellRender:!0,value:D,childrenColumnName:N.childrenColumnName,loading:S==null?void 0:S.loading,showIndex:N.showIndex,dragSort:N.dragSort&&N.dragSortBy,rowKey:N.rowKey||(u==null||(F=u["x-component-props"])===null||F===void 0?void 0:F.rowKey)||"id",pagination:(u==null||(I=u["x-component-props"])===null||I===void 0?void 0:I.pagination)===!1?!1:U,onRowSelectionChange:(0,n.useCallback)(function(ne,q){if(N){var J,Y,P;N.field.data=((J=N.field)===null||J===void 0?void 0:J.data)||{},N.field.data.selectedRowKeys=ne,N.field.data.selectedRowData=q,(Y=N.field)===null||Y===void 0||(P=Y.onRowSelect)===null||P===void 0||P.call(Y,ne)}},[]),onRowDragEnd:(0,n.useCallback)(function(){var ne=v()(r()().mark(function q(J){var Y,P;return r()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return Y=J.from,P=J.to,ie.next=3,t.current.resource.move({sourceId:Y[N.rowKey||"id"],targetId:P[N.rowKey||"id"],sortField:N.dragSort&&N.dragSortBy});case 3:t.current.service.refresh();case 4:case"end":return ie.stop()}},q)}));return function(q){return ne.apply(this,arguments)}}(),[N.rowKey,N.dragSort,N.dragSortBy]),onChange:(0,n.useCallback)(function(ne,q,J){var Y,P,w,ie,G=ne.current,le=ne.pageSize,xe=(Y=u.parent)===null||Y===void 0||(Y=Y["x-decorator-props"])===null||Y===void 0||(Y=Y.params)===null||Y===void 0?void 0:Y.sort,_e=J.order?J.order==="ascend"?[J.field]:["-".concat(J.field)]:xe||N.dragSortBy,Ee=le||((P=u.parent)===null||P===void 0||(P=P["x-decorator-props"])===null||P===void 0||(P=P.params)===null||P===void 0?void 0:P.pageSize),ze=C()(C()({},(w=t.current)===null||w===void 0||(w=w.service)===null||w===void 0||(w=w.params)===null||w===void 0?void 0:w[0]),{},{page:G||1,pageSize:Ee});_e&&(ze.sort=_e),(ie=t.current)===null||ie===void 0||ie.service.run(ze)},[u.parent]),onClickRow:(0,n.useCallback)(function(ne,q,J){var Y=(0,L.findFilterTargets)(u),P=Y.targets,w=Y.uid,ie=O();if(!P||!P.some(function(le){return ie.some(function(xe){return xe.uid===le.uid})})){q(function(le){return le.length?[]:le});return}var G=ie.find(function(le){return le.uid===u.parent["x-uid"]});ie.forEach(function(le){var xe,_e,Ee=P.find(function(ue){return ue.uid===le.uid});if(Ee){var ze=p(G,Ee.field)||N.rowKey||"id",Se=[ne[ze]],se=((xe=le.service.params)===null||xe===void 0?void 0:xe[0])||{},me=((_e=le.service.params)===null||_e===void 0||(_e=_e[1])===null||_e===void 0?void 0:_e.filters)||{};if(J.includes(ne[N.rowKey])){var pe;if((pe=le.clearSelection)===null||pe===void 0||pe.call(le),le.dataLoadingMode==="manual")return le.clearData();delete me[w]}else me[w]={$and:[i()({},Ee.field||N.rowKey,i()({},Ee.field?"$in":"$eq",Se))]};var ee=(0,E.EO)([].concat(c()(Object.values(me).map(function(ue){return(0,$.WmO)(ue)})),[le.defaultFilter]));return le.doFilter(C()(C()({},se),{},{page:1,filter:ee}),{filters:me})}}),q(function(le){return le!=null&&le.includes(ne[N.rowKey])?[]:[ne[N.rowKey]]})},[N.rowKey,u,O]),onExpand:(0,n.useCallback)(function(ne,q){var J,Y;(J=(Y=N.field).onExpandClick)===null||J===void 0||J.call(Y,ne,q)},[])}};function p(b,f){var x,m,F=b==null||(x=b.associatedFields)===null||x===void 0?void 0:x.find(function(I){return I.foreignKey===f});return(F==null?void 0:F.sourceKey)||(f==null||(m=f.split)===null||m===void 0||(m=m.call(f,"."))===null||m===void 0?void 0:m[1])}},77681:function(He,ae,e){"use strict";e.d(ae,{EG:function(){return c.E},Ez:function(){return k.E},FY:function(){return C.F},GK:function(){return v.G},H1:function(){return c.H},OO:function(){return r.O},Oe:function(){return g.O},Rp:function(){return Z.Rp},T$:function(){return A.T},Ug:function(){return A.U},Xe:function(){return Z.Xe},cL:function(){return K.c},ez:function(){return Z.ez},kD:function(){return k.k},lo:function(){return K.l},rI:function(){return Z.rI},u6:function(){return i.u}});var Z=e(61403),c=e(93355),k=e(7497),i=e(31463),g=e(23568),C=e(96681),A=e(26105),r=e(54961),K=e(23639),v=e(44112)},23568:function(He,ae,e){"use strict";e.d(ae,{O:function(){return S}});var Z=e(15009),c=e.n(Z),k=e(9783),i=e.n(k),g=e(99289),C=e.n(g),A=e(97857),r=e.n(A),K=e(80844),v=e(26793),j=e(12174),h=e(91410),M=e(93167),n=e(67174),y=e(6145),L=e(87714),o=e(62954),a=e(28561),R=e(25750),E=e(13845),$=e(67294),Q=e(99986),z=e(7939),p=e(96365),b=e(94516),f=e(62662),x=e(85893);function m(){var H=(0,z.U)(),O=H.fields,N=(0,K.useField)(),t=(0,K.useFieldSchema)(),B=(0,v.$)(),X=B.t,V=(0,b.ng)(),U=V.dn,D=(0,p.e)(),ne=(0,n.Si)(),q=ne.service,J=ne.association,Y=(0,Q.B)(),P=Y.getCollectionJoinField,w=P(J),ie=O.filter(function(G){return!(G!=null&&G.target)&&G.interface==="sort"}).map(function(G){var le;return{value:G==null?void 0:G.name,label:D(G==null||(le=G.uiSchema)===null||le===void 0?void 0:le.title)||(G==null?void 0:G.name),disabled:(G==null?void 0:G.scopeKey)&&(w==null?void 0:w.foreignKey)!==G.scopeKey}});return(0,x.jsx)(f.Qf,{title:X("Drag and drop sorting field"),options:ie,value:N.decoratorProps.dragSortBy,onChange:function(le){var xe,_e;t["x-decorator-props"].dragSortBy=le,q.run(r()(r()({},(xe=q.params)===null||xe===void 0?void 0:xe[0]),{},{sort:le})),N.decoratorProps.dragSortBy=le,U.emit("patch",{schema:(_e={},i()(_e,"x-uid",t["x-uid"]),i()(_e,"x-decorator-props",t["x-decorator-props"]),_e)}),U.refresh()}},"sort-field")}var F=e(64016),I=e(51549),d=e(26338),u=e(23461),l=e(4277),S=new h.F({name:"blockSettings:table",items:[{name:"editBlockTitle",Component:R._},{name:"setTheBlockHeight",Component:a.q},{name:"treeTable",type:"switch",useComponentProps:function(){var O,N=(0,y.useCollectionManager_deprecated)(),t=N.getCollectionField,B=N.getCollection,X=(0,K.useField)(),V=(0,K.useFieldSchema)(),U=(0,n.Si)(),D=U.service,ne=(0,v.$)(),q=ne.t,J=(0,o.ngQ)(),Y=J.dn,P=(0,y.useCollection_deprecated)(),w=X.decoratorProps.resource,ie=w&&t(w),G=w!=null&&w.includes(".")?(O=B(ie==null?void 0:ie.target))===null||O===void 0?void 0:O.tree:!!(P!=null&&P.tree);return{title:q("Tree table"),defaultChecked:!0,checked:G?X.decoratorProps.treeTable:!1,onChange:function(xe){var _e;X.decoratorProps.treeTable=xe,V["x-decorator-props"].treeTable=xe,xe===!1&&(V["x-decorator-props"].expandFlag=!1);var Ee=r()(r()({},(_e=D.params)===null||_e===void 0?void 0:_e[0]),{},{tree:xe?!0:null});Y.emit("patch",{schema:V}),Y.refresh(),D.run(Ee)}}},useVisible:function(){var O=(0,y.useCollectionManager_deprecated)(),N=O.getCollectionField,t=(0,K.useField)(),B=(0,y.useCollection_deprecated)(),X=t.decoratorProps.resource,V=X&&N(X);return(B==null?void 0:B.tree)&&(V==null?void 0:V.collectionName)===(V==null?void 0:V.target)}},(0,M.H)({name:"expandFlag",title:function(O){return O("Expand All")},defaultValue:!1,schemaKey:"x-decorator-props.expandFlag",useVisible:function(){var O=(0,K.useField)();return O.decoratorProps.treeTable}}),{name:"enableDragAndDropSorting",type:"switch",useComponentProps:function(){var O=(0,y.useCollectionManager_deprecated)(),N=O.getCollectionField,t=(0,K.useField)(),B=(0,K.useFieldSchema)(),X=(0,n.Si)(),V=X.service,U=(0,v.$)(),D=U.t,ne=(0,o.ngQ)(),q=ne.dn,J=t.decoratorProps.resource,Y=J&&N(J),P=(0,j.LY)();return{title:D("Enable drag and drop sorting"),checked:t.decoratorProps.dragSort,onChange:function(){var w=C()(c()().mark(function G(le){var xe,_e,Ee,ze,Se,se;return c()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(!(le&&Y)){pe.next=7;break}return pe.next=3,P.resource("collections.fields",Y.collectionName).update({filterByTk:Y.name,values:{sortable:!0}});case 3:ze=pe.sent,Se=ze.data,se=Se==null||(Ee=Se.data)===null||Ee===void 0||(Ee=Ee[0])===null||Ee===void 0?void 0:Ee.sortBy,B["x-decorator-props"].dragSortBy=se;case 7:t.decoratorProps.dragSort=le,B["x-decorator-props"].dragSort=le,V.run(r()(r()({},(xe=V.params)===null||xe===void 0?void 0:xe[0]),{},{sort:B["x-decorator-props"].dragSortBy})),q.emit("patch",{schema:(_e={},i()(_e,"x-uid",B["x-uid"]),i()(_e,"x-decorator-props",B["x-decorator-props"]),_e)});case 11:case"end":return pe.stop()}},G)}));function ie(G){return w.apply(this,arguments)}return ie}()}}},{name:"SortField",Component:m,useVisible:function(){var O=(0,K.useField)();return O.decoratorProps.dragSort}},d.a,I.r,l.wq,{name:"RecordsPerPage",type:"select",useComponentProps:function(){var O,N=(0,K.useField)(),t=(0,K.useFieldSchema)(),B=(0,n.Si)(),X=B.service,V=(0,v.$)(),U=V.t,D=(0,o.ngQ)(),ne=D.dn;return{title:U("Records per page"),value:((O=N.decoratorProps)===null||O===void 0||(O=O.params)===null||O===void 0?void 0:O.pageSize)||20,options:[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100},{label:"200",value:200}],onChange:function(J){var Y,P,w=N.decoratorProps.params||{};w.pageSize=J,N.decoratorProps.params=w,t["x-decorator-props"].params=w,X.run(r()(r()({},(Y=X.params)===null||Y===void 0?void 0:Y[0]),{},{pageSize:J,page:1})),ne.emit("patch",{schema:(P={},i()(P,"x-uid",t["x-uid"]),i()(P,"x-decorator-props",t["x-decorator-props"]),P)})}}}},{name:"tableSize",type:"select",useComponentProps:function(){var O,N=(0,K.useField)(),t=(0,K.useFieldSchema)(),B=(0,v.$)(),X=B.t,V=(0,o.ngQ)(),U=V.dn,D=t.reduceProperties(function(ne,q){if(q["x-component"]==="TableV2")return q},null);return{title:X("Table size"),value:(D==null||(O=D["x-component-props"])===null||O===void 0?void 0:O.size)||"small",options:[{label:X("Large"),value:"large"},{label:X("Middle"),value:"middle"},{label:X("Small"),value:"small"}],onChange:function(q){var J;D["x-component-props"]=D["x-component-props"]||{},D["x-component-props"].size=q,U.emit("patch",{schema:(J={},i()(J,"x-uid",D["x-uid"]),i()(J,"x-component-props",D["x-component-props"]),J)})}}}},{name:"ConnectDataBlocks",Component:E.F,useComponentProps:function(){var O=(0,v.$)(),N=O.t;return{type:L.vC.TABLE,emptyDescription:N("No blocks to connect")}}},{name:"divider",type:"divider",sort:7e3,useVisible:function(){var O,N=(0,K.useFieldSchema)(),t=!(N!=null&&(O=N["x-decorator-props"])!==null&&O!==void 0&&O.disableTemplate);return t}},{name:"ConvertReferenceToDuplicate",sort:8e3,Component:F.G,useComponentProps:function(){var O,N,t=(0,y.useCollection_deprecated)(),B=t.name,X=(0,K.useFieldSchema)(),V=(0,u.rE)(),U=V.componentNamePrefix,D=(X==null||(O=X["x-decorator-props"])===null||O===void 0?void 0:O.resource)||(X==null||(N=X["x-decorator-props"])===null||N===void 0?void 0:N.association);return{componentName:"".concat(U,"Table"),collectionName:B,resourceName:D}},useVisible:function(){var O,N=(0,K.useFieldSchema)(),t=!(N!=null&&(O=N["x-decorator-props"])!==null&&O!==void 0&&O.disableTemplate);return t}},{name:"divider2",type:"divider",sort:9e3},{name:"delete",type:"remove",sort:1e4,useComponentProps:function(){return{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}}]})},96681:function(He,ae,e){"use strict";e.d(ae,{F:function(){return p}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(17663),C=e(80844),A=e(83062),r=e(67294),K=e(26793),v=e(68091),j=e(91410),h=e(6145),M=e(56318),n=e(94804),y=e(22558),L=e(7686),o=e(62954),a=e(29132),R=e(81230),E=e(90297),$=e(21774),Q=e(88773),z=e(85893),p=new j.F({name:"fieldSettings:TableColumn",items:[{name:"decoratorOptions",type:"itemGroup",hideIfNoChildren:!0,useComponentProps:function(){var f=(0,K.$)(),x=f.t;return{title:x("Generic properties")}},children:[{name:"customColumnTitle",type:"modal",useComponentProps:function(){var f,x=(0,R.z9)(),m=x.fieldSchema,F=x.collectionField,I=(0,C.useField)(),d=(0,K.$)(),u=d.t,l=(0,C.useFieldSchema)(),S=(0,o.ngQ)(),H=S.dn;return{title:u("Custom column title"),schema:{type:"object",title:u("Custom column title"),properties:{title:{title:u("Column title"),default:l==null?void 0:l.title,description:"".concat(u("Original field title: ")).concat((F==null||(f=F.uiSchema)===null||f===void 0?void 0:f.title)||(m==null?void 0:m.title)),"x-decorator":"FormItem","x-component":"Input","x-component-props":{}}}},onSubmit:function(N){var t=N.title;I.title=t,l.title=t,H.emit("patch",{schema:{"x-uid":l["x-uid"],title:l.title}}),H.refresh()}}}},{name:"editTooltip",type:"modal",useComponentProps:function(){var f,x=(0,K.$)(),m=x.t,F=(0,o.ngQ)(),I=F.dn,d=(0,C.useField)(),u=(0,C.useFieldSchema)();return{title:m("Edit tooltip"),schema:{type:"object",title:m("Edit tooltip"),properties:{tooltip:{default:(u==null||(f=u["x-component-props"])===null||f===void 0?void 0:f.tooltip)||"","x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}},onSubmit:function(S){var H=S.tooltip;d.componentProps.tooltip=H,u["x-component-props"]=u["x-component-props"]||{},u["x-component-props"].tooltip=H,I.emit("patch",{schema:{"x-uid":u["x-uid"],"x-component-props":u["x-component-props"]}})}}}},{name:"style",Component:function(f){var x=i()(i()({},f),{},{category:"style"});return(0,z.jsx)(E.lc,i()({},x))},useVisible:function(){var f,x,m=(0,R.z9)(),F=m.fieldSchema,I=(0,L.P)(),d=I.isInSubTable,u=(0,C.useField)();if(!d)return!0;var l=(f=u.path)===null||f===void 0?void 0:f.splice(((x=u.path)===null||x===void 0?void 0:x.length)-1,1);if(F){var S=u.form.query("".concat(l.concat("*."+F.name))).get("readPretty");return S}else return!1},useComponentProps:function(){var f=(0,n.Kx)(),x=f.name,m=(0,v.Po)(),F=m.linkageRulesProps;return i()(i()({},F),{},{collectionName:x})}},{name:"columnWidth",type:"modal",useComponentProps:function(){var f,x=(0,C.useField)(),m=(0,K.$)(),F=m.t,I=(0,C.useFieldSchema)(),d=(0,o.ngQ)(),u=d.dn;return{title:F("Column width"),schema:{type:"object",title:F("Column width"),properties:{width:{default:(I==null||(f=I["x-component-props"])===null||f===void 0?void 0:f.width)||100,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{}}}},onSubmit:function(S){var H=S.width,O=I["x-component-props"]||{};O.width=H;var N=c()({},"x-uid",I["x-uid"]);N["x-component-props"]=O,I["x-component-props"]=O,x.componentProps.width=H,u.emit("patch",{schema:N}),u.refresh()}}}},{name:"sortable",type:"switch",useVisible:function(){var f=(0,n.Kx)(),x=(0,R.z9)(),m=x.collectionField,F=(0,h.useCollectionManager_deprecated)(),I=F.getInterface,d=I(m==null?void 0:m.interface),u=(0,a.Ky)(),l=u.currentMode;return(d==null?void 0:d.sortable)===!0&&!l&&((f==null?void 0:f.name)===(m==null?void 0:m.collectionName)||!(m!=null&&m.collectionName)||(m==null?void 0:m.inherit))},useComponentProps:function(){var f=(0,C.useField)(),x=(0,K.$)(),m=x.t,F=(0,C.useFieldSchema)(),I=(0,o.ngQ)(),d=I.dn;return{title:m("Sortable"),checked:f.componentProps.sorter,onChange:function(l){var S=c()({},"x-uid",F["x-uid"]);F["x-component-props"]=i()(i()({},F["x-component-props"]),{},{sorter:l}),S["x-component-props"]=F["x-component-props"],f.componentProps.sorter=l,d.emit("patch",{schema:S}),d.refresh()}}}},{name:"setDefaultValue",useVisible:function(){var f=(0,R.z9)(),x=f.fieldSchema;return x?!(x!=null&&x["x-read-pretty"]):!1},Component:$.N,useComponentProps:function(){var f=(0,R.z9)(),x=f.fieldSchema;return{fieldSchema:x}}},{name:"required",type:"switch",useVisible:function(){var f=(0,R.z9)(),x=f.uiSchema,m=f.fieldSchema,F=(0,C.useField)();if(!m)return!1;var I=["QuickEdit","FormItem"].includes(m["x-decorator"]);return I&&!F.readPretty&&!(x!=null&&x["x-read-pretty"])},useComponentProps:function(){var f=(0,R.z9)(),x=f.fieldSchema,m=(0,C.useField)(),F=(0,K.$)(),I=F.t,d=(0,o.ngQ)(),u=d.dn;return{key:"required",title:I("Required"),checked:x==null?void 0:x.required,onChange:function(S){var H,O;if(!x)return console.error("fieldSchema is required");var N=c()({},"x-uid",x["x-uid"]);x.required=S,N.required=S;var t=(H=m.path)===null||H===void 0?void 0:H.splice(((O=m.path)===null||O===void 0?void 0:O.length)-1,1);m.form.query("".concat(t.concat("*."+x.name))).forEach(function(B){B.required=S}),u.emit("patch",{schema:N}),u.refresh()}}}},{name:"pattern",type:"select",useVisible:function(){var f=(0,R.z9)(),x=f.fieldSchema,m=f.collectionField,F=(0,C.useField)();if(!x)return!1;var I=["QuickEdit","FormItem"].includes(x["x-decorator"]);return I&&!(F!=null&&F.readPretty)&&(m==null?void 0:m.interface)!=="o2m"&&!(0,Q.V)(x)},useComponentProps:function(){var f=(0,R.z9)(),x=f.fieldSchema,m=(0,C.useField)(),F=(0,K.$)(),I=F.t,d=(0,o.ngQ)(),u=d.dn,l="editable";return x?(x["x-disabled"]===!0&&(l="readonly"),x["x-read-pretty"]===!0&&(l="read-pretty"),{key:"pattern",title:I("Pattern"),options:[{label:I("Editable"),value:"editable"},{label:I("Readonly"),value:"readonly"},{label:I("Easy-reading"),value:"read-pretty"}],value:l,onChange:function(H){var O,N,t=c()({},"x-uid",x["x-uid"]),B=(O=m.path)===null||O===void 0?void 0:O.splice(((N=m.path)===null||N===void 0?void 0:N.length)-1,1);switch(H){case"readonly":{x["x-read-pretty"]=!1,x["x-disabled"]=!0,t["x-read-pretty"]=!1,t["x-disabled"]=!0,m.form.query("".concat(B.concat("*."+x.name))).forEach(function(X){X.readonly=!0,X.disabled=!0});break}case"read-pretty":{x["x-read-pretty"]=!0,x["x-disabled"]=!1,t["x-read-pretty"]=!0,t["x-disabled"]=!1,m.form.query("".concat(B.concat("*."+x.name))).forEach(function(X){X.readPretty=!0});break}default:{x["x-read-pretty"]=!1,x["x-disabled"]=!1,t["x-read-pretty"]=!1,t["x-disabled"]=!1,m.form.query("".concat(B.concat("*."+x.name))).forEach(function(X){X.readPretty=!1,X.disabled+!1});break}}u.emit("patch",{schema:t}),u.refresh()}}):console.error("fieldSchema is required")}},{name:"fixed",type:"select",useComponentProps:function(){var f,x=(0,K.$)(),m=x.t,F=(0,C.useField)(),I=(0,C.useFieldSchema)(),d=(0,o.ngQ)(),u=d.dn;return{title:m("Fixed"),options:[{label:m("Not fixed"),value:"none"},{label:m("Left fixed"),value:"left"},{label:m("Right fixed"),value:"right"}],value:((f=F.componentProps)===null||f===void 0?void 0:f.fixed)||"none",onChange:function(S){var H=c()({},"x-uid",I["x-uid"]);I["x-component-props"]=I["x-component-props"]||{},I["x-component-props"].fixed=S,H["x-component-props"]=I["x-component-props"],F.componentProps=F.componentProps||{},F.componentProps.fixed=S,u.emit("patch",{schema:H}),u.refresh()}}}},{name:"hidden",type:"switch",useComponentProps:function(){var f=(0,C.useField)(),x=(0,K.$)(),m=x.t,F=(0,C.useFieldSchema)(),I=(0,o.ngQ)(),d=I.dn;return{title:(0,z.jsxs)("span",{children:[m("Hide column"),(0,z.jsx)(A.Z,{title:m("In configuration mode, the entire column becomes transparent. In non-configuration mode, the entire column will be hidden. Even if the entire column is hidden, its configured default values and other settings will still take effect."),children:(0,z.jsx)(g.Z,{style:{marginLeft:4,opacity:.65}})})]}),checked:f.componentProps.columnHidden,onChange:function(l){var S=c()({},"x-uid",F["x-uid"]);F["x-component-props"]=i()(i()({},F["x-component-props"]),{},{columnHidden:l}),S["x-component-props"]=F["x-component-props"],f.componentProps.columnHidden=l,d.emit("patch",{schema:S}),d.refresh()}}}},y.K]},{name:"componentOptions",type:"itemGroup",hideIfNoChildren:!0,useComponentProps:function(){var f=(0,K.$)(),x=f.t;return{title:x("Specific properties")}},useChildren:function(){var f=(0,v.qD)(),x=(0,M.W)(),m={Select:"Select",DatePicker:"DatePicker",Nester:"Nester",SubTable:"SubTable",Picker:"Picker",PopoverNester:"PopoverNester",Tag:"Tag"},F=f.schemaSettingsManager.get("fieldSettings:component:".concat(m[x]||x));return(F==null?void 0:F.items)||[]}},{name:"divider",type:"divider"},{name:"delete",type:"remove",sort:100,useComponentProps:function(){var f=(0,K.$)(),x=f.t;return{removeParentsIfNoChildren:!1,confirm:{title:x("Delete field")},breakRemoveOn:{"x-component":"Grid"}}}}]})},15079:function(He,ae,e){"use strict";e.d(ae,{K:function(){return i}});var Z=e(80844),c=e(67294),k=e(29250),i=function(){var C=(0,Z.useFieldSchema)(),A=(0,k.Q)(),r=A.collectOperator,K=A.removeOperator;(0,c.useEffect)(function(){return function(){K(C.name)}},[C.name,K]),C["x-filter-operator"]&&r(C.name,C["x-filter-operator"])}},56995:function(He,ae,e){"use strict";e.d(ae,{jI:function(){return i.jI},wq:function(){return i.wq},vn:function(){return A.v},tU:function(){return i.tU},dS:function(){return g.d},jM:function(){return g.j},os:function(){return C.o},ln:function(){return Z.l},ec:function(){return k.e},tm:function(){return c.t},GL:function(){return r.G}});var Z=e(86693),c=e(31793),k=e(21109),i=e(4277),g=e(80159),C=e(95216),A=e(57086),r=e(97703)},57086:function(He,ae,e){"use strict";e.d(ae,{v:function(){return c}});var Z=e(94804),c=function(i){var g=(0,Z.Kx)()||{},C=(g==null?void 0:g.options)||{},A=C.unavailableActions,r=C.availableActions;if(r){var K;return r==null||(K=r.includes)===null||K===void 0?void 0:K.call(r,i)}if(A){var v;return!(A!=null&&(v=A.includes)!==null&&v!==void 0&&v.call(A,i))}return!0}},92700:function(He,ae,e){"use strict";e.d(ae,{_:function(){return c}});var Z=e(49834),c=function(i){var g=(0,Z.nE)();if(i)return g}},97703:function(He,ae,e){"use strict";e.d(ae,{G:function(){return i}});var Z=e(21143),c=e(94658),k=e(19530),i=function(){var C=(0,Z.useDataBlockProps)()||{},A=C.sourceId,r=C.association,K=(0,k.U)(r),v=(0,c.M)({association:r});return A||(v==null?void 0:v[K])}},19530:function(He,ae,e){"use strict";e.d(ae,{U:function(){return c}});var Z=e(35746),c=function(i){var g=(0,Z.d9)();return g.getSourceKeyByAssociation(i)}},69435:function(He,ae,e){"use strict";e.d(ae,{m:function(){return o},y:function(){return L}});var Z=e(97857),c=e.n(Z),k=e(9783),i=e.n(k),g=e(80844),C=e(26793),A=e(91410),r=e(56318),K=e(62954),v=e(37696),j=e(38752),h=e(81230),M=e(94920),n=e(76235),y={name:"fieldComponent",type:"select",useComponentProps:function(){var R=(0,C.$)(),E=R.t,$=(0,g.useField)(),Q=(0,K.l1O)(),z=(0,r.W)(),p=(0,h.z9)(),b=p.fieldSchema,f=p.collectionField,x=(0,g.useFieldSchema)(),m=b||x,F=(0,K.fde)({fieldSchema:b,collectionField:f}),I=(0,K.ngQ)(),d=I.dn;return{title:E("Field component"),options:F,value:z,onChange:function(l){var S=i()({},"x-uid",m["x-uid"]);m["x-component-props"]=m["x-component-props"]||{},m["x-component-props"].mode=l,S["x-component-props"]=m["x-component-props"],$.componentProps=$.componentProps||{},$.componentProps.mode=l,(0,v.r$)(m)&&Q&&(S.default=null,m.default=null,$.setInitialValue(null),$.setValue(null)),d.emit("patch",{schema:S}),d.refresh()}}}},L={name:"showFileName",type:"switch",useComponentProps:function(){var R,E=(0,C.$)(),$=E.t,Q=(0,g.useField)(),z=(0,h.z9)(),p=z.fieldSchema,b=(0,g.useFieldSchema)(),f=p||b,x=(0,K.ngQ)(),m=x.dn,F=x.refresh;return{title:$("Show file name"),checked:((R=f["x-component-props"])===null||R===void 0?void 0:R.showFileName)!==!1,onChange:function(d){var u=i()({},"x-uid",f["x-uid"]);Q.componentProps.showFileName=d,f["x-component-props"]=f["x-component-props"]||{},f["x-component-props"].showFileName=d,u["x-component-props"]=f["x-component-props"],m.emit("patch",{schema:u}),F()}}}},o=new A.F({name:"fieldSettings:component:FileManager",items:[y,{name:"quickUpload",type:"switch",useComponentProps:function(){var R,E=(0,C.$)(),$=E.t,Q=(0,g.useField)(),z=(0,h.z9)(),p=z.fieldSchema,b=(0,g.useFieldSchema)(),f=p||b,x=(0,K.ngQ)(),m=x.dn,F=x.refresh;return{title:$("Quick upload"),checked:((R=f["x-component-props"])===null||R===void 0?void 0:R.quickUpload)!==!1,onChange:function(d){var u=i()({},"x-uid",f["x-uid"]);Q.componentProps.quickUpload=d,f["x-component-props"]=f["x-component-props"]||{},f["x-component-props"].quickUpload=d,u["x-component-props"]=f["x-component-props"],m.emit("patch",{schema:u}),F()}}},useVisible:function(){var R=(0,h.z9)(),E=R.fieldSchema,$=(0,g.useField)(),Q=(0,g.useForm)(),z=(E==null?void 0:E["x-read-pretty"])||$.readPretty||Q.readPretty;return!z}},{name:"selectFile",type:"switch",useComponentProps:function(){var R,E=(0,C.$)(),$=E.t,Q=(0,g.useField)(),z=(0,h.z9)(),p=z.fieldSchema,b=(0,g.useFieldSchema)(),f=p||b,x=(0,K.ngQ)(),m=x.dn,F=x.refresh;return{title:$("Select file"),checked:((R=f["x-component-props"])===null||R===void 0?void 0:R.selectFile)!==!1,onChange:function(d){var u=i()({},"x-uid",f["x-uid"]);Q.componentProps.selectFile=d,f["x-component-props"]=f["x-component-props"]||{},f["x-component-props"].selectFile=d,u["x-component-props"]=f["x-component-props"],m.emit("patch",{schema:u}),F()}}},useVisible:function(){var R=(0,h.z9)(),E=R.fieldSchema,$=(0,g.useField)(),Q=(0,g.useForm)(),z=(E==null?void 0:E["x-read-pretty"])||$.readPretty||Q.readPretty;return!z}},{name:"size",type:"select",useVisible:function(){var R=(0,j.p3)(),E=(0,h.z9)(),$=E.fieldSchema;return R&&!$},useComponentProps:function(){var R,E=(0,C.$)(),$=E.t,Q=(0,g.useField)(),z=(0,g.useFieldSchema)(),p=(0,K.ngQ)(),b=p.dn;return{title:$("Size"),options:[{label:$("Large"),value:"large"},{label:$("Default"),value:"default"},{label:$("Small"),value:"small"}],value:(Q==null||(R=Q.componentProps)===null||R===void 0?void 0:R.size)||"default",onChange:function(x){var m=i()({},"x-uid",z["x-uid"]);z["x-component-props"]=z["x-component-props"]||{},z["x-component-props"].size=x,m["x-component-props"]=z["x-component-props"],Q.componentProps=Q.componentProps||{},Q.componentProps.size=x,b.emit("patch",{schema:m}),b.refresh()}}}},L,c()(c()({},(0,n.zV)()),{},{useVisible:function(){var R=(0,j.w5)(),E=(0,M.K)();return R&&E()}})]})},90440:function(He,ae,e){"use strict";e.d(ae,{Qh:function(){return o},_3:function(){return L},dQ:function(){return y},o_:function(){return n}});var Z=e(15009),c=e.n(Z),k=e(97857),i=e.n(k),g=e(99289),C=e.n(g),A=e(80844),r=e(26793),K=e(21143),v=e(91410),j=e(81230),h=e(94516),M=e(90810),n={name:"ellipsis",type:"switch",useComponentProps:function(){var R,E=(0,j.z9)(),$=E.fieldSchema,Q=(0,j.Oy)(),z=(0,A.useFieldSchema)(),p=(0,A.useField)(),b=(0,h.ng)(),f=b.dn,x=(0,r.$)(),m=x.t,F=$||z,I=$?Q[0]?!Q[0].readPretty:!$["x-read-pretty"]:!p.readPretty;return{title:m("Ellipsis overflow content"),checked:!!((R=F["x-component-props"])!==null&&R!==void 0&&R.ellipsis),hidden:I,onChange:function(){var d=C()(c()().mark(function l(S){return c()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return $&&Q?(Q.forEach(function(N){N.componentProps.ellipsis=S}),F["x-component-props"].ellipsis=S):p.componentProps.ellipsis=S,O.next=3,f.emit("patch",{schema:{"x-uid":F["x-uid"],"x-component-props":i()(i()({},F["x-component-props"]),{},{ellipsis:S})}});case 3:case"end":return O.stop()}},l)}));function u(l){return d.apply(this,arguments)}return u}()}}},y={name:"enableLink",type:"switch",useVisible:function(){var R=(0,A.useField)(),E=(0,j.z9)(),$=E.fieldSchema,Q=(0,A.useFieldSchema)(),z=$||Q,p=(0,K.useBlockContext)()||{},b=p.name;return b!=="kanban"&&((z==null?void 0:z["x-read-pretty"])||R.readPretty)},useComponentProps:function(){var R,E=(0,r.$)(),$=E.t,Q=(0,A.useField)(),z=(0,j.z9)(),p=z.fieldSchema,b=(0,A.useFieldSchema)(),f=p||b,x=(0,h.ng)(),m=x.dn;return{title:$("Enable link"),checked:f==null||(R=f["x-component-props"])===null||R===void 0?void 0:R.enableLink,onChange:function(I){f["x-component-props"]=i()(i()({},f==null?void 0:f["x-component-props"]),{},{enableLink:I}),Q.componentProps.enableLink=I,m.emit("patch",{schema:{"x-uid":f["x-uid"],"x-component-props":i()({},f==null?void 0:f["x-component-props"])}})}}}},L={name:"openMode",Component:M.HA,useComponentProps:function(){var R=(0,K.useOpenModeContext)(),E=R.hideOpenMode,$=(0,j.z9)(),Q=$.fieldSchema,z=(0,A.useFieldSchema)(),p=Q||z;return{openMode:!E,openSize:!E,targetSchema:p}},useVisible:function(){var R,E=(0,A.useField)(),$=(0,j.z9)(),Q=$.fieldSchema,z=(0,A.useFieldSchema)(),p=Q||z;return((p==null?void 0:p["x-read-pretty"])||E.readPretty)&&(p==null||(R=p["x-component-props"])===null||R===void 0?void 0:R.enableLink)}},o=new v.F({name:"fieldSettings:component:Input",items:[n,y,L]})},76235:function(He,ae,e){"use strict";e.d(ae,{OA:function(){return O},lt:function(){return F},pv:function(){return H},zV:function(){return I}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(80844),C=e(96486),A=e.n(C),r=e(67294),K=e(26793),v=e(91410),j=e(7340),h=e(6145),M=e(56318),n=e(94804),y=e(36586),L=e(62954),o=e(37696),a=e(38752),R=e(81230),E=e(90297),$=e(43319),Q=e(93329),z=e(94920),p=e(64910),b=e(39270),f=e(90440),x=e(85893),m={name:"enableLink",type:"switch",useVisible:function(){var t=(0,g.useField)();return t.readPretty},useComponentProps:function(){var t,B=(0,K.$)(),X=B.t,V=(0,g.useField)(),U=(0,R.z9)(),D=U.fieldSchema,ne=(0,g.useFieldSchema)(),q=D||ne,J=(0,L.ngQ)(),Y=J.dn;return{title:X("Enable link"),checked:((t=q["x-component-props"])===null||t===void 0?void 0:t.enableLink)!==!1,onChange:function(w){q["x-component-props"]=i()(i()({},q==null?void 0:q["x-component-props"]),{},{enableLink:w}),V.componentProps.enableLink=w,Y.emit("patch",{schema:{"x-uid":q["x-uid"],"x-component-props":i()({},q==null?void 0:q["x-component-props"])}})}}}},F={name:"titleField",type:"select",useComponentProps:function(){var t,B,X,V=(0,K.$)(),U=V.t,D=(0,g.useField)(),ne=(0,L.ngQ)(),q=ne.dn,J=(0,a.eT)(),Y=(0,R.z9)(),P=Y.uiSchema,w=Y.fieldSchema,ie=Y.collectionField,G=(0,g.useFieldSchema)(),le=w||G,xe=(0,n.Hy)(),_e=ie||xe,Ee=i()(i()(i()({},_e==null||(t=_e.uiSchema)===null||t===void 0||(t=t["x-component-props"])===null||t===void 0?void 0:t.fieldNames),D==null||(B=D.componentProps)===null||B===void 0?void 0:B.fieldNames),le==null||(X=le["x-component-props"])===null||X===void 0?void 0:X.fieldNames);return{title:U("Title field"),options:J,value:Ee==null?void 0:Ee.label,onChange:function(Se){var se,me,pe,ee,ue=c()({},"x-uid",le["x-uid"]),ge=i()(i()(i()({},_e==null||(se=_e.uiSchema)===null||se===void 0||(se=se["x-component-props"])===null||se===void 0?void 0:se.fieldNames),(me=le["x-component-props"])===null||me===void 0?void 0:me.fieldNames),{},{label:Se});le["x-component-props"]=le["x-component-props"]||{},le["x-component-props"].fieldNames=ge,ue["x-component-props"]=le["x-component-props"],D.componentProps.fieldNames=le["x-component-props"].fieldNames;var Ie=(pe=D.path)===null||pe===void 0?void 0:pe.splice(((ee=D.path)===null||ee===void 0?void 0:ee.length)-1,1);D.form.query("".concat(Ie.concat("*."+le.name))).forEach(function(Ae){Ae.componentProps.fieldNames=Ee}),q.emit("patch",{schema:ue}),q.refresh()}}}},I=function(t){var B=(t==null?void 0:t.title)||"Allow multiple";return{name:"allowMultiple",type:"switch",useComponentProps:function(){var V,U=(0,K.$)(),D=U.t,ne=(0,g.useField)(),q=(0,R.z9)(),J=q.fieldSchema,Y=(0,g.useFieldSchema)(),P=J||Y,w=(0,L.ngQ)(),ie=w.dn,G=w.refresh;return{title:D(B),checked:((V=P["x-component-props"])===null||V===void 0?void 0:V.multiple)===void 0?!0:P["x-component-props"].multiple,onChange:function(xe){var _e=c()({},"x-uid",P["x-uid"]);P["x-component-props"]=P["x-component-props"]||{},ne.componentProps=ne.componentProps||{},P["x-component-props"].multiple=xe,ne.componentProps.multiple=xe,_e["x-component-props"]=P["x-component-props"],ie.emit("patch",{schema:_e}),G()}}}}},d={name:"quickCreate",type:"select",useComponentProps:function(){var t,B=(0,b.B)(),X=B.defaultOpenMode,V=(0,K.$)(),U=V.t,D=(0,g.useField)(),ne=(0,g.useFieldSchema)(),q=(0,L.ngQ)(),J=q.dn,Y=q.insertAdjacent;return{title:U("Quick create"),options:[{label:U("None"),value:"none"},{label:U("Dropdown"),value:"quickAdd"},{label:U("Pop-up"),value:"modalAdd"}],value:((t=D.componentProps)===null||t===void 0?void 0:t.addMode)||"none",onChange:function(w){if(w==="modalAdd"){var ie=ne.reduceProperties(function(xe,_e){return _e["x-component"]==="Action"?_e:xe},null);if(!ie){var G={"x-action":"create","x-acl-action":"create",title:"{{t('Add new')}}","x-toolbar":"ActionSchemaToolbar","x-toolbar-props":{draggable:!1},"x-settings":"actionSettings:addNew","x-component":"Action","x-decorator":"ACLActionProvider","x-component-props":{openMode:X,type:"default",component:"CreateRecordAction"}};Y("afterBegin",G)}}var le=c()({},"x-uid",ne["x-uid"]);ne["x-component-props"]=ne["x-component-props"]||{},ne["x-component-props"].addMode=w,le["x-component-props"]=ne["x-component-props"],D.componentProps=D.componentProps||{},D.componentProps.addMode=w,J.emit("patch",{schema:le}),J.refresh()}}}},u={name:"setDefaultSortingRules",Component:Q.w},l={name:"setTheDataScope",Component:$.H,useComponentProps:function(){var t,B=(0,h.useCollectionManager_deprecated)(),X=B.getCollectionJoinField,V=B.getAllCollectionsInheritChain,U=(0,h.useCollection_deprecated)(),D=U.getField,ne=(0,j.bz)(),q=ne.form,J=(0,y.a)(),Y=(0,g.useField)(),P=(0,R.z9)(),w=P.fieldSchema,ie=P.collectionField,G=(0,g.useFieldSchema)(),le=w||G,xe=ie||D(le.name)||X(le["x-collection-field"]),_e=(0,p.OQ)(),Ee=(0,p.Kp)(),ze=(0,L.ngQ)(),Se=ze.dn;return{collectionName:xe==null?void 0:xe.target,defaultFilter:(le==null||(t=le["x-component-props"])===null||t===void 0||(t=t.service)===null||t===void 0||(t=t.params)===null||t===void 0?void 0:t.filter)||{},form:q,dynamicComponent:function(me){return(0,x.jsx)(E.qj,i()(i()({},me),{},{form:q,collectionField:me.collectionField,record:J,shouldChange:(0,E.Vc)({collectionField:me.collectionField,variables:_e,localVariables:Ee,getAllCollectionsInheritChain:V})}))},onSubmit:function(me){var pe,ee=me.filter;ee=(0,L.WmO)(ee),A().set(le["x-component-props"],"service.params.filter",ee),A().set(Y.componentProps,"service.params.filter",ee),Se.emit("patch",{schema:(pe={},c()(pe,"x-uid",le["x-uid"]),c()(pe,"x-component-props",le["x-component-props"]),pe)})}}}},S={name:"fieldComponent",type:"select",useComponentProps:function(){var t=(0,K.$)(),B=t.t,X=(0,g.useField)(),V=(0,R.z9)(),U=V.fieldSchema,D=V.collectionField,ne=(0,g.useFieldSchema)(),q=U||ne,J=(0,L.fde)({fieldSchema:U,collectionField:D}),Y=(0,L.l1O)(),P=(0,M.W)(),w=(0,L.ngQ)(),ie=w.dn;return{title:B("Field component"),options:J,value:P,onChange:function(le){var xe=c()({},"x-uid",q["x-uid"]);if(q["x-component-props"]=q["x-component-props"]||{},q["x-component-props"].mode=le,xe["x-component-props"]=q["x-component-props"],X.componentProps=X.componentProps||{},X.componentProps.mode=le,(0,o.r$)(q)&&Y){var _e,Ee;xe.default=null,q.default=null,X==null||(_e=X.setInitialValue)===null||_e===void 0||_e.call(X,null),X==null||(Ee=X.setValue)===null||Ee===void 0||Ee.call(X,null)}ie.emit("patch",{schema:xe}),ie.refresh()}}}},H=new v.F({name:"fieldSettings:component:Select",items:[i()(i()({},S),{},{useVisible:a.w5}),i()(i()({},l),{},{useVisible:function(){var t=(0,a.rx)(),B=(0,a.p3)();return t&&!B}}),i()(i()({},u),{},{useComponentProps:function(){var t=(0,R.z9)(),B=t.fieldSchema;return{fieldSchema:B}},useVisible:function(){var t=(0,a.rx)(),B=(0,a.p3)();return t&&!B}}),i()(i()({},d),{},{useVisible:function(){var t=(0,a.w5)(),B=(0,a.p3)(),X=(0,R.z9)(),V=X.fieldSchema,U=(0,n.zh)()||{},D=U.type;return t&&!V&&!B&&D!=="publicForm"}}),i()(i()({},I()),{},{useVisible:function(){var t=(0,a.p3)(),B=(0,a.w5)(),X=(0,z.K)();return!t&&B&&X()}}),i()(i()({},F),{},{useVisible:a.w5}),i()(i()({},m),{},{useVisible:function(){var t=(0,a.p3)();return(0,a.w5)()&&t}}),f.o_,i()(i()({},f.dQ),{},{useVisible:function(){var t=(0,n.Hy)(),B=(0,a.p3)();return!(0,a.w5)()&&B&&t.interface!=="multipleSelect"}}),i()(i()({},f._3),{},{useVisible:function(){var t,B,X=(0,g.useField)(),V=(0,a.w5)(),U=(0,R.z9)(),D=U.fieldSchema,ne=(0,g.useFieldSchema)(),q=D||ne;return((q==null?void 0:q["x-read-pretty"])||X.readPretty)&&((q==null||(t=q["x-component-props"])===null||t===void 0?void 0:t.enableLink)||V&&(q==null||(B=q["x-component-props"])===null||B===void 0?void 0:B.enableLink)!==!1)}})]}),O=new v.F({name:"fieldSettings:component:FilterSelect",items:[i()(i()({},S),{},{useVisible:a.w5}),i()(i()({},l),{},{useVisible:function(){var t=(0,a.rx)(),B=(0,a.p3)();return t&&!B}}),i()(i()({},u),{},{useComponentProps:function(){var t=(0,R.z9)(),B=t.fieldSchema;return{fieldSchema:B}},useVisible:function(){var t=(0,a.rx)(),B=(0,a.p3)();return t&&!B}}),I({title:"Allow multiple selection"}),i()(i()({},F),{},{useVisible:a.w5}),i()(i()({},m),{},{useVisible:function(){var t=(0,a.p3)();return(0,a.w5)()&&t}})]})},18591:function(He,ae,e){"use strict";e.d(ae,{a4:function(){return z},n:function(){return Q},r3:function(){return $}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(15009),C=e.n(g),A=e(99289),r=e.n(A),K=e(5552),v=e(80844),j=e(84327),h=e(67294),M=e(26793),n=e(98755),y=e(68091),L=e(69962),o=e(11189),a=e(62954),R=e(38342),E=e(85893),$=function(){var b=(0,n.L)();return(0,h.useCallback)(function(){var f=r()(C()().mark(function x(m){return C()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,b.request({method:"POST",url:"/uiSchemas:insert",data:m});case 2:case"end":return I.stop()}},x)}));return function(x){return f.apply(this,arguments)}}(),[b])},Q=function(){var b=(0,M.$)(),f=b.t,x=(0,h.useContext)(v.SchemaOptionsContext),m=(0,L.mg)(),F=m.theme,I=(0,R.y)(),d=I.componentCls,u=I.hashId,l=(0,a.T0O)(),S=(0,a.FMn)(),H=S.createRoute,O=$(),N=(0,h.useCallback)(r()(C()().mark(function t(){var B,X,V,U,D;return C()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,(0,a.D_t)(f("Add page"),function(){return(0,E.jsx)(a.G0E,{scope:x.scope,components:i()({},x.components),children:(0,E.jsx)(K.FormLayout,{layout:"vertical",children:(0,E.jsx)(a.n6,{schema:{properties:{title:{title:f("Menu item title"),required:!0,"x-component":"Input","x-decorator":"FormItem"},icon:{title:f("Icon"),"x-component":"IconPicker","x-decorator":"FormItem"}}}})})})},F).open({initialValues:{}});case 2:return B=q.sent,X=(0,j.uid)(),V=(0,j.uid)(),U=(0,j.uid)(),D=(0,j.uid)(),q.next=9,H({type:o.H.page,title:B.title,icon:B.icon,parentId:l==null?void 0:l.id,schemaUid:V,menuSchemaUid:X,enableTabs:!1,children:[{type:o.H.tabs,schemaUid:U,tabSchemaName:D,hidden:!0}]});case 9:O(z({pageSchemaUid:V,tabSchemaUid:U,tabSchemaName:D}));case 10:case"end":return q.stop()}},t)})),[H,O,x==null?void 0:x.components,x==null?void 0:x.scope,l==null?void 0:l.id,f,F]);return(0,E.jsx)(y.lV,{title:f("Page"),onClick:N,className:"".concat(d," ").concat(u)})};function z(p){var b=p.pageSchemaUid,f=p.tabSchemaUid,x=p.tabSchemaName;return{type:"void","x-component":"Page",properties:c()({},x,{type:"void","x-component":"Grid","x-initializer":"page:addBlock",properties:{},"x-uid":f,"x-async":!0}),"x-uid":b}}},9028:function(He,ae,e){"use strict";e.d(ae,{b:function(){return f},R:function(){return b}});var Z=e(43868),c=e(15009),k=e.n(c),i=e(97857),g=e.n(i),C=e(99289),A=e.n(C),r=e(5552),K=e(80844),v=e(55648),j=e(67294),h=e(26793),M=e(89250),n=e(68091),y=e(69962),L=e(11189),o=e(62954),a=e(38342),R=e(83954),E=e(85893),$=function(){var m=(0,h.$)(),F=m.t,I=(0,j.useContext)(K.SchemaOptionsContext),d=(0,y.mg)(),u=d.theme,l=(0,a.y)(),S=l.componentCls,H=l.hashId,O=(0,R.R)(),N=O.urlSchema,t=O.paramsSchema,B=(0,o.T0O)(),X=(0,o.FMn)(),V=X.createRoute,U=(0,j.useCallback)(A()(k()().mark(function D(){var ne,q,J,Y,P;return k()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.next=2,(0,o.D_t)(F("Add link"),function(){var G=(0,v.PP)();return(0,E.jsx)(M.Router,{location:G.location,navigator:G,children:(0,E.jsx)(o.G0E,{scope:I.scope,components:g()({},I.components),children:(0,E.jsx)(r.FormLayout,{layout:"vertical",children:(0,E.jsx)(o.n6,{schema:{properties:{title:{title:F("Menu item title"),required:!0,"x-component":"Input","x-decorator":"FormItem"},icon:{title:F("Icon"),"x-component":"IconPicker","x-decorator":"FormItem"},href:N,params:t}}})})})})},u).open({initialValues:{}});case 2:return ne=ie.sent,q=ne.title,J=ne.href,Y=ne.params,P=ne.icon,ie.next=6,V({type:L.H.link,title:q,icon:P,parentId:B==null?void 0:B.id,options:{href:J,params:Y}});case 6:case"end":return ie.stop()}},D)})),[I.components,I.scope,F,u]);return(0,E.jsx)(n.lV,{title:F("Link"),onClick:U,className:"".concat(S," ").concat(H)})},Q=e(18591),z=e(84327),p=function(){var m=(0,h.$)(),F=m.t,I=(0,j.useContext)(K.SchemaOptionsContext),d=(0,y.mg)(),u=d.theme,l=(0,a.y)(),S=l.componentCls,H=l.hashId,O=(0,o.T0O)(),N=(0,o.FMn)(),t=N.createRoute,B=(0,j.useCallback)(A()(k()().mark(function X(){var V,U,D,ne;return k()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,(0,o.D_t)(F("Add group"),function(){return(0,E.jsx)(o.G0E,{scope:I.scope,components:g()({},I.components),children:(0,E.jsx)(r.FormLayout,{layout:"vertical",children:(0,E.jsx)(o.n6,{schema:{properties:{title:{title:F("Menu item title"),"x-component":"Input","x-decorator":"FormItem",required:!0},icon:{title:F("Icon"),"x-component":"IconPicker","x-decorator":"FormItem"}}}})})})},u).open({initialValues:{}});case 2:return V=J.sent,U=V.title,D=V.icon,ne=(0,z.uid)(),J.next=7,t({type:L.H.group,title:U,icon:D,parentId:O==null?void 0:O.id,schemaUid:ne});case 7:case"end":return J.stop()}},X)})),[I.components,I.scope,F,u]);return(0,E.jsx)(n.lV,{title:F("Group"),onClick:B,className:"".concat(S," ").concat(H)})},b=new Z.e({name:"MenuItemInitializers",insertPosition:"beforeEnd",icon:"PlusOutlined",title:'{{t("Add menu item")}}',style:{width:"100%"},items:[{name:"group",Component:p},{name:"page",Component:Q.n},{name:"link",Component:$}]}),f=new Z.e({name:"menuInitializers:menuItem",insertPosition:"beforeEnd",icon:"PlusOutlined",title:'{{t("Add menu item")}}',items:[{name:"group",Component:p},{name:"page",Component:Q.n},{name:"link",Component:$}]})},39270:function(He,ae,e){"use strict";e.d(ae,{B:function(){return j},W:function(){return v}});var Z=e(97857),c=e.n(Z),k=e(67294),i=e(35120),g=e(76858),C=e(90974),A=e(85893),r={defaultOpenMode:"drawer",openModeToComponent:{drawer:i.ZP,page:C.Z,modal:g.ZP},hideOpenMode:!1},K=k.createContext(null),v=function(M){var n=(0,k.useMemo)(function(){var o=c()({},r);return M.defaultOpenMode!==void 0&&(o.defaultOpenMode=M.defaultOpenMode),M.openModeToComponent!==void 0&&(o.openModeToComponent=M.openModeToComponent),M.hideOpenMode!==void 0&&(o.hideOpenMode=M.hideOpenMode),M.isMobile&&(o.isMobile=M.isMobile),o},[M.defaultOpenMode,M.openModeToComponent,M.hideOpenMode]),y=(0,k.useCallback)(function(o){var a=n.openModeToComponent[o];return a||console.error("OpenModeProvider: openModeToComponent[".concat(o,"] is not defined")),a},[n]),L=(0,k.useMemo)(function(){return{defaultOpenMode:n.defaultOpenMode,hideOpenMode:n.hideOpenMode,getComponentByOpenMode:y,isMobile:n.isMobile}},[n.defaultOpenMode,n.hideOpenMode,y,n.isMobile]);return(0,A.jsx)(K.Provider,{value:L,children:M.children})},j=function(){return k.useContext(K)}},74483:function(He,ae,e){"use strict";e.d(ae,{y:function(){return r}});var Z=e(5574),c=e.n(Z),k=e(80844),i=e(67294),g=e(62954),C=e(75585),A=e(85893),r=function(v){var j,h,M=v.visible,n=v.setVisible,y=(0,i.useState)(!1),L=c()(y,2),o=L[0],a=L[1],R=(0,i.useState)(!1),E=c()(R,2),$=E[0],Q=E[1],z=(0,i.useContext)(C.Ao)||{visible:!1,setVisible:function(){}},p=z.visible,b=z.setVisible,f=(0,k.useFieldSchema)(),x=(0,i.useCallback)(function(I){n==null||n(I),a==null||a(I),b==null||b(I)},[n,b]),m=v.openMode||((j=f["x-component-props"])===null||j===void 0?void 0:j.openMode)||"drawer",F=v.openSize||((h=f["x-component-props"])===null||h===void 0?void 0:h.openSize);return(0,A.jsx)(C.OA,{visible:!1,children:(0,A.jsx)(g.EIK,{visible:M||o||p,setVisible:x,openMode:m,openSize:F,formValueChanged:$,setFormValueChanged:Q,children:v.children})})}},23048:function(He,ae,e){"use strict";e.d(ae,{E:function(){return Z.ES}});var Z=e(22891)},73691:function(He,ae,e){"use strict";e.d(ae,{Rm:function(){return r},Sw:function(){return K},ec:function(){return v}});var Z=e(67294),c=e(26793),k=e(49834),i=e(58837),g=e(85893),C=Z.createContext(null),A=Z.createContext(null),r=Z.memo(function(j){var h,M,n=(0,c.$)(),y=n.t,L=(0,k.nE)(),o=(0,i.Kx)(),a=K();return(0,g.jsx)(A.Provider,{value:{name:"$nParentPopupRecord",title:y("Parent popup record"),value:((h=j.parent)===null||h===void 0?void 0:h.recordData)||(a==null?void 0:a.value),collection:((M=j.parent)===null||M===void 0?void 0:M.collection)||(a==null?void 0:a.collection)},children:(0,g.jsx)(C.Provider,{value:{name:"$nPopupRecord",title:y("Current popup record"),value:j.recordData||L,collection:j.collection||o},children:j.children})})});r.displayName="VariablePopupRecordProvider";var K=function(){return Z.useContext(C)},v=function(){return Z.useContext(A)}},7825:function(He,ae,e){"use strict";e.d(ae,{p:function(){return Le},q:function(){return Te}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(12444),C=e.n(g),A=e(72004),r=e.n(A),K=e(31996),v=e.n(K),j=e(26037),h=e.n(j),M=e(97857),n=e.n(M),y=e(68400),L=e.n(y),o=e(18791),a=e(3407),R=e(97133),E=e(22248),$=e(84816),Q=e(84157),z=e(57953),p=e(15867),b=e(59720),f=e(5914),x=e(67294),m=e(89250),F=e(47646),I=e(31601),d=e(67174),u=e(6145),l=e(69803),S=e(36203),H=e(65213),O=e(8918),N=e(62954),t=e(39594),B=e(75585),X=e(67096),V=e(90297),U=e(15195),D=e(15585),ne=e(6438),q=e(25098),J=e.n(q),Y=e(9783),P=e.n(Y),w=e(50754),ie=e(28459),G=e(3321),le=e(27484),xe=e.n(le),_e=e(54579),Ee=e(35310),ze=function(je){v()(fe,je);var Pe=h()(fe);function fe(){var re;C()(this,fe);for(var T=arguments.length,ce=new Array(T),be=0;be<T;be++)ce[be]=arguments[be];return re=Pe.call.apply(Pe,[this].concat(ce)),P()(J()(re),"locales",{}),re}return r()(fe,[{key:"afterAdd",value:function(){var re=i()(c()().mark(function ce(){var be=this,oe,Re,Ze,We,tt,St,Tt,lt,ut,nt,Je,hn;return c()().wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:return oe=this.app.apiClient,Re=oe.auth.locale,vn.prev=2,vn.next=5,oe.request({url:"app:getLang",params:{locale:Re},headers:{"X-Role":"anonymous"}});case 5:return lt=vn.sent,ut=lt==null?void 0:lt.data,this.locales=(ut==null?void 0:ut.data)||{},this.app.use(ie.ZP,{locale:this.locales.antd,popupMatchSelectWidth:!1}),this.app.use(G.Z,{component:!1}),ut!=null&&(Ze=ut.data)!==null&&Ze!==void 0&&Ze.lang&&(oe.auth.setLocale(ut==null||(nt=ut.data)===null||nt===void 0?void 0:nt.lang),this.app.i18n.changeLanguage(ut==null||(Je=ut.data)===null||Je===void 0?void 0:Je.lang)),Object.keys((ut==null||(We=ut.data)===null||We===void 0?void 0:We.resources)||{}).forEach(function(an){var fn,cn;be.app.i18n.addResources(ut==null||(fn=ut.data)===null||fn===void 0?void 0:fn.lang,an,(ut==null||(cn=ut.data)===null||cn===void 0?void 0:cn.resources[an])||{})}),(0,w.setValidateLanguage)(ut==null||(tt=ut.data)===null||tt===void 0?void 0:tt.lang),(0,_e.L)(ut==null?void 0:ut.data),hn=Ee.yx[ut==null||(St=ut.data)===null||St===void 0?void 0:St.lang]||"en",vn.next=17,e(40408)("./".concat(hn));case 17:xe().locale(hn),window.cronLocale=ut==null||(Tt=ut.data)===null||Tt===void 0?void 0:Tt.cron,vn.next=25;break;case 21:throw vn.prev=21,vn.t0=vn.catch(2),vn.t0;case 25:case"end":return vn.stop()}},ce,this,[[2,21]])}));function T(){return re.apply(this,arguments)}return T}()}]),fe}(I.S),Se=e(85893),se,me,pe=function(){return(0,Se.jsx)(z.Z,{style:{position:"fixed",top:"50%",left:"50%",fontSize:72,transform:"translate(-50%, -50%)"}})},ee=function(Pe,fe){var re;if(!fe)return{};var T=(fe==null||(re=fe.response)===null||re===void 0||(re=re.data)===null||re===void 0||(re=re.errors)===null||re===void 0?void 0:re[0])||fe,ce=(0,$.getSubAppName)(Pe.getPublicPath());switch(T.code){case"USER_HAS_NO_ROLES_ERR":return{title:Pe.i18n.t("Permission denied"),subTitle:T.message,extra:[(0,Se.jsx)(p.ZP,{type:"primary",onClick:function(){Pe.apiClient.auth.setToken(null),window.location.reload()},children:Pe.i18n.t("Sign in with another account")},"try"),ce?(0,Se.jsx)(p.ZP,{onClick:function(){return window.location.href="/admin"},children:Pe.i18n.t("Return to the main application")},"back"):null]};default:return{}}},ue=(0,E.observer)(function(je){var Pe=je.app,fe=je.error,re=ee(Pe,fe);return(0,Se.jsx)("div",{children:(0,Se.jsx)(b.ZP,n()({className:(0,R.css)(se||(se=L()([`
            top: 50%;
            position: absolute;
            width: 100%;
            transform: translate(0, -50%);
          `]))),status:"error",title:Pe.i18n.t("App error"),subTitle:Pe.i18n.t(fe==null?void 0:fe.message),extra:[(0,Se.jsx)(p.ZP,{type:"primary",onClick:function(){return window.location.reload()},children:Pe.i18n.t("Try again")},"try")]},re))})},{displayName:"AppError"}),ge=function(Pe){var fe;if(Pe.ws.serverDown)return{status:"error",icon:(0,Se.jsx)(o.Z,{}),title:"You're offline",subTitle:"Please check the server status or network connection status"};if(!Pe.error)return{};if(Pe.error.code==="APP_NOT_FOUND"){var re;return{status:"warning",title:"App not found",subTitle:(re=Pe.error)===null||re===void 0?void 0:re.message}}if(Pe.error.code==="APP_INITIALIZING"){var T;return{status:"info",icon:(0,Se.jsx)(a.Z,{}),title:"App initializing",subTitle:(T=Pe.error)===null||T===void 0?void 0:T.message}}if(Pe.error.code==="APP_INITIALIZED"){var ce;return{status:"warning",title:"App initialized",subTitle:(ce=Pe.error)===null||ce===void 0?void 0:ce.message}}if(["ENOENT","APP_ERROR","LOAD_ERROR"].includes(Pe.error.code)){var be;return{status:"error",title:"App error",subTitle:(be=Pe.error)===null||be===void 0?void 0:be.message}}if(Pe.error.code==="APP_NOT_INSTALLED_ERROR"){var oe;return{status:"warning",title:"App not installed",subTitle:(oe=Pe.error)===null||oe===void 0?void 0:oe.message}}if(Pe.error.code==="APP_STOPPED"){var Re;return{status:"warning",title:"App stopped",subTitle:(Re=Pe.error)===null||Re===void 0?void 0:Re.message}}if(Pe.error.code==="APP_COMMANDING"){var Ze,We,tt,St={status:"info",icon:(0,Se.jsx)(a.Z,{}),title:(Ze=Pe.error)===null||Ze===void 0||(Ze=Ze.command)===null||Ze===void 0?void 0:Ze.name,subTitle:(We=Pe.error)===null||We===void 0?void 0:We.message},Tt={start:{title:"App starting"},restart:{title:"App restarting"},install:{title:"App installing"},upgrade:{title:"App upgrading"},"pm.add":{title:"Adding plugin"},"pm.update":{title:"Updating plugin"},"pm.enable":{title:"Enabling plugin"},"pm.disable":{title:"Disabling plugin"},"pm.remove":{title:"Removing plugin"}};return n()(n()({},St),Tt[(tt=Pe.error)===null||tt===void 0||(tt=tt.command)===null||tt===void 0?void 0:tt.name])}return{status:"warning",title:"App warning",subTitle:(fe=Pe.error)===null||fe===void 0?void 0:fe.message}},Ie=(0,E.observer)(function(je){var Pe=je.app,fe=ge(Pe),re=fe.icon,T=fe.status,ce=fe.title,be=fe.subTitle;return(0,Se.jsx)("div",{children:(0,Se.jsx)(b.ZP,{className:(0,R.css)(me||(me=L()([`
            top: 50%;
            position: absolute;
            width: 100%;
            transform: translate(0, -50%);
          `]))),icon:re,status:T,title:Pe.i18n.t(ce),subTitle:(0,Se.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:Pe.i18n.t(be)})})})},{displayName:"AppMaintaining"}),Ae=(0,E.observer)(function(je){var Pe=je.app,fe=ge(Pe),re=fe.icon,T=fe.status,ce=fe.title,be=fe.subTitle;return(0,Se.jsx)(f.Z,{open:!0,footer:null,closable:!1,children:(0,Se.jsx)(b.ZP,{icon:re,status:T,title:Pe.i18n.t(ce),subTitle:Pe.i18n.t(be)})})},{displayName:"AppMaintainingDialog"}),Le=function(){var Pe=(0,m.useNavigate)();return(0,Se.jsx)(b.ZP,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:(0,Se.jsx)(p.ZP,{onClick:function(){return Pe("/",{replace:!0})},type:"primary",children:"Back Home"})})},Te=function(je){v()(fe,je);var Pe=h()(fe);function fe(){return C()(this,fe),Pe.apply(this,arguments)}return r()(fe,[{key:"afterAdd",value:function(){var re=i()(c()().mark(function ce(){return c()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return this.app.addComponents({AppSpin:pe,AppError:ue,AppMaintaining:Ie,AppMaintainingDialog:Ae,AppNotFound:Le}),oe.next=3,this.addPlugins();case 3:case"end":return oe.stop()}},ce,this)}));function T(){return re.apply(this,arguments)}return T}()},{key:"load",value:function(){var re=i()(c()().mark(function ce(){return c()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:this.addComponents(),this.addRoutes(),this.app.use(ne.MF),this.app.use(ne.mY),this.app.pluginSettingsManager.add("security",{title:(0,Q.tval)("Security"),icon:"SafetyOutlined"});case 5:case"end":return oe.stop()}},ce,this)}));function T(){return re.apply(this,arguments)}return T}()},{key:"addRoutes",value:function(){this.router.add("root",{path:"/",element:(0,Se.jsx)(m.Navigate,{replace:!0,to:"/admin"})}),this.router.add("not-found",{path:"*",Component:Le}),this.router.add("admin",{path:"/admin",Component:"AdminLayout"}),this.router.add("admin.page",{path:"/admin/:name",Component:"AdminDynamicPage"}),this.router.add("admin.page.tab",{path:"/admin/:name/tabs/:tabUid",Component:N.hGv}),this.router.add("admin.page.popup",{path:"/admin/:name/popups/*",Component:B.d9}),this.router.add("admin.page.tab.popup",{path:"/admin/:name/tabs/:tabUid/popups/*",Component:B.d9})}},{key:"addComponents",value:function(){this.app.addComponents({ErrorFallback:t.H,RouteSchemaComponent:O.GX,BlockTemplatePage:U.EF,BlockTemplateDetails:U.bs})}},{key:"addPlugins",value:function(){var re=i()(c()().mark(function ce(){return c()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:return oe.next=2,this.app.pm.add(X.Ys);case 2:return oe.next=4,this.app.pm.add(ze,{name:"builtin-locale"});case 4:return oe.next=6,this.app.pm.add(O.r3,{name:"admin-layout"});case 6:return oe.next=8,this.app.pm.add(D.j8,{name:"system-setting"});case 8:return oe.next=10,this.app.pm.add(S.r1,{name:"pinned-list",config:{items:{ui:{order:100,component:"DesignableSwitch",pin:!0,snippet:"ui.*"},pm:{order:200,component:"PluginManagerLink",pin:!0,snippet:"pm"},sc:{order:300,component:"SettingsCenterDropdown",pin:!0,snippet:"pm.*"}}}});case 10:return oe.next=12,this.app.pm.add(N.a$w,{name:"schema-component"});case 12:return oe.next=14,this.app.pm.add(X.dH,{name:"schema-initializer"});case 14:return oe.next=16,this.app.pm.add(V.zM,{name:"schema-settings"});case 16:return oe.next=18,this.app.pm.add(d.jF,{name:"block-schema-component"});case 18:return oe.next=20,this.app.pm.add(N.HTy,{name:"antd-schema-component"});case 20:return oe.next=22,this.app.pm.add(F.pz,{name:"builtin-acl"});case 22:return oe.next=24,this.app.pm.add(l.uN,{name:"remote-document-title"});case 24:return oe.next=26,this.app.pm.add(H.Np,{name:"builtin-pm"});case 26:return oe.next=28,this.app.pm.add(u.CollectionPlugin,{name:"builtin-collection"});case 28:case"end":return oe.stop()}},ce,this)}));function T(){return re.apply(this,arguments)}return T}()}]),fe}(I.S)},36203:function(He,ae,e){"use strict";e.d(ae,{r1:function(){return w},B$:function(){return Y},uv:function(){return n},tc:function(){return ne}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(12444),C=e.n(g),A=e(72004),r=e.n(A),K=e(31996),v=e.n(K),j=e(26037),h=e.n(j),M=e(67294),n=(0,M.createContext)({items:{}});n.displayName="PinnedPluginListContext";var y=e(68400),L=e.n(y),o=e(97857),a=e.n(o),R=e(97133),E=e(80844),$=e(28459),Q=e(96074),z=e(96486),p=e(75667),b=e(10383),f=e(5574),x=e.n(f),m=e(17663),F=e(22248),I=e(84157),d=e(68508),u=e(55241),l=e(85418),S=e(26793),H=e(21143),O=e(38714),N=e(85893),t,B,X=function(){var G,le,xe=(0,S.$)(),_e=xe.t,Ee=(0,O._S)(),ze=(0,H.useToken)(),Se=ze.token,se=(Ee==null||(G=Ee.data)===null||G===void 0?void 0:G.lang)==="zh-CN",me=[{key:"nocobase",disabled:!0,label:(0,N.jsxs)("div",{style:{cursor:"text"},children:[(0,N.jsx)("div",{style:{color:Se.colorText},children:"NocoBase"}),(0,N.jsxs)("div",{style:{fontSize:"0.8em",color:Se.colorTextDescription},children:["v",Ee==null||(le=Ee.data)===null||le===void 0?void 0:le.version]})]})},{key:"divider_1",type:"divider"},{key:"homePage",label:(0,N.jsx)("a",{href:se?"https://www.nocobase.com/cn/":"https://www.nocobase.com",target:"_blank",rel:"noreferrer",children:_e("Home page")})},{key:"userManual",label:(0,N.jsx)("a",{href:se?"https://docs-cn.nocobase.com/handbook":"https://docs.nocobase.com/handbook",target:"_blank",rel:"noreferrer",children:_e("Handbook")})},{key:"license",label:(0,N.jsx)("a",{href:se?"https://www.nocobase.com/cn/agreement":"https://www.nocobase.com/en/agreement",target:"_blank",rel:"noreferrer",children:_e("License")})}];return(0,N.jsx)(d.Z,{items:me})},V=(0,R.css)(t||(t=L()([`
  display: inline-block;
  vertical-align: top;
  width: 46px;
  height: 46px;
  &:hover {
    background: rgba(255, 255, 255, 0.1) !important;
  }
`]))),U=(0,F.observer)(function(){var ie,G=(0,M.useState)(!1),le=x()(G,2),xe=le[0],_e=le[1],Ee=(0,H.useToken)(),ze=Ee.token,Se=(0,H.usePlugin)("@nocobase/plugin-custom-brand"),se=(0,O._S)(),me=(0,N.jsx)("span",{"data-testid":"help-button",className:(0,R.css)(B||(B=L()([`
          max-width: 160px;
          overflow: hidden;
          display: inline-block;
          line-height: 12px;
          white-space: nowrap;
          text-overflow: ellipsis;
        `]))),style:{cursor:"pointer",padding:"16px",color:ze.colorTextHeaderMenu},children:(0,N.jsx)(m.Z,{})});if(Se!=null&&(ie=Se.options)!==null&&ie!==void 0&&(ie=ie.options)!==null&&ie!==void 0&&ie.about){var pe,ee='<span class="nb-app-version">v'.concat(se==null||(pe=se.data)===null||pe===void 0?void 0:pe.version,"</span>"),ue=(0,I.parseHTML)(Se.options.options.about,{appVersion:ee});return(0,N.jsx)("div",{className:V,children:(0,N.jsx)(u.Z,{rootClassName:"nb-about",placement:"bottomRight",arrow:!1,content:(0,N.jsx)("div",{dangerouslySetInnerHTML:{__html:ue}}),children:me})})}return(0,N.jsx)("div",{className:V,children:(0,N.jsx)(H.DropdownVisibleContext.Provider,{value:{visible:xe,setVisible:_e},children:(0,N.jsx)(l.Z,{open:xe,onOpenChange:function(Ie){_e(Ie)},dropdownRender:function(){return(0,N.jsx)(X,{})},children:me})})})},{displayName:"Help"}),D,ne=function(G){var le=G.children,xe=G.items,_e=(0,M.useContext)(n);return(0,N.jsx)(n.Provider,{value:{items:a()(a()({},_e.items),xe)},children:le})},q=(0,R.css)(D||(D=L()([`
  display: inline-flex;
  align-items: center;

  .ant-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 46px;
    width: 46px;
    padding: 0;
    border: 0;
    border-radius: 0;
    background: none;
    color: rgba(255, 255, 255, 0.65);
    vertical-align: middle;

    a {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
    }

    .ant-badge {
      color: rgba(255, 255, 255, 0.65);
      .anticon {
        display: inline-block;
        vertical-align: middle;
        line-height: 1em;
        font-size: initial;
      }
      > sup {
        height: 10px;
        line-height: 10px;
        font-size: 8px;
      }
    }

    &:hover {
      background: rgba(255, 255, 255, 0.1) !important;
    }
  }

  .ant-btn-default {
    box-shadow: none;
  }
`]))),J={token:{colorSplit:"rgba(255, 255, 255, 0.1)"}},Y=M.memo(function(){var ie=(0,p.ov)(),G=ie.allowAll,le=ie.snippets,xe=function(se){return G||se==="*"||(le==null?void 0:le.includes(se))},_e=(0,M.useContext)(n),Ee=(0,M.useContext)(E.SchemaOptionsContext),ze=Ee.components;return(0,N.jsxs)("div",{className:q,children:[Object.keys(_e.items).sort(function(Se,se){return _e.items[Se].order-_e.items[se].order}).filter(function(Se){return xe(_e.items[Se].snippet)}).map(function(Se){var se=(0,z.get)(ze,_e.items[Se].component);return se?(0,N.jsx)(se,{},Se):null}),(0,N.jsx)($.ZP,{theme:J,children:(0,N.jsx)(Q.Z,{type:"vertical"})}),(0,N.jsx)(U,{},"help"),(0,N.jsx)(b.X,{})]})});Y.displayName="PinnedPluginList";var P=e(31601),w=function(ie){v()(le,ie);var G=h()(le);function le(){return C()(this,le),G.apply(this,arguments)}return r()(le,[{key:"load",value:function(){var xe=i()(c()().mark(function Ee(){return c()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:this.app.use(ne,this.options.config);case 1:case"end":return Se.stop()}},Ee,this)}));function _e(){return xe.apply(this,arguments)}return _e}()}]),le}(P.S)},65213:function(He,ae,e){"use strict";e.d(ae,{i9:function(){return ct},Np:function(){return Mt},Q$:function(){return Rn},s0:function(){return S},EV:function(){return rr},zK:function(){return H}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(12444),C=e.n(g),A=e(72004),r=e.n(A),K=e(31996),v=e.n(K),j=e(26037),h=e.n(j),M=e(67294),n=e(68091),y=e(31601),L=e(15195),o=e(15585),a=e(68400),R=e.n(a),E=e(19632),$=e.n(E),Q=e(5574),z=e.n(Q),p=e(80205),b=e(22913),f=e(83062),x=e(15867),m=e(85418),F=e(26793),I=e(79655),d=e(62954),u=e(68230),l=e(85893),S=function(){var _t=(0,F.$)(),Bt=_t.t,jt=(0,n.WO)(),Xt=(0,u.d)(),Wt=Xt.token;return(0,l.jsx)(f.Z,{title:Bt("Plugin manager"),children:(0,l.jsx)(x.ZP,{"data-testid":"plugin-manager-button",icon:(0,l.jsx)(p.Z,{style:{color:Wt.colorTextHeaderMenu}}),title:Bt("Plugin manager"),onClick:function(){jt("/admin/pm/list")}})})},H=function(){var _t=(0,d.eJW)(),Bt=(0,F.$)(),jt=Bt.t,Xt=(0,u.d)(),Wt=Xt.token,Nt=(0,n.qD)(),nn=(0,M.useMemo)(function(){var Zt=Nt.pluginSettingsManager.getList();return Zt.filter(function(Cn){return Cn.isTopLevel!==!1}).map(function(Cn){return{key:Cn.name,icon:Cn.icon,label:Cn.link?(0,l.jsx)("div",{onClick:function(){return window.open(Cn.link)},children:_t(Cn.title)}):(0,l.jsx)(I.Link,{to:Cn.path,children:_t(Cn.title)})}})},[Nt,jt]);return(0,M.useEffect)(function(){return function(){Nt.pluginSettingsManager.clearCache()}},[Nt.pluginSettingsManager]),(0,l.jsx)(m.Z,{menu:{style:{maxHeight:"70vh",overflow:"auto"},items:nn},children:(0,l.jsx)(x.ZP,{"data-testid":"plugin-settings-button",icon:(0,l.jsx)(b.Z,{style:{color:Wt.colorTextHeaderMenu}})})})},O=e(97832),N=e(58580),t=e(5914),B=e(69677),X=e(16455),V=e(57953),U=e(42075),D=e(96074),ne=e(71230),q=e(15746),J=e(2487),Y=e(56140),P=e(59720),w=e(96486),ie=e.n(w),G=e(89250),le=e(97133),xe=e(75667),_e=e(12174),Ee=e(69803),ze=e(9783),Se=e.n(ze),se=e(96725),me=e(18972),pe=e(3407),ee=e(84249),ue=e(3321),ge=e(4393),Ie=e(86738),Ae=e(59637),Le=e(48997),Te=e(93967),je=e.n(Te),Pe=e(66309),fe=e(38925),re=e(27484),T=e.n(re),ce=e(84110),be=e.n(ce),oe=e(27443),Re=(0,oe.kc)(function(Rt){var _t=Rt.token;return{cardActionDisabled:{color:_t.colorTextDisabled,cursor:"not-allowed"},pageHeader:{backgroundColor:_t.colorBgContainer,paddingTop:_t.paddingSM,paddingBottom:0,paddingInline:_t.paddingLG,".ant-page-header-footer":{marginBlockStart:"0"},"& .ant-tabs-nav":{marginBottom:0},".ant-page-header-heading-title":{color:_t.colorText}},pageContent:{margin:_t.marginLG},PluginDetailBaseInfo:{display:"flex",flexDirection:"column",marginBottom:_t.margin},PluginDocument:{background:_t.colorBgContainer,padding:_t.paddingLG,height:"60vh",overflowY:"auto"},avatar:{".ant-card-meta-avatar":{marginTop:"8px",".ant-avatar":{borderRadius:"2px"}}},version:{display:"block",color:_t.colorTextDescription,fontWeight:"normal",fontSize:_t.fontSize}}});T().extend(be());var Ze=function(_t){var Bt,jt,Xt,Wt,Nt,nn,Zt,Cn,Yt=_t.plugin,Mn=_t.onCancel,bn=(0,F.$)(),Gt=bn.t,ln=(0,M.useMemo)(function(){return[{title:Gt("Name"),dataIndex:"name",key:"name"},{title:Gt("Version range"),dataIndex:"versionRange",key:"versionRange"},{title:Gt("Plugin's version"),dataIndex:"packageVersion",key:"packageVersion"},{title:Gt("Result"),dataIndex:"result",key:"result",render:function(Fe){return(0,l.jsx)(Pe.Z,{color:Fe?"success":"error",children:Fe?"Yes":"No"})}}]},[Gt]),Hn=(0,_e.QT)({url:"pm:get",params:{filterByTk:Yt.name}},{refreshDeps:[Yt.name],ready:!!Yt.name}),sn=Hn.data,Ln=Hn.loading,Bn=(0,M.useMemo)(function(){var Oe,Fe;if(!(sn!=null&&(Oe=sn.data)!==null&&Oe!==void 0&&(Oe=Oe.packageJson)!==null&&Oe!==void 0&&Oe.repository))return null;var Ne=sn==null||(Fe=sn.data)===null||Fe===void 0?void 0:Fe.packageJson.repository,Xe=typeof Ne=="string"?Ne:Ne.url;return Xe.replace(/\.git$/,"").replace(/^git\+/,"")},[sn]),wn=(0,M.useMemo)(function(){var Oe,Fe=sn==null||(Oe=sn.data)===null||Oe===void 0?void 0:Oe.packageJson.author;return Fe?typeof Fe=="string"?Fe:Fe.name:null},[sn]),st=Re(),Ke=st.styles,De=st.theme,Ce=[{key:"readme",label:Gt("Readme"),children:(0,l.jsxs)(ne.Z,{gutter:20,children:[Yt.name&&(0,l.jsx)(q.Z,{span:24,children:(0,l.jsxs)("div",{className:Ke.PluginDetailBaseInfo,children:[(0,l.jsx)(Le.Z.Text,{type:"secondary",children:Gt("Name")}),(0,l.jsx)(Le.Z.Text,{strong:!0,children:Yt.name})]})}),Yt.displayName&&(0,l.jsx)(q.Z,{span:24,children:(0,l.jsxs)("div",{className:Ke.PluginDetailBaseInfo,children:[(0,l.jsx)(Le.Z.Text,{type:"secondary",children:Gt("DisplayName")}),(0,l.jsx)(Le.Z.Text,{strong:!0,children:Yt.displayName})]})}),(0,l.jsx)(q.Z,{span:24,children:(0,l.jsxs)("div",{className:Ke.PluginDetailBaseInfo,children:[(0,l.jsx)(Le.Z.Text,{type:"secondary",children:Gt("PackageName")}),(0,l.jsx)(Le.Z.Text,{strong:!0,children:Yt.packageName})]})}),Bn&&(0,l.jsx)(q.Z,{span:24,children:(0,l.jsxs)("div",{className:Ke.PluginDetailBaseInfo,children:[(0,l.jsx)(Le.Z.Text,{type:"secondary",children:Gt("Repository")}),(0,l.jsx)(Le.Z.Text,{strong:!0,children:Bn})]})}),(sn==null||(Bt=sn.data)===null||Bt===void 0?void 0:Bt.homepage)&&(0,l.jsx)(q.Z,{span:24,children:(0,l.jsxs)("div",{className:Ke.PluginDetailBaseInfo,children:[(0,l.jsx)(Le.Z.Text,{type:"secondary",children:Gt("Homepage")}),(0,l.jsx)("a",{href:sn==null||(jt=sn.data)===null||jt===void 0?void 0:jt.homepage,target:"_blank",rel:"noreferrer",children:sn==null||(Xt=sn.data)===null||Xt===void 0?void 0:Xt.homepage})]})}),Yt.description&&(0,l.jsx)(q.Z,{span:24,children:(0,l.jsxs)("div",{className:Ke.PluginDetailBaseInfo,children:[(0,l.jsx)(Le.Z.Text,{type:"secondary",children:Gt("Description")}),(0,l.jsx)(Le.Z.Text,{strong:!0,children:Yt.description})]})}),(sn==null||(Wt=sn.data)===null||Wt===void 0?void 0:Wt.packageJson.license)&&(0,l.jsx)(q.Z,{span:24,children:(0,l.jsxs)("div",{className:Ke.PluginDetailBaseInfo,children:[(0,l.jsx)(Le.Z.Text,{type:"secondary",children:Gt("License")}),(0,l.jsx)(Le.Z.Text,{strong:!0,children:sn==null||(Nt=sn.data)===null||Nt===void 0?void 0:Nt.packageJson.license})]})}),wn&&(0,l.jsx)(q.Z,{span:24,children:(0,l.jsxs)("div",{className:Ke.PluginDetailBaseInfo,children:[(0,l.jsx)(Le.Z.Text,{type:"secondary",children:Gt("Author")}),(0,l.jsx)(Le.Z.Text,{strong:!0,children:wn})]})}),(0,l.jsx)(q.Z,{span:24,children:(0,l.jsxs)("div",{className:Ke.PluginDetailBaseInfo,children:[(0,l.jsx)(Le.Z.Text,{type:"secondary",children:Gt("Version")}),(0,l.jsx)(Le.Z.Text,{strong:!0,children:Yt==null?void 0:Yt.version})]})})]})},{key:"dependencies",label:Gt("Dependencies compatibility check"),children:(0,l.jsx)(l.Fragment,{children:(sn==null||(nn=sn.data)===null||nn===void 0?void 0:nn.depsCompatible)===!1?(0,l.jsx)(Le.Z.Text,{type:"danger",children:Gt("`dist/externalVersion.js` not found or failed to `require`. Please rebuild this plugin.")}):(0,l.jsxs)(l.Fragment,{children:[!(sn!=null&&(Zt=sn.data)!==null&&Zt!==void 0&&Zt.isCompatible)&&(0,l.jsx)(fe.Z,{showIcon:!0,type:"error",message:Gt("Plugin dependencies check failed, you should change the dependent version to meet the version requirements.")}),(0,l.jsx)(X.Z,{style:{marginTop:De.margin},rowKey:"name",pagination:!1,columns:ln,dataSource:sn==null||(Cn=sn.data)===null||Cn===void 0?void 0:Cn.depsCompatible})]})})}];return(0,l.jsx)(t.Z,{open:!!Yt,footer:!1,destroyOnClose:!0,width:600,onCancel:Mn,children:Ln?(0,l.jsx)(V.Z,{}):Yt&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Le.Z.Title,{level:3,children:Yt.packageName}),(0,l.jsx)(U.Z,{split:(0,l.jsx)("span",{children:"\xA0\u2022\xA0"}),children:(0,l.jsx)("span",{children:Yt.version})}),(0,l.jsx)(Y.Z,{style:{minHeight:"50vh"},items:Ce,defaultActiveKey:Yt.isCompatible?void 0:"dependencies"})]})})},We=e(55742),tt=e(97857),St=e.n(tt),Tt=e(80844),lt=e(84327),ut=function(_t){var Bt=_t.onClose,jt=_t.isUpgrade,Xt=_t.pluginData,Wt=ue.Z.useApp(),Nt=Wt.message,nn=[],Zt=function(){var Gt=(0,_e.LY)(),ln=(0,F.$)(),Hn=ln.t,sn=(0,Tt.useForm)();return{run:function(){return i()(c()().mark(function Bn(){return c()().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return st.next=2,sn.submit();case 2:Gt.request({url:jt?"pm:update":"pm:add",method:"post",data:St()({},sn.values)}),Bt(!0);case 4:case"end":return st.stop()}},Bn)}))()}}},Cn=function(Gt){return(0,_e.QT)(function(){return Promise.resolve({data:jt?(0,w.pick)(Xt,["name","packageName","version"]):{}})},Gt)},Yt=function(){return{run:function(){Bt()}}},Mn=(0,M.useMemo)(function(){var bn=(0,lt.uid)(),Gt={type:"object",properties:Se()({},bn,{"x-decorator":"Form","x-component":"div",type:"void","x-decorator-props":{useValues:"{{ useValuesFromProps }}"},properties:{packageName:{type:"string",title:"{{t('Npm package name')}}","x-decorator":"FormItem","x-component":"Input",required:!0,"x-component-props":{disabled:!0}},registry:{type:"string",title:"{{t('Registry url')}}",default:"https://registry.npmjs.org/","x-decorator":"FormItem","x-component":"Input","x-decorator-props":{tooltip:"Example: https://registry.npmjs.org/"}},authToken:{type:"string",title:"{{t('Npm authToken')}}","x-decorator":"FormItem","x-component":"Input"},version:{type:"string",title:"{{t('Version')}}","x-decorator":"FormItem","x-component":"Input"},footer:{type:"void","x-component":"ActionBar","x-component-props":{layout:"one-column",style:{justifyContent:"right"}},properties:{cancel:{title:"Cancel","x-component":"Action","x-component-props":{useAction:"{{ useCancel }}"}},submit:{title:'{{t("Submit")}}',"x-component":"Action","x-component-props":{type:"primary",htmlType:"submit",useAction:"{{ useSaveValues }}"}}}}}})};return Gt.properties[bn].properties.packageName["x-component-props"].disabled=jt,jt||delete Gt.properties[bn].properties.version,Gt},[jt]);return(0,l.jsx)(d.n6,{scope:{useCancel:Yt,useSaveValues:Zt,versionList:nn,useValuesFromProps:Cn},schema:Mn})};ut.displayName="PluginNpmForm";var nt=t.Z.confirm,Je=function(_t){var Bt=_t.onClose,jt=_t.pluginData,Xt=_t.isUpgrade,Wt=ue.Z.useApp(),Nt=Wt.message,nn=function(){var Mn=(0,_e.LY)(),bn=(0,F.$)(),Gt=bn.t,ln=(0,Tt.useForm)();return{run:function(){return i()(c()().mark(function sn(){var Ln,Bn,wn;return c()().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return wn=function(){Mn.silent().request({url:"__health_check",method:"get"}).then(function(Ce){(Ce==null?void 0:Ce.data)==="ok"&&window.location.reload()}).catch(function(Ce){})},Ke.next=3,ln.submit();case 3:return Bn=new FormData,Bn.append("file",(Ln=ln.values.uploadFile)===null||Ln===void 0||(Ln=Ln[0])===null||Ln===void 0?void 0:Ln.originFileObj),jt!=null&&jt.packageName&&Bn.append("packageName",jt.packageName),Ke.next=8,Mn.request({url:"pm:".concat(Xt?"update":"add"),method:"post",data:Bn});case 8:t.Z.info({icon:null,width:520,content:(0,l.jsx)(P.ZP,{icon:(0,l.jsx)(pe.Z,{}),title:Gt("Plugin uploading"),subTitle:Gt("Plugin is uploading, please wait...")}),footer:null}),Bt(!0),setInterval(wn,1e3);case 11:case"end":return Ke.stop()}},sn)}))()}}},Zt=function(){return{run:function(){Bt()}}},Cn=(0,M.useMemo)(function(){return{type:"object",properties:Se()({},(0,lt.uid)(),{"x-decorator":"Form","x-component":"div",type:"void",properties:{uploadFile:{type:"string","x-decorator":"FormItem","x-component":"Upload.Dragger",required:!0,"x-component-props":{action:"",multiple:!1,maxCount:1,height:"150px",tipContent:"{{t('Drag and drop the file here or click to upload, file size should not exceed 30M')}}",beforeUpload:function(Mn){var bn=/\.(zip|rar|tar|gz|bz2|tgz)$/,Gt=bn.test(Mn.name);Gt||Nt.error("File only support zip, rar, tar, gz, bz2!");var ln=Mn.size/1024/1024<30;return ln||Nt.error("File must smaller than 30MB!"),!1;return Gt&&ln}}},footer:{type:"void","x-component":"ActionBar","x-component-props":{layout:"one-column",style:{justifyContent:"right"}},properties:{cancel:{title:"Cancel","x-component":"Action","x-component-props":{useAction:"{{ useCancel }}"}},submit:{title:'{{t("Submit")}}',"x-component":"Action","x-component-props":{type:"primary",htmlType:"submit",useAction:"{{ useSaveValues }}"}}}}}})}},[Nt]);return(0,l.jsx)(d.n6,{scope:{useCancel:Zt,useSaveValues:nn},schema:Cn})},hn=function(_t){var Bt=_t.onClose,jt=_t.pluginData,Xt=_t.isUpgrade,Wt=ue.Z.useApp(),Nt=Wt.message,nn=function(){var bn=(0,_e.LY)(),Gt=(0,F.$)(),ln=Gt.t,Hn=(0,Tt.useForm)();return{run:function(){return i()(c()().mark(function Ln(){var Bn,wn;return c()().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:if(Bn=Hn.values.compressedFileUrl,Bn){Ke.next=3;break}return Ke.abrupt("return");case 3:return Ke.next=5,Hn.submit();case 5:wn={compressedFileUrl:Bn},jt!=null&&jt.packageName&&(wn.packageName=jt.packageName),bn.request({url:"pm:".concat(Xt?"update":"add"),method:"post",data:wn}),Bt(!0);case 9:case"end":return Ke.stop()}},Ln)}))()}}},Zt=function(bn){return(0,_e.QT)(function(){return Promise.resolve({data:{compressedFileUrl:jt.compressedFileUrl}})},bn)},Cn=function(){return{run:function(){Bt()}}},Yt=(0,M.useMemo)(function(){return{type:"object",properties:Se()({},(0,lt.uid)(),{"x-decorator":"Form","x-component":"div",type:"void","x-decorator-props":{useValues:"{{ useValuesFromProps }}"},properties:{compressedFileUrl:{type:"string","x-decorator":"FormItem","x-component":"Input",required:!0},footer:{type:"void","x-component":"ActionBar","x-component-props":{layout:"one-column",style:{justifyContent:"right"}},properties:{cancel:{title:"Cancel","x-component":"Action","x-component-props":{useAction:"{{ useCancel }}"}},submit:{title:'{{t("Submit")}}',"x-component":"Action","x-component-props":{type:"primary",htmlType:"submit",useAction:"{{ useSaveValues }}"}}}}}})}},[]);return(0,l.jsx)(d.n6,{scope:{useCancel:Cn,useValuesFromProps:Zt,useSaveValues:nn},schema:Yt})},mn=function(_t){var Bt=_t.onClose,jt=_t.isShow,Xt=_t.pluginData,Wt=(0,F.$)(),Nt=Wt.t,nn=Re(),Zt=nn.theme,Cn=(0,M.useState)("npm"),Yt=z()(Cn,2),Mn=Yt[0],bn=Yt[1];return(0,l.jsxs)(t.Z,{onCancel:function(){return Bt()},footer:null,destroyOnClose:!0,title:Nt("Update plugin"),width:580,open:jt,children:[(0,l.jsx)("div",{style:{marginTop:Zt.marginLG,marginBottom:Zt.marginLG},children:(0,l.jsxs)(We.ZP.Group,{optionType:"button",defaultValue:Mn,onChange:function(ln){return bn(ln.target.value)},children:[(0,l.jsx)(We.ZP,{value:"npm",children:Nt("Npm package")}),(0,l.jsx)(We.ZP,{value:"upload",children:Nt("Upload plugin")}),(0,l.jsx)(We.ZP,{value:"url",children:Nt("Compressed file url")})]})}),Mn==="npm"&&(0,l.jsx)(ut,{isUpgrade:!0,onClose:Bt,pluginData:Xt}),Mn==="upload"&&(0,l.jsx)(Je,{isUpgrade:!0,onClose:Bt,pluginData:Xt}),Mn==="url"&&(0,l.jsx)(hn,{isUpgrade:!0,onClose:Bt,pluginData:Xt})]})},vn;function an(Rt){var _t=Rt.data,Bt=Rt.onClick,jt=(0,n.qD)(),Xt=_t.name,Wt=_t.displayName,Nt=_t.isCompatible,nn=_t.packageName,Zt=_t.updatable,Cn=_t.builtIn,Yt=_t.enabled,Mn=_t.removable,bn=_t.description,Gt=_t.error,ln=_t.homepage,Hn=Re(),sn=Hn.styles,Ln=Hn.theme,Bn=(0,G.useNavigate)(),wn=(0,F.$)(),st=wn.t,Ke=(0,_e.LY)(),De=ue.Z.useApp(),Ce=De.modal,Oe=(0,M.useState)(!1),Fe=z()(Oe,2),Ne=Fe[0],Xe=Fe[1],dt=function(){return window.location.reload()},ht=Wt||Xt||nn;return(0,l.jsxs)(l.Fragment,{children:[Ne&&(0,l.jsx)(mn,{isShow:Ne,pluginData:_t,onClose:function(Ct){Xe(!1)}}),(0,l.jsx)(ge.Z,{role:"button","aria-label":ht,size:"small",bordered:!1,onClick:function(){!Gt&&Bt()},headStyle:{border:"none",minHeight:"inherit",paddingTop:14},bodyStyle:{paddingTop:10},title:(0,l.jsx)("div",{children:ht}),hoverable:!0,className:(0,le.css)(vn||(vn=R()([`
          .ant-card-actions {
            li .ant-space {
              gap: 2px !important;
            }
            li a {
              .anticon {
                margin-right: 3px;
                /* display: none; */
              }
            }
            li:last-child {
              width: 20% !important;
            }
            li:first-child {
              width: 80% !important;
              border-inline-end: 0;
              text-align: left;
              padding-left: 16px;
            }
          }
        `]))),actions:[(0,l.jsxs)(U.Z,{split:(0,l.jsx)(D.Z,{type:"vertical"}),children:[ln&&(0,l.jsxs)("a",{href:ln,target:"_blank",onClick:function(Ct){Ct.stopPropagation()},rel:"noreferrer",children:[(0,l.jsx)(se.Z,{})," ",st("Docs")]},"5"),Zt&&(0,l.jsxs)("a",{onClick:function(Ct){Ct.stopPropagation(),Xe(!0)},children:[(0,l.jsx)(me.Z,{})," ",st("Update")]},"3"),Yt&&jt.pluginSettingsManager.has(Xt)&&(0,l.jsxs)("a",{onClick:function(Ct){Ct.stopPropagation(),Bn(jt.pluginSettingsManager.getRoutePath(Xt))},children:[(0,l.jsx)(b.Z,{})," ",st("Settings")]}),Mn&&(0,l.jsx)(Ie.Z,{disabled:Cn,title:st("Are you sure to delete this plugin?"),onConfirm:function(){var xt=i()(c()().mark(function Ct(Dt){var Vt;return c()().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return Vt=function(){Ke.silent().request({url:"__health_check",method:"get"}).then(function(ot){(ot==null?void 0:ot.data)==="ok"&&window.location.reload()}).catch(function(ot){})},Dt.stopPropagation(),Ut.next=4,Ke.request({url:"pm:remove",params:{filterByTk:Xt}});case 4:t.Z.info({icon:null,width:520,content:(0,l.jsx)(P.ZP,{icon:(0,l.jsx)(pe.Z,{}),title:st("Plugin removing"),subTitle:st("Plugin is removing, please wait...")}),footer:null}),setInterval(Vt,1e3);case 6:case"end":return Ut.stop()}},Ct)}));return function(Ct){return xt.apply(this,arguments)}}(),onCancel:function(Ct){return Ct.stopPropagation()},okText:st("Yes"),cancelText:st("No"),children:(0,l.jsxs)("a",{onClick:function(Ct){Ct.stopPropagation()},className:je()(Se()({},sn.cardActionDisabled,Cn)),children:[(0,l.jsx)(ee.Z,{})," ",st("Remove")]})},"delete")]},"1"),(0,l.jsx)(Ae.Z,{"aria-label":"enable",size:"small",disabled:Cn||Gt,onChange:function(){var xt=i()(c()().mark(function Ct(Dt,Vt){return c()().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:if(Vt.stopPropagation(),!(!Nt&&Dt)){Ut.next=4;break}return Ce.confirm({title:st("Plugin dependency version mismatch"),content:st("The current dependency version of the plugin does not match the version of the application and may not work properly. Are you sure you want to continue enabling the plugin?"),onOk:function(){var wt=i()(c()().mark(function qe(){return c()().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:return rt.next=2,Ke.request({url:"pm:enable",params:{filterByTk:Xt}});case 2:case"end":return rt.stop()}},qe)}));function ot(){return wt.apply(this,arguments)}return ot}()}),Ut.abrupt("return");case 4:if(Dt){Ut.next=8;break}Ce.confirm({title:st("Are you sure to disable this plugin?"),onOk:function(){var wt=i()(c()().mark(function qe(){return c()().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:return rt.next=2,Ke.request({url:"pm:disable",params:{filterByTk:Xt}});case 2:case"end":return rt.stop()}},qe)}));function ot(){return wt.apply(this,arguments)}return ot}()}),Ut.next=10;break;case 8:return Ut.next=10,Ke.request({url:"pm:enable",params:{filterByTk:Xt}});case 10:case"end":return Ut.stop()}},Ct)}));return function(Ct,Dt){return xt.apply(this,arguments)}}(),checked:!!Yt},"enable")].filter(Boolean),children:(0,l.jsx)(ge.Z.Meta,{description:Gt?(0,l.jsx)(Le.Z.Text,{type:"danger",children:st("Plugin loading failed. Please check the server logs.")}):(0,l.jsx)(Le.Z.Paragraph,{style:{height:Ln.fontSize*Ln.lineHeight*3},type:Nt?"secondary":"danger",ellipsis:{rows:3},children:Nt?bn:st("Plugin dependencies check failed")})})})]})}var fn=function(_t){var Bt=_t.data,jt=(0,M.useState)(void 0),Xt=z()(jt,2),Wt=Xt[0],Nt=Xt[1];return(0,l.jsxs)(l.Fragment,{children:[Wt&&(0,l.jsx)(Ze,{plugin:Wt,onCancel:function(){return Nt(void 0)}}),(0,l.jsx)(an,{onClick:function(){Nt(Bt)},data:Bt})]})},cn=function(_t){var Bt=_t.onClose,jt=_t.isShow,Xt=(0,F.$)(),Wt=Xt.t,Nt=Re(),nn=Nt.theme,Zt=(0,M.useState)("npm"),Cn=z()(Zt,2),Yt=Cn[0],Mn=Cn[1];return(0,l.jsxs)(t.Z,{onCancel:function(){return Bt()},footer:null,destroyOnClose:!0,title:Wt("Add & Update"),width:580,open:jt,children:[(0,l.jsx)("div",{style:{marginTop:nn.marginLG,marginBottom:nn.marginLG},children:(0,l.jsxs)(We.ZP.Group,{optionType:"button",defaultValue:Yt,onChange:function(Gt){return Mn(Gt.target.value)},children:[(0,l.jsx)(We.ZP,{value:"npm",children:Wt("Npm package")}),(0,l.jsx)(We.ZP,{value:"upload",children:Wt("Upload plugin")}),(0,l.jsx)(We.ZP,{value:"url",children:Wt("Compressed file url")})]})}),Yt==="npm"&&(0,l.jsx)(ut,{onClose:Bt,isUpgrade:!1}),Yt==="upload"&&(0,l.jsx)(Je,{onClose:Bt,isUpgrade:!1}),Yt==="url"&&(0,l.jsx)(hn,{onClose:Bt})]})},_n,zt;function xn(Rt,_t){return!Array.isArray(Rt)||!Array.isArray(_t)?!1:Rt.some(function(Bt){return _t.includes(Bt)})}function Qt(Rt){var _t=Rt.plugins,Bt=_t===void 0?[]:_t,jt=(0,F.$)(),Xt=jt.t,Wt=(0,_e.LY)(),Nt=(0,M.useState)(Bt.filter(function(Bn){return!Bn.enabled})),nn=z()(Nt,2),Zt=nn[0],Cn=nn[1],Yt=(0,M.useState)(!1),Mn=z()(Yt,2),bn=Mn[0],Gt=Mn[1],ln=(0,M.useState)([]),Hn=z()(ln,2),sn=Hn[0],Ln=Hn[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.ZP,{onClick:function(){return Gt(!0)},children:Xt("Bulk enable")}),(0,l.jsxs)(t.Z,{width:1e3,title:Xt("Bulk enable"),open:bn,onOk:i()(c()().mark(function Bn(){return c()().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return st.next=2,Wt.request({url:"pm:enable",params:{filterByTk:sn}});case 2:Gt(!1);case 3:case"end":return st.stop()}},Bn)})),onCancel:function(){Ln([]),Gt(!1)},children:[(0,l.jsx)(B.Z,{style:{marginBottom:"1em"},placeholder:Xt("Search plugin..."),onChange:function(wn){Cn(Bt.filter(function(st){var Ke,De=wn.target.value;return!st.enabled&&(st.displayName.toLowerCase().includes(De.toLowerCase())||((Ke=st.description)===null||Ke===void 0?void 0:Ke.toLowerCase().includes(De.toLowerCase())))}))}}),(0,l.jsx)(X.Z,{rowSelection:{type:"checkbox",selectedRowKeys:sn,onChange:function(wn){var st=Zt.map(function(Ke){return Ke.name});Ln(function(Ke){return wn.length===0?Ke.filter(function(De){return!st.includes(De)}):wn.length===st.length?ie().uniq([].concat($()(Ke),$()(wn))):Ke})},onSelect:function(wn){Ln(function(st){return st.includes(wn.name)?st.filter(function(Ke){return Ke!==wn.name}):st.concat(wn.name)})}},rowKey:"name",scroll:{y:"60vh"},size:"small",pagination:!1,columns:[{title:Xt("Plugin"),dataIndex:"displayName",ellipsis:!0},{title:Xt("Description"),dataIndex:"description",ellipsis:!0,width:300},{title:Xt("Package name"),dataIndex:"packageName",width:300,ellipsis:!0}],dataSource:Zt})]})]})}var Et=function(){var _t=(0,F.$)(),Bt=_t.t,jt=Re(),Xt=jt.theme,Wt=(0,_e.QT)({url:"pm:list"}),Nt=Wt.data,nn=Wt.loading,Zt=Wt.refresh,Cn=(0,M.useMemo)(function(){var Ct=(Nt==null?void 0:Nt.data)||[];return Ct=Ct.reverse(),[{type:"All",list:Ct},{type:"Built-in",list:ie().filter(Ct,function(Dt){return Dt.builtIn})},{type:"Enabled",list:ie().filter(Ct,function(Dt){return Dt.enabled})},{type:"Not enabled",list:ie().filter(Ct,function(Dt){return!Dt.enabled})},{type:"Problematic",list:ie().filter(Ct,function(Dt){return!Dt.isCompatible})}]},[Nt==null?void 0:Nt.data]),Yt=(0,M.useState)(0),Mn=z()(Yt,2),bn=Mn[0],Gt=Mn[1],ln=(0,M.useState)(!1),Hn=z()(ln,2),sn=Hn[0],Ln=Hn[1],Bn=(0,M.useState)(""),wn=z()(Bn,2),st=wn[0],Ke=wn[1],De=(0,M.useState)(null),Ce=z()(De,2),Oe=Ce[0],Fe=Ce[1],Ne=(0,N.Z)(st,{wait:100}),Xe=["Data model tools","Data sources","Collections","Collection fields","Blocks","Actions","Workflow","Users & permissions","Authentication","Notification","System management","Security","Logging and monitoring","Others"],dt=(0,M.useMemo)(function(){var Ct=Xe.map(function(Dt){if(Dt==="Others"){var Vt=Nt==null?void 0:Nt.data.filter(function(Ut){return!xn(Ut.keywords,Xe)});return{key:Dt,list:Vt}}var Ht=Nt==null?void 0:Nt.data.filter(function(Ut){var wt;return(wt=Ut.keywords)===null||wt===void 0?void 0:wt.includes(Dt)});return{key:Dt,list:Ht}});return Ct},[Xe]),ht=(0,M.useMemo)(function(){var Ct,Dt=((Ct=Cn[bn])===null||Ct===void 0?void 0:Ct.list)||[];if(!bn&&Oe)Dt=dt.find(function(Ut){return Ut.key===Oe}).list;else if(bn&&Oe){var Vt=dt.find(function(Ut){return Ut.key===Oe}).list;Dt=Vt.filter(function(Ut){return Dt.find(function(wt){return wt.name===Ut.name})})}var Ht=Ne.toLocaleLowerCase().trim();return Ht&&(Dt=ie().filter(Dt,function(Ut){return String(Ut.displayName||"").toLocaleLowerCase().includes(Ht)||String(Ut.description||"").toLocaleLowerCase().includes(Ht)})),Dt.sort(function(Ut,wt){return Ut.displayName.localeCompare(wt.displayName)})},[bn,Cn,Ne,Oe]),xt=function(Dt){Ke(Dt)};return nn?(0,l.jsx)(V.Z,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(cn,{isShow:sn,onClose:function(Dt){Ln(!1)}}),(0,l.jsxs)("div",{style:{width:"100%"},children:[(0,l.jsxs)("div",{style:{marginBottom:Xt.marginLG},className:(0,le.css)(_n||(_n=R()([`
            justify-content: space-between;
            display: flex;
            align-items: center;
          `]))),children:[(0,l.jsx)("div",{style:{marginLeft:200},children:(0,l.jsxs)(U.Z,{size:Xt.marginXXS,split:(0,l.jsx)(D.Z,{type:"vertical"}),children:[Cn.map(function(Ct,Dt){return(0,l.jsxs)("a",{role:"button","aria-label":Ct.type,onClick:function(){return Gt(Dt)},style:{fontWeight:bn===Dt?"bold":"normal"},children:[Bt(Ct.type),bn===Dt?"(".concat(ht==null?void 0:ht.length,")"):null]},Ct.type)}),(0,l.jsx)(B.Z,{allowClear:!0,placeholder:Bt("Search plugin"),onChange:function(Dt){return xt(Dt.currentTarget.value)}})]})}),(0,l.jsx)("div",{children:(0,l.jsxs)(U.Z,{children:[(0,l.jsx)(Qt,{plugins:(Nt==null?void 0:Nt.data)||[]}),(0,l.jsx)(x.ZP,{onClick:function(){return Ln(!0)},type:"primary",children:Bt("Add & Update")})]})})]}),(0,l.jsxs)(ne.Z,{style:{width:"100%"},wrap:!1,children:[(0,l.jsx)(q.Z,{flex:"200px",children:(0,l.jsx)(J.Z,{size:"small",dataSource:dt,split:!1,renderItem:function(Dt){return(0,l.jsx)(J.Z.Item,{style:{padding:"3px 0"},onClick:function(){return Dt.key!==Oe?Fe(Dt.key):Fe(null)},children:(0,l.jsx)("a",{style:{fontWeight:Oe===Dt.key?"bold":"normal"},children:Bt(Dt.key)})})}})}),(0,l.jsx)(q.Z,{flex:"auto",children:(0,l.jsx)("div",{className:(0,le.css)(zt||(zt=R()([`
                --grid-gutter: `,`px;
                --extensions-card-width: calc(25% - var(--grid-gutter) + var(--grid-gutter) / 4);
                display: grid;
                grid-column-gap: var(--grid-gutter);
                grid-row-gap: var(--grid-gutter);
                grid-template-columns: repeat(auto-fill, var(--extensions-card-width));
                justify-content: left;
                margin: auto;
              `])),Xt.margin),children:ht.map(function(Ct){return(0,l.jsx)(fn,{data:Ct},Ct.name)})})})]})]})]})},en=function(){var _t=(0,u.d)(),Bt=_t.token,jt=(0,F.$)(),Xt=jt.t;return(0,l.jsx)("div",{style:{fontSize:Bt.fontSizeXL,color:Bt.colorText},children:Xt("Coming soon...")})},Rn=function(){var _t=(0,G.useParams)(),Bt=(0,G.useNavigate)(),jt=_t.tabName,Xt=jt===void 0?"local":jt,Wt=(0,F.$)(),Nt=Wt.t,nn=(0,xe.ov)(),Zt=nn.snippets,Cn=Zt===void 0?[]:Zt,Yt=Re(),Mn=Yt.styles,bn=(0,Ee.jr)(),Gt=bn.setTitle;return(0,M.useEffect)(function(){var ln=_t.tabName;ln||Bt("/admin/pm/list/local/",{replace:!0}),Gt(Nt("Plugin manager"))},[]),Cn.includes("pm")?(0,l.jsxs)("div",{children:[(0,l.jsx)(O.m,{className:Mn.pageHeader,ghost:!1,title:Nt("Plugin manager"),footer:(0,l.jsx)(Y.Z,{activeKey:Xt,onChange:function(Hn){Bt("/admin/pm/list/".concat(Hn))},items:[{key:"local",label:Nt("Local")},{key:"marketplace",label:Nt("Marketplace")}]})}),(0,l.jsx)("div",{className:Mn.pageContent,style:{display:"flex",flexFlow:"row wrap"},children:M.createElement({local:Et,marketplace:en}[Xt])})]}):(0,l.jsx)(P.ZP,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist."})},An=e(21612),Jn=e(68508),Zn,rr=(0,M.createContext)({});rr.displayName="SettingsCenterContext";function mr(Rt){return Rt.map(function(_t){var Bt;return{key:_t.name,label:_t.label,title:_t.title,icon:_t.icon,children:(Bt=_t.children)!==null&&Bt!==void 0&&Bt.length?mr(_t.children):void 0}})}function Er(Rt,_t){var Bt=Object.keys(Rt);if(Rt[_t])return Rt[_t];for(var jt=0,Xt=Bt;jt<Xt.length;jt++){var Wt=Xt[jt],Nt=Wt.replace(/:[^/]+/g,"([^/]+)"),nn=_t.match(new RegExp("^".concat(Nt,"$")));if(nn)return Rt[Wt]}return null}function Ft(Rt,_t){return Rt.replace(/:\w+/g,function(Bt){var jt=Bt.substring(1);return(_t==null?void 0:_t[jt])||Bt})}var ct=function(){var _t,Bt,jt,Xt=Re(),Wt=Xt.styles,Nt=Xt.theme,nn=(0,n.qD)(),Zt=(0,G.useNavigate)(),Cn=(0,G.useLocation)(),Yt=(0,G.useParams)(),Mn=(0,d.eJW)(),bn=(0,M.useMemo)(function(){var st=nn.pluginSettingsManager.getList();function Ke(De){De.forEach(function(Ce){var Oe;Ce.title=Mn(Ce.title),Ce.label=Mn(Ce.title),(Oe=Ce.children)!==null&&Oe!==void 0&&Oe.length&&Ke(Ce.children)})}return Ke(st),st},[nn.pluginSettingsManager,Mn]),Gt=(0,M.useCallback)(function(st){if(!st||!st.length)return"/admin";if(st.filter(function(Ce){return Ce.isTopLevel}).length===1){var Ke=st.find(function(Ce){return Ce.isTopLevel});return Ke.link?"/admin":Ke.path}function De(Ce){var Oe,Fe=Ce.find(function(Ne){return!Ne.link});return(Oe=Fe.children)!==null&&Oe!==void 0&&Oe.length?Gt(Fe.children):Fe}return De(st).path},[]),ln=(0,M.useMemo)(function(){var st={},Ke=function De(Ce){Ce.forEach(function(Oe){var Fe;st[Oe.path]=Oe,(Fe=Oe.children)!==null&&Fe!==void 0&&Fe.length&&De(Oe.children)})};return Ke(bn),st},[bn]),Hn=(0,Ee.jr)(),sn=Hn.setTitle,Ln=(0,M.useMemo)(function(){return Er(ln,Cn.pathname)},[Cn.pathname,ln]),Bn=(0,M.useMemo)(function(){return Ln?bn.find(function(st){return st.name===Ln.topLevelName}):null},[Ln,bn]);(0,M.useEffect)(function(){ie().isString(Bn==null?void 0:Bn.title)?sn(Bn==null?void 0:Bn.title):sn(Bn==null?void 0:Bn.topLevelName)},[Bn==null?void 0:Bn.title,Bn==null?void 0:Bn.topLevelName,sn]);var wn=(0,M.useMemo)(function(){return mr(bn.filter(function(st){return st.isTopLevel!==!1}).map(function(st){return St()(St()({},st),{},{children:null})}))},[bn]);return!Ln||Cn.pathname===n.oz||Cn.pathname===n.oz+"/"?(0,l.jsx)(G.Navigate,{replace:!0,to:Gt(bn)}):Cn.pathname===Bn.path&&((_t=Bn.children)===null||_t===void 0?void 0:_t.length)>0?(0,l.jsx)(G.Navigate,{replace:!0,to:Gt(Bn.children)}):Ln.link?(0,l.jsx)(G.Navigate,{replace:!0,to:Ln.link}):(0,l.jsx)("div",{children:(0,l.jsxs)(An.Z,{children:[(0,l.jsx)(An.Z.Sider,{className:(0,le.css)(Zn||(Zn=R()([`
            height: 100%;
            left: 0;
            top: 0;
            background: rgba(0, 0, 0, 0);
            z-index: 100;
            .ant-layout-sider-children {
              top: 46px;
              position: fixed;
              width: 200px;
              height: calc(100vh - 46px);
            }
          `]))),theme:"light",children:(0,l.jsx)(Jn.Z,{selectedKeys:[(Ln==null?void 0:Ln.pluginKey)||Ln.topLevelName],style:{height:"calc(100vh - 46px)",overflowY:"auto",overflowX:"hidden"},onClick:function(Ke){var De,Ce=Ke.key,Oe=bn.find(function(Fe){return Fe.name===Ce});if(Oe.link){window.open(Oe.link,"_blank");return}return(De=Oe.children)!==null&&De!==void 0&&De.length?Zt(Gt(Oe.children)):Zt(Oe.path)},items:wn})}),(0,l.jsxs)(An.Z.Content,{children:[Ln&&(0,l.jsx)(O.m,{className:Wt.pageHeader,style:{paddingBottom:((Bt=Bn.children)===null||Bt===void 0?void 0:Bt.length)>0&&Bn.showTabs!==!1?0:Nt.paddingSM},ghost:!1,title:Bn.title,footer:((jt=Bn.children)===null||jt===void 0?void 0:jt.length)>0&&Bn.showTabs!==!1&&(0,l.jsx)(Jn.Z,{style:{marginLeft:-Nt.margin},onClick:function(Ke){var De=Ke.key,Ce=Ft(nn.pluginSettingsManager.getRoutePath(De),Yt);Cn.pathname!==Ce&&Zt(Ce)},selectedKeys:[Ln==null?void 0:Ln.name],mode:"horizontal",items:mr(Bn.children)})}),(0,l.jsx)("div",{className:Wt.pageContent,children:Ln?(0,l.jsx)(G.Outlet,{}):(0,l.jsx)(P.ZP,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist."})})]})]})})},Mt=function(Rt){v()(Bt,Rt);var _t=h()(Bt);function Bt(){return C()(this,Bt),_t.apply(this,arguments)}return r()(Bt,[{key:"load",value:function(){var jt=i()(c()().mark(function Wt(){return c()().wrap(function(nn){for(;;)switch(nn.prev=nn.next){case 0:this.addComponents(),this.addRoutes(),this.addSettings();case 3:case"end":return nn.stop()}},Wt,this)}));function Xt(){return jt.apply(this,arguments)}return Xt}()},{key:"addSettings",value:function(){this.app.pluginSettingsManager.add("ui-schema-storage",{title:'{{t("Block templates")}}',icon:"LayoutOutlined",Component:L.L,aclSnippet:"pm.ui-schema-storage.block-templates"}),this.app.pluginSettingsManager.add("system-settings",{icon:"SettingOutlined",title:'{{t("System settings")}}',Component:o.a$,aclSnippet:"pm.system-settings.system-settings"})}},{key:"addComponents",value:function(){this.app.addComponents({PluginManagerLink:S,SettingsCenterDropdown:H})}},{key:"addRoutes",value:function(){this.app.router.add("admin.pm.list",{path:"/admin/pm/list",element:(0,l.jsx)(Rn,{})}),this.app.router.add("admin.pm.list-tab",{path:"/admin/pm/list/:tabName",element:(0,l.jsx)(Rn,{})}),this.app.router.add("admin.pm.list-tab-mdfile",{path:"/admin/pm/list/:tabName/:mdfile",element:(0,l.jsx)(Rn,{})}),this.app.router.add("admin.settings",{path:n.oz,element:(0,l.jsx)(ct,{})})}}]),Bt}(y.S),kt=null},53181:function(He,ae,e){"use strict";e.d(ae,{C:function(){return h}});var Z=e(68400),c=e.n(Z),k=e(97133),i=e(84157),g=e(67294),C=e(26793),A=e(38714),r=e(68091),K=e(68230),v=e(85893),j,h=function(){var n,y,L=(0,C.$)(),o=L.i18n,a=(0,K.d)(),R=a.token,E=(0,r.j7)("@nocobase/plugin-custom-brand"),$=(0,A._S)(),Q={"en-US":"https://www.nocobase.com","zh-CN":"https://www.nocobase.com/cn/"},z=(0,k.css)(j||(j=c()([`
    text-align: center;
    color: `,`;
    a {
      color: `,`;
      &:hover {
        color: `,`;
      }
    }
  `])),R.colorTextDescription,R.colorTextDescription,R.colorText),p='<span class="nb-app-version">v'.concat($==null||(n=$.data)===null||n===void 0?void 0:n.version,"</span>");return(0,v.jsx)("div",{className:(0,k.cx)(z,"nb-brand"),dangerouslySetInnerHTML:{__html:(0,i.parseHTML)((E==null||(y=E.options)===null||y===void 0||(y=y.options)===null||y===void 0?void 0:y.brand)||'Powered by <a href="'.concat(Q[o.language]||Q["en-US"],'" target="_blank">NocoBase</a>'),{appVersion:p})}})}},36586:function(He,ae,e){"use strict";e.d(ae,{HV:function(){return v},Pc:function(){return K},Px:function(){return y},Qh:function(){return j},a:function(){return M},li:function(){return h},pW:function(){return n},rY:function(){return r}});var Z=e(97857),c=e.n(Z),k=e(85667),i=e(67294),g=e(94804),C=e(6438),A=e(85893),r=(0,i.createContext)({});r.displayName="RecordContext_deprecated";var K=(0,i.createContext)(null);K.displayName="RecordIndexContext";var v=i.memo(function(L){var o=L.record,a=L.children,R=L.parent,E=L.isNew,$=(0,g.Kx)(),Q=(0,i.useMemo)(function(){var z=c()({},(0,k.raw)(o));return z.__parent=R,z.__collectionName=$==null?void 0:$.name,z},[o,R,$==null?void 0:$.name]);return(0,A.jsx)(r.Provider,{value:Q,children:(0,A.jsx)(g.E0,{isNew:E,record:o,parentRecord:R,children:a})})});v.displayName="RecordProvider";var j=function(o){return(0,A.jsx)(r.Provider,c()({},o))},h=function(o){var a=o.index,R=o.children;return(0,A.jsx)(K.Provider,{value:a,children:R})};function M(){return(0,i.useContext)(r)}function n(){return(0,i.useContext)(K)}var y=function(){var o,a=M(),R=(0,C.OP)();return a!=null&&a.createdById?(a==null?void 0:a.createdById)===(R==null||(o=R.data)===null||o===void 0||(o=o.data)===null||o===void 0?void 0:o.id):!1}},54724:function(He,ae,e){"use strict";e.d(ae,{Du:function(){return n},Ob:function(){return o},fW:function(){return h}});var Z=e(80844),c=e(96486),k=e.n(c),i=e(67294),g=e(89250),C=e(75667),A=e(85782),r=e(61736),K=e(85893),v=(0,i.createContext)(!0),j=function(R){var E=R.children,$=R.active,Q=(0,i.useContext)(r.D),z=(0,i.useContext)(Z.SchemaOptionsContext),p=(0,i.useContext)(Z.SchemaComponentsContext),b=(0,i.useContext)(Z.SchemaExpressionScopeContext),f=(0,i.useContext)(C.R3),x=(0,i.useRef)(Q),m=(0,i.useRef)(z),F=(0,i.useRef)(p),I=(0,i.useRef)(b),d=(0,i.useRef)(f);return $&&(x.current=Q,m.current=z,F.current=p,I.current=b,d.current=f),(0,K.jsx)(r.D.Provider,{value:x.current,children:(0,K.jsx)(Z.SchemaOptionsContext.Provider,{value:m.current,children:(0,K.jsx)(Z.SchemaComponentsContext.Provider,{value:F.current,children:(0,K.jsx)(Z.SchemaExpressionScopeContext.Provider,{value:I.current,children:(0,K.jsx)(C.R3.Provider,{value:d.current,children:E})})})})})},h=function(R){var E=R.children,$=R.active,Q=(0,i.useContext)(g.UNSAFE_LocationContext),z=(0,i.useContext)(g.UNSAFE_RouteContext),p=(0,i.useRef)(Q),b=(0,i.useRef)(z);return $&&!k().isEqual(k().omit(p.current.location,"key"),k().omit(Q.location,"key"))&&(p.current=Q),$&&!k().isEqual(b.current,z)&&(b.current=z),(0,K.jsx)(v.Provider,{value:$,children:(0,K.jsx)(j,{active:$,children:(0,K.jsx)(g.UNSAFE_LocationContext.Provider,{value:p.current,children:(0,K.jsx)(g.UNSAFE_RouteContext.Provider,{value:b.current,children:E})})})})},M=function(R){var E=R.children;return _jsx(v.Provider,{value:!0,children:E})},n=function(){var R=(0,i.useContext)(v);return{active:R}},y=function(){var R=5,E=R;try{var $=navigator.deviceMemory;if($)return Math.min(Math.max(R,$*3),20);var Q=performance.memory;if(Q!=null&&Q.jsHeapSizeLimit){var z=Q.jsHeapSizeLimit/1073741824;return Math.min(Math.max(R,Math.floor(z*3)),20)}for(var p=performance.now(),b=0;b<1e6;b++);var f=performance.now()-p;return f<3?E=20:f<5?E=10:f<10&&(E=5),E}catch{return R}},L=y(),o=i.memo(function(a){var R=a.children,E=a.uid,$=(0,i.useRef)([]);return $.current.includes(E)||($.current.push(E),$.current.length>L&&($.current=$.current.slice(-L))),(0,K.jsx)(K.Fragment,{children:$.current.map(function(Q){return(0,K.jsx)(A.WY.Provider,{value:Q,children:(0,K.jsx)(h,{active:Q===E,children:R(Q)})},Q)})})});o.displayName="KeepAlive"},10383:function(He,ae,e){"use strict";e.d(ae,{X:function(){return v},u:function(){return K}});var Z=e(68400),c=e.n(Z),k=e(67294),i=e(69935),g=e(97133),C=e(21143),A=e(85893),r,K=function(){var h=(0,C.useToken)(),M=h.token;return(0,A.jsx)("div",{className:"nb-user-center",style:{display:"inline-block",verticalAlign:"top",width:"46px",height:"46px"},children:(0,A.jsx)("span",{"data-testid":"user-center-button",className:(0,g.css)(r||(r=c()([`
          max-width: 160px;
          overflow: hidden;
          display: inline-block;
          line-height: 12px;
          white-space: nowrap;
          text-overflow: ellipsis;
        `]))),style:{cursor:"pointer",padding:"16px",color:M.colorTextHeaderMenu},children:(0,A.jsx)(i.Z,{})})})};function v(){var j=(0,C.useSchemaSettingsRender)("userCenterSettings"),h=j.render;return(0,A.jsx)("div",{style:{display:"inline-block"},children:h()})}},11189:function(He,ae,e){"use strict";e.d(ae,{H:function(){return Z}});var Z=function(c){return c.group="group",c.page="page",c.link="link",c.tabs="tabs",c}({})},4530:function(He,ae,e){"use strict";e.d(ae,{zf:function(){return vn},lq:function(){return bn},r3:function(){return Gt},IA:function(){return Mn},ng:function(){return Tt},Me:function(){return Nt},Ob:function(){return N.Ob},bU:function(){return xn},Se:function(){return Wt},HQ:function(){return t.H},y2:function(){return Qt},IN:function(){return St},gY:function(){return ln},Kf:function(){return Je},Hb:function(){return lt}});var Z=e(12444),c=e.n(Z),k=e(72004),i=e.n(k),g=e(31996),C=e.n(g),A=e(26037),r=e.n(A),K=e(97857),v=e.n(K),j=e(96695),h=e.n(j),M=e(15009),n=e.n(M),y=e(99289),L=e.n(y),o=e(5574),a=e.n(o),R=e(68400),E=e.n(R),$=e(25877),Q=e(76509),z=e(77383),p=e(97133),b=e(83062),f=e(55241),x=e(67294),m=e(73935),F=e(89250),I=e(79655),d=e(21143),u=e(85782),l=e(31601),S=e(65633),H=e(9028),O=e(48375),N=e(54724),t=e(11189),B=e(87995),X=e(5552),V=e(86201),U=e(84327),D=e(3321),ne=e(28459),q=e(5210),J=e(26793),Y=e(91410),P=e(18591),w=e(50679),ie=e(62662),G=e(85893),le,xe={TreeSelect:X.TreeSelect},_e=function De(Ce,Oe){var Fe=Oe.t,Ne=Oe.compile,Xe=[],dt=h()(Ce),ht;try{for(dt.s();!(ht=dt.n()).done;){var xt,Ct=ht.value,Dt={label:(0,d.isVariable)(Ct.title)?Ne(Ct.title):Fe(Ct.title),value:"".concat(Ct.id,"||").concat(Ct.type)};((xt=Ct.children)===null||xt===void 0?void 0:xt.length)>0&&(Dt.children=De(Ct.children,{t:Fe,compile:Ne})),Xe.push(Dt)}}catch(Vt){dt.e(Vt)}finally{dt.f()}return Xe},Ee={beforeBegin:"insertBefore",afterEnd:"insertAfter"},ze=function De(Ce,Oe){if(Oe)for(var Fe=0;Fe<Ce.length;Fe++){var Ne=Ce[Fe];if(Ne.id===Oe.id)return Ce[Fe-1];if(Ne.children){var Xe=De(Ne.children,Oe);if(Xe)return Xe}}},Se=function De(Ce,Oe){if(Oe)for(var Fe=0;Fe<Ce.length;Fe++){var Ne=Ce[Fe];if(Ne.id===Oe.id)return Ce[Fe+1];if(Ne.children){var Xe=De(Ne.children,Oe);if(Xe)return Xe}}},se=function(){var Ce=(0,J.$)(),Oe=Ce.t,Fe=D.Z.useApp(),Ne=Fe.modal,Xe=(0,d.useNocoBaseRoutes)(),dt=Xe.deleteRoute,ht=(0,d.useCurrentRoute)(),xt=(0,d.useAllAccessDesktopRoutes)(),Ct=xt.allAccessRoutes,Dt=(0,d.useNavigateNoUpdate)(),Vt=(0,d.useCurrentPageUid)();return(0,G.jsx)(ie.r2,{title:"Delete",eventKey:"remove",onClick:function(){Ne.confirm({title:Oe("Delete menu item"),content:Oe("Are you sure you want to delete it?"),onOk:function(){var Ut=L()(n()().mark(function ot(){var qe,Be;return n()().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:if(Ve.t0=(ht==null?void 0:ht.id)!=null,!Ve.t0){Ve.next=4;break}return Ve.next=4,dt(ht.id);case 4:if(!(Vt!==(ht==null?void 0:ht.schemaUid)&&!(0,d.findRouteBySchemaUid)(Vt,ht==null?void 0:ht.children))){Ve.next=6;break}return Ve.abrupt("return");case 6:qe=ze(Ct,ht),Be=Se(Ct,ht),Dt(qe||Be?"/admin/".concat((qe==null?void 0:qe.schemaUid)||(Be==null?void 0:Be.schemaUid)):"/");case 9:case"end":return Ve.stop()}},ot)}));function wt(){return Ut.apply(this,arguments)}return wt}()})},children:Oe("Delete")})},me=function(Ce){var Oe=Ce.eventKey,Fe=Ce.title,Ne=Ce.insertPosition,Xe=(0,J.$)(),dt=Xe.t,ht=(0,d.useURLAndHTMLSchema)(),xt=ht.urlSchema,Ct=ht.paramsSchema,Dt=(0,d.useCurrentRoute)(),Vt=(Dt==null?void 0:Dt.type)===d.NocoBaseDesktopRouteType.group,Ht=(0,d.useNocoBaseRoutes)(),Ut=Ht.createRoute,wt=Ht.moveRoute,ot=(0,P.r3)();return!Vt&&Ne==="beforeEnd"?null:(0,G.jsxs)(ie.m$,{eventKey:Oe,title:Fe,children:[(0,G.jsx)(ie.j0,{eventKey:"".concat(Ne,"group"),title:dt("Group"),schema:{type:"object",title:dt("Add group"),properties:{title:{"x-decorator":"FormItem","x-component":"Input",title:dt("Menu item title"),required:!0,"x-component-props":{}},icon:{title:dt("Icon"),"x-component":"IconPicker","x-decorator":"FormItem"}}},onSubmit:function(){var qe=L()(n()().mark(function Be(rt){var Ve,$e,it,Pt,Lt,$t,$n;return n()().wrap(function(un){for(;;)switch(un.prev=un.next){case 0:return Ve=rt.title,$e=rt.icon,it=(0,U.uid)(),Pt=Ne==="beforeEnd"?Dt==null?void 0:Dt.id:Dt==null?void 0:Dt.parentId,un.next=5,Ut({type:d.NocoBaseDesktopRouteType.group,title:Ve,icon:$e,parentId:Pt||void 0,schemaUid:it});case 5:if(Lt=un.sent,$t=Lt.data,!Ee[Ne]){un.next=10;break}return un.next=10,wt({sourceId:$t==null||($n=$t.data)===null||$n===void 0?void 0:$n.id,targetId:Dt==null?void 0:Dt.id,sortField:"sort",method:Ee[Ne]});case 10:case"end":return un.stop()}},Be)}));return function(Be){return qe.apply(this,arguments)}}()}),(0,G.jsx)(ie.j0,{eventKey:"".concat(Ne,"page"),title:dt("Page"),schema:{type:"object",title:dt("Add page"),properties:{title:{"x-decorator":"FormItem","x-component":"Input",title:dt("Menu item title"),required:!0,"x-component-props":{}},icon:{title:dt("Icon"),"x-component":"IconPicker","x-decorator":"FormItem"}}},onSubmit:function(){var qe=L()(n()().mark(function Be(rt){var Ve,$e,it,Pt,Lt,$t,$n,pn,un,Xn;return n()().wrap(function(jn){for(;;)switch(jn.prev=jn.next){case 0:return Ve=rt.title,$e=rt.icon,it=(0,U.uid)(),Pt=(0,U.uid)(),Lt=(0,U.uid)(),$t=(0,U.uid)(),$n=Ne==="beforeEnd"?Dt==null?void 0:Dt.id:Dt==null?void 0:Dt.parentId,jn.next=8,Ut({type:d.NocoBaseDesktopRouteType.page,title:Ve,icon:$e,parentId:$n||void 0,schemaUid:Pt,menuSchemaUid:it,enableTabs:!1,children:[{type:d.NocoBaseDesktopRouteType.tabs,schemaUid:Lt,tabSchemaName:$t,hidden:!0}]});case 8:if(pn=jn.sent,un=pn.data,!Ee[Ne]){jn.next=13;break}return jn.next=13,wt({sourceId:un==null||(Xn=un.data)===null||Xn===void 0?void 0:Xn.id,targetId:Dt==null?void 0:Dt.id,sortField:"sort",method:Ee[Ne]});case 13:ot((0,d.getPageMenuSchema)({pageSchemaUid:Pt,tabSchemaUid:Lt,tabSchemaName:$t}));case 14:case"end":return jn.stop()}},Be)}));return function(Be){return qe.apply(this,arguments)}}()}),(0,G.jsx)(ie.j0,{eventKey:"".concat(Ne,"link"),title:dt("Link"),schema:{type:"object",title:dt("Add link"),properties:{title:{title:dt("Menu item title"),required:!0,"x-component":"Input","x-decorator":"FormItem"},icon:{title:dt("Icon"),"x-component":"IconPicker","x-decorator":"FormItem"},href:xt,params:Ct}},onSubmit:function(){var qe=L()(n()().mark(function Be(rt){var Ve,$e,it,Pt,Lt,$t,$n,pn,un;return n()().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:return Ve=rt.title,$e=rt.icon,it=rt.href,Pt=rt.params,Lt=(0,U.uid)(),$t=Ne==="beforeEnd"?Dt==null?void 0:Dt.id:Dt==null?void 0:Dt.parentId,Yn.next=5,Ut({type:d.NocoBaseDesktopRouteType.link,title:Ve,icon:$e,parentId:$t||void 0,schemaUid:Lt,options:{href:it,params:Pt}});case 5:if($n=Yn.sent,pn=$n.data,!Ee[Ne]){Yn.next=10;break}return Yn.next=10,wt({sourceId:pn==null||(un=pn.data)===null||un===void 0?void 0:un.id,targetId:Dt==null?void 0:Dt.id,sortField:"sort",method:Ee[Ne]});case 10:case"end":return Yn.stop()}},Be)}));return function(Be){return qe.apply(this,arguments)}}()})]})},pe=function(){var Ce=(0,J.$)(),Oe=Ce.t,Fe=(0,x.useMemo)(function(){return{type:"object",title:Oe("Edit menu item"),properties:{title:{title:Oe("Menu item title"),required:!0,"x-decorator":"FormItem","x-component":"Input","x-component-props":{}},icon:{title:Oe("Menu item icon"),"x-component":"IconPicker","x-decorator":"FormItem"}}}},[Oe]),Ne=(0,d.useCurrentRoute)(),Xe=(0,d.useURLAndHTMLSchema)(),dt=Xe.urlSchema,ht=Xe.paramsSchema,xt=(0,x.useMemo)(function(){return{title:Ne.title,icon:Ne.icon}},[Ne.title,Ne.icon]);Ne.type===d.NocoBaseDesktopRouteType.link&&(Fe.properties.href=dt,Fe.properties.params=ht,xt.href=Ne.options.href,xt.params=Ne.options.params);var Ct=(0,d.useNocoBaseRoutes)(),Dt=Ct.updateRoute,Vt=(0,x.useCallback)(function(Ht){var Ut=Ht.title,wt=Ht.icon,ot=Ht.href,qe=Ht.params;Ne.id!==void 0&&Dt(Ne.id,{title:Ut,icon:wt,options:ot||qe?{href:ot,params:qe}:void 0})},[]);return(0,G.jsx)(ie.j0,{title:Oe("Edit"),eventKey:"edit",schema:Fe,initialValues:xt,onSubmit:Vt})},ee=function(){var Ce=(0,J.$)(),Oe=Ce.t,Fe=(0,d.useCurrentRoute)(),Ne=(0,d.useNocoBaseRoutes)(),Xe=Ne.updateRoute,dt=D.Z.useApp(),ht=dt.modal;return(0,G.jsx)(ie.hj,{title:Oe("Hidden"),checked:Fe.hideInMenu,onChange:function(Ct){ht.confirm({title:Oe("Are you sure you want to hide this menu?"),icon:(0,G.jsx)(B.Z,{}),content:Oe("After hiding, this menu will no longer appear in the menu bar. To show it again, you need to go to the route management page to configure it."),onOk:function(){return L()(n()().mark(function Vt(){return n()().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:if(Fe.id===void 0){Ut.next=3;break}return Ut.next=3,Xe(Fe.id,{hideInMenu:!!Ct});case 3:case"end":return Ut.stop()}},Vt)}))()}})}})},ue=function(){var Ce=(0,J.$)(),Oe=Ce.t,Fe=(0,x.useCallback)(function(Ut){(0,V.onFieldChange)("target",function(wt){var ot,qe,Be=(wt==null||(ot=wt.value)===null||ot===void 0||(qe=ot.split)===null||qe===void 0?void 0:qe.call(ot,"||"))||[],rt=a()(Be,2),Ve=rt[1];wt.query("position").take(function($e){$e.dataSource=Ve===d.NocoBaseDesktopRouteType.group?[{label:Oe("Before"),value:"beforeBegin"},{label:Oe("After"),value:"afterEnd"},{label:Oe("Inner"),value:"beforeEnd"}]:[{label:Oe("Before"),value:"beforeBegin"},{label:Oe("After"),value:"afterEnd"}]})})},[Oe]),Ne=(0,d.useCompile)(),Xe=(0,d.useAllAccessDesktopRoutes)(),dt=Xe.allAccessRoutes,ht=(0,x.useMemo)(function(){return _e(dt,{t:Oe,compile:Ne})},[]),xt=(0,x.useMemo)(function(){return{type:"object",title:Oe("Move to"),properties:{target:{title:Oe("Target"),enum:ht,required:!0,"x-decorator":"FormItem","x-component":"TreeSelect","x-component-props":{}},position:{title:Oe("Position"),required:!0,enum:[{label:Oe("Before"),value:"beforeBegin"},{label:Oe("After"),value:"afterEnd"}],default:"afterEnd","x-component":"Radio.Group","x-decorator":"FormItem"}}}},[ht,Oe]),Ct=(0,d.useNocoBaseRoutes)(),Dt=Ct.moveRoute,Vt=(0,d.useCurrentRoute)(),Ht=(0,x.useCallback)(function(){var Ut=L()(n()().mark(function wt(ot){var qe,Be,rt,Ve,$e,it,Pt,Lt;return n()().wrap(function($n){for(;;)switch($n.prev=$n.next){case 0:if(Be=ot.target,rt=ot.position,Ve=(Be==null||(qe=Be.split)===null||qe===void 0?void 0:qe.call(Be,"||"))||[],$e=a()(Ve,1),it=$e[0],it){$n.next=4;break}return $n.abrupt("return");case 4:if(!(it===void 0||!Vt)){$n.next=6;break}return $n.abrupt("return");case 6:return Pt={beforeBegin:"insertBefore",afterEnd:"insertAfter"},Lt=rt==="beforeEnd"?{targetScope:{parentId:it}}:{targetId:it},$n.next=10,Dt(v()({sourceId:Vt.id,sortField:"sort",method:Pt[rt]},Lt));case 10:case"end":return $n.stop()}},wt)}));return function(wt){return Ut.apply(this,arguments)}}(),[Vt,Dt]);return(0,G.jsx)(ie.j0,{title:Oe("Move to"),eventKey:"move-to",components:xe,effects:Fe,schema:xt,onSubmit:Ht})},ge=function(){var Ce=(0,J.$)(),Oe=Ce.t,Fe=(0,d.useCurrentRoute)(),Ne=(0,d.useNocoBaseRoutes)(),Xe=Ne.updateRoute,dt=(0,x.useMemo)(function(){return{type:"object",title:Oe("Edit tooltip"),properties:{tooltip:{"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}}},[Oe]),ht=(0,x.useMemo)(function(){return{tooltip:Fe.tooltip}},[Fe.tooltip]),xt=(0,x.useCallback)(function(Ct){var Dt=Ct.tooltip;Fe.id!==void 0&&Xe(Fe.id,{tooltip:Dt})},[Fe.id,Xe]);return(0,G.jsx)(ie.j0,{title:Oe("Edit tooltip"),eventKey:"edit-tooltip",schema:dt,initialValues:ht,onSubmit:xt})},Ie=new Y.F({name:"menuSettings:menuItem",items:[{name:"edit",Component:pe},{name:"editTooltip",Component:ge},{name:"hidden",Component:ee},{name:"moveTo",Component:ue},{name:"divider",type:"divider"},{name:"insertbeforeBegin",Component:function(){var Ce=(0,J.$)(),Oe=Ce.t;return(0,G.jsx)(me,{eventKey:"insertbeforeBegin",title:Oe("Insert before"),insertPosition:"beforeBegin"})}},{name:"insertafterEnd",Component:function(){var Ce=(0,J.$)(),Oe=Ce.t;return(0,G.jsx)(me,{eventKey:"insertafterEnd",title:Oe("Insert after"),insertPosition:"afterEnd"})}},{name:"insertbeforeEnd",Component:function(){var Ce=(0,J.$)(),Oe=Ce.t;return(0,G.jsx)(me,{eventKey:"insertbeforeEnd",title:Oe("Insert inner"),insertPosition:"beforeEnd"})}},{name:"divider",type:"divider"},{name:"delete",sort:100,Component:se}]}),Ae=(0,d.css)(le||(le=E()([`
  .anticon {
    line-height: 16px !important;
  }
`]))),Le={siderCollapsed:!1},Te=function(Ce){return(0,G.jsx)(je,{children:(0,G.jsx)(q.D.Provider,{value:Le,children:(0,G.jsx)(w.Mf,{spaceClassName:Ae,settings:Ie,showBorder:!1,container:Ce.container})})})},je=function(Ce){var Oe=(0,d.useGlobalTheme)(),Fe=Oe.theme;return(0,G.jsx)(ne.ZP,{theme:v()(v()({},Fe),{},{inherit:!1}),children:Ce.children})},Pe=e(10383),fe=e(35310),re=function(){var Ce,Oe=(0,J.$)(),Fe=Oe.t,Ne=Oe.i18n,Xe=(0,d.useAPIClient)(),dt=(0,d.useSystemSettings)()||{},ht=dt.data,xt=(0,x.useMemo)(function(){var Ct;return(ht==null||(Ct=ht.data)===null||Ct===void 0?void 0:Ct.enabledLanguages)||[]},[ht==null||(Ce=ht.data)===null||Ce===void 0?void 0:Ce.enabledLanguages]);return xt.length<2?null:(0,G.jsx)(d.SchemaSettingsSelectItem,{title:Fe("Language"),options:Object.keys(fe.ZP).filter(function(Ct){return xt.includes(Ct)}).map(function(Ct){return{label:fe.ZP[Ct].label,value:Ct}}),value:Ne.language,onChange:function(){var Ct=L()(n()().mark(function Dt(Vt){return n()().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return Ut.next=2,Xe.resource("users").updateLang({values:{appLang:Vt}});case 2:Xe.auth.setLocale(Vt),window.location.reload();case 4:case"end":return Ut.stop()}},Dt)}));return function(Dt){return Ct.apply(this,arguments)}}()})},T=new Y.F({name:"userCenterSettings",Component:Pe.u,items:[{name:"langue",Component:re,sort:350}]}),ce,be,oe,Re,Ze,We,tt,St=(0,x.createContext)(null);St.displayName="NocoBaseRouteContext";var Tt=function(Ce){var Oe=Ce.children,Fe=Ce.uid,Ne=Je(),Xe=Ne.allAccessRoutes,dt=(0,x.useMemo)(function(){return ln(Fe,Xe)},[Fe,Xe]);return(0,G.jsx)(St.Provider,{value:dt,children:Oe})},lt=function(){return(0,x.useContext)(St)||{}},ut=[],nt=(0,x.createContext)({allAccessRoutes:ut,refresh:function(){}});nt.displayName="AllAccessDesktopRoutesContext";var Je=function(){return(0,x.useContext)(nt)},hn=function(Ce){var Oe=Ce.children,Fe=(0,x.useRef)(!1),Ne=(0,d.useRequest)({url:"/desktopRoutes:listAccessible",params:{tree:!0,sort:"sort"}}),Xe=Ne.data,dt=Ne.refresh,ht=Ne.loading,xt=(0,x.useMemo)(function(){return{allAccessRoutes:(Xe==null?void 0:Xe.data)||ut,refresh:dt}},[Xe==null?void 0:Xe.data,dt]);return ht&&!Fe.current?null:(Fe.current=!0,(0,G.jsx)(nt.Provider,{value:xt,children:Oe}))},mn=function(Ce,Oe){if(!Ce)return!1;var Fe=ln(Ce,Oe);return!Fe},vn=function(){var Ce=(0,u.V$)(),Oe=Je(),Fe=Oe.allAccessRoutes;return wn(Ce,Fe)?null:mn(Ce,Fe)?(0,G.jsx)(d.AppNotFound,{}):(0,G.jsx)(N.Ob,{uid:Ce,children:function(Xe){return(0,G.jsx)(Tt,{uid:Xe,children:(0,G.jsx)(d.RemoteSchemaComponent,{uid:Xe})})}})},an=(0,p.css)(ce||(ce=E()([`
  display: flex;
  flex-direction: column;
  position: relative;
  height: calc(100vh - var(--nb-header-height));
  > div {
    position: relative;
  }
  .ant-layout-footer {
    position: absolute;
    bottom: 0;
    text-align: center;
    width: 100%;
    z-index: 0;
    padding: 0px 50px;
  }
`]))),fn=(0,p.css)(be||(be=E()([`
  width: 168px;
  height: var(--nb-header-height);
  margin-right: 4px;
  display: inline-flex;
  flex-shrink: 0;
  color: #fff;
  padding: 0;
  align-items: center;
`]))),cn=(0,p.css)(oe||(oe=E()([`
  object-fit: contain;
  width: 100%;
  height: 100%;
`]))),_n=(0,p.css)(Re||(Re=E()([`
  width: 100%;
  height: 100%;
  font-weight: 500;
  text-align: center;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
`]))),zt={flex:1,overflowY:"auto"},xn=function(){return(0,G.jsx)("div",{className:"".concat(an," nb-subpages-slot-without-header-and-side"),children:(0,G.jsx)("div",{style:zt,children:(0,G.jsx)(F.Outlet,{})})})},Qt=function(){var Ce,Oe,Fe,Ne=(0,d.useSystemSettings)(),Xe=(0,d.useToken)(),dt=Xe.token,ht=(0,x.useMemo)(function(){return{fontSize:dt.fontSizeHeading3}},[dt.fontSizeHeading3]),xt=Ne!=null&&(Ce=Ne.data)!==null&&Ce!==void 0&&(Ce=Ce.data)!==null&&Ce!==void 0&&(Ce=Ce.logo)!==null&&Ce!==void 0&&Ce.url?(0,G.jsx)("img",{className:cn,src:Ne==null||(Oe=Ne.data)===null||Oe===void 0||(Oe=Oe.data)===null||Oe===void 0||(Oe=Oe.logo)===null||Oe===void 0?void 0:Oe.url}):(0,G.jsx)("span",{style:ht,className:_n,children:Ne==null||(Fe=Ne.data)===null||Fe===void 0||(Fe=Fe.data)===null||Fe===void 0?void 0:Fe.title});return(0,G.jsx)("div",{className:fn,children:Ne!=null&&Ne.loading?null:xt})},Et=function(){var Ce=(0,x.useRef)(null),Oe=x.useState(null),Fe=a()(Oe,2),Ne=Fe[0],Xe=Fe[1];return(0,x.useEffect)(function(){Xe(Ce.current.parentElement.parentElement.parentElement)},[]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Te,{container:Ne}),(0,G.jsx)("div",{ref:Ce})]})},en=function(Ce){var Oe=Ce.item,Fe=(0,d.useDesignable)(),Ne=Fe.designable,Xe={__route__:Oe._route};return(0,G.jsx)(d.ParentRouteContext.Provider,{value:Oe._parentRoute,children:(0,G.jsx)(St.Provider,{value:Oe._route,children:(0,G.jsxs)(d.SortableItem,{id:Oe._route.id,schema:Xe,"aria-label":Oe.name,children:[Ce.children,Ne&&(0,G.jsx)(Et,{})]})})})},Rn=function(Ce){var Oe=(0,x.useContext)(rr),Fe=Oe.inHeader;return(0,G.jsx)(Q.X.Consumer,{children:function(Xe){return Xe.collapsed&&!Ce.hidden&&!Fe?(0,G.jsx)(b.Z,{title:Ce.title,placement:"right",children:Ce.children}):Ce.children}})},An=function(Ce){var Oe,Fe=Ce.item,Ne=(0,d.useParseURLAndParams)(),Xe=Ne.parseURLAndParams,dt=(0,x.useRef)(null),ht=(0,F.useLocation)();(0,x.useEffect)(function(){dt.current&&(dt.current.parentElement.parentElement.style.order=999,dt.current.parentElement.parentElement.style.paddingLeft=0,dt.current.parentElement.parentElement.style.padding=0)},[]);var xt=(0,x.useCallback)(function(){var Vt=L()(n()().mark(function Ht(Ut){var wt,ot,qe,Be,rt;return n()().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:return qe=(wt=Fe._route.options)===null||wt===void 0?void 0:wt.href,Be=(ot=Fe._route.options)===null||ot===void 0?void 0:ot.params,Ut.preventDefault(),Ut.stopPropagation(),$e.prev=4,$e.next=7,Xe(qe,Be||[]);case 7:rt=$e.sent,window.open(rt,"_blank"),$e.next=15;break;case 11:$e.prev=11,$e.t0=$e.catch(4),console.error($e.t0),window.open(qe,"_blank");case 15:case"end":return $e.stop()}},Ht,null,[[4,11]])}));return function(Ht){return Vt.apply(this,arguments)}}(),[Xe,Fe]);if(Fe._hidden)return null;var Ct={__route__:Fe._route};if(Fe.key==="x-designer-button")return(0,G.jsx)("div",{ref:dt,children:(0,G.jsx)(je,{children:(0,G.jsx)(d.ParentRouteContext.Provider,{value:Fe._parentRoute,children:(0,G.jsx)(St.Provider,{value:Fe._route,children:Ce.children})})})});if(((Oe=Fe._route)===null||Oe===void 0?void 0:Oe.type)===t.H.link)return(0,G.jsx)(d.ParentRouteContext.Provider,{value:Fe._parentRoute,children:(0,G.jsx)(St.Provider,{value:Fe._route,children:(0,G.jsxs)(d.SortableItem,{id:Fe._route.id,schema:Ct,children:[(0,G.jsx)("div",{onClick:xt,children:(0,G.jsx)(I.Link,{to:ht.pathname,"aria-label":Fe.name,children:Ce.children})}),(0,G.jsx)(Te,{})]})})});var Dt=Fe.redirect||Fe.path;return(0,G.jsx)(d.ParentRouteContext.Provider,{value:Fe._parentRoute,children:(0,G.jsx)(St.Provider,{value:Fe._route,children:(0,G.jsxs)(d.SortableItem,{id:Fe._route.id,schema:Ct,children:[(0,G.jsx)(Rn,{title:Fe.name,hidden:Fe._route.type===t.H.group||Fe._depth>0,children:(0,G.jsx)(I.Link,{to:Dt,"aria-label":Fe.name,children:Ce.children})}),(0,G.jsx)(Te,{})]})})})},Jn=(0,p.css)(Ze||(Ze=E()([`
  .ant-layout-sider-children {
    margin-inline-end: 0 !important;
  }

  .ant-layout-header.ant-pro-layout-header {
    border-block-end: none !important;
  }

  // \u56FA\u5B9A\u83DC\u5355\u4E2D\u56FE\u6807\u548C\u6807\u9898\u7684\u8DDD\u79BB\uFF0C\u9632\u6B62\u5F53\u5207\u6362\u5230\u7D27\u51D1\u6A21\u5F0F\u540E\uFF0C\u56FE\u6807\u548C\u6807\u9898\u4E4B\u95F4\u7684\u8DDD\u79BB\u8FC7\u8FD1
  .ant-menu-title-content .ant-pro-base-menu-inline-item-title,
  .ant-menu-title-content .ant-pro-base-menu-horizontal-item-title {
    gap: 8px;
  }

  // \u4FEE\u590D\u7D27\u51D1\u6A21\u5F0F\u4E0B\u4E14\u83DC\u5355\u6536\u8D77\u65F6\uFF0C\u83DC\u5355\u7684\u9AD8\u5EA6\u4E0D\u591F\u7684\u95EE\u9898
  .ant-pro-base-menu-vertical-collapsed .ant-pro-base-menu-vertical-menu-item {
    height: auto;
  }
`]))),Zn={paddingBlock:0,paddingInline:0},rr=x.createContext({inHeader:!1}),mr=(0,p.css)(We||(We=E()([`
  .ant-popover-inner {
    padding: 0;
    overflow: hidden;
  }
`]))),Er=function(Ce){var Oe=(0,d.useToken)(),Fe=Oe.token;return(0,G.jsx)(f.Z,{rootClassName:mr,content:(0,G.jsx)(d.PinnedPluginList,{}),color:Fe.colorBgHeader,children:(0,G.jsx)("div",{style:{padding:"0 16px",display:"flex",alignItems:"center",height:"100%",marginRight:-16},children:(0,G.jsx)($.Z,{style:{color:Fe.colorTextHeaderMenu,fontSize:20}})})})},Ft=function(Ce){return Ce.isMobile?(0,G.jsx)(Er,{}):(0,G.jsx)(d.PinnedPluginList,{})},ct=function(Ce){return(0,G.jsx)(G.Fragment,{children:Ce.children})},Mt=(0,S.r)(ct),kt=function(Ce,Oe,Fe){var Ne;return(0,G.jsx)(An,{item:Ce,options:Fe,children:(0,G.jsx)(Mt,{tooltip:(Ne=Ce._route)===null||Ne===void 0?void 0:Ne.tooltip,children:Oe})})},Rt=function(Ce,Oe){var Fe;return(0,G.jsx)(en,{item:Ce,children:(0,G.jsx)(Mt,{tooltip:(Fe=Ce._route)===null||Fe===void 0?void 0:Fe.tooltip,children:Oe})})},_t=function(Ce){return(0,G.jsx)(Q.X.Consumer,{children:function(Fe){return Fe.isMobile?(0,G.jsx)(G.Fragment,{children:Ce.children}):m.createPortal((0,G.jsx)("div",{className:(0,p.css)(tt||(tt=E()([`
                // Fix the issue where the collapse/expand button is covered by subpages
                .ant-pro-sider-collapsed-button {
                  top: 64px;
                  left: `,`px;
                  z-index: 200;
                  transition: left 0.2s;
                }
              `])),Ce.collapsed?52:188),children:Ce.children}),document.body)}})},Bt=function(Ce,Oe){return(0,G.jsx)(_t,{collapsed:Ce,children:Oe})},jt={inHeader:!0},Xt=function(Ce,Oe){return(0,G.jsx)(rr.Provider,{value:jt,children:Oe})},Wt=function(){var Ce,Oe,Fe,Ne=(0,d.useSystemSettings)(),Xe=(0,d.useToken)(),dt=Xe.token,ht=(0,x.useMemo)(function(){return{fontSize:dt.fontSizeHeading3}},[dt.fontSizeHeading3]),xt=Ne!=null&&(Ce=Ne.data)!==null&&Ce!==void 0&&(Ce=Ce.data)!==null&&Ce!==void 0&&(Ce=Ce.authLogo)!==null&&Ce!==void 0&&Ce.url?(0,G.jsx)("img",{className:cn,src:Ne==null||(Oe=Ne.data)===null||Oe===void 0||(Oe=Oe.data)===null||Oe===void 0||(Oe=Oe.authLogo)===null||Oe===void 0?void 0:Oe.url}):(0,G.jsx)("span",{style:ht,className:_n,children:Ne==null||(Fe=Ne.data)===null||Fe===void 0||(Fe=Fe.data)===null||Fe===void 0?void 0:Fe.title});return(0,G.jsx)("div",{className:fn,children:Ne!=null&&Ne.loading?null:xt})},Nt=function(){var Ce=Je(),Oe=Ce.allAccessRoutes,Fe=(0,d.useDesignable)(),Ne=Fe.designable,Xe=(0,F.useLocation)(),dt=(0,d.useMenuDragEnd)(),ht=dt.onDragEnd,xt=(0,d.useToken)(),Ct=xt.token,Dt=(0,x.useState)(!1),Vt=a()(Dt,2),Ht=Vt[0],Ut=Vt[1],wt=(0,x.useState)(!1),ot=a()(wt,2),qe=ot[0],Be=ot[1],rt=(0,x.useRef)(!1),Ve=(0,O.v)(),$e=Ve.t,it=(0,x.useMemo)(function(){return{path:"/",children:Bn(Oe,{designable:Ne,isMobile:Ht,t:$e})}},[Oe,Ne,Ht,$e]),Pt=(0,x.useMemo)(function(){return{header:{colorBgHeader:Ct.colorBgHeader,colorTextMenu:Ct.colorTextHeaderMenu,colorTextMenuSelected:Ct.colorTextHeaderMenuActive,colorTextMenuActive:Ct.colorTextHeaderMenuActive,colorBgMenuItemHover:Ct.colorBgHeaderMenuHover,colorBgMenuItemSelected:Ct.colorBgHeaderMenuActive,heightLayoutHeader:46,colorHeaderTitle:Ct.colorTextHeaderMenu},sider:{colorMenuBackground:Ct.colorBgContainer,colorTextMenu:Ct.colorText,colorTextMenuSelected:Ct.colorPrimary,colorBgMenuItemSelected:Ct.colorPrimaryBg,colorBgMenuItemActive:Ct.colorPrimaryBg,colorBgMenuItemHover:Ct.colorBgTextHover},bgLayout:Ct.colorBgLayout}},[Ct]),Lt=(0,x.useCallback)(function($n){rt.current||Be($n)},[]),$t=(0,x.useCallback)(function(){rt.current=!0,setTimeout(function(){rt.current=!1})},[]);return(0,G.jsx)(d.DndContext,{onDragEnd:ht,children:(0,G.jsx)(z.ZP,{contentStyle:Zn,siderWidth:200,className:Jn,location:Xe,route:it,actionsRender:Ft,logo:(0,G.jsx)(Qt,{}),title:"",layout:"mix",splitMenus:!0,token:Pt,headerRender:Xt,menuItemRender:kt,subMenuItemRender:Rt,collapsedButtonRender:Bt,onCollapse:Lt,collapsed:qe,onPageChange:$t,children:(0,G.jsx)(Q.X.Consumer,{children:function(pn){var un=pn.isMobile;return un!==Ht&&Ut(un),(0,G.jsx)(xn,{})}})})})};function nn(De){var Ce=h()(De),Oe;try{for(Ce.s();!(Oe=Ce.n()).done;){var Fe,Ne=Oe.value;if(Ne.type===t.H.page)return Ne.schemaUid;if((Fe=Ne.children)!==null&&Fe!==void 0&&Fe.length){var Xe=nn(Ne.children);if(Xe)return Xe}}}catch(dt){Ce.e(dt)}finally{Ce.f()}}var Zt=function(Ce){var Oe=Je(),Fe=Oe.allAccessRoutes,Ne=(0,u.bw)(),Xe=nn(Fe);return(0,G.jsxs)(G.Fragment,{children:[Ce.children,Xe&&(Ne.pathname==="/admin"||Ne.pathname==="/admin/")&&(0,G.jsx)(F.Navigate,{replace:!0,to:"/admin/".concat(Xe)})]})},Cn=function De(Ce,Oe){if(Oe){var Fe=h()(Oe),Ne;try{for(Fe.s();!(Ne=Fe.n()).done;){var Xe,dt=Ne.value;if(dt.menuSchemaUid===Ce)return dt;if((Xe=dt.children)!==null&&Xe!==void 0&&Xe.length){var ht=De(Ce,dt.children);if(ht)return ht}}}catch(xt){Fe.e(xt)}finally{Fe.f()}}},Yt=function(Ce){var Oe=(0,u.V$)(),Fe=Je(),Ne=Fe.allAccessRoutes,Xe=(0,F.useLocation)(),dt=(0,F.useNavigate)();return(0,x.useEffect)(function(){var ht=Cn(Oe,Ne);ht&&dt(Xe.pathname.replace(Oe,ht.schemaUid)+Xe.search)},[Ne,Oe,Xe.pathname,Xe.search,dt]),(0,G.jsx)(G.Fragment,{children:Ce.children})},Mn=function(Ce){return(0,G.jsx)(u.lN,{children:(0,G.jsx)(u.vm,{children:(0,G.jsx)(u.oO,{children:(0,G.jsx)(d.ACLRolesCheckProvider,{children:(0,G.jsx)(hn,{children:(0,G.jsx)(Zt,{children:(0,G.jsx)(Yt,{children:(0,G.jsx)(d.RemoteCollectionManagerProvider,{children:(0,G.jsx)(d.CurrentAppInfoProvider,{children:(0,G.jsx)(d.RemoteSchemaTemplateManagerProvider,{children:Ce.children})})})})})})})})})})},bn=function(Ce){return(0,G.jsx)(Mn,{children:(0,G.jsx)(Nt,v()({},Ce))})},Gt=function(De){C()(Oe,De);var Ce=r()(Oe);function Oe(){return c()(this,Oe),Ce.apply(this,arguments)}return i()(Oe,[{key:"afterAdd",value:function(){var Fe=L()(n()().mark(function Xe(){return n()().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.next=2,this.app.pm.add(d.RemoteSchemaTemplateManagerPlugin);case 2:case"end":return ht.stop()}},Xe,this)}));function Ne(){return Fe.apply(this,arguments)}return Ne}()},{key:"load",value:function(){var Fe=L()(n()().mark(function Xe(){return n()().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:this.app.schemaSettingsManager.add(T),this.app.addComponents({AdminLayout:bn,AdminDynamicPage:vn});case 2:case"end":return ht.stop()}},Xe,this)}));function Ne(){return Fe.apply(this,arguments)}return Ne}()}]),Oe}(l.S);function ln(De,Ce){if(Ce){var Oe=h()(Ce),Fe;try{for(Oe.s();!(Fe=Oe.n()).done;){var Ne,Xe=Fe.value;if(De===Xe.schemaUid||De===Xe.menuSchemaUid)return Xe;if((Ne=Xe.children)!==null&&Ne!==void 0&&Ne.length){var dt=ln(De,Xe.children);if(dt)return dt}}}catch(ht){Oe.e(ht)}finally{Oe.f()}return null}}var Hn=function(Ce){var Oe=useContext(rr),Fe=Oe.inHeader;return _jsx(RouteContext.Consumer,{children:function(Xe){var dt=Xe.collapsed;return dt&&!Fe?Ce.icon?_jsx(Icon,{type:Ce.icon}):_jsx("span",{style:{display:"inline-block",width:"100%",textAlign:"center"},children:Ce.title.charAt(0)}):Ce.icon?_jsx(Icon,{type:Ce.icon}):null}})},sn=function(Ce){var Oe=(0,d.useSchemaInitializerRender)(H.b),Fe=Oe.render;return Fe({style:{background:"none"},"data-testid":Ce.testId})},Ln=function(Ce){return Ce.icon?(0,G.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,G.jsx)(d.Icon,{type:Ce.icon}),(0,G.jsx)("span",{children:Ce.title})]}):Ce.title};function Bn(De,Ce){var Oe=Ce.designable,Fe=Ce.parentRoute,Ne=Ce.isMobile,Xe=Ce.t,dt=Ce.depth,ht=dt===void 0?0:dt;if(De){var xt=function(Vt){return{key:"x-designer-button",name:(0,G.jsx)(sn,{testId:Vt}),path:"/",disabled:!0,_route:{},_parentRoute:{},icon:(0,G.jsx)(d.Icon,{type:"setting"})}},Ct=De.map(function(Dt){var Vt=ht>1?(0,G.jsx)(Ln,{icon:Dt.icon,title:Xe(Dt.title)}):Xe(Dt.title);if(Dt.type===t.H.link)return{name:Vt,icon:Dt.icon?(0,G.jsx)(d.Icon,{type:Dt.icon}):null,path:"/",hideInMenu:Dt.hideInMenu,_route:Dt,_parentRoute:Fe};if(Dt.type===t.H.page)return{name:Vt,icon:Dt.icon?(0,G.jsx)(d.Icon,{type:Dt.icon}):null,path:"/admin/".concat(Dt.schemaUid),redirect:"/admin/".concat(Dt.schemaUid),hideInMenu:Dt.hideInMenu,_route:Dt,_parentRoute:Fe};if(Dt.type===t.H.group){var Ht,Ut,wt=Bn(Dt.children,{designable:Oe,parentRoute:Dt,depth:ht+1,t:Xe})||[];return Oe&&ht===0&&wt.push(v()(v()({},xt("schema-initializer-Menu-side")),{},{_parentRoute:Dt})),{name:Vt,icon:Dt.icon?(0,G.jsx)(d.Icon,{type:Dt.icon}):null,path:"/admin/".concat(Dt.id),redirect:((Ht=wt[0])===null||Ht===void 0?void 0:Ht.key)==="x-designer-button"?void 0:"/admin/".concat(((Ut=Ke(Dt.children))===null||Ut===void 0?void 0:Ut.schemaUid)||Dt.id),routes:wt.length===0?[{path:"/",name:" ",disabled:!0,_hidden:!0}]:wt,hideInMenu:Dt.hideInMenu,_route:Dt,_depth:ht}}});return Oe&&ht===0&&(Ne?Ct.push(v()({},xt("schema-initializer-Menu-header"))):Ct.unshift(v()({},xt("schema-initializer-Menu-header")))),Ct}}function wn(De,Ce){var Oe=st(De,Ce);return(Oe==null?void 0:Oe.type)===t.H.group}function st(De,Ce){var Oe=h()(Ce),Fe;try{for(Oe.s();!(Fe=Oe.n()).done;){var Ne,Xe=Fe.value;if(Number(De)===Number(Xe.id))return Xe;if((Ne=Xe.children)!==null&&Ne!==void 0&&Ne.length){var dt=st(De,Xe.children);if(dt)return dt}}}catch(ht){Oe.e(ht)}finally{Oe.f()}return null}function Ke(De){if(De){var Ce=h()(De),Oe;try{for(Ce.s();!(Oe=Ce.n()).done;){var Fe,Ne=Oe.value;if(Ne.type===t.H.page)return Ne;if((Fe=Ne.children)!==null&&Fe!==void 0&&Fe.length)return Ke(Ne.children)}}catch(Xe){Ce.e(Xe)}finally{Ce.f()}}}},8918:function(He,ae,e){"use strict";e.d(ae,{zf:function(){return Z.zf},lq:function(){return Z.lq},r3:function(){return Z.r3},IA:function(){return Z.IA},ng:function(){return Z.ng},Me:function(){return Z.Me},Ob:function(){return Z.Ob},bU:function(){return Z.bU},Se:function(){return Z.Se},HQ:function(){return Z.HQ},y2:function(){return Z.y2},IN:function(){return Z.IN},GX:function(){return g},gY:function(){return Z.gY},Kf:function(){return Z.Kf},Hb:function(){return Z.Hb}});var Z=e(4530),c=e(67294),k=e(21143),i=e(85893);function g(){var C=(0,k.useCurrentPageUid)();return(0,i.jsx)(k.RemoteSchemaComponent,{onlyRenderProperties:!0,uid:C})}},28081:function(He,ae,e){"use strict";e.d(ae,{ZR:function(){return i},F8:function(){return g},dQ:function(){return A}});var Z=e(28459),c=e(67294),k=Z.ZP.ConfigContext,i=function(){return(0,c.useContext)(k)},g=function(K,v){var j=(0,c.useContext)(Z.ZP.ConfigContext)||{},h=j.getPrefixCls;if("ConfigContext"in Z.ZP)return(h==null?void 0:h(K,v==null?void 0:v.prefixCls))||"";var M,n=(M=v==null?void 0:v.prefixCls)!==null&&M!==void 0?M:"ant-";return"".concat(n).concat(K??"")},C=e(9361),A=function(){var K=C.Z.useToken();return K}},46917:function(He,ae,e){"use strict";e.d(ae,{N4:function(){return S},CT:function(){return H},l6:function(){return O.l},V_:function(){return A},F8:function(){return Z.F8},dQ:function(){return Z.dQ}});var Z=e(28081),c=e(15009),k=e.n(c),i=e(99289),g=e.n(i),C=e(45360),A=function(){var N=g()(k()().mark(function t(){var B,X,V,U,D,ne=arguments;return k()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return B=ne.length>0&&ne[0]!==void 0?ne[0]:"Loading...",X=ne.length>1?ne[1]:void 0,V=null,U=setTimeout(function(){V=C.ZP.loading(B)},100),J.prev=4,J.next=7,X();case 7:return J.abrupt("return",J.sent);case 8:return J.prev=8,(D=V)===null||D===void 0||D(),clearTimeout(U),J.finish(8);case 12:case"end":return J.stop()}},t,null,[[4,,8,12]])}));return function(){return N.apply(this,arguments)}}(),r=e(80844),K=e(85667),v=e(67294),j=e(73935),h=e.t(j,2),M=e(52677),n=e.n(M),y=e(97857),L=e.n(y),o=L()({},h),a=o.version,R=o.render,E=o.unmountComponentAtNode,$;try{var Q=Number((a||"").split(".")[0]);Q>=18&&o.createRoot&&($=o.createRoot)}catch{}function z(N){var t=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&n()(t)==="object"&&(t.usingClientEntryPoint=N)}var p="__antd_mobile_root__";function b(N,t){R(N,t)}function f(N,t){z(!0);var B=t[p]||$(t);z(!1),B.render(N),t[p]=B}function x(N,t){if($){f(N,t);return}b(N,t)}function m(N){return E(N)}function F(N){return I.apply(this,arguments)}function I(){return I=g()(k()().mark(function N(t){return k()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.abrupt("return",Promise.resolve().then(function(){var V;(V=t[p])===null||V===void 0||V.unmount(),delete t[p]}));case 1:case"end":return X.stop()}},N)})),I.apply(this,arguments)}function d(N){return $?F(N):m(N)}var u=e(85893),l=(0,K.observable)(new Map),S=function(t){var B=function(V){return V.id&&!l.has(V.id)&&l.set(V.id,null),(0,u.jsxs)(v.Fragment,{children:[V.children,(0,u.jsx)(r.Observer,{children:function(){if(!V.id)return(0,u.jsx)(u.Fragment,{});var D=l.get(V.id);return D?(0,j.createPortal)(D,document.body):(0,u.jsx)(u.Fragment,{})}})]})};return B.defaultProps={id:t},B};function H(N,t){function B(V){l.has(t)?l.set(t,V==null?void 0:V()):N&&x((0,u.jsx)(v.Fragment,{children:V==null?void 0:V()}),N)}function X(){if(l.has(t)&&l.set(t,null),N){var V=d(N);if(V&&N.parentNode){var U;(U=N.parentNode)===null||U===void 0||U.removeChild(N)}}}return{render:B,unmount:X}}var O=e(50204)},50204:function(He,ae,e){"use strict";e.d(ae,{l:function(){return r}});var Z=e(9783),c=e.n(Z),k=e(49411),i=e(84327),g=e(28081),C=e(67294),A=function(v,j){var h=v.fontFamily,M=v.fontSize,n='[class^="'.concat(j,'"], [class*=" ').concat(j,'"]');return c()({},n,c()({fontFamily:h,fontSize:M,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}},n,{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}))},r=function(v,j){return function(h){var M=(0,g.dQ)(),n=M.theme,y=M.token,L=M.hashId,o=(0,g.ZR)(),a=o.getPrefixCls,R=o.iconPrefixCls,E=(0,g.F8)(v),$=a(),Q=(0,k.useStyleRegister)({theme:n,token:y,hashId:L,path:["formily-antd",v,E,R]},function(){var p=".".concat(E),b=(0,i.merge)(y,{componentCls:p,prefixCls:E,iconCls:".".concat(R),antCls:".".concat($)}),f=j(b,h,{hashId:L,prefixCls:E,rootPrefixCls:$,iconPrefixCls:R});return[A(y,E),f]}),z=(0,C.useMemo)(function(){return Q},[n,y,L,E,R,$,h]);return{wrapSSR:z,hashId:L,componentCls:E,rootPrefixCls:$}}}},26733:function(He,ae,e){"use strict";var Z=e(97857),c=e.n(Z),k=e(80844),i=e(67294),g=e(76157),C=e(57105),A=e(39270),r=e(35120),K=e(85893),v=i.createContext(0),j=(0,k.observer)(function(h){var M=(0,A.B)()||{},n=M.getComponentByOpenMode,y=M.defaultOpenMode,L=(0,g.XC)(),o=L.openMode,a=o===void 0?y:o,R=i.useContext(v),E=R+1,$=n(a)||r.SG;return(0,K.jsx)(v.Provider,{value:E,children:(0,K.jsx)($,c()({footerNodeName:"Action.Container.Footer",level:E||1},h))})},{displayName:"ActionContainer"});j.Footer=(0,k.observer)(function(){var h=(0,k.useField)(),M=(0,k.useFieldSchema)();return(0,K.jsx)(C.sq,{basePath:h.address,schema:M,onlyRenderProperties:!0})},{displayName:"ActionContainer.Footer"}),ae.Z=j},55642:function(He,ae,e){"use strict";e.d(ae,{$L:function(){return X},$b:function(){return H},C1:function(){return F},Mk:function(){return l},SL:function(){return B},co:function(){return S},eY:function(){return u},sB:function(){return N},x1:function(){return V},xZ:function(){return O},y0:function(){return t}});var Z=e(13769),c=e.n(Z),k=e(9783),i=e.n(k),g=e(97857),C=e.n(g),A=e(80844),r=e(84327),K=e(67294),v=e(26793),j=e(62954),h=e(68091),M=e(5537),n=e(78542),y=e(6145),L=e(53285),o=e(85711),a=e(39270),R=e(90810),E=e(50679),$=e(62662),Q=e(29124),z=e(534),p=e(75496),b=e(85893),f=null,x=["modalTip","linkageAction","removeButtonProps","buttonEditorProps","linkageRulesProps","schemaSettings","enableDrag"],m=function(D){return D.children};function F(U){var D,ne,q,J,Y=(0,A.useField)(),P=(0,A.useFieldSchema)(),w=(0,j.ngQ)(),ie=w.dn,G=(0,v.$)(),le=G.t,xe=(U==null?void 0:U.isLink)||P["x-component"]==="Action.Link";return(0,b.jsx)($.j0,{title:le("Edit button"),schema:{type:"object",title:le("Edit button"),properties:{title:{"x-decorator":"FormItem","x-component":"Input",title:le("Button title"),default:P.title,"x-component-props":{}},icon:{"x-decorator":"FormItem","x-component":"IconPicker",title:le("Button icon"),default:P==null||(D=P["x-component-props"])===null||D===void 0?void 0:D.icon,"x-component-props":{},"x-visible":!xe},iconColor:{title:le("Color"),required:!0,default:(P==null||(ne=P["x-component-props"])===null||ne===void 0?void 0:ne.iconColor)||"#1677FF","x-hidden":!U.hasIconColor,"x-component":"ColorPicker","x-decorator":"FormItem"},type:{"x-decorator":"FormItem","x-component":"Radio.Group",title:le("Button background color"),default:P!=null&&(q=P["x-component-props"])!==null&&q!==void 0&&q.danger?"danger":(P==null||(J=P["x-component-props"])===null||J===void 0?void 0:J.type)==="primary"?"primary":"default",enum:[{value:"default",label:'{{t("Default")}}'},{value:"primary",label:'{{t("Highlight")}}'},{value:"danger",label:'{{t("Danger red")}}'}],"x-visible":!U.hasIconColor&&!xe}}},onSubmit:function(Ee){var ze,Se=Ee.title,se=Ee.icon,me=Ee.type,pe=Ee.iconColor;Y.address.toString()===P.name?(Y.title=Se,Y.componentProps.iconColor=pe,Y.componentProps.icon=se,Y.componentProps.danger=me==="danger",Y.componentProps.type=me||Y.componentProps.type):Y.form.query(new RegExp(".".concat(P.name,"$"))).forEach(function(ee){ee.title=Se,ee.componentProps.iconColor=pe,ee.componentProps.icon=se,ee.componentProps.danger=me==="danger",ee.componentProps.type=me||ee.componentProps.type}),P.title=Se,P["x-component-props"]=P["x-component-props"]||{},P["x-component-props"].iconColor=pe,P["x-component-props"].icon=se,P["x-component-props"].danger=me==="danger",P["x-component-props"].type=me||Y.componentProps.type,ie.emit("patch",{schema:(ze={},i()(ze,"x-uid",P["x-uid"]),i()(ze,"title",Se),i()(ze,"x-component-props",C()({},P["x-component-props"])),ze)}),ie.refresh()}})}var I=function U(D){var ne=D.reduceProperties(function(q,J){return J["x-decorator"]==="FormBlockProvider"?J:U(J)},null);return ne},d=function U(D,ne){for(var q=0;q<(D==null?void 0:D.length);q++){var J=D[q],Y=J.children,P=_objectWithoutProperties(J,f);ne.push(P.key),Y&&U(Y,ne)}return ne};function u(){var U,D,ne,q=(0,j.ngQ)(),J=q.dn,Y=(0,v.$)(),P=Y.t,w=(0,A.useFieldSchema)(),ie={type:"void","x-uid":(0,r.uid)(),"x-component":"Grid","x-initializer":"assignFieldValuesForm:configureFields"},G={"customize:update":P("After clicking the custom button, the following fields of the current record will be saved according to the following form."),"customize:save":P("After clicking the custom button, the following fields of the current record will be saved according to the following form.")},le=(U=w["x-action"])!==null&&U!==void 0?U:"",xe=(0,K.useCallback)(function(_e){var Ee;w["x-action-settings"].assignedValues=_e,J.emit("patch",{schema:(Ee={},i()(Ee,"x-uid",w["x-uid"]),i()(Ee,"x-action-settings",w["x-action-settings"]),Ee)})},[J,w]);return(0,b.jsx)(L.Cm,{isInAssignFieldValues:!0,children:(0,b.jsx)(Q.yT,{isAllowToSetDefaultValue:function(){return!1},children:(0,b.jsx)($.Qh,{title:P("Assign field values"),initialSchema:ie,initialValues:w==null||(D=w["x-action-settings"])===null||D===void 0?void 0:D.assignedValues,modalTip:G[le],uid:w==null||(ne=w["x-action-settings"])===null||ne===void 0?void 0:ne.schemaUid,onSubmit:xe})})})}function l(){var U,D=(0,j.ngQ)(),ne=D.dn,q=(0,v.$)(),J=q.t,Y=(0,A.useFieldSchema)();return(0,b.jsx)($.Qh,{title:J("Request settings"),schema:p.qr,initialValues:Y==null||(U=Y["x-action-settings"])===null||U===void 0?void 0:U.requestSettings,onSubmit:function(w){var ie;Y["x-action-settings"].requestSettings=w,ne.emit("patch",{schema:(ie={},i()(ie,"x-uid",Y["x-uid"]),i()(ie,"x-action-settings",Y["x-action-settings"]),ie)}),ne.refresh()}})}function S(){var U,D=(0,j.ngQ)(),ne=D.dn,q=(0,v.$)(),J=q.t,Y=(0,A.useFieldSchema)();return(0,b.jsx)($.hj,{title:J("Skip required validation"),checked:!!(Y!=null&&(U=Y["x-action-settings"])!==null&&U!==void 0&&U.skipValidator),onChange:function(w){var ie;Y["x-action-settings"].skipValidator=w,ne.emit("patch",{schema:(ie={},i()(ie,"x-uid",Y["x-uid"]),i()(ie,"x-action-settings",C()({},Y["x-action-settings"])),ie)})}})}function H(){var U=(0,j.ngQ)(),D=U.dn,ne=(0,v.$)(),q=ne.t,J=(0,A.useFieldSchema)(),Y=(J==null?void 0:J["x-action-settings"])||{},P=Y.onSuccess;return(0,b.jsx)($.j0,{title:q("After successful submission"),initialValues:P?C()({actionAfterSuccess:P!=null&&P.redirecting?"redirect":"previous"},P):{manualClose:!1,redirecting:!1,successMessage:'{{t("Saved successfully")}}',actionAfterSuccess:"previous"},schema:{type:"object",title:q("After successful submission"),properties:{successMessage:{title:q("Popup message"),"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}},manualClose:{title:q("Message popup close method"),enum:[{label:q("Automatic close"),value:!1},{label:q("Manually close"),value:!0}],"x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{}},redirecting:{title:q("Then"),"x-hidden":!0,enum:[{label:q("Stay on current page"),value:!1},{label:q("Redirect to"),value:!0}],"x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{},"x-reactions":{target:"redirectTo",fulfill:{state:{visible:"{{!!$self.value}}"}}}},actionAfterSuccess:{title:q("Action after successful submission"),enum:[{label:q("Stay on the current popup or page"),value:"stay"},{label:q("Return to the previous popup or page"),value:"previous"},{label:q("Redirect to"),value:"redirect"}],"x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{},"x-reactions":{target:"redirectTo",fulfill:{state:{visible:"{{$self.value==='redirect'}}"}}}},redirectTo:{title:q("Link"),"x-decorator":"FormItem","x-component":"Input","x-component-props":{}}}},onSubmit:function(ie){var G;J["x-action-settings"].onSuccess=ie,D.emit("patch",{schema:(G={},i()(G,"x-uid",J["x-uid"]),i()(G,"x-action-settings",J["x-action-settings"]),G)})}})}function O(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},D=(0,v.$)(),ne=D.t,q=(0,A.useFieldSchema)(),J=(q==null?void 0:q.parent["x-component"])==="CollectionField";return!J&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)($.Z5,{}),(0,b.jsx)($.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:function(P){return P["x-component"]==="Space"||P["x-component"].endsWith("ActionBar")},disabled:U.disabled,confirm:{title:ne("Delete action"),onOk:U.onConfirmOk}})]})}var N=[{name:"Customize",Component:m,children:[{name:"editButton",Component:F,useComponentProps:function(){var D=(0,n.Po)(),ne=D.buttonEditorProps;return ne}},{name:"linkageRules",Component:function(D){return(0,b.jsx)($.lc,C()({},D))},useVisible:function(){var D=(0,z.zC)(),ne=(0,n.Po)(),q=ne.linkageAction;return q||D},useComponentProps:function(){var D=(0,y.useCollection_deprecated)(),ne=D.name,q=(0,n.Po)(),J=q.linkageRulesProps;return C()(C()({},J),{},{collectionName:ne})}},{name:"openMode",Component:R.HA,useComponentProps:function(){var D=(0,a.B)(),ne=D.hideOpenMode,q=(0,A.useFieldSchema)(),J=["create","update","view","customize:popup","duplicate","customize:create"].includes(q["x-action"]||"");return{openMode:J&&!ne,openSize:J&&!ne}}},{name:"secondConFirm",Component:t,useVisible:function(){var D,ne=(0,A.useFieldSchema)(),q=["create","update","view","customize:popup","duplicate","customize:create"].includes(ne["x-action"]||"");return!q&&!(ne!=null&&(D=ne["x-action-settings"])!==null&&D!==void 0&&D.disableSecondConFirm)}},{name:"assignFieldValues",Component:u,useVisible:function(){var D,ne=(0,A.useFieldSchema)();return(0,r.isValid)(ne==null||(D=ne["x-action-settings"])===null||D===void 0?void 0:D.assignedValues)}},{name:"requestSettings",Component:l,useVisible:function(){var D,ne=(0,A.useFieldSchema)();return(0,r.isValid)(ne==null||(D=ne["x-action-settings"])===null||D===void 0?void 0:D.requestSettings)}},{name:"skipValidator",Component:S,useVisible:function(){var D,ne=(0,A.useFieldSchema)();return(0,r.isValid)(ne==null||(D=ne["x-action-settings"])===null||D===void 0?void 0:D.skipValidator)}},{name:"afterSuccess",Component:H,useVisible:function(){var D,ne=(0,A.useFieldSchema)();return(0,r.isValid)(ne==null||(D=ne["x-action-settings"])===null||D===void 0?void 0:D.onSuccess)}},{name:"saveMode",Component:o.J,useVisible:function(){var D,ne=(0,A.useFieldSchema)();return ne["x-action"]==="submit"&&(0,h.h6)((D=ne.parent)===null||D===void 0?void 0:D["x-initializer"],"createForm:configureActions")}},{name:"enableChildCollections",Component:$.L3,useVisible:function(){var D=(0,A.useFieldSchema)(),ne=(0,y.useCollection_deprecated)(),q=ne.name,J=(0,y.useCollectionManager_deprecated)(),Y=J.getChildrenCollections,P=Y(q).length>0&&D["x-action"]==="create";return P},useComponentProps:function(){var D=(0,y.useCollection_deprecated)(),ne=D.name;return{collectionName:ne}}},{name:"refreshDataBlockRequest",Component:V,useComponentProps:function(){return{isPopupAction:!1}},useVisible:function(){var D,ne=(0,A.useFieldSchema)();return(0,r.isValid)(ne==null||(D=ne["x-action-settings"])===null||D===void 0?void 0:D.triggerWorkflows)}},{type:"switch",name:"clearDefaultValue",useComponentProps:function(){var D,ne=(0,v.$)(),q=ne.t,J=(0,A.useFieldSchema)(),Y=(0,j.ngQ)(),P=Y.dn;return{title:q("Clear default value"),checked:J==null||(D=J["x-component-props"])===null||D===void 0?void 0:D.clearDefaultValue,onChange:function(ie){var G;P.deepMerge((G={},i()(G,"x-uid",J["x-uid"]),i()(G,"x-component-props",{clearDefaultValue:ie}),G))}}},useVisible:function(){var D=(0,A.useFieldSchema)(),ne=D["x-use-component-props"]==="useResetBlockActionProps";return ne}},{name:"remove",sort:100,Component:O,useComponentProps:function(){var D=(0,n.Po)(),ne=D.removeButtonProps;return ne},useVisible:function(){var D,ne=(0,A.useFieldSchema)();return(ne==null||(D=ne["x-action-settings"])===null||D===void 0?void 0:D.removable)!==!1}}]}];function t(){var U,D,ne,q,J=(0,j.ngQ)(),Y=J.dn,P=(0,A.useFieldSchema)(),w=(0,v.$)(),ie=w.t,G=(0,A.useField)(),le=(0,j.eJW)();return(0,b.jsx)($.j0,{title:ie("Secondary confirmation"),initialValues:{title:le(P==null||(U=P["x-component-props"])===null||U===void 0||(U=U.confirm)===null||U===void 0?void 0:U.title)||ie("Perform the {{title}}",{title:le(P.title)}),content:le(P==null||(D=P["x-component-props"])===null||D===void 0||(D=D.confirm)===null||D===void 0?void 0:D.content)||ie("Are you sure you want to perform the {{title}} action?",{title:le(P.title)})},schema:{type:"object",title:ie("Secondary confirmation"),properties:{enable:{"x-decorator":"FormItem","x-component":"Checkbox","x-content":ie("Enable secondary confirmation"),default:(P==null||(ne=P["x-component-props"])===null||ne===void 0||(ne=ne.confirm)===null||ne===void 0?void 0:ne.enable)!==!1&&!!(P!=null&&(q=P["x-component-props"])!==null&&q!==void 0&&(q=q.confirm)!==null&&q!==void 0&&q.content),"x-component-props":{}},title:{"x-decorator":"FormItem","x-component":"Input.TextArea",title:ie("Title"),"x-reactions":{dependencies:["enable"],fulfill:{state:{required:"{{$deps[0]}}"}}}},content:{"x-decorator":"FormItem","x-component":"Input.TextArea",title:ie("Content"),"x-reactions":{dependencies:["enable"],fulfill:{state:{required:"{{$deps[0]}}"}}}}}},onSubmit:function(_e){var Ee,ze,Se=_e.enable,se=_e.title,me=_e.content;P["x-component-props"]=P["x-component-props"]||{},P["x-component-props"].confirm={},P["x-component-props"].confirm.enable=Se,P["x-component-props"].confirm.title=se,P["x-component-props"].confirm.content=me,G.componentProps.confirm=C()({},(Ee=P["x-component-props"])===null||Ee===void 0?void 0:Ee.confirm),Y.emit("patch",{schema:(ze={},i()(ze,"x-uid",P["x-uid"]),i()(ze,"x-component-props",C()({},P["x-component-props"])),ze)}),Y.refresh()}})}var B=new M.F5({name:"ActionSettings",items:N}),X=function(D){var ne=D.modalTip,q=D.linkageAction,J=D.removeButtonProps,Y=D.buttonEditorProps,P=D.linkageRulesProps,w=D.schemaSettings,ie=w===void 0?"ActionSettings":w,G=D.enableDrag,le=G===void 0?!0:G,xe=c()(D,x),_e=(0,h.qD)(),Ee=(0,A.useFieldSchema)(),ze=(Ee==null?void 0:Ee.parent["x-component"])!=="CollectionField"&&le,Se="ActionSettings:".concat(Ee["x-action"]),se=ie||"ActionSettings",me=_e.schemaSettingsManager.has(Se);return(0,b.jsx)(E.aN,C()(C()({schemaSettings:me?Se:se,contextValue:{modalTip:ne,linkageAction:q,removeButtonProps:J,buttonEditorProps:Y,linkageRulesProps:P}},xe),{},{disableInitializer:!0,draggable:ze}))};function V(U){var D=(0,j.ngQ)(),ne=D.dn,q=(0,A.useFieldSchema)(),J=(0,v.$)(),Y=J.t,P=(q==null?void 0:q["x-component-props"])||{},w=P.refreshDataBlockRequest;return(0,b.jsx)($.hj,{title:Y("Refresh data on action"),checked:w!==!1,onChange:function(G){var le;q["x-component-props"]=q["x-component-props"]||{},q["x-component-props"].refreshDataBlockRequest=G,ne.emit("patch",{schema:(le={},i()(le,"x-uid",q["x-uid"]),i()(le,"x-component-props",C()({},q["x-component-props"])),le)})}})}X.ButtonEditor=F,X.RemoveButton=O},35120:function(He,ae,e){"use strict";e.d(ae,{SG:function(){return S},ZP:function(){return H}});var Z=e(13769),c=e.n(Z),k=e(5574),i=e.n(k),g=e(97857),C=e.n(g),A=e(80844),r=e(95012),K=e(93967),v=e.n(K),j=e(67294),h=e(4511),M=e(57105),n=e(39594),y=e(75585),L=e(47204),o=e(9783),a=e.n(o),R=e(46917),E=(0,R.l6)("nb-action-drawer",function(O){var N=O.componentCls;return a()({},N,{overflow:"hidden","&.reset":{"&.nb-action-popup":{".ant-drawer-header":{display:"none"},".ant-drawer-body":{paddingTop:O.paddingContentVerticalLG,backgroundColor:O.colorBgLayout,paddingBottom:0}},"&.nb-record-picker-selector":{".ant-drawer-wrapper-body":{backgroundColor:O.colorBgLayout},".nb-block-item":{marginBottom:O.marginBlock,".general-schema-designer":{top:-O.sizeXS,bottom:-O.sizeXS,left:-O.sizeXS,right:-O.sizeXS}}}},".footer":{display:"flex",justifyContent:"flex-end",width:"100%",".ant-btn":{marginRight:O.marginXS}},".ant-drawer-content-wrapper":{borderLeft:"1px solid rgba(255, 255, 255, 0.1)"},".ant-tabs-nav":{paddingLeft:O.paddingLG-O.paddingPageHorizontal,paddingRight:O.paddingLG-O.paddingPageHorizontal,marginLeft:O.paddingPageHorizontal-O.paddingLG,marginRight:O.paddingPageHorizontal-O.paddingLG}})}),$=e(25717),Q=e(534),z=e(19632),p=e(70348);function b(O){var N=useGetAriaLabelOfDrawer(),t=N.getAriaLabel;useEffect(function(){O&&setTimeout(function(){var B=_toConsumableArray(document.querySelectorAll(".ant-drawer-wrapper-body")),X=_toConsumableArray(document.querySelectorAll(".ant-drawer-mask")),V=X[X.length-1],U=B[B.length-1];V&&(V.setAttribute("role","button"),V.setAttribute("aria-label",t("mask"))),U&&(U.setAttribute("role","button"),U.setAttribute("data-testid",t()),U.setAttribute("aria-label",t()))},0)},[t,O])}var f=e(88837),x=e(85893),m=["footerNodeName","zIndex","onClose"],F=j.memo(A.RecursionField);F.displayName="MemoizeRecursionField";var I=function(N){var t=(0,Q.XC)(),B=t.visible,X=t.setVisible;return(0,x.jsx)(r.Z,{open:B,onClose:function(){return X(!1,!0)},width:"50%",children:(0,x.jsx)(n.H,C()({},N))})},d=new Map([["small","30%"],["middle","50%"],["large","70%"]]),u=j.memo(function(O){var N=O.footerNodeName,t=O.field,B=O.schema,X=(0,j.useState)(!1),V=i()(X,2),U=V[0],D=V[1],ne=(0,j.useCallback)(function(q){return q["x-component"]!==N},[N]);return(0,j.useEffect)(function(){(0,j.startTransition)(function(){D(!0)})},[]),U?(0,x.jsx)(M.sq,{basePath:t.address,schema:B,onlyRenderProperties:!0,filterProperties:ne}):null});u.displayName="ActionDrawerContent";var l=(0,A.observer)(function(O){var N=O.footerNodeName,t=N===void 0?"Action.Drawer.Footer":N,B=O.zIndex,X=O.onClose,V=c()(O,m),U=(0,Q.XC)(),D=U.visible,ne=U.setVisible,q=U.openSize,J=q===void 0?"middle":q,Y=U.drawerProps,P=(0,A.useFieldSchema)(),w=(0,A.useField)(),ie=E(),G=ie.componentCls,le=ie.hashId,xe=(0,L.g)(),_e=(0,f.uq)(),Ee=P.reduceProperties(function(ue,ge){return ge["x-component"]===t?ge:ue}),ze=(0,y.Zm)(),Se=ze.hidden,se=(0,j.useMemo)(function(){return C()(C()(C()({},Y==null?void 0:Y.style),V==null?void 0:V.style),{},{display:Se?"none":"block"})},[Se,Y==null?void 0:Y.style,V==null?void 0:V.style]),me=(0,f.KK)("drawer",B||_e,O.level||0),pe=(0,j.useCallback)(function(ue){ne(!1,!0),X==null||X(ue)},[ne,X]),ee=(0,j.useCallback)(function(ue){return ue["x-component"]===t},[t]);return(0,x.jsx)($.ml,{children:(0,x.jsx)(f.K5.Provider,{value:me,children:(0,x.jsx)(L.c,C()(C()({},xe),{},{tabBarExtraContent:null,children:(0,x.jsx)(r.Z,C()(C()(C()({zIndex:me,width:d.get(J),title:w.title},V),Y),{},{rootStyle:se,destroyOnClose:!0,open:D,onClose:pe,rootClassName:v()(G,le,Y==null?void 0:Y.className,V.className,"reset"),footer:Ee&&(0,x.jsx)("div",{className:"footer",children:(0,x.jsx)(F,{basePath:w.address,schema:P,onlyRenderProperties:!0,filterProperties:ee})}),children:(0,x.jsx)(u,{footerNodeName:t,field:w,schema:P})}))}))})})},{displayName:"InternalActionDrawer"}),S=j.memo(function(O){return(0,x.jsx)(h.SV,{FallbackComponent:I,onError:console.log,children:(0,x.jsx)(l,C()({},O))})});S.displayName="ActionDrawer",S.Footer=(0,A.observer)(function(){var O=(0,A.useField)(),N=(0,A.useFieldSchema)();return(0,x.jsx)(F,{basePath:O.address,schema:N,onlyRenderProperties:!0})},{displayName:"ActionDrawer.Footer"}),S.FootBar=(0,A.observer)(function(){var O=(0,A.useField)(),N=(0,A.useFieldSchema)();return(0,x.jsx)("div",{className:"ant-drawer-footer",style:{position:"absolute",bottom:0,right:0,left:0},children:(0,x.jsx)("div",{className:"footer",children:(0,x.jsx)(F,{basePath:O.address,schema:N,onlyRenderProperties:!0})})})},{displayName:"ActionDrawer.FootBar"});var H=S},76858:function(He,ae,e){"use strict";e.d(ae,{Ww:function(){return S},ZP:function(){return H}});var Z=e(68400),c=e.n(Z),k=e(13769),i=e.n(k),g=e(5574),C=e.n(g),A=e(97857),r=e.n(A),K=e(97133),v=e(80844),j=e(5914),h=e(93967),M=e.n(h),n=e(67294),y=e(4511),L=e(57105),o=e(68230),a=e(39594),R=e(75585),E=e(47204),$=e(25717),Q=e(534),z=e(19632),p=e(42779);function b(O){var N=useGetAriaLabelOfModal(),t=N.getAriaLabel;useEffect(function(){O&&setTimeout(function(){var B=_toConsumableArray(document.querySelectorAll(".ant-modal-content")),X=_toConsumableArray(document.querySelectorAll(".ant-modal-wrap")),V=X[X.length-1],U=B[B.length-1];V&&(V.setAttribute("role","button"),V.setAttribute("aria-label",t("mask"))),U&&(U.setAttribute("role","button"),U.setAttribute("data-testid",t()),U.setAttribute("aria-label",t()))})},[t,O])}var f=e(88837),x=e(85893),m,F=["footerNodeName","width","zIndex"],I=function(N){var t=(0,Q.XC)(),B=t.visible,X=t.setVisible;return(0,x.jsx)(j.Z,{open:B,onCancel:function(){return X(!1,!0)},width:"60%",children:(0,x.jsx)(a.H,r()({},N))})},d=new Map([["small","40%"],["middle","60%"],["large","80%"]]),u=n.memo(function(O){var N=O.footerNodeName,t=O.field,B=O.schema,X=(0,n.useState)(!1),V=C()(X,2),U=V[0],D=V[1];return(0,n.useEffect)(function(){(0,n.startTransition)(function(){D(!0)})},[]),U?(0,x.jsx)(L.sq,{basePath:t.address,schema:B,onlyRenderProperties:!0,filterProperties:function(q){return q["x-component"]!==N}}):null}),l=(0,v.observer)(function(O){var N=O.footerNodeName,t=N===void 0?"Action.Modal.Footer":N,B=O.width,X=O.zIndex,V=i()(O,F),U=(0,Q.XC)(),D=U.visible,ne=U.setVisible,q=U.openSize,J=q===void 0?"middle":q,Y=U.modalProps,P=B??d.get(J),w=(0,v.useFieldSchema)(),ie=(0,v.useField)(),G=(0,o.d)(),le=G.token,xe=(0,E.g)(),_e=(0,f.uq)(),Ee=w.reduceProperties(function(pe,ee){return ee["x-component"]===t?ee:pe}),ze=(0,R.Zm)(),Se=ze.hidden,se=!!Ee,me=(0,f.KK)("modal",X||_e,O.level||0);return(0,x.jsx)($.ml,{children:(0,x.jsx)(f.K5.Provider,{value:me,children:(0,x.jsx)(E.c,r()(r()({},xe),{},{tabBarExtraContent:null,children:(0,x.jsx)(j.Z,r()(r()(r()({zIndex:Se?-1:me,width:P,title:ie.title},V),Y),{},{style:r()(r()({},Y==null?void 0:Y.style),V==null?void 0:V.style),destroyOnClose:!0,open:D,onCancel:function(){ne(!1,!0)},className:M()(V.className,Y==null?void 0:Y.className,(0,K.css)(m||(m=c()([`
                  &.nb-action-popup {
                    .ant-modal-header {
                      display: none;
                    }

                    .ant-modal-content {
                      background: var(--nb-box-bg);
                      border: 1px solid rgba(255, 255, 255, 0.1);
                      padding-bottom: 0;
                    }

                    // \u8FD9\u91CC\u7684\u6837\u5F0F\u662F\u4E3A\u4E86\u4FDD\u8BC1\u9875\u9762 tabs \u6807\u7B7E\u4E0B\u9762\u7684\u5206\u5272\u7EBF\u548C\u9875\u9762\u5185\u5BB9\u5BF9\u9F50\uFF08\u9875\u9762\u5185\u8FB9\u8DDD\u53EF\u4EE5\u901A\u8FC7\u4E3B\u9898\u7F16\u8F91\u5668\u8C03\u8282\uFF09
                    .ant-tabs-nav {
                      padding-left: `,`px;
                      padding-right: `,`px;
                      margin-left: `,`px;
                      margin-right: `,`px;
                    }

                    .ant-modal-footer {
                      display: `,`;
                    }
                  }
                `])),le.paddingLG-le.paddingPageHorizontal,le.paddingLG-le.paddingPageHorizontal,le.paddingPageHorizontal-le.paddingLG,le.paddingPageHorizontal-le.paddingLG,se?"block":"none")),footer:se?(0,x.jsx)(L.sq,{basePath:ie.address,schema:w,onlyRenderProperties:!0,filterProperties:function(ee){return ee["x-component"]===t}}):!1,children:(0,x.jsx)(u,{footerNodeName:t,field:ie,schema:w})}))}))})})},{displayName:"ActionModal"}),S=function(N){return(0,x.jsx)(y.SV,{FallbackComponent:I,onError:console.log,children:(0,x.jsx)(l,r()({},N))})};S.Footer=(0,v.observer)(function(){var O=(0,v.useField)(),N=(0,v.useFieldSchema)();return(0,x.jsx)(L.sq,{basePath:O.address,schema:N,onlyRenderProperties:!0})},{displayName:"ActionModal.Footer"});var H=S},90974:function(He,ae,e){"use strict";e.d(ae,{f:function(){return E},Z:function(){return $}});var Z=e(97857),c=e.n(Z),k=e(5574),i=e.n(k),g=e(80844),C=e(67294),A=e(73935),r=e(76157),K=e(57105),v=e(97855),j=e(47204),h=e(9783),M=e.n(h),n=e(46917),y=(0,n.l6)("nb-action-page",function(Q){var z=Q.componentCls;return M()({},z,{position:"absolute !important",top:0,left:0,right:0,bottom:0,backgroundColor:Q.colorBgLayout,overflow:"auto",".ant-tabs-nav":{background:Q.colorBgContainer,padding:"0 ".concat(Q.paddingPageVertical,"px"),marginBottom:0},".ant-tabs-content-holder":{padding:"".concat(Q.paddingPageVertical,"px"),paddingBottom:"0px"}})}),L=function(){var z=(0,C.useMemo)(function(){return document.querySelector(".nb-subpages-slot-without-header-and-side")},[]),p=(0,C.useCallback)(function(){return z},[z]);return{getContainerDOM:p}},o=e(88837),a=e(85893),R=C.memo(function(Q){var z=Q.schema,p=(0,C.useState)(!1),b=i()(p,2),f=b[0],x=b[1];return(0,C.useEffect)(function(){(0,C.startTransition)(function(){x(!0)})},[]),f?(0,a.jsx)(K.sq,{schema:z,onlyRenderProperties:!0}):null});function E(Q){var z=Q.level,p=(0,g.useFieldSchema)(),b=(0,r.XC)(),f=L(),x=f.getContainerDOM,m=y(),F=m.componentCls,I=m.hashId,d=(0,j.g)(),u=(0,o.uq)(),l=(0,C.useMemo)(function(){return{zIndex:(0,o.KK)("page",u,z||0)}},[u,z]);if(!b.visible)return null;var S=(0,a.jsx)("div",{className:"".concat(F," ").concat(I),style:l,children:(0,a.jsx)(r.ml,{children:(0,a.jsx)(j.c,c()(c()({},d),{},{tabBarExtraContent:(0,a.jsx)(v.M,{}),children:(0,a.jsx)(o.K5.Provider,{value:l.zIndex,children:(0,a.jsx)(R,{schema:p})})}))})}),H=x();return(0,A.createPortal)(S,H||document.body)}E.Footer=(0,g.observer)(function(){return null},{displayName:"ActionPage.Footer"});var $=E},25717:function(He,ae,e){"use strict";e.d(ae,{EI:function(){return o},fW:function(){return L},ml:function(){return R}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(97857),C=e.n(g),A=e(5574),r=e.n(A),K=e(80844),v=e(67294),j=e(85782),h=e(94804),M=e(75585),n=e(22891),y=e(85893),L=(0,v.createContext)({});L.displayName="ActionContext";var o=v.memo(function(E){var $=(0,v.useState)(!1),Q=r()($,2),z=Q[0],p=Q[1],b=C()(C()({},E),E.value),f=b.visible,x=C()(C()({},E),E.value),m=x.setSubmitted,F=a(),I=(0,j.ce)((0,K.useFieldSchema)()),d=I.isSubPageClosedByPageMenu,u=I.reset;(0,v.useEffect)(function(){var S=function(){var H=i()(c()().mark(function O(){return c()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(f===!1&&F&&!F.loading&&(z||d()))){t.next=8;break}return u(),F.loading=!0,t.next=5,F.refreshAsync();case 5:F.loading=!1,p(!1),m==null||m(!0);case 8:case"end":return t.stop()}},O)}));return function(){return H.apply(this,arguments)}}();S()},[f,F,m,d,z,u]);var l=(0,v.useMemo)(function(){return C()(C()(C()({},E),E==null?void 0:E.value),{},{submitted:z,setSubmitted:p})},[E,z]);return(0,y.jsx)(L.Provider,{value:l,children:E.children})});o.displayName="ActionContextProvider";var a=function(){var $,Q=(0,M.Zm)(),z=Q.params,p=($=(0,K.useFieldSchema)())===null||$===void 0?void 0:$["x-uid"],b=(0,h.hS)(),f=z==null?void 0:z.popupuid;if((0,v.useEffect)(function(){p&&f!==p&&(0,n.dJ)(p,{service:b})},[f,p,b]),f===p){var x;return((x=(0,n.Yd)(f))===null||x===void 0?void 0:x.service)||b}return b},R=v.memo(function(E){var $=(0,v.useContext)(L),Q=(0,v.useRef)({});return Object.assign(Q.current,$),(0,y.jsx)(L.Provider,{value:Q.current,children:E.children})});R.displayName="ActionContextNoRerender"},534:function(He,ae,e){"use strict";e.d(ae,{XC:function(){return M},p2:function(){return n},zC:function(){return y}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(97857),C=e.n(g),A=e(80844),r=e(3321),K=e(67294),v=e(26793),j=e(7340),h=e(25717),M=function(){var o=(0,K.useContext)(h.fW),a=(0,v.$)(),R=a.t,E=r.Z.useApp(),$=E.modal;return C()(C()({},o),{},{setVisible:(0,K.useCallback)(function(Q){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Q){var b;(b=o.setVisible)===null||b===void 0||b.call(o,Q)}else if(z&&o.formValueChanged)$.confirm({title:R("Unsaved changes"),content:R("Are you sure you don't want to save?"),onOk:function(){return i()(c()().mark(function x(){var m;return c()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:o.setFormValueChanged(!1),(m=o.setVisible)===null||m===void 0||m.call(o,!1);case 2:case"end":return I.stop()}},x)}))()}});else{var p;(p=o.setVisible)===null||p===void 0||p.call(o,!1)}},[$,R,o.formValueChanged,o.setVisible,o.setFormValueChanged])})},n=function(){var o=(0,K.useContext)(h.fW),a=o.setVisible,R=(0,A.useForm)();return{run:function(){return i()(c()().mark(function $(){return c()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:a(!1),R.submit(function(p){console.log(p)});case 2:case"end":return z.stop()}},$)}))()}}},y=function(){var o=(0,A.useFieldSchema)(),a=(0,j.WG)(),R=["Action.Link","Action"].includes(o["x-component"]);return R&&a&&o["x-action"]}},70348:function(He,ae,e){"use strict";e.d(ae,{v:function(){return g}});var Z=e(80844),c=e(67294),k=e(6145),i=e(84577),g=function(){var A=(0,Z.useFieldSchema)(),r=A["x-component"],K=typeof r=="string"?r:(r==null?void 0:r.displayName)||(r==null?void 0:r.name),v=(0,i.eJ)(),j=(0,k.useCollection_deprecated)(),h=j.name,M=v(A.title);h=h?"-".concat(h):"",M=M?"-".concat(M):"";var n=(0,c.useCallback)(function(y){return y=y?"-".concat(y):"","drawer-".concat(K).concat(h).concat(M).concat(y)},[h,K,M]);return{getAriaLabel:n}}},42779:function(He,ae,e){"use strict";e.d(ae,{Q:function(){return g}});var Z=e(80844),c=e(67294),k=e(6145),i=e(84577),g=function(){var A=(0,Z.useFieldSchema)(),r=A["x-component"],K=typeof r=="string"?r:(r==null?void 0:r.displayName)||(r==null?void 0:r.name),v=(0,i.eJ)(),j=(0,k.useCollection_deprecated)(),h=j.name,M=v(A.title);h=h?"-".concat(h):"",M=M?"-".concat(M):"";var n=(0,c.useCallback)(function(y){return y=y?"-".concat(y):"","modal-".concat(K).concat(h).concat(M).concat(y)},[h,K,M]);return{getAriaLabel:n}}},78:function(He,ae,e){"use strict";e.d(ae,{t:function(){return g}});var Z=e(80844),c=e(67294),k=e(6145),i=e(84577),g=function(){var A=(0,Z.useFieldSchema)(),r=A["x-component"],K=typeof r=="string"?r:(r==null?void 0:r.displayName)||(r==null?void 0:r.name),v=(0,i.eJ)(),j=(0,k.useCollection_deprecated)(),h=j.name,M=v(A.title);h=h?"-".concat(h):"",M=M?"-".concat(M):"";var n=(0,c.useCallback)(function(y){return y=y?"-".concat(y):"","popover-".concat(K).concat(h).concat(M).concat(y)},[h,K,M]);return{getAriaLabel:n}}},76157:function(He,ae,e){"use strict";e.d(ae,{aU:function(){return ee},ol:function(){return Ze},N0:function(){return ce},fW:function(){return ie.fW},ml:function(){return ie.ml},EI:function(){return ie.EI},$L:function(){return B.$L},$b:function(){return B.$b},eY:function(){return B.eY},C1:function(){return B.C1},x1:function(){return B.x1},xZ:function(){return B.xZ},Mk:function(){return B.Mk},y0:function(){return B.y0},co:function(){return B.co},SL:function(){return B.SL},sB:function(){return B.sB},KK:function(){return lt.KK},vU:function(){return Ie},DU:function(){return be},XC:function(){return We.XC},p2:function(){return We.p2},HS:function(){return xe},vB:function(){return tt.v},QY:function(){return St.Q},t9:function(){return Tt.t},zC:function(){return We.zC},uq:function(){return lt.uq},K5:function(){return lt.K5}});var Z=e(5574),c=e.n(Z),k=e(97857),i=e.n(k),g=e(13769),C=e.n(g),A=e(15009),r=e.n(A),K=e(99289),v=e.n(K),j=e(80844),h=e(84157),M=e(3321),n=e(15867),y=e(93967),L=e.n(y),o=e(23279),a=e.n(o),R=e(67294),E=e(4511),$=e(26793),Q=e(62954),z=e(47646),p=e(94804),b=e(57105),f=e(15503),x=e(82369),m=e(67354),F=e(73691),I=e(36586),d=e(64910),u=e(14896),l=e(84577),S=e(9780),H=e(75585),O=e(22891),N=e(14984),t=e(26733),B=e(55642),X=e(35120),V=e(85893),U=(0,f.t)((0,j.observer)(function(ut){return(0,V.jsx)(ge,i()(i()({},ut),{},{component:ut.component||"a",className:L()("nb-action-link",ut.className)}))}),{displayName:"ActionLink"}),D=e(76858),ne=e(90974),q=e(9783),J=e.n(q),Y=e(46917),P=(0,Y.l6)("nb-action",function(ut){var nt=ut.componentCls;return J()({},nt,{position:"relative","&:hover":{"> .general-schema-designer":{display:"block"}},"&.nb-action-link":{margin:"-12px",padding:"12px",".nb-action-title":{marginInlineStart:"0px"}},"> .general-schema-designer":{position:"absolute",zIndex:999,top:"0",bottom:"0",left:"0",right:"0",display:"none",background:"var(--colorBgSettingsHover)",border:"0",pointerEvents:"none","> .general-schema-designer-icons":{position:"absolute",right:"2px",top:"2px",lineHeight:"16px",pointerEvents:"all",".ant-space-item":{backgroundColor:ut.colorSettings,color:"#fff",lineHeight:"16px",width:"16px",paddingLeft:"1px",alignSelf:"stretch"}}},".ant-btn-icon":{marginInlineEnd:"0px !important"},".nb-action-title":{marginInlineStart:"".concat(ut.controlPaddingHorizontalSM,"px")}})}),w=P,ie=e(25717),G=e(75148),le=e(6145),xe=function(nt){var Je=(0,I.a)(),hn=(0,I.pW)(),mn=(0,j.useFieldSchema)(),vn=(0,l.eJ)(),an=mn["x-component"],fn=typeof an=="string"?an:(an==null?void 0:an.displayName)||(an==null?void 0:an.name),cn=(Je==null?void 0:Je.name)||(Je==null?void 0:Je.title)||(hn!=null?String(hn):""),_n=mn["x-action"],zt=(0,le.useCollection_deprecated)(),xn=zt.name,Qt=(0,G.VG)()||{},Et=Qt.name,en=nt||vn(mn.title);xn=xn?"-".concat(xn):"",Et=Et?"-".concat(Et):"",_n=_n?"-".concat(_n):"",cn=cn?"-".concat(cn):"";var Rn=(0,R.useCallback)(function(An){return An=An?"-".concat(An):"","action-".concat(fn,"-").concat(en).concat(_n).concat(xn).concat(Et).concat(cn).concat(An)},[_n,en,Et,xn,fn,cn]);return{getAriaLabel:Rn}},_e=e(75496),Ee=e(68091),ze=["popover","containerRefKey","component","useAction","className","icon","title","onClick","style","loading","openSize","disabled","actionCallback","confirm","addChild","onMouseEnter","refreshDataBlockRequest","confirmTitle"],Se=["containerRefKey","fieldSchema","designable","field","icon","loading","handleMouseEnter","tarComponent","className","type","Designer","onClick","confirm","confirmTitle","popover","addChild","recordData","title","style","propsDisabled","useAction","actionCallback","visibleWithURL","setVisibleWithURL","setSubmitted","getAriaLabel","parentRecordData"],se=["designable","field","aclCtx","icon","loading","disabled","buttonStyle","handleMouseEnter","getAriaLabel","handleButtonClick","tarComponent","componentCls","hashId","className","type","Designer","designerProps","title"],me=function(){return{run:function(){return v()(r()().mark(function Je(){return r()().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:case"end":return mn.stop()}},Je)}))()}}},pe=console.log,ee=(0,f.t)(R.memo(function(ut){var nt,Je=(0,S.w)(ut),hn=Je.popover,mn=Je.containerRefKey,vn=Je.component,an=Je.useAction,fn=an===void 0?me:an,cn=Je.className,_n=Je.icon,zt=Je.title,xn=Je.onClick,Qt=Je.style,Et=Je.loading,en=Je.openSize,Rn=Je.disabled,An=Je.actionCallback,Jn=Je.confirm,Zn=Je.addChild,rr=Je.onMouseEnter,mr=Je.refreshDataBlockRequest,Er=Je.confirmTitle,Ft=C()(Je,ze),ct=(0,l.et)(),Mt=(0,j.useField)(),kt=(0,j.useFieldSchema)(),Rt=(0,l.eJ)(),_t=(0,p.nE)(),Bt=Rt((nt=kt["x-component-props"])===null||nt===void 0?void 0:nt.confirm)||Jn,jt=(0,R.useMemo)(function(){return(kt==null?void 0:kt["x-linkage-rules"])||[]},[kt==null?void 0:kt["x-linkage-rules"]]),Xt=(0,Q.ngQ)(),Wt=Xt.designable,Nt=(0,l.Co)(vn)||vn,nn=(0,d.OQ)(),Zt=(0,d.Kp)({currentForm:{values:_t,readPretty:!1}}),Cn=(0,O.ES)(),Yt=Cn.visibleWithURL,Mn=Cn.setVisibleWithURL,bn=(0,Q.XCj)(),Gt=bn.setSubmitted,ln=xe(zt),Hn=ln.getAriaLabel,sn=(0,p.Kv)(),Ln=(0,Ee.qD)();(0,R.useEffect)(function(){Mt.stateOfLinkageRules&&(0,_e.d$)(Mt),Mt.stateOfLinkageRules={},jt.filter(function(wn){return!wn.disabled}).forEach(function(wn){var st;(st=wn.actions)===null||st===void 0||st.forEach(function(Ke){(0,_e.yB)({operator:Ke.operator,field:Mt,condition:wn.condition,variables:nn,localVariables:Zt},Ln.jsonLogic)})})},[Mt,jt,Zt,nn]);var Bn=(0,R.useCallback)(function(wn){rr==null||rr(wn)},[rr]);return(0,V.jsx)(ue,i()({containerRefKey:mn,fieldSchema:kt,designable:Wt,field:Mt,icon:_n,loading:Et,handleMouseEnter:Bn,tarComponent:Nt,className:cn,type:ut.type,Designer:ct,onClick:xn,confirm:Bt,confirmTitle:Er,popover:hn,addChild:Zn,recordData:_t,title:zt,style:Qt,propsDisabled:Rn,useAction:fn,visibleWithURL:Yt,setVisibleWithURL:Mn,setSubmitted:Gt,getAriaLabel:Hn,parentRecordData:sn,actionCallback:An},Ft))}),{displayName:"Action"}),ue=(0,j.observer)(function(nt){var Je,hn,mn,vn,an,fn=nt.containerRefKey,cn=nt.fieldSchema,_n=nt.designable,zt=nt.field,xn=nt.icon,Qt=nt.loading,Et=nt.handleMouseEnter,en=nt.tarComponent,Rn=nt.className,An=nt.type,Jn=nt.Designer,Zn=nt.onClick,rr=nt.confirm,mr=nt.confirmTitle,Er=nt.popover,Ft=nt.addChild,ct=nt.recordData,Mt=nt.title,kt=nt.style,Rt=nt.propsDisabled,_t=nt.useAction,Bt=nt.actionCallback,jt=nt.visibleWithURL,Xt=nt.setVisibleWithURL,Wt=nt.setSubmitted,Nt=nt.getAriaLabel,nn=nt.parentRecordData,Zt=C()(nt,Se),Cn=(0,R.useState)(!1),Yt=c()(Cn,2),Mn=Yt[0],bn=Yt[1],Gt=w(),ln=Gt.wrapSSR,Hn=Gt.componentCls,sn=Gt.hashId,Ln=(0,R.useState)(!1),Bn=c()(Ln,2),wn=Bn[0],st=Bn[1],Ke=cn["x-toolbar-props"]||cn["x-designer-props"],De=cn==null||(Je=cn["x-component-props"])===null||Je===void 0?void 0:Je.openMode,Ce=cn==null||(hn=cn["x-component-props"])===null||hn===void 0?void 0:hn.openSize,Oe=cn==null||(mn=cn["x-component-props"])===null||mn===void 0?void 0:mn.refreshDataBlockRequest,Fe=M.Z.useApp(),Ne=Fe.modal,Xe=(0,j.useForm)(),dt=(0,z.Hq)(),ht=(_t==null?void 0:_t(Bt))||{},xt=ht.run,Ct=ht.element,Dt=ht.disabled,Vt=Xe.disabled||zt.disabled||((vn=zt.data)===null||vn===void 0?void 0:vn.disabled)||Rt||Dt,Ht=(0,R.useMemo)(function(){var qe;return i()(i()({},kt),{},{opacity:_n&&((zt==null||(qe=zt.data)===null||qe===void 0?void 0:qe.hidden)||!dt)&&.1,color:Vt?"rgba(0, 0, 0, 0.25)":kt==null?void 0:kt.color})},[dt,_n,zt==null||(an=zt.data)===null||an===void 0?void 0:an.hidden,kt,Vt]),Ut={designable:_n,field:zt,aclCtx:dt,icon:xn,loading:Qt,disabled:Vt,buttonStyle:Ht,handleMouseEnter:Et,tarComponent:en,designerProps:Ke,componentCls:Hn,hashId:sn,className:Rn,others:Zt,getAriaLabel:Nt,type:An,Designer:Jn,onClick:Zn,refreshDataBlockRequest:Oe,fieldSchema:cn,setVisible:bn,run:xt,confirm:rr,modal:Ne,setSubmitted:Wt,confirmTitle:mr,title:Mt},wt=(0,R.useCallback)(function(qe){bn==null||bn(qe),Xt==null||Xt(qe)},[Xt]),ot=(0,V.jsx)(H.OA,{visible:!1,children:(0,V.jsxs)(ie.EI,{button:Ae(Ut),visible:Mn||jt,setVisible:wt,formValueChanged:wn,setFormValueChanged:st,openMode:De,openSize:Ce,containerRefKey:fn,fieldSchema:cn,setSubmitted:Wt,children:[Er&&(0,V.jsx)(b.sq,{basePath:zt.address,onlyRenderProperties:!0,schema:cn}),!Er&&(0,V.jsx)(Ae,i()({},Ut)),(0,V.jsx)(F.Rm,{children:!Er&&nt.children}),Ct]})});return Ie(cn)&&(ot=(0,V.jsx)(Q.c__,{children:ot})),ln(Ft?(0,V.jsx)(I.HV,{record:null,parent:nn,children:(0,V.jsx)(m.q,{parent:ct,children:ot})}):ot)});ue.displayName="InternalAction",ee.Popover=function(nt){var Je=(0,Q.XCj)(),hn=Je.button,mn=Je.visible,vn=Je.setVisible,an=(0,V.jsx)(E.SV,{FallbackComponent:Q.Hj5,onError:pe,children:nt.children});return(0,V.jsx)(Q.qHe,i()(i()({},nt),{},{destroyTooltipOnHide:!0,open:mn,onOpenChange:function(cn){vn(cn)},content:an,children:hn}))},ee.Popover.displayName="Action.Popover",ee.Popover.Footer=function(ut){return(0,V.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",width:"100%"},children:ut.children})},ee.Popover.Footer.displayName="Action.Popover.Footer",ee.Link=U,ee.Designer=B.$L,ee.Drawer=X.SG,ee.Modal=D.Ww,ee.Container=t.Z,ee.Page=ne.f;var ge=ee;function Ie(ut){return ut["x-action"]==="customize:bulkEdit"}var Ae=function(nt){var Je=nt.designable,hn=nt.field,mn=nt.aclCtx,vn=nt.icon,an=nt.loading,fn=nt.disabled,cn=nt.buttonStyle,_n=nt.handleMouseEnter,zt=nt.tarComponent,xn=nt.designerProps,Qt=nt.componentCls,Et=nt.hashId,en=nt.className,Rn=nt.others,An=nt.getAriaLabel,Jn=nt.type,Zn=nt.Designer,rr=nt.onClick,mr=nt.refreshDataBlockRequest,Er=nt.fieldSchema,Ft=nt.setVisible,ct=nt.run,Mt=nt.confirm,kt=nt.modal,Rt=nt.setSubmitted,_t=nt.confirmTitle,Bt=nt.title,jt=(0,p.Pt)(),Xt=jt.getDataBlockRequest,Wt=(0,$.$)(),Nt=Wt.t,nn=(0,N.a)(),Zt=nn.isPopupVisibleControlledByURL,Cn=(0,O.ES)(),Yt=Cn.openPopup,Mn=(0,R.useRef)(null);Mn.current=Yt;var bn=(0,R.useCallback)(function(Gt){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(ln&&(0,h.isPortalInBody)(Gt.target))&&(Gt.preventDefault(),Gt.stopPropagation(),!fn&&mn)){var Hn=function(){rr?rr(Gt,function(){if(mr!==!1){var Ln,Bn;Rt==null||Rt(!0),(Ln=Xt())===null||Ln===void 0||(Bn=Ln.refresh)===null||Bn===void 0||Bn.call(Ln)}}):Ie(Er)||!Zt()?(Ft(!0),ct==null||ct()):["view","update","create","customize:popup"].includes(Er["x-action"])&&Er["x-uid"]?Mn.current():(Ft(!0),ct==null||ct())};(Mt==null?void 0:Mt.enable)!==!1&&Mt!==null&&Mt!==void 0&&Mt.content?kt.confirm({title:Nt(Mt.title,{title:_t||Bt||(hn==null?void 0:hn.title)}),content:Nt(Mt.content,{title:_t||Bt||(hn==null?void 0:hn.title)}),onOk:Hn}):Hn()}},[mn,Mt==null?void 0:Mt.content,Mt==null?void 0:Mt.enable,Mt==null?void 0:Mt.title,_t,fn,hn,Er,Zt,kt,rr,mr,ct,Rt,Ft,Nt,Bt,Xt]);return(0,V.jsx)(Le,i()({designable:Je,field:hn,aclCtx:mn,icon:vn,loading:an,disabled:fn,buttonStyle:cn,handleMouseEnter:_n,getAriaLabel:An,handleButtonClick:bn,tarComponent:zt,componentCls:Qt,hashId:Et,className:en,type:Jn,Designer:Zn,designerProps:xn,title:Bt},Rn))};Ae.displayName="RenderButton";var Le=(0,j.observer)(function(ut){var nt,Je,hn=ut.designable,mn=ut.field,vn=ut.aclCtx,an=ut.icon,fn=ut.loading,cn=ut.disabled,_n=ut.buttonStyle,zt=ut.handleMouseEnter,xn=ut.getAriaLabel,Qt=ut.handleButtonClick,Et=ut.tarComponent,en=ut.componentCls,Rn=ut.hashId,An=ut.className,Jn=ut.type,Zn=ut.Designer,rr=ut.designerProps,mr=ut.title,Er=C()(ut,se),Ft=(0,R.useCallback)(a()(function(Mt){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;Qt(Mt,kt)},300,{leading:!0,trailing:!1}),[Qt]);if((0,R.useEffect)(function(){return function(){Ft.cancel()}},[]),!hn&&(mn!=null&&(nt=mn.data)!==null&&nt!==void 0&&nt.hidden||!vn))return null;var ct=mr||(mn==null?void 0:mn.title);return(0,V.jsxs)(u.SortableItem,i()(i()({role:"button","aria-label":xn()},Er),{},{onMouseEnter:zt,loading:(mn==null||(Je=mn.data)===null||Je===void 0?void 0:Je.loading)||fn,icon:typeof an=="string"?(0,V.jsx)(x.JO,{type:an}):an,disabled:cn,style:_n,onClick:Ft,component:Et||n.ZP,className:L()(en,Rn,An,"nb-action"),type:Jn==="danger"?void 0:Jn,children:[ct&&(0,V.jsx)("span",{className:an?"nb-action-title":null,children:ct}),(0,V.jsx)(Zn,i()({},rr))]}))});Le.displayName="RenderButtonInner";var Te=e(97133),je=e(42075),Pe=e(73935),fe=["children"],re=["layout","style","spaceProps"],T=R.createContext({container:null}),ce=function(nt){var Je=nt.children,hn=C()(nt,fe);return(0,V.jsx)(T.Provider,{value:hn,children:Je})},be=function(){return(0,R.useContext)(T)},oe=function(nt){var Je=(0,j.useFieldSchema)(),hn=be(),mn=hn.container,vn=hn.parentComponents,an=vn===void 0?["BlockItem","CardItem"]:vn;return(0,V.jsx)(V.Fragment,{children:mn&&an.includes(Je.parent["x-component"])?(0,Pe.createPortal)(nt.children,mn):nt.children})},Re=function(nt){var Je,hn=be(),mn=hn.forceProps,vn=mn===void 0?{}:mn,an=i()(i()({},(0,l.wN)(nt)),vn),fn=an.layout,cn=fn===void 0?"two-columns":fn,_n=an.style,zt=an.spaceProps,xn=C()(an,re),Qt=(0,j.useFieldSchema)(),Et=(0,Ee.IU)(Qt["x-initializer"],Qt["x-initializer-props"]),en=Et.render,Rn=(0,l.ng)(),An=Rn.designable;if(cn==="one-column")return(0,V.jsx)(oe,{children:(0,V.jsx)(u.DndContext,{children:(0,V.jsxs)("div",i()(i()({style:i()(i()({display:"flex",alignItems:"center",gap:8},_n),{},{marginTop:0})},xn),{},{className:(0,Te.cx)(xn.className,"nb-action-bar"),children:[nt.children&&(0,V.jsx)("div",{children:(0,V.jsx)(je.Z,i()(i()({},zt),{},{style:i()({flexWrap:"wrap"},(zt==null?void 0:zt.style)||{}),children:Qt.mapProperties(function(Zn,rr){return(0,V.jsx)(b.sq,{name:rr,schema:Zn},rr)})}))}),en({style:{margin:"0 !important"}})]}))})});var Jn=Object.keys((Je=Qt.properties)!==null&&Je!==void 0?Je:{}).length>0;return(0,V.jsxs)("div",i()(i()({style:!An&&!Jn?void 0:i()({display:"flex",justifyContent:"space-between",alignItems:"center",overflowX:"auto",flexShrink:0,gap:"8px"},_n)},xn),{},{className:(0,Te.cx)(xn.className,"nb-action-bar"),children:[(0,V.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",overflow:"hidden",flexWrap:"wrap",gap:"8px"},children:(0,V.jsxs)(u.DndContext,{children:[(0,V.jsx)(je.Z,i()(i()({},zt),{},{style:{flexWrap:"wrap"},children:Qt.mapProperties(function(Zn,rr){return Zn["x-align"]!=="left"?null:(0,V.jsx)(b.sq,{name:rr,schema:Zn},rr)})})),(0,V.jsx)(je.Z,i()(i()({},zt),{},{style:i()({flexWrap:"wrap"},(zt==null?void 0:zt.style)||{}),children:Qt.mapProperties(function(Zn,rr){return Zn["x-align"]==="left"?null:(0,V.jsx)(b.sq,{name:rr,schema:Zn},rr)})}))]})}),en()]}))},Ze=(0,f.t)(function(ut){return(0,V.jsx)(Re,i()({},ut))},{displayName:"ActionBar"}),We=e(534),tt=e(70348),St=e(42779),Tt=e(78),lt=e(88837)},75496:function(He,ae,e){"use strict";e.d(ae,{d$:function(){return n},qr:function(){return h},yB:function(){return M}});var Z=e(15009),c=e.n(Z),k=e(97857),i=e.n(k),g=e(99289),C=e.n(g),A=e(96486),r=e.n(A),K=e(4595),v=e(7840),j={validator:`{{(value, rule)=> {
    if (!value) {
      return '';
    }
    try {
      const val = JSON.parse(value);
      if(!isNaN(val)) {
        return false;
      }
      return true;
    } catch(error) {
      console.error(error);
      return false;
    }
  }}}`,message:'{{t("Invalid JSON format")}}'},h={type:"object",properties:{url:{type:"string",title:'{{t("Request URL")}}',required:!0,"x-decorator":"FormItem","x-component":"Input"},method:{type:"string",title:'{{t("Request method")}}',"x-decorator":"FormItem","x-component":"Select",default:"POST",enum:[{label:"POST",value:"POST"},{label:"GET",value:"GET"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"},{label:"DELETE",value:"DELETE"}]},headers:{type:"string",title:'{{t("Request headers")}}',"x-decorator":"FormItem","x-component":"Input.TextArea","x-validator":j},params:{type:"string",title:'{{t("Request query parameters")}}',"x-decorator":"FormItem","x-component":"Input.TextArea","x-validator":j},data:{type:"string",title:'{{t("Request body")}}',"x-decorator":"FormItem","x-component":"Input.TextArea","x-validator":j}}},M=function(){var y=C()(c()().mark(function L(o,a){var R,E,$,Q,z,p,b,f,x,m;return c()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:$=o.operator,Q=o.field,z=o.condition,p=o.variables,b=o.localVariables,f=(Q==null||(R=Q.stateOfLinkageRules)===null||R===void 0?void 0:R.disabled)||[!1],x=(Q==null||(E=Q.stateOfLinkageRules)===null||E===void 0?void 0:E.display)||["visible"],I.t0=$,I.next=I.t0===K.Us.Visible?6:I.t0===K.Us.Hidden?15:I.t0===K.Us.Disabled?25:I.t0===K.Us.Active?33:44;break;case 6:return I.next=8,(0,v.jC)({ruleGroup:z,variables:p,localVariables:b},a);case 8:if(!I.sent){I.next=12;break}x.push($),Q.data=Q.data||{},Q.data.hidden=!1;case 12:return Q.stateOfLinkageRules=i()(i()({},Q.stateOfLinkageRules),{},{display:x}),Q.display=(0,A.last)(x),I.abrupt("break",45);case 15:return I.next=17,(0,v.jC)({ruleGroup:z,variables:p,localVariables:b},a);case 17:if(!I.sent){I.next=22;break}Q.data=Q.data||{},Q.data.hidden=!0,I.next=24;break;case 22:Q.data=Q.data||{},Q.data.hidden=!1;case 24:return I.abrupt("break",45);case 25:return I.next=27,(0,v.jC)({ruleGroup:z,variables:p,localVariables:b},a);case 27:if(!I.sent){I.next=29;break}f.push(!0);case 29:return Q.stateOfLinkageRules=i()(i()({},Q.stateOfLinkageRules),{},{disabled:f}),Q.disabled=(0,A.last)(f),Q.componentProps.disabled=(0,A.last)(f),I.abrupt("break",45);case 33:return I.next=35,(0,v.jC)({ruleGroup:z,variables:p,localVariables:b},a);case 35:if(!I.sent){I.next=39;break}f.push(!1),I.next=40;break;case 39:f.push(!!((m=Q.componentProps)!==null&&m!==void 0&&m.disabled));case 40:return Q.stateOfLinkageRules=i()(i()({},Q.stateOfLinkageRules),{},{disabled:f}),Q.disabled=(0,A.last)(f),Q.componentProps.disabled=(0,A.last)(f),I.abrupt("break",45);case 44:return I.abrupt("return",null);case 45:case"end":return I.stop()}},L)}));return function(o,a){return y.apply(this,arguments)}}(),n=function(L){L.data=L.data||{},L.display="visible",L.disabled=!1,L.data.hidden=!1,L.componentProps.disabled=!1}},88837:function(He,ae,e){"use strict";e.d(ae,{K5:function(){return c},KK:function(){return i},uq:function(){return k}});var Z=e(67294),c=Z.createContext(100),k=function(){return Z.useContext(c)},i=function(C,A,r){var K=A;return C==="page"&&!window.location.pathname.includes("/embed/")?(K=A+r,K>200?K-200:K):(K=A+r,K<200?K+200:K)}},13642:function(He,ae,e){"use strict";e.d(ae,{O:function(){return c}});var Z=e(67294),c=(0,Z.createContext)({});c.displayName="AssociationFieldContext"},29132:function(He,ae,e){"use strict";e.d(ae,{Ky:function(){return E},Xd:function(){return Q},ZP:function(){return $},_c:function(){return p},eI:function(){return b},fR:function(){return R}});var Z=e(97857),c=e.n(Z),k=e(9783),i=e.n(k),g=e(80844),C=e(96486),A=e.n(C),r=e(50361),K=e.n(r),v=e(67294),j=e(12929),h=e(6145),M=e(18386),n=e(87714),y=e(36586),L=e(84577),o=e(13642),a=e(85893),R=function(x){var m=(0,g.useFieldSchema)(),F=(0,L.ng)(),I=F.insertAfterBegin,d=(0,v.useCallback)(function(u){var l=m.reduceProperties(function(S,H){return H["x-component"]==="AssociationField."+x?H:S},null);l||I(K()(u))},[x,m,I]);return d};function E(){return(0,v.useContext)(o.O)}function $(f){var x,m,F,I,d=f.action,u=d===void 0?"list":d,l=f.service,S=f.useOriginalFilter,H=(0,g.useFieldSchema)(),O=(0,g.useField)(),N=(0,h.useCollection_deprecated)(),t=N.getField,B=(0,h.useCollectionManager_deprecated)(),X=B.getCollectionJoinField,V=(0,y.a)(),U=((0,C.isString)(H==null||(x=H["x-component-props"])===null||x===void 0||(x=x.service)===null||x===void 0||(x=x.params)===null||x===void 0?void 0:x.filter)?(m=O.componentProps)===null||m===void 0||(m=m.service)===null||m===void 0||(m=m.params)===null||m===void 0?void 0:m.filter:H==null||(F=H["x-component-props"])===null||F===void 0||(F=F.service)===null||F===void 0||(F=F.params)===null||F===void 0?void 0:F.filter)||(l==null||(I=l.params)===null||I===void 0?void 0:I.filter),D=(0,j.v)({filterOption:U}),ne=D.filter,q=(0,v.useMemo)(function(){return t(H.name)||X(H==null?void 0:H["x-collection-field"])},[H]),J=V==null?void 0:V[q==null?void 0:q.sourceKey],Y=(0,v.useMemo)(function(){var P=["oho","o2m"].includes(q==null?void 0:q.interface);return(0,n.EO)([(0,n.EO)([P&&!(0,M.Op)(H)&&q!==null&&q!==void 0&&q.foreignKey&&!S?i()({},q.foreignKey,{$is:null}):null,ne]),P&&J!==void 0&&J!==null&&!(0,M.Op)(H)&&q!==null&&q!==void 0&&q.foreignKey&&!S?i()({},q.foreignKey,{$eq:J}):null],"$or")},[q==null?void 0:q.interface,q==null?void 0:q.foreignKey,H,ne,J,S]);return(0,v.useMemo)(function(){return c()(c()({resource:q==null?void 0:q.target,action:u},l),{},{params:c()(c()({},l==null?void 0:l.params),{},{filter:Y})})},[q==null?void 0:q.target,u,Y,l])}var Q=function(){var x,m,F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I=(0,g.useFieldSchema)(),d=((x=I["x-component-props"])===null||x===void 0||(x=x.field)===null||x===void 0||(x=x.uiSchema)===null||x===void 0||(x=x["x-component-props"])===null||x===void 0?void 0:x.fieldNames)||((m=I["x-component-props"])===null||m===void 0?void 0:m.fieldNames)||F.fieldNames;return c()({label:"label",value:"value"},d)},z=(0,v.createContext)(null);z.displayName="SubFormContext";var p=function(x){var m=(0,v.useContext)(z),F=x.value,I=F.value,d=F.collection,u=F.fieldSchema,l=F.parent,S=F.skip,H=(0,v.useMemo)(function(){return A().omitBy({value:I,collection:d,fieldSchema:u,skip:S,parent:l||(m!=null&&m.skip?m.parent:m)},A().isUndefined)},[I,d,u,S,l,m]);return(0,a.jsx)(z.Provider,{value:H,children:x.children})},b=function(){var x=(0,v.useContext)(z)||{},m=x.value,F=x.collection,I=x.fieldSchema,d=x.parent;return{formValue:m,collection:F,fieldSchema:I,parent:d}}},37696:function(He,ae,e){"use strict";e.d(ae,{Il:function(){return j},Mr:function(){return v},cN:function(){return n},cc:function(){return y},r$:function(){return a},sj:function(){return L}});var Z=e(19632),c=e.n(Z),k=e(97857),i=e.n(k),g=e(84327),C=e(84157),A=e(66309),r=e(67294),K=e(35746),v=function(){var E=(0,K.d9)();return function($,Q){if($){var z=E==null?void 0:E.getCollectionField("".concat($,".").concat(Q));return z==null?void 0:z.uiSchema}}},j=function(E,$){var Q=(0,K.d9)();if(E){var z=Q==null?void 0:Q.getCollectionField("".concat(E,".").concat($));return z==null?void 0:z.uiSchema}},h=function(E){var $=(0,C.getDefaultFormat)(E),Q=(0,C.str2moment)(E.value,E),z=Q&&Q.isValid()?Q.format($):E.value;return(0,g.isArr)(z)?z.join("~"):z},M=function(E){return E?Array.isArray(E)?E:[E]:[]},n=function(E,$){var Q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,z=E==null?void 0:E.enum;if(Array.isArray(z)&&$){var p=M($).map(function(b){var f=z.find(function(x){return x.value===b});return Q?r.createElement(A.Z,{color:f==null?void 0:f.color},f==null?void 0:f.label):f==null?void 0:f.label});return Q?p:p.join(", ")}switch(E==null?void 0:E["x-component"]){case"DatePicker":return h(i()(i()({},E==null?void 0:E["x-component-props"]),{},{value:$}));default:return $}},y=function(E,$,Q){var z=E==null?void 0:E.enum;if(Array.isArray(z)&&$){var p=M($).map(function(b){var f=z.find(function(x){return x.value===b});return r.createElement(A.Z,{color:Q||(f==null?void 0:f.color)},f==null?void 0:f.label)});return p}switch(E==null?void 0:E["x-component"]){case"DatePicker":return r.createElement(A.Z,{color:Q},h(i()(i()({},E==null?void 0:E["x-component-props"]),{},{value:$})));default:return r.createElement(A.Z,{color:Q},$)}};function L(R){for(var E=[],$=0;$<R.length;$++){var Q=R[$].children;Array.isArray(Q)&&E.push.apply(E,c()(L(Q))),E.push(i()({},R[$]))}return E}function o(R){return(R==null?void 0:R["x-component"])==="Preview"}function a(R){var E,$,Q=((E=R["x-component-props"])===null||E===void 0?void 0:E.mode)||(($=R.componentProps)===null||$===void 0?void 0:$.mode);return["Nester","SubTable","PopoverNester"].includes(Q)}},18243:function(He,ae,e){"use strict";e.d(ae,{P:function(){return y},s:function(){return n}});var Z=e(97857),c=e.n(Z),k=e(5574),i=e.n(k),g=e(13769),C=e.n(g),A=e(4393),r=e(67294),K=e(68230),v=e(71343),j=e(85893),h=["children"],M=["title","description"],n=(0,r.createContext)({}),y=r.forwardRef(function(L,o){var a=L.children,R=C()(L,h),E=(0,K.d)(),$=E.token,Q=R.title,z=R.description,p=C()(R,M),b=(0,r.useMemo)(function(){return{marginBottom:$.marginBlock,height:R.height||"100%"}},[$.marginBlock]),f=(0,r.useState)(0),x=i()(f,2),m=x[0],F=x[1],I=(0,r.useRef)(null);(0,r.useEffect)(function(){var u=setTimeout(function(){if(I.current){var l=z?I.current.parentElement.parentElement.parentElement.offsetHeight:$.fontSizeLG*$.lineHeightLG+$.padding*2-1;F(l)}else m&&F(0)},500);return function(){return clearTimeout(u)}},[Q,z]);var d=(Q||z)&&(0,j.jsxs)("div",{ref:I,style:{padding:"8px 0px 8px"},children:[(0,j.jsx)("span",{children:Q}),z&&(0,j.jsx)(v.y,{value:R.description,style:{overflowWrap:"break-word",whiteSpace:"normal",fontWeight:400,color:$.colorTextDescription,borderRadius:"4px"}})]});return(0,j.jsx)(n.Provider,{value:{titleHeight:m},children:(0,j.jsx)(A.Z,c()(c()({ref:o,bordered:!1,style:b},p),{},{title:d,children:a}))})});y.displayName="BlockItemCard"},33621:function(He,ae,e){"use strict";e.d(ae,{jY:function(){return R},Pu:function(){return $.P},sm:function(){return $.s},L3:function(){return E}});var Z=e(80844),c=e(93967),k=e.n(c),i=e(67294),g=e(4511),C=e(68091),A=e(15503),r=e(14896),K=e(84577),v=e(39594),j=e(9783),h=e.n(j),M=e(50204),n=(0,M.l)("nb-block-item",function(Q){var z=Q.componentCls;return h()({},z,{position:"relative","&:hover":{"> .general-schema-designer":{display:"block"}},"&.nb-form-item:hover":{"> .general-schema-designer":{background:"var(--colorBgSettingsHover) !important",border:"0 !important",top:"-5px !important",bottom:"-5px !important",left:"-5px !important",right:"-5px !important"}},"> .general-schema-designer":{position:"absolute",zIndex:999,top:0,bottom:0,left:0,right:0,display:"none",border:"2px solid var(--colorBorderSettingsHover)",pointerEvents:"none","> .general-schema-designer-icons":{position:"absolute",right:"2px",top:"2px",lineHeight:"16px",pointerEvents:"all",".ant-space-item":{backgroundColor:"var(--colorSettings)",color:"#fff",lineHeight:"16px",width:"16px",paddingLeft:"1px",alignSelf:"stretch"}}},".ant-card":{borderRadius:Q.borderRadiusBlock}})}),y=e(75148),L=e(6145),o=function(z){var p,b=(0,Z.useFieldSchema)(),f=(0,K.eJ)(),x=b["x-component"],m=typeof x=="string"?x:x==null?void 0:x.displayName,F=f(b["x-collection-field"]),I=(0,y.VG)()||{},d=I.name,u=(0,L.useCollection_deprecated)(),l=u.name,S=u.getField;d=z||d;var H=f(b.title)||f((p=S(b.name))===null||p===void 0||(p=p.uiSchema)===null||p===void 0?void 0:p.title),O=(0,i.useCallback)(function(N){return N=N?"-".concat(N):"",["block-item",m,l,d,F,H,N].filter(Boolean).join("-")},[m,l,d,F,H]);return{getAriaLabel:O}},a=e(85893),R=(0,A.t)(function(Q){var z=(0,K.wN)(Q),p=z.className,b=z.children,f=z.style,x=n(),m=x.componentCls,F=x.hashId,I=(0,Z.useFieldSchema)(),d=(0,C.du)(I),u=d.render,l=o(Q.name),S=l.getAriaLabel,H=(0,i.useMemo)(function(){return S()},[S]);return(0,a.jsxs)(r.SortableItem,{role:"button","aria-label":H,className:k()("nb-block-item",p,m,F),style:f,children:[u(),(0,a.jsx)(g.SV,{FallbackComponent:v.H,onError:console.log,children:b})]})},{displayName:"BlockItem"}),E=function(){var z=(0,K.ng)(),p=z.remove;return(0,a.jsxs)("div",{children:[(0,a.jsx)("a",{onClick:function(){p()},children:"\u5220\u9664"}),(0,a.jsx)(r.DragHandler,{})]})},$=e(18243)},68435:function(He,ae,e){"use strict";e.d(ae,{Mt:function(){return O},iN:function(){return l},P1:function(){return u}});var Z=e(97857),c=e.n(Z),k=e(15009),i=e.n(k),g=e(19632),C=e.n(g),A=e(99289),r=e.n(A),K=e(5574),v=e.n(K),j=e(80844),h=e(40684),M=e(42075),n=e(34041),y=e(27484),L=e.n(y),o=e(67294),a=e(84157),R=e(26793),E=e(65078),$=e(84327),Q=e(93967),z=e.n(Q),p=e(25145),b=e(85893),f=function(){return null};f.DatePicker=function(B){var X=B.value,V=B.picker,U=V===void 0?"date":V,D=(0,E.F)("description-date-picker",B);if(!X)return(0,b.jsx)("div",{});var ne=function(){var J=(0,a.getDefaultFormat)(B),Y=(0,a.str2moment)(X,B),P=L().isDayjs(Y)?Y.format(J):"";return(0,$.isArr)(P)?P.join("~"):P};return(0,b.jsx)("div",{className:z()(D,B.className),children:ne()})},f.DateRangePicker=function(B){var X=(0,E.F)("description-text",B),V=(0,a.getDefaultFormat)(B),U=function(){var ne=(0,a.str2moment)(B.value,B);if(!ne)return"";var q=ne.map(function(J){return J.format(V)});return(0,$.isArr)(q)?q.join("~"):q};return(0,b.jsx)("div",{className:z()(X,B.className),style:B.style,children:U()})},f.DatePicker=(0,p.u)(f.DatePicker);var x=e(61341),m=e(62954),F=e(64910),I=e(85667),d=o.createContext({utc:!0}),u=function(){return o.useContext(d)},l=d.Provider,S=(0,j.connect)(h.default,(0,j.mapProps)((0,x.LP)()),(0,j.mapReadPretty)(f.DatePicker)),H=(0,j.connect)(h.default.RangePicker,(0,j.mapProps)((0,x.fY)()),(0,j.mapReadPretty)(f.DateRangePicker)),O=function(B){var X=u(),V=X.utc,U=V===void 0?!0:V,D=Array.isArray(B.value)?B.value[0]:B.value,ne=(0,F.OQ)()||{},q=ne.parseVariable,J=(0,F.Kp)(),Y=(0,o.useState)(null),P=v()(Y,2),w=P[0],ie=P[1],G=(0,o.useState)(null),le=v()(G,2),xe=le[0],_e=le[1],Ee=(0,o.useRef)(null);(0,o.useEffect)(function(){return Ee.current&&Ee.current(),Ee.current=(0,I.autorun)(function(){ze()}),function(){Ee.current()}},[B._maxDate,B._minDate,J,q]);var ze=function(){var se=r()(i()().mark(function me(){var pe,ee,ue,ge,Ie,Ae,Le,Te,je;return i()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return pe=B._minDate?Promise.resolve(L()(B._minDate)):Promise.resolve(null),ee=B._maxDate?Promise.resolve(L()(B._maxDate)):Promise.resolve(null),(0,F.cG)(B._maxDate)&&(ee=q(B._maxDate,J).then(function(re){return L()(re.value)})),(0,F.cG)(B._minDate)&&(pe=q(B._minDate,J).then(function(re){return L()(re.value)})),fe.next=6,Promise.all([pe,ee]);case 6:ue=fe.sent,ge=v()(ue,2),Ie=ge[0],Ae=ge[1],Le=Array.from({length:60},function(re,T){return T}),Te=function(T){if(!L().isDayjs(T))return!1;var ce=L()(T),be=Ie?L()(Ie):null,oe=Ae?L()(Ae).endOf("day"):null;return be&&ce.isBefore(be,"minute")||oe&&ce.isAfter(oe,"minute")},je=function(T){if(!T||!Ie&&!Ae)return{disabledHours:function(){return[]},disabledMinutes:function(){return[]},disabledSeconds:function(){return[]}};var ce=L()(T),be=ce.isSame(Ie,"day"),oe=ce.isSame(Ae,"day"),Re=function(){var St=[];return be&&St.push.apply(St,C()(Array.from({length:Ie.hour()},function(Tt,lt){return lt}))),oe&&St.push.apply(St,C()(Array.from({length:24-Ae.hour()},function(Tt,lt){return lt+Ae.hour()+1}))),St},Ze=function(St){return be&&St===Ie.hour()?Le.filter(function(Tt){return Tt<Ie.minute()}):oe&&St===Ae.hour()?Le.filter(function(Tt){return Tt>Ae.minute()}):[]},We=function(St,Tt){return be&&St===Ie.hour()&&Tt===Ie.minute()?Le.filter(function(lt){return lt<Ie.second()}):oe&&St===Ae.hour()&&Tt===Ae.minute()?Le.filter(function(lt){return lt>Ae.second()}):[]};return{disabledHours:Re,disabledMinutes:Ze,disabledSeconds:We}},ie(function(){return Te}),_e(function(){return je});case 15:case"end":return fe.stop()}},me)}));return function(){return se.apply(this,arguments)}}();console.log(w);var Se=c()(c()({utc:U},B),{},{disabledDate:w,disabledTime:xe,showTime:B.showTime?{defaultValue:L()("00:00:00","HH:mm:ss")}:!1});return(0,b.jsx)(S,c()(c()({},Se),{},{value:D}))};O.ReadPretty=f.DatePicker,O.RangePicker=function(B){var X=B.value,V=B.picker,U=V===void 0?"date":V,D=B.format,ne=B.showTime,q=B.timeFormat,J=(0,R.$)(),Y=J.t,P=(0,j.useFieldSchema)(),w=(0,j.useField)(),ie=u(),G=ie.utc,le=G===void 0?!0:G,xe=(0,x.SE)(),_e=(0,m.eJW)(),Ee=!P["x-filter-operator"],ze=[{label:Y("Today"),value:xe.today},{label:Y("Last week"),value:xe.lastWeek},{label:Y("This week"),value:xe.thisWeek},{label:Y("Next week"),value:xe.nextWeek},{label:Y("Last month"),value:xe.lastMonth},{label:Y("This month"),value:xe.thisMonth},{label:Y("Next month"),value:xe.nextMonth},{label:Y("Last quarter"),value:xe.lastQuarter},{label:Y("This quarter"),value:xe.thisQuarter},{label:Y("Next quarter"),value:xe.nextQuarter},{label:Y("Last year"),value:xe.lastYear},{label:Y("This year"),value:xe.thisYear},{label:Y("Next year"),value:xe.nextYear},{label:Y("Last 7 days"),value:xe.last7Days},{label:Y("Next 7 days"),value:xe.next7Days},{label:Y("Last 30 days"),value:xe.last30Days},{label:Y("Next 30 days"),value:xe.next30Days},{label:Y("Last 90 days"),value:xe.last90Days},{label:Y("Next 90 days"),value:xe.next90Days}],Se=X?(0,x.CE)(X==null?void 0:X[0],U):U,se=(0,a.getPickerFormat)(Se)||D,me=c()(c()({utc:le,presets:ze},B),{},{format:(0,a.getDateTimeFormat)(Se,se,ne,q),picker:Se,showTime:ne?{defaultValue:[L()("00:00:00","HH:mm:ss"),L()("23:59:59","HH:mm:ss")]}:!1}),pe=(0,o.useState)(me),ee=v()(pe,2),ue=ee[0],ge=ee[1];return Ee?(0,b.jsxs)(M.Z.Compact,{children:[(0,b.jsx)(n.default,{role:"button","data-testid":"select-picker",style:{width:"100px"},popupMatchSelectWidth:!1,defaultValue:Se,options:_e([{label:'{{t("Date")}}',value:"date"},{label:'{{t("Month")}}',value:"month"},{label:'{{t("Quarter")}}',value:"quarter"},{label:'{{t("Year")}}',value:"year"}]),onChange:function(Ae){var Le=(0,a.getPickerFormat)(Ae),Te=(0,a.getDateTimeFormat)(Ae,Le,ne,q);w.setComponentProps({picker:Ae,format:Le}),me.picker=Ae,me.format=Te,ge(me),P["x-component-props"]=c()(c()({},B),{},{picker:Ae,format:Te}),w.value=void 0}}),(0,b.jsx)(H,c()(c()({},ue),{},{value:X}))]}):(0,b.jsx)(H,c()({},me))},O.FilterWithPicker=function(B){var X=B.picker,V=X===void 0?"date":X,U=B.format,D=B.showTime,ne=B.timeFormat,q=(0,x.tq)(),J=u(),Y=J.utc,P=Y===void 0?!0:Y,w=Array.isArray(B.value)?B.value[0]:B.value,ie=(0,m.eJW)(),G=(0,j.useFieldSchema)(),le=w?(0,x.CE)(w,V):V,xe=(0,a.getPickerFormat)(le)||U,_e=c()(c()({utc:P,inputReadOnly:q},B),{},{underFilter:!0,showTime:D?{defaultValue:L()("00:00:00","HH:mm:ss")}:!1,format:(0,a.getDateTimeFormat)(le,xe,D,ne),picker:le,onChange:function(ee){B.onChange(void 0),setTimeout(function(){B.onChange(ee)})}}),Ee=(0,j.useField)(),ze=(0,o.useState)(_e),Se=v()(ze,2),se=Se[0],me=Se[1];return(0,o.useEffect)(function(){_e.picker=le;var pe=(0,a.getDateTimeFormat)(le,U,D,ne);_e.format=pe,me(_e)},[le]),(0,b.jsxs)(M.Z.Compact,{style:{width:"100%"},children:[(0,b.jsx)(n.default,{role:"button","data-testid":"select-picker",style:{width:"100px"},popupMatchSelectWidth:!1,value:le,options:ie([{label:'{{t("Date")}}',value:"date"},{label:'{{t("Month")}}',value:"month"},{label:'{{t("Quarter")}}',value:"quarter"},{label:'{{t("Year")}}',value:"year"}]),onChange:function(ee){var ue=(0,a.getPickerFormat)(ee),ge=(0,a.getDateTimeFormat)(ee,ue,D,ne);Ee.setComponentProps({picker:ee,format:ue}),_e.picker=ee,_e.format=ge,me(_e),G["x-component-props"]=c()(c()({},B),{},{picker:ee,format:ge}),Ee.value=null}}),(0,b.jsx)(S,c()(c()({},se),{},{value:w}))]})};var N=null},61341:function(He,ae,e){"use strict";e.d(ae,{CE:function(){return $},LP:function(){return h},MD:function(){return j},SE:function(){return R},fY:function(){return n},tq:function(){return M},w_:function(){return K}});var Z=e(97857),c=e.n(Z),k=e(84157),i=e(27484),g=e.n(i),C=function Q(z){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"date",b=arguments.length>2?arguments[2]:void 0;if(!g().isDayjs(z))return z;if(b==="local"){var f=new Date().getTimezoneOffset();return g()(Q(z,p,"gmt")).add(f,"minutes").toISOString()}return p==="year"?z.format("YYYY")+"-01-01T00:00:00.000Z":p==="month"?z.format("YYYY-MM")+"-01T00:00:00.000Z":p==="quarter"?z.startOf("quarter").format("YYYY-MM")+"-01T00:00:00.000Z":p==="week"?z.startOf("week").add(1,"day").format("YYYY-MM-DD")+"T00:00:00.000Z":z.format("YYYY-MM-DDTHH:mm:ss.SSS")+"Z"},A=function(z,p){return!z||!g().isDayjs(z)?z:C(z,p,"gmt")},r=function(z,p){return!z||!g().isDayjs(z)?z:C(z,p,"local")},K=function(z){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=p.showTime,f=p.gmt,x=p.picker,m=x===void 0?"date":x,F=p.utc,I=F===void 0?!0:F;if(!z)return z;if(!I){var d=b?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD";return z.format(d)}return b?f?(0,k.toGmt)(z):(0,k.toLocal)(z):typeof f=="boolean"&&f?A(z,m):r(z,m)},v=function(z,p,b){var f=b?"YYYY-MM-DD HH:mm:ss":(0,k.getPickerFormat)(p);return z&&g()(z).format(f)},j=function(z,p,b,f,x,m){var F=g().tz.guess(),I=x?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD";if(!z)return z;if(p)return g()(z).startOf(f).format("YYYY-MM-DD");if(b){if(m)return(0,k.toGmt)(z);if(f!=="date")return g()(z).startOf(f).toISOString();var d=g()(z).format(I);return g()(d).tz(F,!0).toISOString()}return x?g()(z).format(I):g()(z).startOf(f).format(I)},h=function(){var z=M();return function(p){var b=p.dateOnly,f=p.showTime,x=p.picker,m=x===void 0?"date":x,F=p.utc,I=p.gmt,d=p.underFilter,u=(0,k.getDefaultFormat)(p),l=p.onChange;return c()(c()({},p),{},{inputReadOnly:z,format:u,value:(0,k.str2moment)(p.value,p),onChange:function(H,O){l&&l(d?v(H,m,f):j(H,b,F,m,f,I))}})}};function M(){return window.matchMedia("(max-width: 768px)").matches}var n=function(){var z=M();return function(p){var b=(0,k.getDefaultFormat)(p),f=p.onChange,x=p.dateOnly,m=p.showTime,F=p.picker,I=F===void 0?"date":F,d=p.utc,u=p.gmt,l=p.underFilter;return c()(c()({},p),{},{format:b,value:(0,k.str2moment)(p.value,p),inputReadOnly:z,onChange:function(H){f&&f(l?H?[v(H[0],I,m),v(H[1],I,m)]:[]:H?[K(y(H[0],p),p),K(L(H[1],p),p)]:[])}})}};function y(Q,z){var p=z.showTime;return p?Q:Q.startOf("day")}function L(Q,z){var p=z.showTime;return p?Q:Q.endOf("day")}var o=function(z,p){return g()().add(z,p==="isoWeek"?"week":p).startOf(p)},a=function(z,p){return g()().add(z,p==="isoWeek"?"week":p).endOf(p)},R=function(z){if(z!=null&&z.shouldBeString){var p=function(f){return Array.isArray(f)?f.map(function(x){return K(x,{utc:z==null?void 0:z.utc})}):K(f,{utc:z==null?void 0:z.utc})};return{now:function(){return p(g()())},today:function(f){return E(p([o(0,"day"),a(0,"day")]),f)},yesterday:function(f){return E(p([o(-1,"day"),a(-1,"day")]),f)},tomorrow:function(f){return E(p([o(1,"day"),a(1,"day")]),f)},thisWeek:function(f){return E(p([o(0,"isoWeek"),a(0,"isoWeek")]),f)},lastWeek:function(f){return E(p([o(-1,"isoWeek"),a(-1,"isoWeek")]),f)},nextWeek:function(f){return E(p([o(1,"isoWeek"),a(1,"isoWeek")]),f)},thisIsoWeek:function(f){return E(p([o(0,"isoWeek"),a(0,"isoWeek")]),f)},lastIsoWeek:function(f){return E(p([o(-1,"isoWeek"),a(-1,"isoWeek")]),f)},nextIsoWeek:function(f){return E(p([o(1,"isoWeek"),a(1,"isoWeek")]),f)},thisMonth:function(f){return E(p([o(0,"month"),a(0,"month")]),f)},lastMonth:function(f){return E(p([o(-1,"month"),a(-1,"month")]),f)},nextMonth:function(f){return E(p([o(1,"month"),a(1,"month")]),f)},thisQuarter:function(f){return E(p([o(0,"quarter"),a(0,"quarter")]),f)},lastQuarter:function(f){return E(p([o(-1,"quarter"),a(-1,"quarter")]),f)},nextQuarter:function(f){return E(p([o(1,"quarter"),a(1,"quarter")]),f)},thisYear:function(f){return E(p([o(0,"year"),a(0,"year")]),f)},lastYear:function(f){return E(p([o(-1,"year"),a(-1,"year")]),f)},nextYear:function(f){return E(p([o(1,"year"),a(1,"year")]),f)},last7Days:function(f){return E(p([o(-6,"days"),a(0,"days")]),f)},next7Days:function(f){return E(p([o(1,"day"),a(7,"days")]),f)},last30Days:function(f){return E(p([o(-29,"days"),a(0,"days")]),f)},next30Days:function(f){return E(p([o(1,"day"),a(30,"days")]),f)},last90Days:function(f){return E(p([o(-89,"days"),a(0,"days")]),f)},next90Days:function(f){return E(p([o(1,"day"),a(90,"days")]),f)}}}return{now:function(){return g()().toISOString()},today:function(f){return E([o(0,"day"),a(0,"day")],f)},yesterday:function(f){return E([o(-1,"day"),a(-1,"day")],f)},tomorrow:function(f){return E([o(1,"day"),a(1,"day")],f)},thisWeek:function(f){return E([o(0,"isoWeek"),a(0,"isoWeek")],f)},lastWeek:function(f){return E([o(-1,"isoWeek"),a(-1,"isoWeek")],f)},nextWeek:function(f){return E([o(1,"isoWeek"),a(1,"isoWeek")],f)},thisIsoWeek:function(f){return E([o(0,"isoWeek"),a(0,"isoWeek")],f)},lastIsoWeek:function(f){return E([o(-1,"isoWeek"),a(-1,"isoWeek")],f)},nextIsoWeek:function(f){return E([o(1,"isoWeek"),a(1,"isoWeek")],f)},thisMonth:function(f){return E([o(0,"month"),a(0,"month")],f)},lastMonth:function(f){return E([o(-1,"month"),a(-1,"month")],f)},nextMonth:function(f){return E([o(1,"month"),a(1,"month")],f)},thisQuarter:function(f){return E([o(0,"quarter"),a(0,"quarter")],f)},lastQuarter:function(f){return E([o(-1,"quarter"),a(-1,"quarter")],f)},nextQuarter:function(f){return E([o(1,"quarter"),a(1,"quarter")],f)},thisYear:function(f){return E([o(0,"year"),a(0,"year")],f)},lastYear:function(f){return E([o(-1,"year"),a(-1,"year")],f)},nextYear:function(f){return E([o(1,"year"),a(1,"year")],f)},last7Days:function(f){return E([o(-6,"days"),a(0,"days")],f)},next7Days:function(f){return E([o(1,"day"),a(7,"days")],f)},last30Days:function(f){return E([o(-29,"days"),a(0,"days")],f)},next30Days:function(f){return E([o(1,"day"),a(30,"days")],f)},last90Days:function(f){return E([o(-89,"days"),a(0,"days")],f)},next90Days:function(f){return E([o(1,"day"),a(90,"days")],f)}}};function E(Q,z){return z!=null&&z.isParsingVariable&&z!==null&&z!==void 0&&z.fieldOperator&&z.fieldOperator!=="$dateBetween"?Q[0]:Q}function $(Q,z){return/^\d{4}$/.test(Q)?"year":/^\d{4}-\d{2}$/.test(Q)?"month":/^\d{4}Q[1-4]$/.test(Q)?"quarter":/^\d{4}-\d{2}-\d{2}$/.test(Q)?"date":z||"date"}},39594:function(He,ae,e){"use strict";e.d(ae,{H:function(){return f},y:function(){return b}});var Z=e(15009),c=e.n(Z),k=e(97857),i=e.n(k),g=e(99289),C=e.n(g),A=e(5574),r=e.n(A),K=e(80844),v=e(48997),j=e(59720),h=e(67294),M=e(26793),n=e(38631),y=e(12174),L=e(68091),o=e(5914),a=e(85893),R=v.Z.Paragraph,E=v.Z.Text,$=function(m){var F=h.useState(!1),I=r()(F,2),d=I[0],u=I[1],l=(0,a.jsx)(R,{style:{display:"flex",marginBottom:0},copyable:{text:m.error.message},children:(0,a.jsxs)(E,{type:"danger",style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",display:"inline-block",maxWidth:"200px"},children:["Error: ",m.error.message]})});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{onMouseOver:function(){return u(!0)},children:m.children||l}),(0,a.jsx)(o.Z,{zIndex:1e4,open:d,footer:null,onCancel:function(){return u(!1)},width:"60%",children:(0,a.jsx)(f,i()({},m))})]})},Q=v.Z.Paragraph,z=v.Z.Text,p=v.Z.Link,b=function(m){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},I=(0,L.fj)(),d=h.useState(!1),u=r()(d,2),l=u[0],S=u[1],H=(0,y.LY)();return{loading:l,download:function(){var O=C()(c()().mark(function t(){var B,X,V;return c()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return S(!0),D.prev=1,D.next=4,H.request({url:"logger:collect",method:"post",responseType:"blob",data:i()({error:{message:m.message,stack:m.stack},location:I},F)});case 4:B=D.sent,X=window.URL.createObjectURL(new Blob([B.data],{type:"application/gzip"})),V=document.createElement("a"),V.setAttribute("href",X),V.setAttribute("download","logs.tar.gz"),V.click(),V.remove(),D.next=16;break;case 13:D.prev=13,D.t0=D.catch(1),console.log(D.t0);case 16:S(!1);case 17:case"end":return D.stop()}},t,null,[[1,13]])}));function N(){return O.apply(this,arguments)}return N}()}},f=function(m){var F=m.error,I=(0,K.useFieldSchema)(),d=(0,M.$)(),u=d.t,l=b(F,{schema:I}),S=l.loading,H=l.download,O=(0,a.jsxs)(n.c,{children:["This is likely a NocoBase internals bug. Please open an issue at ",(0,a.jsx)(p,{href:"https://github.com/nocobase/nocobase/issues",target:"_blank",children:"here"})]});return(0,a.jsx)("div",{style:{backgroundColor:"white"},children:(0,a.jsx)(j.ZP,{style:{maxWidth:"60vw",margin:"auto"},status:"error",title:u("Render Failed"),children:(0,a.jsx)(Q,{copyable:!0,children:(0,a.jsx)(z,{type:"danger",style:{whiteSpace:"pre-line",textAlign:"center"},children:F.stack})})})})};f.Modal=$},74327:function(He,ae,e){"use strict";e.d(ae,{D:function(){return Q},W:function(){return R}});var Z=e(5574),c=e.n(Z),k=e(68400),i=e.n(k),g=e(97133),C=e(27484),A=e.n(C),r=e(80844),K=e(36705),v=e(42075),j=e(55742),h=e(69677),M=e(67294),n=e(21143),y=e(85893),L,o=A()(),a=(0,g.css)(L||(L=i()([`
  width: 100%;
  & > .ant-space-item {
    flex: 1;
  }
`]))),R=function(p){var b=A()();return(0,y.jsxs)("div",{style:{display:"inline-flex"},children:[(0,y.jsx)("span",{children:p.format}),(0,y.jsx)(E,{content:b.format(p.format)})]})},E=function(p){var b=p.content,f=(0,n.useToken)(),x=f.token;return(0,y.jsx)("span",{style:{display:"inline-block",background:x.colorBgTextHover,marginLeft:x.marginMD,lineHeight:"1",padding:x.paddingXXS,borderRadius:x.borderRadiusOuter},children:b})},$=function(p){var b=p.onChange,f=p.defaultValue,x=p.formats,m=p.picker,F=(0,K.Z)(p.value&&!x.includes(p.value)),I=c()(F,2),d=I[0],u=I[1],l=u.setFalse,S=u.setTrue,H=(0,M.useState)(p.value&&!x.includes(p.value)?p.value:f),O=c()(H,2),N=O[0],t=O[1],B=(0,M.useState)(N?o.format(N):null),X=c()(B,2),V=X[0],U=X[1],D=function(q){q.target.value==="custom"?(S(),b(N)):(l(),b(q.target.value))};return(0,M.useEffect)(function(){x.includes(p.value)?l():S(),t(p.value&&!x.includes(p.value)?p.value:f)},[p.value]),(0,M.useEffect)(function(){U(N?o.format(N):null)},[N]),(0,y.jsx)(v.Z,{className:a,children:(0,y.jsx)(j.ZP.Group,{value:d?"custom":p.value,onChange:D,children:(0,y.jsx)(v.Z,{direction:"vertical",children:p.options.map(function(ne){if(ne.value==="custom")return(0,y.jsxs)(j.ZP,{value:ne.value,children:[(0,y.jsx)(h.Z,{style:{width:"150px"},value:N,onChange:function(J){J.target.value?U(o.format(J.target.value)):U(null),d&&b(J.target.value),t(J.target.value)}}),(0,y.jsx)(E,{content:V})]},ne.value);if(!m||m==="date")return(0,y.jsx)(j.ZP,{value:ne.value,"aria-label":ne.value,children:(0,y.jsx)("span",{role:"button","aria-label":ne.value,children:ne.label})},ne.value)})})})})},Q=(0,r.connect)($,(0,r.mapProps)({dataSource:"options"}))},77041:function(He,ae,e){"use strict";e.d(ae,{HN:function(){return n},hR:function(){return y}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(80844),C=e(67294),A=e(26793),r=e(62954),K=e(6145),v=e(90297),j=e(84577),h=e(85893),M=function(o){var a,R=(0,K.useCollectionManager_deprecated)(),E=R.getCollectionFields,$=R.getInterface,Q=E(o);return Q==null||(a=Q.filter)===null||a===void 0?void 0:a.call(Q,function(z){if(!z.interface)return!1;var p=$(z.interface);return!!(p!=null&&p.filterable)})},n=function(){var o,a=(0,g.useFieldSchema)(),R=(0,r.ngQ)(),E=R.dn,$=(0,K.useCollection_deprecated)(),Q=$.name,z=M(Q),p=(0,j.eJ)(),b=(0,A.$)(),f=b.t,x=(a==null||(o=a["x-component-props"])===null||o===void 0?void 0:o.nonfilterable)||[];return(0,h.jsx)(v.bw,{title:f("Filterable fields"),children:z.map(function(m){var F,I=!x.includes(m.name);return(0,h.jsx)(v.hj,{checked:I,title:p(m==null||(F=m.uiSchema)===null||F===void 0?void 0:F.title),onChange:function(u){var l,S;a["x-component-props"]=(a==null?void 0:a["x-component-props"])||{};var H=(a==null||(l=a["x-component-props"])===null||l===void 0?void 0:l.nonfilterable)||[];if(!u)H.push(m.name);else{var O=H.indexOf(m.name);H.splice(O,1)}a["x-component-props"].nonfilterable=H,E.emit("patch",{schema:(S={},c()(S,"x-uid",a["x-uid"]),c()(S,"x-component-props",i()({},a["x-component-props"])),S)}),E.refresh()}},m.name)})})},y=function(o){var a,R=(0,g.useField)(),E=(0,g.useFieldSchema)(),$=(0,r.ngQ)(),Q=$.dn,z=(0,A.$)(),p=z.t;return(0,h.jsxs)(v.aN,i()(i()({},o),{},{disableInitializer:!0,children:[(0,h.jsx)(n,{}),(0,h.jsx)(v.Z5,{}),(0,h.jsx)(v.B0,{title:p("Edit button"),schema:{type:"object",title:p("Edit button"),properties:{title:{"x-decorator":"FormItem","x-component":"Input",title:p("Button title"),default:E.title,"x-component-props":{}},icon:{"x-decorator":"FormItem","x-component":"IconPicker",title:p("Button icon"),default:E==null||(a=E["x-component-props"])===null||a===void 0?void 0:a.icon,"x-component-props":{}}}},onSubmit:function(f){var x,m=f.title,F=f.icon;E.title=m,R.title=m,R.componentProps.icon=F,E["x-component-props"]=E["x-component-props"]||{},E["x-component-props"].icon=F,Q.emit("patch",{schema:(x={},c()(x,"x-uid",E["x-uid"]),c()(x,"title",m),c()(x,"x-component-props",i()({},E["x-component-props"])),x)}),Q.refresh()}}),(0,h.jsx)(v.Z5,{}),(0,h.jsx)(v.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:function(f){return f["x-component"]==="Space"||f["x-component"]==="ActionBar"}})]}))}},13794:function(He,ae,e){"use strict";e.d(ae,{Iu:function(){return c},Xs:function(){return i},fo:function(){return k}});var Z=e(67294),c=(0,Z.createContext)(null);c.displayName="RemoveConditionContext";var k=(0,Z.createContext)(null);k.displayName="FilterContext";var i=(0,Z.createContext)(null);i.displayName="FilterLogicContext"},80564:function(He,ae,e){"use strict";e.d(ae,{wn:function(){return ue},Gz:function(){return l},tJ:function(){return d},fo:function(){return ie.fo},VT:function(){return le},Xs:function(){return ie.Xs},Iu:function(){return ie.Iu},Wm:function(){return ge.Wm},PL:function(){return ge.PL},V8:function(){return ge.V8},tM:function(){return ge.tM},xQ:function(){return ge.xQ},Kg:function(){return ge.Kg},aJ:function(){return ge.aJ}});var Z=e(97857),c=e.n(Z),k=e(80844),i=e(67294),g=e(12174),C=e(15503),A=e(9780),r=e(77041),K=e(15009),v=e.n(K),j=e(99289),h=e.n(j),M=e(68400),n=e.n(M),y=e(5574),L=e.n(y),o=e(97133),a=e(86201),R=e(84157),E=e(15867),$=e(42075),Q=e(26793),z=e(70993),p=e(84577),b=e(76157),f=e(68435),x=e(40454),m=e(85893),F,I,d=(0,i.createContext)(null);d.displayName="FilterActionContext";var u=i.memo(function(Ie){var Ae=(0,k.useField)(),Le=(0,i.useState)(!1),Te=L()(Le,2),je=Te[0],Pe=Te[1],fe=(0,p.ng)(),re=fe.designable,T=fe.dn,ce=(0,k.useFieldSchema)(),be=(0,i.useMemo)(function(){return Ie.form||(0,a.createForm)()},[]),oe=(0,A.w)(Ie),Re=oe.options,Ze=oe.onSubmit,We=oe.onReset,tt=oe.Container,St=tt===void 0?x.q:tt,Tt=oe.icon,lt=(0,i.useCallback)(function(hn){Pe(hn)},[]),ut=(0,i.useMemo)(function(){return{field:Ae,fieldSchema:ce,designable:re,dn:T}},[re,T,Ae,ce]),nt=(0,i.useCallback)(function(){return Pe(function(hn){return!hn})},[]),Je=(0,i.useMemo)(function(){return(0,m.jsx)(N,{form:be,options:Re,field:Ae,fieldSchema:ce,onReset:We,setVisible:Pe,onSubmit:Ze})},[Ae,ce,be,We,Ze,Re]);return(0,m.jsx)(d.Provider,{value:ut,children:(0,m.jsx)(St,{destroyTooltipOnHide:!0,placement:"bottomLeft",open:je,onOpenChange:lt,trigger:"click",content:Je,children:(0,m.jsx)("div",{children:(0,m.jsx)(b.aU,{onClick:nt,icon:Tt})})})})});u.displayName="InternalFilterAction";var l=(0,C.t)(function(Ie){return(0,m.jsx)(u,c()(c()({},Ie),{},{disabled:!!Ie.disabled}))});l.displayName="FilterAction";var S=function(){var Ae=(0,i.useContext)(d),Le=Ae.fieldSchema,Te=Ae.designable,je=Ae.dn,Pe=(0,k.useForm)(),fe=(0,Q.$)(),re=fe.t;return Te?(0,m.jsx)(E.ZP,{type:"dashed",className:(0,o.css)(F||(F=n()([`
        border-color: var(--colorSettings);
        color: var(--colorSettings);
      `]))),onClick:function(){var ce=c()({},Pe.values.filter);Le.default=ce,je.emit("patch",{schema:{"x-uid":Le["x-uid"],default:t(ce)}}),je.refresh()},children:re("Save conditions")}):null},H={utc:!1},O=(0,o.css)(I||(I=n()([`
  display: flex;
  justify-content: flex-end;
  width: 100%;
`]))),N=(0,k.observer)(function(Ie){var Ae=Ie.form,Le=Ie.options,Te=Ie.field,je=Ie.fieldSchema,Pe=Ie.onReset,fe=Ie.setVisible,re=Ie.onSubmit,T=(0,p.eJ)(),ce=(0,Q.$)(),be=ce.t,oe=(0,i.useMemo)(function(){return{type:"object",properties:{filter:{type:"string",enum:Le||Te.dataSource,default:je.default,"x-component":"Filter","x-component-props":{}}}}},[Te==null?void 0:Te.dataSource,je==null?void 0:je.default,Le]);return(0,m.jsx)("form",{children:(0,m.jsxs)(z.RV,{form:Ae,children:[(0,m.jsx)(f.iN,{value:H,children:(0,m.jsx)(z.n6,{schema:oe})}),(0,m.jsx)("div",{className:O,children:(0,m.jsxs)($.Z,{children:[(0,m.jsx)(S,{}),(0,m.jsx)(E.ZP,{onClick:h()(v()().mark(function Re(){return v()().wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.next=2,Ae.reset();case 2:Pe==null||Pe(Ae.values),Te.title=T(je.title)||be("Filter"),fe(!1);case 5:case"end":return We.stop()}},Re)})),children:be("Reset")}),(0,m.jsx)(E.ZP,{type:"primary",htmlType:"submit",onClick:function(Ze){Ze.preventDefault(),Ze.stopPropagation(),re==null||re(Ae.values),fe(!1)},children:be("Submit")})]})})]})})});N.displayName="FilterActionContent";function t(Ie){var Ae=(0,R.flatten)(Ie);return Object.keys(Ae).forEach(function(Le){Ae[Le]===void 0&&(Ae[Le]=null)}),(0,R.unflatten)(Ae)}var B=e(9783),X=e.n(B),V=e(19632),U=e.n(V),D=e(97309),ne=e(34041),q=e(38631),J=e(46917),Y=e(38089),P=e(62954),w=e(84327),ie=e(13794),G=function(Ae){var Le=(0,i.useContext)(ie.fo),Te=Le.dynamicComponent,je=Le.disabled,Pe=(0,p.Co)(Te),fe=(0,i.useMemo)(function(){return(0,a.createForm)({values:{value:Ae.value},disabled:je,effects:function(){(0,a.onFieldValueChange)("value",function(ce){var be;Ae==null||(be=Ae.onChange)===null||be===void 0||be.call(Ae,ce.value)})}})},[JSON.stringify(Ae.value),Ae.schema]),re=(0,i.useCallback)(function(){var T,ce=(0,w.merge)((Ae==null||(T=Ae.schema)===null||T===void 0?void 0:T["x-component-props"])||{},Ae.componentProps||{});return(0,m.jsx)(k.FieldContext.Provider,{value:null,children:(0,m.jsx)(z.n6,{schema:c()(c()({"x-component":"Input"},Ae.schema),{},{"x-component-props":(0,w.merge)(ce,{style:c()({minWidth:150},Ae.style),utc:!1,underFilter:!0}),name:"value","x-read-pretty":!1,"x-validator":void 0,"x-decorator":void 0,"x-disabled":je})})})},[Ae.schema,je]);return(0,m.jsx)(k.FormContext.Provider,{value:fe,children:Pe?i.createElement(Pe,{value:Ae.value,collectionField:Ae.collectionField,onChange:Ae==null?void 0:Ae.onChange,renderSchemaComponent:re}):re()})},le=G,xe=e(38632),_e,Ee,ze=(0,k.observer)(function(Ie){var Ae=(0,Q.$)(),Le=Ae.t,Te=(0,P.eJW)(),je=(0,i.useContext)(ie.Iu),Pe=(0,xe.s)(),fe=Pe.schema,re=Pe.fields,T=Pe.operators,ce=Pe.dataIndex,be=Pe.operator,oe=Pe.setDataIndex,Re=Pe.setOperator,Ze=Pe.value,We=Pe.setValue,tt=Pe.collectionField,St=(0,i.useMemo)(function(){return{marginBottom:8}},[]),Tt=(0,i.useMemo)(function(){return{label:"title",value:"name",children:"children"}},[]),lt=(0,i.useCallback)(function(Je){oe(Je)},[oe]),ut=(0,i.useCallback)(function(Je){Re(Je)},[Re]),nt=(0,i.useMemo)(function(){return{color:"#bfbfbf"}},[]);return(0,m.jsx)("div",{style:St,className:"nc-filter-item",children:(0,m.jsxs)($.Z,{wrap:!0,children:[(0,m.jsx)(Y.Z,{role:"button","data-testid":"select-filter-field",className:(0,o.css)(_e||(_e=n()([`
              width: 160px;
            `]))),fieldNames:Tt,changeOnSelect:!1,value:ce,options:Te(re),onChange:lt,placeholder:Le("Select field")}),(0,m.jsx)(ne.default,{role:"button","data-testid":"select-filter-operator",className:(0,o.css)(Ee||(Ee=n()([`
              min-width: 110px;
            `]))),popupMatchSelectWidth:!1,value:be==null?void 0:be.value,options:Te(T),onChange:ut,placeholder:Le("Comparision")}),be!=null&&be.noValue?null:(0,m.jsx)(G,{value:Ze,schema:fe,collectionField:tt,onChange:We}),!Ie.disabled&&(0,m.jsx)("a",{role:"button","aria-label":"icon-close",children:(0,m.jsx)(D.Z,{onClick:je,style:nt})})]})})},{displayName:"FilterItem"}),Se=(0,k.observer)(function(Ie){var Ae,Le=(0,k.useField)();return(0,m.jsx)("div",{children:Le==null||(Ae=Le.value)===null||Ae===void 0?void 0:Ae.filter(Boolean).map(function(Te,je){return(0,m.jsx)(ie.Iu.Provider,{value:function(){return Le.remove(je)},children:(0,m.jsx)(k.ObjectField,{name:je,component:[Te.$and||Te.$or?se:ze]})},je)})})},{displayName:"FilterItems"}),se=(0,k.connect)(function(Ie){var Ae=Ie.bordered,Le=Ae===void 0?!0:Ae,Te=Ie.disabled,je=(0,k.useField)(),Pe=(0,i.useContext)(ie.Iu),fe=(0,Q.$)(),re=fe.t,T=(0,J.dQ)(),ce=T.token,be=Object.keys(je.value||{}),oe=be.includes("$or")?"$or":"$and",Re=function(tt){var St=je.value||{};je.value=X()({},tt,U()(St[oe]||[]))},Ze=Te||je.disabled;return(0,m.jsx)(ie.Xs.Provider,{value:oe,children:(0,m.jsxs)("div",{style:Le?{position:"relative",border:"1px dashed ".concat(ce.colorBorder),padding:ce.paddingSM,marginBottom:ce.marginXS}:{position:"relative",marginBottom:ce.marginXS},children:[Pe&&!Ze&&(0,m.jsx)("a",{role:"button","aria-label":"icon-close",children:(0,m.jsx)(D.Z,{style:{position:"absolute",right:10,top:10,color:"#bfbfbf"},onClick:function(){return Pe()}})}),(0,m.jsx)("div",{style:{marginBottom:8,color:ce.colorText},children:(0,m.jsxs)(q.c,{children:["Meet ",(0,m.jsxs)(ne.default,{role:"button","data-testid":"filter-select-all-or-any",style:{width:"auto"},value:oe,onChange:function(tt){Re(tt)},children:[(0,m.jsx)(ne.default.Option,{value:"$and",children:"All"}),(0,m.jsx)(ne.default.Option,{value:"$or",children:"Any"})]})," conditions in the group"]})}),(0,m.jsx)("div",{children:(0,m.jsx)(k.ArrayField,{name:oe,component:[Se],disabled:Ze})}),!Ze&&(0,m.jsxs)($.Z,{size:16,style:{marginTop:8,marginBottom:8},children:[(0,m.jsx)("a",{onClick:function(){var tt=je.value||{},St=tt[oe]||[];St.push({}),je.value=X()({},oe,St),je.initialValue=X()({},oe,St)},children:re("Add condition")}),(0,m.jsx)("a",{onClick:function(){var tt=je.value||{},St=tt[oe]||[];St.push({$and:[{}]}),je.value=X()({},oe,St)},children:re("Add condition group")})]})]})})}),me,pe=function(Ae){var Le=(0,Q.$)(),Te=Le.t,je=(0,p.ng)(),Pe=je.designable,fe=je.dn,re=je.refresh,T=(0,k.useFieldSchema)(),ce=(0,k.useForm)();return Pe?(0,m.jsx)(E.ZP,{className:(0,o.css)(me||(me=n()([`
        border-color: var(--colorSettings);
        color: var(--colorSettings);
      `]))),type:"dashed",onClick:function(){var oe,Re=T==null||(oe=T.parent)===null||oe===void 0||(oe=oe.parent)===null||oe===void 0||(oe=oe.parent)===null||oe===void 0||(oe=oe.properties)===null||oe===void 0?void 0:oe.filter;if(Re){var Ze=ce.values.filter;fe.emit("patch",{schema:{"x-uid":Re["x-uid"],default:Ze}}),fe.refresh(),Re.default=Ze,console.log("filterSchema",Ze)}},children:Te("Save conditions")}):null},ee=function(Ae){var Le=(0,k.useField)();return(0,g.QT)(function(){return Promise.resolve({data:Le.dataSource})},Ae)},ue=(0,C.t)((0,k.observer)(function(Ie){var Ae=Ie.useDataSource,Le=Ae===void 0?ee:Ae,Te=(0,A.w)(Ie),je=Te.options,Pe=Te.dynamicComponent,fe=Te.className,re=Te.collectionName,T=(0,k.useField)(),ce=(0,k.useFieldSchema)();return Le({onSuccess:function(oe){T.dataSource=(oe==null?void 0:oe.data)||[]}}),(0,i.useEffect)(function(){ce.defaultValue&&(T.initialValue=ce.defaultValue)},[ce.defaultValue]),(0,m.jsx)("div",{className:fe,children:(0,m.jsx)(ie.fo.Provider,{value:{field:T,fieldSchema:ce,dynamicComponent:Pe,options:je||T.dataSource||[],disabled:Ie.disabled,collectionName:re},children:(0,m.jsx)(se,c()(c()({},Ie),{},{bordered:!1}))})})}),{displayName:"Filter"});ue.SaveDefaultValue=pe,ue.Action=l,ue.Action.Designer=r.hR;var ge=e(89127)},89127:function(He,ae,e){"use strict";e.d(ae,{Kg:function(){return Q},PL:function(){return m},V8:function(){return b},Wm:function(){return x},aJ:function(){return E},tM:function(){return F},xQ:function(){return $}});var Z=e(97857),c=e.n(Z),k=e(19632),i=e.n(k),g=e(80844),C=e(34444),A=e.n(C),r=e(96486),K=e.n(r),v=e(67294),j=e(26793),h=e(62954),M=e(35746),n=e(58837),y=e(87180),L=e(39742),o=e(13511),a=e(87714),R=e(4277),E=function(){var d=(0,o.fp)(),u=Q();return function(l,S,H){var O,N=d==null||(O=d.getDataSource(S))===null||O===void 0?void 0:O.collectionManager,t=N==null?void 0:N.getCollectionFields(l),B=u(t,H);return B}},$=function(d){var u=(0,M.d9)(),l=u==null?void 0:u.getCollectionFields(d),S=b(l);return S},Q=function(){var d,u=(0,g.useFieldSchema)(),l=(u==null||(d=u["x-component-props"])===null||d===void 0?void 0:d.nonfilterable)||[],S=(0,M.d9)(),H=(0,o.fp)(),O=function(B,X,V){var U,D;if(!(l.length&&X===1&&l.includes(B.name))&&B.interface){var ne=H==null?void 0:H.collectionFieldInterfaceManager.getFieldInterface(B.interface);if(!(!(ne!=null&&ne.filterable)&&!V)){var q=(ne==null?void 0:ne.filterable)||{},J=q.nested,Y=q.children,P=q.operators,w={name:B.name,type:B.type,target:B.target,title:(B==null||(U=B.uiSchema)===null||U===void 0?void 0:U.title)||B.name,schema:B==null?void 0:B.uiSchema,interface:B.interface,operators:(P==null||(D=P.filter)===null||D===void 0?void 0:D.call(P,function(xe){return!(xe!=null&&xe.visible)||xe.visible(B)}))||[]};if(!(B.target&&X>2)){if(X>2)return w;if(Y!=null&&Y.length&&(w.children=Y),J){var ie,G=S==null?void 0:S.getCollectionFields(B.target),le=N(G,X+1).filter(Boolean);w.children=w.children||[],(ie=w.children).push.apply(ie,i()(le))}return w}}}},N=function(B,X,V){var U=[];return B.forEach(function(D){var ne=O(D,X,V);ne&&U.push(ne)}),U};return function(t,B){return N(t,1,B)}},z=function(d,u,l,S,H){var O,N;if(!(l.length&&u===1&&l.includes(d.name))&&d.interface&&d.filterable!==!1){var t=S==null?void 0:S.collectionFieldInterfaceManager.getFieldInterface(d.interface);if(t!=null&&t.filterable){var B=t.filterable,X=B.nested,V=B.children,U=B.operators,D={name:d.name,type:d.type,target:d.target,title:(d==null||(O=d.uiSchema)===null||O===void 0?void 0:O.title)||d.name,schema:d==null?void 0:d.uiSchema,operators:(U==null||(N=U.filter)===null||N===void 0?void 0:N.call(U,function(Y){return!(Y!=null&&Y.visible)||Y.visible(d)}))||[]};if(!(d.target&&u>2)){if(u>2)return D;if(V!=null&&V.length&&(D.children=V),X){var ne,q=H==null?void 0:H.getCollectionFields(d.target),J=p(q,u+1,l,S,H).filter(Boolean);D.children=D.children||[],(ne=D.children).push.apply(ne,i()(J))}return D}}}},p=function(d,u,l,S,H){var O=[];return d.forEach(function(N){var t=z(N,u,l,S,H);t&&O.push(t)}),O},b=function(d){var u,l=(0,g.useFieldSchema)(),S=(l==null||(u=l["x-component-props"])===null||u===void 0?void 0:u.nonfilterable)||[],H=(0,M.d9)(),O=(0,o.fp)();return p(d,1,S,O,H)},f=function(d){return Array.isArray(d)&&d.length===0||d&&Object.keys(d).length===0&&Object.getPrototypeOf(d)===Object.prototype},x=function(d){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A(),l=u(d||{}),S={};for(var H in l){var O=l[H];O!=null&&!f(O)&&(S[H]=O)}return u.unflatten(S)},m=function(){var d=(0,n.Kx)(),u=$(d==null?void 0:d.name),l=(0,y.zh)();return F({options:u,params:l==null?void 0:l.params})},F=function(d){var u=d.options,l=d.service,S=d.params,H=(0,L.Pt)(),O=H.getDataBlockRequest,N=(0,j.$)(),t=N.t,B=(0,g.useField)(),X=(0,R.tU)(),V=(0,g.useFieldSchema)(),U=(0,h.eJW)(),D=(0,v.useCallback)(function(q){var J,Y,P,w=l||O(),ie=S||((J=w.state)===null||J===void 0||(J=J.params)===null||J===void 0?void 0:J[0])||w.params,G=ie.filter,le=x(q==null?void 0:q.filter);if(X==="manual"&&K().isEmpty(le))return w==null?void 0:w.mutate(void 0);var xe=(w==null||(Y=w.params)===null||Y===void 0||(Y=Y[1])===null||Y===void 0?void 0:Y.filters)||{};xe.filterAction=le,w==null||w.run(c()(c()({},w==null||(P=w.params)===null||P===void 0?void 0:P[0]),{},{page:1,filter:(0,a.EO)([].concat(i()(Object.values(xe)),[G]))}),{filters:xe});var _e=(le==null?void 0:le.$and)||(le==null?void 0:le.$or);_e!=null&&_e.length?B.title=t("{{count}} filter items",{count:(_e==null?void 0:_e.length)||0}):B.title=U(V.title)||t("Filter")},[X,B,O,S,l,t,V.title]),ne=(0,v.useCallback)(function(){var q,J,Y,P=l||O(),w=S||((q=P.state)===null||q===void 0||(q=q.params)===null||q===void 0?void 0:q[0])||P.params,ie=w.filter,G=(P==null||(J=P.params)===null||J===void 0||(J=J[1])===null||J===void 0?void 0:J.filters)||{};delete G.filterAction;var le=[c()(c()({},P==null||(Y=P.params)===null||Y===void 0?void 0:Y[0]),{},{filter:(0,a.EO)([].concat(i()(Object.values(G)),[ie])),page:1}),{filters:G}];if(B.title=U(V.title)||t("Filter"),X==="manual")return P.params=le,P==null?void 0:P.mutate(void 0);P==null||P.run.apply(P,le)},[X,B,O,S,l,t,V.title]);return{options:u,onSubmit:D,onReset:ne}}},38632:function(He,ae,e){"use strict";e.d(ae,{s:function(){return R}});var Z=e(97857),c=e.n(Z),k=e(9783),i=e.n(k),g=e(5574),C=e.n(g),A=e(80844),r=e(84327),K=e(34444),v=e.n(K),j=e(50361),h=e.n(j),M=e(27361),n=e.n(M),y=e(67294),L=e(6145),o=e(13794),a=function(){var $,Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],z=arguments.length>1?arguments[1]:void 0,p=z,b;return Q==null||($=Q.forEach)===null||$===void 0||$.call(Q,function(f){var x=p.find(function(m){return m.name===f});x&&(b=x),p=(x==null?void 0:x.children)||[]}),b},R=function(){var $=(0,L.useCollection_deprecated)(),Q=$.name,z=(0,L.useCollectionManager_deprecated)(),p=z.getCollectionJoinField,b=(0,A.useField)(),f=(0,y.useContext)(o.fo)||{},x=f.options,m=f.collectionName,F=f.field,I=v()(b.value||{}),d=Object.keys(I).shift()||"",u=(0,y.useMemo)(function(){var t=d.split(".$"),B=C()(t,1),X=B[0],V=X===void 0?"":X;return p("".concat(m||Q,".").concat(V))},[Q,d]),l=(0,y.useCallback)(function(){var t,B,X;b.value=v().unflatten(i()({},"".concat((t=b.data.dataIndex)===null||t===void 0?void 0:t.join("."),".").concat((B=b.data)===null||B===void 0||(B=B.operator)===null||B===void 0?void 0:B.value),(X=b.data)===null||X===void 0?void 0:X.value))},[b]),S=function(){var B;if(b.data=b.data||{},!(!d||!x)){var X=d.split(".$"),V=C()(X,2),U=V[0],D=U===void 0?"":U,ne=V[1],q=ne===void 0?"":ne,J=q.split(".",2),Y=C()(J,1),P=Y[0],w=D.split("."),ie=a(w,x),G=ie==null?void 0:ie.operators,le=G==null||(B=G.find)===null||B===void 0?void 0:B.call(G,function(Ee){return Ee.value==="$".concat(P)});if(b.data.dataIndex=w,(w==null?void 0:w.length)>1){var xe=w.concat();xe.pop();var _e=p("".concat(Q,".").concat(xe.join(".")));F.collectionName=_e==null?void 0:_e.target}else F.collectionName=null;b.data.operators=G,b.data.operator=le,b.data.schema=(0,r.merge)(ie==null?void 0:ie.schema,le==null?void 0:le.schema),b.data.value=n()((0,K.unflatten)(b.value),"".concat(D,".$").concat(P))}};(0,y.useEffect)(S,[b.path]);var H=(0,y.useCallback)(function(t){var B,X=a(t,x),V=X==null||(B=X.operators)===null||B===void 0?void 0:B[0];b.data=b.data||{},b.data.operators=X==null?void 0:X.operators,b.data.operator=V;var U=h()(X==null?void 0:X.schema),D=h()(V==null?void 0:V.schema);if(b.data.schema=(0,r.merge)(U,D),b.data.dataIndex=t,(t==null?void 0:t.length)>1){var ne=t.concat();ne.pop();var q=p("".concat(Q,".").concat(ne.join(".")));F.collectionName=q==null?void 0:q.target}else F.collectionName=null;b.data.value=V!=null&&V.noValue?V.default||!0:void 0,l()},[l,b,x]),O=(0,y.useCallback)(function(t){var B,X,V=(B=b.data)===null||B===void 0||(B=B.operators)===null||B===void 0||(X=B.find)===null||X===void 0?void 0:X.call(B,function(q){return q.value===t});b.data.operator=V;var U=a(b.data.dataIndex,x),D=h()(U==null?void 0:U.schema),ne=h()(V==null?void 0:V.schema);b.data.schema=(0,r.merge)(D,ne),b.data.value=V.noValue?V.default||!0:void 0,l()},[l,b.data,x]),N=(0,y.useCallback)(function(t){b.data.value=t,l()},[l,b.data]);return c()(c()({fields:x},(b==null?void 0:b.data)||{}),{},{collectionField:u,setDataIndex:H,setOperator:O,setValue:N})}},36800:function(He,ae,e){"use strict";e.d(ae,{D:function(){return $}});var Z=e(5574),c=e.n(Z),k=e(15009),i=e.n(k),g=e(99289),C=e.n(g),A=e(97857),r=e.n(A),K=e(86201),v=e(80844),j=e(85667),h=e(84327),M=e(5914),n=e(67294),y=e(73935),L=e(69962),o=e(46917),a=e(85893),R=function(b){return(0,h.isNum)(b)||(0,h.isStr)(b)||(0,h.isBool)(b)||n.isValidElement(b)},E=function(b){return R(b)?{title:b}:b};function $(p,b,f,x){((0,h.isFn)(b)||n.isValidElement(b))&&(x=f,f=b,b="form-dialog");var m={host:document.createElement("div"),form:null,promise:null,openMiddlewares:[],confirmMiddlewares:[],cancelMiddlewares:[]},F=(0,o.CT)(m.host,b),I=E(p),d=r()(r()({},I),{},{afterClose:function(){var O;I==null||(O=I.afterClose)===null||O===void 0||O.call(I),F.unmount()}}),u=(0,v.observer)(function(){return(0,a.jsx)(n.Fragment,{children:(0,h.isFn)(f)?f(m.form):f})},{displayName:"DialogContent"}),l=function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,N=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,B=m.form;return B?(0,a.jsx)(L.YO,{theme:x,children:(0,a.jsx)(v.Observer,{children:function(){var V=(0,o.dQ)(),U=V.token;return(0,a.jsx)(M.Z,r()(r()({zIndex:U.zIndexPopupBase+1e3},d),{},{open:O,confirmLoading:B.submitting,onCancel:function(ne){var q;(d==null||(q=d.onCancel)===null||q===void 0?void 0:q.call(d,ne))!==!1&&(t==null||t())},onOk:function(){var D=C()(i()().mark(function ne(q){var J;return i()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:(d==null||(J=d.onOk)===null||J===void 0?void 0:J.call(d,q))!==!1&&(N==null||N());case 1:case"end":return P.stop()}},ne)}));return function(ne){return D.apply(this,arguments)}}(),children:(0,a.jsx)(v.FormProvider,{form:B,children:(0,a.jsx)(u,{})})}))}})}):null};document.body.appendChild(m.host);var S={forOpen:function(O){return(0,h.isFn)(O)&&m.openMiddlewares.push(O),S},forConfirm:function(O){return(0,h.isFn)(O)&&m.confirmMiddlewares.push(O),S},forCancel:function(O){return(0,h.isFn)(O)&&m.cancelMiddlewares.push(O),S},open:function(){var H=C()(i()().mark(function N(t){return i()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(!m.promise){X.next=2;break}return X.abrupt("return",m.promise);case 2:return m.promise=new Promise(function(){var V=C()(i()().mark(function U(D,ne){return i()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.prev=0,J.next=3,(0,o.V_)(d.loadingText,function(){return(0,h.applyMiddleware)(t,m.openMiddlewares)});case 3:t=J.sent,m.form=m.form||(0,K.createForm)(t),J.next=10;break;case 7:J.prev=7,J.t0=J.catch(0),ne(J.t0);case 10:F.render(function(){return l(!0,function(){var Y;(Y=m.form)===null||Y===void 0||Y.submit(C()(i()().mark(function P(){return i()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return ie.next=2,(0,h.applyMiddleware)(m.form,m.confirmMiddlewares);case 2:(0,j.untracked)(function(){var G;D(r()({},(G=m.form)===null||G===void 0?void 0:G.values))}),S.close();case 4:case"end":return ie.stop()}},P)}))).catch(function(){})},C()(i()().mark(function Y(){return i()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,o.V_)(d.loadingText,function(){return(0,h.applyMiddleware)(m.form,m.cancelMiddlewares)});case 2:S.close();case 3:case"end":return w.stop()}},Y)})))});case 11:case"end":return J.stop()}},U,null,[[0,7]])}));return function(U,D){return V.apply(this,arguments)}}()),X.abrupt("return",m.promise);case 4:case"end":return X.stop()}},N)}));function O(N){return H.apply(this,arguments)}return O}(),close:function(){m.host&&F.render(function(){return l(!1)})}};return S}var Q=function(b){var f=(0,n.useRef)(null),x=(0,n.useState)(),m=c()(x,2),F=m[0],I=m[1],d=(0,n.useRef)(),u=(0,o.F8)("modal");return(0,n.useLayoutEffect)(function(){var l,S=(l=f.current)===null||l===void 0?void 0:l.closest(".".concat(u,"-content"));S&&(d.current||(d.current=S.querySelector(".".concat(u,"-footer")),d.current||(d.current=document.createElement("div"),d.current.classList.add("".concat(u,"-footer")),S.appendChild(d.current))),I(d.current))},[u]),d.current=F,(0,a.jsx)("div",{ref:f,style:{display:"none"},children:F&&(0,y.createPortal)(b.children,F)})};$.Footer=Q,$.Portal=(0,o.N4)("form-dialog");var z=null},38752:function(He,ae,e){"use strict";e.d(ae,{iT:function(){return D},Of:function(){return ne},b:function(){return le},l1:function(){return q},w5:function(){return ie},p3:function(){return P},G5:function(){return G},xj:function(){return Y},rx:function(){return xe},eT:function(){return ze},q4:function(){return _e}});var Z=e(96695),c=e.n(Z),k=e(97857),i=e.n(k),g=e(19632),C=e.n(g),A=e(9783),r=e.n(A),K=e(5552),v=e(80844),j=e(96486),h=e.n(j),M=e(67294),n=e(26793),y=e(5537),L=e(7340),o=e(6145),a=e(94804),R=e(53285),E=e(39270),$=e(36586),Q=e(81230),z=e(62954),p=e(78542),b=e(90297),f=e(85893),x=[{name:"editFieldTitle",type:"modal",useComponentProps:function(){var se,me=(0,n.$)(),pe=me.t,ee=(0,z.ngQ)(),ue=ee.dn,ge=(0,z.eJW)(),Ie=(0,v.useField)(),Ae=(0,v.useFieldSchema)(),Le=(0,o.useCollectionManager_deprecated)(),Te=Le.getCollectionJoinField,je=(0,o.useCollection_deprecated)(),Pe=je.getField,fe=Pe(Ae.name)||Te(Ae["x-collection-field"]);return{title:pe("Edit field title"),schema:{type:"object",title:pe("Edit field title"),properties:{title:{title:pe("Field title"),default:Ie==null?void 0:Ie.title,description:"".concat(pe("Original field title: ")).concat(fe==null||(se=fe.uiSchema)===null||se===void 0?void 0:se.title),"x-decorator":"FormItem","x-component":"Input","x-component-props":{}}}},onSubmit:function(T){var ce,be=T.title,oe=be.trim()===""?fe==null||(ce=fe.uiSchema)===null||ce===void 0?void 0:ce.title:be;Ie.title=ge(oe),Ae.title=be,ue.emit("patch",{schema:{"x-uid":Ae["x-uid"],title:Ae.title}}),ue.refresh()}}},useVisible:function(){var se=(0,v.useFieldSchema)(),me=(0,o.useCollectionManager_deprecated)(),pe=me.getCollectionJoinField,ee=(0,o.useCollection_deprecated)(),ue=ee.getField,ge=ue(se.name)||pe(se["x-collection-field"]);return!!ge}},{name:"displayTitle",type:"switch",useComponentProps:function(){var se,me,pe=(0,n.$)(),ee=pe.t,ue=(0,z.ngQ)(),ge=ue.dn,Ie=(0,v.useField)(),Ae=(0,v.useFieldSchema)();return{title:ee("Display title"),checked:(se=(me=Ae["x-decorator-props"])===null||me===void 0?void 0:me.showTitle)!==null&&se!==void 0?se:!0,onChange:function(Te){Ae["x-decorator-props"]=Ae["x-decorator-props"]||{},Ae["x-decorator-props"].showTitle=Te,Ie.decoratorProps.showTitle=Te,ge.emit("patch",{schema:{"x-uid":Ae["x-uid"],"x-decorator-props":i()(i()({},Ae["x-decorator-props"]),{},{showTitle:Te})}}),ge.refresh()}}}},{name:"editDescription",type:"modal",useComponentProps:function(){var se=(0,n.$)(),me=se.t,pe=(0,z.ngQ)(),ee=pe.dn,ue=(0,v.useField)(),ge=(0,v.useFieldSchema)();return{title:me("Edit description"),schema:{type:"object",title:me("Edit description"),properties:{description:{default:ue==null?void 0:ue.description,"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}},onSubmit:function(Ae){var Le=Ae.description;ue.description=Le,ge.description=Le,ee.emit("patch",{schema:{"x-uid":ge["x-uid"],description:ge.description}}),ee.refresh()}}},useVisible:function(){var se=(0,v.useField)();return!se.readPretty}},{name:"editTooltip",type:"modal",useComponentProps:function(){var se,me=(0,n.$)(),pe=me.t,ee=(0,z.ngQ)(),ue=ee.dn,ge=(0,v.useField)(),Ie=(0,v.useFieldSchema)();return{title:pe("Edit tooltip"),schema:{type:"object",title:pe("Edit tooltip"),properties:{tooltip:{default:Ie==null||(se=Ie["x-decorator-props"])===null||se===void 0?void 0:se.tooltip,"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}},onSubmit:function(Le){var Te=Le.tooltip;ge.decoratorProps.tooltip=Te,Ie["x-decorator-props"]=Ie["x-decorator-props"]||{},Ie["x-decorator-props"].tooltip=Te,ue.emit("patch",{schema:{"x-uid":Ie["x-uid"],"x-decorator-props":Ie["x-decorator-props"]}}),ue.refresh()}}},useVisible:function(){var se=(0,v.useField)();return se.readPretty}},{name:"required",type:"switch",useComponentProps:function(){var se=(0,n.$)(),me=se.t,pe=(0,v.useField)(),ee=(0,v.useFieldSchema)(),ue=(0,z.ngQ)(),ge=ue.dn,Ie=ue.refresh;return{title:me("Required"),checked:ee.required,onChange:function(Le){var Te=r()({},"x-uid",ee["x-uid"]);pe.required=Le,ee.required=Le,Te.required=Le,ge.emit("patch",{schema:Te}),Ie()}}},useVisible:function(){var se=(0,v.useField)(),me=(0,v.useFieldSchema)(),pe=(0,p.Po)(),ee=pe.required,ue=ee===void 0?!0:ee;return!se.readPretty&&me["x-component"]!=="FormField"&&ue}},{name:"style",Component:function(se){var me=i()(i()({},se),{},{category:"style"});return(0,f.jsx)(b.lc,i()({},me))},useVisible:function(){var se=(0,z.p3Q)();return se},useComponentProps:function(){var se=(0,a.Kx)(),me=se.name,pe=(0,p.Po)(),ee=pe.linkageRulesProps;return i()(i()({},ee),{},{collectionName:me})}}],m=e(22229),F=e(4595),I=e(43319),d=e(89018),u=e(21774),l=e(93329),S=e(22691),H=e(29124),O=e(94920),N=e(88773),t=e(64910),B=e(84577),X=e(37696),V=e(80564),U=e(30970),D={name:"allowAddNew",type:"switch",useVisible:function(){var se=(0,R.P5)(),me=P(),pe=ie(),ee=le();return!(se!=null&&se.isInSubTable)&&!me&&pe&&["Picker"].includes(ee)},useComponentProps:function(){var se=(0,E.B)(),me=se.defaultOpenMode,pe=(0,n.$)(),ee=pe.t,ue=(0,v.useField)(),ge=(0,v.useFieldSchema)(),Ie=(0,B.ng)(),Ae=Ie.dn,Le=Ie.refresh,Te=Ie.insertAdjacent;return{title:ee("Allow add new data"),checked:ge["x-add-new"],onChange:function(Pe){var fe=ge.reduceProperties(function(ce,be){return be["x-component"]==="Action"?be:ce},null);if(!fe){var re={"x-action":"create","x-acl-action":"create",title:"{{t('Add new')}}","x-toolbar":"ActionSchemaToolbar","x-toolbar-props":{draggable:!1},"x-settings":"actionSettings:addNew","x-component":"Action","x-decorator":"ACLActionProvider","x-component-props":{openMode:me,type:"default",component:"CreateRecordAction"}};Te("afterBegin",re)}var T=r()({},"x-uid",ge["x-uid"]);ue["x-add-new"]=Pe,ge["x-add-new"]=Pe,T["x-add-new"]=Pe,Ae.emit("patch",{schema:T}),Le()}}}},ne=new y.F5({name:"FormItemSettings",items:[].concat(C()(x),[{name:"allowAddNewData",type:"switch",useVisible:function(){var se=P(),me=ie(),pe=le();return!se&&me&&["SubTable"].includes(pe)},useComponentProps:function(){var se,me=(0,n.$)(),pe=me.t,ee=(0,v.useField)(),ue=(0,v.useFieldSchema)(),ge=(0,B.ng)(),Ie=ge.dn,Ae=ge.refresh;return{title:pe("Allow add new"),checked:((se=ue["x-component-props"])===null||se===void 0?void 0:se.allowAddnew)!==!1,onChange:function(Te){var je=r()({},"x-uid",ue["x-uid"]);ee.componentProps.allowAddnew=Te,ue["x-component-props"]=ue["x-component-props"]||{},ue["x-component-props"].allowAddnew=Te,je["x-component-props"]=ue["x-component-props"],Ie.emit("patch",{schema:je}),Ae()}}}},{name:"allowSelectExistingRecord",type:"switch",useVisible:function(){var se=P(),me=ie(),pe=le();return!se&&me&&["SubTable"].includes(pe)},useComponentProps:function(){var se,me=(0,n.$)(),pe=me.t,ee=(0,v.useField)(),ue=(0,v.useFieldSchema)(),ge=(0,B.ng)(),Ie=ge.dn,Ae=ge.refresh;return{title:pe("Allow selection of existing records"),checked:(se=ue["x-component-props"])===null||se===void 0?void 0:se.allowSelectExistingRecord,onChange:function(Te){var je=r()({},"x-uid",ue["x-uid"]);ee.componentProps.allowSelectExistingRecord=Te,ue["x-component-props"]=ue["x-component-props"]||{},ue["x-component-props"].allowSelectExistingRecord=Te,je["x-component-props"]=ue["x-component-props"],Ie.emit("patch",{schema:je}),Ae()}}}},{name:"quickUpload",type:"switch",useVisible:function(){var se=G(),me=Y();return!me&&se},useComponentProps:function(){var se,me=(0,n.$)(),pe=me.t,ee=(0,v.useField)(),ue=(0,v.useFieldSchema)(),ge=(0,B.ng)(),Ie=ge.dn,Ae=ge.refresh;return{title:pe("Quick upload"),checked:((se=ue["x-component-props"])===null||se===void 0?void 0:se.quickUpload)!==!1,onChange:function(Te){var je=r()({},"x-uid",ue["x-uid"]);ee.componentProps.quickUpload=Te,ue["x-component-props"]=ue["x-component-props"]||{},ue["x-component-props"].quickUpload=Te,je["x-component-props"]=ue["x-component-props"],Ie.emit("patch",{schema:je}),Ae()}}}},{name:"selectFile",type:"switch",useVisible:function(){var se=G(),me=Y();return!me&&se},useComponentProps:function(){var se,me=(0,n.$)(),pe=me.t,ee=(0,v.useField)(),ue=(0,v.useFieldSchema)(),ge=(0,B.ng)(),Ie=ge.dn,Ae=ge.refresh;return{title:pe("Select file"),checked:((se=ue["x-component-props"])===null||se===void 0?void 0:se.selectFile)!==!1,onChange:function(Te){var je=r()({},"x-uid",ue["x-uid"]);ee.componentProps.selectFile=Te,ue["x-component-props"]=ue["x-component-props"]||{},ue["x-component-props"].selectFile=Te,je["x-component-props"]=ue["x-component-props"],Ie.emit("patch",{schema:je}),Ae()}}}},{name:"validationRules",type:"modal",useComponentProps:function(){var se=(0,n.$)(),me=se.t,pe=(0,v.useField)(),ee=(0,v.useFieldSchema)(),ue=(0,B.ng)(),ge=ue.dn,Ie=ue.refresh,Ae=_e(),Le=(0,o.useCollectionManager_deprecated)(),Te=Le.getCollectionJoinField,je=(0,o.useCollection_deprecated)(),Pe=je.getField,fe=Pe(ee.name)||Te(ee["x-collection-field"]);return{title:me("Set validation rules"),components:{ArrayCollapse:K.ArrayCollapse,FormLayout:K.FormLayout},schema:{type:"object",title:me("Set validation rules"),properties:{rules:{type:"array",default:ee==null?void 0:ee["x-validator"],"x-component":"ArrayCollapse","x-decorator":"FormItem","x-component-props":{accordion:!0},maxItems:3,items:{type:"object","x-component":"ArrayCollapse.CollapsePanel","x-component-props":{header:'{{ t("Validation rule") }}'},properties:{index:{type:"void","x-component":"ArrayCollapse.Index"},layout:{type:"void","x-component":"FormLayout","x-component-props":{labelStyle:{marginTop:"6px"},labelCol:8,wrapperCol:16},properties:i()(i()({},Ae),{},{message:{type:"string",title:'{{ t("Error message") }}',"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{autoSize:{minRows:2,maxRows:2}}}})},remove:{type:"void","x-component":"ArrayCollapse.Remove"},moveUp:{type:"void","x-component":"ArrayCollapse.MoveUp"},moveDown:{type:"void","x-component":"ArrayCollapse.MoveDown"}}},properties:{add:{type:"void",title:'{{ t("Add validation rule") }}',"x-component":"ArrayCollapse.Addition","x-reactions":{dependencies:["rules"],fulfill:{state:{disabled:"{{$deps[0].length >= 3}}"}}}}}}}},onSubmit:function(T){var ce,be=[],oe=c()(T.rules),Re;try{for(oe.s();!(Re=oe.n()).done;){var Ze=Re.value;be.push(h().pickBy(Ze,h().identity))}}catch(ut){oe.e(ut)}finally{oe.f()}var We=r()({},"x-uid",ee["x-uid"]);if(["percent"].includes(fe==null?void 0:fe.interface)){var tt=c()(be),St;try{for(tt.s();!(St=tt.n()).done;){var Tt=St.value;(Tt.maxValue||Tt.minValue)&&(Tt.percentMode=!0),Tt.percentFormat&&(Tt.percentFormats=!0)}}catch(ut){tt.e(ut)}finally{tt.f()}}var lt=h().concat([],(fe==null||(ce=fe.uiSchema)===null||ce===void 0?void 0:ce["x-validator"])||[],be);pe.validator=lt,ee["x-validator"]=be,We["x-validator"]=be,ge.emit("patch",{schema:We}),Ie()}}},useVisible:function(){var se=(0,L.bz)(),me=se.form,pe=Y(),ee=_e();return me&&!pe&&ee}},{name:"defaultValue",Component:u.N,useVisible:function(){var se=(0,H.SF)(),me=se.isAllowToSetDefaultValue;return me()}},{name:"dataScope",Component:I.H,useVisible:function(){var se=xe(),me=Y();return se&&!me},useComponentProps:function(){var se,me=(0,o.useCollectionManager_deprecated)(),pe=me.getCollectionJoinField,ee=me.getAllCollectionsInheritChain,ue=(0,o.useCollection_deprecated)(),ge=ue.getField,Ie=(0,L.bz)(),Ae=Ie.form,Le=(0,$.a)(),Te=(0,v.useField)(),je=(0,v.useFieldSchema)(),Pe=ge(je.name)||pe(je["x-collection-field"]),fe=(0,t.OQ)(),re=(0,t.Kp)(),T=(0,B.ng)(),ce=T.dn;return{collectionName:Pe==null?void 0:Pe.target,defaultFilter:(je==null||(se=je["x-component-props"])===null||se===void 0||(se=se.service)===null||se===void 0||(se=se.params)===null||se===void 0?void 0:se.filter)||{},form:Ae,dynamicComponent:function(oe){return(0,f.jsx)(S.qj,i()(i()({},oe),{},{form:Ae,collectionField:oe.collectionField,record:Le,shouldChange:(0,S.Vc)({collectionField:oe.collectionField,variables:fe,localVariables:re,getAllCollectionsInheritChain:ee})}))},onSubmit:function(oe){var Re,Ze=oe.filter;Ze=(0,V.Wm)(Ze),h().set(Te.componentProps,"service.params.filter",Ze),je["x-component-props"]=Te.componentProps,ce.emit("patch",{schema:(Re={},r()(Re,"x-uid",je["x-uid"]),r()(Re,"x-component-props",Te.componentProps),Re)})}}}},{name:"sortingRule",Component:l.w,useVisible:function(){var se=xe(),me=Y();return se&&!me}},{name:"fieldMode",type:"select",useComponentProps:function(){var se=(0,n.$)(),me=se.t,pe=(0,v.useField)(),ee=(0,v.useFieldSchema)(),ue=(0,B.ng)(),ge=ue.dn,Ie=(0,B.fd)(),Ae=q(),Le=le();return{title:me("Field component"),options:Ie,value:Le,onChange:function(je){var Pe=r()({},"x-uid",ee["x-uid"]);ee["x-component-props"]=ee["x-component-props"]||{},ee["x-component-props"].mode=je,Pe["x-component-props"]=ee["x-component-props"],pe.componentProps=pe.componentProps||{},pe.componentProps.mode=je,(0,X.r$)(ee)&&Ae&&(Pe.default=null,ee.default=null,pe.setInitialValue(null),pe.setValue(null)),ge.emit("patch",{schema:Pe}),ge.refresh()}}},useVisible:Ee},{name:"popupSize",type:"select",useComponentProps:function(){var se,me,pe=(0,n.$)(),ee=pe.t,ue=(0,v.useField)(),ge=(0,v.useFieldSchema)(),Ie=(0,B.ng)(),Ae=Ie.dn;return{title:ee("Popup size"),options:[{label:ee("Small"),value:"small"},{label:ee("Middle"),value:"middle"},{label:ee("Large"),value:"large"}],value:(se=ge==null||(me=ge["x-component-props"])===null||me===void 0?void 0:me.openSize)!==null&&se!==void 0?se:"middle",onChange:function(Te){ue.componentProps.openSize=Te,ge["x-component-props"]=ue.componentProps,Ae.emit("patch",{schema:{"x-uid":ge["x-uid"],"x-component-props":ge["x-component-props"]}}),Ae.refresh()}}},useVisible:function(){var se,me=Ee(),pe=(0,v.useFieldSchema)(),ee=((se=pe["x-component-props"])===null||se===void 0?void 0:se.mode)==="Picker",ue=me&&ee;return ue}},D,{name:"addMode",type:"select",useVisible:function(){var se=P(),me=ie(),pe=le();return!se&&me&&["Select"].includes(pe)},useComponentProps:function(){var se,me=(0,E.B)(),pe=me.defaultOpenMode,ee=(0,n.$)(),ue=ee.t,ge=(0,v.useField)(),Ie=(0,v.useFieldSchema)(),Ae=(0,B.ng)(),Le=Ae.dn,Te=Ae.insertAdjacent;return{title:ue("Quick create"),options:[{label:ue("None"),value:"none"},{label:ue("Dropdown"),value:"quickAdd"},{label:ue("Pop-up"),value:"modalAdd"}],value:((se=ge.componentProps)===null||se===void 0?void 0:se.addMode)||"none",onChange:function(Pe){if(Pe==="modalAdd"){var fe=Ie.reduceProperties(function(ce,be){return be["x-component"]==="Action"?be:ce},null);if(!fe){var re={"x-action":"create","x-acl-action":"create",title:"{{t('Add new')}}","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:addNew","x-component":"Action","x-decorator":"ACLActionProvider","x-component-props":{openMode:pe,type:"default",component:"CreateRecordAction"}};Te("afterBegin",re)}}var T=r()({},"x-uid",Ie["x-uid"]);Ie["x-component-props"]=Ie["x-component-props"]||{},Ie["x-component-props"].addMode=Pe,T["x-component-props"]=Ie["x-component-props"],ge.componentProps=ge.componentProps||{},ge.componentProps.addMode=Pe,Le.emit("patch",{schema:T}),Le.refresh()}}}},{name:"multiple",type:"switch",useVisible:function(){var se=ie(),me=(0,O.K)();return se&&me()},useComponentProps:function(){var se,me=(0,n.$)(),pe=me.t,ee=(0,v.useField)(),ue=(0,v.useFieldSchema)(),ge=(0,B.ng)(),Ie=ge.dn,Ae=ge.refresh;return{title:pe("Allow multiple"),checked:((se=ue["x-component-props"])===null||se===void 0?void 0:se.multiple)===void 0?!0:ue["x-component-props"].multiple,onChange:function(Te){var je=r()({},"x-uid",ue["x-uid"]);ue["x-component-props"]=ue["x-component-props"]||{},ee.componentProps=ee.componentProps||{},ue["x-component-props"].multiple=Te,ee.componentProps.multiple=Te,je["x-component-props"]=ue["x-component-props"],Ie.emit("patch",{schema:je}),Ae()}}}},{name:"allowDissociate",type:"switch",useVisible:function(){var se,me=(0,O.K)(),pe=(0,v.useFieldSchema)(),ee=((se=pe["x-component-props"])===null||se===void 0?void 0:se.mode)==="Nester";return ee&&me()},useComponentProps:function(){var se,me=(0,n.$)(),pe=me.t,ee=(0,v.useField)(),ue=(0,v.useFieldSchema)(),ge=(0,B.ng)(),Ie=ge.dn,Ae=ge.refresh;return{title:pe("Allow dissociate"),checked:((se=ue["x-component-props"])===null||se===void 0?void 0:se.allowDissociate)!==!1,onChange:function(Te){var je=r()({},"x-uid",ue["x-uid"]);ue["x-component-props"]=ue["x-component-props"]||{},ee.componentProps=ee.componentProps||{},ue["x-component-props"].allowDissociate=Te,ee.componentProps.allowDissociate=Te,je["x-component-props"]=ue["x-component-props"],Ie.emit("patch",{schema:je}),Ae()}}}},{name:"enableLink",type:"switch",useVisible:function(){var se=ze(),me=P(),pe=G(),ee=(0,v.useFieldSchema)();return me&&se.length>0&&!pe&&ee["x-component"]==="CollectionField"},useComponentProps:function(){var se,me=(0,n.$)(),pe=me.t,ee=(0,v.useField)(),ue=(0,v.useFieldSchema)(),ge=(0,B.ng)(),Ie=ge.dn;return{title:pe("Enable link"),checked:((se=ue["x-component-props"])===null||se===void 0?void 0:se.enableLink)!==!1,onChange:function(Le){ue["x-component-props"]=i()(i()({},ue==null?void 0:ue["x-component-props"]),{},{enableLink:Le}),ee.componentProps.enableLink=Le,Ie.emit("patch",{schema:{"x-uid":ue["x-uid"],"x-component-props":i()({},ue==null?void 0:ue["x-component-props"])}}),Ie.refresh()}}}},{name:"pattern",type:"select",useVisible:function(){var se=(0,L.bz)(),me=se.form,pe=(0,v.useFieldSchema)();return me&&!(me!=null&&me.readPretty)&&!(0,N.V)(pe)},useComponentProps:function(){var se=(0,n.$)(),me=se.t,pe=(0,v.useField)(),ee=(0,v.useFieldSchema)(),ue=(0,B.ng)(),ge=ue.dn,Ie="editable";return ee["x-disabled"]===!0&&(Ie="readonly"),ee["x-read-pretty"]===!0&&(Ie="read-pretty"),{title:me("Pattern"),options:[{label:me("Editable"),value:"editable"},{label:me("Readonly"),value:"readonly"},{label:me("Easy-reading"),value:"read-pretty"}],value:Ie,onChange:function(Le){var Te=r()({},"x-uid",ee["x-uid"]);switch(Le){case"readonly":{ee["x-read-pretty"]=!1,ee["x-disabled"]=!0,Te["x-read-pretty"]=!1,Te["x-disabled"]=!0,pe.readPretty=!1,pe.disabled=!0,h().set(pe,"initStateOfLinkageRules.pattern",(0,m.TF)(!0,F.Us.ReadOnly));break}case"read-pretty":{ee["x-read-pretty"]=!0,ee["x-disabled"]=!1,Te["x-read-pretty"]=!0,Te["x-disabled"]=!1,pe.readPretty=!0,h().set(pe,"initStateOfLinkageRules.pattern",(0,m.TF)(!0,F.Us.ReadPretty));break}default:{ee["x-read-pretty"]=!1,ee["x-disabled"]=!1,Te["x-read-pretty"]=!1,Te["x-disabled"]=!1,pe.readPretty=!1,pe.disabled=!1,h().set(pe,"initStateOfLinkageRules.pattern",(0,m.TF)(!0,F.Us.Editable));break}}ge.emit("patch",{schema:Te}),ge.refresh()}}}},{name:"titleField",type:"select",useVisible:function(){var se=ze(),me=ie(),pe=le();return se.length>0&&me&&pe!=="SubTable"},useComponentProps:function(){var se,me=(0,n.$)(),pe=me.t,ee=(0,v.useField)(),ue=(0,v.useFieldSchema)(),ge=(0,B.ng)(),Ie=ge.dn,Ae=ze(),Le=(0,o.useCollectionField_deprecated)();return{title:pe("Title field"),options:Ae,value:ee==null||(se=ee.componentProps)===null||se===void 0||(se=se.fieldNames)===null||se===void 0?void 0:se.label,onChange:function(je){var Pe,fe=r()({},"x-uid",ue["x-uid"]),re=i()(i()(i()({},Le==null||(Pe=Le.uiSchema)===null||Pe===void 0||(Pe=Pe["x-component-props"])===null||Pe===void 0?void 0:Pe.fieldNames),ee.componentProps.fieldNames),{},{label:je});ue["x-component-props"]=ue["x-component-props"]||{},ue["x-component-props"].fieldNames=re,fe["x-component-props"]=ue["x-component-props"],ee.componentProps.fieldNames=ue["x-component-props"].fieldNames,Ie.emit("patch",{schema:fe}),Ie.refresh()}}}},{name:"dateFormat",Component:d.y,useVisible:function(){var se=w(),me=["datetime","createdAt","updatedAt"].includes(se==null?void 0:se.interface);return me},useComponentProps:function(){var se=(0,v.useFieldSchema)();return{fieldSchema:se}}},{name:"size",type:"select",useVisible:function(){var se=P(),me=w(),pe=(0,o.useCollectionManager_deprecated)(),ee=pe.getCollection,ue=ee(me==null?void 0:me.target),ge=["attachment"].includes(me==null?void 0:me.interface)||(ue==null?void 0:ue.template)==="file";return se&&ge},useComponentProps:function(){var se,me=(0,n.$)(),pe=me.t,ee=(0,v.useField)(),ue=(0,v.useFieldSchema)(),ge=(0,B.ng)(),Ie=ge.dn;return{title:pe("Size"),options:[{label:pe("Large"),value:"large"},{label:pe("Default"),value:"default"},{label:pe("Small"),value:"small"}],value:(ee==null||(se=ee.componentProps)===null||se===void 0?void 0:se.size)||"default",onChange:function(Le){var Te=r()({},"x-uid",ue["x-uid"]);ue["x-component-props"]=ue["x-component-props"]||{},ue["x-component-props"].size=Le,Te["x-component-props"]=ue["x-component-props"],ee.componentProps=ee.componentProps||{},ee.componentProps.size=Le,Ie.emit("patch",{schema:Te}),Ie.refresh()}}}},{name:"tagColor",type:"select",useVisible:function(){var se=ie(),me=le();return se&&["Tag"].includes(me)},useComponentProps:function(){var se,me,pe=(0,n.$)(),ee=pe.t,ue=(0,v.useField)(),ge=(0,v.useFieldSchema)(),Ie=(0,B.ng)(),Ae=Ie.dn,Le=w(),Te=(0,U.A8)((se=Le==null?void 0:Le.target)!==null&&se!==void 0?se:Le==null?void 0:Le.targetCollection);return{title:ee("Tag color field"),options:Te,value:ue==null||(me=ue.componentProps)===null||me===void 0?void 0:me.tagColorField,onChange:function(Pe){var fe=r()({},"x-uid",ge["x-uid"]);ge["x-component-props"]=ge["x-component-props"]||{},ge["x-component-props"].tagColorField=Pe,fe["x-component-props"]=ge["x-component-props"],ue.componentProps.tagColorField=Pe,Ae.emit("patch",{schema:fe}),Ae.refresh()}}}},{name:"divider",type:"divider",useVisible:function(){var se=w();return!!se}},{name:"remove",type:"remove",useComponentProps:function(){var se=(0,n.$)(),me=se.t;return{removeParentsIfNoChildren:!0,confirm:{title:me("Delete field")},breakRemoveOn:{"x-component":"Grid"}}}}])});function q(){var Se=(0,$.a)(),se=h().isEmpty(h().omit(Se,["__parent","__collectionName"]));return se}function J(Se){return(Se==null?void 0:Se.template)==="file"}function Y(){var Se=(0,L.bz)(),se=Se.form;return!!(se!=null&&se.readPretty)}function P(){var Se=(0,Q.z9)(),se=Se.fieldSchema,me=(0,v.useField)();return me.readPretty||(se==null?void 0:se["x-read-pretty"])}function w(){var Se=(0,o.useCollectionManager_deprecated)(),se=Se.getCollectionJoinField,me=(0,o.useCollection_deprecated)(),pe=me.getField,ee=(0,v.useFieldSchema)(),ue=(0,Q.z9)(),ge=ue.collectionField,Ie=ee?pe(ee.name)||se(ee["x-collection-field"]):null;return ee?Ie||ge:null}function ie(){var Se=w(),se=["obo","oho","o2o","o2m","m2m","m2o","updatedBy","createdBy","mbm"].includes(Se==null?void 0:Se.interface);return se}function G(){var Se=(0,a.d9)(),se=w(),me=Se.getCollection(se==null?void 0:se.target),pe=J(me);return pe}function le(){var Se,se=(0,v.useField)(),me=G(),pe=(se==null||(Se=se.componentProps)===null||Se===void 0?void 0:Se.mode)||(me?"FileManager":"Select");return pe}function xe(){var Se=le(),se=ie(),me=se&&Se==="Select";return me}function _e(){var Se,se=(0,o.useCollectionManager_deprecated)(),me=se.getInterface,pe=(0,v.useFieldSchema)(),ee=w(),ue=me(ee==null?void 0:ee.interface),ge=ue==null||(Se=ue.validateSchema)===null||Se===void 0?void 0:Se.call(ue,pe);return ge}function Ee(){var Se=(0,v.useFieldSchema)(),se=(0,B.fd)(),me=Se["x-component"]==="TableField",pe=ie(),ee=pe&&se&&!me;return ee}function ze(){var Se,se=(0,o.useCollectionManager_deprecated)(),me=se.getCollectionFields,pe=se.isTitleField,ee=(0,B.eJ)(),ue=w(),ge=ue!=null&&ue.target?me(ue==null?void 0:ue.target):(Se=me(ue==null?void 0:ue.targetCollection))!==null&&Se!==void 0?Se:[],Ie=ge.filter(function(Ae){return pe(Ae)}).map(function(Ae){var Le;return{value:Ae==null?void 0:Ae.name,label:ee(Ae==null||(Le=Ae.uiSchema)===null||Le===void 0?void 0:Le.title)||(Ae==null?void 0:Ae.name)}});return Ie}},99941:function(He,ae,e){"use strict";e.d(ae,{x:function(){return je},Z:function(){return Pe}});var Z=e(97857),c=e.n(Z),k=e(9783),i=e.n(k),g=e(68400),C=e.n(g),A=e(97133),r=e(5552),K=e(80844),v=e(67294),j=e(75667),h=e(68091),M=e(44899),n=e(67668),y=e(15503),L=e(76314),o=e(90297),a=e(33621),R=e(27754),E=e(85893),$=function(){return(0,E.jsx)(o.aN,{schemaSettings:"FilterFormItemSettings"})},Q=e(14432),z=e(85667),p=e(84157),b=e(96486),f=e.n(b),x=e(10097),m=e(6145),F=e(53285),I=e(64910),d=e(65565),u=e(29132),l=function(re,T){return _.isArray(re)?_.isEmpty(_.filter(re,function(ce){return(ce==null?void 0:ce[T])!=null})):(re==null?void 0:re[T])==null},S=function(re){return re.includes(".")},H=function(){var re,T=(0,m.useCollection_deprecated)(),ce=T.name,be=(0,m.useCollectionManager_deprecated)(),oe=be.getCollectionJoinField,Re=(0,K.useForm)(),Ze=(0,K.useFieldSchema)(),We=(0,I.OQ)(),tt=(0,K.useField)(),St=(0,u.eI)(),Tt=St.formValue,lt=(0,F.P5)()||{},ut=lt.isInSubForm,nt=lt.isInSubTable,Je=(0,x.useAssociationNames)(),hn=Je.getAssociationAppends,mn=Ze.name.toString(),vn=(0,v.useRef)(null),an=(0,v.useRef)(null);vn.current==null&&S(mn)&&(vn.current=oe("".concat(ce,".").concat(mn))),an.current==null&&S(mn)&&(an.current=oe("".concat(ce,".").concat(mn.split(".")[0])));var fn=(0,v.useMemo)(function(){return!S(mn)||!We||ce==="fields"||!vn.current},[mn,We,ce,vn.current]),cn=fn?{}:(0,z.untracked)(function(){return f().cloneDeep(ut||nt?Tt:Re.values)}),_n=S(mn)&&an.current?f().get(cn,"".concat(mn.split(".")[0],".").concat(((re=an.current)===null||re===void 0?void 0:re.targetKey)||"id")):void 0;(0,v.useEffect)(function(){if(!fn&&!f().isEmpty(cn)){var zt={name:"$nForm",ctx:cn,collectionName:ce},xn="{{ $nForm.".concat(mn," }}");if(_n!=null){var Qt=hn(),Et=Qt.appends;We.parseVariable(xn,zt,{appends:Et}).then(function(en){var Rn=en.value;(0,p.nextTick)(function(){var An=(0,d.J)(Rn,{targetCollectionField:vn.current});f().isEmpty(An)&&!f().isNumber(An)?tt.value=null:tt.value=An})}).catch(function(en){console.error(en)})}}},[_n,fn])},O=H;function N(fe,re){var T=_.get(fe,re);return T!=null&&JSON.stringify(T)!=="[{}]"&&JSON.stringify(T)!=="{}"}var t=e(22229),B=e(43321),X=e(37975),V=e(94656),U=e(37696),D=function(re){for(;re;){if((0,U.r$)(re))return!0;if(re["x-component"]==="FormV2")return!1;re=re.parent}return!1},ne=function(){var re=(0,K.useFieldSchema)(),T=(0,K.useField)(),ce=(0,u.eI)(),be=ce.fieldSchema,oe=ce.formValue,Re=(0,X.Z)(),Ze=(0,V.Z)(),We=q(be),tt=(0,h.qD)();(0,v.useEffect)(function(){if(D(re)){if(!T.onUnmount.__rested){var St=T.onUnmount;T.onUnmount=function(){var lt;(lt=T.__disposes)===null||lt===void 0||lt.forEach(function(ut){ut()}),St()},T.onUnmount.__rested=!0}if(We){T.__disposes&&T.__disposes.forEach(function(lt){lt()});var Tt=T.__disposes=[];(0,B.A)(We,function(lt,ut){var nt;(nt=lt.targetFields)!==null&&nt!==void 0&&nt.includes(re.name)&&Tt.push((0,t.jd)({field:T,linkageRules:We,formValues:oe,localVariables:Re,action:lt,rule:ut,variables:Ze,variableNameOfLeftCondition:"$iteration"},tt.jsonLogic))}),T.__linkageRules=We}}},[T,re==null?void 0:re.name,oe,JSON.stringify(We),Re,Ze])};function q(fe){var re;if(fe)return(re=fe["x-linkage-rules"])===null||re===void 0?void 0:re.filter(function(T){return!T.disabled})}var J=e(15009),Y=e.n(J),P=e(99289),w=e.n(P),ie=e(36586),G=e(29250),le=e(7340),xe=e(49834),_e=e(58837),Ee=e(13511),ze=e(90615),Se=e(44256),se=e(76690),me=e(21995),pe=function(){var re=(0,K.useField)(),T=(0,K.useFieldSchema)(),ce=(0,I.OQ)(),be=(0,I.Kp)(),oe=(0,xe.oV)(),Re=(0,F.P5)()||{},Ze=Re.isInAssignFieldValues,We=Re.isInSetDefaultValueDialog,tt=Re.isInFormDataTemplate,St=Re.isInSubTable,Tt=Re.isInSubForm,lt=(0,_e.Kx)(),ut=(0,me.qs)(),nt=ut.isSpecialCase,Je=ut.setDefaultValue,hn=(0,ie.pW)(),mn=(0,le.bz)(),vn=mn.type,an=mn.form,fn=(0,G.Q)(),cn=fn.getOperator,_n=(0,Ee.fp)(),zt=(0,v.useCallback)(function(xn){var Qt=ce==null?void 0:ce.getVariable(xn);return Qt||(Qt=be.find(function(Et){return Et.name===xn})),Qt},[be,ce]);(0,v.useEffect)(function(){if(vn==="update"&&T.default&&re.form===an){var xn,Qt;(xn=re.setValue)===null||xn===void 0||xn.call(re,oe==null||(Qt=oe.data)===null||Qt===void 0?void 0:Qt[T.name])}if(!(T.default==null||We||tt||(0,U.r$)(T)||!(oe!=null&&oe.isNew)&&!Ze)){var Et=function(){var Zn=w()(Y()().mark(function rr(){var mr,Er,Ft,ct,Mt,kt,Rt,_t,Bt,jt,Xt=arguments;return Y()().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:if(mr=Xt.length>0&&Xt[0]!==void 0?Xt[0]:{},Er=mr.forceUpdate,Ft=Er===void 0?!1:Er,!(ce&&re&&((0,se.cG)(T.default)&&re.value==null||re.value===T.default||Ft))){Nt.next=30;break}if(!(0,se.cG)(re.value)){Nt.next=5;break}return Nt.next=5,re.reset({forceClear:!0});case 5:return re.loading=!0,ct=!T.name.toString().includes(".")&&(lt==null?void 0:lt.getField(T.name)),Nt.next=10,ce.parseVariable(T.default,be,{fieldOperator:cn(T.name)});case 10:if(Mt=Nt.sent,kt=Mt.value,Rt=Mt.collectionName,_t=Mt.dataSource,Bt=_t===void 0?"main":_t,!(ct!=null&&ct.target&&Rt&&ct.target!==Rt&&!ue({collectionName:ct.target,targetCollectionName:Rt,dm:_n,dataSource:Bt}))){Nt.next=18;break}return re.loading=!1,Nt.abrupt("return");case 18:if(jt=(0,d.J)(kt,{targetCollectionField:ct}),!(jt==null||jt==="")){Nt.next=26;break}if(!re.mounted){Nt.next=24;break}return re.setInitialValue(null),Nt.next=24,re.reset({forceClear:!0});case 24:Nt.next=27;break;case 26:nt()?hn===0&&Je(jt):re.setInitialValue(jt);case 27:re.loading=!1,Nt.next=31;break;case 30:!/\{\{.+\}\}/g.test(T.default)&&re.setInitialValue&&re.setInitialValue(T.default);case 31:case"end":return Nt.stop()}},rr)}));return function(){return Zn.apply(this,arguments)}}(),en=f().debounce(Et,I.on);if((0,se.cG)(T.default)){var Rn=(0,Se.H)(T.default),An=zt(Rn);if(!An)return console.error("useParseDefaultValue: can not find variable ".concat(Rn));Et();var Jn=(0,z.reaction)(function(){var Zn=i()({},Rn,(An==null?void 0:An.ctx)||{}),rr=(0,ze.D)(T.default),mr=(0,p.getValuesByPath)(Zn,rr);return mr===void 0?Math.random():mr},function(){return en({forceUpdate:!0})},{equals:f().isEqual});return Jn}else re.value==null&&(St||Tt)&&re.setValue(T.default)}},[T.default,be,vn,cn,_n,lt])},ee=pe,ue=function(re){var T,ce,be=re.collectionName,oe=re.targetCollectionName,Re=re.dm,Ze=re.dataSource,We=Re==null||(T=Re.getDataSource(Ze))===null||T===void 0?void 0:T.collectionManager;return We==null||(ce=We.getCollection(be))===null||ce===void 0||(ce=ce.getAllCollectionsInheritChain())===null||ce===void 0?void 0:ce.includes(oe)},ge,Ie,Ae;r.FormItem.displayName="FormilyFormItem";var Le=(0,A.css)(ge||(ge=C()([`
  & .ant-space {
    flex-wrap: wrap;
  }
  .ant-description-textarea img {
    max-width: 100%;
  }
`]))),Te=(0,A.css)(Ie||(Ie=C()([`
  .ant-card-body {
    padding: 0px !important;
  }
  > .ant-formily-item-label {
    display: none;
  }
`]))),je=(0,y.t)((0,K.observer)(function(fe){var re,T,ce;(0,Q.Zd)();var be=(0,K.useField)(),oe=(0,K.useFieldSchema)(),Re=(0,M.z)()||{},Ze=Re.addActiveFieldName,We=(0,L.Z)(),tt=We.wrapperStyle;ee(),O(),ne(),(0,v.useEffect)(function(){Ze==null||Ze(oe.name)},[Ze,oe.name]);var St=(re=(T=oe["x-decorator-props"])===null||T===void 0?void 0:T.showTitle)!==null&&re!==void 0?re:!0,Tt=(0,v.useMemo)(function(){if(be.description&&be.description!=="")return typeof be.description=="string"?(0,E.jsx)("div",{dangerouslySetInnerHTML:{__html:(0,R.g)(be.description).split(`
`).join("<br/>")}}):be.description},[be.description]),lt=(0,v.useMemo)(function(){return(0,A.cx)(Le,i()({},Te,St===!1))},[St]);return(ce=be.data)!==null&&ce!==void 0&&ce.hidden?null:(0,E.jsx)(n.YT,{allowNull:!0,children:(0,E.jsx)(a.jY,{className:(0,A.cx)("nb-form-item",(0,A.css)(Ae||(Ae=C()([`
              .ant-formily-item-layout-horizontal .ant-formily-item-control {
                max-width: `,`;
              }
            `])),St===!1||oe["x-component"]!=="CollectionField"?"100% !important":null)),children:(0,E.jsx)(j.tq,{children:(0,E.jsx)(r.FormItem,c()(c()({className:lt},fe),{},{extra:Tt,wrapperStyle:c()(c()({},tt.backgroundColor?{paddingLeft:"5px",paddingRight:"5px"}:{}),tt)}))})})})}),{displayName:"FormItem"});je.Designer=function(){var re=(0,h.qD)(),T=(0,K.useFieldSchema)(),ce="FormItemSettings:".concat(T["x-interface"]),be="FormItemSettings",oe=re.schemaSettingsManager.has(ce);return(0,E.jsx)(o.aN,{schemaSettings:oe?ce:be})};function Pe(fe){return(fe==null?void 0:fe.template)==="file"}je.FilterFormDesigner=$},14432:function(He,ae,e){"use strict";e.d(ae,{Fy:function(){return F},Ni:function(){return m},q8:function(){return p},HG:function(){return u},QT:function(){return I},JE:function(){return f},$w:function(){return z},nB:function(){return l},Oc:function(){return b},zd:function(){return x},Zd:function(){return d}});var Z=e(96695),c=e.n(Z),k=e(97857),i=e.n(k),g=e(9783),C=e.n(g),A=e(5552),r=e(80844),K=e(96486),v=e.n(K),j=e(67294),h=e(26793),M=e(29250),n=e(7340),y=e(6145),L=e(15079),o=e(90297),a=e(88773),R=e(84577),E=function(){var H=(0,r.useFieldSchema)(),O=(0,y.useCollection_deprecated)(),N=O.name,t=(0,y.useCollectionManager_deprecated)(),B=t.getCollectionFields,X=t.getInterface,V=(0,j.useMemo)(function(){var U,D,ne=(U=H["x-designer-props"])===null||U===void 0?void 0:U.interface,q=B(N);if(ne){var J;return((J=X(ne))===null||J===void 0||(J=J.filterable)===null||J===void 0?void 0:J.operators)||[]}var Y=q.find(function(w){return w.name===H.name}),P=((D=X(Y==null?void 0:Y.interface))===null||D===void 0||(D=D.filterable)===null||D===void 0?void 0:D.operators)||[];return P.filter(function(w){return typeof w.visible!="function"||w.visible(Y)})},[H.name]);return V},$=e(99941),Q=e(85893),z=function(){var H,O=(0,y.useCollectionManager_deprecated)(),N=O.getCollectionJoinField,t=(0,y.useCollection_deprecated)(),B=t.getField,X=(0,r.useField)(),V=(0,r.useFieldSchema)(),U=(0,h.$)(),D=U.t,ne=(0,R.ng)(),q=ne.dn,J=(0,R.eJ)(),Y=B(V.name)||N(V["x-collection-field"]);return Y?(0,Q.jsx)(o.B0,{title:D("Edit field title"),schema:{type:"object",title:D("Edit field title"),properties:{title:{title:D("Field title"),default:X==null?void 0:X.title,description:"".concat(D("Original field title: ")).concat(Y==null||(H=Y.uiSchema)===null||H===void 0?void 0:H.title),"x-decorator":"FormItem","x-component":"Input","x-component-props":{}}}},onSubmit:function(w){var ie,G=w.title,le=G.trim()===""?Y==null||(ie=Y.uiSchema)===null||ie===void 0?void 0:ie.title:G;X.title=J(le),V.title=G,q.emit("patch",{schema:{"x-uid":V["x-uid"],title:V.title}}),q.refresh()}},"edit-field-title"):null},p=function(){var H=(0,r.useField)(),O=(0,r.useFieldSchema)(),N=(0,h.$)(),t=N.t,B=(0,R.ng)(),X=B.dn;return H.readPretty?null:(0,Q.jsx)(o.B0,{title:t("Edit description"),schema:{type:"object",title:t("Edit description"),properties:{description:{default:H==null?void 0:H.description,"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}},onSubmit:function(U){var D=U.description;H.description=D,O.description=D,X.emit("patch",{schema:{"x-uid":O["x-uid"],description:O.description}}),X.refresh()}},"edit-description")},b=function(){var H,O=(0,r.useField)(),N=(0,r.useFieldSchema)(),t=(0,h.$)(),B=t.t,X=(0,R.ng)(),V=X.dn;return O.readPretty?(0,Q.jsx)(o.B0,{title:B("Edit tooltip"),schema:{type:"object",title:B("Edit description"),properties:{tooltip:{default:N==null||(H=N["x-decorator-props"])===null||H===void 0?void 0:H.tooltip,"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}},onSubmit:function(D){var ne=D.tooltip;O.decoratorProps.tooltip=ne,N["x-decorator-props"]=N["x-decorator-props"]||{},N["x-decorator-props"].tooltip=ne,V.emit("patch",{schema:{"x-uid":N["x-uid"],"x-decorator-props":N["x-decorator-props"]}}),V.refresh()}},"edit-tooltip"):null},f=function(){var H=(0,r.useField)(),O=(0,r.useFieldSchema)(),N=(0,h.$)(),t=N.t,B=(0,R.ng)(),X=B.dn,V=B.refresh;return!H.readPretty&&O["x-component"]!=="FormField"?(0,Q.jsx)(o.hj,{title:t("Required"),checked:O.required,onChange:function(D){var ne=C()({},"x-uid",O["x-uid"]);H.required=D,O.required=D,ne.required=D,X.emit("patch",{schema:ne}),V()}},"required"):null},x=function(){var H,O=(0,y.useCollectionManager_deprecated)(),N=O.getInterface,t=O.getCollectionJoinField,B=(0,y.useCollection_deprecated)(),X=B.getField,V=(0,n.bz)(),U=V.form,D=(0,r.useField)(),ne=(0,r.useFieldSchema)(),q=(0,h.$)(),J=q.t,Y=(0,R.ng)(),P=Y.dn,w=Y.refresh,ie=X(ne.name)||t(ne["x-collection-field"]),G=N(ie==null?void 0:ie.interface),le=G==null||(H=G.validateSchema)===null||H===void 0?void 0:H.call(G,ne),xe=function(Ee){return Ee!=null&&!Number.isNaN(Ee)};return U&&!(U!=null&&U.readPretty)&&le?(0,Q.jsx)(o.B0,{title:J("Set validation rules"),components:{ArrayCollapse:A.ArrayCollapse,FormLayout:A.FormLayout},schema:{type:"object",title:J("Set validation rules"),properties:{rules:{type:"array",default:ne==null?void 0:ne["x-validator"],"x-component":"ArrayCollapse","x-decorator":"FormItem","x-component-props":{accordion:!0},maxItems:3,items:{type:"object","x-component":"ArrayCollapse.CollapsePanel","x-component-props":{header:'{{ t("Validation rule") }}'},properties:{index:{type:"void","x-component":"ArrayCollapse.Index"},layout:{type:"void","x-component":"FormLayout","x-component-props":{labelStyle:{marginTop:"6px"},labelCol:8,wrapperCol:16},properties:i()(i()({},le),{},{message:{type:"string",title:'{{ t("Error message") }}',"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{autoSize:{minRows:2,maxRows:2}}}})},remove:{type:"void","x-component":"ArrayCollapse.Remove"},moveUp:{type:"void","x-component":"ArrayCollapse.MoveUp"},moveDown:{type:"void","x-component":"ArrayCollapse.MoveDown"}}},properties:{add:{type:"void",title:'{{ t("Add validation rule") }}',"x-component":"ArrayCollapse.Addition","x-reactions":{dependencies:["rules"],fulfill:{state:{disabled:"{{$deps[0].length >= 3}}"}}}}}}}},onSubmit:function(Ee){var ze,Se=[],se=c()(Ee.rules),me;try{for(se.s();!(me=se.n()).done;){var pe=me.value;Se.push(v().pickBy(pe,xe))}}catch(Le){se.e(Le)}finally{se.f()}var ee=C()({},"x-uid",ne["x-uid"]);if(["percent"].includes(ie==null?void 0:ie.interface)){var ue=c()(Se),ge;try{for(ue.s();!(ge=ue.n()).done;){var Ie=ge.value;(Ie.maxValue||Ie.minValue)&&(Ie.percentMode=!0),Ie.percentFormat&&(Ie.percentFormats=!0)}}catch(Le){ue.e(Le)}finally{ue.f()}}var Ae=v().concat([],(ie==null||(ze=ie.uiSchema)===null||ze===void 0?void 0:ze["x-validator"])||[],Se);D.validator=Ae,D.required=ne.required,ne["x-validator"]=Se,ee["x-validator"]=Se,P.emit("patch",{schema:ee}),w()}}):null},m=function(){var H,O=(0,y.useCollectionManager_deprecated)(),N=O.getCollectionJoinField,t=(0,y.useCollection_deprecated)(),B=t.getField,X=(0,n.bz)(),V=X.form,U=(0,r.useField)(),D=(0,r.useFieldSchema)(),ne=(0,h.$)(),q=ne.t,J=(0,R.ng)(),Y=J.dn,P=J.refresh,w=B(D.name)||N(D["x-collection-field"]);return V&&!(V!=null&&V.readPretty)&&w!==null&&w!==void 0&&(H=w.uiSchema)!==null&&H!==void 0&&H.type?(0,Q.jsx)(o.B0,{title:q("Set default value"),components:{ArrayCollapse:A.ArrayCollapse,FormLayout:A.FormLayout},schema:{type:"object",title:q("Set default value"),properties:{default:i()(i()({},w==null?void 0:w.uiSchema),{},{name:"default",title:q("Default value"),"x-decorator":"FormItem",default:D.default||(w==null?void 0:w.defaultValue)})}},onSubmit:function(G){var le=C()({},"x-uid",D["x-uid"]);U.value!==G.default&&(U.value=G.default),D.default=G.default,le.default=G.default,Y.emit("patch",{schema:le}),P()}}):null},F=function(){var H,O=(0,y.useCollectionManager_deprecated)(),N=O.getCollectionJoinField,t=O.getCollection,B=(0,y.useCollection_deprecated)(),X=B.getField,V=(0,r.useField)(),U=(0,r.useFieldSchema)(),D=(0,h.$)(),ne=D.t,q=(0,R.ng)(),J=q.dn,Y=X(U.name)||N(U["x-collection-field"]),P=(0,R.fd)(),w=["belongsTo","hasOne","hasMany","belongsToMany"].includes(Y==null?void 0:Y.type),ie=t(Y==null?void 0:Y.target),G=(0,$.Z)(ie);return w&&P?(0,Q.jsx)(o.Qf,{title:ne("Field component"),options:P,value:(V==null||(H=V.componentProps)===null||H===void 0?void 0:H.mode)||(G?"FileManager":"Select"),onChange:function(xe){var _e=C()({},"x-uid",U["x-uid"]);U["x-component-props"]=U["x-component-props"]||{},U["x-component-props"].mode=xe,_e["x-component-props"]=U["x-component-props"],V.componentProps=V.componentProps||{},V.componentProps.mode=xe,J.emit("patch",{schema:_e}),J.refresh()}},"field-mode"):null},I=function(){var H=(0,y.useCollectionManager_deprecated)(),O=H.getCollectionJoinField,N=(0,y.useCollection_deprecated)(),t=N.getField,B=(0,n.bz)(),X=B.form,V=(0,r.useField)(),U=(0,r.useFieldSchema)(),D=(0,h.$)(),ne=D.t,q=(0,R.ng)(),J=q.dn,Y=t(U.name)||O(U["x-collection-field"]),P="editable";return U["x-disabled"]===!0&&(P="readonly"),U["x-read-pretty"]===!0&&(P="read-pretty"),X&&!(X!=null&&X.readPretty)&&(Y==null?void 0:Y.interface)!=="o2m"&&!(0,a.V)(U)?(0,Q.jsx)(o.Qf,{title:ne("Pattern"),options:[{label:ne("Editable"),value:"editable"},{label:ne("Readonly"),value:"readonly"},{label:ne("Easy-reading"),value:"read-pretty"}],value:P,onChange:function(ie){var G=C()({},"x-uid",U["x-uid"]);switch(ie){case"readonly":{U["x-read-pretty"]=!1,U["x-disabled"]=!0,G["x-read-pretty"]=!1,G["x-disabled"]=!0,V.readPretty=!1,V.disabled=!0;break}case"read-pretty":{U["x-read-pretty"]=!0,U["x-disabled"]=!1,G["x-read-pretty"]=!0,G["x-disabled"]=!1,V.readPretty=!0;break}default:{U["x-read-pretty"]=!1,U["x-disabled"]=!1,G["x-read-pretty"]=!1,G["x-disabled"]=!1,V.readPretty=!1,V.disabled=!1;break}}J.emit("patch",{schema:G}),J.refresh()}},"pattern"):null},d=function(){(0,L.K)();var H=(0,r.useFieldSchema)(),O=E(),N=(0,M.Q)(),t=N.getOperators,B=N.collectOperator,X=t();X&&O.length&&!X[H.name]&&B(H.name,O[0].value)},u=function(){var H=(0,R.eJ)(),O=(0,r.useFieldSchema)(),N=(0,r.useField)(),t=(0,h.$)(),B=t.t,X=(0,R.ng)(),V=X.dn,U=E(),D=(0,M.Q)(),ne=D.getOperator,q=D.collectOperator;return U.length&&!ne(O.name)&&q(O.name,U[0].value),U.length?(0,Q.jsx)(o.Qf,{title:B("Operator"),value:ne(O.name),options:H(U),onChange:function(Y){var P,w,ie;q(O.name,Y),v().set(O,"x-filter-operator",Y);var G=U.find(function(Se){return Se.value===Y}),le=i()({},O["x-component-props"]);if(N.value=void 0,G!=null&&(P=G.schema)!==null&&P!==void 0&&P["x-component"]&&!(G!=null&&G.onlyFilterAction)){var xe,_e,Ee;v().set(O,"x-component-props.component",(xe=G.schema)===null||xe===void 0?void 0:xe["x-component"]),v().set(N,"componentProps.component",(_e=G.schema)===null||_e===void 0?void 0:_e["x-component"]),le=i()(i()(i()({},O["x-component-props"]),{},{component:G.schema["x-component"]},N.componentProps),(Ee=G.schema)===null||Ee===void 0?void 0:Ee["x-component-props"])}else if((w=O["x-component-props"])!==null&&w!==void 0&&w.component){var ze;v().set(O,"x-component-props.component",null),v().set(N,"componentProps.component",null),le=i()(i()({},O["x-component-props"]),{},{component:null},(ze=G.schema)===null||ze===void 0?void 0:ze["x-component-props"])}N.componentProps=le,V.emit("patch",{schema:(ie={},C()(ie,"x-uid",O["x-uid"]),C()(ie,"x-component-props",le),C()(ie,"x-filter-operator",Y),ie)}),V.refresh()}},"operator"):null},l=function(){var H,O,N=(0,y.useCollectionManager_deprecated)(),t=N.getCollectionFields,B=N.getCollectionJoinField,X=(0,y.useCollection_deprecated)(),V=X.getField,U=(0,r.useField)(),D=(0,r.useFieldSchema)(),ne=(0,h.$)(),q=ne.t,J=(0,R.ng)(),Y=J.dn,P=(0,R.eJ)(),w=V(D.name)||B(D["x-collection-field"]),ie=w!=null&&w.target?t(w==null?void 0:w.target):(H=t(w==null?void 0:w.targetCollection))!==null&&H!==void 0?H:[],G=ie.filter(function(le){return!(le!=null&&le.target)&&le.type!=="boolean"}).map(function(le){var xe;return{value:le==null?void 0:le.name,label:P(le==null||(xe=le.uiSchema)===null||xe===void 0?void 0:xe.title)||(le==null?void 0:le.name)}});return G.length>0&&D["x-component"]==="CollectionField"?(0,Q.jsx)(o.Qf,{title:q("Title field"),options:G,value:U==null||(O=U.componentProps)===null||O===void 0||(O=O.fieldNames)===null||O===void 0?void 0:O.label,onChange:function(xe){var _e,Ee=C()({},"x-uid",D["x-uid"]),ze=i()(i()(i()({},w==null||(_e=w.uiSchema)===null||_e===void 0||(_e=_e["x-component-props"])===null||_e===void 0?void 0:_e.fieldNames),U.componentProps.fieldNames),{},{label:xe});D["x-component-props"]=D["x-component-props"]||{},D["x-component-props"].fieldNames=ze,Ee["x-component-props"]=D["x-component-props"],U.componentProps.fieldNames=D["x-component-props"].fieldNames,Y.emit("patch",{schema:Ee}),Y.refresh()}},"title-field"):null}},21995:function(He,ae,e){"use strict";e.d(ae,{JD:function(){return E},k:function(){return o},qs:function(){return y}});var Z=e(97857),c=e.n(Z),k=e(19632),i=e.n(k),g=e(9783),C=e.n(g),A=e(80844),r=e(96486),K=e.n(r),v=e(6145),j=e(373),h=e(76690),M=e(37696),n=e(67294),y=function(){var b=(0,A.useForm)(),f=(0,A.useFieldSchema)(),x=(0,v.useCollection_deprecated)(),m=x.getField,F=(0,v.useCollectionManager_deprecated)(),I=F.getCollectionField,d=(0,n.useMemo)(function(){return m(f.name)},[f.name,m]),u=(0,n.useCallback)(function(){return o({collectionField:d,fieldSchema:f,getCollectionField:I})},[d,f,I]),l=(0,n.useCallback)(function(S){var H=L(f);if(H){var O=b.query(H.name).take();if(O){var N=K().isEmpty(S)?[]:K().map(a(S,{field:O,subFieldSchema:f}),function(t){return(0,j.d)(t)});$(N,O.initialValue)||O.setInitialValue(N)}}},[f,b]);return{isSpecialCase:u,setDefaultValue:l}};function L(p){for(;(b=p)!==null&&b!==void 0&&b.parent;){var b;if(p=p.parent,(0,M.r$)(p))return p}return p}function o(p){var b=p.collectionField,f=p.fieldSchema,x=p.getCollectionField;if(!f.default||!f.default.includes("$context"))return!1;if(b&&["hasOne","belongsTo"].includes(b.type)&&f){var m=L(f);if(m&&m["x-collection-field"]){var F=x(m["x-collection-field"]);if(["hasMany","belongsToMany"].includes(F==null?void 0:F.type))return!0}}return!1}function a(p,b){var f=b.field,x=b.subFieldSchema,m=f.value,F=null;Array.isArray(p)?F=p.map(function(d){return C()({},x.name,d)}):F=[C()({},x.name,p)];var I=K().assignWith(i()(m),F,function(d,u){return!d&&u&&(u.__notFromDatabase=!0),K().assign(c()({},m[0]),u)});return I}function R(p){return p?!p.__notFromDatabase:!1}var E=function(b){var f=b.rootField,x=b.rootSchema,m=z(),F=m.hasUsedVariable;(0,n.useEffect)(function(){if(K().isEmpty(f.value)&&F("$context",x)){var I=f.value,d=[(0,j.d)({})];f.value=d,setTimeout(function(){JSON.stringify(f.value)===JSON.stringify(d)&&(f.value=I)})}},[f,x,F])};function $(p,b){if(p.length!==b.length)return!1;for(var f=0;f<p.length;f++){var x=p[f],m=b[f];if(!K().isMatch(K().omitBy(m,K().isNil),K().omitBy(x,K().isNil)))return!1}return!0}var Q=function p(b,f){if(b["x-decorator"]==="FormItem"){var x=b.default;if(x&&typeof x=="string"&&(0,h.cG)(x)&&x.includes(f))return!0}var m=!1;return b.mapProperties(function(F){p(F,f)&&(m=!0)}),m};function z(){var p=(0,n.useCallback)(function(b,f){return Q(f,b)},[]);return{hasUsedVariable:p}}},54801:function(He,ae,e){"use strict";e.d(ae,{Fy:function(){return $.Fy},Ni:function(){return $.Ni},q8:function(){return $.q8},HG:function(){return $.HG},QT:function(){return $.QT},JE:function(){return $.JE},$w:function(){return $.$w},nB:function(){return $.nB},Oc:function(){return $.Oc},zd:function(){return $.zd},xJ:function(){return Z.x},iT:function(){return c.iT},$9:function(){return z},Of:function(){return c.Of},ZZ:function(){return Z.Z},Zd:function(){return $.Zd},b:function(){return c.b},l1:function(){return c.l1},w5:function(){return c.w5},p3:function(){return c.p3},G5:function(){return c.G5},xj:function(){return c.xj},rx:function(){return c.rx},eT:function(){return c.eT},q4:function(){return c.q4}});var Z=e(99941),c=e(38752),k=e(9783),i=e.n(k),g=e(97857),C=e.n(g),A=e(80844),r=e(96486),K=e.n(r),v=e(67294),j=e(26793),h=e(5537),M=e(7340),n=e(6145),y=e(36586),L=e(90297),o=e(43319),a=e(64910),R=e(84577),E=e(80564),$=e(14432),Q=e(85893),z=new h.F5({name:"FilterFormItemSettings",items:[{name:"editFieldTitle",Component:$.$w},{name:"editDescription",Component:$.q8},{name:"editTooltip",Component:$.Oc},{name:"validationRules",Component:$.zd},{name:"setDataScope",Component:o.H,useVisible:function(){var b=(0,c.rx)(),f=(0,c.xj)();return b&&!f},useComponentProps:function(){var b,f=(0,n.useCollectionManager_deprecated)(),x=f.getCollectionJoinField,m=f.getAllCollectionsInheritChain,F=(0,n.useCollection_deprecated)(),I=F.getField,d=(0,M.bz)(),u=d.form,l=(0,y.a)(),S=(0,A.useField)(),H=(0,A.useFieldSchema)(),O=I(H.name)||x(H["x-collection-field"]),N=(0,a.OQ)(),t=(0,a.Kp)(),B=(0,R.ng)(),X=B.dn;return{collectionName:O==null?void 0:O.target,defaultFilter:(H==null||(b=H["x-component-props"])===null||b===void 0||(b=b.service)===null||b===void 0||(b=b.params)===null||b===void 0?void 0:b.filter)||{},form:u,dynamicComponent:function(U){return(0,Q.jsx)(L.qj,C()(C()({},U),{},{form:u,collectionField:U.collectionField,record:l,shouldChange:(0,L.Vc)({collectionField:U.collectionField,variables:N,localVariables:t,getAllCollectionsInheritChain:m})}))},onSubmit:function(U){var D,ne=U.filter;ne=(0,E.Wm)(ne),K().set(S.componentProps,"service.params.filter",ne),H["x-component-props"]=S.componentProps,X.emit("patch",{schema:(D={},i()(D,"x-uid",H["x-uid"]),i()(D,"x-component-props",S.componentProps),D)})}}}},{name:"fieldMode",Component:$.Fy},{name:"operator",Component:$.HG},{name:"titleField",Component:$.nB},{name:"divider",type:"divider",useVisible:function(){var b=(0,n.useCollectionManager_deprecated)(),f=b.getCollectionJoinField,x=(0,n.useCollection_deprecated)(),m=x.getField,F=(0,A.useFieldSchema)(),I=m(F.name)||f(F["x-collection-field"]);return!!I}},{name:"remove",type:"remove",useComponentProps:function(){var b=(0,j.$)(),f=b.t;return{removeParentsIfNoChildren:!0,confirm:{title:f("Delete field")},breakRemoveOn:{"x-component":"Grid"}}}}]})},21305:function(He,ae,e){"use strict";e.d(ae,{V:function(){return f},z:function(){return x}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(5552),C=e(80844),A=e(15771),r=e(96486),K=e.n(r),v=e(67294),j=e(26793),h=e(7340),M=e(6145),n=e(4277),y=e(89265),L=e(90297),o=e(43319),a=e(64016),R=e(15195),E=e(23461),$=e(70993),Q=e(84577),z=e(80564),p=e(43759),b=e(85893),f=[1,2,3,4,6,8,12,24].reduce(function(m,F){return m[F]=F,m},{}),x=function(){var F,I,d,u,l,S=(0,M.useCollection_deprecated)(),H=S.name,O=S.title,N=(0,R.zy)(),t=(0,j.$)(),B=t.t,X=(0,C.useFieldSchema)(),V=(0,h.bz)(),U=V.form,D=(0,C.useField)(),ne=(0,Q.ng)(),q=ne.dn,J=(0,M.useSortFields)(H),Y=(0,E.rE)(),P=Y.componentNamePrefix,w=(X==null||(F=X["x-decorator-props"])===null||F===void 0||(F=F.params)===null||F===void 0?void 0:F.sort)||[],ie=(X==null||(I=X["x-decorator-props"])===null||I===void 0?void 0:I.resource)||(X==null||(d=X["x-decorator-props"])===null||d===void 0?void 0:d.association),G=w==null?void 0:w.map(function(le){return le.startsWith("-")?{field:le.substring(1),direction:"desc"}:{field:le,direction:"asc"}});return(0,b.jsx)(L.aN,{template:N,title:O||H,children:(0,b.jsxs)($.G0,{components:{Slider:A.Z},children:[(0,b.jsx)(y.X,{}),(0,b.jsx)(o.H,{collectionName:H,defaultFilter:(X==null||(u=X["x-decorator-props"])===null||u===void 0||(u=u.params)===null||u===void 0?void 0:u.filter)||{},form:U,onSubmit:function(xe){var _e,Ee=xe.filter;Ee=(0,z.Wm)(Ee),K().set(X,"x-decorator-props.params.filter",Ee),D.decoratorProps.params=i()({},X["x-decorator-props"].params),q.emit("patch",{schema:(_e={},c()(_e,"x-uid",X["x-uid"]),c()(_e,"x-decorator-props",X["x-decorator-props"]),_e)})}}),(0,b.jsx)(L.B0,{title:B("Set default sorting rules"),components:{ArrayItems:g.ArrayItems},schema:{type:"object",title:B("Set default sorting rules"),properties:{sort:{type:"array",default:G,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:J,required:!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:B("ASC"),value:"asc"},{label:B("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:B("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function(xe){var _e,Ee=xe.sort,ze=Ee.map(function(Se){return Se.direction==="desc"?"-".concat(Se.field):Se.field});K().set(X,"x-decorator-props.params.sort",ze),D.decoratorProps.params=i()({},X["x-decorator-props"].params),q.emit("patch",{schema:(_e={},c()(_e,"x-uid",X["x-uid"]),c()(_e,"x-decorator-props",X["x-decorator-props"]),_e)})}}),(0,b.jsx)(n.jI,{}),(0,b.jsx)(L.Qf,{title:B("Records per page"),value:((l=D.decoratorProps)===null||l===void 0||(l=l.params)===null||l===void 0?void 0:l.pageSize)||20,options:p.Wv.map(function(le){return{value:le}}),onChange:function(xe){var _e;K().set(X,"x-decorator-props.params.pageSize",xe),D.decoratorProps.params=i()(i()({},X["x-decorator-props"].params),{},{page:1}),q.emit("patch",{schema:(_e={},c()(_e,"x-uid",X["x-uid"]),c()(_e,"x-decorator-props",X["x-decorator-props"]),_e)})}}),(0,b.jsx)(a.G,{componentName:"".concat(P,"GridCard"),collectionName:H,resourceName:ie}),(0,b.jsx)(L.Z5,{}),(0,b.jsx)(L.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}})]})})}},43759:function(He,ae,e){"use strict";e.d(ae,{FR:function(){return c},UY:function(){return i},Wv:function(){return Z},he:function(){return g},wl:function(){return k}});var Z=[12,24,60,96,120],c=["xs","md","lg","xxl"],k={xs:"Phone device",md:"Tablet device",lg:"Desktop device",xxl:"Large screen device"},i={xs:"< 768",md:"\u2265 768",lg:"\u2265 992",xxl:"\u2265 1600"},g={xs:1,md:2,lg:3,xxl:4}},31732:function(He,ae,e){"use strict";e.d(ae,{rj:function(){return V},jg:function(){return f},n1:function(){return t},Di:function(){return B}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(5574),C=e.n(g),A=e(10274),r=e(23861),K=e(80844),v=e(84327),j=e(93967),h=e.n(j),M=e(96486),n=e.n(M),y=e(67294),L=e(21143),o=e(7340),a=e(67205),R=e(57105),E=e(72724),$=e(46917),Q=e(50204),z=(0,Q.l)("nb-grid-in-css-in-js",function(U){var D=U.componentCls,ne=U.marginBlock===U.marginLG?" !important":"";return c()({},D,{position:"relative",".ColDivider":{flexShrink:0,width:"".concat(U.marginBlock,"px").concat(ne)},".DraggableNode":{"&::before":{content:'" "',width:"100%",height:"100%",position:"absolute",cursor:"col-resize"},"&:hover":{"&::before":{background:"var(--colorBgSettingsHover) !important"}},width:"".concat(U.marginBlock,"px").concat(ne),height:"100%",position:"absolute",cursor:"col-resize"},".RowDivider":{height:"".concat(U.marginBlock,"px").concat(ne),width:"100%",position:"absolute",marginTop:"calc(-1 * ".concat(U.marginBlock,"px)").concat(ne)},".CardRow":{display:"flex",position:"relative"},".showDivider":{margin:"0 calc(-1 * ".concat(U.marginBlock,"px)").concat(ne)},".nb-grid-warp > button:last-child":{marginBottom:"".concat(U.marginBlock,"px")},".nb-grid-warp .nb-grid-warp > button:last-child":{marginBottom:"".concat(U.margin,"px")}})}),p=z,b=e(85893),f=(0,y.createContext)({});f.displayName="GridRowContext";var x=(0,y.createContext)({});x.displayName="GridColContext";var m=(0,y.createContext)({});m.displayName="GridContext";var F=function(D){return D["x-component"]==="Grid"},I=function(D){return D["x-component"]==="Grid.Row"},d=function(D){var ne,q=(0,$.dQ)(),J=q.token,Y=(0,y.useRef)(null),P=(0,L.useDesignable)(),w=P.dn,ie=P.designable,G=(0,r.useDroppable)({id:D.id,data:D.data,disabled:!ie}),le=G.isOver,xe=G.setNodeRef,_e=(0,y.useRef)(),Ee=(0,y.useMemo)(function(){return le?{backgroundColor:new A.C(J.colorSettings).setAlpha(.1).toHex8String()}:{}},[le]),ze=(0,r.useDndContext)(),Se=(ne=ze.active)===null||ne===void 0||(ne=ne.data.current)===null||ne===void 0||(ne=ne.schema)===null||ne===void 0?void 0:ne.parent,se=(0,y.useMemo)(function(){return Se?Object.keys(Se.properties).length:0},[Se]),me=!0;if(se===1)if(D.first)me=Se!==D.cols[0];else{var pe=D.cols[D.index],ee=D.cols[D.index+1];me=Se!==pe&&ee!==Se}var ue=D.cols[D.index],ge=D.cols[D.index+1],Ie=(0,r.useDraggable)({disabled:D.first||D.last||!ie,id:D.id,data:{dividerRef:_e,prevSchema:ue,nextSchema:ge}}),Ae=Ie.attributes,Le=Ie.listeners,Te=Ie.setNodeRef,je=Ie.isDragging,Pe=(0,y.useState)([0,0]),fe=C()(Pe,2),re=fe[0],T=fe[1];return(0,r.useDndMonitor)({onDragStart:function(be){if(!(!ie||!je)){Y.current=be.active.id;var oe=_e.current,Re=oe.previousElementSibling,Ze=oe.nextElementSibling;T([Re.clientWidth,Ze.clientWidth])}},onDragMove:function(be){if(!(!ie||!je)){Y.current===be.active.id&&(Y.current=Y.current+"_move");var oe=_e.current,Re=oe.previousElementSibling,Ze=oe.nextElementSibling;Re.style.width="".concat(re[0]+be.delta.x,"px"),Ze.style.width="".concat(re[1]-be.delta.x,"px")}},onDragEnd:function(be){var oe,Re,Ze;if(!(!ie||!Y.current)&&!((oe=Y.current)!==null&&oe!==void 0&&oe.startsWith(be.active.id)&&!Y.current.endsWith("_move"))&&!(re[0]<=0||re[1]<=0)&&(T([0,0]),!(!ue||!ge))){var We=_e.current,tt=We.previousElementSibling,St=We.nextElementSibling;ue["x-component-props"]=ue["x-component-props"]||{},ge["x-component-props"]=ge["x-component-props"]||{};var Tt=We.clientWidth*(D.cols.length+1)/D.cols.length,lt=(100*(tt.getBoundingClientRect().width+Tt)/We.parentElement.clientWidth).toFixed(2),ut=(100*(St.getBoundingClientRect().width+Tt)/We.parentElement.clientWidth).toFixed(2);n().set(ue,"x-component-props.width",lt),n().set(ge,"x-component-props.width",ut),w.emit("batchPatch",{schemas:[(Re={},c()(Re,"x-uid",ue["x-uid"]),c()(Re,"x-component-props",i()({},ue["x-component-props"])),Re),(Ze={},c()(Ze,"x-uid",ge["x-uid"]),c()(Ze,"x-component-props",i()({},ge["x-component-props"])),Ze)]})}}}),(0,b.jsx)("div",{ref:function(be){me&&(xe(be),_e.current=be)},className:h()("nb-col-divider","ColDivider"),style:Ee,children:(0,b.jsx)("div",i()(i()(i()({ref:Te},Le),Ae),{},{className:D.first||D.last||!ie?null:"DraggableNode"}))})},u=y.memo(function(U){var D,ne=(0,$.dQ)(),q=ne.token,J=(0,L.useDesignable)(),Y=J.designable,P=(0,r.useDroppable)({id:U.id,data:U.data,disabled:!Y}),w=P.isOver,ie=P.setNodeRef,G=(0,y.useState)(!1),le=C()(G,2),xe=le[0],_e=le[1],Ee=(0,y.useMemo)(function(){return w?{zIndex:xe?1e3:-1,backgroundColor:new A.C(q.colorSettings).setAlpha(.1).toHex8String()}:{zIndex:xe?1e3:-1}},[xe,w]),ze=(0,r.useDndContext)(),Se=U.rows[U.index],se=(D=ze.active)===null||D===void 0||(D=D.data.current)===null||D===void 0||(D=D.schema)===null||D===void 0?void 0:D.parent.parent,me=(0,y.useMemo)(function(){return se==null?void 0:se.mapProperties(function(ue){return ue["x-component"]==="Grid.Col"}).filter(Boolean).length},[se]),pe=!0;if(me===1)if(U.first)pe=se!==U.rows[0];else{var ee=U.rows[U.index+1];pe=se!==Se&&ee!==se}return(0,r.useDndMonitor)({onDragStart:function(ge){Y&&_e(!0)},onDragMove:function(ge){},onDragOver:function(ge){},onDragEnd:function(ge){Y&&_e(!1)},onDragCancel:function(ge){Y&&_e(!1)}}),(0,b.jsx)("span",{ref:pe?ie:null,className:h()("nb-row-divider","RowDivider"),style:Ee})});u.displayName="RowDivider";var l=function(D){var ne=new K.Schema({type:"void",name:"row_".concat((0,v.uid)()),"x-uid":(0,v.uid)(),"x-component":"Grid.Row"}),q=ne.addProperty((0,v.uid)(),{type:"void","x-uid":(0,v.uid)(),"x-component":"Grid.Col"});return K.Schema.isSchemaInstance(D)&&(D.parent=q),q.addProperty(D.name,D),ne},S=function(D){var ne=new K.Schema({type:"void",name:"col_".concat((0,v.uid)()),"x-uid":(0,v.uid)(),"x-component":"Grid.Col"});return K.Schema.isSchemaInstance(D)&&(D.parent=ne),ne.addProperty(D.name,D),ne},H=function(){var D=(0,K.useFieldSchema)();return(0,y.useMemo)(function(){return D.reduceProperties(function(ne,q){return q["x-component"]==="Grid.Row"&&!q["x-hidden"]&&ne.push(q),ne},[])},[D])},O=function(){var D=(0,K.useFieldSchema)();return(0,y.useMemo)(function(){return D.reduceProperties(function(ne,q){return q["x-component"]==="Grid.Col"&&!q["x-hidden"]&&ne.push(q),ne},[])},[D])},N=function(D){return D.dndContext===!1?(0,b.jsx)(b.Fragment,{children:D.children}):(0,b.jsx)(E.L,i()(i()({},D.dndContext),{},{children:D.children}))},t=function(){return(0,y.useContext)(m)},B=function(){return(0,y.useContext)(f)},X=n().memoize(function(U,D){return{breakRemoveOn:F,wrapSchema:l,insertAdjacent:D,schema:U}}),V=(0,K.observer)(function(U){var D=U.distributed,ne=U.showDivider,q=ne===void 0?!0:ne,J=(0,y.useRef)(null),Y=(0,K.useField)(),P=(0,K.useFieldSchema)(),w=(0,L.useSchemaInitializerRender)(P["x-initializer"],P["x-initializer-props"]),ie=w.render,G=(0,y.useCallback)(function(Ie){return ie(Ie)},[]),le=Y.address.toString(),xe=H(),_e=(0,o.bz)(),Ee=_e.setPrintContent,ze=p(),Se=ze.componentCls,se=ze.hashId,me=D===void 0?(P==null?void 0:P.parent["x-component"])==="Page"||(P==null?void 0:P.parent["x-component"])==="Tabs.TabPane":D;(0,y.useEffect)(function(){J.current&&(Ee==null||Ee(J.current))},[Ee]);var pe=(0,y.useMemo)(function(){return{ref:J,fieldSchema:P,renderSchemaInitializer:ie,InitializerComponent:G,showDivider:q}},[P,ie,G,q]),ee=(0,R.gR)(),ue=(0,R.QJ)(),ge=(0,y.useCallback)(function(){ee==null||ee(),ue==null||ue()},[ue,ee]);return(0,b.jsx)(R.ri,{refresh:ge,children:(0,b.jsx)(a.XA,{children:(0,b.jsx)(m.Provider,{value:pe,children:(0,b.jsx)("div",{className:h()("nb-grid-container"),children:(0,b.jsx)("div",{className:h()("nb-grid ".concat(Se," ").concat(se)),ref:J,children:(0,b.jsxs)("div",{className:"nb-grid-warp",children:[(0,b.jsxs)(N,{dndContext:U.dndContext,children:[q?(0,b.jsx)(u,{rows:xe,first:!0,id:"".concat(le,"_0"),data:X(P,"afterBegin")}):null,xe.map(function(Ie,Ae){return(0,b.jsxs)(y.Fragment,{children:[me?(0,b.jsx)(L.SchemaComponent,{name:Ie.name,schema:Ie,distributed:!0}):(0,b.jsx)(R.sq,{name:Ie.name,schema:Ie,isUseFormilyField:!0}),q?(0,b.jsx)(u,{rows:xe,index:Ae,id:"".concat(le,"_").concat(Ae+1),data:X(Ie,"afterEnd")}):null]},Ae)})]}),ie()]})})})})})})},{displayName:"Grid"});V.Row=(0,K.observer)(function(){var U=(0,K.useField)(),D=(0,K.useFieldSchema)(),ne=U.address.toString(),q=O(),J=t(),Y=J.showDivider,P=(0,y.useMemo)(function(){return{schema:D,cols:q}},[D,q]);return(0,b.jsx)(f.Provider,{value:P,children:(0,b.jsxs)("div",{className:h()("nb-grid-row","CardRow",{showDivider:Y}),children:[Y&&(0,b.jsx)(d,{cols:q,first:!0,id:"".concat(ne,"_0"),data:{breakRemoveOn:I,wrapSchema:S,insertAdjacent:"afterBegin",schema:D}}),q.map(function(w,ie){return(0,b.jsxs)(y.Fragment,{children:[(0,b.jsx)(R.sq,{name:w.name,schema:w,isUseFormilyField:!0}),Y&&(0,b.jsx)(d,{cols:q,index:ie,last:ie===q.length-1,id:"".concat(ne,"_").concat(ie+1),data:{breakRemoveOn:I,wrapSchema:S,insertAdjacent:"afterEnd",schema:w}})]},ie)})]})})},{displayName:"Grid.Row"}),V.Col=(0,K.observer)(function(U){var D=(0,y.useContext)(f),ne=D.cols,q=ne===void 0?[]:ne,J=t(),Y=J.showDivider,P=(0,K.useFieldSchema)(),w=(0,K.useField)(),ie=(0,$.dQ)(),G=ie.token,le=(0,L.useDesignable)(),xe=le.designable,_e=(0,y.useMemo)(function(){var Ae="";if(q!=null&&q.length){var Le,Te=(P==null||(Le=P["x-component-props"])===null||Le===void 0?void 0:Le.width)||100/q.length;Ae="calc(".concat(Te,"% - ").concat(G.marginBlock,"px *  ").concat((Y?q.length+1:0)/q.length,")")}return{width:Ae}},[q.length,P,Y,G.marginBlock]),Ee=(0,r.useDroppable)({id:w.address.toString(),data:{insertAdjacent:"beforeEnd",schema:P,wrapSchema:function(Le){return Le}},disabled:!xe}),ze=Ee.isOver,Se=Ee.setNodeRef,se=(0,y.useState)(!1),me=C()(se,2),pe=me[0],ee=me[1],ue=(0,y.useMemo)(function(){return ze?{background:"linear-gradient(to top,  ".concat(new A.C(G.colorSettings).setAlpha(.1).toHex8String()," 20%, transparent 20%)"),borderTopRightRadius:"10px",borderTopLeftRadius:"10px",height:"100%"}:{height:"100%"}},[pe,ze]);(0,r.useDndMonitor)({onDragStart:function(Le){xe&&ee(!0)},onDragMove:function(Le){},onDragOver:function(Le){},onDragEnd:function(Le){xe&&ee(!1)},onDragCancel:function(Le){xe&&ee(!1)}});var ge=(0,y.useMemo)(function(){return{cols:q,schema:P}},[q,P]),Ie=(0,y.useMemo)(function(){return i()(i()({},_e),ue)},[ue,_e]);return(0,b.jsx)(x.Provider,{value:ge,children:(0,b.jsx)("div",{ref:Se,style:Ie,className:h()("nb-grid-col",U.className),children:U.children})})},{displayName:"Grid.Col"}),V.wrap=function(U){return{type:"void","x-component":"Grid.Row",properties:c()({},(0,v.uid)(),{type:"void","x-component":"Grid.Col",properties:c()({},U.name||(0,v.uid)(),U)})}}},58812:function(He,ae,e){"use strict";e.d(ae,{B:function(){return v}});var Z=e(5574),c=e.n(Z),k=e(55241),i=e(67294),g=e(85893),C=function(h){if(h){var M=document.createRange();M.selectNodeContents(h);var n=M.getBoundingClientRect().width;return n}},A={overflow:"hidden",overflowWrap:"break-word",textOverflow:"ellipsis",whiteSpace:"nowrap",wordBreak:"break-all"},r=function(h){if(!h)return!1;var M=C(h),n=h.offsetWidth;return M>n},K={width:300,overflow:"auto",maxHeight:400},v=(0,i.forwardRef)(function(j,h){var M=(0,i.useState)(!1),n=c()(M,2),y=n[0],L=n[1],o=(0,i.useState)(!1),a=c()(o,2),R=a[0],E=a[1],$=(0,i.useRef)();(0,i.useImperativeHandle)(h,function(){return{setPopoverVisible:E}},[]);var Q=(0,i.useCallback)(function(p){var b=p.target,f=r($.current);f&&L(b.scrollWidth>=b.clientWidth)},[]),z=(0,i.useMemo)(function(){return j.ellipsis?(0,g.jsx)("div",{ref:$,role:j.role,style:A,onMouseEnter:Q,children:j.children}):j.children},[Q,j.children,j.ellipsis,j.role]);return!j.ellipsis||!y?z:(0,g.jsx)(k.Z,{open:y&&R,onOpenChange:function(b){E(y&&b)},content:(0,g.jsx)("div",{style:K,children:j.popoverContent||j.children}),children:z})});v.displayName="EllipsisWithTooltip"},28144:function(He,ae,e){"use strict";e.d(ae,{II:function(){return v},mX:function(){return r.i}});var Z=e(97857),c=e.n(Z),k=e(3407),i=e(80844),g=e(69677),C=e(67294),A=e(54530),r=e(95545),K=e(85893),v=Object.assign((0,i.connect)(g.Z,(0,i.mapProps)(function(h,M){return c()(c()({},h),{},{suffix:(0,K.jsx)("span",{children:M!=null&&M.loading||M!=null&&M.validating?(0,K.jsx)(k.Z,{}):h.suffix})})}),(0,i.mapReadPretty)(r.i.Input)),{TextArea:(0,i.connect)(g.Z.TextArea,(0,i.mapProps)(function(h,M){return c()({autoSize:{maxRows:10,minRows:3}},h)}),(0,i.mapReadPretty)(r.i.TextArea)),URL:(0,i.connect)(g.Z,(0,i.mapReadPretty)(r.i.URL)),JSON:(0,i.connect)(A.P,(0,i.mapReadPretty)(r.i.JSON)),ReadPretty:r.i.Input,Preview:r.i.Preview});v.displayName="Input";var j=null},54530:function(He,ae,e){"use strict";e.d(ae,{P:function(){return R}});var Z=e(97857),c=e.n(Z),k=e(5574),i=e.n(k),g=e(13769),C=e.n(g),A=e(68400),r=e.n(A),K=e(97133),v=e(80844),j=e(69677),h=e(11142),M=e.n(h),n=e(67294),y=e(85893),L=["value","onChange","space","json5"],o,a=(0,K.css)(o||(o=r()([`
  font-size: 80%;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
`]))),R=n.forwardRef(function(E,$){var Q=E.value,z=E.onChange,p=E.space,b=p===void 0?2:p,f=E.json5,x=f===void 0?!1:f,m=C()(E,L),F=x?M():JSON,I=(0,v.useField)(),d=(0,n.useState)(""),u=i()(d,2),l=u[0],S=u[1];return(0,n.useEffect)(function(){try{if(Q!=null)if(typeof Q=="string")try{F.parse(Q),S(Q)}catch{S(F.stringify(Q,null,b))}else S(F.stringify(Q,null,b));else S(void 0)}catch{}},[b,Q]),(0,y.jsx)(j.Z.TextArea,c()(c()({},m),{},{className:(0,K.cx)(a,m.className),ref:$,value:l,onChange:function(O){S(O.target.value);try{var N=O.target.value.trim()!==""?F.parse(O.target.value):null;O.target.value.trim()!==""&&F.parse(O.target.value),I.setFeedback({})}catch(t){I.setFeedback({type:"error",code:"JSONSyntaxError",messages:[t.message]})}},onBlur:function(O){try{var N=O.target.value.trim()!==""?F.parse(O.target.value):null;I.setFeedback({}),z==null||z(N)}catch(t){I.setFeedback({type:"error",code:"JSONSyntaxError",messages:[t.message]})}}}))});R.displayName="Json"},95545:function(He,ae,e){"use strict";e.d(ae,{i:function(){return Q}});var Z=e(68400),c=e.n(Z),k=e(97857),i=e.n(k),g=e(52677),C=e.n(g),A=e(97133),r=e(65078),K=e(80844),v=e(56595),j=e(93967),h=e.n(j),M=e(96486),n=e.n(M),y=e(67294),L=e(25145),o=e(84577),a=e(58812),R=e(27754),E=e(85893),$,Q=function(){return null};Q.Input=function(u){var l=(0,r.F)("description-input",u),S=(0,o.eJ)(),H=(0,y.useMemo)(function(){return u.value&&C()(u.value)==="object"?JSON.stringify(u.value):S(u.value)},[u.value]);return(0,E.jsxs)("div",{className:h()(l,u.className),style:i()({overflowWrap:"break-word",whiteSpace:"normal"},u.style),children:[u.addonBefore,u.prefix,u.ellipsis?(0,E.jsx)(a.B,{ellipsis:u.ellipsis,children:H}):H,u.suffix,u.addonAfter]})};var z=n().memoize(function(u){return{__html:(0,R.g)(u).split(`
`).join("<br/>")}}),p={lineHeight:"inherit"},b=function(l){return(0,E.jsx)("div",{style:p,dangerouslySetInnerHTML:z(l)})};Q.TextArea=function(u){var l=(0,r.F)("description-textarea",u),S=(0,o.eJ)(),H=u.autop,O=H===void 0?!0:H,N=u.ellipsis,t=u.text,B=(0,y.useMemo)(function(){var X,V=S((X=u.value)!==null&&X!==void 0?X:"");return N?(0,E.jsx)(a.B,{ellipsis:N,popoverContent:O?b(V):V,children:t||V}):O?b(V):V},[O,N,u.value,t]);return(0,E.jsxs)("div",{className:h()(l,u.className),style:i()({overflowWrap:"break-word",whiteSpace:"normal"},u.style),children:[u.addonBefore,u.prefix,B,u.suffix,u.addonAfter]})};var f=n().memoize(function(u){var l=document.createElement("div");l.innerHTML=u;var S=l.innerText;return(S==null?void 0:S.replace(/[\n\r]/g,""))||""}),x={lineHeight:"1.42"};Q.Html=function(u){var l=(0,r.F)("description-textarea",u),S=(0,o.eJ)(),H=(0,y.useMemo)(function(){var O,N=S((O=u.value)!==null&&O!==void 0?O:""),t=u.autop,B=t===void 0?!0:t,X=u.ellipsis,V=(0,E.jsx)("div",{style:x,dangerouslySetInnerHTML:{__html:N}}),U=f(N);return X?(0,E.jsx)(a.B,{ellipsis:X,popoverContent:B?V:N,children:U}):B?V:N},[u.value]);return(0,E.jsxs)("div",{className:h()(l,u.className),style:i()({overflowWrap:"break-word",whiteSpace:"normal"},u.style),children:[u.addonBefore,u.prefix,H,u.suffix,u.addonAfter]})};var m={textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",display:"block"};function F(u){if(!u||u.includes("X-Amz-Content-Sha256"))return u;var l=u.split("/"),S=l.pop();l.push(encodeURIComponent(S));var H=l.join("/");return H}Q.URL=function(u){var l=(0,r.F)("description-url",u),S=u.value&&(0,E.jsx)("a",{style:u.ellipsis?m:void 0,target:"_blank",rel:"noopener noreferrer",href:F(u.value),children:u.value});return(0,E.jsxs)("div",{className:h()(l,u.className),style:i()({whiteSpace:"normal"},u.style),children:[u.addonBefore,u.prefix,S,u.suffix,u.addonAfter]})};var I={small:24,middle:48,large:72,oversized:120};Q.Preview=function(l){var S,H,O=(0,K.useFieldSchema)(),N=((S=O["x-component-props"])===null||S===void 0?void 0:S.size)||"small",t=((H=O["x-component-props"])===null||H===void 0?void 0:H.objectFit)||"cover";return l.value?(0,E.jsx)(v.Z,{style:["small","middle","large","oversized"].includes(N)?{width:I[N],height:I[N],objectFit:t}:{},src:l.value}):l.value};var d=(0,A.css)($||($=c()([`
  margin-bottom: 0;
  line-height: 1.5;
  font-size: 90%;
`])));Q.JSON=function(u){var l=(0,r.F)("json",u),S=(0,y.useMemo)(function(){var O;return u.value!=null?JSON.stringify(u.value,null,(O=u.space)!==null&&O!==void 0?O:2):""},[u.space,u.value]),H=(0,E.jsx)("pre",{className:(0,A.cx)(l,u.className,d),style:u.style,children:S});return u.ellipsis?(0,E.jsx)(a.B,{ellipsis:u.ellipsis,popoverContent:H,children:S}):H},Q.Input=(0,L.u)(Q.Input),Q.TextArea=(0,L.u)(Q.TextArea),Q.Html=(0,L.u)(Q.Html),Q.Preview=(0,L.u)(Q.Preview),Q.JSON=(0,L.u)(Q.JSON)},95775:function(He,ae,e){"use strict";e.d(ae,{BQ:function(){return i.B},II:function(){return Z.II},Ph:function(){return k.P},gs:function(){return g.g},iV:function(){return c.i},mX:function(){return Z.mX}});var Z=e(28144),c=e(95545),k=e(54530),i=e(58812),g=e(27754)},27754:function(He,ae,e){"use strict";e.d(ae,{g:function(){return Z}});function Z(c){var k=document.createElement("div");k.textContent!=null?k.textContent=c:k.innerText=c;var i=k.innerHTML;return k=null,i}},71343:function(He,ae,e){"use strict";e.d(ae,{U:function(){return Te},y:function(){return je}});var Z=e(97857),c=e.n(Z),k=e(3407),i=e(80844),g=e(69677),C=e(57953),A=e(67294),r=e(69962),K=e(95775),v=e(15009),j=e.n(v),h=e(99289),M=e.n(h),n=e(5574),y=e.n(n),L=e(42075),o=e(15867),a=e(9361),R=e(93967),E=e.n(R),$=e(26793),Q=e(62954),z=e(94804),p=e(15503),b=e(54885),f=e(64910),x=e(7840),m=e(18686),F=e(94516),I=e(88969),d=e(90297),u=e(28561),l=e(85893),S=function(){var re=(0,i.useField)(),T=(0,$.$)(),ce=T.t;return(0,l.jsxs)(d.aN,{children:[(0,l.jsx)(d.r2,{title:ce("Edit markdown"),onClick:function(){re.editable=!0}}),(0,l.jsx)(d.cK,{}),(0,l.jsx)(u.q,{}),(0,l.jsx)(d.Z5,{}),(0,l.jsx)(d.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}})]})},H=e(19632),O=e.n(H),N=e(12444),t=e.n(N),B=e(72004),X=e.n(B),V=e(25098),U=e.n(V),D=e(31996),ne=e.n(D),q=e(26037),J=e.n(q),Y=e(12665),P=e.n(Y),w=e(9783),ie=e.n(w),G=e(51271),le=e(20745),xe=function(fe){ne()(T,fe);var re=J()(T);function T(){var ce;return t()(this,T),ce=re.call(this),ie()(U()(ce),"root",void 0),ce.attachShadow({mode:"open"}),ce.root=null,ce}return X()(T,[{key:"getProps",value:function(be){var oe=this,Re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return O()(be).filter(function(Ze){return Ze.name!=="style"}).map(function(Ze){return oe.convert(Re,Ze.name,Ze.value)}).reduce(function(Ze,We){return c()(c()({},Ze),{},ie()({},We.name,We.value))},{})}},{key:"convert",value:function(be,oe,Re){var Ze=Object.keys(be).find(function(tt){return tt.toLowerCase()==oe}),We=Re;return Re==="true"||Re==="false"?We=Re=="true":!isNaN(Re)&&Re!==""?We=+Re:/^{.*}/.exec(Re)&&(We=JSON.parse(Re)),{name:Ze||oe,value:We}}},{key:"connectedCallback",value:function(){var be=c()({},this.getProps(this.attributes));this.root=(0,le.createRoot)(this.shadowRoot),this.root.render((0,l.jsx)(G.Z,c()({},be)))}},{key:"disconnectedCallback",value:function(){this.root.unmount()}}]),T}(P()(HTMLElement));function _e(){customElements.get("qr-code")||customElements.define("qr-code",xe)}var Ee=e(10274),ze=e(46917),Se=(0,ze.l6)("nb-markdown",function(fe,re){var T=re.isDarkTheme,ce=fe.componentCls,be=new Ee.C(fe.colorFillAlter).onBackground(fe.colorBgContainer).toHexShortString(),oe={lineHeight:"inherit","&.nb-markdown-default":{"pre code.hljs":{display:"block",overflowX:"auto",padding:"1em"},"code.hljs":{padding:"3px 5px"},":not(pre) code":{padding:"2px 5px",color:"#d56161",background:fe.colorFillQuaternary,border:"1px solid ".concat(fe.colorBorder),borderRadius:fe.borderRadiusSM},blockquote:{borderLeft:"4px solid #ccc",paddingLeft:"20px",marginLeft:"0",color:"#666",fontStyle:"italic"},img:{maxWidth:"100%"},".hljs":{background:"#f8f8f8",color:"#444"},".hljs-comment":{color:"#697070"},".hljs-punctuation,.hljs-tag":{color:"#444a"},".hljs-tag .hljs-attr,.hljs-tag .hljs-name":{color:"#444"},".hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-name,.hljs-selector-tag":{fontWeight:700},".hljs-deletion,.hljs-number,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type":{color:"#800"},".hljs-section,.hljs-title":{color:"#800",fontWeight:700},".hljs-link,.hljs-operator,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable":{color:"#ab5656"},".hljs-literal":{color:"#695"},".hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code":{color:"#397300"},".hljs-meta":{color:"#1f7199"},".hljs-meta .hljs-string":{color:"#38a"},".hljs-emphasis":{fontStyle:"italic"},".hljs-strong":{fontWeight:700}},"&.nb-markdown-table":{table:{borderCollapse:"collapse",width:"100%",fontFamily:"Arial, sans-serif",marginBottom:"1.5rem"},"th, td":{borderBottom:"1px solid ".concat(fe.colorBorderSecondary),padding:"".concat(fe.paddingContentVertical,"px ").concat(fe.paddingContentHorizontal,"px"),textAlign:"left"},th:{backgroundColor:be,fontWeight:"bold",color:fe.colorText},"tr:hover":{backgroundColor:fe.colorFillTertiary},"tr:last-child td":{borderBottom:"none"},"tr:first-child th":{borderTop:"none"}}},Re={"&.nb-markdown-default":{"pre code.hljs":{display:"block",overflowX:"auto",padding:"1em"},"code.hljs":{padding:"3px 5px"},":not(pre) code":{padding:"2px 5px",color:"#d56161",background:fe.colorFillQuaternary,border:"1px solid ".concat(fe.colorBorder),borderRadius:fe.borderRadiusSM},".hljs":{color:"#adbac7",background:"#22272e"},".hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_":{color:"#f47067"},".hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_":{color:"#dcbdfb"},".hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable":{color:"#6cb6ff"},".hljs-meta .hljs-string,.hljs-regexp,.hljs-string":{color:"#96d0ff"},".hljs-built_in,.hljs-symbol":{color:"#f69d50"},".hljs-code,.hljs-comment,.hljs-formula":{color:"#768390"},".hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag":{color:"#8ddb8c"},".hljs-subst":{color:"#adbac7"},".hljs-section":{color:"#316dca",fontWeight:700},".hljs-bullet":{color:"#eac55f"},".hljs-emphasis":{color:"#adbac7",fontStyle:"italic"},".hljs-strong":{color:"#adbac7",fontWeight:700},".hljs-addition":{color:"#b4f1b4",backgroundColor:"#1b4721"},".hljs-deletion":{color:"#ffd8d3",backgroundColor:"#78191b"}},"&.nb-markdown-table":{table:{borderCollapse:"collapse",width:"100%",fontFamily:"Arial, sans-serif",marginBottom:"1.5rem"},"th, td":{borderBottom:"1px solid ".concat(fe.colorBorderSecondary),padding:"".concat(fe.paddingContentVertical,"px ").concat(fe.paddingContentHorizontal,"px"),textAlign:"left"},th:{backgroundColor:be,fontWeight:"bold",color:fe.colorText},"tr:hover":{backgroundColor:fe.colorFillTertiary},"tr:last-child td":{borderBottom:"none"},"tr:first-child th":{borderTop:"none"}}};return ie()({},ce,c()({lineHeight:fe.lineHeight,"& > *:last-child":{marginBottom:"0"},".ant-description-textarea, .ant-description-input":{lineHeight:fe.lineHeight},".field-interface-datetime":{minWidth:"100px"}},T?Re:oe))}),se=e(96486),me=e.n(se),pe=e(57930),ee=me().memoize(function(){var fe=M()(j()().mark(function re(T){var ce;return j()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(T){oe.next=2;break}return oe.abrupt("return",T);case 2:return oe.next=4,pe("imported_tqbe1e_component",Promise.all([e.e(9517),e.e(5493),e.e(4701),e.e(2698),e.e(6599),e.e(2300),e.e(5154),e.e(7531),e.e(7015),e.e(6094),e.e(6680),e.e(8370),e.e(5721),e.e(501)]).then(e.bind(e,80501)));case 4:return ce=oe.sent,oe.abrupt("return",ce.default.render(T));case 6:case"end":return oe.stop()}},re)}));return function(re){return fe.apply(this,arguments)}}());function ue(fe){var re=(0,A.useState)(""),T=y()(re,2),ce=T[0],be=T[1],oe=(0,A.useState)(!0),Re=y()(oe,2),Ze=Re[0],We=Re[1];return(0,A.useEffect)(function(){We(!0),ee(fe).then(function(tt){be(tt),We(!1)}).catch(function(tt){return console.log(tt)})},[fe]),{html:ce,loading:Ze}}function ge(fe){var re=fe,T=document.createElement("div");T.innerHTML=re;var ce=T.innerText;return T=null,(ce==null?void 0:ce.replace(/[\n\r]/g,""))||""}var Ie=function(re){var T=re.scope,ce=(0,$.$)(),be=ce.t,oe=ce.i18n,Re=(0,A.useState)(re.defaultValue),Ze=y()(Re,2),We=Ze[0],tt=Ze[1],St=(0,A.useRef)(null),Tt=(0,A.useState)([]),lt=y()(Tt,2),ut=lt[0],nt=lt[1],Je=(0,A.useState)(null),hn=y()(Je,2),mn=hn[0],vn=hn[1];(0,A.useEffect)(function(){nt(T)},[T]),(0,A.useEffect)(function(){var fn,cn=St==null||(fn=St.current)===null||fn===void 0||(fn=fn.resizableTextArea)===null||fn===void 0?void 0:fn.textArea;mn&&cn&&cn.setSelectionRange(mn,mn)},[mn]);var an=(0,A.useCallback)(function(fn){var cn,_n=fn.filter(function(An){return!!An.trim()}),zt=St.current,xn=zt==null||(cn=zt.resizableTextArea)===null||cn===void 0?void 0:cn.textArea;if(!(!xn||!_n)){zt.focus();var Qt="{{".concat(fn.join("."),"}}"),Et=xn.selectionStart||0,en=We.substring(0,Et)+Qt+We.substring(Et,We.length),Rn=Et+Qt.length;tt(en),vn(Rn)}},[We]);return(0,l.jsxs)("div",{className:"mb-markdown",style:{position:"relative",paddingTop:"20px"},children:[(0,l.jsx)(g.Z.TextArea,c()(c()({ref:St,autoSize:{minRows:3}},re),{},{value:We,onChange:function(cn){tt(cn.target.value)},style:{paddingBottom:"40px"}})),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{style:{marginLeft:".25em"},className:"ant-formily-item-extra",children:[be("Syntax references"),":"]}),(0,l.jsx)("a",{href:"https://".concat(oe.language==="zh-CN"?"docs-cn":"docs",".nocobase.com/handbook/template-handlebars"),target:"_blank",rel:"noreferrer",children:"Handlebars.js"})]}),(0,l.jsx)("div",{style:{position:"absolute",top:21,right:1},children:(0,l.jsx)(I.m,{options:ut,setOptions:nt,onInsert:an})}),(0,l.jsxs)(L.Z,{style:{position:"absolute",bottom:30,right:5},children:[(0,l.jsx)(o.ZP,{onClick:function(cn){var _n;(_n=re.onCancel)===null||_n===void 0||_n.call(re,cn)},children:be("Cancel")}),(0,l.jsx)(o.ZP,{type:"primary",onClick:function(){var cn;(cn=re.onSubmit)===null||cn===void 0||cn.call(re,We)},children:be("Save")})]})]})},Ae=function(){var re=a.Z.useToken(),T=re.token,ce=(0,m.hi)();if(ce)return ce-2*T.paddingLG},Le=(0,p.t)((0,i.observer)(function(fe){var re=(0,r.mg)(),T=re.isDarkTheme,ce=Se({isDarkTheme:T}),be=ce.componentCls,oe=ce.hashId,Re=fe.content,Ze=fe.className,We=(0,i.useField)(),tt=(0,i.useFieldSchema)(),St=(0,F.ng)(),Tt=St.dn,lt=fe.onSave,ut=fe.onCancel,nt=fe.form,Je=(0,z.oV)(),hn=(0,A.useState)(""),mn=y()(hn,2),vn=mn[0],an=mn[1],fn=(0,f.OQ)(),cn=(0,f.Kp)(),_n=(tt==null?void 0:tt["x-decorator-props"])||{},zt=_n.engine,xn=(0,A.useState)(!1),Qt=y()(xn,2),Et=Qt[0],en=Qt[1],Rn=(0,Q.eJW)();(0,A.useEffect)(function(){en(!0);var Zn=function(){var rr=M()(j()().mark(function mr(){return j()().wrap(function(Ft){for(;;)switch(Ft.prev=Ft.next){case 0:setTimeout(M()(j()().mark(function ct(){var Mt;return j()().wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.next=2,(0,x.I9)(zt,Re,fn,cn,ee);case 2:Mt=Rt.sent,an(Mt);case 4:case"end":return Rt.stop()}},ct)}))),en(!1);case 2:case"end":return Ft.stop()}},mr)}));return function(){return rr.apply(this,arguments)}}();Zn()},[Re,fn,cn,zt]);var An=Ae(),Jn=(0,b.Y)({collectionField:{uiSchema:tt},form:nt,record:Je,uiSchema:tt,noDisabled:!0});return(0,A.useEffect)(function(){_e()},[]),Et?(0,l.jsx)(C.Z,{}):We!=null&&We.editable?(0,l.jsx)(Ie,c()(c()({scope:Jn},fe),{},{className:!0,defaultValue:Re,onCancel:function(){We.editable=!1,ut==null||ut()},onSubmit:function(){var Zn=M()(j()().mark(function rr(mr){var Er;return j()().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:We.editable=!1,(Er=tt["x-component-props"])!==null&&Er!==void 0||(tt["x-component-props"]={}),tt["x-component-props"].content=mr,We.componentProps.content=mr,lt==null||lt(tt),Tt.emit("patch",{schema:{"x-uid":tt["x-uid"],"x-component-props":{content:mr}}});case 6:case"end":return ct.stop()}},rr)}));return function(rr){return Zn.apply(this,arguments)}}()})):(0,l.jsx)("div",{className:E()([be,oe,"nb-markdown nb-markdown-default nb-markdown-table",Ze]),style:c()(c()({},fe.style),{},{height:An||"100%",overflowY:An?"auto":"null"}),dangerouslySetInnerHTML:{__html:vn}})}),{displayName:"MarkdownVoid"});Le.Designer=S;var Te=(0,i.connect)(g.Z.TextArea,(0,i.mapProps)(function(fe,re){return c()(c()({autoSize:{maxRows:10,minRows:3}},fe),{},{suffix:(0,l.jsx)("span",{children:re!=null&&re.loading||re!=null&&re.validating?(0,l.jsx)(k.Z,{}):fe.suffix})})}),(0,i.mapReadPretty)(function(fe){return(0,l.jsx)(je,c()({},fe))})),je=function(re){var T=(0,r.mg)(),ce=T.isDarkTheme,be=Se({isDarkTheme:ce}),oe=be.wrapSSR,Re=be.hashId,Ze=be.componentCls,We=ue(re.value),tt=We.html,St=tt===void 0?"":tt,Tt=We.loading,lt=(0,A.useMemo)(function(){return ge(St)},[St]);if(Tt)return oe((0,l.jsx)(C.Z,{}));var ut=(0,l.jsx)("div",{className:"".concat(Re," ").concat(Ze," nb-markdown nb-markdown-default nb-markdown-table"),dangerouslySetInnerHTML:{__html:St}});return oe((0,l.jsx)(K.iV.TextArea,c()(c()({},re),{},{autop:!1,text:lt,value:ut})))};Te.Void=Le;var Pe=null},38342:function(He,ae,e){"use strict";e.d(ae,{y:function(){return i}});var Z=e(9783),c=e.n(Z),k=e(50204),i=(0,k.l)("nb-menu-item",function(g){var C=g.componentCls;return c()({},C,{paddingLeft:"".concat(g.padding,"px !important"),paddingRight:"".concat(g.padding,"px !important")})})},48375:function(He,ae,e){"use strict";e.d(ae,{v:function(){return c}});var Z=e(26793),c=function(){return(0,Z.$)("lm-desktop-routes")}},97855:function(He,ae,e){"use strict";e.d(ae,{K:function(){return A},M:function(){return r}});var Z=e(52310),c=e(15867),k=e(67294),i=e(68230),g=e(534),C=e(85893),A=function(){var v=(0,g.XC)(),j=v.setVisible,h=(0,k.useCallback)(function(){j==null||j(!1)},[j]);return{goBack:h}},r=function(){var v=(0,i.d)(),j=v.token,h=A(),M=h.goBack,n=32,y=(0,k.useMemo)(function(){return{width:"auto",height:"auto",lineHeight:1,padding:j.paddingXS,marginRight:n-j.paddingXS}},[j.paddingXS]);return(0,C.jsx)(c.ZP,{"aria-label":"back-button",type:"text",icon:(0,C.jsx)(Z.Z,{}),style:y,onClick:M})}},75585:function(He,ae,e){"use strict";e.d(ae,{d9:function(){return ne},OA:function(){return O},Ao:function(){return l},Zm:function(){return P}});var Z=e(61227),c=e.n(Z),k=e(15009),i=e.n(k),g=e(99289),C=e.n(g),A=e(97857),r=e.n(A),K=e(5574),v=e.n(K),j=e(80844),h=e(84327),M=e(59720),n=e(96486),y=e.n(n),L=e(67294),o=e(26793),a=e(89250),R=e(12174),E=e(87180),$=e(39742),Q=e(54724),z=e(70993),p=e(47204),b=e(14984),f={},x=function(xe){return f[xe]||(f[xe]=(0,h.uid)())},m=function(xe){return delete f[xe]},F=e(22891),I=e(79543),d=e(97505),u=e(85893),l=L.createContext(null),S=L.createContext(null),H=L.createContext(null);l.displayName="PopupVisibleProviderContext",S.displayName="PopupParamsProviderContext",H.displayName="AllPopupsPropsProviderContext";var O=L.memo(function(le){var xe=le.children,_e=le.visible,Ee=le.setVisible,ze=(0,L.useMemo)(function(){return{visible:_e,setVisible:Ee}},[_e,Ee]);return(0,u.jsx)(l.Provider,{value:ze,children:xe})});O.displayName="PopupVisibleProvider";var N=L.memo(function(le){var xe=le.children,_e=le.popupuid,Ee=(0,F.ES)(),ze=Ee.closePopup,Se=(0,L.useState)(!0),se=v()(Se,2),me=se[0],pe=se[1],ee=(0,L.useCallback)(function(ue){ue||(pe(!1),setTimeout(function(){ze(),m(_e)},300))},[ze,_e]);return(0,u.jsx)(O,{visible:me,setVisible:ee,children:xe})}),t=function(xe){var _e=(0,L.useMemo)(function(){return{params:xe.params,context:xe.context,currentLevel:xe.currentLevel}},[xe.params,xe.context,xe.currentLevel]);return(0,u.jsx)(S.Provider,{value:_e,children:xe.children})},B=function(xe){var _e=xe.children,Ee=P(),ze=Ee.params,Se=(0,F.ES)(),se=Se.changeTab,me=(0,L.useCallback)(function(ue){se(ue)},[se]),pe=(0,b.a)(),ee=pe.isPopupVisibleControlledByURL;return ee()?(0,u.jsx)(p.c,{activeKey:ze==null?void 0:ze.tab,onChange:me,children:_e}):(0,u.jsx)(u.Fragment,{children:_e})},X={display:"none"},V=function(xe){var _e=xe.params,Ee=xe.context,ze=xe.currentLevel,Se=xe.children,se=r()({},(0,F.XQ)(_e.popupuid));return(0,L.useEffect)(function(){return(0,I.fO)(ze,!0),function(){(0,I.Tt)(ze)}},[ze]),Ee||(Ee=y().omitBy({dataSource:se.dataSource,collection:se.collection,association:se.association},y().isNil)),y().isEmpty(Ee)?(0,u.jsx)(t,{params:_e,context:Ee,currentLevel:ze,children:(0,u.jsx)(N,{popupuid:_e.popupuid,children:(0,u.jsx)("div",{style:X,children:Se})})}):(0,u.jsx)(t,{params:_e,context:Ee,currentLevel:ze,children:(0,u.jsx)(E.KY,{dataSource:Ee.dataSource,collection:_e.collection||Ee.collection,association:Ee.association,sourceId:_e.sourceid,filterByTk:G(_e.filterbytk),record:se.record,parentRecord:se.parentRecord,action:"get",children:(0,u.jsx)($.uz,{recordRequest:se.service,children:(0,u.jsx)(B,{children:(0,u.jsx)(N,{popupuid:_e.popupuid,children:(0,u.jsx)("div",{style:X,children:Se})})})})})})},U=function(xe){var _e=xe.childSchema,Ee=xe.props,ze=xe.parentSchema,Se=xe.getPopupSchema,se=Se===void 0?function(Ae){return y().get(Ae.properties,Object.keys(Ae.properties)[0])}:Se,me=Ee.params,pe=Ee.context,ee=Ee.currentLevel,ue={type:"void","x-component":"PagePopupsItemProvider","x-component-props":{params:me,context:pe,currentLevel:ee},properties:{popupAction:_e}},ge=x(me.popupuid);if(ze.properties){var Ie=se(ze);y().isEmpty(y().get(Ie,"properties.".concat(ge)))&&y().set(Ie,"properties.".concat(ge),ue)}},D=function(xe){var _e=(0,j.useFieldSchema)(),Ee=(0,a.useLocation)(),ze=xe.paramsList||(0,F.ld)(J(Ee)),Se=q(),se=Se.requestSchema,me=(0,L.useState)(null),pe=v()(me,2),ee=pe[0],ue=pe[1],ge=(0,L.useRef)([]),Ie=(0,F.ES)(),Ae=Ie.savePopupSchemaToSchema,Le=Ie.getPopupSchemaFromSchema;(0,L.useEffect)(function(){var je=function(){var Pe=C()(i()().mark(function fe(){var re,T,ce,be,oe;return i()().wrap(function(Ze){for(;;)switch(Ze.prev=Ze.next){case 0:return re=ze.map(function(We){var tt;return((tt=(0,F.XQ)(We.popupuid))===null||tt===void 0?void 0:tt.schema)||ie(We.popupuid,_e==null?void 0:_e.root)||se(We.popupuid)}),Ze.next=3,Promise.all(re);case 3:for(T=Ze.sent,ce=T.map(function(We,tt){if(y().isEmpty(We))return w();var St=ze[tt];if(St.puid){var Tt=ie(St.puid,_e==null?void 0:_e.root);Tt&&Ae(y().omit(Tt,"parent"),We)}var lt=y().cloneDeepWith(y().omit(We,"parent"),function(ut){if((ut==null?void 0:ut["x-component"])==="Tabs")return ut});return lt["x-read-pretty"]=!0,lt}),ge.current=ce.map(function(We,tt,St){for(var Tt=(0,d.S$)(We),lt=!1,ut=tt+1;ut<St.length;ut++)if(Y(St[ut])){lt=!0;break}return{params:ze[tt],context:Tt,hidden:lt,currentLevel:tt+1,isSubPage:Y(We)}}),be=ce[0],oe=1;oe<ce.length;oe++)U({childSchema:ce[oe],props:ge.current[oe],parentSchema:ce[oe-1],getPopupSchema:function(tt){return Le(tt)||y().get(tt.properties,Object.keys(tt.properties)[0])}});ue(be);case 9:case"end":return Ze.stop()}},fe)}));return function(){return Pe.apply(this,arguments)}}();je()},[_e,Le,ze,se,Ae]);var Te=(0,L.useMemo)(function(){return{PagePopupsItemProvider:V}},[]);return ee?(0,u.jsx)(H.Provider,{value:ge.current,children:(0,u.jsx)(V,{params:ge.current[0].params,context:ge.current[0].context,currentLevel:1,children:(0,u.jsx)(z.n6,{components:Te,schema:ee,onlyRenderProperties:!0})})}):null},ne=function(xe){var _e=(0,Q.Du)(),Ee=_e.active;return Ee?(0,u.jsx)(D,r()({},xe)):null},q=function(){var xe=(0,R.LY)(),_e=(0,L.useCallback)(function(){var Ee=C()(i()().mark(function ze(Se){var se,me;return i()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.prev=0,ee.next=3,xe.request({url:"/uiSchemas:getJsonSchema/".concat(Se)});case 3:return me=ee.sent,ee.abrupt("return",(se=me.data)===null||se===void 0?void 0:se.data);case 7:return ee.prev=7,ee.t0=ee.catch(0),console.error(ee.t0),ee.abrupt("return",null);case 11:case"end":return ee.stop()}},ze,null,[[0,7]])}));return function(ze){return Ee.apply(this,arguments)}}(),[]);return{requestSchema:_e}},J=function(xe){var _e=xe.pathname.split("/popups/"),Ee=c()(_e),ze=Ee.slice(1);return ze.join("/popups/")};function Y(le){var xe=y().get(le,"x-component-props.openMode");return xe==="page"}var P=function(){var xe=L.useContext(S)||{},_e=xe.currentLevel,Ee=L.useContext(H);return(Ee==null?void 0:Ee[_e-1])||{}};function w(){return{_isJSONSchemaObject:!0,version:"2.0",type:"void",title:'{{ t("Error message") }}',"x-action":"view","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:view","x-component":"Action.Link","x-component-props":{openMode:"drawer"},"x-action-context":{},"x-decorator":"ACLActionProvider","x-designer-props":{linkageAction:!0},properties:{drawer:{_isJSONSchemaObject:!0,version:"2.0",type:"void",title:"Error message","x-component":"Action.Container","x-component-props":{className:"nb-action-popup",level:99},properties:{tabs:{_isJSONSchemaObject:!0,version:"2.0",type:"void","x-component":"Tabs","x-component-props":{},"x-initializer":"popup:addTab",properties:{tab1:{_isJSONSchemaObject:!0,version:"2.0",type:"void",title:"404","x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{},properties:{grid:{_isJSONSchemaObject:!0,version:"2.0",type:"void","x-component":function(){var xe=(0,o.$)(),_e=xe.t;return(0,u.jsx)(M.ZP,{status:"404",title:"404",subTitle:_e("Sorry, the page you visited does not exist.")})},"x-uid":(0,h.uid)(),"x-async":!1,"x-index":1}},"x-uid":(0,h.uid)(),"x-async":!1,"x-index":1}},"x-uid":(0,h.uid)(),"x-async":!1,"x-index":1}},"x-uid":(0,h.uid)(),"x-async":!1,"x-index":1}},name:(0,h.uid)(),"x-uid":(0,h.uid)(),"x-async":!1,"x-index":2,"x-read-pretty":!0}}function ie(le,xe){var _e,Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{value:null};return Ee=Ee||{value:null},xe==null||(_e=xe.mapProperties)===null||_e===void 0||_e.call(xe,function(ze){ze["x-uid"]===le?Ee.value=ze:ie(le,ze,Ee)}),Ee.value}function G(le){var xe;if(!(le!=null&&(xe=le.includes)!==null&&xe!==void 0&&xe.call(le,"=")))return le;var _e=decodeURIComponent(le),Ee=_e.split("&"),ze=Ee.reduce(function(Se,se){var me=se.split("="),pe=v()(me,2),ee=pe[0],ue=pe[1];return Se[ee]=ue,Se},{});return ze}},14984:function(He,ae,e){"use strict";e.d(ae,{D:function(){return g},a:function(){return C}});var Z=e(67294),c=e(85782),k=e(85893),i=Z.createContext({enableURL:!0}),g=function(r){var K=r.enableURL,v=K===void 0?!0:K,j=(0,Z.useMemo)(function(){return{enableURL:v}},[v]);return(0,k.jsx)(i.Provider,{value:j,children:r.children})},C=function(){var r=Z.useContext(i),K=r.enableURL,v=(0,c.Bb)(),j=(0,Z.useCallback)(function(){var h=window.location.pathname,M=window.location.hash,n=(h==null?void 0:h.includes("/mobile/"))||(M==null?void 0:M.includes("/mobile/")),y=h==null?void 0:h.includes("/m/"),L=h==null?void 0:h.includes("/admin/");return(L||y)&&!n&&K&&!v},[K,v]);return{isPopupVisibleControlledByURL:j}}},22891:function(He,ae,e){"use strict";e.d(ae,{ES:function(){return f},NC:function(){return b},Q3:function(){return m},XQ:function(){return a},Yd:function(){return Q},dJ:function(){return z},hK:function(){return R},ld:function(){return p}});var Z=e(97857),c=e.n(Z),k=e(61227),i=e.n(k),g=e(80844),C=e(96486),A=e.n(C),r=e(67294),K=e(68091),v=e(1892),j=e(94804),h=e(25717),M=e(75585),n=e(14984),y=e(79543),L=e(97505),o={},a=function(u){return o[u]},R=function(u,l){o[u]=l},E=function(u){delete o[u]},$={},Q=function(u){return $[u]},z=function(u,l){$[u]=l},p=A().memoize(function(d){var u=d.split("/popups/");return u.filter(Boolean).map(function(l){for(var S=l.split("/").filter(Boolean),H=i()(S),O=H[0],N=H.slice(1),t={},B=0;B<N.length;B+=2)t[N[B]]=I(N[B+1]);return c()({popupuid:O},t)})}),b=function(u){var l=u.popupuid,S=u.tab,H=u.filterbytk,O=u.sourceid,N=u.collection,t=u.puid,B=[l,t&&"puid",t,N&&"collection",N,H&&"filterbytk",H,O&&"sourceid",O,S&&"tab",S].filter(Boolean);return"/popups/".concat(B.map(function(X){return F(X)}).join("/"))},f=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=(0,K.WO)(),S=(0,K.fj)(),H=(0,g.useFieldSchema)(),O=(0,j.FC)(),N=(0,j.oV)(),t=(0,j.RA)(),B=(0,j.Kx)(),X=(0,j.d9)(),V=(0,j.Xo)(),U=(0,r.useContext)(M.Ao)||{visible:!1,setVisible:A().noop},D=U.visible,ne=U.setVisible,q=(0,M.Zm)(),J=q.params,Y=q.currentLevel,P=Y===void 0?0:Y,w=(0,j.Pt)(),ie=w.getDataBlockRequest,G=(0,n.a)(),le=G.isPopupVisibleControlledByURL,xe=(0,r.useContext)(h.fW),_e=xe.setVisible,Ee=(0,L.z9)(),ze=Ee.updatePopupContext,Se=(0,M.Zm)(),se=(0,r.useCallback)(function(Pe){var fe;return(fe=Pe||(t==null?void 0:t.data))===null||fe===void 0?void 0:fe[X.getSourceKeyByAssociation(V)]},[t,V]),me=(0,j.xQ)(),pe=(0,v.bE)()||{},ee=u.setVisible||_e,ue=(0,r.useCallback)(function(Pe){var fe=Pe.tabKey,re=Pe.popupUid,T=Pe.recordData,ce=Pe.sourceId,be=Pe.collection,oe=Pe.puid,Re=X.getFilterByTK(V||B,T);return b({popupuid:re,puid:oe,collection:be,filterbytk:Re,sourceid:ce,tab:fe})},[V,X,B,O,t==null?void 0:t.data,V]),ge=(0,r.useCallback)(function(){var Pe={dataSource:O,collection:V||B==null?void 0:B.name,association:V};return A().omitBy(Pe,A().isNil)},[O,B,V]),Ie=(0,r.useCallback)(function(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=Pe.recordData,re=Pe.parentRecordData,T=Pe.collectionNameUsedInURL,ce=Pe.popupUidUsedInURL,be=Pe.customActionSchema;if(!le())return ee==null?void 0:ee(!0);var oe=be||H,Re=oe==null?void 0:oe["x-uid"],Ze=se(re);fe=fe||(N==null?void 0:N.data);var We=ue({popupUid:Re,recordData:fe,sourceId:Ze,collection:T,puid:ce}),tt=S.pathname;if(A().last(tt)==="/"&&(tt=tt.slice(0,-1)),R(Re,{schema:oe,record:new j.DI({isNew:!1,data:fe}),parentRecord:re?new j.DI({isNew:!1,data:re}):t,service:ie(),dataSource:O,collection:B==null?void 0:B.name,association:V,sourceId:Ze,tableBlockContext:c()(c()({},pe),{},{collection:B==null?void 0:B.name,blockData:me})}),ze(ge(),be),oe.properties){var St=P+1;if((0,y.sS)(St))return;l(m("".concat(tt).concat(We))),(0,y.fO)(St,!0)}else console.error(`[NocoBase] The popup schema is invalid, please check the schema: 
`.concat(JSON.stringify(oe,null,2)))},[V,X,B,O,H,ue,l,t,N,ie,S,le,se,ge,me,pe,P]),Ae=(0,r.useCallback)(function(){if(!le())return ee==null?void 0:ee(!1);l(m(x(S.pathname)),{replace:!0}),(0,y.Tt)(P),J!=null&&J.popupuid&&E(J.popupuid)},[le,ee,l,S==null?void 0:S.pathname,P,J==null?void 0:J.popupuid]),Le=(0,r.useCallback)(function(Pe){var fe=se(),re=ue({tabKey:Pe,popupUid:J==null?void 0:J.popupuid,recordData:N==null?void 0:N.data,sourceId:fe}),T=x(S.pathname);A().last(T)==="/"&&(T=T.slice(0,-1)),l("".concat(T).concat(re),{replace:!0})},[ue,l,J==null?void 0:J.popupuid,N==null?void 0:N.data,S]),Te=(0,r.useCallback)(function(Pe,fe){fe.__popup=Pe},[]),je=(0,r.useCallback)(function(Pe){return Pe.__popup},[]);return{openPopup:Ie,closePopup:Ae,savePopupSchemaToSchema:Te,getPopupSchemaFromSchema:je,context:Se,visibleWithURL:D,setVisibleWithURL:ne,popupParams:J,changeTab:Le,getPopupContext:ge}};function x(d){if(!d.includes("popups"))return d;var u=d.split("popups").slice(0,-1).join("popups");return u.endsWith("/")?u.slice(0,-1):u}function m(d){return"".concat(d).concat(window.location.search)}function F(d){var u=encodeURIComponent(d);return u==="popups"?window.btoa(d):u}function I(d){return d===window.btoa("popups")?"popups":decodeURIComponent(d)}},79543:function(He,ae,e){"use strict";e.d(ae,{Tt:function(){return i},fO:function(){return c},sS:function(){return k}});var Z={},c=function(C,A){Z[C]=A},k=function(C){var A;return(A=Z[C])!==null&&A!==void 0?A:!1},i=function(C){delete Z[C]}},97505:function(He,ae,e){"use strict";e.d(ae,{S$:function(){return v},ZQ:function(){return r},z9:function(){return K}});var Z=e(9783),c=e.n(Z),k=e(80844),i=e(96486),g=e.n(i),C=e(67294),A=e(94516),r="x-action-context",K=function(){var h=(0,k.useFieldSchema)(),M=(0,A.ng)(),n=M.dn,y=(0,C.useCallback)(function(L,o){var a=o||h,R=v(a);if(L=g().omitBy(L,g().isNil),!(g().isEqual(L,R)||R!=null&&R.doNotUpdateContext))return a[r]=L,n.emit("initializeActionContext",{schema:c()({"x-uid":a["x-uid"]},r,L)})},[h,n]);return{updatePopupContext:y}};function v(j){return j[r]}},40454:function(He,ae,e){"use strict";e.d(ae,{q:function(){return C}});var Z=e(97857),c=e.n(Z),k=e(55241),i=e(67294),g=e(85893),C=function(K){var v=(0,i.useRef)(null),j=(0,i.useCallback)(function(M){v.current=M.target},[]),h=(0,i.useCallback)(function(M){setTimeout(function(){var n;if(!M&&v.current!==null&&!A(v.current)){v.current=null;return}(n=K.onOpenChange)===null||n===void 0||n.call(K,M)})},[K]);return(0,g.jsx)("div",{className:"popover-with-stop-propagation",onClick:j,children:(0,g.jsx)(k.Z,c()(c()({},K),{},{onOpenChange:h}))})};function A(r){if(!r)return!1;for(;r;){var K;if((K=r.classList)!==null&&K!==void 0&&K.contains("popover-with-stop-propagation"))return!0;r=r.parentNode}return!1}},13101:function(He,ae,e){"use strict";e.d(ae,{M:function(){return r}});var Z=e(97857),c=e.n(Z),k=e(67294),i=e(80844),g=e(94804),C=e(20421),A=e(85893),r=(0,i.connect)(function(v){var j=(0,g.nE)();return(0,A.jsx)(C.gq.ReadPretty,c()(c()({},v),{},{value:j}))}),K=null},24581:function(He,ae,e){"use strict";e.d(ae,{zD:function(){return B},OD:function(){return G},lb:function(){return le},b7:function(){return S},sU:function(){return X},C$:function(){return F},cN:function(){return I},el:function(){return U},Xd:function(){return p},Il:function(){return m}});var Z=e(26733),c=e(80844),k=e(9783),i=e.n(k),g=e(5574),C=e.n(g),A=e(13769),r=e.n(A),K=e(97857),v=e.n(K),j=e(19632),h=e.n(j),M=e(84327),n=e(34041),y=e(96486),L=e(67294),o=e(78899),a=e(6145),R=e(57105),E=e(70993),$=e(84577),Q=e(76157),z=e(78472),p=function(_e){var Ee,ze,Se=(0,c.useFieldSchema)(),se=((Ee=Se["x-component-props"])===null||Ee===void 0||(Ee=Ee.field)===null||Ee===void 0||(Ee=Ee.uiSchema)===null||Ee===void 0||(Ee=Ee["x-component-props"])===null||Ee===void 0?void 0:Ee.fieldNames)||(Se==null||(ze=Se["x-component-props"])===null||ze===void 0?void 0:ze.fieldNames)||_e.fieldNames;return v()({label:"label",value:"value"},se)},b=e(84157),f=e(66309),x=e(85893),m=function(_e,Ee){var ze=(0,a.useCollectionManager_deprecated)(),Se=ze.getCollectionJoinField;if(_e){var se=Se("".concat(_e.target,".").concat(Ee));return se==null?void 0:se.uiSchema}},F=function(_e){var Ee=(0,b.getDefaultFormat)(_e),ze=(0,b.str2moment)(_e.value,_e),Se=ze&&ze.isValid()?ze.format(Ee):_e.value;return(0,M.isArr)(Se)?Se.join("~"):Se},I=function(_e,Ee){var ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,Se=arguments.length>3?arguments[3]:void 0,se=arguments.length>4?arguments[4]:void 0;if(se)return(0,x.jsx)(se,{value:Ee,collectionField:Se});if(Array.isArray(_e==null?void 0:_e.enum)&&Ee){var me=_e.enum.find(function(pe){return pe.value===Ee});return ze?L.createElement(f.Z,{color:me==null?void 0:me.color},me==null?void 0:me.label):me==null?void 0:me.label}switch(_e==null?void 0:_e["x-component"]){case"DatePicker":return F(v()(v()({},_e==null?void 0:_e["x-component-props"]),{},{value:Ee}));default:return Ee}},d=["onRowSelectionChange","rowKey"],u=["value","multiple","onChange","quickUpload","selectFile"],l=["multiple","onChange","selectedRows","setSelectedRows","options","collectionField"],S=(0,L.createContext)(null);S.displayName="RecordPickerContext";function H(xe){for(var _e=[],Ee=0;Ee<xe.length;Ee++){var ze=xe[Ee].children;Array.isArray(ze)&&_e.push.apply(_e,h()(H(ze))),_e.push(v()({},xe[Ee]))}return _e}var O=function(){var _e=(0,c.useField)(),Ee=(0,L.useContext)(S),ze=Ee.multiple,Se=Ee.options,se=Se===void 0?[]:Se,me=Ee.setSelectedRows,pe=Ee.selectedRows,ee=pe===void 0?[]:pe,ue=Ee.onChange,ge=(0,o.RP)(),Ie=ge.onRowSelectionChange,Ae=ge.rowKey,Le=Ae===void 0?"id":Ae,Te=r()(ge,d),je=(0,Q.XC)(),Pe=je.setVisible;return v()(v()({},Te),{},{rowKey:Le,rowSelection:{type:ze?"checkbox":"radio",selectedRowKeys:ee==null?void 0:ee.filter(function(fe){return se.every(function(re){return re[Le]!==fe[Le]})}).map(function(fe){return fe[Le]})},onRowSelectionChange:function(re,T){if(ze){var ce=H(_e.value)||[],be=ee||[],oe=(0,y.differenceBy)(be,ce,Le),Re=(0,y.unionBy)(oe,T,Le),Ze=Re.map(function(We){return We[Le]});me==null||me(Re),Ie==null||Ie(Ze,Re)}else me==null||me(T),Ie==null||Ie(re,T),ue((T==null?void 0:T[0])||null),Pe(!1)}})},N=function(){var _e=(0,Q.XC)(),Ee=_e.setVisible,ze=(0,L.useContext)(S),Se=ze.multiple,se=ze.selectedRows,me=ze.onChange,pe=ze.options,ee=ze.collectionField;return{onClick:function(){me(Se?(0,y.unionBy)(se,pe,(ee==null?void 0:ee.targetKey)||"id"):(se==null?void 0:se[0])||null),Ee(!1)}}},t=function(_e){var Ee=(0,c.useFieldSchema)(),ze=_e.association,Se=(0,a.useCollection_deprecated)(),se=Se.getField;return ze||se(Ee.name)},B=function(_e){var Ee=_e.value,ze=_e.multiple,Se=_e.onChange,se=_e.quickUpload,me=_e.selectFile,pe=r()(_e,u),ee=p(_e),ue=(0,L.useState)(!1),ge=C()(ue,2),Ie=ge[0],Ae=ge[1],Le=(0,c.useFieldSchema)(),Te=t(_e),je=(0,$.eJ)(),Pe=m(Te,(ee==null?void 0:ee.label)||"label"),fe=U(Pe),re=(0,L.useState)([]),T=C()(re,2),ce=T[0],be=T[1],oe=(0,L.useState)([]),Re=C()(oe,2),Ze=Re[0],We=Re[1];(0,L.useEffect)(function(){if(Ee){var St=(Array.isArray(Ee)?Ee:Ee?[Ee]:[]).map(function(Tt){var lt=Tt[ee.label];return v()(v()({},Tt),{},i()({},ee.label,I(Pe,je(lt))))});We(St)}},[Ee,ee==null?void 0:ee.label]);var tt=function(){return ze==null?null:Array.isArray(Ee)?Ee==null?void 0:Ee.map(function(Tt){return Tt[ee.value]}):Ee==null?void 0:Ee[ee.value]};return(0,x.jsxs)("div",{children:[fe?(0,x.jsx)(z.gq.Attachment,{value:Ze,multiple:ze,action:"".concat(Te==null?void 0:Te.target,":create"),onChange:function(Tt){var lt=(0,M.toArr)(Tt);lt.every(function(ut){return ut.status!=="uploading"})&&(lt=lt.filter(function(ut){return ut.status==="done"}).map(function(ut){return ut.response.data}),Se(ze?[].concat(h()(Ze),h()(lt)):lt[0]))}}):(0,x.jsx)(n.default,v()(v()({},pe),{},{mode:ze?"multiple":_e.mode,fieldNames:ee,popupMatchSelectWidth:!1,onDropdownVisibleChange:function(Tt){Ae(!0)},allowClear:!0,onChange:function(Tt){if(Tt){if(Array.isArray(Tt)){if(!Tt.length){Se([]),be([]);return}var ut=Ze==null?void 0:Ze.filter(function(nt){return Tt.includes(nt[ee.value])});Se(ut),be(ut)}}else{var lt=ze?[]:null;Se(lt),be(lt),We([])}},options:Ze,value:tt(),open:!1})),V({multiple:ze,onChange:Se,selectedRows:ce,setSelectedRows:be,collectionField:Te,visible:Ie,setVisible:Ae,fieldSchema:Le,options:Ze})]})},X=function(_e){var Ee=_e.multiple,ze=_e.onChange,Se=_e.selectedRows,se=_e.setSelectedRows,me=_e.options,pe=_e.collectionField,ee=r()(_e,l);return(0,x.jsx)(S.Provider,{value:v()({multiple:Ee,onChange:ze,selectedRows:Se,setSelectedRows:se,options:me,collectionField:pe},ee),children:_e.children})},V=function(_e){var Ee=_e.multiple,ze=_e.onChange,Se=_e.selectedRows,se=_e.setSelectedRows,me=_e.collectionField,pe=_e.visible,ee=_e.setVisible,ue=_e.fieldSchema,ge=_e.options,Ie=function(){var Te=(me==null?void 0:me.targetKey)||"id",je=ge.map(function(fe){return fe[Te]}).filter(Boolean),Pe=je.length?{$and:[i()({},"".concat(Te,".$ne"),je)]}:{};return Pe},Ae={multiple:Ee,onChange:ze,selectedRows:Se,setSelectedRows:se,options:ge,collectionField:me};return(0,x.jsx)(X,v()(v()({},Ae),{},{children:(0,x.jsx)(a.CollectionProvider_deprecated,{allowNull:!0,name:me==null?void 0:me.target,children:(0,x.jsx)(Q.EI,{openMode:"drawer",visible:pe,setVisible:ee,children:(0,x.jsx)(E.RV,{children:(0,x.jsx)(o.Vs,{params:{filter:Ie()},children:(0,x.jsx)(E.G0,{scope:{useTableSelectorProps:O,usePickActionProps:N},children:(0,x.jsx)(R.sq,{schema:ue,onlyRenderProperties:!0,filterProperties:function(Te){return Te["x-component"]==="RecordPicker.Selector"}})})})})})})}))};function U(xe){return(xe==null?void 0:xe["x-component"])==="Preview"}var D=e(67174),ne=e(75148),q=e(35746),J=e(58837),Y=e(36586),P=e(58812),w=e(13101),ie=function(_e,Ee){return _e??Ee},G=(0,c.observer)(function(xe){var _e,Ee,ze=xe.ellipsis,Se=(0,c.useFieldSchema)(),se=(0,Y.a)(),me=(0,q.d9)(),pe=p(xe),ee=(0,L.useState)(!1),ue=C()(ee,2),ge=ue[0],Ie=ue[1],Ae=(0,J.Kx)(),Le=(Ae==null?void 0:Ae.getField(Se.name))||(me==null?void 0:me.getCollectionField(Se==null?void 0:Se["x-collection-field"])),Te=(0,L.useState)({}),je=C()(Te,2),Pe=je[0],fe=je[1],re=(0,$.eJ)(),T=m(Le,(pe==null?void 0:pe.label)||"label"),ce=(0,Q.XC)(),be=ce.snapshot,oe=((_e=Se["x-component-props"])===null||_e===void 0?void 0:_e.mode)==="tags",Re=(0,L.useRef)();if(U(T))return Le?(0,x.jsx)(w.M,v()({},xe)):null;var Ze=function(){return(0,M.toArr)(xe.value).map(function(Tt,lt,ut){var nt=ie(re(Tt==null?void 0:Tt[(pe==null?void 0:pe.label)||"label"]),"N/A"),Je=I(T,nt,!0);return(0,x.jsxs)(L.Fragment,{children:[(0,x.jsx)("span",{className:"test-record-picker-read-pretty-item",children:be||oe?Je:(0,x.jsx)("a",{onClick:function(mn){var vn;mn.stopPropagation(),mn.preventDefault(),Ie(!0),fe(Tt),Re==null||(vn=Re.current)===null||vn===void 0||vn.setPopoverVisible(!1)},children:Je})}),lt<ut.length-1?(0,x.jsx)("span",{style:{marginRight:4,color:"#aaa"},children:","}):null]},"".concat(Tt[pe.value],"_").concat(lt))})},We=function(){return(0,x.jsx)(D.s.Provider,{value:!0,children:(0,x.jsx)(E.RV,{children:(0,x.jsx)(R.sq,{schema:Se,onlyRenderProperties:!0,filterProperties:function(lt){return lt["x-component"]==="RecordPicker.Viewer"}})})})},tt=function(){var Tt,lt=Se==null||(Tt=Se["x-collection-field"])===null||Tt===void 0?void 0:Tt.split(".");return lt&&lt.length>2?(0,x.jsx)(Y.HV,{record:Pe,parent:se[lt[1]],children:We()}):(0,x.jsx)(Y.HV,{record:Pe,parent:se,children:We()})};return Le?(0,x.jsx)("div",{children:(0,x.jsx)(ne.WJ.Provider,{value:"".concat(Le.collectionName,".").concat(Le.name),children:(0,x.jsxs)(a.CollectionProvider_deprecated,{name:(Ee=Le.target)!==null&&Ee!==void 0?Ee:Le.targetCollection,children:[(0,x.jsx)(P.B,{ellipsis:ze,ref:Re,children:Ze()}),(0,x.jsx)(Q.EI,{value:{visible:ge,setVisible:Ie,openMode:"drawer",snapshot:Le.interface==="snapshot"},children:tt()})]})})}):null},{displayName:"ReadPrettyRecordPicker"}),le=(0,c.connect)(B,(0,c.mapReadPretty)(G));le.Viewer=Z.Z,le.Selector=Z.Z},95686:function(He,ae,e){"use strict";e.d(ae,{m:function(){return j},p:function(){return h}});var Z=e(68400),c=e.n(Z),k=e(97133),i=e(80844),g=e(67294),C=e(62954),A=e(7686),r=e(46917),K=e(85893),v,j=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=n.margin,L=y===void 0?"-18px -16px":y,o=n.padding,a=o===void 0?"18px 16px":o;return(0,k.css)(v||(v=c()([`
  position: relative;
  margin: `,`;
  padding: `,`;

  &:hover {
    > .general-schema-designer {
      display: block;
    }
  }
  > .general-schema-designer {
    position: absolute;
    z-index: 999;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    display: none;
    background: var(--colorBgSettingsHover) !important;
    border: 0 !important;
    pointer-events: none;
    > .general-schema-designer-icons {
      position: absolute;
      right: 2px;
      top: 2px;
      line-height: 16px;
      pointer-events: all;
      .ant-space-item {
        background-color: var(--colorSettings);
        color: #fff;
        line-height: 16px;
        width: 16px;
        padding-left: 1px;
        align-self: stretch;
      }
    }
  }
`])),L,a)},h=(0,i.observer)(function(M){var n=(0,C.ett)(),y=(0,A.P)()||{},L=y.isInSubTable,o=(0,C.Dmu)(),a=o.designable,R=(0,r.dQ)(),E=R.token;return!a||n.isNullComponent?M.children:(0,K.jsxs)(C.TRI,{className:j({margin:"-".concat(E.margin,"px -").concat(E.marginXS,"px"),padding:"".concat(E.margin,"px ").concat(E.marginXS,"px")}),children:[(0,K.jsx)(n,{}),M.children]})},{displayName:"TableColumnActionBar"})},81230:function(He,ae,e){"use strict";e.d(ae,{Oy:function(){return K},hI:function(){return v},z9:function(){return r}});var Z=e(80844),c=e(67294),k=e(21143),i=e(46917),g=e(95686),C=e(31018),A=e(85893),r=function(){var h=(0,k.useCollection_deprecated)(),M=h.getField,n=(0,k.useCompile)(),y=(0,Z.useFieldSchema)(),L=(0,k.useCollectionManager_deprecated)(),o=L.getCollectionJoinField,a=y==null?void 0:y.reduceProperties(function(E,$){return(0,C.J9)($)?$:E},null);if(!a)return{};var R=M(a.name)||o(a==null?void 0:a["x-collection-field"]);return{columnSchema:y,fieldSchema:a,collectionField:R,uiSchema:n(R==null?void 0:R.uiSchema)}},K=function(){var h=(0,Z.useField)(),M=r(),n=M.fieldSchema,y=(0,c.useMemo)(function(){var L,o;if(!n||!h)return[];var a=(L=h.path)===null||L===void 0?void 0:L.splice(((o=h.path)===null||o===void 0?void 0:o.length)-1,1);return h.form.query("".concat(a.concat("*."+n.name))).map()},[h,n]);return n?y:[]},v=function(h){var M=(0,k.useDesigner)(),n=(0,Z.useField)(),y=r(),L=y.fieldSchema,o=y.uiSchema,a=y.collectionField,R=(0,k.useSchemaComponentContext)(),E=R.designable,$=(0,k.useCompile)(),Q=(0,k.useFlag)()||{},z=Q.isInSubTable,p=(0,i.dQ)(),b=p.token;return(0,c.useEffect)(function(){n.title||L&&o!=null&&o.title&&(n.title=o==null?void 0:o.title)},[o==null?void 0:o.title]),!E||M.isNullComponent?(0,A.jsxs)(k.CollectionFieldContext.Provider,{value:a,children:[(0,A.jsx)(M,{fieldSchema:L,uiSchema:o,collectionField:a}),(0,A.jsxs)("span",{role:"button",children:[(L==null?void 0:L.required)&&(0,A.jsx)("span",{className:"ant-formily-item-asterisk",children:"*"}),(0,A.jsx)("span",{children:(n==null?void 0:n.title)||$(o==null?void 0:o.title)})]})]}):(0,A.jsx)(k.SortableItem,{className:(0,g.m)({margin:"-".concat(b.margin,"px -").concat(b.marginXS,"px"),padding:"".concat(b.margin,"px ").concat(b.marginXS,"px")}),children:(0,A.jsxs)(k.CollectionFieldContext.Provider,{value:a,children:[(0,A.jsx)(M,{fieldSchema:L,uiSchema:o,collectionField:a}),(0,A.jsxs)("span",{role:"button",children:[(L==null?void 0:L.required)&&(0,A.jsx)("span",{className:"ant-formily-item-asterisk",children:"*"}),(0,A.jsx)("span",{children:(n==null?void 0:n.title)||$(o==null?void 0:o.title)})]})]})})}},30970:function(He,ae,e){"use strict";e.d(ae,{A8:function(){return f},_E:function(){return x}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(80844),C=e(96486),A=e.n(C),r=e(67294),K=e(26793),v=e(7340),j=e(6145),h=e(90297),M=e(43319),n=e(89018),y=e(21774),L=e(93329),o=e(29124),a=e(88773),R=e(84577),E=e(29132),$=e(80564),Q=e(94804),z=e(68091),p=e(85893),b=function(I){var d,u,l=(0,R.eJ)(),S=(0,j.useCollectionManager_deprecated)(),H=S.getCollectionFields;if(!I)return[];var O=H(I);return O==null||(d=O.filter)===null||d===void 0||(d=d.call(O,function(N){return(N==null?void 0:N.interface)&&!(N!=null&&N.target)&&N.type!=="boolean"}))===null||d===void 0||(u=d.map)===null||u===void 0?void 0:u.call(d,function(N){var t;return{value:N.name,label:l((N==null||(t=N.uiSchema)===null||t===void 0?void 0:t.title)||N.name)}})},f=function(I){var d,u,l=(0,R.eJ)(),S=(0,j.useCollectionManager_deprecated)(),H=S.getCollectionFields;if(!I)return[];var O=H(I);return O==null||(d=O.filter)===null||d===void 0||(d=d.call(O,function(N){return(N==null?void 0:N.interface)==="color"}))===null||d===void 0||(u=d.map)===null||u===void 0?void 0:u.call(d,function(N){var t;return{value:N.name,label:l((N==null||(t=N.uiSchema)===null||t===void 0?void 0:t.title)||N.name)}})},x=function(I){var d,u,l,S,H,O,N,t,B,X,V=I.uiSchema,U=I.fieldSchema,D=I.collectionField,ne=(0,v.bz)(),q=ne.form,J=(0,j.useCollectionManager_deprecated)(),Y=J.getInterface,P=J.getCollection,w=(0,g.useField)(),ie=(0,K.$)(),G=ie.t,le=(0,g.useFieldSchema)(),xe=(0,R.ng)(),_e=xe.dn,Ee=(U==null||(d=U["x-component-props"])===null||d===void 0?void 0:d.fieldNames)||(V==null||(u=V["x-component-props"])===null||u===void 0?void 0:u.fieldNames),ze=b((l=D==null?void 0:D.target)!==null&&l!==void 0?l:D==null?void 0:D.targetCollection),Se=f((S=D==null?void 0:D.target)!==null&&S!==void 0?S:D==null?void 0:D.targetCollection),se=Y(D==null?void 0:D.interface),me=P(D==null?void 0:D.target),pe=m(me),ee=["QuickEdit","FormItem"].includes(U["x-decorator"]),ue=(0,E.Ky)(),ge=ue.currentMode,Ie=(0,o.SF)({collectionField:D,fieldSchema:U}),Ae=Ie.isAllowToSetDefaultValue,Le=["datetime","createdAt","updatedAt"].includes(D==null?void 0:D.interface),Te=["obo","oho","o2o","o2m","m2m","m2o","snapshot"].includes(D==null?void 0:D.interface),je=(0,R.fd)({fieldSchema:U}),Pe=(U==null||(H=U["x-component-props"])===null||H===void 0?void 0:H.mode)||"Select",fe="editable";U["x-disabled"]===!0&&(fe="readonly"),U["x-read-pretty"]===!0&&(fe="read-pretty");var re=Te&&Pe==="Select",T=function(){var be=(0,Q.Kx)(),oe=be.name,Re=(0,z.Po)(),Ze=Re.linkageRulesProps;return(0,p.jsx)(h.lc,i()({category:"style"},i()(i()({},Ze),{},{collectionName:oe})))};return(0,p.jsxs)(h.aN,{disableInitializer:!0,children:[(0,p.jsx)(h.B0,{title:G("Custom column title"),schema:{type:"object",title:G("Custom column title"),properties:{title:{title:G("Column title"),default:le==null?void 0:le.title,description:"".concat(G("Original field title: ")).concat((D==null||(O=D.uiSchema)===null||O===void 0?void 0:O.title)||(U==null?void 0:U.title)),"x-decorator":"FormItem","x-component":"Input","x-component-props":{}}}},onSubmit:function(be){var oe=be.title;oe&&(w.title=oe,le.title=oe,_e.emit("patch",{schema:{"x-uid":le["x-uid"],title:le.title}})),_e.refresh()}}),re&&!w.readPretty&&!(V!=null&&V["x-read-pretty"])&&ee&&(0,p.jsx)(M.H,{collectionName:D==null?void 0:D.target,defaultFilter:(U==null||(N=U["x-component-props"])===null||N===void 0||(N=N.service)===null||N===void 0||(N=N.params)===null||N===void 0?void 0:N.filter)||{},form:q,onSubmit:function(be){var oe,Re,Ze,We=be.filter;We=(0,$.Wm)(We),(0,C.set)(w.componentProps,"service.params.filter",We),U["x-component-props"]=w.componentProps;var tt=(oe=w.path)===null||oe===void 0?void 0:oe.splice(((Re=w.path)===null||Re===void 0?void 0:Re.length)-1,1);w.form.query("".concat(tt.concat("*."+U.name))).forEach(function(St){St.componentProps.service=St.componentProps.service||{params:{}},St.componentProps.service.params.filter=We}),_e.emit("patch",{schema:(Ze={},c()(Ze,"x-uid",U["x-uid"]),c()(Ze,"x-component-props",w.componentProps),Ze)})}}),(0,p.jsx)(h.B0,{title:G("Column width"),schema:{type:"object",title:G("Column width"),properties:{width:{default:(le==null||(t=le["x-component-props"])===null||t===void 0?void 0:t.width)||100,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{}}}},onSubmit:function(be){var oe=be.width,Re=le["x-component-props"]||{};Re.width=oe;var Ze=c()({},"x-uid",le["x-uid"]);Ze["x-component-props"]=Re,le["x-component-props"]=Re,w.componentProps.width=oe,_e.emit("patch",{schema:Ze}),_e.refresh()}}),(0,p.jsx)(T,{}),se&&se.sortable===!0&&!ge&&(0,p.jsx)(h.hj,{title:G("Sortable"),checked:w.componentProps.sorter,onChange:function(be){var oe=c()({},"x-uid",le["x-uid"]);le["x-component-props"]=i()(i()({},le["x-component-props"]),{},{sorter:be}),oe["x-component-props"]=le["x-component-props"],w.componentProps.sorter=be,_e.emit("patch",{schema:oe}),_e.refresh()}}),["linkTo","m2m","m2o","o2m","obo","oho","snapshot","createdBy","updatedBy"].includes(D==null?void 0:D.interface)&&!pe&&(fe==="read-pretty"||w.readPretty||w.readOnly)&&(0,p.jsx)(h.hj,{title:G("Enable link"),checked:((B=U["x-component-props"])===null||B===void 0?void 0:B.enableLink)!==!1,onChange:function(be){U["x-component-props"]=i()(i()({},U==null?void 0:U["x-component-props"]),{},{enableLink:be}),w.componentProps=i()(i()({},U==null?void 0:U["x-component-props"]),{},{enableLink:be}),_e.emit("patch",{schema:{"x-uid":U["x-uid"],"x-component-props":i()({},U==null?void 0:U["x-component-props"])}}),_e.refresh()}}),["linkTo","m2m","m2o","o2m","obo","oho","snapshot"].includes(D==null?void 0:D.interface)&&(0,p.jsx)(h.Qf,{title:G("Title field"),options:ze,value:Ee==null?void 0:Ee.label,onChange:function(be){var oe,Re,Ze,We,tt=i()(i()(i()({},D==null||(oe=D.uiSchema)===null||oe===void 0||(oe=oe["x-component-props"])===null||oe===void 0?void 0:oe.fieldNames),U==null||(Re=U["x-component-props"])===null||Re===void 0?void 0:Re.fieldNames),{},{label:be});A().set(U,"x-component-props.fieldNames",tt);var St=(Ze=w.path)===null||Ze===void 0?void 0:Ze.splice(((We=w.path)===null||We===void 0?void 0:We.length)-1,1);w.form.query("".concat(St.concat("*."+U.name))).forEach(function(Tt){Tt.componentProps.fieldNames=tt}),_e.emit("patch",{schema:{"x-uid":U["x-uid"],"x-component-props":i()({},U["x-component-props"])}}),_e.refresh()}}),Te&&(0,p.jsx)(h.Qf,{title:G("Field component"),options:fe==="read-pretty"?[{label:G("Title"),value:"Select"},pe&&{label:G("File manager"),value:"FileManager"},{label:G("Tag"),value:"Tag"}].filter(Boolean):je,value:Pe,onChange:function(be){var oe=c()({},"x-uid",U["x-uid"]);U["x-component-props"]=U["x-component-props"]||{},U["x-component-props"].mode=be,oe["x-component-props"]=U["x-component-props"],w.componentProps=w.componentProps||{},w.componentProps.mode=be,_e.emit("patch",{schema:oe}),_e.refresh()}},"field-mode"),["Tag"].includes(Pe)&&(0,p.jsx)(h.Qf,{title:G("Tag color field"),options:Se,value:U==null||(X=U["x-component-props"])===null||X===void 0?void 0:X.tagColorField,onChange:function(be){var oe=c()({},"x-uid",U["x-uid"]);U["x-component-props"]=U["x-component-props"]||{},U["x-component-props"].tagColorField=be,oe["x-component-props"]=U["x-component-props"],w.componentProps.tagColorField=be,_e.emit("patch",{schema:oe}),_e.refresh()}},"title-field"),ee&&!w.readPretty&&!(V!=null&&V["x-read-pretty"])&&(0,p.jsx)(h.hj,{title:G("Required"),checked:U.required,onChange:function(be){var oe,Re,Ze=c()({},"x-uid",U["x-uid"]);U.required=be,Ze.required=be;var We=(oe=w.path)===null||oe===void 0?void 0:oe.splice(((Re=w.path)===null||Re===void 0?void 0:Re.length)-1,1);w.form.query("".concat(We.concat("*."+U.name))).forEach(function(tt){tt.required=be}),_e.emit("patch",{schema:Ze}),_e.refresh()}},"required"),ee&&!(w!=null&&w.readPretty)&&(D==null?void 0:D.interface)!=="o2m"&&!(0,a.V)(U)&&(0,p.jsx)(h.Qf,{title:G("Pattern"),options:[{label:G("Editable"),value:"editable"},{label:G("Readonly"),value:"readonly"},{label:G("Easy-reading"),value:"read-pretty"}],value:fe,onChange:function(be){var oe,Re,Ze=c()({},"x-uid",U["x-uid"]),We=(oe=w.path)===null||oe===void 0?void 0:oe.splice(((Re=w.path)===null||Re===void 0?void 0:Re.length)-1,1);switch(be){case"readonly":{U["x-read-pretty"]=!1,U["x-disabled"]=!0,Ze["x-read-pretty"]=!1,Ze["x-disabled"]=!0,w.form.query("".concat(We.concat("*."+U.name))).forEach(function(tt){tt.readonly=!0,tt.disabled=!0});break}case"read-pretty":{U["x-read-pretty"]=!0,U["x-disabled"]=!1,Ze["x-read-pretty"]=!0,Ze["x-disabled"]=!1,w.form.query("".concat(We.concat("*."+U.name))).forEach(function(tt){tt.readPretty=!0});break}default:{U["x-read-pretty"]=!1,U["x-disabled"]=!1,Ze["x-read-pretty"]=!1,Ze["x-disabled"]=!1,w.form.query("".concat(We.concat("*."+U.name))).forEach(function(tt){tt.readPretty=!1,tt.disabled+!1});break}}_e.emit("patch",{schema:Ze}),_e.refresh()}},"pattern"),Le&&(0,p.jsx)(n.y,{fieldSchema:U}),ee&&!(w!=null&&w.readPretty)&&["obo","oho","o2o","o2m","m2m","m2o"].includes(D==null?void 0:D.interface)&&(0,p.jsx)(L.w,{fieldSchema:U,onSubmitCallBack:function(be){var oe,Re,Ze=(oe=w.path)===null||oe===void 0?void 0:oe.splice(((Re=w.path)===null||Re===void 0?void 0:Re.length)-1,1);w.form.query("".concat(Ze.concat("*."+U.name))).forEach(function(We){We.componentProps.service=We.componentProps.service||{params:{}},We.componentProps.service.params.sort=be})}}),Ae(ee)&&(0,p.jsx)(y.N,{fieldSchema:U}),(0,p.jsx)(h.Z5,{}),(0,p.jsx)(h.qx,{removeParentsIfNoChildren:!ee,breakRemoveOn:{"x-component":"Grid"},confirm:{title:G("Delete table column")}})]})};function m(F){return(F==null?void 0:F.template)==="file"}},72160:function(He,ae,e){"use strict";e.d(ae,{iA:function(){return Er},nO:function(){return Zn},Ge:function(){return rr}});var Z=e(5574),c=e.n(Z),k=e(9783),i=e.n(k),g=e(13769),C=e.n(g),A=e(19632),r=e.n(A),K=e(68400),v=e.n(K),j=e(97857),h=e.n(j),M=e(73475),n=e(58521),y=e(10274),L=e(36905),o=e(97133),a=e(23923),R=e(80844),E=e(85667),$=e(84327),Q=e(84157),z=e(22638),p=e(8291),b=e(16455),f=e(93967),x=e.n(f),m=e(96486),F=e.n(m),I=e(67294),d=e(26793),u=e(62954),l=e(21143),S=e(75667),H=e(1892),O=e(373),N=e(57105),t=e(15503),B=e(83335),X=e(4595),V=e(76126),U=e(57953),D=e(85893),ne={opacity:.5},q={position:"relative"},J={display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",left:0,right:0,height:"100%",maxHeight:400,zIndex:1e3},Y={display:"none"},P=I.memo(function(Ft){return(0,D.jsxs)("div",{style:q,children:[(0,D.jsx)(U.Z,h()(h()({},F().omit(Ft,"children")),{},{style:Ft.spinning?J:Y})),(0,D.jsx)("div",{style:Ft.spinning?ne:null,children:Ft.children})]})}),w=e(46917),ie=e(29132),G,le=function(ct){var Mt=ct.rows,kt=Mt===void 0?5:Mt,Rt=ct.columns,_t=Rt===void 0?6:Rt,Bt=(0,w.dQ)(),jt=Bt.token,Xt=jt.controlHeight*2.06,Wt=jt.controlHeight*1.75,Nt=(0,I.useMemo)(function(){return(0,o.css)(G||(G=v()([`
      &.skeleton-wrapper {
        width: 100%;
        background: `,`;
        border-radius: `,`px;
        overflow: hidden;
      }

      .skeleton-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
      }

      .skeleton-cell {
        padding: `,"px ",`px;
        border-bottom: 1px solid `,`;
        vertical-align: middle;
        height: `,`px;
        box-sizing: border-box;
      }

      .skeleton-cell:first-child {
        padding-left: `,`px;
        width: `,`px;
      }

      .header {
        background: `,`;
      }

      .header .skeleton-cell {
        padding-top: `,`px;
        padding-bottom: `,`px;
        height: `,`px;
      }

      .skeleton-loading {
        height: `,`px;
        background: `,`;
        border-radius: `,`px;
      }

      .skeleton-checkbox {
        width: `,`px;
        height: `,`px;
        background: `,`;
        border-radius: `,`px;
      }

      thead tr {
        height: `,`px;
      }

      tbody tr {
        height: `,`px;
      }
    `])),jt.colorBgContainer,jt.borderRadiusLG,jt.padding,jt.padding,jt.colorBorderSecondary,Wt,jt.padding+2,jt.controlHeight*1.2,jt.colorFillQuaternary,jt.padding,jt.padding,Xt,jt.controlHeight/2,jt.colorFillSecondary,jt.borderRadiusSM,jt.controlHeight/2,jt.controlHeight/2,jt.colorFillSecondary,jt.borderRadiusSM,Xt,Wt)},[Wt,Xt,jt.borderRadiusLG,jt.borderRadiusSM,jt.colorBgContainer,jt.colorBorderSecondary,jt.colorFillQuaternary,jt.controlHeight,jt.padding]);return(0,D.jsx)("div",{className:"skeleton-wrapper ".concat(Nt),children:(0,D.jsxs)("table",{className:"skeleton-table",children:[(0,D.jsx)("thead",{children:(0,D.jsxs)("tr",{className:"header",children:[(0,D.jsx)("th",{className:"skeleton-cell",children:(0,D.jsx)("div",{className:"skeleton-checkbox"})}),Array(_t).fill(null).map(function(nn,Zt){return(0,D.jsx)("th",{className:"skeleton-cell",children:(0,D.jsx)("div",{className:"skeleton-loading"})},Zt)})]})}),(0,D.jsx)("tbody",{children:Array(kt).fill(null).map(function(nn,Zt){return(0,D.jsxs)("tr",{children:[(0,D.jsx)("td",{className:"skeleton-cell",children:(0,D.jsx)("div",{className:"skeleton-checkbox"})}),Array(_t).fill(null).map(function(Cn,Yt){return(0,D.jsx)("td",{className:"skeleton-cell",children:(0,D.jsx)("div",{className:"skeleton-loading"})},Yt)})]},Zt)})})]})})},xe=e(31018),_e=e(65633),Ee=["rowIndex"],ze=["id"],Se=["index"],se=["record","schema","rowIndex","isSubTable"],me=["tableHeight","SortableWrapper","tableSizeRefCallback","defaultRowKey","dataSource","paginationProps","components","onTableChange","onRow","rowClassName","scroll","columns","expandable","field"],pe=["pagination","useProps"],ee=["pagination"],ue=["dragSort","showIndex","onRowSelectionChange","onChange","rowSelection","rowKey","required","onExpand","loading","onClickRow","value"],ge,Ie,Ae,Le,Te,je,Pe,fe,re,T,ce,be,oe,Re=function(ct){var Mt=(0,R.useField)();return ct.field||Mt};function Ze(Ft){var ct=[],Mt=[],kt=[];return Ft.forEach(function(Rt){Rt.fixed==="left"?ct.push(Rt):Rt.fixed==="right"?kt.push(Rt):Mt.push(Rt)}),[].concat(ct,Mt,kt)}var We=function(ct){var Mt=ct.record,kt=ct.columnSchema,Rt=ct.uiSchema,_t=ct.filterProperties,Bt=ct.schemaToolbarBigger,jt=ct.field,Xt=ct.index,Wt=jt.address.concat(Mt.__index||Xt);return(0,D.jsx)("span",{role:"button",className:Bt,children:(0,D.jsx)(N.sq,{values:Mt,basePath:Wt,schema:kt,uiSchema:Rt,onlyRenderProperties:!0,propsRecursion:!0,filterProperties:_t,isUseFormilyField:!1})})},tt=function(){var ct=(0,l.useDataBlockProps)()||{},Mt=ct.params,kt=ct.dataSource,Rt=(0,l.useDataBlockRequestGetter)(),_t=Rt.getDataBlockRequest,Bt=(0,l.useAssociationNames)(kt),jt=Bt.getAssociationAppends,Xt=(0,I.useRef)(Mt),Wt=(0,N.gR)(),Nt=(0,I.useCallback)(function(){var nn=jt(),Zt=nn.appends,Cn=_t();F().isEqual(Xt.current.appends,Zt)||(Xt.current=h()(h()({},Mt),{},{appends:Zt}),Cn.run(Xt.current)),Wt==null||Wt()},[Mt,jt,_t,Wt]);return{refresh:Nt}},St=function(ct,Mt){var kt=(0,w.dQ)(),Rt=kt.token,_t=Re(ct),Bt=(0,R.useFieldSchema)(),jt=(0,S.Aj)(),Xt=jt.schemaInWhitelist,Wt=(0,u.ngQ)(),Nt=Wt.designable,nn=(0,l.useSchemaInitializerRender)(Bt["x-initializer"],Bt["x-initializer-props"]),Zt=nn.exists,Cn=nn.render,Yt=(0,I.useMemo)(function(){return Bt.reduceProperties(function(Ce,Oe){return(0,xe.$Q)(Oe)&&Xt(Object.values(Oe.properties||{}).pop())?Ce.concat([Oe]):Ce},[])},[Bt,Xt]),Mn=Mt.current,bn=Mt.pageSize,Gt=(0,u.a4r)(),ln=Gt.isPopupVisibleControlledByURL,Hn=tt(),sn=Hn.refresh,Ln=(0,I.useCallback)(function(Ce){return(0,u.vUN)(Ce)||!ln()||Ce["x-component"]!=="Action.Container"},[ln]),Bn=(0,I.useMemo)(function(){return(0,o.css)(ge||(ge=v()([`
      .nb-action-link {
        margin: -`,"px -",`px;
        padding: `,"px ",`px;
      }
    `])),Rt.paddingContentVerticalLG,Rt.marginSM,Rt.paddingContentVerticalLG,Rt.paddingSM+4)},[Rt.paddingContentVerticalLG,Rt.marginSM,Rt.margin]),wn=(0,l.useCollection)(),st=(0,I.useMemo)(function(){return(0,_e.r)(N.sq)},[]),Ke=(0,I.useMemo)(function(){return Yt==null?void 0:Yt.map(function(Ce){var Oe,Fe,Ne,Xe,dt=Ce.reduceProperties(function(Ut,wt){if((0,xe.J9)(wt))return Ut.concat([wt])},[]),ht=(dt==null?void 0:dt.length)>0?dt[0].name:Ce.name,xt=!!((Oe=Ce["x-component-props"])!==null&&Oe!==void 0&&Oe.columnHidden),Ct=(wn==null?void 0:wn.getField(ht))||{},Dt=Ct.uiSchema,Vt=Ct.defaultValue,Ht=Ct.interface;return Dt&&(Dt.default=Vt),h()(h()({title:(0,D.jsx)(N.ri,{refresh:sn,children:(0,D.jsx)(st,{name:Ce.name,schema:Ce,onlyRenderSelf:!0,isUseFormilyField:!1,tooltip:Ce==null||(Fe=Ce["x-component-props"])===null||Fe===void 0?void 0:Fe.tooltip})}),dataIndex:ht,key:Ce.name,sorter:(Ne=Ce["x-component-props"])===null||Ne===void 0?void 0:Ne.sorter,columnHidden:xt},Ce["x-component-props"]),{},{width:xt&&!Nt?0:((Xe=Ce["x-component-props"])===null||Xe===void 0?void 0:Xe.width)||100,render:function(wt,ot,qe){return(0,D.jsx)(N.ri,{refresh:sn,children:(0,D.jsx)(We,{record:ot,columnSchema:Ce,uiSchema:Dt,filterProperties:Ln,schemaToolbarBigger:Bn,field:_t,index:qe})})},onCell:function(wt,ot){return{record:wt,schema:Ce,rowIndex:ot,columnHidden:xt}},onHeaderCell:function(){return{columnHidden:xt}}})})},[Yt,wn,sn,Nt,Ln,Bn,_t,ct.optimizeTextCellRender]),De=(0,I.useMemo)(function(){if(!Zt)return Ke;var Ce=[].concat(r()(Ke),[{title:(0,D.jsx)(N.ri,{refresh:sn,children:Cn()}),dataIndex:"TABLE_COLUMN_INITIALIZER",key:"TABLE_COLUMN_INITIALIZER",render:Nt?function(){return(0,D.jsx)("div",{style:{width:"100%",minWidth:"180px"},className:"nb-column-initializer"})}:null,fixed:Nt?"right":"none"}]);return ct.showDel&&Ce.push({title:"",key:"delete",width:60,align:"center",fixed:"right",render:function(Fe,Ne,Xe){if(ct.showDel(Ne))return(0,D.jsx)("div",{onClick:function(){return(0,E.action)(function(){var ht=(Mn-1)*bn+Xe,xt=_t.value[ht]?1:2;return(0,a.b9)(_t,{startIndex:ht,deleteCount:xt}),_t.value.splice(ht,xt),_t.setInitialValue(r()(_t.value)),_t.onInput(_t.value)})},children:(0,D.jsx)(M.Z,{style:{cursor:"pointer",color:"gray"}})})}}),Ze(Ce)},[Ke,Zt,_t,Cn,ct.showDel,Nt]);return De},Tt=function(ct){var Mt,kt,Rt,_t,Bt,jt=(0,w.dQ)(),Xt=jt.token,Wt=(Mt=ct["data-row-key"])===null||Mt===void 0?void 0:Mt.toString(),Nt=(0,L.useSortable)({id:Wt}),nn=Nt.setNodeRef,Zt=Nt.isOver,Cn=Nt.active,Yt=Nt.over,Mn=ct.rowIndex,bn=C()(ct,Ee),Gt=(0,I.useMemo)(function(){var sn=new y.C(Xt.colorSettings).setAlpha(.6).toHex8String();return{topActiveClass:(0,o.css)(Ie||(Ie=v()([`
        & > td {
          border-top: 2px solid `,` !important;
        }
      `])),sn),bottomActiveClass:(0,o.css)(Ae||(Ae=v()([`
        & > td {
          border-bottom: 2px solid `,` !important;
        }
      `])),sn)}},[Xt.colorSettings]),ln=((kt=Cn==null||(Rt=Cn.data.current)===null||Rt===void 0?void 0:Rt.sortable.index)!==null&&kt!==void 0?kt:-1)>((_t=Yt==null||(Bt=Yt.data.current)===null||Bt===void 0||(Bt=Bt.sortable)===null||Bt===void 0?void 0:Bt.index)!==null&&_t!==void 0?_t:-1)?Gt.topActiveClass:Gt.bottomActiveClass,Hn=(0,D.jsx)("tr",h()(h()({ref:function(Ln){(Cn==null?void 0:Cn.id)!==Wt&&nn(Ln)}},bn),{},{className:x()(ct.className,i()({},ln,Cn&&Zt))}));return Hn},lt=function(ct){var Mt=ct.id,kt=C()(ct,ze),Rt=(0,L.useSortable)({id:Mt}),_t=Rt.listeners,Bt=Rt.setNodeRef;return(0,D.jsx)(n.Z,h()(h()(h()({ref:Bt},kt),_t),{},{style:{cursor:"grab"}}))},ut=function(ct){var Mt=ct.index,kt=C()(ct,Se);return(0,D.jsx)("div",h()(h()({className:x()("nb-table-index"),style:{padding:"0 8px 0 16px"}},kt),{},{children:Mt}))},nt=[5,10,20,50,100,200],Je=function(ct,Mt,kt){var Rt,_t,Bt,jt,Xt=(0,d.$)(),Wt=Xt.t,Nt=(0,R.useField)(),nn=(0,w.dQ)(),Zt=nn.token,Cn=(0,l.useDataBlockRequestData)()||{},Yt=Cn.meta,Mn=Yt||{},bn=Mn.hasNext,Gt=(0,I.useMemo)(function(){return h()(h()({},ct),Mt)},[JSON.stringify(h()(h()({},ct),Mt))]),ln=Gt||{},Hn=ln.total,sn=ln.current,Ln=ln.pageSize,Bn=(0,l.useDataBlockProps)(),wn=(0,ie.Ky)(),st=(0,I.useContext)(R.SchemaOptionsContext),Ke=st.components,De=(wn==null||(Rt=wn.fieldSchema)===null||Rt===void 0||(Rt=Rt["x-component-props"])===null||Rt===void 0||(Rt=Rt.summary)===null||Rt===void 0?void 0:Rt.Component)||(Bn==null||(_t=Bn.summary)===null||_t===void 0?void 0:_t.Component),Ce=(0,I.useCallback)(function(Ne){return Ke[De]?I.createElement(Ke[De]):Wt("Total {{count}} items",{count:Ne})},[Ke,De,Wt]),Oe=(0,I.useMemo)(function(){return h()({pageSizeOptions:nt,showTotal:Ce,showSizeChanger:!0},Gt)},[Gt,Ce]),Fe=(0,I.useMemo)(function(){if(Hn)return Oe;var Ne;return h()(h()({pageSizeOptions:nt,showTotal:!1,simple:!0,showTitle:!1,showSizeChanger:!0,hideOnSinglePage:!1},Gt),{},{total:((Ne=kt.value)===null||Ne===void 0?void 0:Ne.length)<Ln||!bn?Ln*sn:Ln*sn+1,className:(0,o.css)(Le||(Le=v()([`
          .ant-pagination-simple-pager {
            display: none !important;
          }
        `]))),itemRender:function(dt,ht,xt){return ht==="prev"?(0,D.jsxs)("div",{style:{display:"flex"},className:(0,o.css)(Te||(Te=v()([`
                  .ant-pagination-item-link {
                    min-width: `,`px;
                  }
                `])),Zt.controlHeight),children:[xt," ",(0,D.jsx)("div",{style:{marginLeft:"7px"},children:sn})]}):xt}})},[Gt,Wt,Ce,(Bt=kt.value)===null||Bt===void 0?void 0:Bt.length,Oe]);return Mt===!1||!Mt&&ct===!1?!1:((jt=kt.value)===null||jt===void 0?void 0:jt.length)>0||Fe.total?Fe:!1},hn=(0,o.css)(je||(je=v()([`
  max-width: 300px;
  white-space: nowrap;
  &:hover .general-schema-designer {
    display: block;
  }
`]))),mn=(0,o.css)(Pe||(Pe=v()([`
  max-width: 300px;
  white-space: nowrap;
  .ant-color-picker-trigger {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
  }
`]))),vn=(0,o.css)(fe||(fe=v()([`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-evenly;
  padding-right: 8px;
  .nb-table-index {
    opacity: 0;
  }
  &:not(.checked) {
    .nb-table-index {
      opacity: 1;
    }
  }
`]))),an=(0,o.css)(re||(re=v()([`
  &:hover {
    .nb-table-index {
      opacity: 0;
    }
    .nb-origin-node {
      display: block;
    }
  }
`]))),fn=(0,o.css)(T||(T=v()([`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-evenly;
`]))),cn=(0,o.css)(ce||(ce=v()([`
  position: absolute;
  right: 50%;
  transform: translateX(50%);
  &:not(.checked) {
    display: none;
  }
`]))),_n=I.memo(function(Ft){return(0,D.jsx)(u.LBT,{children:(0,D.jsx)("thead",h()({},Ft))})}),zt={borderRight:"none",paddingLeft:0,paddingRight:0},xn={opacity:.3};_n.displayName="HeaderWrapperComponent";var Qt=I.memo(function(Ft){var ct=(0,u.ngQ)(),Mt=ct.designable;return Ft.columnHidden?(0,D.jsx)("th",{style:Mt?xn:zt,children:Mt?Ft.children:null}):(0,D.jsx)("th",h()(h()({},F().omit(Ft,"columnHidden")),{},{className:x()(Ft.className,hn)}))});Qt.displayName="HeaderCellComponent";var Et=I.memo(function(Ft){var ct=Ft.record,Mt=Ft.rowIndex,kt=(0,l.useCollectionParentRecordData)();return(0,D.jsx)(l.RecordProvider,{isNew:(0,O.k)(ct),record:ct,parent:kt,children:(0,D.jsx)(l.RecordIndexProvider,{index:(ct==null?void 0:ct.__index)||Mt,children:(0,D.jsx)(Tt,h()({},Ft))})})});Et.displayName="InternalBodyRowComponent";var en=I.memo(function(Ft){var ct=(0,I.useRef)(Ft),Mt=(0,I.useRef)(!1);return ct.current.record===Ft.record&&!Mt.current?(Mt.current=!0,(0,D.jsx)(Et,h()({},Ft))):ct.current.record!==Ft.record||ct.current.children.length!==Ft.children.length||ct.current.onClick!==Ft.onClick||!F().isEqual(ct.current.style,Ft.style)?(ct.current=Ft,(0,D.jsx)(Et,h()({},Ft))):(0,D.jsx)(Et,h()({},ct.current))});en.displayName="BodyRowComponent";var Rn=I.memo(function(Ft){var ct=Ft.record,Mt=Ft.schema,kt=Ft.rowIndex,Rt=Ft.isSubTable,_t=C()(Ft,se),Bt=Mt==null?void 0:Mt[X.k0.style],jt=(0,I.useState)({}),Xt=c()(jt,2),Wt=Xt[0],Nt=Xt[1],nn=!!(Mt!=null&&Mt.properties)&&Object.values(Mt.properties).some(function(Cn){return Cn["x-read-pretty"]===!0}),Zt=(0,I.useMemo)(function(){return h()(h()({},Ft.style),Wt)},[Ft.style,Wt]);return(0,D.jsxs)(D.Fragment,{children:[!F().isEmpty(Bt)&&(0,D.jsx)(V.E,{record:ct,schema:Mt,onStyleChange:nn?Nt:F().noop}),(0,D.jsx)("td",h()(h()({},_t),{},{className:x()(Ft.className,mn),style:Zt,children:Ft.children}))]})});Rn.displayName="InternalBodyCellComponent";var An={display:"none"},Jn=I.memo(function(Ft){var ct=(0,u.ngQ)(),Mt=ct.designable;return Ft.columnHidden?(0,D.jsx)("td",{style:Mt?xn:zt,children:Mt?Ft.children:(0,D.jsx)("span",{style:An,children:Ft.children})}):(0,D.jsx)(Rn,h()({},F().omit(Ft,"columnHidden")))});Jn.displayName="BodyCellComponent";var Zn=(0,I.createContext)(null),rr=function(){return(0,I.useContext)(Zn)},mr=I.memo(function(Ft){var ct=Ft.tableHeight,Mt=Ft.SortableWrapper,kt=Ft.tableSizeRefCallback,Rt=Ft.defaultRowKey,_t=Ft.dataSource,Bt=Ft.paginationProps,jt=Ft.components,Xt=Ft.onTableChange,Wt=Ft.onRow,Nt=Ft.rowClassName,nn=Ft.scroll,Zt=Ft.columns,Cn=Ft.expandable,Yt=Ft.field,Mn=C()(Ft,me),bn=(0,w.dQ)(),Gt=bn.token,ln=rr(),Hn=(0,I.useCallback)(function(sn){ln&&(ln.current=sn),kt(sn)},[ln,kt]);return(0,D.jsxs)("div",{className:(0,o.cx)((0,o.css)(be||(be=v()([`
            height: 100%;
            overflow: hidden;
            .ant-table-wrapper {
              height: 100%;
              .ant-spin-nested-loading {
                height: 100%;
                .ant-spin-container {
                  height: 100%;
                  display: flex;
                  flex-direction: column;
                  .ant-table-expanded-row-fixed {
                    min-height: `,`px;
                  }
                  .ant-table-body {
                    min-height: `,`px;
                  }
                  .ant-table-cell {
                    padding: 16px 8px;
                  }
                  .ant-table-middle .ant-table-cell {
                    padding: 12px `,`px;
                  }
                  .ant-table-small .ant-table-cell {
                    padding: 8px `,`px;
                  }
                  .ant-table-cell-fix-right {
                    padding: 8px 16px !important;
                  }
                }
              }
            }
            .ant-table {
              overflow-x: auto;
              overflow-y: hidden;
            }
          `])),ct,ct,Gt.paddingXS,Gt.paddingXS),"nb-table-container"),children:[(0,D.jsx)(Mt,{children:(0,D.jsx)(b.Z,h()(h()({ref:Hn,rowKey:Rt,dataSource:_t,tableLayout:"auto"},Mn),{},{pagination:Bt,components:jt,onChange:Xt,onRow:Wt,rowClassName:Nt,scroll:nn,columns:Zt,expandable:Cn}))}),Yt.errors.length>0&&(0,D.jsx)("div",{className:"ant-formily-item-error-help ant-formily-item-help ant-formily-item-help-enter ant-formily-item-help-enter-active",children:Yt.errors.map(function(sn){return sn.messages.map(function(Ln){return(0,D.jsx)("div",{children:Ln},Ln)})})})]})});mr.displayName="InternalNocoBaseTable";var Er=(0,t.t)((0,B.C)((0,R.observer)(function(Ft){var ct,Mt,kt=(0,w.dQ)(),Rt=kt.token,_t=(0,m.omit)(Ft,["onBlur","onFocus"]),Bt=_t.pagination,jt=_t.useProps,Xt=C()(_t,pe),Wt=(jt==null?void 0:jt())||{},Nt=Wt.pagination,nn=C()(Wt,ee),Zt=h()(h()({},Xt),nn),Cn=Zt.dragSort,Yt=Cn===void 0?!1:Cn,Mn=Zt.showIndex,bn=Mn===void 0?!0:Mn,Gt=Zt.onRowSelectionChange,ln=Zt.onChange,Hn=Zt.rowSelection,sn=Zt.rowKey,Ln=Zt.required,Bn=Zt.onExpand,wn=Zt.loading,st=Zt.onClickRow,Ke=Zt.value,De=C()(Zt,ue),Ce=Re(De),Oe=(0,R.useFieldSchema)(),Fe=(Oe==null?void 0:Oe["x-component-props"])||{},Ne=Fe.size,Xe=Ne===void 0?"small":Ne,dt=(0,l.useCollection)(),ht=(Oe==null||(ct=Oe.parent)===null||ct===void 0?void 0:ct["x-decorator"])==="TableSelectorProvider",xt=ht?(0,l.useTableSelectorContext)():(0,H.Si)(),Ct=xt.expandFlag,Dt=xt.allIncludesChildren,Vt=(0,z.Z)(De.onRowDragEnd||function(){}),Ht=Je(Bt,Nt,Ft),Ut=St(De,Ht),wt=(0,I.useState)(function(){return Ct?Dt:[]}),ot=c()(wt,2),qe=ot[0],Be=ot[1],rt=(0,I.useState)((Ce==null||(Mt=Ce.data)===null||Mt===void 0?void 0:Mt.selectedRowKeys)||[]),Ve=c()(rt,2),$e=Ve[0],it=Ve[1],Pt=(0,I.useState)([]),Lt=c()(Pt,2),$t=Lt[0],$n=Lt[1],pn=(Hn==null?void 0:Hn.type)!=="none",un=(0,I.useRef)(new Map),Xn=(0,I.useMemo)(function(){return(0,o.css)(oe||(oe=v()([`
          & > td {
            background-color: `,` !important;
          }
          &:hover > td {
            background-color: `,` !important;
          }
        `])),Rt.controlItemBgActive,Rt.controlItemBgActiveHover)},[Rt.controlItemBgActive,Rt.controlItemBgActiveHover]),Yn=(0,H.bE)();(0,I.useEffect)(function(){if(Yn!=null&&Yn.field){var Vr;Yn.field.data=((Vr=Yn.field)===null||Vr===void 0?void 0:Vr.data)||{},Yn.field.data.clearSelectedRowKeys=function(){Yn.field.data.selectedRowKeys=[],it([])},Yn.field.data.setSelectedRowKeys=it}},[Yn==null?void 0:Yn.field]);var jn=(0,I.useMemo)(function(){return st?Xn:""},[Xn,st]),ir=(0,I.useMemo)(function(){return st?function(Vr,Gr){return{onClick:function(lo){(0,Q.isPortalInBody)(lo.target)||st(Vr,$n,$t)},rowIndex:Gr,record:Vr}}:function(Vr,Gr){return{rowIndex:Gr,record:Vr}}},[st,$t]);(0,p.Z)(function(){var Vr=Ct?Dt:[];F().isEqual(Vr,qe)||Be(Vr)},[Ct,Dt]);var fr=(0,I.useCallback)(function(Vr){if(sn)return Ar(Vr);if(Vr.key)return Vr.key;if(un.current.has(Vr))return un.current.get(Vr);var Gr=(0,$.uid)();return un.current.set(Vr,Gr),Gr},[]),Ar=(0,I.useCallback)(function(Vr){if(Array.isArray(sn))return sn.map(function(to){var lo;return((lo=Vr[to])===null||lo===void 0?void 0:lo.toString())||""}).join("-");if(typeof sn=="string")return Vr[sn];var Gr;return(Gr=(sn??fr)(Vr))===null||Gr===void 0?void 0:Gr.toString()},[JSON.stringify(sn),fr]),wr=(0,I.useMemo)(function(){var Vr=Array.isArray(Ke)?Ke:[];return Vr.filter(Boolean)},[Ke,Ke==null?void 0:Ke.length]),Kr=(0,I.useMemo)(function(){return function(Vr){var Gr=(0,I.useCallback)(function(to){var lo,mo;if(!to.active||!to.over){console.warn("move cancel");return}var No=(lo=to.active)===null||lo===void 0||(lo=lo.data.current)===null||lo===void 0||(lo=lo.sortable)===null||lo===void 0?void 0:lo.index,Jo=(mo=to.over)===null||mo===void 0||(mo=mo.data.current)===null||mo===void 0||(mo=mo.sortable)===null||mo===void 0?void 0:mo.index,Tr=(Ke==null?void 0:Ke[No])||to.active,Zo=(Ke==null?void 0:Ke[Jo])||to.over;Ce.move(No,Jo),Vt({from:Tr,to:Zo})},[]);return(0,D.jsx)(u.LBT,{onDragEnd:Gr,children:(0,D.jsx)("tbody",h()({},Vr))})}},[Ce,Vt]);Kr.displayName="BodyWrapperComponent";var ao=(0,I.useMemo)(function(){return{header:{wrapper:_n,cell:Qt},body:{wrapper:Kr,row:en,cell:Jn}}},[Kr]),Qr=(0,I.useMemo)(function(){return Hn},[JSON.stringify(Hn)]),_r=(0,I.useMemo)(function(){return{rowSelection:Qr?h()({type:"checkbox",selectedRowKeys:$e,onChange:function(Gr,to){Ce.data=Ce.data||{},Ce.data.selectedRowKeys=Gr,Ce.data.selectedRowData=to,it(Gr),Gt==null||Gt(Gr,to,it)},onSelect:function(Gr,to,lo,mo){if(Yn){var No;Yn.field.data=((No=Yn.field)===null||No===void 0?void 0:No.data)||{},Yn.field.data.selectedRecord=Gr,Yn.field.data.selected=to}},getCheckboxProps:function(Gr){return{"aria-label":"checkbox"}},renderCell:function(Gr,to,lo,mo){if(!Yt&&!bn)return mo;var No=Ht==null?void 0:Ht.current,Jo=(Ht==null?void 0:Ht.pageSize)||20;return No?lo=lo+(No-1)*Jo+1:lo=lo+1,to.__index&&(lo=(0,xe.YR)(to.__index)),(0,D.jsxs)("div",{role:"button","aria-label":"table-index-".concat(lo),className:x()(Gr?"checked":null,vn,i()({},an,pn)),children:[(0,D.jsxs)("div",{className:x()(Gr?"checked":null,fn),children:[Yt&&(0,D.jsx)(lt,{id:Ar(to)}),bn&&(0,D.jsx)(ut,{index:lo})]}),pn&&(0,D.jsx)("div",{className:x()("nb-origin-node",Gr?"checked":null,cn),children:mo})]})}},Qr):void 0}},[Qr,$e,Gt,bn,Yt,Ce,Ar,pn,Qr,Ht,Yn]),Rr=(0,I.useCallback)(function(Vr){var Gr,to=Vr.children;return Yt?I.createElement(L.SortableContext,{items:(Ke==null||(Gr=Ke.map)===null||Gr===void 0?void 0:Gr.call(Ke,Ar))||[]},to):I.createElement(I.Fragment,{},to)},[Yt,Ar]),Hr=(0,u.fMB)(),Yr=Hr.height,eo=Hr.tableSizeRefCallback,ho=(0,I.useMemo)(function(){return{x:"max-content",y:Yr}},[Yr,wr]),co=(0,I.useCallback)(function(Vr){return $t.includes(Vr[sn])?jn:""},[$t,jn,JSON.stringify(sn)]),po=(0,I.useCallback)(function(Vr,Gr){var to=Vr?[].concat(r()(qe),[Gr[dt.getPrimaryKey()]]):qe.filter(function(lo){return Gr[dt.getPrimaryKey()]!==lo});Be(to),Bn==null||Bn(Vr,Gr)},[qe,Bn,dt]),Wo=(0,I.useMemo)(function(){return{onExpand:po,expandedRowKeys:qe}},[qe,po]);return(0,D.jsx)(P,{spinning:!!wn,children:(0,D.jsx)(l.BlockRequestLoadingContext.Provider,{value:!1,children:(0,D.jsx)(mr,h()(h()(h()({tableHeight:Yr,SortableWrapper:Rr,tableSizeRefCallback:eo,defaultRowKey:fr,dataSource:wr},De),_r),{},{paginationProps:Ht,components:ao,onTableChange:ln,onRow:ir,rowClassName:co,scroll:ho,columns:Ut,expandable:Wo,field:Ce,size:Xe}))})})}),{useLoading:function(){var ct=(0,l.useDataBlockRequest)(),Mt=(0,l.useFlag)(),kt=Mt.isInSubTable;return kt?!1:!!(ct!=null&&ct.loading)},SkeletonComponent:le}),{displayName:"NocoBaseTable"})},31018:function(He,ae,e){"use strict";e.d(ae,{$Q:function(){return c},J9:function(){return Z},YR:function(){return k}});var Z=function(g){return g["x-component"]==="CollectionField"},c=function(g){var C;return((C=g["x-component"])===null||C===void 0?void 0:C.endsWith(".Column"))>-1};function k(i){var g=[];return i==null||i.split(".").forEach(function(C){isNaN(C)||g.push(String(Number(C)+1))}),g.join(".")}},29050:function(He,ae,e){"use strict";e.d(ae,{m:function(){return K},p:function(){return v}});var Z=e(68400),c=e.n(Z),k=e(97133),i=e(80844),g=e(67294),C=e(62954),A=e(85893),r,K=(0,k.css)(r||(r=c()([`
  position: relative;
  &:hover {
    > .general-schema-designer {
      display: block;
    }
  }
  > .general-schema-designer {
    position: absolute;
    z-index: 999;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    display: none;
    background: var(--colorBgSettingsHover) !important;
    border: 0 !important;
    top: -16px !important;
    bottom: -16px !important;
    left: -16px !important;
    right: -16px !important;
    pointer-events: none;
    > .general-schema-designer-icons {
      position: absolute;
      right: 2px;
      top: 2px;
      line-height: 16px;
      pointer-events: all;
      .ant-space-item {
        background-color: var(--colorSettings);
        color: #fff;
        line-height: 16px;
        width: 16px;
        padding-left: 1px;
        align-self: stretch;
      }
    }
  }
`]))),v=(0,i.observer)(function(j){var h=(0,C.ett)();return(0,A.jsxs)(C.TRI,{className:K,children:[(0,A.jsx)(h,{}),j.children]})},{displayName:"TableColumnActionBar"})},70027:function(He,ae,e){"use strict";e.d(ae,{h:function(){return A},z:function(){return C}});var Z=e(80844),c=e(67294),k=e(21143),i=e(29050),g=e(85893),C=function(){var K=(0,k.useCollection_deprecated)(),v=K.getField,j=(0,k.useCompile)(),h=(0,Z.useFieldSchema)(),M=h.reduceProperties(function(y,L){return L["x-component"]==="CollectionField"?L:y},null);if(!M)return{};var n=v(M.name);return{columnSchema:h,fieldSchema:M,collectionField:n,uiSchema:j(n==null?void 0:n.uiSchema)}},A=function(K){var v=(0,k.useDesigner)(),j=(0,Z.useField)(),h=C(),M=h.fieldSchema,n=h.uiSchema,y=h.collectionField,L=(0,k.useCompile)();return(0,c.useEffect)(function(){j.title||M&&n!=null&&n.title&&(j.title=n==null?void 0:n.title)},[n==null?void 0:n.title]),(0,g.jsxs)(k.SortableItem,{className:i.m,children:[(0,g.jsx)(v,{fieldSchema:M,uiSchema:n,collectionField:y}),j.title||L(n==null?void 0:n.title)]})}},47204:function(He,ae,e){"use strict";e.d(ae,{c:function(){return A},g:function(){return r}});var Z=e(13769),c=e.n(Z),k=e(67294),i=e(85893),g=["children"],C=k.createContext({}),A=function(v){var j=v.children,h=c()(v,g);return(0,i.jsx)(C.Provider,{value:h,children:j})},r=function(){return k.useContext(C)}},20421:function(He,ae,e){"use strict";e.d(ae,{Qm:function(){return Ee},fU:function(){return _e},gq:function(){return w}});var Z=e(19632),c=e.n(Z),k=e(5574),i=e.n(k),g=e(97857),C=e.n(g),A=e(13769),r=e.n(A),K=e(90674),v=e(84249),j=e(38308),h=e(3407),M=e(33859),n=e(80844),y=e(5914),L=e(15867),o=e(38925),a=e(79801),R=e(42075),E=e(26410),$=e(83062),Q=e(48807),z=e(93967),p=e.n(z),b=e(93162),f=e.n(b),x=e(30351),m=e.n(x),F=e(67294),I=e(26793),d=e(92879),u=e(38287),l=e(15503),S=e(84577),H=e(9780),O=e(40932),N=e(92601),t=e(85893),B=["onChange"],X=["value","onChange","disabled","multiple","size"],V=["rules"],U=["tipContent","onChange"],D=["rules"],ne=["title"];O.BD.add({match:function(me){return(0,O.tP)(me,"image/*")},getThumbnailURL:function(me){return me.preview?(0,O.Xg)(me.preview):me.url?(0,O.Xg)("".concat(me.url).concat(me.thumbnailRule||"")):me.originFileObj?URL.createObjectURL(me.originFileObj):null},Previewer:function(me){var pe,ee,ue,ge,Ie=me.index,Ae=me.list,Le=me.onSwitchIndex,Te=(0,F.useCallback)(function(je){je.preventDefault();var Pe=Ae[Ie];(0,b.saveAs)(Pe.url,"".concat(Pe.title).concat(Pe.extname))},[Ie,Ae]);return(0,t.jsx)(d.Z,{mainSrc:(0,O.Xg)((pe=Ae[Ie])===null||pe===void 0?void 0:pe.url),nextSrc:(0,O.Xg)((ee=Ae[(Ie+1)%Ae.length])===null||ee===void 0?void 0:ee.url),prevSrc:(0,O.Xg)((ue=Ae[(Ie+Ae.length-1)%Ae.length])===null||ue===void 0?void 0:ue.url),onCloseRequest:function(){return Le(null)},onMovePrevRequest:function(){return Le((Ie+Ae.length-1)%Ae.length)},onMoveNextRequest:function(){return Le((Ie+1)%Ae.length)},imageTitle:(ge=Ae[Ie])===null||ge===void 0?void 0:ge.title,toolbarButtons:[(0,t.jsx)("button",{style:{fontSize:22,background:"none",lineHeight:1},type:"button","aria-label":"Download",title:"Download",className:"ril-zoom-in ril__toolbarItemChild ril__builtinButton",onClick:Te,children:(0,t.jsx)(K.Z,{})},"preview-img")]})}});var q=["application/pdf","audio/*","image/*","video/*","text/*"];function J(se){var me=se.index,pe=se.list,ee=se.onSwitchIndex,ue=(0,I.$)(),ge=ue.t,Ie=pe[me],Ae=(0,O.Xg)(Ie.url),Le=(0,F.useCallback)(function(Pe){Pe.preventDefault(),Pe.stopPropagation(),window.open(Ae)},[Ae]),Te=(0,F.useCallback)(function(Pe){Pe.preventDefault(),Pe.stopPropagation(),(0,b.saveAs)(Ae,"".concat(Ie.title).concat(Ie.extname))},[Ie.extname,Ie.title,Ae]),je=(0,F.useCallback)(function(){ee(null)},[ee]);return(0,t.jsx)(y.Z,{open:me!=null,title:Ie.title,onCancel:je,footer:[(0,t.jsx)(L.ZP,{onClick:Le,children:ge("Open in new window")},"open"),(0,t.jsx)(L.ZP,{onClick:Te,children:ge("Download")},"download"),(0,t.jsx)(L.ZP,{onClick:je,children:ge("Close")},"close")],width:"85vw",centered:!0,children:(0,t.jsx)("div",{style:{maxWidth:"100%",maxHeight:"calc(100vh - 256px)",height:"90vh",width:"100%",background:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",overflowY:"auto"},children:q.some(function(Pe){return(0,O.tP)(Ie,Pe)})?(0,t.jsx)("iframe",{src:Ae,style:{width:"100%",maxHeight:"90vh",flex:"1 1 auto",border:"none"}}):(0,t.jsx)(o.Z,{type:"warning",description:ge("File type is not supported for previewing, please download it to preview."),showIcon:!0})})})}function Y(se){var me=se.onChange,pe=r()(se,B),ee=(0,F.useCallback)(function(ue){me==null||me((0,O.$W)(ue.fileList))},[me]);return(0,t.jsx)(a.Z,C()(C()({},(0,O.NP)(pe)),{},{onChange:ee}))}function P(se){var me=se.value,pe=se.onChange,ee=se.disabled,ue=se.multiple,ge=se.size,Ie=r()(se,X),Ae=(0,N.y)(),Le=Ae.wrapSSR,Te=Ae.hashId,je=Ae.componentCls,Pe=Q.Z.default?Q.Z.default:Q.Z;return Pe(je),Le((0,t.jsx)("div",{className:p()("".concat(je,"-wrapper"),"".concat(je,"-picture-card-wrapper"),"nb-upload",ge?"nb-upload-".concat(ge):null,Te),children:(0,t.jsx)("div",{className:p()("".concat(je,"-list"),"".concat(je,"-list-picture-card")),children:(0,t.jsx)(_e,C()({disabled:ee,readPretty:!0,multiple:ue,value:me,onChange:pe},Ie))})}))}var w=(0,n.connect)(Y,(0,n.mapProps)({value:"fileList"}),(0,n.mapReadPretty)(P));w.ReadPretty=P;function ie(se){var me=se??O.A,pe=(0,I.$)(),ee=pe.t,ue=pe.i18n,ge=m()(me,{base:2,standard:"jedec",locale:ue.language});return me!==0?ee("File size should not exceed {{size}}.",{size:ge}):""}function G(se){var me,pe=se.file,ee=(0,N.y)(),ue=ee.componentCls,ge=(me=O.BD.getTypeByFile(pe))!==null&&me!==void 0?me:{},Ie=ge.getThumbnailURL,Ae=Ie===void 0?O.yp:Ie,Le=Ae(pe);return(0,t.jsx)("img",{src:Le,alt:pe.title,className:"".concat(ue,"-list-item-image")})}function le(se){var me,pe,ee=se.file,ue=se.disabled,ge=se.onPreview,Ie=se.onDelete,Ae=se.readPretty,Le=se.showFileName,Te=(0,N.y)(),je=Te.componentCls,Pe=(0,I.$)(),fe=Pe.t,re=(0,F.useCallback)(function(St){St.preventDefault(),St.stopPropagation(),ge==null||ge(ee)},[ee,ge]),T=(0,F.useCallback)(function(){Ie==null||Ie(ee)},[ee,Ie]),ce=(0,F.useCallback)(function(){(0,b.saveAs)(ee.url,"".concat(ee.title).concat(ee.extname))},[ee]),be=(me=O.BD.getTypeByFile(ee))!==null&&me!==void 0?me:{},oe=be.ThumbnailPreviewer,Re=oe===void 0?G:oe,Ze=[(0,t.jsx)("span",{className:"".concat(je,"-list-item-thumbnail"),children:(0,t.jsx)(Re,{file:ee})},"thumbnail"),Le!==!1&&ee.title?(0,t.jsx)("span",{className:"".concat(je,"-list-item-name"),title:ee.title,children:ee.status==="uploading"?fe("Uploading"):ee.title},"title"):null],We=ee.url?(0,t.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:(0,O.Xg)(ee.url),onClick:re,children:Ze}):(0,t.jsx)("span",{className:"".concat(je,"-span"),children:Ze}),tt=(0,t.jsxs)("div",{className:p()("".concat(je,"-list-item"),"".concat(je,"-list-item-").concat((pe=ee.status)!==null&&pe!==void 0?pe:"done"),"".concat(je,"-list-item-list-type-picture-card")),children:[(0,t.jsx)("div",{className:"".concat(je,"-list-item-info"),children:We}),(0,t.jsx)("span",{className:"".concat(je,"-list-item-actions"),children:(0,t.jsxs)(R.Z,{size:3,children:[!Ae&&ee.url&&(0,t.jsx)(L.ZP,{size:"small",type:"text",icon:(0,t.jsx)(K.Z,{}),onClick:ce}),!Ae&&!ue&&ee.status!=="uploading"&&(0,t.jsx)(L.ZP,{size:"small",type:"text",icon:(0,t.jsx)(v.Z,{}),onClick:T})]})}),ee.status==="uploading"&&(0,t.jsx)("div",{className:"".concat(je,"-list-item-progress"),children:(0,t.jsx)(E.Z,{strokeWidth:4,type:"line",showInfo:!1,percent:Number(ee.percent)})})]});return(0,t.jsx)("div",{style:{marginBottom:Le!==!1&&ee.title?"28px":"0px"},className:"".concat(je,"-list-picture-card-container ").concat(je,"-list-item-container"),children:ee.status==="error"?(0,t.jsx)($.Z,{title:ee.response,getPopupContainer:function(Tt){return Tt.parentNode},children:tt}):tt})}function xe(se){var me,pe=se.index,ee=se.onSwitchIndex,ue=se.list;if(pe==null)return null;var ge=ue[pe],Ie=(me=O.BD.getTypeByFile(ge))!==null&&me!==void 0?me:{},Ae=Ie.Previewer,Le=Ae===void 0?J:Ae;return(0,t.jsx)(Le,{index:pe,list:ue,onSwitchIndex:ee})}function _e(se){var me=se.disabled,pe=se.multiple,ee=se.value,ue=se.onChange,ge=se.readPretty,Ie=se.showFileName,Ae=(0,F.useState)([]),Le=i()(Ae,2),Te=Le[0],je=Le[1],Pe=(0,F.useState)(null),fe=i()(Pe,2),re=fe[0],T=fe[1];(0,F.useEffect)(function(){var oe=(0,O.$W)(ee);je(oe)},[ee]);var ce=(0,F.useCallback)(function(oe){var Re=Te.findIndex(function(Ze){return Ze.id===oe.id});T(Re)},[Te]),be=(0,F.useCallback)(function(oe){ue(pe?ee.filter(function(Re){return Re.id!==oe.id}):null)},[pe,ue,ee]);return(0,t.jsxs)(t.Fragment,{children:[Te.map(function(oe,Re){return(0,t.jsx)(le,{file:oe,index:Re,disabled:me,onPreview:ce,onDelete:be,readPretty:ge,showFileName:Ie},oe.id||oe.url)}),(0,t.jsx)(xe,{index:re,onSwitchIndex:T,list:Te})]})}function Ee(se){var me=se.rules,pe=r()(se,V),ee=pe.disabled,ue=pe.multiple,ge=pe.value,Ie=pe.onChange,Ae=pe.toValueItem,Le=Ae===void 0?O.e2:Ae,Te=(0,F.useState)([]),je=i()(Te,2),Pe=je[0],fe=je[1],re=(0,F.useState)([]),T=i()(re,2),ce=T[0],be=T[1],oe=(0,I.$)(),Re=oe.t,Ze=(0,N.y)(),We=Ze.componentCls,tt=(0,n.useField)(),St=(0,O.NP)(pe),Tt=(0,O.CL)(me);(0,F.useEffect)(function(){ce.length?tt.setFeedback({type:"error",code:"ValidateError",messages:[Re("Incomplete uploading files need to be resolved")]}):tt.setFeedback({})},[tt,ce,Re]);var lt=(0,F.useCallback)(function(cn){var _n=cn.fileList.filter(function(en){return en.status!=="done"}).map(O.gY);if(be(_n),ue){var zt=cn.fileList.filter(function(en){return en.status==="done"});if(zt.length){var xn=[].concat(c()(Pe),c()(zt.map(function(en){var Rn;return Le((Rn=en.response)===null||Rn===void 0?void 0:Rn.data)})));_n.length?fe(xn):(Ie==null||Ie([].concat(c()(ge||[]),c()(xn))),fe([]))}}else{var Qt=cn.fileList.find(function(en){return en.uid===cn.file.uid});if(Qt.status==="done"){var Et;Ie==null||Ie(Le((Et=Qt.response)===null||Et===void 0?void 0:Et.data)),be([])}}},[ue,ge,Pe,Le,Ie]),ut=(0,F.useCallback)(function(cn){be(function(_n){var zt=_n.indexOf(cn);return _n.splice(zt,1),c()(_n)})},[]),nt=(0,F.useCallback)(function(cn){fe(function(_n){var zt=_n.indexOf(cn);return _n.splice(zt,1),c()(_n)})},[]),Je=(0,S.Co)("QRCodeUploader"),hn=me??{},mn=hn.mimetype,vn=hn.size,an=ie(vn),fn=!ee&&(ue||(!ge||Array.isArray(ge)&&!ge.length)&&!ce.length);return(0,t.jsxs)(t.Fragment,{children:[Pe.map(function(cn,_n){return(0,t.jsx)(le,{file:cn,index:_n,disabled:ee,onDelete:nt},cn.id)}),ce.map(function(cn,_n){return(0,t.jsx)(le,{file:cn,index:_n,disabled:ee,onDelete:ut},cn.uid)}),(0,t.jsx)("div",{className:p()("".concat(We,"-list-picture-card-container"),"".concat(We,"-list-item-container")),style:fn?{}:{display:"none"},children:(0,t.jsx)($.Z,{title:an,children:(0,t.jsx)(a.Z,C()(C()({accept:mn},St),{},{disabled:ee,multiple:ue,listType:"picture-card",fileList:ce,beforeUpload:Tt,onChange:lt,showUploadList:!1,children:fn?(0,t.jsxs)("span",{children:[(0,t.jsx)(j.Z,{}),(0,t.jsx)("br",{})," ",Re("Upload")]}):null}))})}),fn&&Je&&(0,t.jsx)(Je,{disabled:ee,multiple:ue,value:ge,onChange:Ie})]})}function ze(se){var me=(0,N.y)(),pe=me.wrapSSR,ee=me.hashId,ue=me.componentCls;return pe((0,t.jsx)("div",{className:p()("".concat(ue,"-wrapper"),"".concat(ue,"-picture-card-wrapper"),"nb-upload",ee),children:(0,t.jsxs)("div",{className:p()("".concat(ue,"-list"),"".concat(ue,"-list-picture-card")),children:[(0,t.jsx)(_e,C()({},se)),(0,t.jsx)(Ee,C()({},se))]})}))}ze.ReadPretty=P,w.Attachment=(0,l.t)((0,n.connect)(ze,(0,n.mapReadPretty)(ze.ReadPretty)),{displayName:"Upload.Attachment"}),w.Dragger=(0,n.connect)(function(se){var me=se.tipContent,pe=se.onChange,ee=r()(se,U),ue=(0,N.y)(),ge=ue.wrapSSR,Ie=ue.hashId,Ae=ue.componentCls,Le=(0,F.useCallback)(function(Te){pe==null||pe((0,O.$W)(Te.fileList))},[pe]);return ge((0,t.jsx)("div",{className:p()("".concat(Ae,"-dragger"),Ie),children:(0,t.jsxs)(a.Z.Dragger,C()(C()({},(0,O.NP)(ee)),{},{onChange:Le,children:[me,se.children]}))}))},(0,n.mapProps)({value:"fileList"})),w.DraggerV2=(0,l.t)((0,n.connect)(function(se){var me=se.rules,pe=r()(se,D),ee=(0,I.$)(),ue=ee.t,ge=ue("Click or drag file to this area to upload"),Ie=(0,H.w)(pe),Ae=Ie.title,Le=Ae===void 0?ge:Ae,Te=r()(Ie,ne),je=(0,F.useState)(!1),Pe=i()(je,2),fe=Pe[0],re=Pe[1],T=(0,N.y)(),ce=T.wrapSSR,be=T.hashId,oe=T.componentCls,Re=(0,O.CL)(me),Ze=me??{},We=Ze.size,tt=Ze.mimetype,St=ie(We),Tt=(0,F.useCallback)(function(lt){var ut=lt.fileList,nt=Te.onChange;nt==null||nt(ut),ut.some(function(Je){return Je.status==="uploading"})?re(!0):re(!1)},[Te]);return ce((0,t.jsx)("div",{className:p()("".concat(oe,"-dragger"),be),children:(0,t.jsxs)(a.Z.Dragger,C()(C()({},(0,O.NP)(C()(C()(C()({},pe),Te),{},{accept:tt,onChange:Tt,beforeUpload:Re}))),{},{children:[(0,t.jsx)("p",{className:"".concat(oe,"-drag-icon"),children:fe?(0,t.jsx)(h.Z,{style:{fontSize:36},spin:!0}):(0,t.jsx)(M.Z,{})}),(0,t.jsx)("p",{className:"".concat(oe,"-text"),children:Le}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{className:"".concat(oe,"-hint"),children:ue("Support for a single or bulk upload.")}),(0,t.jsx)("li",{className:"".concat(oe,"-hint"),children:St})]})]}))}))},(0,n.mapProps)({value:"fileList"})),{displayName:"Upload.DraggerV2"});var Se=null},78472:function(He,ae,e){"use strict";e.d(ae,{$S:function(){return c.$},BD:function(){return Z.BD},Qm:function(){return k.Qm},Xg:function(){return Z.Xg},fU:function(){return k.fU},gq:function(){return k.gq}});var Z=e(40932),c=e(92601),k=e(20421)},40932:function(He,ae,e){"use strict";e.d(ae,{A:function(){return $},BD:function(){return z},Xg:function(){return N},yp:function(){return x},tP:function(){return p},gY:function(){return F},$W:function(){return l},e2:function(){return d},CL:function(){return O},NP:function(){return I}});var Z=e(97857),c=e.n(Z),k=e(5574),i=e.n(k),g=e(12444),C=e.n(g),A=e(72004),r=e.n(A),K=e(9783),v=e.n(K),j=e(84327),h=e(26854),M=e(24193),n=e.n(M),y=e(67294),L=e(26793),o=e(12174),a=window.__nocobase_dev_public_path__||window.__nocobase_public_path__||"/",R=[{ext:/\.docx?$/i,icon:"/file-placeholder/docx-200-200.png"},{ext:/\.pptx?$/i,icon:"/file-placeholder/pptx-200-200.png"},{ext:/\.jpe?g$/i,icon:"/file-placeholder/jpeg-200-200.png"},{ext:/\.pdf$/i,icon:"/file-placeholder/pdf-200-200.png"},{ext:/\.png$/i,icon:"/file-placeholder/png-200-200.png"},{ext:/\.eps$/i,icon:"/file-placeholder/eps-200-200.png"},{ext:/\.ai$/i,icon:"/file-placeholder/ai-200-200.png"},{ext:/\.gif$/i,icon:"/file-placeholder/gif-200-200.png"},{ext:/\.svg$/i,icon:"/file-placeholder/svg-200-200.png"},{ext:/\.xlsx?$/i,icon:"/file-placeholder/xlsx-200-200.png"},{ext:/\.psd?$/i,icon:"/file-placeholder/psd-200-200.png"},{ext:/\.(wav|aif|aiff|au|mp1|mp2|mp3|ra|rm|ram|mid|rmi)$/i,icon:"/file-placeholder/audio-200-200.png"},{ext:/\.(avi|wmv|mpg|mpeg|vob|dat|3gp|mp4|mkv|rm|rmvb|mov|flv)$/i,icon:"/file-placeholder/video-200-200.png"},{ext:/\.(zip|rar|arj|z|gz|iso|jar|ace|tar|uue|dmg|pkg|lzh|cab)$/i,icon:"/file-placeholder/zip-200-200.png"}].map(function(t){return{ext:t.ext,icon:a+t.icon.slice(1)}}),E=a+"file-placeholder/unknown-200-200.png",$=1024*1024*20,Q=function(){function t(){C()(this,t),v()(this,"types",[])}return r()(t,[{key:"add",value:function(X){this.types.unshift(X)}},{key:"getTypeByFile",value:function(X){return this.types.find(function(V){return V.match(X)})}}]),t}(),z=new Q;function p(t,B){if(!t)return!1;if(t.originFileObj)return n()(t.type,B);if(t.mimetype)return n()(t.mimetype,B);if(t.url){var X=t.url.split("?"),V=i()(X,1),U=V[0];return n()(h.Z.getType(U)||"",B)}return!1}var b=function(B){return(0,j.isValid)(B)?Object.keys(B).length===0?[]:(0,j.toArr)(B):[]},f=function(B,X){return X&&(0,j.isArr)(X.include)?X.include.some(function(V){return B.test(V)}):X&&(0,j.isArr)(X.exclude)?!X.exclude.some(function(V){return B.test(V)}):!0};function x(t){for(var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=0;X<R.length;X++)if(R[X].ext.test(t.extname||t.filename||t.url||t.name))return f(R[X].ext,B)?R[X].icon||E:t.name;return E}function m(t){var B,X=t.error,V=t.response;if(X instanceof Error&&"isAxiosError"in X)if(X.response){var U,D;return(U=X.response.data)===null||U===void 0||(U=U.errors)===null||U===void 0||(D=U.map)===null||D===void 0?void 0:D.call(U,function(J){return J==null?void 0:J.message}).join(", ")}else return X.message;if(!V)return"";if(typeof V=="string")return V;var ne=(B=V.data)!==null&&B!==void 0?B:{},q=ne.errors;return q!=null&&q.length?q.map(function(J){return J==null?void 0:J.message}).join(", "):""}function F(t){var B=m(t);return c()(c()({},t),{},{title:t.name,response:B})}function I(t){var B=(0,o.LY)();return c()({customRequest:function(V){var U=V.action,D=V.data,ne=V.file,q=V.filename,J=V.headers,Y=V.onError,P=V.onProgress,w=V.onSuccess,ie=V.withCredentials,G=new FormData;return D&&Object.keys(D).forEach(function(le){G.append(le,D[le])}),G.append(q,ne),B.axios.post(U,G,{withCredentials:ie,headers:J,onUploadProgress:function(xe){var _e=xe.total,Ee=xe.loaded;P({percent:Math.round(Ee/_e*100).toFixed(2)},ne)}}).then(function(le){var xe=le.data;w(xe,ne)}).catch(Y).finally(function(){}),{abort:function(){console.log("upload progress is aborted.")}}}},t)}function d(t){return t}var u=function(B){var X;return typeof B=="string"?{url:B}:((X=B)!==null&&X!==void 0&&(X=X.response)!==null&&X!==void 0&&X.data&&(B=c()({uid:B.uid},B.response.data)),c()(c()({},B),{},{id:B.id||B.uid,title:B.title||B.name}))},l=function(B){return b(B).filter(Boolean).map(u)},S={size:function(B,X){var V=X??$;return V===0||B.size<=V?null:"File size exceeds the limit"},mimetype:function(B){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*",V=X.toString().trim();return!V||V==="*"||V.split(",").filter(Boolean).some(n()(B.type))?null:"File type is not allowed"}};function H(t,B){if(!B)return null;var X=Object.keys(B);if(!X.length)return null;for(var V=0,U=X;V<U.length;V++){var D=U[V],ne=S[D](t,B[D]);if(ne)return ne}return null}function O(t){var B=(0,L.$)(),X=B.t;return(0,y.useCallback)(function(V){var U=H(V,t);return U?(V.status="error",V.response=X(U)):V.status==="error"&&(delete V.status,delete V.response),!U},[t])}function N(t){if(!t||t.includes("X-Amz-Content-Sha256"))return t;var B=t.split("?"),X=i()(B,2),V=X[0],U=X[1],D=U===void 0?"":U,ne=V.split("/"),q=ne.pop();ne.push(encodeURIComponent(q));var J="".concat(ne.join("/")).concat(D?"?".concat(D):"");return J}},92601:function(He,ae,e){"use strict";e.d(ae,{$:function(){return g},y:function(){return i}});var Z=e(9783),c=e.n(Z),k=e(46917),i=(0,k.l6)("upload",function(C){var A,r,K,v=C.componentCls,j=C.antCls;return c()({},"".concat(v,"-wrapper"),(K={"&.nb-upload.nb-upload-small":(A={},c()(A,"".concat(v,"-list-picture-card-container"),{margin:"0 3px 3px 0 !important",height:"32px !important",width:"32px !important",marginBlock:"0 !important"}),c()(A,"".concat(v,"-list-picture-card ").concat(v,"-list-item-name").concat(v,"-list-item-name"),{display:"none !important"}),c()(A,"".concat(v,"-list-picture ").concat(v,"-list-item, ").concat(v,"-list-picture-card ").concat(v,"-list-item"),c()({borderRadius:"4px",padding:"1px !important"},"".concat(v,"-list-item-image"),{borderRadius:"2px"})),A),"&.nb-upload-large":c()({},"".concat(v,"-list-picture-card-container"),{margin:"0 3px 3px 0 !important",height:"160px !important",width:"160px !important",marginBlock:"0 28px !important"}),"&.nb-upload":(r={},c()(r,"".concat(v,"-list-item, ").concat(v,"-list-item-list-type-picture-card"),{padding:"3px !important"}),c()(r,"".concat(v,"-list-item-thumbnail"),{img:{objectFit:"cover !important"}}),c()(r,"".concat(v,"-list-item-actions"),c()({left:"auto !important",right:"2px !important",top:"2px !important",transform:"none !important",width:"fit-content !important"},"".concat(j,"-btn-text:hover, ").concat(j,"-btn-text:focus"),{background:"rgba(0, 0, 0, 0.4)"})),c()(r,"".concat(v,"-list-picture-card ").concat(v,"-list-item-info"),{overflow:"inherit",width:"100%",height:"100%"}),c()(r,"".concat(v,"-list-picture-card ").concat(v,"-list-item-name"),{display:"block !important",marginTop:"5px",fontSize:"13px",color:"#636363"}),c()(r,"".concat(v,"-list-picture-card ").concat(v,"-list-item::before"),{display:"none !important"}),c()(r,"".concat(v,"-list-picture-card ").concat(v,"-list-item-progress"),{bottom:"calc(50% - 11px)",left:"".concat(C.margin/2,"px"),pointerEvents:"none"}),c()(r,"".concat(j,"-btn"),{background:"rgba(0, 0, 0, 0.5)"}),c()(r,"".concat(v,"-list-picture-card-container"),{}),r)},c()(K,"".concat(v,"-list-item-error"),c()({},"".concat(v,"-list-item-info img"),{opacity:.6})),c()(K,"".concat(v,"-drag"),c()({},"".concat(v,"-drag-container"),{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",ul:c()({color:C.colorTextSecondary},"".concat(v,"-hint"),{textAlign:"left"})})),K))}),g=i},20486:function(He,ae,e){"use strict";e.d(ae,{f:function(){return E}});var Z=e(97857),c=e.n(Z),k=e(68400),i=e.n(k),g=e(5574),C=e.n(g),A=e(13769),r=e.n(A),K=e(67294),v=e(97133),j=e(69677),h=e(15867),M=e(88969),n=e(85893),y,L,o,a=["changeOnSelect","component","fieldNames","scope","buttonClass"];function R($,Q){var z,p=(z=Object.getOwnPropertyDescriptor($.constructor.prototype,"value"))===null||z===void 0?void 0:z.set;p==null||p.call($,Q),$.dispatchEvent(new Event("input",{bubbles:!0}))}function E($){var Q=(0,K.useRef)(null),z=$.changeOnSelect,p=$.component,b=p===void 0?j.Z.TextArea:p,f=$.fieldNames,x=$.scope,m=$.buttonClass,F=r()($,a),I=typeof x=="function"?x():x,d=(0,K.useState)(I||[]),u=C()(d,2),l=u[0],S=u[1];function H(O){if(Q.current){var N="{{".concat(O.join("."),"}}"),t=Q.current.resizableTextArea.textArea,B=t.value.slice(0,t.selectionStart)+N+t.value.slice(t.selectionEnd),X=[t.selectionStart,t.selectionStart+N.length];R(t,B),t.setSelectionRange.apply(t,X),t.focus()}}return(0,n.jsxs)("div",{className:(0,v.css)(y||(y=i()([`
        position: relative;
        .ant-input {
          width: 100%;
        }
      `]))),children:[(0,n.jsx)(b,c()(c()({},F),{},{ref:Q})),(0,n.jsx)(h.ZP.Group,{className:(0,v.css)(L||(L=i()([`
          position: absolute;
          right: 0;
          top: 0;
          .ant-btn-sm {
            font-size: 85%;
          }
        `]))),children:(0,n.jsx)(M.m,{className:m??(0,v.css)(o||(o=i()([`
              &:not(:hover) {
                border-right-color: transparent;
                border-top-color: transparent;
              }
              background-color: transparent;
            `]))),fieldNames:f,options:l,setOptions:S,onInsert:H,changeOnSelect:z})})]})}},57340:function(He,ae,e){"use strict";e.d(ae,{K:function(){return V}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(68400),C=e.n(g),A=e(19632),r=e.n(A),K=e(5574),v=e.n(K),j=e(96695),h=e.n(j),M=e(97133),n=e(80844),y=e(9361),L=e(42075),o=e(47673),a=e(67294),R=e(97762),E=e(91036),$=e.n(E),Q=e(84157),z=e(84327),p=e(62954),b=e(88969),f=e(74866),x=e(85893),m,F,I,d;function u(q,J){var Y,P,w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ie=w.selectPastedContent,G=ie===void 0?!1:ie,le=w.range,xe=(Y=(P=window).getSelection)===null||Y===void 0?void 0:Y.call(P),_e=xe==null?void 0:xe.getRangeAt(0);if(_e){if(le){var Ee=Array.from(q.childNodes);le[0]===-1?le[1]&&Ee[le[1]-1]?_e.setStartAfter(Ee[le[1]-1]):_e.setStart(q,0):_e.setStart(Ee[le[0]],le[1]),le[2]===-1?le[3]&&Ee[le[3]-1]?_e.setEndAfter(Ee[le[3]-1]):_e.setEnd(q,0):_e.setEnd(Ee[le[2]],le[3])}var ze=document.createElement("div");ze.innerHTML=J;for(var Se=document.createDocumentFragment(),se;ze.firstChild;)se=Se.appendChild(ze.firstChild);var me=Se.firstChild;if(_e.deleteContents(),_e.insertNode(Se),se){var pe=new Range;pe.setStartAfter(se),G?me&&pe.setStartBefore(me):pe.collapse(!0),xe.removeAllRanges(),xe.addRange(pe)}}}function l(q){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["{{","}}"],Y=[],P=h()(q.childNodes),w;try{for(P.s();!(w=P.n()).done;){var ie=w.value;ie.nodeName==="SPAN"&&ie.dataset.variable?Y.push("".concat(J[0]).concat(ie.dataset.variable).concat(J[1])):Y.push(ie.textContent)}}catch(G){P.e(G)}finally{P.f()}return Y.join("")}function S(q,J){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:["{{","}}"],P=new RegExp("".concat(Y[0],"\\s*([^{}]+)\\s*").concat(Y[1]),"g");return q.replace(P,function(w,ie){var G,le=ie.trim();return(G=O(le,J))!==null&&G!==void 0?G:""})}function H(q){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{value:"value",label:"label"},Y=new Map,P=h()(q),w;try{for(P.s();!(w=P.n()).done;){var ie=w.value;if(Y.set(ie[J.value],[ie[J.label]]),ie.children){var G=h()(H(ie.children,J)),le;try{for(G.s();!(le=G.n()).done;){var xe=v()(le.value,2),_e=xe[0],Ee=xe[1];Y.set("".concat(ie[J.value],".").concat(_e),[ie[J.label]].concat(r()(Ee)))}}catch(ze){G.e(ze)}finally{G.f()}}}}catch(ze){P.e(ze)}finally{P.f()}return Y}function O(q,J){var Y=J.get(q);return Y&&(Y=Y.map(function(P){return(0,z.isReactElement)(P)?(0,R.Dq)(P):P})),'<span class="ant-tag ant-tag-blue" contentEditable="false" data-variable="'.concat(q,'">').concat(Y?Y.join(" / "):"...","</span>")}function N(q,J,Y){if(J===-1){var P,w,ie=Y,G=!1;ie&&((P=q[ie-1])===null||P===void 0?void 0:P.nodeName)==="#text"&&((w=q[ie])===null||w===void 0?void 0:w.nodeName)==="#text"&&(G=!0);for(var le=0,xe=Y-1;xe>=0;xe--){var _e,Ee;if(G){var ze;((ze=q[xe])===null||ze===void 0?void 0:ze.nodeName)==="#text"?le+=q[xe].textContent.length:G=!1}((_e=q[xe])===null||_e===void 0?void 0:_e.nodeName)==="#text"&&((Ee=q[xe+1])===null||Ee===void 0?void 0:Ee.nodeName)==="#text"&&(ie-=1)}return le?[ie,le]:[-1,ie]}else{for(var Se=0,se=0,me=0;me<J+1;me++){var pe;if(((pe=q[me])===null||pe===void 0?void 0:pe.nodeName)==="#text"){var ee;me!==J&&q[me+1]&&((ee=q[me+1])===null||ee===void 0?void 0:ee.nodeName)!=="#text"&&(Se+=1),se+=me===J?Y:q[me].textContent.length}else Se+=1,se=0}return[Se,se]}}function t(q){var J,Y,P=(J=(Y=window).getSelection)===null||J===void 0?void 0:J.call(Y),w=P==null?void 0:P.getRangeAt(0);if(!w)return[-1,0,-1,0];var ie=Array.from(q.childNodes);if(!ie.length)return[-1,0,-1,0];var G=w.startContainer===q?-1:ie.indexOf(w.startContainer),le=w.endContainer===q?-1:ie.indexOf(w.endContainer),xe=[].concat(r()(N(ie,G,w.startOffset)),r()(N(ie,le,w.endOffset)));return xe}var B={value:"value",label:"label"};function X(q){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["{{","}}"],Y=J.join(" ");return(0,a.useMemo)(function(){var P;if(!(q!=null&&q.trim()))return[];var w=new RegExp("".concat(J[0],"\\s*([^{}]+)\\s*").concat(J[1]),"g"),ie=q.match(w);return(P=ie==null?void 0:ie.map(function(G){return G.replace(w,"$1")}))!==null&&P!==void 0?P:[]},[q,Y])}function V(q){var J=(0,f.y)(),Y=J.wrapSSR,P=J.hashId,w=J.componentCls,ie=q.scope,G=q.onChange,le=q.changeOnSelect,xe=q.style,_e=q.fieldNames,Ee=q.delimiters,ze=Ee===void 0?["{{","}}"]:Ee,Se=q.addonBefore,se=typeof q.value=="string"?q.value:q.value==null?"":q.value.toString(),me=X(se,ze),pe=(0,a.useRef)(null),ee=(0,a.useState)([]),ue=v()(ee,2),ge=ue[0],Ie=ue[1],Ae=(0,n.useForm)(),Le=(0,a.useMemo)(function(){return H(ge,_e||B)},[_e,ge]),Te=(0,a.useState)(!1),je=v()(Te,2),Pe=je[0],fe=je[1],re=(0,a.useState)(!1),T=v()(re,2),ce=T[0],be=T[1],oe=(0,a.useState)(function(){return S(se??"",Le,ze)}),Re=v()(oe,2),Ze=Re[0],We=Re[1],tt=(0,a.useState)([-1,0,-1,0]),St=v()(tt,2),Tt=St[0],lt=St[1];(0,o.ZP)("ant-input");var ut=y.Z.useToken(),nt=ut.token,Je=ze.join(" ");(0,a.useEffect)(function(){U(ie,me).then(function(xn){Ie(xn)}).catch(console.error)},[ie,JSON.stringify(me)]),(0,a.useEffect)(function(){We(S(se??"",Le,ze)),ce||lt([-1,0,-1,0])},[se,Le,Je]),(0,a.useEffect)(function(){var xn=pe.current;if(xn){var Qt=new Range;if(ce){var Et,en;if(Tt.join()==="-1,0,-1,0")return;var Rn=(Et=(en=window).getSelection)===null||Et===void 0?void 0:Et.call(en);if(Rn)try{var An=Array.from(xn.childNodes);An.length&&(Tt[0]===-1?Tt[1]&&Qt.setStartAfter(An[Tt[1]-1]):Qt.setStart(An[Tt[0]],Tt[1]),Tt[2]===-1?Tt[3]&&Qt.setEndAfter(An[Tt[3]-1]):Qt.setEnd(An[Tt[2]],Tt[3])),Qt.collapse(!0),Rn.removeAllRanges(),Rn.addRange(Qt)}catch{}}else{var Jn=xn.lastChild;if(Jn){Qt.setStartAfter(Jn),Qt.setEndAfter(Jn);var Zn=Array.from(xn.childNodes),rr=Qt.startContainer===xn?-1:Zn.indexOf(Jn),mr=Qt.startContainer===xn?-1:Zn.indexOf(Jn);lt([rr,Qt.startOffset,mr,Qt.endOffset])}}}},[Ze]);var hn=(0,a.useCallback)(function(xn){var Qt=xn.filter(function(Rn){return!!Rn.trim()}),Et=pe.current;if(!(!Et||!Qt)){Et.focus();var en=O(Qt.join("."),Le);u(Et,en,{range:Tt}),be(!0),lt(t(Et)),G(l(Et,ze))}},[Le,G,Tt,Je]),mn=(0,a.useCallback)(function(xn){var Qt=xn.currentTarget;Pe||(be(!0),lt(t(Qt)),G(l(Qt,ze)))},[Pe,G,Je]),vn=(0,a.useCallback)(function(xn){var Qt=xn.currentTarget;lt(t(Qt))},[]),an=(0,a.useCallback)(function(xn){xn.key==="Enter"&&xn.preventDefault()},[]),fn=(0,a.useCallback)(function(){fe(!0)},[]),cn=(0,a.useCallback)(function(xn){var Qt=xn.currentTarget;fe(!1),be(!0),lt(t(Qt)),G(l(Qt,ze))},[G,Je]),_n=(0,a.useCallback)(function(xn){xn.preventDefault();var Qt=xn.clipboardData.getData("text/html")||xn.clipboardData.getData("text"),Et=$()(Qt,{allowedTags:["span"],allowedAttributes:{span:["data-variable","contenteditable"]},allowedClasses:{span:["ant-tag","ant-tag-*"]},transformTags:{span:function(Rn,An){return An["data-variable"]?{tagName:Rn,attribs:An}:{}}}}).replace(/\n/g," ");be(!0),u(xn.currentTarget,Et),lt(t(xn.currentTarget)),G(l(xn.currentTarget,ze))},[G,Je]),zt=q.disabled||Ae.disabled;return Y((0,x.jsxs)(L.Z.Compact,{className:(0,M.cx)(w,P,(0,M.css)(m||(m=C()([`
          display: flex;
          .ant-input {
            flex-grow: 1;
            min-width: 200px;
            word-break: break-all;
            border-top-left-radius: `,`;
            border-bottom-left-radius: `,`;
          }
          .ant-input-disabled {
            .ant-tag {
              color: #bfbfbf;
              border-color: #d9d9d9;
            }
          }

          > .x-button {
            height: min-content;
          }
        `])),Se?"0px":"6px",Se?"0px":"6px")),children:[Se&&(0,x.jsx)("div",{className:(0,M.css)(F||(F=C()([`
            background: rgba(0, 0, 0, 0.02);
            border: 1px solid rgb(217, 217, 217);
            padding: 0px 11px;
            border-radius: 6px 0px 0px 6px;
            border-right: 0px;
          `]))),children:Se}),(0,x.jsx)("div",{role:"button","aria-label":"textbox",onInput:mn,onBlur:vn,onKeyDown:an,onPaste:_n,onCompositionStart:fn,onCompositionEnd:cn,placeholder:q.placeholder,style:xe,className:(0,M.cx)(P,"ant-input",{"ant-input-disabled":zt},(0,M.css)(I||(I=C()([`
            min-height: `,`px;
            overflow: auto;
            white-space: pre-wrap;

            &[placeholder]:empty::before {
              content: attr(placeholder);
              color: #ccc;
            }

            .ant-tag {
              display: inline;
              line-height: 19px;
              margin: 0 0.5em;
              padding: 2px 7px;
              border-radius: 10px;
            }
          `])),nt.controlHeight)),ref:pe,contentEditable:!zt,dangerouslySetInnerHTML:{__html:Ze}}),(0,x.jsx)(b.m,{options:ge,setOptions:Ie,onInsert:hn,changeOnSelect:le,fieldNames:_e||B,disabled:zt})]}))}function U(q,J){return D.apply(this,arguments)}function D(){return D=i()(c()().mark(function q(J,Y){var P,w,ie,G,le,xe,_e,Ee;return c()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:P=r()(J??[]),w=Y.map(function(se){return se.split(".")}),P=P.filter(function(se){return!se.deprecated||w.find(function(me){return me[0]===se.value})}),ie=h()(w),Se.prev=4,ie.s();case 6:if((G=ie.n()).done){Se.next=18;break}le=G.value,xe=null,_e=c()().mark(function se(){var me,pe;return c()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(me=le[Ee],ue.prev=1,Ee!==0){ue.next=6;break}xe=P.find(function(ge){return ge.value===me}),ue.next=10;break;case 6:if(!(xe.loadChildren&&!((pe=xe.children)!==null&&pe!==void 0&&pe.length))){ue.next=9;break}return ue.next=9,xe.loadChildren(xe,me,le);case 9:xe=xe.children.find(function(ge){return ge.value===me});case 10:ue.next=15;break;case 12:ue.prev=12,ue.t0=ue.catch(1),(0,Q.error)(ue.t0);case 15:case"end":return ue.stop()}},se,null,[[1,12]])}),Ee=0;case 11:if(!(Ee<le.length)){Se.next=16;break}return Se.delegateYield(_e(),"t0",13);case 13:Ee++,Se.next=11;break;case 16:Se.next=6;break;case 18:Se.next=23;break;case 20:Se.prev=20,Se.t1=Se.catch(4),ie.e(Se.t1);case 23:return Se.prev=23,ie.f(),Se.finish(23);case 26:return Se.abrupt("return",P);case 27:case"end":return Se.stop()}},q,null,[[4,20,23,26]])})),D.apply(this,arguments)}var ne=(0,M.css)(d||(d=C()([`
  overflow: auto;

  .ant-tag {
    display: inline;
    line-height: 19px;
    margin: 0 0.25em;
    padding: 2px 7px;
    border-radius: 10px;
  }
`])));V.ReadPretty=function(J){var Y=J.value,P=J.delimiters,w=P===void 0?["{{","}}"]:P,ie=typeof J.scope=="function"?J.scope():J.scope,G=(0,f.y)(),le=G.wrapSSR,xe=G.hashId,_e=G.componentCls,Ee=(0,a.useState)([]),ze=v()(Ee,2),Se=ze[0],se=ze[1],me=(0,a.useMemo)(function(){return H(Se)},[Se]),pe=(0,a.useMemo)(function(){return S(Y??"",me,w)},[w,me,Y]),ee=X(Y,w);(0,a.useEffect)(function(){U(ie,ee).then(function(ge){se(ge)}).catch(Q.error)},[ie,ee]);var ue=le((0,x.jsx)("span",{dangerouslySetInnerHTML:{__html:pe},className:(0,M.cx)(_e,xe,ne)}));return(0,x.jsx)(p.BQs,{ellipsis:!0,popoverContent:ue,children:ue})}},91053:function(He,ae,e){"use strict";e.d(ae,{_w:function(){return Ie},rj:function(){return ue},ym:function(){return ge}});var Z=e(80844),c=e(67294),k=e(15503),i=e(68400),g=e.n(i),C=e(15009),A=e.n(C),r=e(96695),K=e.n(r),v=e(99289),j=e.n(v),h=e(19632),M=e.n(h),n=e(5574),y=e.n(n),L=e(9783),o=e.n(L),a=e(97857),R=e.n(a),E=e(13769),$=e.n(E),Q=e(52677),z=e.n(Q),p=e(16646),b=e(97133),f=e(84157),x=e(69677),m=e(91992),F=e(34041),I=e(40684),d=e(42075),u=e(66309),l=e(38089),S=e(47673),H=e(93967),O=e.n(H),N=e(27484),t=e.n(N),B=e(26793),X=e(84577),V=e(2876),U=e(74866),D=e(95775),ne=e(85893),q,J=["onChange","value"],Y=["onChange","value"],P=["onChange","value"],w=["onChange","value"],ie=["component"],G=/^\s*{{\s*([^{}]+)\s*}}\s*$/;function le(Le){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Le==null)return"null";var je=z()(Le);if(je==="string"){var Pe=Le.match(G);if(Pe)return Pe[1].split(".");if(Te.stringToDate&&!Number.isNaN(Date.parse(Le)))return"date"}return je==="object"&&Le instanceof Date?"date":je}function xe(){var Le=(0,B.$)(),Te=Le.t;return(0,ne.jsx)(x.Z,{style:{width:"100%"},readOnly:!0,placeholder:"<".concat(Te("Null"),">"),className:"null-value"})}var _e={string:{label:'{{t("String")}}',value:"string",component:function(Te){var je=Te.onChange,Pe=Te.value,fe=$()(Te,J);return(0,ne.jsx)(x.Z,R()({value:Pe,onChange:function(T){return je(T.target.value)}},fe))},default:function(){return""}},number:{label:'{{t("Number")}}',value:"number",component:function(Te){var je=Te.onChange,Pe=Te.value,fe=$()(Te,Y);return(0,ne.jsx)(m.Z,R()({value:Pe,onChange:je},fe))},default:function(){return 0}},boolean:{label:'{{t("Boolean")}}',value:"boolean",component:function(Te){var je=Te.onChange,Pe=Te.value,fe=$()(Te,P),re=(0,B.$)(),T=re.t;return(0,ne.jsx)(F.default,R()(R()({value:Pe,onChange:je,placeholder:T("Select"),options:[{value:!0,label:T("True")},{value:!1,label:T("False")}]},fe),{},{className:O()(fe.className,"auto-width")}))},default:function(){return!1}},date:{label:'{{t("Date")}}',value:"date",component:function(Te){var je=Te.onChange,Pe=Te.value,fe=$()(Te,w);return(0,ne.jsx)(I.default,R()({value:t()(Pe),onChange:function(T){return T?je(T.toDate()):null},allowClear:!1,showTime:!0},fe))},default:function(){var Te=new Date;return new Date(Te.getFullYear(),Te.getMonth(),Te.getDate(),0,0,0)}},null:{label:'{{t("Null")}}',value:"null",component:xe,default:function(){return null}},object:{label:'{{t("JSON")}}',value:"object",component:D.Ph,default:function(){return{}}}};function Ee(Le,Te,je){var Pe,fe,re=Object.values(_e).filter(function(ce){return ce.value!=="null"}),T=(Te?re.filter(function(ce){return Array.isArray(Te)&&Te.filter(function(be){return Array.isArray(be)?be[0]===ce.value:be===ce.value}).length||Te===!0}):re).map(function(ce){return Object.keys(je).reduce(function(be,oe){return oe in ce?Object.assign(be,o()({},je[oe],ce[oe])):be},R()({},ce))});return fe={value:" ",label:'{{t("Constant")}}',children:T},o()(fe,je.value," "),o()(fe,je.label,'{{t("Constant")}}'),o()(fe,je.children,T),o()(fe,"component",(Pe=_e[Le])===null||Pe===void 0?void 0:Pe.component),fe}function ze(Le){var Te,je,Pe,fe=Le.value,re=fe===void 0?"":fe,T=Le.onChange,ce=Le.children,be=Le.button,oe=Le.useTypedConstant,Re=Le.nullable,Ze=Re===void 0?!0:Re,We=Le.style,tt=Le.className,St=Le.changeOnSelect,Tt=Le.fieldNames,lt=Le.parseOptions,ut=Le.hideVariableButton,nt=typeof Le.scope=="function"?Le.scope():Le.scope,Je=(0,U.y)({hideVariableButton:ut}),hn=Je.wrapSSR,mn=Je.hashId,vn=Je.componentCls,an=Je.rootPrefixCls;(0,S.ZP)("".concat(an,"-input"));var fn=(0,X.eJ)(),cn=(0,B.$)(),_n=cn.t,zt=(0,Z.useForm)(),xn=c.useState([]),Qt=y()(xn,2),Et=Qt[0],en=Qt[1],Rn=c.useState([]),An=y()(Rn,2),Jn=An[0],Zn=An[1],rr=c.useState(ut||!!(ce&&re!=null)),mr=y()(rr,2),Er=mr[0],Ft=mr[1],ct=(0,c.useMemo)(function(){return le(re,lt)},[lt,re]),Mt=typeof ct=="string",kt=Mt?ct:"",Rt=Mt?null:ct,_t=Object.assign({label:"label",value:"value",children:"children"},Tt??{}),Bt=(0,c.useMemo)(function(){if(ce){var Yt;return Yt={value:"$",label:_n("Constant")},o()(Yt,_t.value,"$"),o()(Yt,_t.label,_n("Constant")),Yt}return oe?Ee(kt,oe,_t):null},[kt,oe]),jt=(Te=Bt==null?void 0:Bt.component)!==null&&Te!==void 0?Te:xe,Xt=Array.isArray(oe)?(je=(Pe=oe.find(function(Yt){return Array.isArray(Yt)&&Yt[0]===kt}))===null||Pe===void 0?void 0:Pe[1])!==null&&je!==void 0?je:{}:{},Wt;re==null?Ze?ce&&Er?Wt=["$"]:Wt=[""]:ce?Wt=["$"]:Wt=[" ",kt]:Wt=ce?["$"]:[" ",kt],ut&&(Wt=["$"]),(0,c.useEffect)(function(){var Yt,Mn=Bt??{},bn=Mn.component,Gt=$()(Mn,ie),ln=[].concat(M()(Ze?[(Yt={value:"",label:_n("Null")},o()(Yt,_t.value,""),o()(Yt,_t.label,_n("Null")),Yt)]:[]),M()(Bt?[fn(Gt)]:[]),M()(nt?M()(nt):[])).filter(function(Hn){return!Hn.deprecated||(Rt==null?void 0:Rt[0])===Hn[_t.value]});en(ln)},[nt,Rt,Bt,Ze]);var Nt=function(){var Yt=j()(A()().mark(function Mn(bn){var Gt,ln,Hn,sn,Ln,Bn;return A()().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:if(ln=bn[bn.length-1],!(!((Gt=ln.children)!==null&&Gt!==void 0&&Gt.length)&&!ln.isLeaf&&ln.loadChildren)){st.next=24;break}if(!(Rt&&Rt.length>=2)){st.next=21;break}sn=K()(Rt),st.prev=4,sn.s();case 6:if((Ln=sn.n()).done){st.next=13;break}if(Bn=Ln.value,Bn!==ln[_t.value]){st.next=11;break}return Hn=Bn,st.abrupt("break",13);case 11:st.next=6;break;case 13:st.next=18;break;case 15:st.prev=15,st.t0=st.catch(4),sn.e(st.t0);case 18:return st.prev=18,sn.f(),st.finish(18);case 21:return st.next=23,ln.loadChildren(ln,Hn,Rt);case 23:en(function(Ke){return M()(Ke)});case 24:case"end":return st.stop()}},Mn,null,[[4,15,18,21]])}));return function(bn){return Yt.apply(this,arguments)}}(),nn=(0,c.useCallback)(function(Yt,Mn){if(Yt[0]==="$"){Ft(!0),Rt&&T(null,Mn);return}else Ft(!1);if(Yt[0]===""){T(null);return}if(Yt[0]===" "){if(Yt[1]){if(Yt[1]!==kt){var bn,Gt,ln;T((bn=(Gt=_e[Yt[1]])===null||Gt===void 0||(ln=Gt.default)===null||ln===void 0?void 0:ln.call(Gt))!==null&&bn!==void 0?bn:null,Mn)}}else Rt&&T(null,Mn);return}T("{{".concat(Yt.join("."),"}}"),Mn)},[kt,Rt,T]),Zt=(0,c.useCallback)(function(){var Yt;if(Ft(!!ce),Bt!=null&&(Yt=Bt.children)!==null&&Yt!==void 0&&Yt.length){var Mn=Bt.children[0].default();return T(Mn)}T(null)},[Bt]);(0,c.useEffect)(function(){var Yt=function(){var Mn=j()(A()().mark(function bn(){var Gt,ln,Hn,sn,Ln;return A()().wrap(function(wn){for(;;)switch(wn.prev=wn.next){case 0:if(!(!Rt||Et.length<=1)){wn.next=2;break}return wn.abrupt("return");case 2:Gt=null,ln=[],Hn=A()().mark(function st(){var Ke,De;return A()().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(Ke=Rt[Ln],Oe.prev=1,Ln!==0){Oe.next=6;break}Gt=Et.find(function(Fe){return Fe[_t.value]===Ke}),Oe.next=10;break;case 6:if(!(Gt.loadChildren&&!((De=Gt.children)!==null&&De!==void 0&&De.length))){Oe.next=9;break}return Oe.next=9,Gt.loadChildren(Gt,Ke,Rt);case 9:Gt=Gt.children.find(function(Fe){return Fe[_t.value]===Ke});case 10:if(Gt){Oe.next=12;break}return Oe.abrupt("return",{v:void 0});case 12:ln.push(Gt[_t.label]),Oe.next=18;break;case 15:Oe.prev=15,Oe.t0=Oe.catch(1),(0,f.error)(Oe.t0);case 18:case"end":return Oe.stop()}},st,null,[[1,15]])}),Ln=0;case 6:if(!(Ln<Rt.length)){wn.next=14;break}return wn.delegateYield(Hn(),"t0",8);case 8:if(sn=wn.t0,!sn){wn.next=11;break}return wn.abrupt("return",sn.v);case 11:Ln++,wn.next=6;break;case 14:en(M()(Et)),Zn([].concat(ln));case 16:case"end":return wn.stop()}},bn)}));return function(){return Mn.apply(this,arguments)}}();Yt()},[Rt,Et.length]);var Cn=Le.disabled||zt.disabled;return hn((0,ne.jsxs)(d.Z.Compact,{style:We,className:O()(vn,mn,tt),children:[Rt?(0,ne.jsxs)("div",{className:(0,b.cx)("variable",(0,b.css)(q||(q=g()([`
              position: relative;
              line-height: 0;

              &:hover {
                .clear-button {
                  display: inline-block;
                }
              }

              .ant-input {
                overflow: auto;
                white-space: nowrap;
                `,`

                .ant-tag {
                  display: inline;
                  line-height: 19px;
                  margin: 0;
                  padding: 2px 7px;
                  border-radius: 10px;
                }
              }
            `])),Cn?"":"padding-right: 28px;")),children:[(0,ne.jsx)("div",{role:"button","aria-label":"variable-tag",style:{overflow:"hidden"},className:(0,b.cx)("ant-input",{"ant-input-disabled":Cn},mn),children:(0,ne.jsx)(u.Z,{color:"blue",children:Jn.map(function(Yt,Mn){return(0,ne.jsxs)(c.Fragment,{children:[Mn?" / ":"",Yt]},Yt)})})}),Cn?null:(0,ne.jsx)("span",{role:"button","aria-label":"icon-close",className:(0,b.cx)("clear-button"),unselectable:"on",onClick:Zt,children:(0,ne.jsx)(p.Z,{})})]}):(0,ne.jsx)("div",{style:{flex:1},children:ce&&(Er||!Ze)?ce:jt?(0,ne.jsx)(jt,R()(R()({role:"button","aria-label":"variable-constant"},Xt),{},{value:re,onChange:T})):null}),ut?null:(0,ne.jsx)(l.Z,{options:Et,value:Rt??Wt,onChange:nn,loadData:Nt,changeOnSelect:St,fieldNames:Tt,disabled:Cn,children:be??(0,ne.jsx)(V.R,{className:(0,b.css)(`
              margin-left: -1px;
            `),type:Rt?"primary":"default",disabled:Cn})})]}))}var Se=e(20486),se;function me(Le){return(0,ne.jsx)(Se.f,R()(R()({buttonClass:(0,b.css)(se||(se=g()([`
        &:not(:hover) {
          border-right-color: transparent;
          border-top-color: transparent;
        }
        background-color: transparent;
      `])))},Le),{},{component:D.II.JSON}))}var pe=e(57340),ee=(0,c.createContext)([]);ee.displayName="VariableScopeContext";function ue(Le){var Te=Le.scope,je=Te===void 0?[]:Te,Pe=Le.children;return(0,ne.jsx)(ee.Provider,{value:je,children:Pe})}function ge(){return(0,c.useContext)(ee)}function Ie(){return null}Ie.Input=(0,Z.connect)(ze),Ie.TextArea=(0,k.t)((0,Z.connect)(pe.K,(0,Z.mapReadPretty)(pe.K.ReadPretty))),Ie.RawTextArea=(0,Z.connect)(Se.f),Ie.JSON=(0,Z.connect)(me);var Ae=null},88969:function(He,ae,e){"use strict";e.d(ae,{m:function(){return E}});var Z=e(15009),c=e.n(Z),k=e(19632),i=e.n(k),g=e(99289),C=e.n(g),A=e(5574),r=e.n(A),K=e(97133),v=e(38089),j=e(67294),h=e(26793),M=e(46917),n=e(9783),y=e.n(n),L=(0,M.l6)("nb-variable-select",function($){var Q=$.componentCls;return y()({},Q,{position:"relative",".ant-select.ant-cascader":{position:"absolute",top:"-1px",right:"-1px",minWidth:"auto",width:"calc(100% + 2px)",height:"calc(100% + 2px)",overflow:"hidden",opacity:0},".variable-btn":{fontStyle:"italic",fontFamily:"'New York', 'Times New Roman', Times, serif"},".Cascader-popupClassName":{".ant-cascader-menu":{marginBottom:0}}})}),o=L,a=e(2876),R=e(85893);function E($){var Q=$.options,z=$.setOptions,p=$.onInsert,b=$.changeOnSelect,f=b===void 0?!1:b,x=$.fieldNames,m=x===void 0?{}:x,F=$.className,I=$.disabled,d=(0,h.$)(),u=d.t,l=(0,j.useState)([]),S=r()(l,2),H=S[0],O=S[1],N=o(),t=N.wrapSSR,B=N.componentCls,X=N.hashId,V=(0,M.dQ)(),U=V.token;function D(q){return ne.apply(this,arguments)}function ne(){return ne=C()(c()().mark(function q(J){var Y,P;return c()().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(P=J[J.length-1],!(!((Y=P.children)!==null&&Y!==void 0&&Y.length)&&!P.isLeaf&&P.loadChildren)){ie.next=5;break}return ie.next=4,P.loadChildren(P);case 4:z(function(G){return i()(G)});case 5:case"end":return ie.stop()}},q)})),ne.apply(this,arguments)}return t((0,R.jsx)(a.R,{disabled:I,className:(0,K.cx)("x-button",B,X,F),children:(0,R.jsx)(v.Z,{disabled:I,placeholder:u("Select a variable"),value:[],options:Q,fieldNames:m,loadData:D,onChange:function(){var J,Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(O(Y),!!Y.length){var w=P[P.length-1];(!(w!=null&&(J=w.children)!==null&&J!==void 0&&J.length)&&!(w!=null&&w.loadChildren)||w!=null&&w.isLeaf)&&p(Y)}},changeOnSelect:f,onClick:function(J){if(!(J.detail!==2||!f))for(var Y=J.target;Y&&Y!==J.currentTarget;Y=Y.parentNode){var P;Array.from((P=Y.classList)!==null&&P!==void 0?P:[]).includes("ant-cascader-menu-item")&&p(H)}},popupClassName:"Cascader-popupClassName",dropdownRender:f?function(q){return(0,R.jsxs)(R.Fragment,{children:[q,(0,R.jsx)("div",{style:{padding:"0.5em",borderTop:"1px solid ".concat(U.colorBorder),color:U.colorTextDescription},children:u("Double click to choose entire object")})]})}:null})}))}},2876:function(He,ae,e){"use strict";e.d(ae,{R:function(){return C}});var Z=e(97857),c=e.n(Z),k=e(15867),i=e(67294),g=e(85893),C=(0,i.forwardRef)(function(A,r){var K=(0,i.useMemo)(function(){return{fontStyle:"italic",fontFamily:"New York, Times New Roman, Times, serif"}},[]);return(0,g.jsxs)(k.ZP,c()(c()({"aria-label":"variable-button",ref:r,style:K},A),{},{children:["x",A.children]}))});C.displayName="XButton"},74866:function(He,ae,e){"use strict";e.d(ae,{y:function(){return i}});var Z=e(9783),c=e.n(Z),k=e(46917),i=(0,k.l6)("nb-variable",function(g,C){var A=g.componentCls,r=g.lineWidth,K=g.colorFillQuaternary,v=g.paddingSM-1,j=8,h=j-r,M=g.fontSizeSM,n="".concat(g.lineHeightSM*M,"px"),y=K;return c()({},A,{width:"auto",display:"flex","&.ant-input-group-compact":{display:"flex"},".ant-input-disabled":{".ant-tag":{color:"#bfbfbf",borderColor:"#d9d9d9"}},".ant-input.null-value":{width:"4em",minWidth:"4em"},".ant-formily-item .ant-formily-item-control .ant-formily-item-control-content .ant-formily-item-control-content-component":{lineHeight:"normal"},".ant-formily-item":{marginBottom:0},".ant-input":C!=null&&C.hideVariableButton?{}:{borderTopRightRadius:0,borderBottomRightRadius:0},".ant-tag":{display:"inline-block",height:"auto",marginInlineEnd:g.marginXS,paddingInline:h,fontSize:M,lineHeight:n,whiteSpace:"nowrap",background:y,border:"".concat(g.lineWidth,"px ").concat(g.lineType," ").concat(g.colorBorder),borderRadius:g.borderRadiusSM,opacity:1,transition:"all ".concat(g.motionDurationMid),textAlign:"start"},".ant-tag-blue":{color:g.colorPrimaryText,background:g.colorPrimaryBg,borderColor:g.colorPrimaryBorder},".clear-button":{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:v,zIndex:1,display:"none",width:g.fontSizeIcon,height:g.fontSizeIcon,marginTop:-g.fontSizeIcon/2,color:g.colorTextQuaternary,fontSize:g.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",background:g.colorBgContainer,cursor:"pointer",opacity:.8,transition:"color ".concat(g.motionDurationMid," ease, opacity ").concat(g.motionDurationSlow," ease"),textRendering:"auto",userSelect:"none","&:before":{display:"block"},"&:hover":{color:g.colorTextTertiary}},".ant-btn":{height:"auto"},".variable":{flex:1}})})},72724:function(He,ae,e){"use strict";e.d(ae,{L:function(){return M}});var Z=e(97857),c=e.n(Z),k=e(5574),i=e.n(k),g=e(23861),C=e(67294),A=e(26793),r=e(21143),K=e(84577),v=e(85893),j=function(y){var L=(0,K.ng)(),o=L.refresh,a=(0,r.useAPIClient)(),R=(0,A.$)(),E=R.t;return(0,C.useCallback)(function($){var Q,z,p,b,f,x,m,F,I=$.active,d=$.over,u=I==null||(Q=I.data)===null||Q===void 0||(Q=Q.current)===null||Q===void 0?void 0:Q.schema,l=d==null||(z=d.data)===null||z===void 0||(z=z.current)===null||z===void 0?void 0:z.schema,S=d==null||(p=d.data)===null||p===void 0||(p=p.current)===null||p===void 0?void 0:p.insertAdjacent,H=d==null||(b=d.data)===null||b===void 0||(b=b.current)===null||b===void 0?void 0:b.breakRemoveOn,O=d==null||(f=d.data)===null||f===void 0||(f=f.current)===null||f===void 0?void 0:f.wrapSchema,N=d==null||(x=d.data)===null||x===void 0||(x=x.current)===null||x===void 0?void 0:x.onSuccess,t=(m=d==null||(F=d.data)===null||F===void 0||(F=F.current)===null||F===void 0?void 0:F.removeParentsIfNoChildren)!==null&&m!==void 0?m:!0;if(!u||!l){y==null||y($);return}if(u===l){y==null||y($);return}if(u.parent===l&&S==="beforeEnd"){y==null||y($);return}var B=(0,K.Pl)({t:E,api:a,refresh:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},U=V.refreshParentSchema,D=U===void 0?!0:U;return o({refreshParentSchema:D})},current:l});if(B.loadAPIClientEvents(),u.parent===l.parent){B.insertBeforeBeginOrAfterEnd(u),y==null||y($);return}if(S){B.insertAdjacent(S,u,{wrap:O,breakRemoveOn:H,removeParentsIfNoChildren:t,onSuccess:N}),y==null||y($);return}},[a,y,o,E])},h=C.memo(function(n){var y=(0,A.$)(),L=y.t,o=(0,C.useState)(!0),a=i()(o,2),R=a[0],E=a[1],$=(0,C.useCallback)(function(z){var p,b=z.active,f=b==null||(p=b.data)===null||p===void 0||(p=p.current)===null||p===void 0?void 0:p.schema;if(E(!!f),n!=null&&n.onDragStart){var x;n==null||(x=n.onDragStart)===null||x===void 0||x.call(n,z)}},[n==null?void 0:n.onDragStart]),Q=j(n==null?void 0:n.onDragEnd);return(0,v.jsxs)(g.DndContext,c()(c()({collisionDetection:g.rectIntersection},n),{},{onDragStart:$,onDragEnd:Q,children:[(0,v.jsx)(g.DragOverlay,{dropAnimation:{duration:10,easing:"cubic-bezier(0.18, 0.67, 0.6, 1.22)"},children:R&&(0,v.jsx)("span",{style:{whiteSpace:"nowrap"},children:L("Dragging")})}),n.children]}))});h.displayName="InternalDndContext";var M=function(y){return(0,v.jsx)(h,c()({},y))}},14896:function(He,ae,e){"use strict";e.r(ae),e.d(ae,{DndContext:function(){return Z.L},DragHandler:function(){return c.IW},DraggableContext:function(){return c.LC},ShowFormData:function(){return C},Sortable:function(){return c.bt},SortableContext:function(){return c.Fo},SortableItem:function(){return c.TR},SortableProvider:function(){return c.OR},getRenderContent:function(){return A.I9}});var Z=e(72724),c=e(20493),k=e(67294),i=e(80844),g=e(85893),C=(0,i.observer)(function(r){var K=r.children,v=(0,i.useForm)();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("pre",{style:{marginBottom:20},"data-testid":"form-data",children:JSON.stringify(v.values,null,2)}),K]})}),A=e(7840)},20493:function(He,ae,e){"use strict";e.d(ae,{IW:function(){return x},LC:function(){return a},bt:function(){return Q},Fo:function(){return R},TR:function(){return f},OR:function(){return E}});var Z=e(97857),c=e.n(Z),k=e(13769),i=e.n(k),g=e(10274),C=e(23861),A=e(97133),r=e(80844),K=e(96486),v=e.n(K),j=e(67294),h=e(46917),M=e(84577),n=e(85893),y=["component","overStyle","style","children","openMode"],L=["schema","id","eid","removeParentsIfNoChildren"],o=["component"],a=(0,j.createContext)(null);a.displayName="DraggableContext";var R=(0,j.createContext)(null);R.displayName="SortableContext";var E=function(F){var I=F.id,d=F.data,u=F.children,l=(0,C.useDraggable)({id:I,data:d}),S=(0,C.useDroppable)({id:I,data:d}),H=(0,j.useMemo)(function(){return{draggable:l,droppable:S}},[l,S]);return(0,n.jsx)(R.Provider,{value:H,children:u})},$=function(F){return new g.C(F).setAlpha(.15).toHex8String()},Q=function(F){var I,d,u=F.component,l=F.overStyle,S=F.style,H=F.children,O=F.openMode,N=i()(F,y),t=(0,h.dQ)(),B=t.token,X=(0,j.useContext)(R),V=X.draggable,U=X.droppable,D=U.isOver,ne=U.setNodeRef,q=c()({},S);return D&&(V==null||(I=V.active)===null||I===void 0?void 0:I.id)!==(U==null||(d=U.over)===null||d===void 0?void 0:d.id)&&(q[u==="a"?"color":"background"]=$(B.colorSettings),Object.assign(q,l)),j.createElement(u||"div",c()(c()({role:"none"},N),{},{className:(0,A.cx)("nb-sortable-designer",F.className),ref:ne,style:q}),H)},z=function(F){var I=p(F),d=(0,r.useFieldSchema)();return F.schema?c()(c()({},F),{},{id:I}):c()(c()({},F),{},{id:I,schema:d})},p=function(F){var I,d=(0,r.useField)();return F.id?F.id:(I=d.address)===null||I===void 0?void 0:I.toString()},b=(0,r.observer)(function(m){var F=z(m),I=F.schema,d=F.id,u=F.eid,l=F.removeParentsIfNoChildren,S=i()(F,L),H=(0,j.useMemo)(function(){return{insertAdjacent:"afterEnd",schema:I,removeParentsIfNoChildren:l??!0}},[I,l]);return(0,n.jsx)(E,{id:d,data:H,children:(0,n.jsx)(Q,c()(c()({id:u},S),{},{children:m.children}))})},{displayName:"InternalSortableItem"}),f=j.memo(function(m){var F=m.component,I=i()(m,o),d=(0,M.ng)(),u=d.designable;return u?(0,n.jsx)(b,c()({},m)):j.createElement(F||"div",v().omit(I,["children","schema","overStyle","openMode","id","eid","removeParentsIfNoChildren"]),m.children)});f.displayName="SortableItem";var x=function(F){var I=(0,j.useContext)(R)||{},d=I.draggable;if(!d)return null;var u=d.attributes,l=d.listeners,S=d.setNodeRef;return(0,n.jsx)("div",{style:{display:"inline-block",width:14,height:14,lineHeight:"14px",textAlign:"left"},children:(0,n.jsx)("div",c()(c()(c()({ref:S,style:{position:"relative",zIndex:1,lineHeight:0,fontSize:0,display:"inline-block"}},l),u),{},{role:"none",children:(0,n.jsx)("span",{style:{cursor:"move",fontSize:14},children:F.children})}))})}},7840:function(He,ae,e){"use strict";e.d(ae,{I9:function(){return x},Rq:function(){return Q},e7:function(){return E},jC:function(){return p},od:function(){return $}});var Z=e(97857),c=e.n(Z),k=e(15009),i=e.n(k),g=e(9783),C=e.n(g),A=e(5574),r=e.n(A),K=e(99289),v=e.n(K),j=e(52677),h=e.n(j),M=e(84157),n=e(96486),y=e.n(n),L=e(10097),o=e(76690),a=e(65565),R=e(61341),E=function(I,d){var u,l=/{{(.*?)}}/,S=I==null||(u=I.match)===null||u===void 0?void 0:u.call(I,l);if(S){var H=y().get(d,S[1]);return y().isFunction(H)?H():H}else return I};function $(F){if(h()(F)!=="object"||F===null)return null;for(var I in F)if(Object.prototype.hasOwnProperty.call(F,I))return Object.prototype.toString.call(F[I])==="[object Object]"&&F[I]!==null?$(F[I]):{key:I,value:F[I]};return null}var Q=function(I){var d=z(I),u=(0,n.findIndex)(d,function(S,H,O){if(S.includes("$")&&H>0)return!0}),l=d.slice(0,u);return l};function z(F){var I=[];function d(u){Object.keys(u).sort().forEach(function(l){I.push(l),u[l]&&h()(u[l])==="object"&&d(u[l])})}return d(F),I}var p=function(){var F=v()(i()().mark(function I(d,u){var l,S,H,O,N,t,B;return i()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return l=d.ruleGroup,S=d.variables,H=d.localVariables,O=d.variableNameOfLeftCondition,N=Object.keys(l)[0]||"$and",t=l[N],B=t.map(function(){var U=v()(i()().mark(function D(ne){var q,J,Y,P,w,ie,G,le,xe,_e,Ee,ze,Se,se;return i()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:if(!("$and"in ne||"$or"in ne)){pe.next=4;break}return pe.next=3,p({ruleGroup:ne,variables:S,localVariables:H},u);case 3:return pe.abrupt("return",pe.sent);case 4:if(q=$(ne),J=q==null?void 0:q.key,J){pe.next=8;break}return pe.abrupt("return",!0);case 8:return Y=b(Q(ne),O),P=S.parseVariable(Y,H,{doNotRequest:!0}).then(function(ee){var ue=ee.value;return ue}),w=(0,o.cG)(q==null?void 0:q.value)?[S.parseVariable(q==null?void 0:q.value,H).then(function(ee){var ue=ee.value;return ue}),P]:[q==null?void 0:q.value,P],pe.prev=11,pe.next=14,Promise.all(w);case 14:return ie=pe.sent,G=r()(ie,2),le=G[0],xe=G[1],pe.next=20,S.getCollectionField(Y,H);case 20:return _e=pe.sent,Ee=(0,a.J)(xe,{targetCollectionField:_e}),ze=(0,a.J)(le,{targetCollectionField:_e}),_e!=null&&_e.type&&["datetime","date","datetimeNoTz","dateOnly","unixTimestamp"].includes(_e.type)&&Ee&&(Se=(0,R.CE)(ze),se=(0,M.getPickerFormat)(Se),Ee=(0,M.dayjs)(Ee).format(se)),pe.abrupt("return",u.apply(C()({},J,[Ee,ze])));case 27:throw pe.prev=27,pe.t0=pe.catch(11),pe.t0;case 30:case"end":return pe.stop()}},D,null,[[11,27]])}));return function(D){return U.apply(this,arguments)}}()),V.next=6,Promise.all(B);case 6:if(B=V.sent,N!=="$and"){V.next=11;break}return V.abrupt("return",(0,n.every)(B,function(U){return U}));case 11:return V.abrupt("return",(0,n.some)(B,function(U){return U}));case 12:case"end":return V.stop()}},I)}));return function(d,u){return F.apply(this,arguments)}}();function b(F){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"$nForm";return"{{ ".concat(I,".").concat(F.join(".")," }}")}var f=function(I){var d={};return I.map(function(u){d[u.name]=u.ctx}),d};function x(F,I,d,u,l){return m.apply(this,arguments)}function m(){return m=v()(i()().mark(function F(I,d,u,l,S){var H,O,N,t,B,X,V,U,D;return i()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(!(d&&I==="handlebars")){q.next=19;break}return q.prev=1,N=M.Handlebars.compile(d),t=f(l),B=(u==null||(H=u.ctxRef)===null||H===void 0?void 0:H.current)||{},X=B.$nDate,V={},Object.keys(X||{}).map(function(J){V[J]=X[J]()}),U=N(c()(c()(c()({},u==null||(O=u.ctxRef)===null||O===void 0?void 0:O.current),t),{},{$nDate:V})),q.next=10,S(U);case 10:return q.abrupt("return",q.sent);case 13:return q.prev=13,q.t0=q.catch(1),console.log(q.t0),q.abrupt("return",d);case 17:q.next=32;break;case 19:return q.prev=19,q.next=22,(0,L.replaceVariableValue)(d,u,l);case 22:return D=q.sent,q.next=25,S(D);case 25:return q.abrupt("return",q.sent);case 28:return q.prev=28,q.t1=q.catch(19),console.log(q.t1),q.abrupt("return",d);case 32:case"end":return q.stop()}},F,null,[[1,13],[19,28]])})),m.apply(this,arguments)}},25145:function(He,ae,e){"use strict";e.d(ae,{u:function(){return Q}});var Z=e(5574),c=e.n(Z),k=e(97857),i=e.n(k),g=e(13769),C=e.n(g),A=e(80844),r=e(96486),K=e(67294),v=e(62954),j=e(75585),h=e(22891),M={type:"void","x-component":"Action.Container","x-action":"view",title:'{{ t("View record") }}',"x-component-props":{className:"nb-action-popup"},properties:{tabs:{type:"void","x-component":"Tabs","x-component-props":{},"x-initializer":"popup:addTab",properties:{tab1:{type:"void",title:'{{t("Details")}}',"x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{},properties:{grid:{type:"void","x-component":"Grid","x-initializer":"popup:common:addBlock",properties:{}}}}}}}},n=e(94804),y=e(57105),L=e(73691),o=e(85893),a=["WrappedComponent"],R=function(){var p=(0,A.useFieldSchema)(),b=(0,v.ngQ)(),f=b.insertAfterBegin,x=(0,K.useCallback)(function(m){var F=p.reduceProperties(function(I,d){return d["x-component"]==="Action.Container"?d:I},null);F||f((0,r.cloneDeep)(m))},[p,f]);return x},E=function(p){return p["x-component"]==="Action.Container"},$=function(p){var b=p.WrappedComponent,f=C()(p,a),x=(0,A.useFieldSchema)(),m=(0,h.ES)(),F=m.openPopup,I=(0,K.useRef)(!1),d=R(),u=(0,K.useRef)(x);u.current=x;var l=(0,K.useCallback)(function(){return u.current},[]),S=(0,K.useCallback)(function(){x.properties||(d(M),I.current=!0),I.current?(setTimeout(function(){F({customActionSchema:l()})}),I.current=!1):x.properties&&F()},[x,d,F,l]);return(0,o.jsx)("a",{onClick:S,children:(0,o.jsx)(b,i()({},f))})};function Q(z){return function(p){var b=(0,K.useState)(!1),f=c()(b,2),x=f[0],m=f[1],F=(0,K.useState)(!1),I=c()(F,2),d=I[0],u=I[1],l=(0,n.Kx)(),S=(0,v.XCj)(),H=(0,A.useField)(),O=(0,A.useFieldSchema)(),N=(O==null?void 0:O["x-component-props"])||{},t=N.enableLink,B=N.openMode,X=N.openSize,V=(0,h.ES)(),U=V.visibleWithURL,D=V.setVisibleWithURL,ne=(0,K.useCallback)(function(Y){m==null||m(Y),D==null||D(Y)},[D]),q=(0,K.useRef)(O);q.current=O;var J=S.setSubmitted;return t?(0,o.jsx)(j.OA,{visible:!1,children:(0,o.jsxs)(v.EIK,{button:(0,o.jsx)(z,i()({},p)),visible:x||U,setVisible:ne,formValueChanged:d,setFormValueChanged:u,openMode:B,openSize:X,containerRefKey:"field-popup",fieldSchema:O,setSubmitted:J,children:[(0,o.jsx)(n.YQ,{name:l.name,children:(0,o.jsx)(v.G0E,{children:(0,o.jsx)(L.Rm,{children:(0,o.jsx)(y.sq,{onlyRenderProperties:!0,basePath:H==null?void 0:H.address,schema:O,filterProperties:E})})})}),(0,o.jsx)($,i()(i()({},p),{},{WrappedComponent:z}))]})}):(0,o.jsx)(z,i()({},p))}}},61736:function(He,ae,e){"use strict";e.d(ae,{D:function(){return c}});var Z=e(67294),c=(0,Z.createContext)({});c.displayName="SchemaComponentContext.Provider"},44245:function(He,ae,e){"use strict";e.d(ae,{R:function(){return n}});var Z=e(97857),c=e.n(Z),k=e(13769),i=e.n(k),g=e(86201),C=e(80844),A=e(67294),r=e(47844),K=e(85893),v=["children","form"],j=["children"],h=function(L){var o=L.children,a=L.form,R=i()(L,v),E=(0,A.useContext)(C.SchemaOptionsContext),$=(0,A.useContext)(C.SchemaExpressionScopeContext),Q=c()(c()({},E==null?void 0:E.scope),$),z=c()({},E==null?void 0:E.components);return(0,K.jsx)(C.FormProvider,c()(c()({},R),{},{form:a,children:(0,K.jsx)(r.G,{components:z,scope:Q,children:o})}))},M=function(L){var o=L.children,a=i()(L,j),R=(0,A.useContext)(C.SchemaOptionsContext),E=(0,A.useContext)(C.SchemaExpressionScopeContext),$=c()(c()({},R==null?void 0:R.scope),E),Q=c()({},R==null?void 0:R.components),z=(0,A.useMemo)(function(){return(0,g.createForm)()},[]);return(0,K.jsx)(C.FormProvider,c()(c()({},a),{},{form:z,children:(0,K.jsx)(r.G,{components:Q,scope:$,children:o})}))},n=function(L){return L.form?(0,K.jsx)(h,c()({},L)):(0,K.jsx)(M,c()({},L))}},93587:function(He,ae,e){"use strict";e.d(ae,{m:function(){return L}});var Z=e(97857),c=e.n(Z),k=e(86201),i=e(57953),g=e(67294),C=e(54195),A=e(21044),r=e(84577),K=e(44245),v=e(93323),j=e(12174),h=function(a){var R=a.uid,E=a.type,$=E===void 0?"getJsonSchema":E,Q=a.onSuccess,z={url:"/uiSchemas:".concat($,"/").concat(R)},p=(0,j.QT)(z,{refreshDeps:[R],onSuccess:function(m){Q&&Q(m)}}),b=p.data,f=p.loading;return{schema:b==null?void 0:b.data,loading:f}},M=e(85893),n=function(a){return a},y=function(a){var R=a.noForm,E=a.onlyRenderProperties,$=a.hidden,Q=a.scope,z=a.uid,p=a.components,b=a.onSuccess,f=a.NotFoundPage,x=a.schemaTransform,m=x===void 0?n:x,F=a.onPageNotFind,I=E?"getProperties":"getJsonSchema",d=(0,g.useMemo)(function(){return(0,k.createForm)()},[z]),u=h({uid:z,type:I,onSuccess:function(t){b&&b(t)}}),l=u.schema,S=u.loading,H=(0,r.Co)(f),O=(0,C.Kk)();return O||S||$?(0,M.jsx)(i.Z,{style:{width:"100%",marginTop:20},delay:A.fw}):!l||Object.keys(l).length===0?(F&&F(),H?(0,M.jsx)(H,{}):null):R?(0,M.jsx)(v.n,{components:p,scope:Q,schema:m(l||{})}):(0,M.jsx)(K.R,{form:d,children:(0,M.jsx)(v.n,{components:p,scope:Q,schema:m(l||{})})})},L=(0,g.memo)(function(o){return o.uid?(0,M.jsx)(y,c()({},o)):null});L.displayName="RemoteSchemaComponent"},93323:function(He,ae,e){"use strict";e.d(ae,{A:function(){return E},n:function(){return z}});var Z=e(97857),c=e.n(Z),k=e(13769),i=e.n(k),g=e(9783),C=e.n(g),A=e(80844),r=e(96486),K=e.n(r),v=e(67294),j=e(57105),h=e(61736),M=e(47844),n=e(85893),y=["components","scope","schema","distributed","onChange"],L=["schema"],o=["memoized"];function a(p){return A.Schema.isSchemaInstance(p)?p:p!=null&&p.name?new A.Schema({type:"object",properties:C()({},p.name,p)}):new A.Schema(p)}var R=function(b){return(0,v.useMemo)(function(){return a(b)},[])},E=(0,v.createContext)({onChange:K().noop}),$=(0,v.memo)(function(p){var b=p.components,f=p.scope,x=p.schema,m=p.distributed,F=p.onChange,I=i()(p,y),d=(0,v.useContext)(h.D),u=(0,v.useMemo)(function(){return a(x)},[x]),l=(0,v.useMemo)(function(){return c()(c()({},d),{},{distributed:d.distributed==!1?!1:m,refresh:d.refresh||K().noop})},[d,m]),S=(0,v.useContext)(E),H=S.onChange,O=(0,v.useMemo)(function(){return{onChange:function(){F==null||F(u),H==null||H()}}},[F,H,u]);return(0,n.jsx)(E.Provider,{value:O,children:(0,n.jsx)(h.D.Provider,{value:l,children:(0,n.jsx)(M.G,{inherit:!0,components:b,scope:f,children:(0,n.jsx)(j.sq,c()(c()({},I),{},{schema:u,isUseFormilyField:!0}))})})})});$.displayName="RecursionSchemaComponent";var Q=(0,v.memo)(function(p){var b=p.schema,f=i()(p,L),x=R(b);return(0,n.jsx)($,c()(c()({},f),{},{schema:x}))});Q.displayName="MemoizedSchemaComponent";var z=(0,v.memo)(function(p){var b=p.memoized,f=i()(p,o);return b?(0,n.jsx)(Q,c()({},f)):(0,n.jsx)($,c()({},f))});z.displayName="SchemaComponent"},47844:function(He,ae,e){"use strict";e.d(ae,{B:function(){return C},G:function(){return A}});var Z=e(97857),c=e.n(Z),k=e(80844),i=e(67294),g=e(85893),C=function(){var K=(0,i.useContext)(k.SchemaOptionsContext);return K||{}},A=(0,i.memo)(function(r){var K=r.children,v=C(),j=(0,i.useMemo)(function(){return c()(c()({},v.components),r.components)},[v.components,r.components]),h=(0,i.useMemo)(function(){return c()(c()({},v.scope),r.scope)},[v.scope,r.scope]),M=(0,i.useMemo)(function(){return{scope:h,components:j}},[h,j]);return(0,g.jsx)(k.SchemaOptionsContext.Provider,{value:M,children:(0,g.jsx)(k.SchemaComponentsContext.Provider,{value:j,children:(0,g.jsx)(k.ExpressionScope,{value:h,children:K})})})});A.displayName="SchemaComponentOptions"},70993:function(He,ae,e){"use strict";e.d(ae,{_b:function(){return p},RV:function(){return b.R},m1:function(){return f.m},n6:function(){return x.n},AT:function(){return x.A},G0:function(){return m.G},a$:function(){return ne},Tz:function(){return U},Bs:function(){return m.B}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(12444),C=e.n(g),A=e(72004),r=e.n(A),K=e(31996),v=e.n(K),j=e(26037),h=e.n(j),M=e(18205),n=e(83062),y=e(15867),L=e(67294),o=e(49218),a=e(26793),R=e(62954),E=e(68230),$=e(85893),Q={backgroundColor:"var(--colorSettings) !important"},z={backgroundColor:"transparent"},p=function(){var Y=(0,R.ngQ)(),P=Y.designable,w=Y.setDesignable,ie=(0,a.$)(),G=ie.t,le=(0,E.d)(),xe=le.token,_e=P?Q:z;return(0,o.y1)("Ctrl+Shift+U",function(){return w(!P)},[P]),(0,$.jsx)(n.Z,{title:G("UI Editor"),children:(0,$.jsx)(y.ZP,{"data-testid":"ui-editor-button",icon:(0,$.jsx)(M.Z,{style:{color:xe.colorTextHeaderMenu}}),title:G("UI Editor"),style:_e,onClick:function(){w(!P)}})})},b=e(44245),f=e(93587),x=e(93323),m=e(47844),F=e(97857),I=e.n(F),d=e(5574),u=e.n(d),l=e(86201),S=e(80844),H=e(84327),O=e(96486),N=e.n(O),t=e(61736),B=function(){var Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return"".concat(Y).concat((0,H.uid)())};S.Schema.silent(!0);var X={},V={silent:!0,compile:function(Y){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=function(){if(V.silent)try{return new Function("$root","with($root) { return (".concat(Y,"); }"))(P)}catch{return"{{".concat(Y,"}}")}else return new Function("$root","with($root) { return (".concat(Y,"); }"))(P)};return X[Y]?X[Y]:Y.trim().startsWith("t(")?(X[Y]=w(),X[Y]):w()}};S.Schema.registerCompiler(V.compile);var U=function(Y){var P=Y.designable,w=Y.onDesignableChange,ie=Y.components,G=Y.children,le=(0,L.useContext)(t.D),xe=(0,m.B)(),_e=(0,L.useState)(function(){return(0,H.uid)()}),Ee=u()(_e,2),ze=Ee[0],Se=Ee[1],se=(0,L.useMemo)(function(){return Y.form||(0,l.createForm)()},[ze]),me=(0,a.$)(),pe=me.t,ee=(0,L.useMemo)(function(){return I()(I()({},Y.scope),{},{t:pe,randomString:B})},[Y.scope,pe,xe==null?void 0:xe.scope]),ue=(0,L.useState)(P),ge=u()(ue,2),Ie=ge[0],Ae=ge[1],Le=(0,L.useMemo)(function(){return typeof P=="boolean"?P:Ie},[P,Ie,le.designable]),Te=(0,L.useMemo)(function(){return function(fe){typeof Le!="boolean"&&Ae(fe),w==null||w(fe)}},[Le,w]),je=(0,L.useCallback)(function(){Se((0,H.uid)())},[]),Pe=(0,L.useMemo)(function(){return{scope:ee,components:ie,reset:je,refresh:N().noop,designable:Le,setDesignable:Te}},[ie,Le,je,ee,Te]);return(0,$.jsx)(t.D.Provider,{value:Pe,children:(0,$.jsx)(S.FormProvider,{form:se,children:(0,$.jsx)(m.G,{inherit:!0,scope:ee,components:ie,children:G})})})};U.displayName="SchemaComponentProvider";var D=e(31601),ne=function(J){v()(P,J);var Y=h()(P);function P(){return C()(this,P),Y.apply(this,arguments)}return r()(P,[{key:"load",value:function(){var w=i()(c()().mark(function G(){return c()().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:this.addComponents();case 1:case"end":return xe.stop()}},G,this)}));function ie(){return w.apply(this,arguments)}return ie}()},{key:"addComponents",value:function(){this.app.addComponents({DesignableSwitch:p})}}]),P}(D.S),q=null},84577:function(He,ae,e){"use strict";e.d(ae,{zz:function(){return A.zz},Pl:function(){return A.Pl},oB:function(){return A.oB},lI:function(){return c},hi:function(){return $.hi},eJ:function(){return k.e},Co:function(){return C},aZ:function(){return $.aZ},ng:function(){return A.ng},et:function(){return r.e},cL:function(){return L},fd:function(){return Q},Cl:function(){return j},vH:function(){return R},sR:function(){return A.sR},wN:function(){return E.w},Dm:function(){return M},fM:function(){return $.fM}});var Z=e(67294),c=function(p){var b=(0,Z.useRef)(null);return(0,Z.useEffect)(function(){return b.current&&p!==b.current&&b.current.onUnmount(),b.current=p,p.onMount(),function(){p.onUnmount()}},[p]),p},k=e(96365),i=e(80844),g=e(96486),C=function(p,b){var f=(0,Z.useContext)(i.SchemaOptionsContext),x=f.components;return p?typeof p!="string"?p:(0,g.get)(x,p)||b:b},A=e(94516),r=e(98146),K=e(97857),v=e.n(K),j=function(p){var b=(0,Z.useContext)(i.SchemaOptionsContext),f=(0,Z.useContext)(i.SchemaExpressionScopeContext),x=(0,Z.useRef)();return x.current=f,p.toFieldProps(v()(v()({},b),{},{get scope(){return v()(v()({},b.scope),x.current)}}))},h=e(61736);function M(){return(0,Z.useContext)(h.D)}var n=e(26793),y=e(6145),L=function(){var p,b=(0,y.useCollectionManager_deprecated)(),f=b.getCollectionJoinField,x=b.getCollection,m=(0,i.useFieldSchema)(),F=(0,y.useCollection_deprecated)(),I=F.getField,d=I(m.name)||f(m["x-collection-field"]),u=(0,n.$)(),l=u.t,S=((p=m["x-component-props"])===null||p===void 0?void 0:p.fieldNames)||{},H=S.label,O=(0,Z.useMemo)(function(){if(!(!d||!(d!=null&&d.interface))&&["o2o","oho","obo","o2m","linkTo","m2o","m2m"].includes(d.interface)){var N=x(d.target);if((N==null?void 0:N.template)==="file")return[{label:l("Record picker"),value:"CollectionField"},{label:l("Select"),value:"AssociationSelect"}];switch(d.interface){case"o2m":return[{label:l("Record picker"),value:"CollectionField"},{label:l("Subtable"),value:"TableField"},{label:l("Select"),value:"AssociationSelect"}];case"m2o":case"m2m":case"linkTo":return[{label:l("Record picker"),value:"CollectionField"},{label:l("Select"),value:"AssociationSelect"}];default:return[{label:l("Record picker"),value:"CollectionField"},{label:l("Subform"),value:"FormField"},{label:l("Select"),value:"AssociationSelect"}]}}},[l,d==null?void 0:d.interface,H]);return O},o=e(35746),a=e(58837),R=function(){var p,b=(0,i.useField)(),f=(0,i.useFieldSchema)(),x=(0,a.Kx)(),m=(0,o.d9)(),F=(x==null?void 0:x.getField(f.name))||(m==null?void 0:m.getCollectionField(f["x-collection-field"])),I=(0,k.e)();(0,Z.useEffect)(function(){if(!(b!=null&&b.title)){var d;b.title=I(F==null||(d=F.uiSchema)===null||d===void 0?void 0:d.title)}},[F==null||(p=F.uiSchema)===null||p===void 0?void 0:p.title])},E=e(9780),$=e(18686),Q=function(p){var b,f=(0,n.$)(),x=f.t,m=(0,y.useCollectionManager_deprecated)(),F=m.getCollectionJoinField,I=m.getCollection,d=(0,i.useFieldSchema)(),u=(p==null?void 0:p.fieldSchema)||d,l=(0,i.useField)(),S=(0,i.useForm)(),H=(u==null?void 0:u["x-read-pretty"])||l.readPretty||S.readPretty,O=p==null?void 0:p.fieldSchema,N=(0,y.useCollection_deprecated)(),t=N.getField,B=(p==null?void 0:p.collectionField)||t(u.name)||F(u["x-collection-field"]),X=((b=u["x-component-props"])===null||b===void 0?void 0:b.fieldNames)||{},V=X.label,U=(0,Z.useMemo)(function(){if(!(!B||!(B!=null&&B.interface))&&["o2o","oho","obo","o2m","linkTo","m2o","m2m","updatedBy","createdBy","mbm","attachmentURL"].includes(B.interface)){var D=I(B.target);if((D==null?void 0:D.template)==="file")return H?[{label:x("Title"),value:"Select"},{label:x("File manager"),value:"FileManager"},{label:x("Tag"),value:"Tag"}]:[{label:x("Select"),value:"Select"},{label:x("Record picker"),value:"Picker"},{label:x("File manager"),value:"FileManager"}];if((D==null?void 0:D.template)==="tree"&&["m2m","o2m","m2o"].includes(B.interface))return H?[{label:x("Title"),value:"Select"},{label:x("Tag"),value:"Tag"},!O&&{label:x("Sub-details"),value:"Nester"},!O&&{label:x("Sub-table"),value:"SubTable"}]:[{label:x("Select"),value:"Select"},{label:x("Record picker"),value:"Picker"},!O&&["m2m","o2m"].includes(B.interface)&&{label:x("Sub-table"),value:"SubTable"},!O&&{label:x("Cascade Select"),value:"CascadeSelect"},!O&&{label:x("Sub-form"),value:"Nester"},{label:x("Sub-form(Popover)"),value:"PopoverNester"}];switch(B.interface){case"o2m":return H?[{label:x("Title"),value:"Select"},{label:x("Tag"),value:"Tag"},!O&&{label:x("Sub-table"),value:"SubTable"},!O&&{label:x("Sub-details"),value:"Nester"}]:[{label:x("Select"),value:"Select"},{label:x("Record picker"),value:"Picker"},!O&&{label:x("Sub-form"),value:"Nester"},{label:x("Sub-form(Popover)"),value:"PopoverNester"},!O&&{label:x("Sub-table"),value:"SubTable"}];case"m2m":case"mbm":return H?[{label:x("Title"),value:"Select"},{label:x("Tag"),value:"Tag"},!O&&{label:x("Sub-details"),value:"Nester"},!O&&{label:x("Sub-table"),value:"SubTable"}]:[{label:x("Select"),value:"Select"},{label:x("Record picker"),value:"Picker"},!O&&{label:x("Sub-table"),value:"SubTable"},!O&&{label:x("Sub-form"),value:"Nester"},{label:x("Sub-form(Popover)"),value:"PopoverNester"}];case"m2o":case"linkTo":return H?[{label:x("Title"),value:"Select"},{label:x("Tag"),value:"Tag"},!O&&{label:x("Sub-details"),value:"Nester"}]:[{label:x("Select"),value:"Select"},{label:x("Record picker"),value:"Picker"},!O&&{label:x("Sub-form"),value:"Nester"},{label:x("Sub-form(Popover)"),value:"PopoverNester"}];default:return H?[{label:x("Title"),value:"Select"},{label:x("Tag"),value:"Tag"},!O&&{label:x("Sub-details"),value:"Nester"}]:[{label:x("Select"),value:"Select"},{label:x("Record picker"),value:"Picker"},!O&&{label:x("Sub-form"),value:"Nester"},{label:x("Sub-form(Popover)"),value:"PopoverNester"}]}}},[x,B==null?void 0:B.interface,V]);return(U||[]).filter(Boolean)}},18686:function(He,ae,e){"use strict";e.d(ae,{aZ:function(){return z},fM:function(){return b},hi:function(){return p}});var Z=e(5574),c=e.n(Z),k=e(97857),i=e.n(k),g=e(80844),C=e(83204),A=e(9361),r=e(96486),K=e.n(r),v=e(67294),j=e(89250),h=e(62954),M=e(21143),n=e(10097),y=e(1892),L=e(28561),o=function(m,F,I,d,u){return u.includes("/popups/")?2*d.paddingContentVertical+22+d.paddingPageVertical:m?d.paddingContentHorizontalLG:I?F?d.controlPaddingHorizontal+3*d.controlPaddingHorizontalSM+22+d.paddingContentHorizontalLG:d.paddingContentHorizontalLG+12:F?d.paddingSM+d.controlHeight+d.marginXS+2*d.controlPaddingHorizontalSM+22+d.paddingContentHorizontalLG:d.controlHeight+d.marginXS+(d.paddingXXS+2)*2+d.paddingContentHorizontalLG},a=function(m){var F=A.Z.useToken(),I=F.token,d=(0,h.ngQ)(),u=d.designable,l=(0,n.useBlockHeightProps)(),S=l.heightProps,H=(0,j.useLocation)(),O=m||S||{},N=O.disablePageHeader,t=O.enablePageTabs,B=O.hidePageTitle,X=I.sizeXXL-2,V=u?I.controlHeight+2*I.paddingContentHorizontalLG:1*I.paddingContentHorizontalLG,U=o(N,t,B,I,H.pathname);return X+U+V},R=function(){var m=A.Z.useToken(),F=m.token,I=(0,h.ngQ)(),d=I.designable,u=F.paddingContentVerticalLG+F.margin+2*F.paddingContentVertical+24,l=d?F.controlHeight+2*F.paddingContentHorizontalLG:1*F.paddingContentHorizontalLG;return u+l},E=function(m){var F=(0,g.useFieldSchema)(),I=f(F),d=a(m),u=R();return I?u:d},$=["workflowManualTasks","approvals","approvalRecords"],Q=function(){var m,F=A.Z.useToken(),I=F.token,d=(0,n.useBlockHeightProps)(),u=d.heightProps,l=(0,y.Si)(),S=l.heightProps,H=(0,h.ngQ)(),O=H.designable,N=(0,g.useFieldSchema)(),t=S||u,B=u.titleHeight,X=E(t),V=(0,M.useCollection)(),U=V.name,D=t.heightMode,ne=t.height,q=t.title;if(!(!(t!=null&&t.heightMode)||D===L.j.DEFAULT)){var J=Object.keys(((m=N.parent.properties.actions)===null||m===void 0?void 0:m.properties)||{}).length>0,Y=I.controlHeight+I.padding+I.marginLG,P=J||O?I.controlHeight+2*I.marginLG:I.marginLG,w=(O&&!$.includes(U)?I.controlHeight:22)+2*I.padding+1,ie=q?B:0;return D===L.j.FULL_HEIGHT?window.innerHeight-X-ie-w-P-Y:ne-ie-P-w-Y}},z=function(m){var F=(0,n.useBlockHeightProps)(),I=F.heightProps,d=E(),u=I||{},l=u.heightMode,S=u.height,H=u.title,O=u.titleHeight,N=H?O:0;if(!(!(I!=null&&I.heightMode)||l===L.j.DEFAULT)){if(l===L.j.FULL_HEIGHT){var t=window.innerHeight-d;return console.log(t),m!=null&&m.removeBlockHeaderHeight&&(t=t-N),m!=null&&m.innerExtraHeight&&(t=t-m.innerExtraHeight),t}return S}},p=function(){var m=(0,g.useFieldSchema)(),F=(0,v.useMemo)(function(){return(0,n.getPageSchema)(m)},[]),I=(F==null?void 0:F["x-component-props"])||{},d=I.disablePageHeader,u=I.enablePageTabs,l=I.hidePageTitle,S=i()(i()({},m==null?void 0:m["x-component-props"]),{},{disablePageHeader:d,enablePageTabs:u,hidePageTitle:l}),H=E(S),O=S||{},N=O.heightMode,t=O.height;if(!(!(S!=null&&S.heightMode)||N===L.j.DEFAULT))return N===L.j.FULL_HEIGHT?window.innerHeight-H:t},b=function(){var m=(0,v.useState)(),F=c()(m,2),I=F[0],d=F[1],u=(0,v.useRef)(null),l=Q(),S=(0,v.useCallback)((0,r.debounce)(function(){var O;if(u.current){var N=u.current.getBoundingClientRect(),t=(O=u.current.querySelector(".ant-table"))===null||O===void 0?void 0:O.getBoundingClientRect();t&&d(N.width)}},100),[l]),H=(0,v.useCallback)(function(O){u.current=O&&O.children?O.children[0]:null,S()},[S]);return(0,C.Z)("resize",S),{height:l,width:I,tableSizeRefCallback:H}},f=function x(m){if(!m)return null;if(m["x-component"]==="Action.Container"){var F;return(m==null||(F=m.parent["x-component-props"])===null||F===void 0?void 0:F.openMode)!=="page"}return x(m.parent)}},96365:function(He,ae,e){"use strict";e.d(ae,{e:function(){return K}});var Z=e(97857),c=e.n(Z),k=e(52677),i=e.n(k),g=e(80844),C=e(67294),A={},r=function(j){var h=/{{.*?}}/g;return h.test(j)},K=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{noCache:!1},h=j.noCache,M=(0,C.useContext)(g.SchemaOptionsContext),n=(0,C.useContext)(g.SchemaExpressionScopeContext);return function(y,L){var o=!1,a;if(typeof y=="string"&&y.startsWith("{{")&&(o=!0,a=y),y&&i()(y)==="object"&&!(0,C.isValidElement)(y)){try{a=JSON.stringify(y)}catch(E){return console.warn("Failed to stringify:",E),y}if(A[a])return A[a];o=r(a)}if(Array.isArray(y)){try{a=JSON.stringify(y)}catch(E){return console.warn("Failed to stringify:",E),y}if(A[a])return A[a];o=r(a)}if(o){var R=c()(c()(c()({},M.scope),n),L);if(!a)return g.Schema.compile(y,R);try{return h?g.Schema.compile(y,R):(A[a]=A[a]||g.Schema.compile(y,R),A[a])}catch(E){return console.log("useCompile error",y,E),g.Schema.compile(y,R)}}return y}}},94516:function(He,ae,e){"use strict";e.d(ae,{zz:function(){return U},Pl:function(){return O},oB:function(){return X},ng:function(){return ne},sR:function(){return D}});var Z=e(5574),c=e.n(Z),k=e(19632),i=e.n(k),g=e(15009),C=e.n(g),A=e(99289),r=e.n(A),K=e(12444),v=e.n(K),j=e(72004),h=e.n(j),M=e(9783),n=e.n(M),y=e(97857),L=e.n(y),o=e(80844),a=e(84327),R=e(90105),E=e(45360),$=e(50361),Q=e.n($),z=e(27361),p=e.n(z),b=e(36968),f=e.n(b),x=e(67294),m=e(26793),F=e(12174),I=e(57105),d=e(98902),u=e(61736);function l(q,J){if(q)return q["x-app-version"]||(q["x-app-version"]=J),Object.keys(q.properties||{}).forEach(function(Y){var P;l((P=q.properties)===null||P===void 0?void 0:P[Y],J)}),q}var S={i8:"1.6.3"},H=e(85893);function O(q){return new U(q)}var N=function q(J){J&&(J["x-uid"]||(J["x-uid"]=(0,a.uid)()),Object.keys(J.properties||{}).forEach(function(Y){q(J.properties[Y])}))},t=function(J){return J},B=function(J,Y){if(!(!J||!Y)){for(var P in Y)if(Object.prototype.hasOwnProperty.call(Y,P)){var w=Y[P];if(w!==(J==null?void 0:J[P]))return!1}return!0}},X=function(J,Y){if(J["x-uid"]&&J["x-uid"]===Y["x-uid"])return[null,J.toJSON()];var P=J.toJSON(),w=L()(L()({},P),{},{properties:{}}),ie=null,G=function le(xe,_e){Object.keys(xe||{}).forEach(function(Ee){var ze=xe[Ee];if(ze["x-uid"]===Y["x-uid"]){ie=xe[Ee];return}else _e.properties[Ee]=L()(L()({},ze),{},{properties:{}}),le(ze==null?void 0:ze.properties,_e.properties[Ee])})};return G(P.properties,w),[w,ie]},V=function(J){return J},U=function(){function q(J){v()(this,q),n()(this,"current",void 0),n()(this,"options",void 0),n()(this,"appVersion",void 0),n()(this,"events",{}),this.options=J,this.current=J.current,this.appVersion=J.appVersion}return h()(q,[{key:"model",get:function(){return this.options.model}},{key:"query",get:function(){return this.options.query}},{key:"loadAPIClientEvents",value:function(){var Y=this,P=this.options,w=P.api,ie=P.t,G=ie===void 0?V:ie;if(w){var le=function(_e){if(!_e)return[];var Ee=Object.values(_e.properties).length,ze=[];return _e.mapProperties(function(Se){Se["x-component-props"]=Se["x-component-props"]||{},Se["x-component-props"].width=100/Ee,Se["x-uid"]&&ze.push({"x-uid":Se["x-uid"],"x-component-props":Se["x-component-props"]})}),_e["x-uid"]&&ze.length?ze:[]};this.on("insertAdjacent",function(){var xe=r()(C()().mark(function _e(Ee){var ze,Se,se,me,pe,ee,ue,ge,Ie,Ae;return C()().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:if(Se=Ee.onSuccess,se=Ee.current,me=Ee.position,pe=Ee.schema,ee=Ee.wrap,ue=Ee.wrapped,ge=Ee.removed,Ie=[],(ue==null?void 0:ue["x-component"])==="Grid.Col"&&(Ie=Ie.concat(le(ue.parent))),(ge==null?void 0:ge["x-component"])==="Grid.Col"&&(Ie=Ie.concat(le(ge.parent))),Y.refresh(),se["x-uid"]){Te.next=7;break}return Te.abrupt("return");case 7:return Te.next=9,w.request({url:"/uiSchemas:insertAdjacent/".concat(se["x-uid"],"?position=").concat(me),method:"post",data:{schema:l(pe,Y.appVersion),wrap:ee}});case 9:if(Ae=Te.sent,!Ie.length){Te.next=13;break}return Te.next=13,w.request({url:"/uiSchemas:batchPatch",method:"post",data:Ie});case 13:if(!(ge!=null&&ge["x-uid"])){Te.next=16;break}return Te.next=16,w.request({url:"/uiSchemas:remove/".concat(ge["x-uid"]),method:"post"});case 16:Se==null||Se(Ae==null||(ze=Ae.data)===null||ze===void 0?void 0:ze.data),E.ZP.success(G("Saved successfully"),.2);case 18:case"end":return Te.stop()}},_e)}));return function(_e){return xe.apply(this,arguments)}}()),this.on("patch",function(){var xe=r()(C()().mark(function _e(Ee){var ze;return C()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(ze=Ee.schema,Y.refresh(),ze!=null&&ze["x-uid"]){se.next=4;break}return se.abrupt("return");case 4:return se.next=6,w.request({url:"/uiSchemas:patch",method:"post",data:L()({},ze)});case 6:E.ZP.success(G("Saved successfully"),.2);case 7:case"end":return se.stop()}},_e)}));return function(_e){return xe.apply(this,arguments)}}()),this.on("initializeActionContext",function(){var xe=r()(C()().mark(function _e(Ee){var ze;return C()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(ze=Ee.schema,ze!=null&&ze["x-uid"]){se.next=3;break}return se.abrupt("return");case 3:return se.next=5,w.request({url:"/uiSchemas:initializeActionContext",method:"post",data:L()({},ze)});case 5:case"end":return se.stop()}},_e)}));return function(_e){return xe.apply(this,arguments)}}()),this.on("batchPatch",function(){var xe=r()(C()().mark(function _e(Ee){var ze;return C()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return ze=Ee.schemas,Y.refresh(),se.next=4,w.request({url:"/uiSchemas:batchPatch",method:"post",data:ze});case 4:E.ZP.success(G("Saved successfully"),.2);case 5:case"end":return se.stop()}},_e)}));return function(_e){return xe.apply(this,arguments)}}()),this.on("remove",function(){var xe=r()(C()().mark(function _e(Ee){var ze,Se;return C()().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(ze=Ee.removed,Se=[],(ze==null?void 0:ze["x-component"])==="Grid.Col"&&(Se=le(ze.parent)),Y.refresh(),ze!=null&&ze["x-uid"]){me.next=6;break}return me.abrupt("return");case 6:return me.next=8,w.request({url:"/uiSchemas:remove/".concat(ze["x-uid"]),method:"post"});case 8:if(!Se.length){me.next=11;break}return me.next=11,w.request({url:"/uiSchemas:batchPatch",method:"post",data:Se});case 11:E.ZP.success(G("Saved successfully"),.2);case 12:case"end":return me.stop()}},_e)}));return function(_e){return xe.apply(this,arguments)}}())}}},{key:"prepareProperty",value:function(Y){Y.type||(Y.type="void"),Y.name||(Y.name=(0,a.uid)()),this.current["x-uid"]&&N(Y)}},{key:"on",value:function(Y,P){this.events[Y]||(this.events[Y]=[]),this.events[Y].push(P)}},{key:"emit",value:function(){var J=r()(C()().mark(function P(w){var ie=this,G,le,xe,_e,Ee,ze=arguments;return C()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(this.events[w]){se.next=2;break}return se.abrupt("return");case 2:for(G=ze.length,le=new Array(G>1?G-1:0),xe=1;xe<G;xe++)le[xe-1]=ze[xe];return _e=le[0],Ee=le.slice(1),se.abrupt("return",Promise.all(this.events[w].map(function(me){return me.bind(ie).apply(void 0,[L()({current:ie.current},_e)].concat(i()(Ee)))})));case 5:case"end":return se.stop()}},P,this)}));function Y(P){return J.apply(this,arguments)}return Y}()},{key:"parentsIn",value:function(Y){if(!Y||!o.Schema.isSchemaInstance(Y))return!1;for(var P=this.current;(w=P)!==null&&w!==void 0&&w.parent;){var w;if(P.parent===Y)return!0;P=P.parent}return!1}},{key:"refresh",value:function(Y){var P=this.options.refresh;return P==null?void 0:P(Y)}},{key:"deepMerge",value:function(Y){var P=this,w={title:"title",description:"description",default:"initialValue",readOnly:"readOnly",writeOnly:"editable",enum:"dataSource","x-pattern":"pattern","x-display":"display","x-validator":"validator","x-decorator":"decorator","x-component":"component","x-reactions":"reactions","x-content":"content","x-visible":"visible","x-hidden":"hidden","x-disabled":"disabled","x-editable":"editable","x-read-only":"readOnly"},ie={"x-decorator-props":"decoratorProps","x-component-props":"componentProps","x-data":"data"};Object.keys(Y).forEach(function(G){w[G]?(P.current[G]=Y[G],P.updateModel(w[G],Y[G])):ie[G]?Object.keys(Y[G]).forEach(function(le){f()(P.current,[G,le],Y[G][le]),P.updateModel([ie[G],le],Y[G][le])}):P.current[G]=Y[G]}),this.emit("patch",{schema:Y})}},{key:"getSchemaAttribute",value:function(Y,P){return p()(this.current,Y,P)}},{key:"shallowMerge",value:function(Y){var P=this,w={title:"title",description:"description",default:"initialValue",readOnly:"readOnly",writeOnly:"editable",enum:"dataSource","x-pattern":"pattern","x-display":"display","x-validator":"validator","x-decorator":"decorator","x-component":"component","x-reactions":"reactions","x-content":"content","x-visible":"visible","x-hidden":"hidden","x-disabled":"disabled","x-editable":"editable","x-read-only":"readOnly","x-decorator-props":"decoratorProps","x-component-props":"componentProps","x-data":"data"};Object.keys(Y).forEach(function(ie){P.current[ie]=Y[ie],w[ie]&&P.updateModel(w[ie],Y[ie])}),this.emit("patch",{schema:Y})}},{key:"updateModel",value:function(Y,P){var w=function(G){f()(G,Y,P)};this.model&&w(this.model),this.query&&this.query.take(w)}},{key:"insertAdjacent",value:function(Y,P){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};switch(Y){case"beforeBegin":return this.insertBeforeBegin(P,w);case"afterBegin":return this.insertAfterBegin(P,w);case"beforeEnd":return this.insertBeforeEnd(P,w);case"afterEnd":return this.insertAfterEnd(P,w)}}},{key:"recursiveRemoveIfNoChildren",value:function(Y,P){if(Y){for(var w=Y,ie,G=P==null?void 0:P.breakRemoveOn;w;){if(typeof G=="function"){if(G(w))break}else if(B(w,G))break;var le=Object.keys(w.properties||{}).length;if(le>0)break;w.parent&&(ie=w.parent.removeProperty(w.name)),w=w.parent}return ie}}},{key:"remove",value:function(Y){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=P.breakRemoveOn,ie=P.removeParentsIfNoChildren,G=Y||this.current,le=G.parent.removeProperty(G.name);if(ie){var xe=this.recursiveRemoveIfNoChildren(G.parent,{breakRemoveOn:w});xe&&(le=xe)}return this.emit("remove",{removed:le})}},{key:"removeWithoutEmit",value:function(Y){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=P.breakRemoveOn,ie=P.removeParentsIfNoChildren,G=Y||this.current,le=G.parent.removeProperty(G.name);if(ie){var xe=this.recursiveRemoveIfNoChildren(G.parent,{breakRemoveOn:w});xe&&(le=xe)}return le}},{key:"insertBeforeBeginOrAfterEnd",value:function(Y){var P=this,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o.Schema.isSchemaInstance(this.current)&&o.Schema.isSchemaInstance(Y)&&this.current.parent===Y.parent){var ie=0,G=0;return this.current.parent.mapProperties(function(le,xe,_e){P.current.name===xe&&(G=_e),Y.name===xe&&(ie=_e)}),ie>G?this.insertBeforeBegin(Y,w):this.insertAfterEnd(Y,w)}}},{key:"insertBeforeBegin",value:function(Y){var P=this,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o.Schema.isSchemaInstance(this.current)){var ie={onSuccess:w.onSuccess},G=w.wrap,le=G===void 0?t:G,xe=w.breakRemoveOn,_e=w.removeParentsIfNoChildren;if(o.Schema.isSchemaInstance(Y)){if(this.parentsIn(Y)){this.emit("error",{code:"parent_is_not_allowed",schema:Y});return}Y.parent.removeProperty(Y.name),_e&&(ie.removed=this.recursiveRemoveIfNoChildren(Y.parent,{breakRemoveOn:xe}))}else Y&&(Y=Q()(Y));var Ee={},ze=!1,Se=0,se=0;this.current.parent.mapProperties(function(Ae,Le){Le===P.current.name&&(se=Se,ze=!0,++Se),Ae["x-index"]=Se,++Se,ze&&(Ee[Le]=Ae,P.current.parent.removeProperty(Le))}),this.prepareProperty(Y);var me=le(Y),pe=this.current.parent.addProperty(me.name||(0,a.uid)(),me);pe["x-index"]=se,pe.parent=this.current.parent,this.current.parent.setProperties(Ee);var ee=X(pe,Y),ue=c()(ee,2),ge=ue[0],Ie=ue[1];this.emit("insertAdjacent",L()({position:"beforeBegin",schema:Ie,wrapped:me,wrap:ge},ie))}}},{key:"insertAfterBegin",value:function(Y){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o.Schema.isSchemaInstance(this.current)){var w={onSuccess:P.onSuccess},ie=P.wrap,G=ie===void 0?t:ie,le=P.breakRemoveOn,xe=P.removeParentsIfNoChildren;if(o.Schema.isSchemaInstance(Y)){if(this.parentsIn(Y)){this.emit("error",{code:"parent_is_not_allowed",schema:Y});return}Y.parent.removeProperty(Y.name),xe&&(w.removed=this.recursiveRemoveIfNoChildren(Y.parent,{breakRemoveOn:le}))}else Y&&(Y=Q()(Y));var _e={},Ee=1;this.current.mapProperties(function(ue,ge){ue["x-index"]=Ee,++Ee,_e[ge]=ue}),this.current.properties={},this.prepareProperty(Y);var ze=G(Y),Se=this.current.addProperty(ze.name||(0,a.uid)(),ze);Se["x-index"]=0,Se.parent=this.current,this.current.setProperties(_e);var se=X(Se,Y),me=c()(se,2),pe=me[0],ee=me[1];this.emit("insertAdjacent",L()({position:"afterBegin",schema:ee,wrap:pe,wrapped:ze},w))}}},{key:"insertBeforeEnd",value:function(Y){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o.Schema.isSchemaInstance(this.current)){delete Y["x-index"];var w={onSuccess:P.onSuccess},ie=P.wrap,G=ie===void 0?t:ie,le=P.breakRemoveOn,xe=P.removeParentsIfNoChildren;if(o.Schema.isSchemaInstance(Y)){if(this.parentsIn(Y)){this.emit("error",{code:"parent_is_not_allowed",schema:Y});return}Y.parent.removeProperty(Y.name),xe&&(w.removed=this.recursiveRemoveIfNoChildren(Y.parent,{breakRemoveOn:le}))}else Y&&(Y=Q()(Y));this.prepareProperty(Y);var _e=G(Y),Ee=this.current.addProperty(_e.name||(0,a.uid)(),_e);Ee.parent=this.current;var ze=X(Ee,Y),Se=c()(ze,2),se=Se[0],me=Se[1];return this.emit("insertAdjacent",L()({position:"beforeEnd",schema:me,wrap:se,wrapped:_e},w))}}},{key:"insertAfterEnd",value:function(Y){var P=this,w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o.Schema.isSchemaInstance(this.current)){var ie={onSuccess:w==null?void 0:w.onSuccess},G=w.wrap,le=G===void 0?t:G,xe=w.breakRemoveOn,_e=w.removeParentsIfNoChildren,Ee=0,ze=0,Se=!1,se={};if(this.current.parent.mapProperties(function(Ae,Le){Ae["x-index"]=Ee,Le===P.current.name&&(++Ee,ze=Ee,Se=!0),++Ee,Se&&Le!==P.current.name&&(se[Le]=Ae,P.current.parent.removeProperty(Le))}),o.Schema.isSchemaInstance(Y)){if(this.parentsIn(Y)){this.emit("error",{code:"parent_is_not_allowed",schema:Y});return}Y.parent.removeProperty(Y.name),_e&&(ie.removed=this.recursiveRemoveIfNoChildren(Y.parent,{breakRemoveOn:xe})),Y.parent=null}else Y&&(Y=Q()(Y));this.prepareProperty(Y);var me=le(Y),pe=this.current.parent.addProperty(me.name||(0,a.uid)(),me);pe.parent=this.current.parent,pe["x-index"]=ze,this.current.parent.setProperties(se);var ee=X(pe,Y),ue=c()(ee,2),ge=ue[0],Ie=ue[1];this.emit("insertAdjacent",L()({position:"afterEnd",schema:Ie,wrap:ge,wrapped:me},ie))}}}]),q}();function D(){var q=(0,x.useContext)(o.SchemaOptionsContext),J=(0,x.useMemo)(function(){return(q==null?void 0:q.components)||{}},[q]),Y=function(w){if(!w)return null;if(typeof w!="string")return w;var ie=p()(J,w);return ie||console.error('[nocobase]: Component "'.concat(w,'" not found')),ie};return Y}function ne(){var q=(0,x.useContext)(u.D),J=q.designable,Y=q.setDesignable,P=q.refresh,w=q.reset,ie=(0,x.useContext)(o.SchemaOptionsContext),G=(0,x.useMemo)(function(){return(ie==null?void 0:ie.components)||{}},[ie]),le=(0,x.useMemo)(function(){return function(){return(0,H.jsx)(H.Fragment,{})}},[]),xe=(0,R.Z)(),_e=(0,I.gR)(),Ee=(0,I.QJ)(),ze=(0,x.useCallback)(function(ge){P==null||P(),xe(),_e==null||_e(ge),Ee==null||Ee()},[P,xe,_e,Ee]),Se=(0,o.useField)(),se=(0,o.useFieldSchema)(),me=(0,F.LY)(),pe=(0,m.$)(),ee=pe.t,ue=(0,x.useMemo)(function(){return O({t:ee,api:me,refresh:ze,current:se,model:Se,appVersion:S.i8})},[ee,me,ze,se,Se]);return(0,x.useEffect)(function(){ue.loadAPIClientEvents()},[ue]),{dn:ue,designable:J,reset:w,refresh:ze,setDesignable:Y,DesignableBar:le,findComponent:(0,x.useCallback)(function(ge){var Ie;if(!ge)return null;if(typeof ge!="string")return ge;var Ae=p()(G,ge);return(Ie=Ae[d.XI])!==null&&Ie!==void 0?Ie:Ae},[p()]),on:ue.on.bind(ue),patch:(0,x.useCallback)(function(ge,Ie){var Ae=function(je){Object.keys(je).forEach(function(Pe){var fe=je[Pe];Pe==="title"&&(Se.title=fe,se.title=fe),Pe==="x-decorator-props"&&(Se.decoratorProps||(Se.decoratorProps={}),se["x-decorator-props"]||(se["x-decorator-props"]={}),Object.keys(fe).forEach(function(re){Se.decoratorProps[re]=fe[re],se["x-decorator-props"][re]=fe[re]})),Pe==="x-component-props"&&(Se.componentProps||(Se.componentProps={}),se["x-component-props"]||(se["x-component-props"]={}),Object.keys(fe).forEach(function(re){Se.componentProps[re]=fe[re],se["x-component-props"][re]=fe[re]}))})};if(typeof ge=="string"){var Le={};return f()(Le,ge,Ie),Ae(Le)}Ae(ge),ze()},[ue]),shallowMerge:(0,x.useCallback)(function(ge){ue.shallowMerge(ge)},[ue]),deepMerge:(0,x.useCallback)(function(ge){ue.deepMerge(ge)},[ue]),remove:(0,x.useCallback)(function(ge,Ie){ue.remove(ge,Ie)},[ue]),insertAdjacent:(0,x.useCallback)(function(ge,Ie,Ae){ue.insertAdjacent(ge,Ie,Ae)},[ue]),insertBeforeBegin:(0,x.useCallback)(function(ge){ue.insertBeforeBegin(ge)},[ue]),insertAfterBegin:(0,x.useCallback)(function(ge){ue.insertAfterBegin(ge)},[ue]),insertBeforeEnd:(0,x.useCallback)(function(ge){ue.insertBeforeEnd(ge)},[ue]),insertAfterEnd:(0,x.useCallback)(function(ge){ue.insertAfterEnd(ge)},[ue])}}},98146:function(He,ae,e){"use strict";e.d(ae,{e:function(){return C}});var Z=e(80844),c=e(84577),k=e(67294),i=e(90297),g=function(){return null};g.isNullComponent=!0;var C=function(){var r=(0,c.ng)(),K=r.designable,v=(0,Z.useFieldSchema)(),j=(0,k.useMemo)(function(){return v["x-designer"]||v["x-toolbar"]?v["x-designer"]||v["x-toolbar"]:v["x-settings"]?i.Mf:g},[v]),h=(0,c.Co)(j);return K&&h||g}},9780:function(He,ae,e){"use strict";e.d(ae,{w:function(){return A}});var Z=e(97857),c=e.n(Z),k=e(13769),i=e.n(k),g=["useProps"],C=function(){return{}},A=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=K.useProps,j=v===void 0?C:v,h=i()(K,g),M=j;typeof j!="function"&&(M=C);var n=M();return c()(c()({},h),n)}},62954:function(He,ae,e){"use strict";e.d(ae,{aUM:function(){return k.aU},olz:function(){return k.ol},N0i:function(){return k.N0},fWn:function(){return k.fW},mlL:function(){return k.ml},EIK:function(){return k.EI},$Lt:function(){return k.$L},$b8:function(){return k.$b},HTy:function(){return Jt},lkv:function(){return vt},rDu:function(){return dr},eYL:function(){return k.eY},Rat:function(){return ua},oAt:function(){return Ul},E7E:function(){return Kl},$SD:function(){return Ri},fUi:function(){return so.fU},QcG:function(){return Ps},MLy:function(){return fr.M},gOu:function(){return Js},jYG:function(){return ma.jY},PuU:function(){return ma.Pu},smG:function(){return ma.sm},C1I:function(){return k.C1},Ssf:function(){return Ss},vTp:function(){return Ds},XZJ:function(){return ya},Tt2:function(){return Os},zH8:function(){return Bs},Q5L:function(){return zs},Pok:function(){return ji},Vm0:function(){return $s},xI_:function(){return Fs},Lip:function(){return Ts},WN4:function(){return Li.W},Mtg:function(){return Sa.Mt},iNu:function(){return Sa.iN},zzt:function(){return Et.zz},_bl:function(){return $._b},POi:function(){return Vs},AOY:function(){return _e},izJ:function(){return ks},LBT:function(){return E.DndContext},IWB:function(){return E.DragHandler},LCt:function(){return E.DraggableContext},FyH:function(){return G.Fy},Nir:function(){return G.Ni},q8U:function(){return G.q8},HGA:function(){return G.HG},QTe:function(){return G.QT},JEX:function(){return G.JE},fAH:function(){return bl},$w$:function(){return G.$w},nBj:function(){return G.nB},Oct:function(){return G.Oc},zdw:function(){return G.zd},CXR:function(){return yl},BQs:function(){return ro.BQ},Hj5:function(){return mo.H},M0b:function(){return Bi},Dnz:function(){return Li.D},wn$:function(){return un.wn},GzZ:function(){return un.Gz},tJZ:function(){return un.tJ},fox:function(){return un.fo},VTd:function(){return un.VT},XsZ:function(){return un.Xs},l09:function(){return P},D_t:function(){return vl.D},_80:function(){return fi},WiK:function(){return ir},xJW:function(){return G.xJ},RVL:function(){return $.RV},Bc8:function(){return rt},hG9:function(){return zi},DCh:function(){return Ui},rjZ:function(){return ba.rj},Cqo:function(){return vi},jg7:function(){return ba.jg},gsn:function(){return ro.gs},$18:function(){return ou},IIB:function(){return ro.II},RnZ:function(){return gl},mX2:function(){return ro.mX},zDC:function(){return Co.zD},Phs:function(){return ro.Ph},aVo:function(){return pi},UGj:function(){return Ni.U},yq5:function(){return Ni.y},v2r:function(){return Yo},HIW:function(){return pu},T3C:function(){return $a},d97:function(){return Ca.d9},hGv:function(){return qa},tlE:function(){return fu},irr:function(){return Lo},rop:function(){return xl},gGi:function(){return gu},DBW:function(){return rn.D},MBS:function(){return _u.M},pGO:function(){return xu},Y8K:function(){return ki},iVT:function(){return ro.iV},ODP:function(){return Co.OD},lbb:function(){return Co.lb},b7w:function(){return Co.b7},sUk:function(){return Co.sU},x1j:function(){return k.x1},m1v:function(){return $.m1},glM:function(){return Bn},xZD:function(){return k.xZ},IuH:function(){return un.Iu},MkN:function(){return k.Mk},Hof:function(){return Pu},n6:function(){return $.n6},DDd:function(){return Hu.D},ATq:function(){return $.AT},G0E:function(){return $.G0},a$w:function(){return $.a$},TzZ:function(){return $.Tz},y00:function(){return k.y0},PhF:function(){return Yt},Cqv:function(){return E.ShowFormData},cof:function(){return k.co},bts:function(){return E.Sortable},Fop:function(){return E.SortableContext},TRI:function(){return E.SortableItem},ORg:function(){return E.SortableProvider},TaI:function(){return yu},qHe:function(){return si.q},iA_:function(){return Qo},gvM:function(){return ju},SnY:function(){return El},ASv:function(){return Lu},bwk:function(){return va},mQc:function(){return Ja},c__:function(){return Ya.c},QZ3:function(){return Ke},L39:function(){return ma.L3},feF:function(){return ku},jII:function(){return Gi},mPs:function(){return $u},tgM:function(){return Vu},gqx:function(){return so.gq},Qm7:function(){return so.Qm},_wD:function(){return ca._w},rjl:function(){return ca.rj},SLL:function(){return k.SL},sBv:function(){return k.sB},iTm:function(){return G.iT},BDK:function(){return so.BD},Pls:function(){return Et.Pl},Oxq:function(){return ct},Xgz:function(){return so.Xg},WLi:function(){return Ce},$9M:function(){return G.$9},nCn:function(){return ia},iNG:function(){return ea},tD8:function(){return da},pg9:function(){return jn},Ofb:function(){return G.Of},ibf:function(){return Xn},WyG:function(){return ie},l6$:function(){return c.l6},WGR:function(){return Rt},C$H:function(){return Co.C$},SET:function(){return Go.SE},cNQ:function(){return Co.cN},NCb:function(){return ko.NC},I9l:function(){return E.getRenderContent},XQ2:function(){return ko.XQ},Fxc:function(){return Ta},KKi:function(){return k.KK},MDU:function(){return Go.MD},CEH:function(){return Go.CE},vUN:function(){return k.vU},ZZb:function(){return G.ZZ},tqC:function(){return Go.tq},elO:function(){return Co.el},CfU:function(){return ni},LPx:function(){return Go.LP},fY6:function(){return Go.fY},Vm:function(){return Hi},w_o:function(){return Go.w_},SJF:function(){return ka},_Ko:function(){return Ga},Mev:function(){return ri},i2K:function(){return Yn},WmO:function(){return un.Wm},oBi:function(){return Et.oB},hKP:function(){return ko.hK},DU1:function(){return k.DU},XCj:function(){return k.XC},KyD:function(){return Sr.Ky},Vpg:function(){return Fi},lIL:function(){return Et.lI},KxP:function(){return fr.K},hi9:function(){return Et.hi},p27:function(){return k.p2},z9d:function(){return Sl.z9},eJW:function(){return Et.eJ},Cor:function(){return Et.Co},Zmk:function(){return Ca.Zm},aZq:function(){return Et.aZ},P1D:function(){return Sa.P1},ngQ:function(){return Et.ng},ett:function(){return Et.et},ySm:function(){return mo.y},Zd$:function(){return G.Zd},cLh:function(){return Et.cL},baz:function(){return G.b},fde:function(){return Et.fd},Xdt:function(){return Co.Xd},Cld:function(){return Et.Cl},vH8:function(){return Et.vH},PLH:function(){return un.PL},V8t:function(){return un.V8},tMk:function(){return un.tM},xQm:function(){return un.xQ},sRe:function(){return Et.sR},U1u:function(){return st},HS$:function(){return k.HS},vBu:function(){return k.vB},QYZ:function(){return k.QY},t9d:function(){return k.t9},Kgy:function(){return un.Kg},aJ2:function(){return un.aJ},n14:function(){return ba.n1},DiB:function(){return ba.Di},l1O:function(){return G.l1},w5o:function(){return G.w5},p3Q:function(){return G.p3},G5e:function(){return G.G5},xj2:function(){return G.xj},rxY:function(){return G.rx},Ils:function(){return Co.Il},zCB:function(){return k.zC},CMh:function(){return sa},v$P:function(){return qo.v},FMn:function(){return Ao},T0O:function(){return xo},a4r:function(){return rn.a},wNf:function(){return Et.wN},Dmu:function(){return Et.Dm},Bsl:function(){return $.Bs},yKv:function(){return Ma.y},fMB:function(){return Et.fM},gCg:function(){return Ya.g},eT6:function(){return G.eT},$SN:function(){return so.$S},q4O:function(){return G.q4},ymE:function(){return ca.ym},uqQ:function(){return k.uq},Q3P:function(){return ko.Q3},K5K:function(){return k.K5}});var Z={};e.r(Z),e.d(Z,{Action:function(){return k.aU},ActionBar:function(){return k.ol},ActionBarProvider:function(){return k.N0},ActionContext:function(){return k.fW},ActionContextNoRerender:function(){return k.ml},ActionContextProvider:function(){return k.EI},ActionDesigner:function(){return k.$L},AfterSuccess:function(){return k.$b},AntdSchemaComponentPlugin:function(){return Jt},AntdSchemaComponentProvider:function(){return vt},AppendsTreeSelect:function(){return dr},AssignedFieldValues:function(){return k.eY},AssociationField:function(){return ua},AssociationFieldMode:function(){return Ul},AssociationFieldModeProvider:function(){return Kl},AssociationSelect:function(){return Ri},AttachmentList:function(){return so.fU},AutoComplete:function(){return Ps},BackButtonUsedInSubPage:function(){return fr.M},Block:function(){return Js},BlockItem:function(){return ma.jY},BlockItemCard:function(){return ma.Pu},BlockItemCardContext:function(){return ma.sm},ButtonEditor:function(){return k.C1},CardItem:function(){return Ss},Cascader:function(){return Ds},Checkbox:function(){return ya},CollectionSelect:function(){return Os},ColorPicker:function(){return Bs},ColorSelect:function(){return zs},Cron:function(){return ji},CronSet:function(){return $s},DataSourceCollectionCascader:function(){return Fs},DataSourceSelect:function(){return Ts},DateFormatCom:function(){return Li.W},DatePicker:function(){return Sa.Mt},DatePickerProvider:function(){return Sa.iN},Details:function(){return Vs},DetailsDesigner:function(){return _e},Divider:function(){return ks},EditComponent:function(){return G.Fy},EditDefaultValue:function(){return G.Ni},EditDescription:function(){return G.q8},EditOperator:function(){return G.HG},EditPattern:function(){return G.QT},EditRequired:function(){return G.JE},EditSortField:function(){return bl},EditTitle:function(){return G.$w},EditTitleField:function(){return G.nB},EditTooltip:function(){return G.Oc},EditValidationRules:function(){return G.zd},Editable:function(){return yl},EllipsisWithTooltip:function(){return ro.BQ},ErrorFallback:function(){return mo.H},Expand:function(){return Bi},ExpiresRadio:function(){return Li.D},Filter:function(){return un.wn},FilterAction:function(){return un.Gz},FilterActionContext:function(){return un.tJ},FilterContext:function(){return un.fo},FilterDynamicComponent:function(){return un.VT},FilterLogicContext:function(){return un.Xs},Form:function(){return P},FormDialog:function(){return vl.D},FormDrawer:function(){return fi},FormField:function(){return ir},FormItem:function(){return G.xJ},FormV2:function(){return rt},G2Plot:function(){return zi},G2PlotRenderer:function(){return Ui},Grid:function(){return ba.rj},GridCard:function(){return vi},GridRowContext:function(){return ba.jg},HTMLEncode:function(){return ro.gs},IconPicker:function(){return ou},Input:function(){return ro.II},InputNumber:function(){return gl},InputReadPretty:function(){return ro.mX},InputRecordPicker:function(){return Co.zD},Json:function(){return ro.Ph},List:function(){return pi},Markdown:function(){return Ni.U},MarkdownReadPretty:function(){return Ni.y},Menu:function(){return Yo},NanoIDInput:function(){return pu},Page:function(){return $a},PagePopups:function(){return Ca.d9},PageTabs:function(){return qa},Pagination:function(){return fu},ParentRouteContext:function(){return Lo},Password:function(){return xl},Percent:function(){return gu},PopupSettingsProvider:function(){return rn.D},Preview:function(){return _u.M},QuickEdit:function(){return xu},Radio:function(){return ki},ReadPretty:function(){return ro.iV},ReadPrettyRecordPicker:function(){return Co.OD},RecordPicker:function(){return Co.lb},RecordPickerContext:function(){return Co.b7},RecordPickerProvider:function(){return Co.sU},RefreshDataBlockRequest:function(){return k.x1},RemoteSelect:function(){return Bn},RemoveButton:function(){return k.xZ},RemoveConditionContext:function(){return un.Iu},RequestSettings:function(){return k.Mk},RichText:function(){return Pu},SecondConFirm:function(){return k.y0},Select:function(){return Yt},SkipValidation:function(){return k.co},Space:function(){return yu},StablePopover:function(){return si.q},Table:function(){return Qo},TableBlockDesigner:function(){return ju},TableField:function(){return El},TableSelectorDesigner:function(){return Lu},TableV2:function(){return va},Tabs:function(){return Ja},TabsContextProvider:function(){return Ya.c},Templates:function(){return Ke},TestDesigner:function(){return ma.L3},TextAreaWithGlobalScope:function(){return ku},TimePicker:function(){return Gi},TreeSelect:function(){return $u},UnixTimestamp:function(){return Vu},Upload:function(){return so.gq},Uploader:function(){return so.Qm},Variable:function(){return ca._w},VariableScopeProvider:function(){return ca.rj},actionSettings:function(){return k.SL},actionSettingsItems:function(){return k.sB},allowAddNew:function(){return G.iT},attachmentFileTypes:function(){return so.BD},defaultFieldNames:function(){return ct},encodeFileURL:function(){return so.Xg},fetchTemplateData:function(){return Ce},filterFormItemSettings:function(){return G.$9},findByUid:function(){return ia},findKeysByUid:function(){return ea},findMenuItem:function(){return da},formDetailsSettings:function(){return jn},formItemSettings:function(){return G.Of},formSettings:function(){return Xn},formV1Settings:function(){return ie},genStyleHook:function(){return c.l6},getCurrentOptions:function(){return Rt},getDatePickerLabels:function(){return Co.C$},getDateRanges:function(){return Go.SE},getLabelFormatValue:function(){return Co.cN},getPopupPathFromParams:function(){return ko.NC},getStoredPopupContext:function(){return ko.XQ},getTabSchema:function(){return Ta},getZIndex:function(){return k.KK},handleDateChangeOnForm:function(){return Go.MD},inferPickerType:function(){return Go.CE},isBulkEditAction:function(){return k.vU},isFileCollection:function(){return G.ZZ},isMobile:function(){return Go.tq},isShowFilePicker:function(){return Co.el},isTabPage:function(){return ni},mapDatePicker:function(){return Go.LP},mapRangePicker:function(){return Go.fY},mapTimeFormat:function(){return Hi},moment2str:function(){return Go.w_},navigateToTab:function(){return ka},pageSettings:function(){return Ga},pageTabSettings:function(){return ri},readPrettyFormSettings:function(){return Yn},removeNullCondition:function(){return un.Wm},storePopupContext:function(){return ko.hK},useActionBarContext:function(){return k.DU},useActionContext:function(){return k.XC},useAssociationFieldContext:function(){return Sr.Ky},useAssociationFieldModeContext:function(){return Fi},useBackButton:function(){return fr.K},useCloseAction:function(){return k.p2},useColumnSchema:function(){return Sl.z9},useCurrentPopupContext:function(){return Ca.Zm},useDatePickerContext:function(){return Sa.P1},useDownloadLogs:function(){return mo.y},useEnsureOperatorsValid:function(){return G.Zd},useFieldMode:function(){return G.b},useFieldNames:function(){return Co.Xd},useFilterActionProps:function(){return un.PL},useFilterFieldOptions:function(){return un.V8},useFilterFieldProps:function(){return un.tM},useFilterOptions:function(){return un.xQ},useFormDataTemplates:function(){return st},useGetAriaLabelOfAction:function(){return k.HS},useGetAriaLabelOfDrawer:function(){return k.vB},useGetAriaLabelOfModal:function(){return k.QY},useGetAriaLabelOfPopover:function(){return k.t9},useGetFilterFieldOptions:function(){return un.Kg},useGetFilterOptions:function(){return un.aJ},useGridContext:function(){return ba.n1},useGridRowContext:function(){return ba.Di},useIsAddNewForm:function(){return G.l1},useIsAssociationField:function(){return G.w5},useIsFieldReadPretty:function(){return G.p3},useIsFileField:function(){return G.G5},useIsFormReadPretty:function(){return G.xj},useIsSelectFieldMode:function(){return G.rx},useLabelUiSchema:function(){return Co.Il},useLinkageAction:function(){return k.zC},useMenuDragEnd:function(){return sa},useMenuTranslation:function(){return qo.v},useNocoBaseRoutes:function(){return Ao},useParentRoute:function(){return xo},usePopupSettings:function(){return rn.a},useStyles:function(){return Ma.y},useTabsContext:function(){return Ya.g},useTitleFieldOptions:function(){return G.eT},useUploadStyles:function(){return so.$S},useValidateSchema:function(){return G.q4},useVariableScope:function(){return ca.ym},useZIndexContext:function(){return k.uq},withSearchParams:function(){return ko.Q3},zIndexContext:function(){return k.K5}});var c=e(46917),k=e(76157),i=e(15009),g=e.n(i),C=e(99289),A=e.n(C),r=e(12444),K=e.n(r),v=e(72004),j=e.n(v),h=e(31996),M=e.n(h),n=e(26037),y=e.n(n),L=e(97857),o=e.n(L),a=e(67294),R=e(31601),E=e(14896),$=e(70993),Q=e(89127),z=function(W){return A()(g()().mark(function de(){var ve,he;return g()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Me.prev=0,Me.next=3,this.api.request(W);case 3:return he=Me.sent,Me.abrupt("return",he==null||(ve=he.data)===null||ve===void 0?void 0:ve.data);case 7:return Me.prev=7,Me.t0=Me.catch(0),Me.abrupt("return",[]);case 10:case"end":return Me.stop()}},de,this,[[0,7]])}))},p=e(13769),b=e.n(p),f=e(5552),x=e(86201),m=e(80844),F=e(28459),I=e(57953),d=e(12174),u=e(6145),l=e(57105),S=e(90297),H=e(64016),O=e(15195),N=e(23461),t=e(85893),B=["form","children"],X=["form","children","disabled"],V=["request","effects","initialValue","useValues"],U=function(W){var de=W.form,ve=W.children,he=b()(W,B),ye=(0,m.useField)(),Me=(0,m.useFieldSchema)(),Ue=(0,Et.lI)(de.createVoidField(o()(o()({},ye.props),{},{basePath:""})));return(0,t.jsx)(m.FieldContext.Provider,{value:void 0,children:(0,t.jsx)(m.FormContext.Provider,{value:de,children:(0,t.jsx)(f.FormLayout,o()(o()({layout:"vertical"},he),{},{children:(0,t.jsx)(l.sq,{basePath:Ue.address,schema:Me,onlyRenderProperties:!0})}))})})},D=function(W){return W.children},ne=function(W){var de=W.form,ve=W.children,he=W.disabled,ye=b()(W,X),Me=(0,m.useField)(),Ue=(0,m.useFieldSchema)(),ke=(0,Et.lI)(de.createVoidField(o()(o()({},Me.props),{},{basePath:""}))),Ye=(0,Et.Co)(Ue["x-component"],D);return(0,a.useEffect)(function(){de.disabled=he||Me.disabled},[he,Me.disabled]),(0,t.jsx)(F.ZP,{componentDisabled:he,children:(0,t.jsx)(m.FieldContext.Provider,{value:void 0,children:(0,t.jsx)(m.FormContext.Provider,{value:de,children:(0,t.jsx)(f.FormLayout,o()(o()({layout:"vertical"},ye),{},{children:(0,t.jsx)(m.FieldContext.Provider,{value:ke,children:(0,t.jsx)(Ye,o()(o()({},Me.componentProps),{},{children:(0,t.jsx)(l.sq,{basePath:ke.address,schema:Ue,onlyRenderProperties:!0})}))})}))})})})},q=function(W){var de=W.request,ve=W.initialValue;return de||function(){return Promise.resolve({data:ve})}},J=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(0,d.QT)(q(de),W)},Y=(0,a.createContext)(null);Y.displayName="FormBlockContext";var P=(0,m.observer)(function(te){var W=te.request,de=te.effects,ve=te.initialValue,he=te.useValues,ye=he===void 0?J:he,Me=b()(te,V),Ue=(0,m.useFieldSchema)(),ke=(0,m.useField)(),Ye=(0,a.useMemo)(function(){return(0,x.createForm)({effects:de})},[]),Qe=ye({uid:Ue["x-uid"],onSuccess:function(we){return A()(g()().mark(function pt(){return g()().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.next=2,Ye.reset();case 2:Ye.setValues(we==null?void 0:we.data),Ye.setInitialValues(we==null?void 0:we.data);case 4:case"end":return mt.stop()}},pt)}))()}},te),et=(0,a.useContext)(Y);return(0,t.jsx)(Y.Provider,{value:{parent:et,form:Ye,result:Qe,field:ke,fieldSchema:Ue},children:(0,t.jsx)(I.Z,{spinning:(Qe==null?void 0:Qe.loading)||!1,children:Ue["x-decorator"]==="Form"?(0,t.jsx)(ne,o()({form:Ye},Me)):(0,t.jsx)(U,o()({form:Ye},Me))})})},{displayName:"Form"});P.Designer=function(){var W=(0,u.useCollection_deprecated)(),de=W.name,ve=W.title,he=(0,O.zy)(),ye=(0,N.rE)(),Me=ye.componentNamePrefix;return(0,t.jsxs)(S.aN,{template:he,title:ve||de,children:[(0,t.jsx)(H.G,{componentName:"".concat(Me,"Form"),collectionName:de}),(0,t.jsx)(S.Z5,{}),(0,t.jsx)(S.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}})]})};var w=e(5537),ie=new w.F5({name:"FormV1Settings",items:[{name:"template",Component:H.G,useComponentProps:function(){var W=(0,u.useCollection_deprecated)(),de=W.name,ve=(0,N.rE)(),he=ve.componentNamePrefix;return{componentName:"".concat(he,"Form"),collectionName:de}}},{name:"divider",type:"divider"},{name:"remove",type:"remove",componentProps:{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}]}),G=e(54801),le=function(){var W=(0,u.useCollection_deprecated)(),de=W.name,ve=W.title,he=(0,O.zy)();return(0,t.jsx)(S.aN,{schemaSettings:"FormSettings",template:he,title:ve||de})},xe=function(){var W=(0,u.useCollection_deprecated)(),de=W.name,ve=W.title,he=(0,O.zy)();return(0,t.jsx)(S.aN,{schemaSettings:"ReadPrettyFormSettings",template:he,title:ve||de})},_e=function(){var W=(0,u.useCollection_deprecated)(),de=W.name,ve=W.title,he=(0,O.zy)();return(0,t.jsx)(S.aN,{schemaSettings:"FormDetailsSettings",template:he,title:ve||de})},Ee=function(){var W=(0,u.useCollection_deprecated)(),de=W.name,ve=W.title,he=(0,O.zy)();return(0,t.jsx)(S.aN,{schemaSettings:"blockSettings:filterForm",template:he,title:ve||de})},ze=e(7340),Se=e(15503),se=e(83335),me=e(68230),pe=e(68400),ee=e.n(pe),ue=e(97133),ge=e(84327),Ie=e(9361),Ae=e(67174),Le=e(31019),Te=e(39742),je=e(22229),Pe=e(43321),fe=e(64910),re=e(9780),T=e(3192),ce=e(94804),be=e(18686),oe=e(5574),Re=e.n(oe),Ze=e(84157),We=e(42075),tt=e(34041),St=e(96486),Tt=e.n(St),lt=e(26793),ut=e(32268),nt=e(9783),Je=e.n(nt),hn=e(52677),mn=e.n(hn),vn=e(3407),an=e(66309),fn=e(96074),cn=e(27484),_n=e.n(cn),zt=e(44990),xn=e(8341),Qt=e(87714),Et=e(84577),en=e(16646),Rn=e(73475),An=e(32983),Jn=e(67668),Zn=e(58812),rr=e(96695),mr=e.n(rr),Er=e(19632),Ft=e.n(Er),ct={label:"label",value:"value",color:"color",options:"children"};function Mt(te,W){var de=[];if(!Array.isArray(te))return de;for(var ve=0;ve<te.length;ve++){var he=te[ve][W.options];Array.isArray(he)&&de.push.apply(de,Ft()(Mt(he,W))),de.push(o()({},te[ve]))}return de}function kt(te,W,de){if(!te)return[];var ve=[],he=mr()(de),ye;try{var Me=function(){var ke=ye.value,Ye=te.find(function(Qe){return Qe[W.value]==ke})||{value:ke,label:ke&&ke.toString()};ve.push(Ye)};for(he.s();!(ye=he.n()).done;)Me()}catch(Ue){he.e(Ue)}finally{he.f()}return ve}function Rt(te,W,de){var ve=Mt(W,de),he=(0,St.castArray)(te).map(function(ye){return(0,Ze.isPlainObject)(ye)?ye[de.value]:ye});return kt(ve,de,he)}var _t=e(25145),Bt=(0,m.observer)(function(te){var W=(0,a.useState)(!0),de=Re()(W,2),ve=de[0],he=de[1],ye=(0,a.useState)([]),Me=Re()(ye,2),Ue=Me[0],ke=Me[1],Ye=(0,m.useField)(),Qe=(0,Jn.Hy)();return(0,a.useEffect)(function(){var et,gt=o()(o()({},ct),te.fieldNames),we=Ye.dataSource||te.options||(Qe==null?void 0:Qe.uiSchema.enum)||[],pt=Rt(Ye.value,we,gt);if(!(!(0,ge.isValid)(te.value)&&!pt.length)&&!((0,x.isArrayField)(Ye)&&(Ye==null||(et=Ye.value)===null||et===void 0?void 0:et.length)===0)){var ft=Ye.value!==null&&pt.map(function(mt,At){return(0,t.jsx)(an.Z,{color:mt[gt.color],icon:mt.icon,children:mt[gt.label]},At)});ke(ft),he(!1)}},[Qe==null?void 0:Qe.uiSchema.enum,Ye,Ye.dataSource,Ye.value,te.fieldNames,te.options,te.value]),ve?null:(0,t.jsx)(Zn.B,{ellipsis:te.ellipsis,children:Ue})},{displayName:"SelectReadPretty"}),jt=(0,_t.u)(Bt),Xt=["value","options","onChange","fieldNames","mode","loading","rawOptions","defaultValue"],Wt=["objectValue","loading","value","rawOptions","defaultValue"],Nt=function(W){return!(0,ge.isValid)(W)||mn()(W)==="object"&&Object.keys(W).length===0},nn=function(W){var de=W.value,ve=W.options,he=W.onChange,ye=W.fieldNames,Me=W.mode,Ue=W.loading,ke=W.rawOptions,Ye=W.defaultValue,Qe=b()(W,Xt),et=function(we){var pt;if(!Nt(we)){var ft=(0,ge.toArr)(we).filter(function(At){return At}).map(function(At){return(0,Ze.isPlainObject)(At)?At[ye.value]:At}),mt=(pt=Rt(ft,ve,ye))===null||pt===void 0?void 0:pt.map(function(At){return{label:At[ye.label],value:At[ye.value]}});return["tags","multiple"].includes(Me)||W.multiple?mt:mt.shift()}};return(0,t.jsx)(tt.default,o()({role:"button","data-testid":"select-object-".concat(Me||"single"),value:et(de),defaultValue:et(Ye),allowClear:{clearIcon:(0,t.jsx)(en.Z,{role:"button","aria-label":"icon-close-select"})},labelInValue:!0,notFoundContent:Ue?(0,t.jsx)(I.Z,{}):(0,t.jsx)(An.Z,{image:An.Z.PRESENTED_IMAGE_SIMPLE}),options:ve,fieldNames:ye,showSearch:!0,popupMatchSelectWidth:!1,filterOption:function(we,pt){var ft;return((ft=pt==null?void 0:pt[ye.label||"label"])!==null&&ft!==void 0?ft:"").includes(we)},filterSort:function(we,pt){var ft,mt;return((ft=we==null?void 0:we[ye.label||"label"])!==null&&ft!==void 0?ft:"").toLowerCase().localeCompare(((mt=pt==null?void 0:pt[ye.label||"label"])!==null&&mt!==void 0?mt:"").toLowerCase())},onChange:function(we){var pt=Rt((0,ge.toArr)(we).map(function(ft){return ft.value}),ke||ve,ye);["tags","multiple"].includes(Me)||W.multiple?he==null||he(pt):he==null||he(pt.shift()||null)},mode:Me,tagRender:function(we){return(0,t.jsx)(an.Z,o()(o()({role:"button","aria-label":we.label,closeIcon:(0,t.jsx)(Rn.Z,{role:"button","aria-label":"icon-close-tag"})},we),{},{children:we.label}))},maxTagCount:"responsive"},Qe))},Zt=function(W,de){var ve;return((ve=de==null?void 0:de.label)!==null&&ve!==void 0?ve:"").toLowerCase().includes((W||"").toLowerCase())},Cn=(0,m.connect)(function(te){var W=te.objectValue,de=te.loading,ve=te.value,he=te.rawOptions,ye=te.defaultValue,Me=b()(te,Wt),Ue=(0,Et.eJ)(),ke=te.multiple?"multiple":te.mode;if(ke&&!["multiple","tags"].includes(ke)&&(ke=void 0),W)return(0,t.jsx)(nn,o()(o()({rawOptions:he},Me),{},{defaultValue:ye,value:ve,mode:ke,loading:de}));var Ye=function(et){return["tags","multiple"].includes(te.mode)||te.multiple?et?(0,ge.toArr)(et):void 0:et};return(0,t.jsx)(tt.default,o()(o()({role:"button","data-testid":"select-".concat(ke||"single"),showSearch:!0,filterOption:Zt,allowClear:{clearIcon:(0,t.jsx)(en.Z,{role:"button","aria-label":"icon-close-select"})},popupMatchSelectWidth:!1,notFoundContent:de?(0,t.jsx)(I.Z,{}):(0,t.jsx)(An.Z,{image:An.Z.PRESENTED_IMAGE_SIMPLE}),value:Ye(ve),defaultValue:Ye(ye),tagRender:function(et){return(0,t.jsx)(an.Z,o()(o()({role:"button","aria-label":et.label,closeIcon:(0,t.jsx)(Rn.Z,{role:"button","aria-label":"icon-close-tag"})},et),{},{children:et.label}))}},Ue(Me)),{},{onChange:function(et){var gt;(gt=te.onChange)===null||gt===void 0||gt.call(te,et===void 0?null:et)},mode:ke,maxTagCount:"responsive"}))},(0,m.mapProps)({dataSource:"options"},function(te,W){return o()(o()({},te),{},{fieldNames:o()(o()({},ct),te.fieldNames),suffixIcon:W!=null&&W.loading||W!=null&&W.validating?(0,t.jsx)(vn.Z,{}):te.suffixIcon})}),(0,m.mapReadPretty)(jt)),Yt=Cn;Yt.ReadPretty=jt;var Mn=Yt,bn=e(36586),Gt=function(W,de){return(0,St.castArray)(W).filter(function(ve){return ve!=null}).map(function(ve){return mn()(ve)==="object"?ve[de.value]:ve})},ln=(0,m.observer)(function(te){var W=o()(o()({},ct),te.fieldNames),de=(0,m.useField)(),ve=(0,m.useFieldSchema)(),he=(0,bn.a)(),ye=(0,k.XC)(),Me=ye.snapshot,Ue=(0,d.QT)(Me?A()(g()().mark(function Ye(){return g()().wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return et.abrupt("return",{data:he[ve.name]});case 1:case"end":return et.stop()}},Ye)})):o()(o()({action:"list"},te.service),{},{params:{paginate:!1,filter:Je()({},W.value,{$in:Gt(de.value,W)})}}),{refreshDeps:[te.service,de.value]}),ke=Ue.data;return(0,t.jsx)(Yt.ReadPretty,o()(o()({},te),{},{options:ke==null?void 0:ke.data}))},{displayName:"ReadPretty"}),Hn=["fieldNames","service","wait","value","defaultValue","objectValue","manual","mapOptions","targetField","CustomDropdownRender","optionFilter","dataSource","toOptionsItem","popupMatchSelectWidth"],sn="N/A",Ln=(0,Se.t)((0,m.connect)(function(te){var W,de,ve=te.fieldNames,he=ve===void 0?{}:ve,ye=te.service,Me=ye===void 0?{}:ye,Ue=te.wait,ke=Ue===void 0?300:Ue,Ye=te.value,Qe=te.defaultValue,et=te.objectValue,gt=te.manual,we=gt===void 0?!0:gt,pt=te.mapOptions,ft=te.targetField,mt=te.CustomDropdownRender,At=te.optionFilter,yt=te.dataSource,on=te.toOptionsItem,yn=on===void 0?function(oo){return oo}:on,In=te.popupMatchSelectWidth,gn=In===void 0?!1:In,Kt=b()(te,Hn),tn=(0,zt.FC)(),Qn=(0,xn.FE)(yt||tn),sr=(0,a.useRef)(!1),or=(0,m.useFieldSchema)(),Un=((W=or["x-component-props"])===null||W===void 0?void 0:W.addMode)==="quickAdd",Gn=(0,u.useCollection_deprecated)(),Sn=Gn.getField,qn=(0,a.useRef)(null),xr=(0,u.useCollectionManager_deprecated)(),nr=xr.getCollectionJoinField,Nn=xr.getInterface,lr=or["x-collection-field"]||or.name,Dn=Sn(lr)||nr(lr),qt=ft||(Dn==null?void 0:Dn.target)&&(he==null?void 0:he.label)&&nr("".concat(Dn.target,".").concat(he.label)),kn=(0,a.useMemo)(function(){if(qt!=null&&qt.interface){var oo,io=Nn(qt.interface),Mo=(io==null||(oo=io.filterable)===null||oo===void 0?void 0:oo.operators[0].value)||"$includes";return qt.type==="string"?"$includes":Mo}return"$includes"},[qt]),cr=(0,Et.eJ)(),ar=(0,a.useCallback)(function(oo){try{return oo.filter(function(io){return["number","string"].includes(mn()(io[he.value]))||!io[he.value]}).map(function(io){var Mo,Io,To=cr(io[he.label]);if(qt!=null&&(Mo=qt.uiSchema)!==null&&Mo!==void 0&&Mo.enum)if(Array.isArray(To))To=To.map(function(Ho,aa){var pa=qt.uiSchema.enum.find(function(hi){return hi.value===Ho});return pa?(0,t.jsx)(an.Z,{role:"button",color:pa.color,style:{marginRight:3},children:(pa==null?void 0:pa.label)||Ho},aa):(0,t.jsx)(an.Z,{role:"button",children:Ho},Ho)}).reverse();else{var Ko=qt.uiSchema.enum.find(function(Ho){return Ho.value===To});Ko&&(To=(0,t.jsx)(an.Z,{role:"button",color:Ko.color,children:Ko.label}))}if((qt==null?void 0:qt.type)==="date"&&(To=_n()(To).format("YYYY-MM-DD")),pt){var Ea;return pt((Ea={},Je()(Ea,he.label,To||sn),Je()(Ea,he.value,io[he.value]),Ea))}return o()(o()({},io),{},(Io={},Je()(Io,he.label,To||sn),Je()(Io,he.value,io[he.value]),Io))}).filter(Boolean)}catch(io){return console.error(io),oo}},[qt==null?void 0:qt.uiSchema,he]),vr=(0,d.QT)(o()(o()({action:"list"},Me),{},{headers:Qn,params:o()(o()({pageSize:200},Me==null?void 0:Me.params),{},{filter:Me==null||(de=Me.params)===null||de===void 0?void 0:de.filter})}),o()({manual:we,debounceWait:ke},Me.defaultParams?{defaultParams:[Me.defaultParams]}:{})),hr=vr.data,pr=vr.run,Mr=vr.loading,$r=(0,a.useMemo)(function(){return JSON.stringify({service:Me,fieldNames:he})},[Me,he]),yr=(0,a.useCallback)(function(){return qn.current&&mt?(0,t.jsx)(mt,{search:qn.current,callBack:function(){qn.current=null}}):null},[qn.current]);(0,a.useEffect)(function(){sr.current&&pr()},[$r]);var jr=function(){var oo=A()(g()().mark(function io(Mo){var Io;return g()().wrap(function(Ko){for(;;)switch(Ko.prev=Ko.next){case 0:pr({filter:(0,Qt.EO)([Mo?Je()({},he.label,Je()({},kn,Mo)):{},Me==null||(Io=Me.params)===null||Io===void 0?void 0:Io.filter])}),qn.current=Mo;case 2:case"end":return Ko.stop()}},io)}));return function(Mo){return oo.apply(this,arguments)}}(),Xr=(0,a.useMemo)(function(){var oo,io=Ye||Qe;if(!(hr!=null&&(oo=hr.data)!==null&&oo!==void 0&&oo.length))return io!=null?Array.isArray(io)?io:[io]:[];var Mo=io!=null&&(Array.isArray(io)?io.map(function(To){return o()(o()({},To),{},Je()({},he.value,To[he.value]||To))}):[o()(o()({},io),{},Je()({},he.value,io[he.value]||io))])||[],Io=typeof At=="function"?hr.data.filter(At):hr.data;return(0,St.uniqBy)(Io.concat(Mo??[]),he.value)},[Ye,Qe,hr==null?void 0:hr.data,he.value,At]),uo=function(io){qn.current=null,io&&pr(),sr.current=!0};return(0,t.jsx)(Yt,o()(o()({popupMatchSelectWidth:gn,autoClearSearchValue:!0,filterOption:!1,filterSort:null,fieldNames:he,onSearch:jr,onDropdownVisibleChange:uo,objectValue:et,value:Ye,defaultValue:Qe},Kt),{},{loading:hr?Mr:!0,options:yn(ar(Xr)),rawOptions:Xr,dropdownRender:function(io){var Mo=Xr.some(function(Io){return Io[he.label]===qn.current});return(0,t.jsx)(t.Fragment,{children:Un?(0,t.jsxs)(t.Fragment,{children:[!((hr==null?void 0:hr.data.length)===0&&qn!==null&&qn!==void 0&&qn.current)&&io,(hr==null?void 0:hr.data.length)>0&&(qn==null?void 0:qn.current)&&!Mo&&(0,t.jsx)(fn.Z,{style:{margin:0}}),!Mo&&(0,t.jsx)(yr,{})]}):io})}}))},(0,m.mapProps)({dataSource:"options"},function(te,W){var de,ve=(0,m.useFieldSchema)();return o()(o()({},te),{},{fieldNames:o()(o()(o()(o()({},ct),te.fieldNames),W.componentProps.fieldNames),(de=ve["x-component-props"])===null||de===void 0?void 0:de.fieldNames),suffixIcon:W!=null&&W.loading||W!=null&&W.validating?(0,t.jsx)(vn.Z,{}):te.suffixIcon})}),(0,m.mapReadPretty)(ln))),Bn=Ln;Bn.ReadPretty=ln;var wn=null,st=function(){var W=(0,m.useFieldSchema)(),de=(0,lt.$)(),ve=de.t,he=(0,ze.bz)(),ye=he.duplicateData,Me=(0,u.useCollectionManager_deprecated)(),Ue=Me.getCollectionJoinField;if(ye)return ye;var ke=De(W),Ye=ke.items,Qe=Ye===void 0?[]:Ye,et=ke.display,gt=et===void 0?!0:et;Qe.forEach(function(ft){try{var mt;ft.fields=(mt=ft.fields)===null||mt===void 0?void 0:mt.map(function(At){var yt=Ue("".concat(ft.collection,".").concat(At));return yt?At:""}).filter(Boolean)}catch(At){(0,Ze.error)(At),ft.fields=[]}});var we=[{key:"none",title:ve("None")}].concat(Qe.map(function(ft,mt){return o()(o()({key:mt},ft),{},{isLeaf:ft.dataId!==null&&ft.dataId!==void 0,titleCollectionField:(ft==null?void 0:ft.titleField)&&Ue("".concat(ft.collection,".").concat(ft.titleField))})})),pt=Qe.find(function(ft){return ft.default});return{templates:we,display:gt,defaultTemplate:pt,enabled:Qe.length>0&&Qe.every(function(ft){return ft.dataId||ft.dataScope})}},Ke=a.memo(function(te){var W=te.style,de=W===void 0?{}:W,ve=te.form,he=(0,c.dQ)(),ye=he.token,Me=st(),Ue=Me.templates,ke=Me.display,Ye=Me.enabled,Qe=Me.defaultTemplate,et=(0,u.useCollectionManager_deprecated)(),gt=et.getCollectionJoinField,we=(0,ut.ss)(Ue),pt=(0,a.useState)((Qe==null?void 0:Qe.key)||"none"),ft=Re()(pt,2),mt=ft[0],At=ft[1],yt=(0,a.useState)(null),on=Re()(yt,2),yn=on[0],In=on[1],gn=(0,d.LY)(),Kt=(0,lt.$)(),tn=Kt.t,Qn=(0,ce.FC)(),sr=(0,ce.on)(Qn);(0,a.useEffect)(function(){Ye&&Qe&&ve&&(ve.__template=!0,Qe.key==="duplicate"&&Sn(Qe.dataId,Qe,sr))},[]),(0,a.useEffect)(function(){we!=null&&we.some(function(xr){return xr.key===mt})||Gn("none")},[we]);var or=(0,a.useMemo)(function(){return o()({display:"flex",alignItems:"center",backgroundColor:ye.colorFillAlter,padding:ye.padding},de)},[de,ye.colorFillAlter]),Un=(0,a.useMemo)(function(){return{fontSize:ye.fontSize,fontWeight:"bold",whiteSpace:"nowrap",marginRight:ye.marginXS}},[ye.fontSize,ye.marginXS]),Gn=(0,a.useCallback)(function(){var xr=A()(g()().mark(function nr(Nn){return g()().wrap(function(Dn){for(;;)switch(Dn.prev=Dn.next){case 0:At(Nn),In(null),ve==null||ve.reset();case 3:case"end":return Dn.stop()}},nr)}));return function(nr){return xr.apply(this,arguments)}}(),[]),Sn=(0,a.useCallback)(function(){var xr=A()(g()().mark(function nr(Nn,lr,Dn){var qt;return g()().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:qt=o()(o()({},lr),{},{dataId:Nn}),In(lr),Ce(gn,qt,Dn).then(function(ar){return ve&&ar&&(ve.reset(),ve.__template=!0,(0,Ze.forEach)(ar,function(vr,hr){if(vr){var pr;ve.values[hr]=vr,ve==null||(pr=ve.setInitialValuesIn)===null||pr===void 0||pr.call(ve,hr,vr)}})),ar}).catch(function(ar){console.error(ar)});case 3:case"end":return cr.stop()}},nr)}));return function(nr,Nn,lr){return xr.apply(this,arguments)}}(),[]);if(!Ye||!ke)return null;var qn=we==null?void 0:we.find(function(xr){return xr.key===mt});return(0,t.jsx)("div",{style:or,children:(0,t.jsxs)(We.Z,{wrap:!0,children:[(0,t.jsxs)("label",{style:Un,children:[tn("Data template"),": "]}),(0,t.jsx)(tt.default,{role:"button","data-testid":"select-form-data-template",popupMatchSelectWidth:!1,options:we,fieldNames:{label:"title",value:"key"},value:mt,onChange:Gn}),mt!=="none"&&qn&&(0,t.jsx)(Bn,{style:{width:220},fieldNames:{label:qn==null?void 0:qn.titleField,value:"id"},target:qn==null?void 0:qn.collection,value:yn,objectValue:!0,service:{resource:qn==null?void 0:qn.collection,params:{filter:qn==null?void 0:qn.dataScope}},onChange:function(nr){return Sn(nr==null?void 0:nr.id,o()(o()({},nr),qn),sr)},targetField:gt("".concat(qn==null?void 0:qn.collection,".").concat(qn.titleField))})]})})});Ke.displayName="NocoBaseFormDataTemplates";function De(te){var W=(0,ze.Fi)(te);return W?Tt().cloneDeep(W["x-data-templates"])||{}:{}}function Ce(te,W,de){return Oe.apply(this,arguments)}function Oe(){return Oe=A()(g()().mark(function te(W,de,ve){return g()().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(!(de.fields.length===0||!de.dataId)){ye.next=2;break}return ye.abrupt("return");case 2:return ye.abrupt("return",W.resource(de.collection,void 0,ve).get({filterByTk:de.dataId,fields:de.fields,isTemplate:!0}).then(function(Me){var Ue;return(Ue=Me.data)===null||Ue===void 0?void 0:Ue.data}));case 3:case"end":return ye.stop()}},te)})),Oe.apply(this,arguments)}var Fe=function(){var W,de,ve=(0,be.aZ)(),he=(0,m.useFieldSchema)(),ye=Ie.Z.useToken(),Me=ye.token,Ue=(0,Et.ng)(),ke=Ue.designable,Ye=(0,T.gp)()||{},Qe=Ye.heightProps,et=Qe||{},gt=et.title,we=et.titleHeight,pt=st(),ft=pt.display,mt=pt.enabled,At=he.reduceProperties(function(Gn,Sn){return Sn["x-component"]==="ActionBar"?Sn:Gn}),yt=Object.keys((At==null?void 0:At.properties)||{}).length>0,on=he==null||(W=he.parent)===null||W===void 0||(W=W["x-decorator"])===null||W===void 0||(de=W.includes)===null||de===void 0?void 0:de.call(W,"FormBlockProvider"),yn=yt||ke?Me.controlHeight+(on?1*Me.marginLG:24+Me.paddingLG):Me.marginLG,In=gt?we:0,gn=(0,ce.xQ)(),Kt=(gn==null?void 0:gn.meta)||{},tn=Kt.count,Qn=Kt.pageSize,sr=tn>Qn,or=sr?Me.controlHeightSM+24:0,Un=ft&&mt?Me.controlHeight+2*Me.padding+Me.margin:0;return ve-yn-Me.paddingLG-In-or-Un},Ne=e(68091),Xe,dt,ht=["form","children"],xt=["form","children","disabled"],Ct=["form","disabled"],Dt=function(W){var de=W.form,ve=W.children,he=b()(W,ht),ye=(0,m.useField)(),Me=(0,m.useFieldSchema)(),Ue=Ae.Gn===null||Ae.Gn===void 0?void 0:(0,Ae.Gn)(Me),ke=(0,Et.lI)(de.createVoidField(o()(o()({},ye.props),{},{basePath:""}))),Ye=Fe(),Qe=Ie.Z.useToken(),et=Qe.token,gt=(Ue==null?void 0:Ue["x-component-props"])||{},we=gt.layout,pt=we===void 0?"vertical":we,ft=gt.labelAlign,mt=ft===void 0?"left":ft,At=gt.labelWidth,yt=At===void 0?120:At,on=gt.labelWrap,yn=on===void 0?!0:on;return(0,t.jsx)(m.FieldContext.Provider,{value:void 0,children:(0,t.jsx)(m.FormContext.Provider,{value:de,children:(0,t.jsx)(f.FormLayout,o()(o()({layout:pt},he),{},{labelAlign:mt,labelWidth:pt==="horizontal"?yt:null,labelWrap:yn,children:(0,t.jsx)("div",{className:(0,ue.css)(Xe||(Xe=ee()([`
              .nb-grid-container {
                height: `,`;
                overflow-y: auto;
                margin-left: -`,`px;
                margin-right: -`,`px;
                padding-left: `,`px;
                padding-right: `,`px;
                .ant-formily-item-layout-horizontal {
                  .ant-formily-item-control {
                    max-width: calc(100% - `,`px);
                  }
                }
              }
            `])),Ye?Ye+"px":"100%",et.marginLG,et.marginLG,et.marginLG,et.marginLG,yt),children:(0,t.jsx)(l.sq,{basePath:ke.address,schema:Me,onlyRenderProperties:!0,isUseFormilyField:!0})})}))})})},Vt=function(W){return W.children},Ht=function(W){var de=W.form,ve=W.children,he=W.disabled,ye=b()(W,xt),Me=(0,m.useField)(),Ue=(0,m.useFieldSchema)(),ke=(0,Et.lI)(de.createVoidField(o()(o()({},Me.props),{},{basePath:""}))),Ye=(0,Et.Co)(Ue["x-component"],Vt);return(0,t.jsx)(m.FieldContext.Provider,{value:void 0,children:(0,t.jsx)(m.FormContext.Provider,{value:de,children:(0,t.jsx)(f.FormLayout,o()(o()({layout:"vertical"},ye),{},{children:(0,t.jsx)(m.FieldContext.Provider,{value:ke,children:(0,t.jsx)(Ye,o()(o()({},Me.componentProps),{},{children:(0,t.jsx)(l.sq,{basePath:ke.address,schema:Ue,onlyRenderProperties:!0,isUseFormilyField:!0})}))})}))})})},Ut=function(W){var de=null;return W.mapProperties(function(ve){ve["x-linkage-rules"]&&(de=ve["x-linkage-rules"])}),de},wt=function(W){var de,ve,he=W.form,ye=(0,m.useFieldSchema)(),Me=(0,k.XC)(),Ue=Me.setFormValueChanged,ke=(0,fe.OQ)(),Ye=(0,fe.Kp)({currentForm:he}),Qe=(0,Le.u)(),et=Qe.templateFinished,gt=(0,Te.hS)()||{},we=gt.loading,pt=(0,Ne.qD)(),ft=((de=Ut(ye)||((ve=ye.parent)===null||ve===void 0?void 0:ve["x-linkage-rules"]))===null||de===void 0?void 0:de.filter(function(mt){return!mt.disabled}))||[];return(0,a.useEffect)(function(){var mt=(0,ge.uid)();return he.addEffects(mt,function(){(0,x.onFormInputChange)(function(){Ue==null||Ue(!0)})}),W.disabled&&(he.disabled=W.disabled),function(){he.removeEffects(mt)}},[he,W.disabled,Ue]),(0,a.useEffect)(function(){if(!we){var mt=(0,ge.uid)(),At=[];return setTimeout(function(){he.addEffects(mt,function(){(0,Pe.A)(ft,function(yt,on){var yn;if((yn=yt.targetFields)!==null&&yn!==void 0&&yn.length){var In=yt.targetFields.join(",");(0,x.onFieldInit)("*(".concat(In,")"),function(gn,Kt){At.push((0,je.jd)({field:gn,linkageRules:ft,formValues:Kt.values,localVariables:Ye,action:yt,rule:on,variables:ke},pt.jsonLogic))})}})})}),function(){he.removeEffects(mt),At.forEach(function(yt){yt()})}}},[ft,et,we]),ye["x-decorator"]==="FormV2"?(0,t.jsx)(Ht,o()({},W)):(0,t.jsx)(Dt,o()({},W))},ot=function(W){var de=(0,m.useFieldSchema)(),ve=(0,k.XC)(),he=ve.setFormValueChanged,ye=(0,a.useMemo)(function(){return(0,x.createForm)({disabled:W.disabled,effects:function(){(0,x.onFormInputChange)(function(Ue){he==null||he(!0)})}})},[]);return de["x-decorator"]==="FormV2"?(0,t.jsx)(Ht,o()({form:ye},W)):(0,t.jsx)(Dt,o()({form:ye},W))},qe=(0,ue.css)(dt||(dt=ee()([`
  .ant-formily-item-feedback-layout-loose {
    margin-bottom: 12px;
  }
`]))),Be=(0,Se.t)((0,m.observer)(function(te){var W=(0,m.useField)(),de=(0,me.d)(),ve=de.token,he=(0,re.w)(te),ye=he.form,Me=he.disabled,Ue=b()(he,Ct),ke=(0,a.useMemo)(function(){return{token:{marginBlock:ve.marginLG}}},[ve.marginLG]),Ye=Me||W.disabled;return(0,t.jsx)(F.ZP,{componentDisabled:Ye,theme:ke,children:(0,t.jsx)("form",{onSubmit:function(et){return et.preventDefault()},className:qe,children:ye?(0,t.jsx)(wt,o()(o()({form:ye},Ue),{},{disabled:Ye})):(0,t.jsx)(ot,o()(o()({},Ue),{},{disabled:Ye}))})})}),{displayName:"Form"}),rt=(0,Se.t)((0,se.C)(function(te){var W=(0,ze.bz)(),de=(0,me.d)(),ve=de.token,he=(0,a.useMemo)(function(){return{marginBottom:ve.margin}},[ve.margin]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Ke,{style:he,form:te.form||(W==null?void 0:W.form)}),(0,t.jsx)(Be,o()({},te))]})}));rt.displayName="FormWithDataTemplates";var Ve=e(35964),$e=e(44355),it=e(58837),Pt=e(4277),Lt=e(62662),$t=e(28561),$n=e(25750),pn=e(43319),un=e(80564),Xn=new w.F5({name:"FormSettings",items:[{name:"title",Component:$n._},{name:"setTheBlockHeight",Component:$t.q},{name:"linkageRules",Component:Lt.lc,useComponentProps:function(){var W=(0,u.useCollection_deprecated)(),de=W.name;return{collectionName:de}}},{name:"dataTemplates",Component:Lt.ON,useVisible:function(){var W=(0,ze.bz)(),de=W.action;return!de},useComponentProps:function(){var W=(0,u.useCollection_deprecated)(),de=W.name;return{collectionName:de}}},{name:"divider",type:"divider"},{name:"formItemTemplate",Component:Lt.vC,useComponentProps:function(){var W,de,ve=(0,N.rE)(),he=ve.componentNamePrefix,ye=(0,it.Kx)(),Me=ye.name,Ue=(0,m.useFieldSchema)(),ke=(Ue==null||(W=Ue["x-decorator-props"])===null||W===void 0?void 0:W.resource)||(Ue==null||(de=Ue["x-decorator-props"])===null||de===void 0?void 0:de.association);return{componentName:"".concat(he,"FormItem"),collectionName:Me,resourceName:ke}}},{name:"divider2",type:"divider"},{name:"remove",type:"remove",componentProps:{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}]}),Yn=new w.F5({name:"ReadPrettyFormSettings",items:[{name:"title",Component:$n._},{name:"linkageRules",Component:Lt.lc,useComponentProps:function(){var W=(0,u.useCollection_deprecated)(),de=W.name;return{collectionName:de,readPretty:!0}}},{name:"formItemTemplate",Component:Lt.vC,useComponentProps:function(){var W,de,ve=(0,N.rE)(),he=ve.componentNamePrefix,ye=(0,it.Kx)(),Me=ye.name,Ue=(0,m.useFieldSchema)(),ke=(Ue==null||(W=Ue["x-decorator-props"])===null||W===void 0?void 0:W.resource)||(Ue==null||(de=Ue["x-decorator-props"])===null||de===void 0?void 0:de.association);return{insertAdjacentPosition:"beforeEnd",componentName:"".concat(he,"ReadPrettyFormItem"),collectionName:Me,resourceName:ke}}},{name:"divider",type:"divider"},{name:"remove",type:"remove",componentProps:{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}]}),jn=new w.F5({name:"FormDetailsSettings",items:[{name:"title",Component:$n._},{name:"setTheBlockHeight",Component:$t.q},{name:"linkageRules",Component:Lt.lc,useComponentProps:function(){var W=(0,u.useCollection_deprecated)(),de=W.name;return{collectionName:de,readPretty:!0}}},{name:"dataScope",Component:pn.H,useComponentProps:function(){var W,de=(0,u.useCollection_deprecated)(),ve=de.name,he=(0,m.useFieldSchema)(),ye=(0,ze.bz)(),Me=ye.form,Ue=(0,m.useField)(),ke=(0,Ve.nT)(),Ye=ke.service,Qe=(0,Et.ng)(),et=Qe.dn;return{collectionName:ve,defaultFilter:(he==null||(W=he["x-decorator-props"])===null||W===void 0||(W=W.params)===null||W===void 0?void 0:W.filter)||{},form:Me,onSubmit:function(we){var pt,ft,mt=we.filter;mt=(0,un.Wm)(mt);var At=Ue.decoratorProps.params||{};At.filter=mt,Ue.decoratorProps.params=At,he["x-decorator-props"].params=At,Ye.run(o()(o()({},(pt=Ye.params)===null||pt===void 0?void 0:pt[0]),{},{filter:mt})),et.emit("patch",{schema:(ft={},Je()(ft,"x-uid",he["x-uid"]),Je()(ft,"x-decorator-props",he["x-decorator-props"]),ft)})}}}},Pt.wq,{name:"sortingRules",type:"modal",useComponentProps:function(){var W,de=(0,u.useCollection_deprecated)(),ve=de.name,he=(0,lt.$)(),ye=he.t,Me=(0,m.useFieldSchema)(),Ue=(0,m.useField)(),ke=(0,Ve.nT)(),Ye=ke.service,Qe=(0,Et.ng)(),et=Qe.dn,gt=(0,$e.useSortFields)(ve),we=(Me==null||(W=Me["x-decorator-props"])===null||W===void 0||(W=W.params)===null||W===void 0?void 0:W.sort)||[],pt=we==null?void 0:we.map(function(ft){return ft.startsWith("-")?{field:ft.substring(1),direction:"desc"}:{field:ft,direction:"asc"}});return{title:ye("Set default sorting rules"),components:{ArrayItems:f.ArrayItems},schema:{type:"object",title:ye("Set default sorting rules"),properties:{sort:{type:"array",default:pt,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:gt,required:!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:ye("ASC"),value:"asc"},{label:ye("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:ye("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function(mt){var At,yt,on=mt.sort,yn=on.map(function(gn){return gn.direction==="desc"?"-".concat(gn.field):gn.field}),In=Ue.decoratorProps.params||{};In.sort=yn,Ue.decoratorProps.params=In,Me["x-decorator-props"].params=In,et.emit("patch",{schema:(At={},Je()(At,"x-uid",Me["x-uid"]),Je()(At,"x-decorator-props",Me["x-decorator-props"]),At)}),Ye.run(o()(o()({},(yt=Ye.params)===null||yt===void 0?void 0:yt[0]),{},{sort:yn}))}}}},{name:"template",Component:H.G,useComponentProps:function(){var W,de,ve=(0,u.useCollection_deprecated)(),he=ve.name,ye=(0,m.useFieldSchema)(),Me=(0,N.rE)(),Ue=Me.componentNamePrefix,ke=(ye==null||(W=ye["x-decorator-props"])===null||W===void 0?void 0:W.resource)||(ye==null||(de=ye["x-decorator-props"])===null||de===void 0?void 0:de.association);return{componentName:"".concat(Ue,"Details"),collectionName:he,resourceName:ke}}},{name:"divider",type:"divider"},{name:"remove",type:"remove",componentProps:{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}]}),ir=(0,m.observer)(function(te){var W=(0,m.useFieldSchema)(),de=(0,u.useCollection_deprecated)(),ve=de.getField,he=(0,m.useField)(),ye=ve(W.name),Me=(0,Et.eJ)();return(0,a.useEffect)(function(){if(!he.title){var Ue;he.title=Me(ye==null||(Ue=ye.uiSchema)===null||Ue===void 0?void 0:Ue.title)}},[]),(0,t.jsx)("div",{children:te.children})},{displayName:"FormField"});rt.Designer=le,rt.FilterDesigner=Ee,rt.ReadPrettyDesigner=xe,rt.Templates=Ke;var fr=e(97855),Ar=e(38308),wr=e(97832),Kr=e(15867),ao=e(56140),Qr=e(93967),_r=e.n(Qr),Rr=e(4511),Hr=e(89250),Yr=e(64930),eo=e(85782),ho=e(69803),co=e(69962),po=e(82369),Wo=e(7825),Vr=e(4530),Gr=e(54724),to=e(96256),lo=e(20493),mo=e(39594),No=e(68508),Jo=e(73935),Tr=e(21143),Zo=e(74820),qo=e(48375),fa=e(87995),Da=e(5914),Ma=e(38342);function ia(te,W){return m.Schema.isSchemaInstance(te)||(te=new m.Schema(te)),te.reduceProperties(function(de,ve){if(ve["x-uid"]===W)return ve;var he=ia(ve,W);return he||de},null)}function da(te){m.Schema.isSchemaInstance(te)||(te=new m.Schema(te));var W=mr()(m.Schema.getOrderProperties(te)),de;try{for(W.s();!(de=W.n()).done;){var ve=de.value.schema;if(ve["x-component"]==="Menu.Item")return ve;var he=da(ve);if(he)return he}}catch(ye){W.e(ye)}finally{W.f()}return null}function Ua(te){if(te){var W=[];for(W.push(te.name);te.parent&&te.parent["x-component"]!=="Menu";)W.push(te.parent.name),te=te.parent;return W.reverse()}}function ea(te,W){return Ua(ia(te,W))}var Eo=e(18591),Tn=e(11189),Ge={beforeBegin:"insertBefore",afterEnd:"insertAfter"},at=function te(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},de=arguments.length>1?arguments[1]:void 0,ve=de.t,he=de.compile,ye=[];for(var Me in W)if(Object.prototype.hasOwnProperty.call(W,Me)){var Ue=W[Me],ke={label:(0,Tr.isVariable)(Ue.title)?he(Ue.title):ve(Ue.title),value:"".concat(Ue["x-uid"],"||").concat(Ue["x-component"])};if(Ue.properties){var Ye=te(Ue.properties,{t:ve,compile:he});Ye!=null&&Ye.length&&(ke.children=Ye)}ye.push(ke)}return ye},bt=function(W){for(var de=W.parent;de;){if(de["x-component"]==="Menu")return de;de=de.parent}},It=function(W){var de=W.eventKey,ve=W.title,he=W.insertPosition,ye=(0,lt.$)(),Me=ye.t,Ue=(0,m.useFieldSchema)(),ke=(0,Tr.useURLAndHTMLSchema)(),Ye=ke.urlSchema,Qe=ke.paramsSchema,et=Ue["x-component"]==="Menu.SubMenu",gt=Ao(),we=gt.createRoute,pt=gt.moveRoute,ft=(0,Eo.r3)();return!et&&he==="beforeEnd"?null:(0,t.jsxs)(Tr.SchemaSettingsSubMenu,{eventKey:de,title:ve,children:[(0,t.jsx)(Tr.SchemaSettingsModalItem,{eventKey:"".concat(he,"group"),title:Me("Group"),schema:{type:"object",title:Me("Add group"),properties:{title:{"x-decorator":"FormItem","x-component":"Input",title:Me("Menu item title"),required:!0,"x-component-props":{}},icon:{title:Me("Icon"),"x-component":"IconPicker","x-decorator":"FormItem"}}},onSubmit:function(){var mt=A()(g()().mark(function At(yt){var on,yn,In,gn,Kt,tn,Qn,sr,or;return g()().wrap(function(Gn){for(;;)switch(Gn.prev=Gn.next){case 0:return yn=yt.title,In=yt.icon,gn=Ue.__route__,Kt=(on=Ue.parent)===null||on===void 0?void 0:on.__route__,tn=(0,ge.uid)(),Gn.next=6,we({type:Tn.H.group,title:yn,icon:In,parentId:he==="beforeEnd"?gn==null?void 0:gn.id:Kt==null?void 0:Kt.id,schemaUid:tn});case 6:if(Qn=Gn.sent,sr=Qn.data,!Ge[he]){Gn.next=11;break}return Gn.next=11,pt({sourceId:sr==null||(or=sr.data)===null||or===void 0?void 0:or.id,targetId:gn==null?void 0:gn.id,sortField:"sort",method:Ge[he]});case 11:case"end":return Gn.stop()}},At)}));return function(At){return mt.apply(this,arguments)}}()}),(0,t.jsx)(Tr.SchemaSettingsModalItem,{eventKey:"".concat(he,"page"),title:Me("Page"),schema:{type:"object",title:Me("Add page"),properties:{title:{"x-decorator":"FormItem","x-component":"Input",title:Me("Menu item title"),required:!0,"x-component-props":{}},icon:{title:Me("Icon"),"x-component":"IconPicker","x-decorator":"FormItem"}}},onSubmit:function(){var mt=A()(g()().mark(function At(yt){var on,yn,In,gn,Kt,tn,Qn,sr,or,Un,Gn,Sn;return g()().wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return yn=yt.title,In=yt.icon,gn=Ue.__route__,Kt=(on=Ue.parent)===null||on===void 0?void 0:on.__route__,tn=(0,ge.uid)(),Qn=(0,ge.uid)(),sr=(0,ge.uid)(),or=(0,ge.uid)(),xr.next=9,we({type:Tn.H.page,title:yn,icon:In,parentId:he==="beforeEnd"?gn==null?void 0:gn.id:Kt==null?void 0:Kt.id,schemaUid:Qn,menuSchemaUid:tn,enableTabs:!1,children:[{type:Tn.H.tabs,schemaUid:sr,tabSchemaName:or,hidden:!0}]});case 9:if(Un=xr.sent,Gn=Un.data,!Ge[he]){xr.next=14;break}return xr.next=14,pt({sourceId:Gn==null||(Sn=Gn.data)===null||Sn===void 0?void 0:Sn.id,targetId:gn==null?void 0:gn.id,sortField:"sort",method:Ge[he]});case 14:ft((0,Tr.getPageMenuSchema)({pageSchemaUid:Qn,tabSchemaUid:sr,tabSchemaName:or}));case 15:case"end":return xr.stop()}},At)}));return function(At){return mt.apply(this,arguments)}}()}),(0,t.jsx)(Tr.SchemaSettingsModalItem,{eventKey:"".concat(he,"link"),title:Me("Link"),schema:{type:"object",title:Me("Add link"),properties:{title:{title:Me("Menu item title"),required:!0,"x-component":"Input","x-decorator":"FormItem"},icon:{title:Me("Icon"),"x-component":"IconPicker","x-decorator":"FormItem"},href:Ye,params:Qe}},onSubmit:function(){var mt=A()(g()().mark(function At(yt){var on,yn,In,gn,Kt,tn,Qn,sr,or,Un,Gn;return g()().wrap(function(qn){for(;;)switch(qn.prev=qn.next){case 0:return yn=yt.title,In=yt.icon,gn=yt.href,Kt=yt.params,tn=Ue.__route__,Qn=(on=Ue.parent)===null||on===void 0?void 0:on.__route__,sr=(0,ge.uid)(),qn.next=6,we({type:Tn.H.link,title:yn,icon:In,parentId:he==="beforeEnd"?tn==null?void 0:tn.id:Qn==null?void 0:Qn.id,schemaUid:sr,options:{href:gn,params:Kt}},!1);case 6:if(or=qn.sent,Un=or.data,!Ge[he]){qn.next=11;break}return qn.next=11,pt({sourceId:Un==null||(Gn=Un.data)===null||Gn===void 0?void 0:Gn.id,targetId:tn==null?void 0:tn.id,sortField:"sort",method:Ge[he]});case 11:case"end":return qn.stop()}},At)}));return function(At){return mt.apply(this,arguments)}}()})]})},Ot={TreeSelect:f.TreeSelect},En=function(){var W,de,ve=Ao(),he=ve.updateRoute,ye=ve.deleteRoute,Me=(0,m.useField)(),Ue=(0,m.useFieldSchema)(),ke=(0,Tr.useAPIClient)(),Ye=(0,Tr.useDesignable)(),Qe=Ye.dn,et=Ye.refresh,gt=(0,lt.$)(),we=gt.t,pt=bt(Ue),ft=(0,Et.eJ)(),mt=(0,Tr.useURLAndHTMLSchema)(),At=mt.urlSchema,yt=mt.paramsSchema,on=(0,a.useMemo)(function(){var nr;return ft(pt==null||(nr=pt["x-component-props"])===null||nr===void 0?void 0:nr.onSelect)},[pt==null||(W=pt["x-component-props"])===null||W===void 0?void 0:W.onSelect]),yn=(0,a.useMemo)(function(){return at(pt==null?void 0:pt.properties,{t:we,compile:ft})},[pt==null?void 0:pt.properties,we,ft]),In=(0,a.useCallback)(function(nr){(0,x.onFieldChange)("target",function(Nn){var lr,Dn,qt=(Nn==null||(lr=Nn.value)===null||lr===void 0||(Dn=lr.split)===null||Dn===void 0?void 0:Dn.call(lr,"||"))||[],kn=Re()(qt,2),cr=kn[1];Nn.query("position").take(function(ar){ar.dataSource=cr==="Menu.SubMenu"?[{label:we("Before"),value:"beforeBegin"},{label:we("After"),value:"afterEnd"},{label:we("Inner"),value:"beforeEnd"}]:[{label:we("Before"),value:"beforeBegin"},{label:we("After"),value:"afterEnd"}]})})},[we]),gn=(0,a.useMemo)(function(){return{type:"object",title:we("Edit menu item"),properties:{title:{title:we("Menu item title"),required:!0,"x-decorator":"FormItem","x-component":"Input","x-component-props":{}},icon:{title:we("Menu item icon"),"x-component":"IconPicker","x-decorator":"FormItem"}}}},[we]),Kt=(0,a.useMemo)(function(){return{title:Me.title,icon:Me.componentProps.icon}},[Me.title,Me.componentProps.icon]),tn=(0,a.useMemo)(function(){return{type:"object",title:we("Edit tooltip"),properties:{tooltip:{"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}}},[we]),Qn=(0,a.useMemo)(function(){return{tooltip:Me.componentProps.tooltip}},[Me.componentProps.tooltip]);Ue["x-component"]==="Menu.URL"&&(gn.properties.href=At,gn.properties.params=yt,Kt.href=Me.componentProps.href,Kt.params=Me.componentProps.params);var sr=(0,a.useCallback)(function(nr){var Nn,lr,Dn=nr.title,qt=nr.icon,kn=nr.href,cr=nr.params,ar=(Nn={},Je()(Nn,"x-uid",Ue["x-uid"]),Je()(Nn,"x-server-hooks",[{type:"onSelfSave",method:"extractTextToLocale"}]),Nn);Dn&&(Ue.title=Dn,Me.title=Dn,ar.title=Dn,et()),Me.componentProps.icon=qt,Me.componentProps.href=kn,Me.componentProps.params=cr,ar["x-component-props"]={icon:qt,href:kn,params:cr},Ue["x-component-props"]=Ue["x-component-props"]||{},Ue["x-component-props"].icon=qt,Ue["x-component-props"].href=kn,Ue["x-component-props"].params=cr,on==null||on({item:{props:{schema:Ue}}}),Qe.emit("patch",{schema:ar}),(lr=Ue.__route__)!==null&&lr!==void 0&&lr.id&&he(Ue.__route__.id,{title:Dn,icon:qt,options:kn||cr?{href:kn,params:cr}:void 0})},[Ue,Me,Qe,et,on]),or=(0,a.useCallback)(function(nr){var Nn,lr=nr.tooltip;(Nn=Ue.__route__)!==null&&Nn!==void 0&&Nn.id&&he(Ue.__route__.id,{tooltip:lr})},[Ue,Me,Qe,et,on]),Un=(0,a.useMemo)(function(){return{type:"object",title:we("Move to"),properties:{target:{title:we("Target"),enum:yn,required:!0,"x-decorator":"FormItem","x-component":"TreeSelect","x-component-props":{}},position:{title:we("Position"),required:!0,enum:[{label:we("Before"),value:"beforeBegin"},{label:we("After"),value:"afterEnd"}],default:"afterEnd","x-component":"Radio.Group","x-decorator":"FormItem"}}}},[yn,we]),Gn=Ao(),Sn=Gn.moveRoute,qn=(0,a.useCallback)(function(){var nr=A()(g()().mark(function Nn(lr){var Dn,qt,kn,cr,ar,vr,hr,pr,Mr,$r;return g()().wrap(function(jr){for(;;)switch(jr.prev=jr.next){case 0:if(qt=lr.target,kn=lr.position,cr=(qt==null||(Dn=qt.split)===null||Dn===void 0?void 0:Dn.call(qt,"||"))||[],ar=Re()(cr,1),vr=ar[0],vr){jr.next=4;break}return jr.abrupt("return");case 4:return hr=ia(pt,vr),pr=(0,Et.Pl)({t:we,api:ke,refresh:et,current:hr}),Mr={beforeBegin:"insertBefore",afterEnd:"insertAfter"},$r=kn==="beforeEnd"?{targetScope:{parentId:hr.__route__.id}}:{targetId:hr.__route__.id},jr.next=10,Sn(o()({sourceId:Ue.__route__.id,sortField:"sort",method:Mr[kn]},$r));case 10:pr.loadAPIClientEvents(),pr.insertAdjacent(kn,Ue);case 12:case"end":return jr.stop()}},Nn)}));return function(Nn){return nr.apply(this,arguments)}}(),[pt,we,ke,et,Sn,Ue]),xr=(0,a.useMemo)(function(){return{title:we("Delete menu item"),onOk:function(){var Nn;!((Nn=Ue.__route__)===null||Nn===void 0)&&Nn.id&&ye(Ue.__route__.id)}}},[Ue,ye,we]);return(0,t.jsxs)(Tr.GeneralSchemaDesigner,{children:[(0,t.jsx)(Tr.SchemaSettingsModalItem,{title:we("Edit"),eventKey:"edit",schema:gn,initialValues:Kt,onSubmit:sr}),(0,t.jsx)(Tr.SchemaSettingsModalItem,{title:we("Edit tooltip"),eventKey:"edit-tooltip",schema:tn,initialValues:Qn,onSubmit:or}),(0,t.jsx)(Tr.SchemaSettingsSwitchItem,{title:we("Hidden"),checked:(de=Ue["x-component-props"])===null||de===void 0?void 0:de.hidden,onChange:function(Nn){Da.Z.confirm({title:we("Are you sure you want to hide this menu?"),icon:(0,t.jsx)(fa.Z,{}),content:we("After hiding, this menu will no longer appear in the menu bar. To show it again, you need to go to the route management page to configure it."),onOk:function(){return A()(g()().mark(function Dn(){var qt;return g()().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:if(Ue["x-component-props"].hidden=!!Nn,Me.componentProps.hidden=!!Nn,!((qt=Ue.__route__)!==null&&qt!==void 0&&qt.id)){cr.next=5;break}return cr.next=5,he(Ue.__route__.id,{hideInMenu:!!Nn});case 5:Qe.emit("patch",{schema:{"x-uid":Ue["x-uid"],"x-component-props":Ue["x-component-props"]}});case 6:case"end":return cr.stop()}},Dn)}))()}})}}),(0,t.jsx)(Tr.SchemaSettingsModalItem,{title:we("Move to"),eventKey:"move-to",components:Ot,effects:In,schema:Un,onSubmit:qn}),(0,t.jsx)(Tr.SchemaSettingsDivider,{}),(0,t.jsx)(It,{eventKey:"insertbeforeBegin",title:we("Insert before"),insertPosition:"beforeBegin"}),(0,t.jsx)(It,{eventKey:"insertafterEnd",title:we("Insert after"),insertPosition:"afterEnd"}),(0,t.jsx)(It,{eventKey:"insertbeforeEnd",title:we("Insert inner"),insertPosition:"beforeEnd"}),(0,t.jsx)(Tr.SchemaSettingsDivider,{}),(0,t.jsx)(Tr.SchemaSettingsRemove,{confirm:xr})]})},Fn=e(90105),Kn=e(65633),er=["icon","children","hidden"],On=["icon","children","hidden"],tr=["icon","children","hidden"],Cr,Ur,Pr,Or,Nr,Lr=(0,ue.css)(Cr||(Cr=ee()([`
  position: relative;
  display: inline-block;
  margin-left: -24px;
  margin-right: -34px;
  padding: 0 34px 0 24px;
  width: calc(100% + 58px);
  height: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  &:hover {
    > .general-schema-designer {
      display: block;
    }
  }
  &.nb-action-link {
    > .general-schema-designer {
      top: -10px;
      bottom: -10px;
      left: -10px;
      right: -10px;
    }
  }
  > .general-schema-designer {
    position: absolute;
    z-index: 999;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    display: none;
    background: var(--colorBgSettingsHover);
    border: 0;
    pointer-events: none;
    > .general-schema-designer-icons {
      position: absolute;
      right: 2px;
      top: 2px;
      line-height: 16px;
      pointer-events: all;
      .ant-space-item {
        background-color: var(--colorSettings);
        color: #fff;
        line-height: 16px;
        width: 16px;
        padding-left: 1px;
        align-self: stretch;
      }
    }
  }
`]))),zr=(0,ue.css)(Ur||(Ur=ee()([`
  position: relative;
  display: flex;
  // justify-content: center;
  align-items: center;
  margin-left: -20px;
  margin-right: -20px;
  padding: 0 20px;
  width: calc(100% + 40px);
  height: 100%;
  &:hover {
    > .general-schema-designer {
      display: block;
    }
  }
  &.nb-action-link {
    > .general-schema-designer {
      top: -10px;
      bottom: -10px;
      left: -10px;
      right: -10px;
    }
  }
  > .general-schema-designer {
    position: absolute;
    z-index: 999;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    display: none;
    background: var(--colorBgSettingsHover);
    border: 0;
    pointer-events: none;
    > .general-schema-designer-icons {
      position: absolute;
      right: 2px;
      top: 2px;
      line-height: 16px;
      pointer-events: all;
      .ant-space-item {
        background-color: var(--colorSettings);
        color: #fff;
        line-height: 16px;
        width: 16px;
        padding-left: 1px;
        align-self: stretch;
      }
    }
  }
`]))),no=(0,ue.css)(Pr||(Pr=ee()([`
  .ant-menu-item:hover {
    > .ant-menu-title-content > div {
      .general-schema-designer {
        display: block;
      }
    }
  }
`]))),fo=(0,ue.css)(Or||(Or=ee()([`
  height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  .ant-menu-item {
    > .ant-menu-title-content {
      height: 100%;
      margin-left: -24px;
      margin-right: -16px;
      padding: 0 16px 0 24px;
      > div {
        > .general-schema-designer {
          right: 6px !important;
        }
      }
    }
  }
  .ant-menu-submenu-title {
    .ant-menu-title-content {
      height: 100%;
      margin-left: -24px;
      margin-right: -34px;
      padding: 0 34px 0 24px;
      > div {
        > .general-schema-designer {
          right: 6px !important;
        }
        > span.anticon {
          margin-right: 10px;
        }
      }
    }
  }
`]))),Oo=(0,ue.css)(Nr||(Nr=ee()([`
  :active {
    background: inherit;
  }
`]))),Vo=function(W){var de=W.schema,ve=W.style,he=(0,qo.v)(),ye=he.t;return(0,t.jsx)("span",{style:ve,children:ye(de.title)})},Bo=(0,Kn.r)(Vo),Lo=(0,a.createContext)(null);Lo.displayName="ParentRouteContext";var xo=function(){return(0,a.useContext)(Lo)},Ao=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"desktopRoutes",de=(0,Tr.useAPIClient)(),ve=(0,a.useMemo)(function(){return de.resource(W)},[de,W]),he=(0,Tr.useAllAccessDesktopRoutes)(),ye=he.refresh,Me=(0,a.useCallback)(function(){var Qe=A()(g()().mark(function et(gt){var we,pt,ft=arguments;return g()().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return we=ft.length>1&&ft[1]!==void 0?ft[1]:!0,At.next=3,ve.create({values:gt});case 3:return pt=At.sent,we&&ye(),At.abrupt("return",pt);case 6:case"end":return At.stop()}},et)}));return function(et){return Qe.apply(this,arguments)}}(),[ve,ye]),Ue=(0,a.useCallback)(function(){var Qe=A()(g()().mark(function et(gt,we){var pt,ft,mt=arguments;return g()().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return pt=mt.length>2&&mt[2]!==void 0?mt[2]:!0,yt.next=3,ve.update({filterByTk:gt,values:we});case 3:return ft=yt.sent,pt&&ye(),yt.abrupt("return",ft);case 6:case"end":return yt.stop()}},et)}));return function(et,gt){return Qe.apply(this,arguments)}}(),[ve,ye]),ke=(0,a.useCallback)(function(){var Qe=A()(g()().mark(function et(gt){var we,pt,ft=arguments;return g()().wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return we=ft.length>1&&ft[1]!==void 0?ft[1]:!0,At.next=3,ve.destroy({filterByTk:gt});case 3:return pt=At.sent,we&&ye(),At.abrupt("return",pt);case 6:case"end":return At.stop()}},et)}));return function(et){return Qe.apply(this,arguments)}}(),[ye,ve]),Ye=(0,a.useCallback)(function(){var Qe=A()(g()().mark(function et(gt){var we,pt,ft,mt,At,yt,on,yn,In;return g()().wrap(function(Kt){for(;;)switch(Kt.prev=Kt.next){case 0:return we=gt.sourceId,pt=gt.targetId,ft=gt.targetScope,mt=gt.sortField,At=gt.sticky,yt=gt.method,on=gt.refreshAfterMove,yn=on===void 0?!0:on,Kt.next=3,ve.move({sourceId:we,targetId:pt,targetScope:ft,sortField:mt,sticky:At,method:yt});case 3:return In=Kt.sent,yn&&ye(),Kt.abrupt("return",In);case 6:case"end":return Kt.stop()}},et)}));return function(et){return Qe.apply(this,arguments)}}(),[ye,ve]);return{createRoute:Me,updateRoute:Ue,deleteRoute:ke,moveRoute:Ye}},ta=a.memo(function(te){var W=te.schema,de=te.mode,ve=te.onSelect,he=te.setDefaultSelectedKeys,ye=te.defaultSelectedKeys,Me=te.defaultOpenKeys,Ue=te.selectedKeys,ke=te.designable,Ye=te.render,Qe=te.children,et=te.disabled,gt=te.onBlur,we=te.onChange,pt=te.onFocus,ft=te.theme,mt=(0,Zo.iX)(),At=mt.Component,yt=mt.getMenuItems,on=(0,a.useMemo)(function(){var In={key:"x-designer-button",style:{padding:"0 8px",order:9999},label:Ye({"data-testid":"schema-initializer-Menu-header",style:{background:"none"}}),notdelete:!0,disabled:!0},gn=yt(function(){return Qe});return ke&&gn.push(In),gn},[Qe,ke]),yn=(0,a.useCallback)(function(In){var gn,Kt=(gn=W.properties)===null||gn===void 0?void 0:gn[In.key];if(Kt)if(de==="mix")if(Kt["x-component"]!=="Menu.SubMenu")ve==null||ve(In);else{var tn=da(Kt);if(!tn)return ve==null?void 0:ve(In);var Qn=ea(W,tn["x-uid"]);he(Qn),ve==null||ve({key:tn.name,item:{props:{schema:tn}}})}else ve==null||ve(In)},[W,de,ve,he]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(At,{}),(0,t.jsx)(No.Z,{disabled:et,onBlur:gt,onChange:we,onFocus:pt,theme:ft,className:no,onClick:yn,mode:de==="mix"?"horizontal":de,defaultOpenKeys:Me,defaultSelectedKeys:ye,selectedKeys:Ue,items:on})]})}),na=a.memo(function(te){var W,de=te.mode,ve=te.sideMenuSchema,he=te.sideMenuRef,ye=te.openKeys,Me=te.setOpenKeys,Ue=te.selectedKeys,ke=te.onSelect,Ye=te.render,Qe=te.t,et=te.api,gt=te.designable,we=(0,Zo.iX)(),pt=we.Component,ft=we.getMenuItems,mt=(0,Fn.Z)(),At=(0,l.gR)(),yt=(0,l.QJ)(),on=(0,a.useCallback)(function(gn){console.log("refresh"),mt(),At==null||At(gn),yt==null||yt()},[mt,At,yt]),yn=(0,a.useCallback)(function(gn){ke==null||ke(gn)},[ke]),In=(0,a.useMemo)(function(){var gn=ft(function(){return(0,t.jsx)(Tr.NocoBaseRecursionField,{schema:ve,onlyRenderProperties:!0},(0,ge.uid)())});return gt&&gn.push({key:"x-designer-button",disabled:!0,label:Ye({"data-testid":"schema-initializer-Menu-side",insert:function(tn){var Qn=(0,Et.Pl)({t:Qe,api:et,refresh:on,current:ve});Qn.loadAPIClientEvents(),Qn.insertAdjacent("beforeEnd",tn)}}),order:1,notdelete:!0}),gn},[et,gt,ft,on,Ye,ve,Qe]);return de==="mix"&&(ve==null?void 0:ve["x-component"])==="Menu.SubMenu"&&(he==null||(W=he.current)===null||W===void 0?void 0:W.firstChild)&&(0,Jo.createPortal)((0,t.jsxs)(la.Provider,{value:"inline",children:[(0,t.jsx)(pt,{}),(0,t.jsx)(No.Z,{mode:"inline",openKeys:ye,selectedKeys:Ue,onClick:yn,onOpenChange:Me,className:fo,items:In})]}),he.current.firstChild)});na.displayName="SideMenu";var la=(0,a.createContext)(null);la.displayName="MenuModeContext";var Xa=function(){var W,de=(0,m.useFieldSchema)(),ve=(0,a.useContext)(m.SchemaExpressionScopeContext),he=de==null||(W=de["x-component-props"])===null||W===void 0?void 0:W.sideMenuRefScopeKey;if(he)return ve[he]},ra=(0,a.createContext)(null);ra.displayName="MenuItemDesignerContext";var sa=function(){var W=Ao(),de=W.moveRoute,ve=(0,a.useCallback)(function(he){var ye,Me,Ue=he.active,ke=he.over,Ye=Ue==null||(ye=Ue.data)===null||ye===void 0||(ye=ye.current)===null||ye===void 0?void 0:ye.schema,Qe=ke==null||(Me=ke.data)===null||Me===void 0||(Me=Me.current)===null||Me===void 0?void 0:Me.schema;!Ye||!Qe||de({sourceId:Ye.__route__.id,targetId:Qe.__route__.id,sortField:"sort"})},[de]);return{onDragEnd:ve}},Yo=a.memo(function(te){var W=(0,re.w)(te),de=W.onSelect,ve=W.mode,he=W.selectedUid,ye=W.defaultSelectedUid,Me=W.defaultSelectedKeys,Ue=W.defaultOpenKeys,ke=W.children,Ye=W.disabled,Qe=W.onBlur,et=W.onChange,gt=W.onFocus,we=W.theme,pt=(0,lt.$)(),ft=pt.t,mt=(0,Et.et)(),At=(0,m.useFieldSchema)(),yt=(0,Tr.useAPIClient)(),on=(0,Tr.useSchemaInitializerRender)(At["x-initializer"],At["x-initializer-props"]),yn=on.render,In=Xa(),gn=(0,a.useState)(),Kt=Re()(gn,2),tn=Kt[0],Qn=Kt[1],sr=(0,a.useState)(function(){return Me||(ye?ea(At,ye):[])}),or=Re()(sr,2),Un=or[0],Gn=or[1],Sn=(0,a.useState)(function(){return["inline","mix"].includes(ve)?Ue||Un:Ue}),qn=Re()(Sn,2),xr=qn[0],nr=qn[1],Nn=(0,a.useMemo)(function(){var kn;if(he){var cr=ea(At,he);kn=(cr==null?void 0:cr[0])||null}else kn=(Un==null?void 0:Un[0])||null;if(ve==="mix"&&kn){var ar,vr=(ar=At.properties)===null||ar===void 0?void 0:ar[kn];if((vr==null?void 0:vr["x-component"])==="Menu.SubMenu")return vr}return null},[Un,ve,At,he]);(0,a.useEffect)(function(){if(!he){Qn(void 0);return}var kn=ea(At,he);Qn(kn),["inline","mix"].includes(ve)&&nr(Ue||kn)},[he]),(0,a.useEffect)(function(){["inline","mix"].includes(ve)&&nr(Un)},[Un]);var lr=(0,a.useContext)(Hu.D),Dn=sa(),qt=Dn.onDragEnd;return(0,t.jsx)(E.DndContext,{onDragEnd:qt,children:(0,t.jsx)(ra.Provider,{value:mt,children:(0,t.jsxs)(la.Provider,{value:ve,children:[(0,t.jsx)(ta,{disabled:Ye,onBlur:Qe,onChange:et,onFocus:gt,theme:we,schema:At,mode:ve,onSelect:de,setDefaultSelectedKeys:Gn,defaultSelectedKeys:Un,defaultOpenKeys:xr,selectedKeys:tn,designable:lr.designable,render:yn,children:ke}),(0,t.jsx)(Lo.Provider,{value:Nn==null?void 0:Nn.__route__,children:(0,t.jsx)(na,{mode:ve,sideMenuSchema:Nn,sideMenuRef:In,openKeys:xr,setOpenKeys:nr,selectedKeys:tn,onSelect:de,render:yn,t:ft,api:yt,designable:lr.designable})})]})})})});Yo.displayName="Menu";var ha={overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",verticalAlign:"middle"};Yo.Item=(0,m.observer)(function(te){var W=(0,qo.v)(),de=W.t,ve=(0,Zo.nu)(),he=ve.pushMenuItem,ye=te.icon,Me=te.children,Ue=te.hidden,ke=b()(te,er),Ye=(0,m.useFieldSchema)(),Qe=(0,m.useField)(),et=(0,a.useContext)(ra),gt=(0,a.useMemo)(function(){var we;return o()(o()({},ke),{},{hidden:Ue,className:Oo,key:Ye.name,eventKey:Ye.name,schema:Ye,label:(0,t.jsx)(m.SchemaContext.Provider,{value:Ye,children:(0,t.jsx)(m.FieldContext.Provider,{value:Qe,children:(0,t.jsxs)(E.SortableItem,{role:"button","aria-label":de(Qe.title),className:zr,removeParentsIfNoChildren:!1,children:[(0,t.jsx)(Tr.Icon,{type:ye}),(0,t.jsx)(Bo,{schema:Ye,style:ha,tooltip:Ye==null||(we=Ye["x-component-props"])===null||we===void 0?void 0:we.tooltip}),(0,t.jsx)(et,{})]})})})})},[Ye.title,ye,Ye,et]);return he?(he(gt),null):((0,Ze.error)("Menu.Item must be wrapped by GetMenuItemsContext.Provider"),null)},{displayName:"Menu.Item"});var Ia=function(W){var de,ve=W.href,he=W.params,ye=W.icon,Me=(0,m.useField)(),Ue=(0,m.useFieldSchema)(),ke=(0,qo.v)(),Ye=ke.t,Qe=(0,a.useContext)(ra),et=(0,Tr.useParseURLAndParams)(),gt=et.parseURLAndParams,we=(0,a.useRef)(ve);return(0,a.useEffect)(function(){var pt=function(){var ft=A()(g()().mark(function mt(){return g()().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return yt.prev=0,yt.next=3,gt(ve,he||[]);case 3:we.current=yt.sent,yt.next=10;break;case 6:yt.prev=6,yt.t0=yt.catch(0),console.error(yt.t0),we.current=ve;case 10:case"end":return yt.stop()}},mt,null,[[0,6]])}));return function(){return ft.apply(this,arguments)}}();pt()},[ve,JSON.stringify(he),gt]),(0,t.jsxs)(E.SortableItem,{className:zr,onClick:function(ft){window.open(we.current,"_blank"),ft.preventDefault(),ft.stopPropagation()},removeParentsIfNoChildren:!1,"aria-label":Ye(Me.title),children:[(0,t.jsx)(Tr.Icon,{type:ye}),(0,t.jsx)(Bo,{schema:Ue,style:ha,tooltip:Ue==null||(de=Ue["x-component-props"])===null||de===void 0?void 0:de.tooltip}),(0,t.jsx)(Qe,{})]})};Yo.URL=(0,m.observer)(function(te){var W=(0,Zo.nu)(),de=W.pushMenuItem,ve=(0,Et.ng)(),he=ve.designable,ye=te.icon,Me=te.children,Ue=te.hidden,ke=b()(te,On),Ye=(0,m.useFieldSchema)(),Qe=(0,m.useField)();if(!de)return(0,Ze.error)("Menu.URL must be wrapped by GetMenuItemsContext.Provider"),null;var et=(0,a.useMemo)(function(){return o()(o()({},ke),{},{hidden:he?!1:Ue,className:Oo,key:Ye.name,eventKey:Ye.name,schema:Ye,onClick:function(){},label:(0,t.jsx)(m.SchemaContext.Provider,{value:Ye,children:(0,t.jsx)(m.FieldContext.Provider,{value:Qe,children:(0,t.jsx)(Ia,{icon:ye,href:te.href,params:te.params})})})})},[Qe.title,he,Ue,ye,te.href,Ye,JSON.stringify(te.params)]);return de(et),null},{displayName:"MenuURL"}),Yo.SubMenu=(0,m.observer)(function(te){var W=(0,qo.v)(),de=W.t,ve=(0,Et.ng)(),he=ve.designable,ye=(0,Zo.iX)(),Me=ye.Component,Ue=ye.getMenuItems,ke=(0,Zo.nu)(),Ye=ke.pushMenuItem,Qe=te.icon,et=te.children,gt=te.hidden,we=b()(te,tr),pt=(0,m.useFieldSchema)(),ft=(0,m.useField)(),mt=(0,a.useContext)(la),At=(0,a.useContext)(ra),yt=(0,a.useMemo)(function(){var on;return o()(o()({},we),{},{hidden:he?!1:gt,className:Oo,key:pt.name,eventKey:pt.name,label:(0,t.jsx)(m.SchemaContext.Provider,{value:pt,children:(0,t.jsx)(m.FieldContext.Provider,{value:ft,children:(0,t.jsxs)(E.SortableItem,{className:Lr,removeParentsIfNoChildren:!1,"aria-label":de(ft.title),children:[(0,t.jsx)(Tr.Icon,{type:Qe}),(0,t.jsx)(Bo,{schema:pt,style:{marginInlineStart:0},tooltip:pt==null||(on=pt["x-component-props"])===null||on===void 0?void 0:on.tooltip}),(0,t.jsx)(At,{})]})})}),children:Ue(function(){return(0,t.jsx)(Tr.NocoBaseRecursionField,{schema:pt,onlyRenderProperties:!0})})})},[ft.title,Qe,pt,et,At]);return Ye?mt==="mix"?(0,t.jsx)(Yo.Item,o()({},te)):(Ye(yt),(0,t.jsx)(Me,{})):((0,Ze.error)("Menu.SubMenu must be wrapped by GetMenuItemsContext.Provider"),null)},{displayName:"Menu.SubMenu"}),Yo.Designer=En;var za=(0,c.l6)("nb-page",function(te){var W=te.componentCls;return Je()({},W,{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:20,display:"flex",flexDirection:"column",overflowY:"auto",overflowX:"hidden","&:hover":{"> .general-schema-designer":{display:"block"}},".ant-page-header":{zIndex:1,position:"relative"},"> .general-schema-designer":{position:"absolute",zIndex:999,top:"0",bottom:"0",left:"0",right:"0",display:"none",border:"0",pointerEvents:"none","> .general-schema-designer-icons":{zIndex:9999,position:"absolute",right:"2px",top:"2px",lineHeight:"16px",pointerEvents:"all",".ant-space-item":{backgroundColor:"var(--colorSettings)",color:"#fff",lineHeight:"16px",width:"16px",paddingLeft:"1px"}}},".pageHeaderCss":{backgroundColor:te.colorBgContainer,paddingInline:te.paddingLG,"&.ant-page-header-has-footer":{paddingTop:te.paddingSM,paddingBottom:"0",".ant-page-header-heading-left":{},".ant-page-header-footer":{marginBlockStart:"0"}},".ant-tabs-nav":{marginBottom:"0"},".ant-page-header-heading-title":{color:te.colorText}},".height0":{fontSize:0,height:0},".addTabBtn":{borderColor:"var(--colorSettings)",color:"var(--colorSettings)"},".designerCss":{position:"relative","&:hover":{"> .general-schema-designer":{display:"block"}},"&.nb-action-link":{"> .general-schema-designer":{top:"-10px",bottom:"-10px",left:"-10px",right:"-10px"}},"> .general-schema-designer":{position:"absolute",zIndex:999,top:"0",bottom:"0",left:"0",right:"0",display:"none",background:"var(--colorBgSettingsHover)",border:"0",pointerEvents:"none","> .general-schema-designer-icons":{position:"absolute",right:"2px",top:"2px",lineHeight:"16px",pointerEvents:"all",".ant-space-item":{backgroundColor:"var(--colorSettings)",color:"#fff",lineHeight:"16px",width:"16px",paddingLeft:"1px"}}}},".nb-page-wrapper":{padding:"".concat(te.paddingPageVertical,"px"),paddingBottom:0,flex:1}})}),ga=e(45619),Ka=e(49966),Wa=e(1992),Xo=e(50679),Uo=e(69054),zo=function(W){var de=W.title,ve=(0,Et.ng)(),he=ve.designable;return he?(0,t.jsx)(Wa.V$,{title:de,children:(0,t.jsx)(Xo.Mf,{settings:"PageSettings",showBorder:!1})}):null},Aa=function(){var W=(0,Et.ng)(),de=W.designable,ve=(0,Uo.z)(),he=ve.getAriaLabel,ye=(0,Ka.m)("PageTabSettings"),Me=ye.render;return de?(0,t.jsx)("div",{className:"general-schema-designer",children:(0,t.jsx)("div",{className:"general-schema-designer-icons",children:(0,t.jsxs)(We.Z,{size:3,align:"center",children:[(0,t.jsx)(E.DragHandler,{children:(0,t.jsx)(ga.Z,{style:{marginRight:0},role:"button","aria-label":he("drag-handler","tab")})}),Me()]})})}):null},Oa=a.memo(function(te){var W=te.children,de=(0,a.useContext)(Hr.UNSAFE_LocationContext),ve=(0,a.useContext)(Hr.UNSAFE_RouteContext),he=(0,a.useRef)(de),ye=(0,a.useRef)(ve);return!de.location.pathname.includes("/popups/")&&de.location.pathname!==he.current.location.pathname&&(he.current=de,ye.current=ve),(0,t.jsx)(Hr.UNSAFE_LocationContext.Provider,{value:he.current,children:(0,t.jsx)(Hr.UNSAFE_RouteContext.Provider,{value:ye.current,children:W})})});Oa.displayName="PopupRouteContextResetter";var Na,_a=function(){return(0,lt.$)("lm-desktop-routes")},wa=a.memo(function(te){var W,de,ve=(0,m.useFieldSchema)(),he=te.currentTabUid,ye=(W=ve["x-component-props"])===null||W===void 0?void 0:W.disablePageHeader,Me=(0,eo.lo)(),Ue=!1,ke=(0,Vr.Hb)(),Ye=ke.enableTabs,Qe=ke==null||(de=ke.children)===null||de===void 0||(de=de[0])===null||de===void 0?void 0:de.schemaUid,et=(0,a.useMemo)(function(){return he||Me.get("tab")||Qe},[he,Me,Qe]),gt=(0,a.useMemo)(function(){return{loading:Ue,disablePageHeader:ye,enablePageTabs:Ye,tabUid:he}},[he,ye,Ye,Ue]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Va,{activeKey:et,className:te.className}),(0,t.jsx)("div",{className:"nb-page-wrapper",children:(0,t.jsx)(Rr.SV,{FallbackComponent:mo.H,onError:console.error,children:he?(0,t.jsx)(Hr.Outlet,{context:gt}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ti,{loading:Ue,disablePageHeader:ye,enablePageTabs:Ye,activeKey:et}),(0,t.jsx)(Hr.Outlet,{})]})})})]})}),_i={transform:"scale(0)",pointerEvents:"none"},$a=a.memo(function(te){var W=za(),de=W.hashId,ve=W.componentCls,he=(0,Gr.Du)(),ye=he.active,Me=(0,eo.lV)(),Ue=(0,a.useRef)(Me);return ye&&(Ue.current=Me),(0,t.jsx)("div",{className:"".concat(ve," ").concat(de," ").concat(Yr.b),style:ye?null:_i,children:(0,t.jsx)(eo.yt.Provider,{value:"",children:(0,t.jsx)(wa,{currentTabUid:Ue.current,className:te.className})})})});$a.displayName="NocoBasePage";var qa=function(){var W=(0,Hr.useOutletContext)(),de=W.loading,ve=W.disablePageHeader,he=W.enablePageTabs,ye=W.tabUid;return(0,t.jsxs)(eo.yt.Provider,{value:ye,children:[(0,t.jsx)(ti,{loading:de,disablePageHeader:ve,enablePageTabs:he,activeKey:ye}),(0,t.jsx)(Hr.Outlet,{})]})};$a.displayName="Page";var Il=(0,ue.css)(Na||(Na=ee()([`
  > .nb-grid-container:not(:last-child) {
    > .nb-grid > .nb-grid-warp > button:last-child {
      display: none;
    }
  }
`]))),Qi={display:"block"},Ji={display:"none"},Ci=a.memo(function(te){var W=te.active,de=te.uid,ve=(0,a.useRef)(!1),he=(0,Gr.Du)(),ye=he.active;return W&&!ve.current&&(ve.current=!0),ve.current?(0,t.jsx)("div",{style:W?Qi:Ji,children:(0,t.jsx)(Gr.fW,{active:ye&&W,children:(0,t.jsx)($.m1,{uid:de})})}):null}),ei=function(W){var de,ve,he,ye=W.loading,Me=W.disablePageHeader,Ue=W.enablePageTabs,ke=W.activeKey,Ye=(0,Vr.Hb)(),Qe=(0,eo.WO)(),et=(0,eo.bw)(),gt=(Ye==null?void 0:Ye.children)||[],we=gt.every(function(yt){return yt.schemaUid!==ke&&yt.tabSchemaName!==ke});if(ke&&we)return(0,t.jsx)(Wo.p,{});var pt=Ye==null||(de=Ye.children)===null||de===void 0?void 0:de.find(function(yt){return yt.tabSchemaName===ke});if(pt){var ft=new URLSearchParams(et.search);ft.has("tab")&&ft.get("tab")===ke&&ft.delete("tab");var mt=ft.toString()?"?".concat(ft.toString()):"";return Qe(et.pathname.replace(ke,pt.schemaUid)+mt),null}if(!Me&&Ue){var At;return(0,t.jsx)(t.Fragment,{children:(At=Ye.children)===null||At===void 0?void 0:At.map(function(yt){return(0,t.jsx)(Vr.IN.Provider,{value:yt,children:(0,t.jsx)(Ci,{active:yt.schemaUid===ke,uid:yt.schemaUid})},yt.schemaUid)})})}return(0,t.jsx)("div",{className:Il,children:(0,t.jsx)(Vr.IN.Provider,{value:Ye==null||(ve=Ye.children)===null||ve===void 0?void 0:ve[0],children:(0,t.jsx)($.m1,{uid:Ye==null||(he=Ye.children)===null||he===void 0?void 0:he[0].schemaUid})})})},ti=(0,a.memo)(function(te){return(0,t.jsx)(Oa,{children:(0,t.jsx)(ei,o()({},te))})}),xi=function(W){var de=W.className,ve=W.activeKey,he=(0,m.useFieldSchema)(),ye=(0,lt.$)(),Me=ye.t,Ue=_a(),ke=Ue.t,Ye=(0,c.dQ)(),Qe=Ye.token,et=(0,eo.hZ)(),gt=(0,eo.WO)(),we=(0,a.useCallback)(function(Sn){ka({activeKey:Sn,navigate:gt,basename:et})},[et,gt]),pt=(0,Et.ng)(),ft=(0,to.d)(),mt=ft.getAriaLabel,At=(0,a.useContext)(m.SchemaOptionsContext),yt=(0,co.mg)(),on=yt.theme,yn=(0,Vr.Hb)(),In=Ao(),gn=In.createRoute,Kt=(0,Et.eJ)(),tn=(0,a.useMemo)(function(){return pt.designable&&(0,t.jsx)(Kr.ZP,{"aria-label":mt("tabs"),icon:(0,t.jsx)(Ar.Z,{}),className:"addTabBtn",type:"dashed",onClick:A()(g()().mark(function Sn(){var qn,xr,nr,Nn,lr;return g()().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return qt.next=2,(0,vl.D)(Me("Add tab"),function(){return(0,t.jsx)($.G0,{scope:At.scope,components:o()({},At.components),children:(0,t.jsx)(f.FormLayout,{layout:"vertical",children:(0,t.jsx)($.n6,{schema:{properties:{title:{title:Me("Tab name"),"x-component":"Input","x-decorator":"FormItem",required:!0},icon:{title:Me("Icon"),"x-component":"IconPicker","x-decorator":"FormItem"}}}})})})},on).open({initialValues:{}});case 2:return qn=qt.sent,xr=qn.title,nr=qn.icon,Nn=(0,ge.uid)(),lr=(0,ge.uid)(),qt.next=8,gn({type:Vr.HQ.tabs,schemaUid:Nn,title:xr||'{{t("Unnamed")}}',icon:nr,parentId:yn.id,tabSchemaName:lr});case 8:pt.insertBeforeEnd(Ta({title:xr,icon:nr,schemaUid:Nn,tabSchemaName:lr}));case 9:case"end":return qt.stop()}},Sn)})),children:Me("Add tab")})},[pt,mt,At==null?void 0:At.components,At==null?void 0:At.scope,Me,on]),Qn=yn.enableTabs,sr=(0,a.useMemo)(function(){return{paddingLeft:Qe.paddingLG-Qe.paddingPageHorizontal,paddingRight:Qe.paddingLG-Qe.paddingPageHorizontal,marginLeft:Qe.paddingPageHorizontal-Qe.paddingLG,marginRight:Qe.paddingPageHorizontal-Qe.paddingLG}},[Qe.paddingLG,Qe.paddingPageHorizontal]),or=(0,a.useMemo)(function(){var Sn;return yn==null||(Sn=yn.children)===null||Sn===void 0?void 0:Sn.map(function(qn){if(!qn||qn.hideInMenu)return null;var xr={__route__:qn};return{label:(0,t.jsx)(Vr.IN.Provider,{value:qn,children:(0,t.jsxs)(lo.TR,{id:String(qn.id),className:_r()("nb-action-link","designerCss",de),schema:xr,children:[qn.icon&&(0,t.jsx)(po.JO,{style:{marginRight:8},type:qn.icon}),(0,t.jsx)("span",{children:qn.title&&ke(Kt(qn.title))||Me("Unnamed")}),(0,t.jsx)(Aa,{})]})}),key:qn.schemaUid}}).filter(Boolean)},[he,de,Me,he.mapProperties(function(Sn){return Sn.title||Me("Unnamed")}).join(),yn]),Un=sa(),Gn=Un.onDragEnd;return Qn?(0,t.jsx)(E.DndContext,{onDragEnd:Gn,children:(0,t.jsx)(ao.Z,{size:"small",activeKey:ve,tabBarStyle:sr,onChange:we,tabBarExtraContent:tn,items:or})}):null},Va=a.memo(function(te){var W,de,ve=te.activeKey,he=te.className,ye=(0,m.useFieldSchema)(),Me=(0,ho.jr)(),Ue=Me.setTitle,ke=(0,lt.$)(),Ye=ke.t,Qe=_a(),et=Qe.t,gt=(0,a.useState)(function(){return Ye(ye.title)}),we=Re()(gt,2),pt=we[0],ft=we[1],mt=(W=ye["x-component-props"])===null||W===void 0?void 0:W.disablePageHeader,At=(0,Vr.Hb)(),yt=At.enableTabs,on=(de=ye["x-component-props"])===null||de===void 0?void 0:de.hidePageTitle,yn=(0,c.dQ)(),In=yn.token;return(0,a.useEffect)(function(){var gn=Ye(ye.title)||Ye(At==null?void 0:At.title);gn&&(Ue(gn),ft(gn))},[ye.title,pt,Ue,Ye,At==null?void 0:At.title]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(zo,{title:pt}),!mt&&(0,t.jsx)(wr.m,{className:_r()("pageHeaderCss",pt||yt?"":"height0"),style:{paddingBottom:At.enableTabs||on?0:In.paddingSM},ghost:!1,title:on?" ":(!ye.title&&pt?et(pt):pt)||" ",footer:(0,t.jsx)(xi,{className:he,activeKey:ve})})]})});Va.displayName="NocoBasePageHeader";function ka(te){var W=te.activeKey,de=te.navigate,ve=te.basename,he=te.pathname,ye=he===void 0?window.location.pathname:he;ye=ye.replace(ve,""),ye.endsWith("/")&&(ye=ye.slice(0,-1)),ye.startsWith("/")||(ye="/".concat(ye)),ni(ye)?de((0,ko.Q3)("".concat(ye.replace(/\/tabs\/[^/]+$/,"/tabs/".concat(W)))),{replace:!0}):de((0,ko.Q3)("".concat(ye,"/tabs/").concat(W)),{replace:!0})}function ni(te){te.endsWith("/")&&(te=te.slice(0,-1));var W=te.split("/");return W[W.length-2]==="tabs"}function Ta(te){var W=te.title,de=te.icon,ve=te.schemaUid,he=te.tabSchemaName;return{type:"void",name:he,title:W,"x-icon":de,"x-component":"Grid","x-initializer":"page:addBlock",properties:{},"x-uid":ve,"x-async":!0}}var Xi=e(78542),Ha=e(8918);function Fa(){var te,W=(0,m.useFieldSchema)();return!((te=W["x-component-props"])!==null&&te!==void 0&&te.disablePageHeader)}var Ga=new w.F5({name:"PageSettings",items:[{name:"enablePageHeader",type:"switch",useComponentProps:function(){var W,de=(0,Et.ng)(),ve=de.dn,he=(0,lt.$)(),ye=he.t,Me=(0,m.useFieldSchema)();return{title:ye("Enable page header"),checked:!((W=Me["x-component-props"])!==null&&W!==void 0&&W.disablePageHeader),onChange:function(ke){var Ye;Me["x-component-props"]=Me["x-component-props"]||{},Me["x-component-props"].disablePageHeader=!ke,ve.emit("patch",{schema:(Ye={},Je()(Ye,"x-uid",Me["x-uid"]),Je()(Ye,"x-component-props",Me["x-component-props"]),Ye)}),ve.refresh()}}}},{name:"divider",type:"divider",useVisible:Fa},{name:"displayPageTitle",type:"switch",useVisible:Fa,useComponentProps:function(){var W,de=(0,Et.ng)(),ve=de.dn,he=(0,lt.$)(),ye=he.t,Me=(0,m.useFieldSchema)();return{title:ye("Display page title"),checked:!((W=Me["x-component-props"])!==null&&W!==void 0&&W.hidePageTitle),onChange:function(ke){var Ye;Me["x-component-props"]=Me["x-component-props"]||{},Me["x-component-props"].hidePageTitle=!ke,ve.emit("patch",{schema:(Ye={},Je()(Ye,"x-uid",Me["x-uid"]),Je()(Ye,"x-component-props",Me["x-component-props"]),Ye)}),ve.refresh()}}}},{name:"editPageTitle",type:"modal",useVisible:function(){var W,de=Fa(),ve=(0,m.useFieldSchema)(),he=!((W=ve["x-component-props"])!==null&&W!==void 0&&W.hidePageTitle);return de&&he},useComponentProps:function(){var W=(0,Et.ng)(),de=W.dn,ve=(0,lt.$)(),he=ve.t,ye=(0,m.useField)(),Me=(0,m.useFieldSchema)(),Ue=(0,Xi.Po)(),ke=Ue.title;return{hide:!0,title:he("Edit page title"),schema:{type:"object",title:he("Edit page title"),properties:{title:{title:he("Title"),required:!0,"x-decorator":"FormItem","x-component":"Input","x-component-props":{}}}},initialValues:{title:ke},onSubmit:function(Qe){var et,gt=Qe.title;ye.title=gt,Me.title=gt,de.emit("patch",{schema:(et={},Je()(et,"x-uid",Me["x-uid"]),Je()(et,"title",gt),et)})}}}},{name:"enablePageTabs",type:"switch",useVisible:Fa,useComponentProps:function(){var W=(0,Et.ng)(),de=W.dn,ve=(0,lt.$)(),he=ve.t,ye=(0,m.useFieldSchema)(),Me=(0,Ha.Hb)(),Ue=Ao(),ke=Ue.updateRoute;return{title:he("Enable page tabs"),checked:Me.enableTabs,onChange:function(Qe){return A()(g()().mark(function et(){var gt;return g()().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,ke(Me.id,{enableTabs:Qe});case 2:ye["x-component-props"]=ye["x-component-props"]||{},ye["x-component-props"].enablePageTabs=Qe,de.emit("patch",{schema:(gt={},Je()(gt,"x-uid",ye["x-uid"]),Je()(gt,"x-component-props",ye["x-component-props"]),gt)});case 5:case"end":return pt.stop()}},et)}))()}}}}]}),Ca=e(75585),ko=e(22891),Pi=e(3321),yi=e(91410),ri=new yi.F({name:"PageTabSettings",items:[{name:"edit",type:"modal",useComponentProps:function(){var W=(0,lt.$)(),de=W.t,ve=Ao(),he=ve.updateRoute,ye=(0,Ha.Hb)();return{title:de("Edit"),schema:{type:"object",title:de("Edit tab"),properties:{title:{title:de("Tab name"),required:!0,"x-decorator":"FormItem","x-component":"Input","x-component-props":{}},icon:{title:de("Icon"),"x-decorator":"FormItem","x-component":"IconPicker","x-component-props":{}}}},initialValues:{title:ye.title,icon:ye.icon},onSubmit:function(Ue){var ke=Ue.title,Ye=Ue.icon;he(ye.id,{title:ke,icon:Ye})}}}},{name:"hidden",type:"switch",useComponentProps:function(){var W=(0,lt.$)(),de=W.t,ve=Ao(),he=ve.updateRoute,ye=(0,Ha.Hb)();return{title:de("Hidden"),checked:ye.hideInMenu,onChange:function(Ue){Da.Z.confirm({title:de("Are you sure you want to hide this tab?"),icon:(0,t.jsx)(fa.Z,{}),content:de("After hiding, this tab will no longer appear in the tab bar. To show it again, you need to go to the route management page to set it."),onOk:function(){return A()(g()().mark(function Ye(){return g()().wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return et.next=2,he(ye.id,{hideInMenu:!!Ue});case 2:case"end":return et.stop()}},Ye)}))()}})}}}},{name:"divider",type:"divider"},{name:"delete",type:"item",useComponentProps:function(){var W=Pi.Z.useApp(),de=W.modal,ve=(0,Et.ng)(),he=ve.dn,ye=(0,lt.$)(),Me=ye.t,Ue=Ao(),ke=Ue.deleteRoute,Ye=(0,Ha.Hb)(),Qe=(0,eo.WO)(),et=(0,m.useFieldSchema)();return{title:Me("Delete"),eventKey:"remove",onClick:function(){de.confirm(o()(o()({title:Me("Delete block"),content:Me("Are you sure you want to delete it?")},confirm),{},{onOk:function(){return A()(g()().mark(function pt(){return g()().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.next=2,ke(Ye.id);case 2:he.emit("remove",{removed:{"x-uid":Ye.schemaUid}}),window.location.pathname.includes(Ye.schemaUid)&&Qe("/admin/".concat(et["x-uid"]));case 4:case"end":return mt.stop()}},pt)}))()}}))},children:Me("Delete")}}}]}),rn=e(14984),vt=function(W){var de=W.children;return(0,t.jsx)($.G0,{scope:{requestChartData:z,useFilterActionProps:Q.PL},components:o()(o()({},Z),E),children:de})},Jt=function(te){M()(de,te);var W=y()(de);function de(){return K()(this,de),W.apply(this,arguments)}return j()(de,[{key:"load",value:function(){var ve=A()(g()().mark(function ye(){return g()().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:this.addComponents(),this.addScopes(),this.addSchemaSettings();case 3:case"end":return Ue.stop()}},ye,this)}));function he(){return ve.apply(this,arguments)}return he}()},{key:"addComponents",value:function(){this.app.addComponents(o()(o()({},Z),E))}},{key:"addScopes",value:function(){this.app.addScopes({requestChartData:z,useFilterActionProps:Q.PL})}},{key:"addSchemaSettings",value:function(){this.app.schemaSettingsManager.add(Ga),this.app.schemaSettingsManager.add(ri),this.app.schemaSettingsManager.add(G.Of),this.app.schemaSettingsManager.add(G.$9),this.app.schemaSettingsManager.add(ie),this.app.schemaSettingsManager.add(Xn),this.app.schemaSettingsManager.add(Yn),this.app.schemaSettingsManager.add(jn),this.app.schemaSettingsManager.add(k.SL)}}]),de}(R.S),dn=e(34591),Wn=["title","value","onChange","collection","useCollection","filter","rootOption","loadData"];function Pn(te){var W=te.collection;return W}function Vn(te){var W=Dr.call(this,te.field.target,te);return W.length&&W.some(function(de){return zn(de.field)})||(te.isLeaf=!0),W}function zn(te){return te.target&&te.interface}function ur(te){return!0}function Dr(te,W){var de=this,ve=this.getCollectionFields(te).filter(zn),he=Vn.bind(this);return ve.filter(this.filter).map(function(ye){var Me,Ue,ke,Ye=W?"".concat(W.value?"".concat(W.value,"."):"").concat(ye.name):ye.name,Qe=(Me=de.compile((Ue=ye.uiSchema)===null||Ue===void 0?void 0:Ue.title))!==null&&Me!==void 0?Me:ye.name,et=!de.getCollectionFields(ye.target).filter(zn).filter(de.filter).length;return{pId:(ke=W==null?void 0:W.key)!==null&&ke!==void 0?ke:null,id:Ye,key:Ye,value:Ye,title:Qe,isLeaf:et,loadChildren:et?null:he,field:ye,fullTitle:W?[].concat(Ft()(W.fullTitle),[Qe]):[Qe]}})}var dr=function(W){var de=W.title,ve=W.value,he=W.onChange,ye=W.collection,Me=W.useCollection,Ue=Me===void 0?Pn:Me,ke=W.filter,Ye=ke===void 0?ur:ke,Qe=W.rootOption,et=W.loadData,gt=b()(W,Wn),we=(0,Tr.useCompile)(),pt=(0,lt.$)(),ft=pt.t,mt=(0,a.useState)({}),At=Re()(mt,2),yt=At[0],on=At[1],yn=Ue({collection:ye}),In=(0,Tr.parseCollectionName)(yn),gn=Re()(In,2),Kt=gn[0],tn=gn[1],Qn=(0,Tr.useApp)(),sr=Qn.dataSourceManager.getDataSource(Kt),or=sr.collectionManager,Un=function(qt,kn){var cr=or.getCollection(qt);return cr?cr.getAllFields(kn):[]},Gn=Object.values(yt),Sn=(0,a.useMemo)(function(){return W.multiple?(ve||[]).map(function(Dn){return yt[Dn]}).filter(Boolean):ve},[ve,W.multiple,yt]),qn=(0,a.useCallback)(function(){var Dn=A()(g()().mark(function qt(kn){var cr;return g()().wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:if(et==null){vr.next=2;break}return vr.abrupt("return",et(kn));case 2:!kn.isLeaf&&kn.loadChildren&&(cr=kn.loadChildren(kn),on(function(hr){return cr.reduce(function(pr,Mr){return Object.assign(pr,Je()({},Mr.value,Mr))},o()({},hr))}));case 3:case"end":return vr.stop()}},qt)}));return function(qt){return Dn.apply(this,arguments)}}(),[et]);(0,a.useEffect)(function(){var Dn=Qe?o()(o()({},Qe),{},{id:Qe.value,key:Qe.value,title:Qe.label,fullTitle:Qe.label,isLeaf:!1}):null,qt=et===null?[]:Dr.call({compile:we,getCollectionFields:Un,filter:Ye},tn,Dn),kn=qt.reduce(function(cr,ar){return Object.assign(cr,Je()({},ar.value,ar))},{});Dn&&(kn[Dn.value]=Dn),on(kn)},[yn,Qe,Ye,et]),(0,a.useEffect)(function(){var Dn=W.multiple?ve:ve?[ve]:[];if(!(!(Dn!=null&&Dn.length)||Dn.every(function(kn){return!!yt[kn]}))){var qt=[];Dn.forEach(function(kn){for(var cr=kn.split("."),ar=yt[cr[0]],vr=function($r){if(!ar)return 0;var yr=cr.slice(0,$r+1).join(".");if(yt[yr])return ar=yt[yr],0;if(!ar.isLeaf&&ar.loadChildren){var jr=ar.loadChildren(ar);jr!=null&&jr.length&&(qt.push.apply(qt,Ft()(jr)),ar=jr.find(function(Xr){return Xr.value===cr.slice(0,$r+1).join(".")}))}},hr,pr=1;pr<cr.length&&(hr=vr(pr),hr!==0);pr++);}),on(function(kn){return qt.reduce(function(cr,ar){return Object.assign(cr,Je()({},ar.value,ar))},o()({},kn))})}},[ve,Gn.length,W.multiple]);var xr=(0,a.useCallback)(function(Dn){if(!W.multiple){he(Dn);return}var qt=Dn.map(function(vr){return vr.value}).filter(Boolean),kn=new Set(qt),cr=Sn.find(function(vr){return!kn.has(vr.value)});if(cr){var ar="".concat(cr.value,".");Object.keys(yt).forEach(function(vr){vr.startsWith(ar)&&kn.delete(vr)})}else qt.forEach(function(vr){var hr=vr.split(".");if(hr.length)for(var pr=1;pr<=hr.length;pr++)kn.add(hr.slice(0,pr).join("."))});he(Array.from(kn))},[W.multiple,Sn,he,yt]),nr=(0,a.useCallback)(function(Dn){var qt,kn=Dn.value,cr=Dn.onClose,ar=Dn.disabled,vr=Dn.closable;if(!kn)return null;var hr=(qt=yt[kn])!==null&&qt!==void 0?qt:{},pr=hr.fullTitle;return(0,t.jsx)(an.Z,{closable:vr&&!ar,onClose:cr,children:pr==null?void 0:pr.join(" / ")})},[yt]),Nn=Array.isArray(Sn)?Sn.filter(function(Dn){return Dn.value in yt}):Sn,lr=W.multiple?ve:ve!=null?[ve]:[];return(0,t.jsx)(dn.Z,o()({role:"button","data-testid":"select-field".concat(de?"-".concat(de):""),value:Nn,placeholder:ft("Select field"),showCheckedStrategy:dn.Z.SHOW_ALL,treeDefaultExpandedKeys:lr,allowClear:{clearIcon:(0,t.jsx)(en.Z,{role:"button","aria-label":"icon-close"})},treeCheckStrictly:W.multiple,treeCheckable:W.multiple,tagRender:nr,onChange:xr,treeDataSimpleMode:!0,treeData:Gn,loadData:qn},gt))},br=e(10097),gr=e(45360),Ir=e(77707),Fr=e(76690),Br=e(7840),Sr=e(29132),Jr=e(73691),kr=["objectValue","addMode"],Zr=function(W){var de=(0,a.useContext)(Tr.SchemaComponentContext);return(0,t.jsx)(Tr.SchemaComponentContext.Provider,{value:o()(o()({},de),{},{draggable:!0}),children:(0,t.jsx)(k.aU.Container,o()({},W))})},qr=function(W){if(W){var de=Object.keys(W)[0]||"$and",ve=W[de],he=[];return ve==null||ve.map(function(ye){var Me,Ue,ke=(0,Br.od)(ye),Ye=ke==null?void 0:ke.key;if(!Ye)return!0;var Qe=/\{\{\$[a-zA-Z_]\w*(?:\.[a-zA-Z_]\w*)*\.(\w+)\.id\}\}/,et=ke==null||(Me=ke.value)===null||Me===void 0||(Ue=Me.match)===null||Ue===void 0||(Ue=Ue.call(Me,Qe))===null||Ue===void 0?void 0:Ue[1];et&&he.push(et)}),he}},Wr=(0,m.observer)(function(te){var W,de=te.objectValue,ve=de===void 0?!0:de,he=te.addMode,ye=b()(te,kr),Me=(0,m.useField)(),Ue=(0,m.useFieldSchema)(),ke=(0,Sr.ZP)((Ue==null?void 0:Ue["x-component-props"])||te),Ye=(0,Sr.Ky)(),Qe=Ye.options,et=(0,Fr.cG)(te.value)?void 0:te.value,gt=Array.isArray(et)?et.filter(Boolean):et,we=(0,a.useState)(gt),pt=Re()(we,2),ft=pt[0],mt=pt[1],At=(W=Ue["x-component-props"])===null||W===void 0?void 0:W.addMode,yt=(0,lt.$)(),on=yt.t,yn=te.multiple,In=(0,m.useForm)(),gn=(0,Tr.useAPIClient)(),Kt=gn.resource(Qe.target),tn=(0,Tr.useCollectionRecordData)(),Qn=(0,a.useContext)(Tr.SchemaComponentContext);(0,a.useEffect)(function(){var Un=(0,Fr.cG)(Me.value)?void 0:Me.value,Gn=Array.isArray(Un)?Un.filter(Boolean):Un;mt(Gn)},[Me.value]),(0,a.useEffect)(function(){var Un=(0,ge.uid)();return In.addEffects(Un,function(){(0,x.onFieldInputValueChange)("*",function(Gn){var Sn,qn,xr,nr=qr((Sn=Me.componentProps)===null||Sn===void 0||(Sn=Sn.service)===null||Sn===void 0||(Sn=Sn.params)===null||Sn===void 0?void 0:Sn.filter)||[];nr.includes(Gn==null||(qn=Gn.props)===null||qn===void 0?void 0:qn.name)&&Me.value&&(0,St.isEqual)(Gn==null?void 0:Gn.indexes,Me==null?void 0:Me.indexes)&&(Gn==null||(xr=Gn.props)===null||xr===void 0?void 0:xr.name)!==Me.props.name&&(Me.setValue(null),mt(null))})}),function(){In.removeEffects(Un)}},[]);var sr=function(){var Un=A()(g()().mark(function Gn(Sn){var qn,xr,nr,Nn,lr,Dn;return g()().wrap(function(kn){for(;;)switch(kn.prev=kn.next){case 0:return xr=Sn.search,nr=Sn.callBack,kn.next=3,Kt.create({values:Je()({},(Me==null||(qn=Me.componentProps)===null||qn===void 0||(qn=qn.fieldNames)===null||qn===void 0?void 0:qn.label)||"id",xr)});case 3:Nn=kn.sent,lr=Nn.data.data,lr&&(["m2m","o2m"].includes(Qe==null?void 0:Qe.interface)&&yn!==!1?(Dn=In.getValuesIn(Me.path)||[],Dn.push(lr),In.setValuesIn(Me.path,Dn),Me.onInput(Dn)):(In.setValuesIn(Me.path,lr),Me.onInput(lr)),(0,Ir.mf)(nr)&&(nr==null||nr()),gr.ZP.success(on("Saved successfully")));case 6:case"end":return kn.stop()}},Gn)}));return function(Sn){return Un.apply(this,arguments)}}(),or=function(Gn){return(0,t.jsxs)("div",{onClick:function(){return sr(Gn)},style:{cursor:"pointer",padding:"5px 12px",color:"#0d0c0c"},children:[(0,t.jsx)(Ar.Z,{}),(0,t.jsx)("span",{style:{paddingLeft:5},children:on("Add")+" \u201C".concat(Gn.search,"\u201D ")})]})};return console.log(Ue),(0,t.jsx)("div",{children:(0,t.jsxs)(We.Z.Compact,{style:{display:"flex"},children:[(0,t.jsx)(Bn,o()(o()({style:{width:"100%"}},ye),{},{size:"middle",objectValue:ve,value:gt||ft,service:ke,onChange:function(Gn){var Sn,qn=(Gn==null?void 0:Gn.length)!==0?Gn:null;(Sn=te.onChange)===null||Sn===void 0||Sn.call(te,qn)},CustomDropdownRender:At==="quickAdd"&&or})),At==="modalAdd"&&(0,t.jsx)(Tr.SchemaComponentContext.Provider,{value:o()(o()({},Qn),{},{draggable:!1}),children:(0,t.jsx)(Tr.RecordProvider,{isNew:!0,record:null,parent:tn,children:(0,t.jsx)(Jr.Rm,{children:(0,t.jsx)(Tr.ClearCollectionFieldContext,{children:(0,t.jsx)(Tr.NocoBaseRecursionField,{onlyRenderProperties:!0,basePath:Me.address,schema:Ue,filterProperties:function(Gn){return Gn["x-component"]==="Action"}})})})})})]})},Ue.name)},{displayName:"AssociationSelect"}),go=Wr,Do=(0,m.connect)(function(te){var W=(0,Sr.ZP)(te);return te.fieldNames?(0,t.jsx)(Bn.ReadPretty,o()(o()({},te),{},{service:W})):null},(0,m.mapProps)({dataSource:"options",loading:!0},function(te,W){return o()(o()({},te),{},{fieldNames:te.fieldNames&&o()(o()({},te.fieldNames),W.componentProps.fieldNames),suffixIcon:W!=null&&W.loading||W!=null&&W.validating?(0,t.jsx)(vn.Z,{}):te.suffixIcon})})),_o=e(79801),bo=e(78899),ro=e(95775),so=e(78472),oa=e(92601),Ro={Nester:{type:"void","x-component":"AssociationField.Nester",properties:{grid:{type:"void","x-component":"Grid","x-initializer":"form:configureFields"}}},AddNewer:{type:"void","x-component":"AssociationField.AddNewer","x-action":"create",title:'{{ t("Add record") }}',"x-component-props":{className:"nb-action-popup"},properties:{tabs:{type:"void","x-component":"Tabs","x-component-props":{},"x-initializer":"popup:addTab","x-initializer-props":{gridInitializer:"popup:addNew:addBlock"},properties:{tab1:{type:"void",title:'{{t("Add new")}}',"x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{},properties:{grid:{type:"void","x-component":"Grid","x-initializer":"popup:addNew:addBlock",properties:{}}}}}}}},Selector:{type:"void","x-component":"AssociationField.Selector",title:'{{ t("Select record") }}',"x-component-props":{className:"nb-record-picker-selector"},properties:{grid:{type:"void","x-component":"Grid","x-initializer":"popup:tableSelector:addBlock",properties:{}},footer:{"x-component":"Action.Container.Footer","x-component-props":{},properties:{actions:{type:"void","x-component":"ActionBar","x-component-props":{},properties:{submit:{title:'{{ t("Submit") }}',"x-action":"submit","x-component":"Action","x-use-component-props":"usePickActionProps","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:submit","x-component-props":{type:"primary",htmlType:"submit"}}}}}}}},Viewer:{type:"void",title:'{{ t("View record") }}',"x-component":"AssociationField.Viewer","x-component-props":{className:"nb-action-popup"},properties:{tabs:{type:"void","x-component":"Tabs","x-component-props":{},"x-initializer":"popup:addTab",properties:{tab1:{type:"void",title:'{{t("Details")}}',"x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{},properties:{grid:{type:"void","x-component":"Grid","x-initializer":"popup:common:addBlock",properties:{}}}}}}}},SubTable:{type:"void","x-component":"AssociationField.SubTable","x-initializer":"table:configureColumns","x-initializer-props":{action:!1},properties:{}}},jo=e(37696),Ra=["onRowSelectionChange","rowKey"],xa=["disabled","multiple","value","onChange","action","onSelect","quickUpload","selectFile"],Si=["value","multiple","onChange"],wi=function(){var W=(0,m.useField)(),de=(0,a.useContext)(Co.b7),ve=de.multiple,he=de.options,ye=he===void 0?[]:he,Me=de.setSelectedRows,Ue=de.selectedRows,ke=Ue===void 0?[]:Ue,Ye=de.onChange,Qe=(0,bo.RP)(),et=Qe.onRowSelectionChange,gt=Qe.rowKey,we=gt===void 0?"id":gt,pt=b()(Qe,Ra),ft=(0,k.XC)(),mt=ft.setVisible;return o()(o()({},pt),{},{rowKey:we,rowSelection:{type:ve?"checkbox":"radio",selectedRowKeys:ke==null?void 0:ke.filter(function(At){return ye.every(function(yt){return yt[we]!==At[we]})}).map(function(At){return At[we]})},onRowSelectionChange:function(yt,on){if(ve){var yn=(0,jo.sj)(W.value)||[],In=ke||[],gn=(0,St.differenceBy)(In,yn,we),Kt=(0,St.unionBy)(gn,on,we),tn=Kt.map(function(Qn){return Qn[we]});Me==null||Me(Kt),et==null||et(tn,Kt)}else Me==null||Me(on),et==null||et(yt,on),Ye((on==null?void 0:on[0])||null),mt(!1)}})};function bi(te){var W=te.disabled,de=te.multiple,ve=te.value,he=te.onChange,ye=te.action,Me=te.onSelect,Ue=te.quickUpload,ke=te.selectFile,Ye=b()(te,xa),Qe=(0,oa.y)(),et=Qe.wrapSSR,gt=Qe.hashId,we=Qe.componentCls,pt=(0,m.useExpressionScope)(),ft=pt.useFileCollectionStorageRules,mt=pt.useAttachmentFieldProps,At=(0,lt.$)(),yt=At.t,on=ft(),yn=mt(),In=ke===void 0&&Ue===void 0;return et((0,t.jsx)("div",{className:_r()("".concat(we,"-wrapper"),"".concat(we,"-picture-card-wrapper"),"nb-upload",gt),children:(0,t.jsxs)("div",{className:_r()("".concat(we,"-list"),"".concat(we,"-list-picture-card")),children:[(0,t.jsx)(so.fU,o()({disabled:W,multiple:de,value:ve,onChange:he},Ye)),In?(0,t.jsx)("div",{className:_r()("".concat(we,"-list-picture-card-container"),"".concat(we,"-list-item-container")),children:(0,t.jsx)(_o.Z,{disabled:W,multiple:de,listType:"picture-card",showUploadList:!1,children:(0,t.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:Me,children:[(0,t.jsx)(Ar.Z,{}),yt("Select")]})})}):null,Ue?(0,t.jsx)(so.Qm,o()(o()({},yn),{},{value:ve,multiple:de,onChange:he,action:ye,rules:on,disabled:W},Ye)):null,ke&&(de||!ve)?(0,t.jsx)("div",{className:_r()("".concat(we,"-list-picture-card-container"),"".concat(we,"-list-item-container")),children:(0,t.jsx)(_o.Z,{disabled:W,multiple:de,listType:"picture-card",showUploadList:!1,children:(0,t.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:Me,children:[(0,t.jsx)(Ar.Z,{}),yt("Select")]})})}):null]})}))}var qi=function(W){var de,ve,he=W.value,ye=W.multiple,Me=W.onChange,Ue=b()(W,Si),ke=(0,m.useFieldSchema)(),Ye=(0,a.useState)(!1),Qe=Re()(Ye,2),et=Qe[0],gt=Qe[1],we=(0,a.useState)([]),pt=Re()(we,2),ft=pt[0],mt=pt[1],At=(0,Sr.fR)("Selector"),yt=(0,Sr.Xd)(W),on=(0,Et.ng)(),yn=on.designable,In=(0,m.useField)(),gn=(0,a.useState)([]),Kt=Re()(gn,2),tn=Kt[0],Qn=Kt[1],sr=(0,u.useCollection_deprecated)(),or=sr.getField,Un=or(In.props.name),Gn=(0,jo.Il)(Un==null?void 0:Un.target,(yt==null?void 0:yt.label)||"label"),Sn=(0,Et.eJ)(),qn=(0,k.XC)(),xr=qn.modalProps,nr=function(qt){if(qt.stopPropagation(),qt.preventDefault(),yn)At(Ro.Selector);else{var kn=ke.reduceProperties(function(cr,ar){return ar["x-component"]==="AssociationField.Selector"?ar:cr},null);kn||ke.addProperty("selector",Ro.Selector)}gt(!0),mt([])};(0,a.useEffect)(function(){if(he&&Object.keys(he).length>0){var Dn=(Array.isArray(he)?he:he?[he]:[]).filter(Boolean).map(function(qt){var kn=qt[yt.label];return o()(o()({},qt),{},Je()({},yt.label,(0,jo.cN)(Sn(Gn),Sn(kn))))});Qn(Dn)}else Qn([])},[he,yt==null?void 0:yt.label]);var Nn={size:"small",fieldNames:yt,multiple:["o2m","m2m","mbm"].includes(Un==null?void 0:Un.interface)&&ye,association:{target:Un==null?void 0:Un.target},options:tn,onChange:W==null?void 0:W.onChange,selectedRows:ft,setSelectedRows:mt,collectionField:Un},lr=function(){var qt=(0,k.XC)(),kn=qt.setVisible,cr=(0,a.useContext)(Co.b7),ar=cr.multiple,vr=cr.selectedRows,hr=cr.onChange,pr=cr.options,Mr=cr.collectionField;return{onClick:function(){hr(ar?(0,St.unionBy)(vr,pr,(Mr==null?void 0:Mr.targetKey)||"id"):(vr==null?void 0:vr[0])||null),kn(!1)}}};return(0,t.jsxs)("div",{style:{width:"100%",overflow:"auto"},children:[(0,t.jsx)(bi,o()(o()({},Ue),{},{value:ye?tn:tn==null?void 0:tn[0],multiple:ye,quickUpload:((de=ke["x-component-props"])===null||de===void 0?void 0:de.quickUpload)!==!1,selectFile:((ve=ke["x-component-props"])===null||ve===void 0?void 0:ve.selectFile)!==!1,action:"".concat(Un==null?void 0:Un.target,":create"),onSelect:nr,onChange:Me})),(0,t.jsx)(k.EI,{value:{openMode:"drawer",visible:et,setVisible:gt,modalProps:{getContainer:(Ue==null?void 0:Ue.getContainer)||(xr==null?void 0:xr.getContainer)},formValueChanged:!1},children:(0,t.jsx)(Co.sU,o()(o()({},Nn),{},{children:(0,t.jsx)(u.CollectionProvider_deprecated,{name:Un==null?void 0:Un.target,children:(0,t.jsx)($.RV,{children:(0,t.jsx)(bo.Vs,{params:{},children:(0,t.jsx)($.G0,{scope:{usePickActionProps:lr,useTableSelectorProps:wi},children:(0,t.jsx)(l.sq,{onlyRenderProperties:!0,basePath:In.address,schema:ke,filterProperties:function(qt){return qt["x-component"]==="AssociationField.Selector"}})})})})})}))})]})},Ei=(0,m.connect)(function(te){var W=(0,m.useFieldSchema)(),de=(0,u.useCollection_deprecated)(),ve=de.getField,he=(0,u.useCollectionManager_deprecated)(),ye=he.getCollectionJoinField,Me=ve(W.name)||ye(W["x-collection-field"]);return(0,t.jsx)(ro.BQ,{ellipsis:!0,children:Me?(0,t.jsx)(so.gq.ReadPretty,o()({},te)):null})}),Za=e(69677),Di=["parent"],Mi="N/A",Ii=(0,m.createSchemaField)({components:{Space:We.Z,Input:Za.Z,ArrayItems:f.ArrayItems,FormItem:f.FormItem}}),el=(0,m.connect)(function(te){var W,de=te.data,ve=te.mapOptions,he=te.onChange,ye=te.value,Me=(0,a.useState)([{key:void 0,children:[],value:null}]),Ue=Re()(Me,2),ke=Ue[0],Ye=Ue[1],Qe=(0,a.useState)(de),et=Re()(Qe,2),gt=et[0],we=et[1],pt=(0,a.useState)(!1),ft=Re()(pt,2),mt=ft[0],At=ft[1],yt=(0,Et.eJ)(),on=(0,Tr.useAPIClient)(),yn=(0,Sr.ZP)(te),In=(0,Sr.Ky)(),gn=In.options,Kt=In.field,tn=on.resource(gn.target),Qn=(0,Tr.useCollectionManager_deprecated)(),sr=Qn.getCollectionJoinField,or=Qn.getInterface,Un=Kt==null||(W=Kt.componentProps)===null||W===void 0?void 0:W.fieldNames,Gn=(gn==null?void 0:gn.target)&&(Un==null?void 0:Un.label)&&sr("".concat(gn.target,".").concat(Un.label)),Sn=(0,a.useMemo)(function(){if(Gn!=null&&Gn.interface){var qt;return((qt=or(Gn.interface))===null||qt===void 0||(qt=qt.filterable)===null||qt===void 0?void 0:qt.operators[0].value)||"$includes"}return"$includes"},[Gn]),qn=(0,m.useField)();(0,a.useEffect)(function(){if(ye){var qt,kn=Array.isArray(ye)?oi(ye==null?void 0:ye.filter(function(ar){return ar.value}),!0):ai(ye),cr=kn==null||(qt=kn.map)===null||qt===void 0?void 0:qt.call(kn,function(ar){return{key:ar.parentId,children:[],value:ar}});Ye(cr)}},[]);var xr=(0,a.useCallback)(function(qt){try{return qt==null?void 0:qt.filter(function(kn){return["number","string"].includes(mn()(kn[Un.value]))}).map(function(kn){var cr,ar,vr=yt(kn[Un.label]);if(Gn!=null&&(cr=Gn.uiSchema)!==null&&cr!==void 0&&cr.enum)if(Array.isArray(vr))vr=vr.map(function(yr,jr){var Xr,uo,oo=(Xr=(uo=Gn.uiSchema.enum).find)===null||Xr===void 0?void 0:Xr.call(uo,function(io){return io.value===yr});return oo?(0,t.jsx)(an.Z,{color:oo.color,style:{marginRight:3},children:(oo==null?void 0:oo.label)||yr},jr):(0,t.jsx)(an.Z,{children:yr},yr)}).reverse();else{var hr,pr,Mr=(hr=(pr=Gn.uiSchema.enum).find)===null||hr===void 0?void 0:hr.call(pr,function(yr){return yr.value===vr});Mr&&(vr=(0,t.jsx)(an.Z,{color:Mr.color,children:Mr.label}))}if((Gn==null?void 0:Gn.type)==="date"&&(vr=_n()(vr).format("YYYY-MM-DD")),ve){var $r;return ve(($r={},Je()($r,Un.label,vr||Mi),Je()($r,Un.value,kn[Un.value]),$r))}return o()(o()({},kn),{},(ar={},Je()(ar,Un.label,vr||Mi),Je()(ar,Un.value,kn[Un.value]),ar))}).filter(Boolean)}catch(kn){return console.error(kn),qt}},[Gn==null?void 0:Gn.uiSchema,Un]),nr=function(){var qt=A()(g()().mark(function kn(cr){var ar,vr;return g()().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:return pr.next=2,tn.list({pageSize:200,params:yn==null?void 0:yn.params,filter:(0,Qt.EO)([cr]),tree:cr.parentId?void 0:!0});case 2:return vr=pr.sent,pr.abrupt("return",vr==null||(ar=vr.data)===null||ar===void 0?void 0:ar.data);case 4:case"end":return pr.stop()}},kn)}));return function(cr){return qt.apply(this,arguments)}}(),Nn=function(){var qt=A()(g()().mark(function kn(cr,ar,vr){var hr,pr,Mr;return g()().wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:return yr.next=2,nr({parentId:ar==null?void 0:ar.id});case 2:hr=yr.sent,pr=Ft()(ke),pr.splice(vr+1),pr[vr]=o()(o()({},pr[vr]),{},{value:ar}),ar!=null&&ar.id&&(pr[vr+1]={key:ar==null?void 0:ar.id,children:(hr==null?void 0:hr.length)>0?hr:null}),Ye(pr),["o2m","m2m"].includes(gn.interface)?(Mr=Array.isArray(Kt.fieldValue)?Kt.fieldValue:[],Mr[qn.index]=ar,Kt.fieldValue=Mr):Kt.value=ar,he==null||he(pr);case 10:case"end":return yr.stop()}},kn)}));return function(cr,ar,vr){return qt.apply(this,arguments)}}(),lr=function(){var qt=A()(g()().mark(function kn(cr,ar,vr){var hr,pr,Mr,$r,yr,jr;return g()().wrap(function(uo){for(;;)switch(uo.prev=uo.next){case 0:if(!cr){uo.next=17;break}return At(!0),uo.next=4,nr({parentId:ar==null?void 0:ar.key});case 4:if(pr=uo.sent,At(!1),we(pr),!(vr===(ke==null?void 0:ke.length)-1&&ar!==null&&ar!==void 0&&(hr=ar.value)!==null&&hr!==void 0&&hr.id)){uo.next=17;break}return uo.next=10,nr({parentId:ar==null||(Mr=ar.value)===null||Mr===void 0?void 0:Mr.id});case 10:yr=uo.sent,jr=Ft()(ke),jr.splice(vr+1),jr[vr]=o()(o()({},jr[vr]),{},{value:ar==null?void 0:ar.value}),jr[vr+1]={key:ar==null||($r=ar.value)===null||$r===void 0?void 0:$r.id,children:(yr==null?void 0:yr.length)>0?yr:null},Ye(jr),he==null||he(jr);case 17:case"end":return uo.stop()}},kn)}));return function(cr,ar,vr){return qt.apply(this,arguments)}}(),Dn=function(){var qt=A()(g()().mark(function kn(cr,ar){var vr,hr;return g()().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:return vr=cr?Je()({},Un.label,Je()({},Sn,cr)):{},At(!0),Mr.next=4,nr(o()(o()({},vr),{},{parentId:ar==null?void 0:ar.key}));case 4:hr=Mr.sent,At(!1),we(hr);case 7:case"end":return Mr.stop()}},kn)}));return function(cr,ar){return qt.apply(this,arguments)}}();return(0,t.jsx)(We.Z,{wrap:!0,children:ke.map(function(qt,kn){var cr,ar,vr;return qt.children&&(0,t.jsx)(tt.default,{disabled:Kt.disabled,allowClear:!0,showSearch:!0,autoClearSearchValue:!0,filterOption:!1,filterSort:null,defaultValue:{label:qt==null||(ar=qt.value)===null||ar===void 0?void 0:ar[Un.label],value:qt==null||(vr=qt.value)===null||vr===void 0?void 0:vr[Un.value]},labelInValue:!0,onSearch:function(pr){return Dn(pr,qt)},fieldNames:Un,style:{minWidth:150},onChange:function(pr,Mr){return Nn(pr,Mr,kn)},options:mt?[]:xr(gt),onDropdownVisibleChange:function(pr){return lr(pr,qt,kn)},notFoundContent:mt?(0,t.jsx)(I.Z,{size:"small"}):null},"".concat((cr=qt.value)===null||cr===void 0?void 0:cr.id,"+ ").concat(qt.key," + ").concat(Un.label))})})}),Ai=(0,m.connect)(function(te){return(0,t.jsx)("div",{children:(0,t.jsx)(el,o()({},te))})}),tl=(0,m.observer)(function(te){var W,de=(0,Sr.Ky)(),ve=de.options,he=(0,a.useMemo)(function(){return(0,x.createForm)()},[]),ye=(0,lt.$)(),Me=ye.t,Ue=(0,m.useField)(),ke=(0,m.useFieldSchema)(),Ye=(0,ce.hS)()||{},Qe=Ye.loading,et=Ye.data,gt=et==null||(W=et.data)===null||W===void 0?void 0:W[ke.name];(0,a.useEffect)(function(){var mt=(0,ge.uid)();return he.addEffects(mt,function(){(0,x.onFormValuesChange)(function(At){if(ve.interface==="m2o"){var yt,on=oi((yt=At.values)===null||yt===void 0?void 0:yt[ke.name]);setTimeout(function(){At.setValuesIn(ke.name,on),Ue.value=on})}else{var yn,In=oi((yn=At.values)===null||yn===void 0?void 0:yn.select_array).filter(function(gn){return gn&&Object.keys(gn).length>0});setTimeout(function(){Ue.value=In})}})}),function(){he.removeEffects(mt)}},[]);var we=function(){return Array.isArray(gt)&&gt.length>0?gt:[{}]},pt=we(),ft={type:"object",properties:{select_array:{type:"array","x-component":"ArrayItems","x-decorator":"FormItem",default:pt,items:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},select:{type:"string","x-decorator":"FormItem","x-component":Ai,"x-component-props":o()({},te)},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}},properties:{add:{type:"void",title:Me("Add new"),"x-component":"ArrayItems.Addition"}}}}};return!Qe&&(0,t.jsx)(m.FormProvider,{form:he,children:ve.interface==="m2o"?(0,t.jsx)($.n6,{components:{FormItem:f.FormItem},schema:o()(o()({},ke),{},{default:gt,title:"","x-component":Ai,"x-component-props":o()({},te)})}):(0,t.jsx)(Ii,{schema:ft})})},{displayName:"InternalCascadeSelect"});function oi(te,W){var de=[];if(!Array.isArray(te))return te;var ve=mr()(te),he;try{for(ve.s();!(he=ve.n()).done;){var ye=he.value,Me=null;if(Array.isArray(ye)){for(var Ue=(ye==null?void 0:ye.length)-1;Ue>=0;Ue--)if(ye[Ue].value){Me=ye[Ue].value;break}Me&&de.push(Me)}else if(ye!=null&&ye.value?Me=ye.value:Me=null,Me)if(W){var ke,Ye,Qe;(ke=de)===null||ke===void 0||(Ye=(Qe=ke).push)===null||Ye===void 0||Ye.call(Qe,Me)}else de=Me;else{var et,gt,we;(et=de)===null||et===void 0||(gt=(we=et).push)===null||gt===void 0||gt.call(we,ye)}}}catch(pt){ve.e(pt)}finally{ve.f()}return de}function ai(te){var W=[];function de(ve){if(ve!=null&&ve.parent){var he=ve.parent;de(he)}var ye=ve.parent,Me=b()(ve,Di);W.push(Me)}return te&&de(te),W}var ja=e(47646),Oi,Ti,ii,Ba=(0,ue.css)(Oi||(Oi=ee()([`
  .ant-card-bordered {
    border: none;
  }
  .ant-card-body {
    padding: 0px 20px 0px 0px;
  }
`]))),$o=(0,m.observer)(function(){var te,W,de,ve=(0,m.useField)(),he=(0,m.useFieldSchema)(),ye=(0,Sr.fR)("Nester"),Me=(0,Sr.fR)("Selector"),Ue=(0,Sr.Ky)(),ke=Ue.options,Ye=(te=(W=he["x-decorator-props"])===null||W===void 0?void 0:W.showTitle)!==null&&te!==void 0?te:!0,Qe=(0,ja.Hq)(),et=Qe.actionName,gt=Ie.Z.useToken(),we=gt.token,pt=(he==null?void 0:he["x-component-props"])||{},ft=pt.layout,mt=ft===void 0?"vertical":ft,At=pt.labelAlign,yt=At===void 0?"left":At,on=pt.labelWidth,yn=on===void 0?120:on,In=pt.labelWrap,gn=In===void 0?!0:In,Kt=(0,ue.css)(Ti||(Ti=ee()([`
      margin-top: 0.4em;

      & .ant-formily-item-layout-vertical {
        margin-bottom: 10px;
      }
      .ant-card-body {
        padding: `,"px ",`px;
      }
      .ant-divider-horizontal {
        margin: 10px 0;
      }
    `])),we.padding,we.paddingLG);return(0,a.useEffect)(function(){ye(Ro.Nester)},[]),(0,a.useEffect)(function(){var tn;(tn=ve.componentProps)!==null&&tn!==void 0&&tn.allowSelectExistingRecord&&Me(Ro.Selector)},[(de=ve.componentProps)===null||de===void 0?void 0:de.allowSelectExistingRecord]),(0,t.jsx)(u.CollectionProvider_deprecated,{name:ke.target,children:(0,t.jsx)(ja.Hh,{actionPath:"".concat(ke.target,":").concat(et||"view"),children:(0,t.jsx)(f.FormLayout,{layout:mt,labelAlign:yt,labelWidth:mt==="horizontal"?yn:null,labelWrap:gn,children:(0,t.jsx)("div",{className:(0,ue.cx)(Kt,Je()({},Ba,Ye===!1),(0,ue.css)(ii||(ii=ee()([`
                  .nb-grid-container {
                    height: 100% !important;
                    .ant-formily-item-label {
                      line-height: `,`px;
                    }
                    .ant-formily-item-label label {
                      white-space: `,`;
                    }
                  }
                `])),we.controlHeight,gn?"break-all":"nowrap")),children:(0,t.jsx)(l.sq,{onlyRenderProperties:!0,basePath:ve.address,schema:he,filterProperties:function(Qn){return Qn["x-component"]==="AssociationField.Nester"}})})})})})},{displayName:"InternalNester"}),li=["onRowSelectionChange","rowKey"],nl=["value","multiple","openSize","onChange","quickUpload","selectFile","shouldMountElement"],rl=function(){var W=(0,m.useField)(),de=(0,a.useContext)(Co.b7),ve=de.multiple,he=de.options,ye=he===void 0?[]:he,Me=de.setSelectedRows,Ue=de.selectedRows,ke=Ue===void 0?[]:Ue,Ye=de.onChange,Qe=(0,bo.RP)(),et=Qe.onRowSelectionChange,gt=Qe.rowKey,we=gt===void 0?"id":gt,pt=b()(Qe,li),ft=(0,k.XC)(),mt=ft.setVisible;return o()(o()({},pt),{},{rowKey:we,rowSelection:{type:ve?"checkbox":"radio",selectedRowKeys:ke==null?void 0:ke.filter(function(At){return ye.every(function(yt){return yt[we]!==At[we]})}).map(function(At){return At[we]})},onRowSelectionChange:function(yt,on){if(ve){var yn=(0,jo.sj)(W.value)||[],In=ke||[],gn=(0,St.differenceBy)(In,yn,we),Kt=(0,St.unionBy)(gn,on,we),tn=Kt.map(function(Qn){return Qn[we]});Me==null||Me(Kt),et==null||et(tn,Kt)}else Me==null||Me(on),et==null||et(yt,on),Ye((on==null?void 0:on[0])||null),mt(!1)}})},Al=(0,m.observer)(function(te){var W,de=te.value,ve=te.multiple,he=te.openSize,ye=te.onChange,Me=te.quickUpload,Ue=te.selectFile,ke=te.shouldMountElement,Ye=b()(te,nl),Qe=(0,m.useField)(),et=(0,Sr.Xd)(te),gt=(0,a.useState)(!1),we=Re()(gt,2),pt=we[0],ft=we[1],mt=(0,m.useFieldSchema)(),At=(0,Sr.fR)("Selector"),yt=(0,Sr.Ky)(),on=yt.options,yn=(0,ze.bz)(),In=yn.collectionName,gn=(0,Et.eJ)(),Kt=(0,jo.Il)(on,(et==null?void 0:et.label)||"label"),tn=mt["x-add-new"],Qn=(0,a.useState)([]),sr=Re()(Qn,2),or=sr[0],Un=sr[1],Gn=(0,Tr.useCollectionRecordData)(),Sn=(0,a.useMemo)(function(){if(de&&Object.keys(de).length>0){var lr=(Array.isArray(de)?de:de?[de]:[]).filter(Boolean).map(function(Dn){var qt=Dn==null?void 0:Dn[et.label];return o()(o()({},Dn),{},Je()({},et.label,(0,jo.cN)(gn(Kt),gn(qt))))});return lr}return[]},[de,et==null?void 0:et.label]),qn={size:"small",fieldNames:et,multiple:ve!==!1&&["o2m","m2m","mbm"].includes(on==null?void 0:on.interface),association:{target:on==null?void 0:on.target},options:Sn,onChange:te==null?void 0:te.onChange,selectedRows:or,setSelectedRows:Un,collectionField:on,currentFormCollection:In},xr=function(){var Dn;return ve==null?null:Array.isArray(de)?(Dn=de.filter(Boolean))===null||Dn===void 0?void 0:Dn.map(function(qt){return qt==null?void 0:qt[et.value]}):de==null?void 0:de[et.value]},nr=function(){var Dn=(on==null?void 0:on.targetKey)||"id",qt=Sn.map(function(cr){return cr[Dn]}).filter(Boolean),kn=qt.length?{$and:[Je()({},"".concat(Dn,".$ne"),qt)]}:{};return kn},Nn=function(){var Dn=(0,k.XC)(),qt=Dn.setVisible,kn=(0,a.useContext)(Co.b7),cr=kn.multiple,ar=kn.selectedRows,vr=kn.onChange,hr=kn.options,pr=kn.collectionField;return{onClick:function(){vr(cr?(0,St.unionBy)(ar,hr,(pr==null?void 0:pr.targetKey)||"id"):(ar==null?void 0:ar[0])||null),qt(!1)},style:{display:cr!==!1&&["o2m","m2m","mbm"].includes(pr==null?void 0:pr.interface)?"block":"none"}}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(We.Z.Compact,{style:{display:"flex",lineHeight:"32px"},children:[(0,t.jsx)("div",{style:{width:"100%"},children:(0,t.jsx)(tt.default,o()(o()({role:"button","data-testid":"select-data-picker",style:{width:"100%"},popupMatchSelectWidth:!1},Ye),{},{mode:ve?"multiple":te.mode,fieldNames:et,onDropdownVisibleChange:function(Dn){At(Ro.Selector),ft(!0)},allowClear:!0,onChange:function(Dn){if(Dn){if(Array.isArray(Dn)){if(!Dn.length){ye([]),Un([]);return}var kn=Sn==null?void 0:Sn.filter(function(cr){return Dn.includes(cr[et.value])});ye(kn),Un(kn)}}else{var qt=ve?[]:null;ye(qt),Un(qt)}},options:Sn,value:xr(),open:!1}))}),tn&&(0,t.jsx)(Tr.RecordProvider,{isNew:!0,record:null,parent:Gn,children:(0,t.jsx)(Tr.ClearCollectionFieldContext,{children:(0,t.jsx)(Tr.NocoBaseRecursionField,{onlyRenderProperties:!0,basePath:Qe.address,schema:mt,filterProperties:function(Dn){return Dn["x-component"]==="Action"}})})})]}),(0,t.jsx)(k.EI,{value:{openSize:((W=mt["x-component-props"])===null||W===void 0?void 0:W.openSize)||he,openMode:"drawer",visible:pt,setVisible:ft},children:(0,t.jsx)(Co.sU,o()(o()({},qn),{},{children:(0,t.jsx)(Tr.CollectionProvider_deprecated,{name:on==null?void 0:on.target,children:(0,t.jsx)($.RV,{children:(0,t.jsx)(bo.Vs,{params:{filter:nr()},children:(0,t.jsx)($.G0,{scope:{usePickActionProps:Nn,useTableSelectorProps:rl},children:(0,t.jsx)(Tr.NocoBaseRecursionField,{onlyRenderProperties:!0,basePath:Qe.address,schema:mt,filterProperties:function(Dn){return Dn["x-component"]==="AssociationField.Selector"}})})})})})}))})]})},{displayName:"InternalPicker"}),Yu=e(25120),Ol=e(25717),Qu=e(78);function Xv(te){var W=useGetAriaLabelOfPopover(),de=W.getAriaLabel;useEffect(function(){if(te){var ve=_toConsumableArray(document.querySelectorAll(".ant-popover-content")),he=ve[ve.length-1];he&&(he.setAttribute("role","button"),he.setAttribute("data-testid",de()),he.setAttribute("aria-label",de()))}},[de,te])}var si=e(40454),Ju=e(39270),Xu=function(W,de){return W??de};function Tl(te){return mn()(te)==="object"&&te!==null}var Fl=a.memo(function(te){var W=te.fieldNames,de=te.isTreeCollection,ve=te.compile,he=te.getLabelUiSchema,ye=te.collectionField,Me=te.snapshot,Ue=te.enableLink,ke=te.designable,Ye=te.insertViewer,Qe=te.fieldSchema,et=te.openPopup,gt=te.recordData,we=te.ellipsisWithTooltipRef,pt=te.value,ft=te.setBtnHover,mt=te.onClick,At=(0,a.useState)(!0),yt=Re()(At,2),on=yt[0],yn=yt[1],In=(0,a.useState)([]),gn=Re()(In,2),Kt=gn[0],tn=gn[1],Qn=(0,a.useRef)(!1),sr=(0,a.useRef)(Qe);sr.current=Qe;var or=(0,a.useCallback)(function(){return sr.current},[]);return(0,a.useEffect)(function(){var Un=(0,ge.toArr)(pt).map(function(Gn,Sn,qn){var xr=Gn==null?void 0:Gn[(W==null?void 0:W.label)||"label"],nr=de?ai(Gn).map(function(qt){return qt==null?void 0:qt[(W==null?void 0:W.label)||"label"]}).join(" / "):Tl(xr)?JSON.stringify(xr):xr,Nn=Xu(ve(nr),"N/A"),lr=he((Gn==null?void 0:Gn.__collection)||(ye==null?void 0:ye.target),(W==null?void 0:W.label)||"label"),Dn=(0,jo.cN)(ve(lr),Nn,!0);return(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)("span",{children:Me?Dn:Ue!==!1?(0,t.jsx)("a",{onMouseEnter:function(){ft(!0)},onClick:function(kn){var cr;ft(!0),kn.stopPropagation(),kn.preventDefault(),ke&&!Qe.properties&&(Ye(Ro.Viewer),Qn.current=!0),Qn.current?(setTimeout(function(){mt==null||mt({recordData:Gn}),et({recordData:Gn,parentRecordData:gt,customActionSchema:or()})}),Qn.current=!1):Qe.properties&&(mt==null||mt({recordData:Gn}),et({recordData:Gn,parentRecordData:gt})),we==null||(cr=we.current)===null||cr===void 0||cr.setPopoverVisible(!1)},children:Dn}):Dn}),Sn<qn.length-1?(0,t.jsx)("span",{style:{marginRight:4,color:"#aaa"},children:","}):null]},"".concat(Gn==null?void 0:Gn.id,"_").concat(Sn))});tn(Un),yn(!1)},[ye==null?void 0:ye.target,ve,ke,we,Ue,W==null?void 0:W.label,Qe,he,Ye,de,et,gt,ft,Me,pt,or]),on?null:(0,t.jsx)(t.Fragment,{children:Kt})});Fl.displayName="RenderRecord";var Rl=(0,m.observer)(function(te){var W=(0,m.useFieldSchema)(),de=(0,ce.d9)(),ve=W["x-component-props"]||{},he=ve.enableLink,ye=(0,Sr.Xd)({fieldNames:te.fieldNames}),Me=(0,Sr.fR)("Viewer"),Ue=(0,Sr.Ky)(),ke=Ue.options,Ye=(0,Et.eJ)(),Qe=(0,Et.ng)(),et=Qe.designable,gt=(0,k.XC)(),we=gt.snapshot,pt=de.getCollection(ke==null?void 0:ke.target),ft=(pt==null?void 0:pt.template)==="tree",mt=(0,a.useRef)(),At=(0,jo.Mr)(),yt=(0,ko.ES)(),on=yt.openPopup,yn=(0,ce.nE)();return(0,t.jsx)(Fl,{fieldNames:ye,isTreeCollection:ft,compile:Ye,getLabelUiSchema:At,collectionField:ke,snapshot:we,enableLink:he,designable:et,insertViewer:Me,fieldSchema:W,openPopup:on,recordData:yn,ellipsisWithTooltipRef:mt,value:te.value,setBtnHover:te.setBtnHover,onClick:te.onClick})});Rl.displayName="ButtonLinkList";var wu=function(W,de){var ve=de.name.split(".").filter(function(he,ye,Me){return ye<Me.length-1}).join(".");return ve?Tt().get(W,ve):W},ol=function(W){var de=W.value,ve=W.ButtonList,he=ve===void 0?Rl:ve,ye=(0,m.useFieldSchema)(),Me=ye["x-component-props"]||{},Ue=Me.enableLink,ke=Me.openMode,Ye=Me.openSize,Qe=(0,m.useField)(),et=(0,a.useState)(!1),gt=Re()(et,2),we=gt[0],pt=gt[1],ft=(0,Sr.Ky)(),mt=ft.options,At=(0,ko.ES)(),yt=At.visibleWithURL,on=At.setVisibleWithURL,yn=(0,a.useState)(!!yt),In=Re()(yn,2),gn=In[0],Kt=In[1],tn=(0,Ju.B)(),Qn=tn.defaultOpenMode,sr=(0,ce.nE)(),or=(0,a.useState)(null),Un=Re()(or,2),Gn=Un[0],Sn=Un[1],qn=(0,rn.a)(),xr=qn.isPopupVisibleControlledByURL,nr=(0,a.useCallback)(function(qt){Sn(qt.recordData)},[]),Nn=(0,t.jsx)(Zn.B,{ellipsis:!0,children:(0,t.jsx)(ce.E0,{isNew:!1,record:wu(sr,ye),children:(0,t.jsx)(he,{setBtnHover:Kt,value:de,fieldNames:W.fieldNames,onClick:nr})})}),lr=(0,a.useMemo)(function(){return{visible:we||yt,setVisible:function(kn){pt==null||pt(kn),on==null||on(kn)},openMode:ke||Qn,snapshot:(mt==null?void 0:mt.interface)==="snapshot",fieldSchema:ye,openSize:Ye}},[mt==null?void 0:mt.interface,Qn,ye,on,we,yt]);if(Ue===!1)return Nn;var Dn=function(){return xr()?(0,t.jsx)(Jr.Rm,{children:(0,t.jsx)(Ae.s.Provider,{value:!0,children:(0,t.jsx)(l.sq,{schema:ye,onlyRenderProperties:!0,basePath:Qe.address,filterProperties:function(cr){return cr["x-component"]!=="Action"}})})}):(0,t.jsx)(ce.E0,{isNew:!1,record:Gn,parentRecord:sr,children:(0,t.jsx)(Jr.Rm,{children:(0,t.jsx)(Ae.s.Provider,{value:!0,children:(0,t.jsx)(l.sq,{schema:ye,onlyRenderProperties:!0,basePath:Qe.address})})})})};return(0,t.jsx)(Ca.OA,{visible:!1,children:(0,t.jsxs)(k.EI,{value:lr,children:[Nn,gn&&Dn()]})})},jl,qu=(0,ue.css)(jl||(jl=ee()([`
  min-width: 600px;
  max-width: 800px;
  max-height: 440px;
  overflow: auto;
  .ant-card {
    border: 0px;
  }
`]))),ec=(0,m.observer)(function(te){var W=(0,Sr.Ky)(),de=W.field,ve=(0,a.useState)(!1),he=Re()(ve,2),ye=he[0],Me=he[1],Ue=(0,m.useFieldSchema)();Ue["x-component-props"].enableLink=!1;var ke=(0,a.useRef)(),Ye=o()(o()({},te),{},{shouldMountElement:!0}),Qe=(0,t.jsx)("div",{ref:ke,className:"".concat(qu," popover-subform-container"),children:(0,t.jsx)($o,o()({},Ye))}),et=function(){return ke.current},gt=(0,a.useContext)(Ol.fW),we={getContainer:et},pt=(0,Qu.t)(),ft=pt.getAriaLabel,mt=te.Container||si.q,At=(0,a.useCallback)(function(on){Me(on)},[]),yt=(0,a.useMemo)(function(){return{padding:"0px"}},[]);return(0,t.jsxs)(Ol.EI,{value:o()(o()({},gt),{},{modalProps:we}),children:[(0,t.jsx)(mt,{overlayStyle:yt,content:Qe,trigger:"click",placement:"topLeft",open:ye,onOpenChange:At,title:(de==null?void 0:de.title)||"",children:(0,t.jsxs)("span",{style:{cursor:"pointer",display:"flex"},children:[(0,t.jsx)("div",{style:{maxWidth:"95%"},children:(0,t.jsx)(ol,o()({},te))}),(0,t.jsx)(Yu.Z,{style:{display:"inline-flex",margin:"5px"}})]})}),ye&&(0,t.jsx)("div",{role:"button","aria-label":ft("mask"),onClick:function(){return Me(!1)},style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"transparent",zIndex:9999}})]})},{displayName:"InternalPopoverNester"}),Bl,Ll=(0,m.observer)(function(){var te,W=(0,m.useField)(),de=(0,m.useFieldSchema)(),ve=(0,Sr.fR)("SubTable"),he=(0,Sr.fR)("Selector"),ye=(0,Sr.Ky)(),Me=ye.options,Ue=(0,ja.Hq)(),ke=Ue.actionName;(0,a.useEffect)(function(){ve(Ro.SubTable),W.required=de.required},[]),(0,a.useEffect)(function(){var et;(et=W.componentProps)!==null&&et!==void 0&&et.allowSelectExistingRecord&&he(Ro.Selector)},[(te=W.componentProps)===null||te===void 0?void 0:te.allowSelectExistingRecord]);var Ye=(0,$.Bs)(),Qe=o()(o()({},Ye.components),{},{FormItem:G.xJ,"Radio.Group":Mn,"Checkbox.Group":function(gt){return(0,t.jsx)(Mn,o()({multiple:!0,mode:"multiple"},gt))}});return(0,t.jsx)(u.CollectionProvider_deprecated,{name:Me.target,children:(0,t.jsx)(ja.Hh,{actionPath:"".concat(Me.target,":").concat(ke||"view"),children:(0,t.jsx)(f.FormLayout,{className:(0,ue.css)(Bl||(Bl=ee()([`
              .ant-formily-item-bordered-none {
                .ant-input-number-group-addon {
                  border: none !important;
                  background: none;
                }
                .ant-table {
                  margin: 0px !important;
                }
              }
              .ant-table-body {
                max-height: 100% !important;
                min-height: 100% !important;
              }

              // configure columns
              .ant-table-thead
                button[aria-label*='schema-initializer-AssociationField.SubTable-table:configureColumns']
                > span:last-child {
                display: none !important;
              }
              .ant-table-thead
                button[aria-label*='schema-initializer-AssociationField.SubTable-table:configureColumns']
                > .ant-btn-icon {
                margin: 0px;
              }
              .ant-table-tbody .nb-column-initializer {
                min-width: 40px !important;
              }
            `]))),layout:"vertical",bordered:!1,feedbackLayout:"popover",children:(0,t.jsx)(m.SchemaOptionsContext.Provider,{value:{scope:Ye.scope,components:Qe},children:(0,t.jsx)(l.sq,{onlyRenderProperties:!0,basePath:W.address,schema:de,filterProperties:function(gt){return gt["x-component"]==="AssociationField.SubTable"}})})})})})},{displayName:"InternalSubTable"}),Ul=function(te){return te.Picker="Picker",te.Nester="Nester",te.PopoverNester="PopoverNester",te.Select="Select",te.SubTable="SubTable",te.FileManager="FileManager",te.CascadeSelect="CascadeSelect",te.Tag="Tag",te}({}),ui={Picker:Al,Nester:$o,PopoverNester:ec,Select:go,SubTable:Ll,FileManager:qi,CascadeSelect:tl},zl=(0,a.createContext)({modeToComponent:ui,getComponent:function(W){return ui[W]},getDefaultComponent:function(W){return ui[W]}}),Kl=function(W){var de=Fi(),ve=(0,a.useMemo)(function(){return o()(o()({},de.modeToComponent),W.modeToComponent)},[de.modeToComponent,W.modeToComponent]),he=(0,a.useCallback)(function(Ue){return ve[Ue]||ui[Ue]},[ve]),ye=(0,a.useCallback)(function(Ue){return ui[Ue]},[]),Me=(0,a.useMemo)(function(){return{modeToComponent:ve,getComponent:he,getDefaultComponent:ye}},[he,ve,ye]);return(0,t.jsx)(zl.Provider,{value:Me,children:W.children})},Fi=function(){return a.useContext(zl)},tc=e(1836),Pa=e(373),Wl=e(13642),Nl=(0,m.observer)(function(te){var W,de,ve,he=(0,m.useField)(),ye=(0,tc.d9)(),Me=(0,m.useFieldSchema)(),Ue=(0,d.LY)();(0,Et.Dm)();var ke=((W=Me["x-component-props"])===null||W===void 0?void 0:W.multiple)!==!1,Ye=((de=Me["x-component-props"])===null||de===void 0?void 0:de.allowDissociate)!==!1,Qe=(0,a.useMemo)(function(){return ye.getCollectionField(Me["x-collection-field"])},[Me["x-collection-field"],Me.name]),et=(0,a.useMemo)(function(){var gn;return((gn=ye.getCollection(Qe==null?void 0:Qe.target))===null||gn===void 0?void 0:gn.template)==="file"},[Me["x-collection-field"]]),gt=(0,a.useMemo)(function(){var gn;return((gn=Me["x-component-props"])===null||gn===void 0?void 0:gn.mode)||(et?"FileManager":"Select")},[(ve=Me["x-component-props"])===null||ve===void 0?void 0:ve.mode]),we=(0,a.useState)(!he.readPretty),pt=Re()(we,2),ft=pt[0],mt=pt[1],At=(0,d.QT)(function(){var gn=Qe.targetKey;if(!Me.default||!["Picker","Select"].includes(gt)||!Tt().isObject(Me.default))return Promise.reject(null);var Kt=Array.isArray(Me.default)?Me.default.map(function(tn){return tn[gn]}):Me.default[gn];return Tt().isUndefined(Kt)||Tt().isNil(Kt)||Tt().isNaN(Kt)?Promise.reject(null):Ue.request({resource:Qe.target,action:Array.isArray(Kt)?"list":"get",params:{filter:Je()({},gn,Kt)}})},{manual:!0,onSuccess:function(Kt){var tn;he.initialValue=Kt==null||(tn=Kt.data)===null||tn===void 0?void 0:tn.data}}),yt=At.loading,on=At.run,yn=(0,Gr.Du)(),In=yn.active;return(0,a.useEffect)(function(){if(In){if(mt(!0),!Qe){mt(!1);return}if(["Picker","Select"].includes(gt)&&Me.default&&on(),he.value&&he.form.__template&&["Nester","SubTable","PopoverNester"].includes(gt))if(["belongsTo","hasOne"].includes(Qe.type)){var gn;(gn=he.value)!==null&&gn!==void 0&&gn[Qe.targetKey]&&delete he.value[Qe.targetKey],he.value=o()(o()({},he.initialValue),he.value)}else["belongsToMany","hasMany"].includes(Qe.type)&&Array.isArray(he.value)&&(he.value=he.value.map(function(Kt){var tn;return delete Kt[Qe.targetKey],o()(o()({},(tn=he.initialValue)===null||tn===void 0?void 0:tn[0]),Kt)}));if(he.value!==null&&he.value!==void 0){["Nester","PopoverNester"].includes(gt)&&Array.isArray(he.value)&&he.value.length===0&&["belongsToMany","hasMany","belongsToArray"].includes(Qe.type)&&(he.value=[(0,Pa.d)({})]),mt(!1);return}["Nester"].includes(gt)&&(["belongsTo","hasOne"].includes(Qe.type)?he.value={}:["belongsToMany","hasMany","belongsToArray"].includes(Qe.type)&&(he.value=[(0,Pa.d)({})])),gt==="SubTable"&&(he.value=[]),mt(!1)}},[gt,Qe,he,In]),ft||yt?null:Qe?(0,t.jsx)(Wl.O.Provider,{value:{options:Qe,field:he,fieldSchema:Me,allowMultiple:ke,allowDissociate:Ye,currentMode:gt},children:te.children}):null},{displayName:"AssociationFieldProvider"}),nc=e(94080),Ya=e(47204),rc=(0,m.observer)(function(te){var W=(0,m.useField)(),de=(0,m.useFieldSchema)(),ve=(0,k.XC)(),he=(0,u.useCollectionManager_deprecated)(),ye=he.getCollection,Me=(0,Sr.fR)("AddNewer"),Ue=(0,Sr.Ky)(),ke=Ue.options,Ye=(0,a.useState)(!1),Qe=Re()(Ye,2),et=Qe[0],gt=Qe[1],we=ye(ke==null?void 0:ke.target),pt=(0,a.useState)(we==null?void 0:we.name),ft=Re()(pt,2),mt=ft[0],At=ft[1],yt=(0,a.useState)(we==null?void 0:we.dataSource),on=Re()(yt,2),yn=on[0],In=on[1],gn=function(tn){Me(Ro.AddNewer),gt(!0),At(tn.name),In(tn.dataSource)};return(0,t.jsxs)(u.CollectionProvider_deprecated,{name:ke==null?void 0:ke.target,children:[(0,t.jsx)(nc.CreateAction,o()(o()({},te),{},{onClick:function(tn){return gn(tn)}})),(0,t.jsx)(k.EI,{value:o()(o()({},ve),{},{visible:et,setVisible:gt}),children:(0,t.jsx)(u.CollectionProvider_deprecated,{name:mt,dataSource:yn,children:(0,t.jsx)(Ya.c,{children:(0,t.jsx)(l.sq,{onlyRenderProperties:!0,basePath:W.address,schema:de,filterProperties:function(tn){return tn["x-component"]==="AssociationField.AddNewer"}})})})})]})},{displayName:"CreateRecordAction"}),oc=function(W){var de=W.multiple,ve=(0,m.useField)(),he=(0,m.useForm)(),ye=(0,Sr.Ky)(),Me=ye.options,Ue=ye.currentMode,ke=Fi(),Ye=ke.getComponent,Qe=function(){var we=(0,br.useAssociationCreateActionProps)(),pt=we.onClick,ft=(0,m.useField)(),mt=(0,u.useCollection_deprecated)(),At=mt.getPrimaryKey,yt=At();return{onClick:function(){return A()(g()().mark(function yn(){var In,gn,Kt,tn;return g()().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:return sr.next=2,pt();case 2:gn=((In=ft.data)===null||In===void 0||(In=In.data)===null||In===void 0?void 0:In.data)||{},Kt=gn.data,Kt&&(["m2m","o2m"].includes(Me==null?void 0:Me.interface)&&de!==!1?(tn=he.getValuesIn(ve.path)||[],tn.find(function(or){return or[yt]===Kt[yt]})||(tn.push(Kt),he.setValuesIn(ve.path,tn),ve.onInput(tn))):(he.setValuesIn(ve.path,Kt),ve.onInput(Kt)));case 4:case"end":return sr.stop()}},yn)}))()}}},et=Ye(Ue);return(0,t.jsx)($.G0,{scope:{useCreateActionProps:Qe},components:{CreateRecordAction:rc},children:(0,t.jsx)(et,o()({},W))})},ac=(0,m.observer)(function(te){return(0,t.jsx)(Nl,{children:(0,t.jsx)(oc,o()({},te))})},{displayName:"Editable"}),$l=e(17441),al=e(23923),ci=e(85667),il=e(4393),Vl=e(83062),ll=e(44899),di=e(49834),sl=e(53285),mi=e(29124),kl,Hl,ic=function(W){var de=(0,a.useContext)(Wl.O),ve=de.options;return["hasOne","belongsTo"].includes(ve.type)?(0,t.jsx)(sl.Cm,{isInSubForm:!0,children:(0,t.jsx)(lc,o()({},W))}):["hasMany","belongsToMany","belongsToArray"].includes(ve.type)?(0,t.jsx)(sl.Cm,{isInSubForm:!0,children:(0,t.jsx)(sc,o()({},W))}):null},lc=function(W){var de=(0,Sr.Ky)(),ve=de.field,he=(0,di.oV)(),ye=(0,ce.Kx)(),Me=(0,m.useFieldSchema)(),Ue=(0,a.useCallback)(function(ke){var Ye,Qe=ke.form,et=ke.fieldSchema,gt=ke.collectionField,we=ke.getInterface,pt=ke.formBlockType;return!gt||gt.target&&(Ye=et["x-component-props"])!==null&&Ye!==void 0&&Ye.mode&&!["Picker","Select"].includes(et["x-component-props"].mode)||pt==="update"?!1:!(Qe!=null&&Qe.readPretty)&&!(0,S.VZ)(et)&&!mi.TU.includes(gt==null?void 0:gt.interface)&&!(0,S.Mq)(gt,we)},[]);return(0,t.jsx)(ll.T,{name:"nester",children:(0,t.jsx)(Sr._c,{value:{value:ve.value,collection:ye,fieldSchema:Me.parent},children:(0,t.jsx)(bn.HV,{isNew:he==null?void 0:he.isNew,record:ve.value,parent:he==null?void 0:he.data,children:(0,t.jsx)(mi.yT,{isAllowToSetDefaultValue:Ue,children:(0,t.jsx)(il.Z,{bordered:!0,children:W.children})})})})})},sc=(0,m.observer)(function(te){var W=(0,m.useFieldSchema)(),de=(0,Sr.Ky)(),ve=de.options,he=de.field,ye=de.allowMultiple,Me=de.allowDissociate,Ue=de.currentMode,ke=he.componentProps.allowSelectExistingRecord,Ye=(0,lt.$)(),Qe=Ye.t,et=(0,di.nE)(),gt=(0,ce.Kx)(),we=(0,Fn.Z)(),pt=(0,l.QJ)(),ft=(0,a.useCallback)(function(){we(),pt==null||pt()},[we,pt]),mt=(0,a.useState)(!1),At=Re()(mt,2),yt=At[0],on=At[1],yn=(0,a.useState)([]),In=Re()(yn,2),gn=In[0],Kt=In[1],tn=(0,Sr.Xd)(te),Qn=(0,Et.eJ)(),sr=(0,jo.Il)(ve,(tn==null?void 0:tn.label)||"label"),or=function(){return{run:function(){on(!0)}}};Array.isArray(he.value)||(he.value=[]);var Un=(0,a.useCallback)(function(nr){var Nn,lr=nr.form,Dn=nr.fieldSchema,qt=nr.collectionField,kn=nr.getInterface;return!qt||qt.target&&(Nn=Dn["x-component-props"])!==null&&Nn!==void 0&&Nn.mode&&!["Picker","Select"].includes(Dn["x-component-props"].mode)?!1:!(lr!=null&&lr.readPretty)&&!(0,S.VZ)(Dn)&&!mi.TU.includes(qt==null?void 0:qt.interface)&&!(0,S.Mq)(qt,kn)},[]),Gn=function(){var Nn=(0,k.XC)(),lr=Nn.setVisible,Dn=(0,a.useContext)(Co.b7),qt=Dn.selectedRows,kn=Dn.setSelectedRows;return{onClick:function(){qt.map(function(ar){return he.value.push((0,Pa.d)(ar))}),he.onInput(he.value),he.initialValue=he.value,kn([]),lr(!1)}}},Sn=(0,a.useMemo)(function(){if(he.value&&Object.keys(he.value).length>0){var nr=(Array.isArray(he.value)?he.value:he.value?[he.value]:[]).filter(Boolean).map(function(Nn){var lr=Nn==null?void 0:Nn[tn.label];return o()(o()({},Nn),{},Je()({},tn.label,(0,jo.cN)(Qn(sr),Qn(lr))))});return nr}return[]},[he.value,tn==null?void 0:tn.label]),qn={size:"small",fieldNames:he.componentProps.fieldNames,multiple:!0,association:{target:ve==null?void 0:ve.target},options:Sn,onChange:te==null?void 0:te.onChange,selectedRows:gn,setSelectedRows:Kt,collectionField:ve},xr=function(){var Nn=(ve==null?void 0:ve.targetKey)||"id",lr=(he.value||[]).map(function(qt){return qt==null?void 0:qt[Nn]}).filter(Boolean),Dn=lr.length?{$and:[Je()({},"".concat(Nn,".$ne"),lr)]}:{};return Dn};return he.value.length>0?(0,t.jsxs)(il.Z,{bordered:!0,style:{position:"relative"},className:(0,ue.css)(kl||(kl=ee()([`
          > .ant-card-body > .ant-divider:last-child {
            display: none;
          }
        `]))),children:[(0,t.jsxs)(l.ri,{refresh:ft,children:[he.value.map(function(nr,Nn){var lr=Me;return Me||(lr=!(nr!=null&&nr[ve.targetKey])),(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)("div",{style:{textAlign:"right"},children:!he.readPretty&&lr&&(0,t.jsx)(Vl.Z,{title:Qe("Remove"),children:(0,t.jsx)(Rn.Z,{style:{zIndex:1e3,color:"#a8a3a3"},onClick:function(){(0,ci.action)(function(){return(0,al.b9)(he,{startIndex:Nn,deleteCount:1}),he.value.splice(Nn,1),he.onInput(he.value)})}})},"remove")}),(0,t.jsx)(ll.T,{name:"nester",children:(0,t.jsx)(Sr._c,{value:{value:nr,collection:gt,fieldSchema:W.parent},children:(0,t.jsx)(bn.HV,{isNew:(0,Pa.k)(nr),record:nr,parent:et,children:(0,t.jsx)(bn.li,{index:Nn,children:(0,t.jsx)(mi.yT,{isAllowToSetDefaultValue:Un,children:(0,t.jsx)(l.sq,{onlyRenderProperties:!0,basePath:he.address.concat(Nn),schema:W})})})})})}),(0,t.jsx)(fn.Z,{})]},Nn)}),(0,t.jsxs)(We.Z,{children:[he.editable&&ye&&(0,t.jsx)(k.aU.Link,{useProps:function(){return{onClick:function(){(0,ci.action)(function(){Array.isArray(he.value)||(he.value=[]);var lr=he.value.length;return he.value.splice(lr,0,(0,Pa.d)({})),(0,ge.each)(he.form.fields,function(Dn,qt){Dn||delete he.form.fields[qt]}),he.onInput(he.value)})}}},title:(0,t.jsxs)(We.Z,{style:{gap:2},className:"nb-sub-form-addNew",children:[(0,t.jsx)(Ar.Z,{})," ",Qe("Add new")]})}),he.editable&&ke&&Ue==="Nester"&&ye&&(0,t.jsx)(k.aU.Link,{useAction:or,title:(0,t.jsxs)(We.Z,{style:{gap:2},children:[(0,t.jsx)($l.Z,{})," ",Qe("Select record")]})})]})]}),(0,t.jsx)(k.EI,{value:{openSize:"middle",openMode:"drawer",visible:yt,setVisible:on},children:(0,t.jsx)(Co.sU,o()(o()({},qn),{},{children:(0,t.jsx)(ce.YQ,{name:ve==null?void 0:ve.target,children:(0,t.jsx)($.RV,{children:(0,t.jsx)(bo.Vs,{params:{filter:xr()},children:(0,t.jsx)($.G0,{scope:{usePickActionProps:Gn,useTableSelectorProps:rl,useCreateActionProps:br.useCreateActionProps},children:(0,t.jsx)(l.sq,{onlyRenderProperties:!0,basePath:he.address,schema:W.parent,filterProperties:function(Nn){return Nn["x-component"]==="AssociationField.Selector"}})})})})})}))})]}):(0,t.jsx)(t.Fragment,{children:he.editable&&ye&&(0,t.jsx)(Vl.Z,{title:Qe("Add new"),children:(0,t.jsx)(Kr.ZP,{type:"default",className:(0,ue.css)(Hl||(Hl=ee()([`
                border: 1px solid #f0f0f0 !important;
                box-shadow: none;
              `]))),block:!0,icon:(0,t.jsx)(Ar.Z,{}),onClick:function(){var Nn=he.value;Nn.push({}),he.value=Nn}})},"add")})},{displayName:"ToManyNester"}),uc=function(W,de){return W??de},cc=(0,m.observer)(function(te){var W=(0,m.useFieldSchema)(),de=W["x-component-props"],ve=de.enableLink,he=de.tagColorField,ye=(0,Sr.Xd)({fieldNames:te.fieldNames}),Me=(0,Sr.fR)("Viewer"),Ue=(0,Sr.Ky)(),ke=Ue.options,Ye=(0,Et.eJ)(),Qe=(0,Et.ng)(),et=Qe.designable,gt=(0,jo.Il)(ke,(ye==null?void 0:ye.label)||"label"),we=(0,k.XC)(),pt=we.snapshot,ft=(0,a.useRef)(),mt=(0,u.useCollectionManager_deprecated)(),At=mt.getCollection,yt=At(ke==null?void 0:ke.target),on=(yt==null?void 0:yt.template)==="tree",yn=(0,ko.ES)(),In=yn.openPopup,gn=(0,di.nE)(),Kt=(0,a.useRef)(!1),tn=(0,a.useRef)(W);tn.current=W;var Qn=(0,a.useCallback)(function(){return tn.current},[]),sr=function(){return(0,ge.toArr)(te.value).map(function(Un,Gn,Sn){var qn=Un==null?void 0:Un[(ye==null?void 0:ye.label)||"label"],xr=on?ai(Un).map(function(lr){return lr==null?void 0:lr[(ye==null?void 0:ye.label)||"label"]}).join(" / "):Tl(qn)?JSON.stringify(qn):qn,nr=uc(Ye(xr),"N/A"),Nn=(0,jo.cc)(Ye(gt),nr,Un[he]);return(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)("span",{children:pt?Nn:ve!==!1?(0,t.jsx)("a",{onMouseEnter:function(){te.setBtnHover(!0)},onClick:function(Dn){var qt;te.setBtnHover(!0),Dn.stopPropagation(),Dn.preventDefault(),et&&!W.properties&&(Me(Ro.Viewer),Kt.current=!0),Kt.current?setTimeout(function(){In({recordData:Un,parentRecordData:gn,customActionSchema:Qn()}),Kt.current=!1}):In({recordData:Un,parentRecordData:gn}),ft==null||(qt=ft.current)===null||qt===void 0||qt.setPopoverVisible(!1)},children:Nn}):Nn}),Gn<Sn.length-1?(0,t.jsx)("span",{style:{marginRight:4,color:"#aaa"},children:","}):null]},"".concat(Un==null?void 0:Un[ye.value],"_").concat(Gn))})};return(0,t.jsx)(t.Fragment,{children:sr()})},{displayName:"ButtonTabList"}),dc=function(W){return(0,t.jsx)(ol,o()(o()({},W),{},{ButtonList:cc}))},mc=function(W){var de=(0,Sr.Ky)(),ve=de.currentMode;return(0,t.jsxs)(t.Fragment,{children:[["Select","Picker","CascadeSelect"].includes(ve)&&(0,t.jsx)(ol,o()({},W)),ve==="Tag"&&(0,t.jsx)(dc,o()({},W)),ve==="Nester"&&(0,t.jsx)($o,o()({},W)),ve==="SubTable"&&(0,t.jsx)(Ll,o()({},W)),ve==="FileManager"&&(0,t.jsx)(Ei,o()({},W))]})},Gl=(0,m.observer)(function(te){var W=(0,m.useField)(),de=W.initialValue,ve=W.value||de;return(0,t.jsx)(Nl,{children:(0,t.jsx)(mc,o()(o()({},te),{},{value:ve}))})},{displayName:"ReadPretty"}),vc=e(21995),Zl=e(58521),Yl=e(10274),ul=e(36905),pc=e(85292),fc=e(22638),hc=e(8291),Ql=e(16455),gc=e(18357),_c=e(75667),Cc=e(1892),xc=e(76126),Pc=function(W){var de=W.schema,ve=W.basePath,he=(0,bn.a)(),ye=(0,ce.Kx)(),Me=(0,a.useMemo)(function(){return de.reduceProperties(function(Qe,et){return et["x-component"]==="CollectionField"?et:Qe},null)},[de]),Ue=Me&&ye.getField(Me["x-collection-field"]);if(Me&&he!==null&&he!==void 0&&he.__collection&&Ue&&["select","multipleSelect"].includes(Ue.interface)){var ke="".concat(he.__collection,".").concat(Me.name),Ye=o()(o()({},de.toJSON()),{},{properties:Je()({},Me.name,o()(o()({},Me.toJSON()),{},{"x-collection-field":ke}))});return(0,t.jsx)(l.sq,{basePath:ve,schema:Ye,onlyRenderProperties:!0,isUseFormilyField:!0})}return W.children},cl=e(31018),yc=["rowIndex"],Sc=["id"],bc=["index"],Ec=["columnHidden"],Dc=["record","schema","rowIndex","isSubTable"],Mc=["columnHidden"],Ic=["tableHeight","SortableWrapper","tableSizeRefCallback","defaultRowKey","dataSource","paginationProps","components","onTableChange","onRow","rowClassName","scroll","columns","expandable","field"],Ac=["pagination","useProps"],Oc=["pagination"],Tc=["dragSort","showIndex","onRowSelectionChange","onChange","rowSelection","rowKey","required","onExpand","loading","onClickRow"],Jl,Xl,wl,ql,es,ts,ns,rs,os,as,is,ls,ss,us=a.createContext(!1),cs=function(W){var de=(0,m.useField)();return W.field||de};function Fc(te){return te.map(function(W){return W.name==="actions"?(0,St.omit)(W.toJSON(),"properties"):W.toJSON()})}function Rc(te){var W=[],de=[],ve=[];return te.forEach(function(he){he.fixed==="left"?W.push(he):he.fixed==="right"?ve.push(he):de.push(he)}),[].concat(W,de,ve)}var jc=function(W){var de=Fc(W),ve=(0,pc.Z)(function(){return{value:Tt().cloneDeep(de)}},[]);return Tt().isEqual(de,ve.value)||(ve.value=Tt().cloneDeep(de)),ve.value},Bc=(0,Kn.r)(m.RecursionField),Lc=function(W,de){var ve=(0,c.dQ)(),he=ve.token,ye=cs(W),Me=(0,m.useFieldSchema)(),Ue=(0,_c.Aj)(),ke=Ue.schemaInWhitelist,Ye=(0,Et.ng)(),Qe=Ye.designable,et=(0,Tr.useSchemaInitializerRender)(Me["x-initializer"],Me["x-initializer-props"]),gt=et.exists,we=et.render,pt=(0,Tr.useCollectionParentRecordData)(),ft=Me.reduceProperties(function(Kt,tn){return(0,cl.$Q)(tn)&&ke(Object.values(tn.properties||{}).pop())?Kt.concat([tn]):Kt},[]),mt=de.current,At=de.pageSize,yt=jc(ft),on=(0,a.useMemo)(function(){return(0,ue.css)(Jl||(Jl=ee()([`
      .nb-action-link {
        margin: -`,"px -",`px;
        padding: `,"px ",`px;
      }
    `])),he.paddingContentVerticalLG,he.marginSM,he.paddingContentVerticalLG,he.paddingSM+4)},[he.paddingContentVerticalLG,he.marginSM]),yn=(0,Tr.useCollection)(),In=(0,a.useMemo)(function(){return ft==null?void 0:ft.map(function(Kt){var tn,Qn,sr,or,Un=Kt.reduceProperties(function(qn,xr){if((0,cl.J9)(xr))return qn.concat([xr])},[]),Gn=(Un==null?void 0:Un.length)>0?Un[0].name:Kt.name,Sn=!!((tn=Kt["x-component-props"])!==null&&tn!==void 0&&tn.columnHidden);return o()(o()({title:(0,t.jsx)(Bc,{name:Kt.name,schema:Kt,onlyRenderSelf:!0,tooltip:(Qn=Kt["x-component-props"])===null||Qn===void 0?void 0:Qn.tooltip}),dataIndex:Gn,key:Kt.name,sorter:(sr=Kt["x-component-props"])===null||sr===void 0?void 0:sr.sorter,columnHidden:Sn},Kt["x-component-props"]),{},{width:Sn&&!Qe?0:((or=Kt["x-component-props"])===null||or===void 0?void 0:or.width)||100,render:function(xr,nr){var Nn,lr=(Nn=ye.value)===null||Nn===void 0?void 0:Nn.indexOf(nr),Dn=ye.address.concat(nr.__index||lr);return(0,t.jsx)(Sr._c,{value:{value:nr,collection:yn,fieldSchema:Me.parent},children:(0,t.jsx)(Tr.RecordIndexProvider,{index:nr.__index||lr,children:(0,t.jsx)(Tr.RecordProvider,{isNew:(0,Pa.k)(nr),record:nr,parent:pt,children:(0,t.jsx)(Pc,{schema:Kt,basePath:Dn,children:(0,t.jsx)("span",{role:"button",className:on,children:(0,t.jsx)(m.RecursionField,{basePath:Dn,schema:Kt,onlyRenderProperties:!0})},lr)})})})})},onCell:function(xr,nr){return{record:xr,schema:Kt,rowIndex:nr,isSubTable:W.isSubTable,columnHidden:Sn}},onHeaderCell:function(){return{columnHidden:Sn}}})})},[yt,ye.value,ye.address,yn,pt,on,Qe]),gn=(0,a.useMemo)(function(){if(!gt)return In;var Kt=[].concat(Ft()(In),[{title:we(),dataIndex:"TABLE_COLUMN_INITIALIZER",key:"TABLE_COLUMN_INITIALIZER",render:Qe?function(){return(0,t.jsx)("div",{style:{width:"100%",minWidth:"180px"},className:"nb-column-initializer"})}:null,fixed:Qe?"right":"none"}]);return W.showDel&&Kt.push({title:"",key:"delete",width:60,align:"center",fixed:"right",render:function(Qn,sr,or){if(W.showDel(sr))return(0,t.jsx)("div",{onClick:function(){return(0,ci.action)(function(){var Gn=(mt-1)*At+or,Sn=ye.value[Gn]?1:2;return(0,al.b9)(ye,{startIndex:Gn,deleteCount:Sn}),ye.value.splice(Gn,Sn),ye.setInitialValue(ye.value),ye.onInput(ye.value)})},children:(0,t.jsx)(Rn.Z,{style:{cursor:"pointer",color:"gray"}})})}}),Rc(Kt)},[In,gt,ye,we,W.showDel,Qe]);return gn},Uc=20,zc=function(W){var de,ve,he,ye,Me,Ue=(0,Tr.useFlag)(),ke=Ue.isInSubTable,Ye=(0,c.dQ)(),Qe=Ye.token,et=(de=W["data-row-key"])===null||de===void 0?void 0:de.toString(),gt=(0,ul.useSortable)({id:et}),we=gt.setNodeRef,pt=gt.isOver,ft=gt.active,mt=gt.over,At=W.rowIndex,yt=b()(W,yc),on=(0,gc.YD)({threshold:0,triggerOnce:!0,initialInView:ke||(At||0)<Uc,skip:ke}),yn=on.ref,In=on.inView,gn=(0,a.useMemo)(function(){var tn=new Yl.C(Qe.colorSettings).setAlpha(.6).toHex8String();return{topActiveClass:(0,ue.css)(Xl||(Xl=ee()([`
        & > td {
          border-top: 2px solid `,` !important;
        }
      `])),tn),bottomActiveClass:(0,ue.css)(wl||(wl=ee()([`
        & > td {
          border-bottom: 2px solid `,` !important;
        }
      `])),tn)}},[Qe.colorSettings]),Kt=((ve=ft==null||(he=ft.data.current)===null||he===void 0?void 0:he.sortable.index)!==null&&ve!==void 0?ve:-1)>((ye=mt==null||(Me=mt.data.current)===null||Me===void 0||(Me=Me.sortable)===null||Me===void 0?void 0:Me.index)!==null&&ye!==void 0?ye:-1)?gn.topActiveClass:gn.bottomActiveClass;return(0,t.jsx)(us.Provider,{value:In,children:(0,t.jsx)("tr",o()(o()({ref:function(Qn){(ft==null?void 0:ft.id)!==et&&we(Qn),yn(Qn)}},yt),{},{className:_r()(W.className,Je()({},Kt,ft&&pt))}))})},Kc=function(W){var de=W.id,ve=b()(W,Sc),he=(0,ul.useSortable)({id:de}),ye=he.listeners,Me=he.setNodeRef;return(0,t.jsx)(Zl.Z,o()(o()(o()({ref:Me},ve),ye),{},{style:{cursor:"grab"}}))},Wc=function(W){var de=W.index,ve=b()(W,bc);return(0,t.jsx)("div",o()(o()({className:_r()("nb-table-index"),style:{padding:"0 8px 0 16px"}},ve),{},{children:de}))},ds=[5,10,20,50,100,200],Nc=function(W,de){var ve,he,ye,Me,Ue=(0,lt.$)(),ke=Ue.t,Ye=(0,m.useField)(),Qe=(0,c.dQ)(),et=Qe.token,gt=(0,Tr.useDataBlockRequest)()||{},we=gt.data,pt=we||{},ft=pt.meta,mt=ft||{},At=mt.hasNext,yt=(0,a.useMemo)(function(){return o()(o()({},W),de)},[JSON.stringify(o()(o()({},W),de))]),on=yt||{},yn=on.total,In=on.current,gn=on.pageSize,Kt=(0,Tr.useDataBlockProps)(),tn=(0,Sr.Ky)(),Qn=(0,a.useContext)(m.SchemaOptionsContext),sr=Qn.components,or=(tn==null||(ve=tn.fieldSchema)===null||ve===void 0||(ve=ve["x-component-props"])===null||ve===void 0||(ve=ve.summary)===null||ve===void 0?void 0:ve.Component)||(Kt==null||(he=Kt.summary)===null||he===void 0?void 0:he.Component),Un=(0,a.useCallback)(function(Sn){return sr[or]?a.createElement(sr[or]):ke("Total {{count}} items",{count:Sn})},[sr,or,ke]),Gn=(0,a.useMemo)(function(){if(yn)return o()({pageSizeOptions:ds,showTotal:Un,showSizeChanger:!0},yt);var Sn;return o()(o()({pageSizeOptions:ds,showTotal:!1,simple:!0,showTitle:!1,showSizeChanger:!0,hideOnSinglePage:!1},yt),{},{total:((Sn=Ye.value)===null||Sn===void 0?void 0:Sn.length)<gn||!At?gn*In:gn*In+1,className:(0,ue.css)(ql||(ql=ee()([`
          .ant-pagination-simple-pager {
            display: none !important;
          }
        `]))),itemRender:function(xr,nr,Nn){return nr==="prev"?(0,t.jsxs)("div",{style:{display:"flex"},className:(0,ue.css)(es||(es=ee()([`
                  .ant-pagination-item-link {
                    min-width: `,`px;
                  }
                `])),et.controlHeight),children:[Nn," ",(0,t.jsx)("div",{style:{marginLeft:"7px"},children:In})]}):Nn}})},[yt,ke,Un,(ye=Ye.value)===null||ye===void 0?void 0:ye.length]);return de===!1||!de&&W===!1?!1:((Me=Ye.value)===null||Me===void 0?void 0:Me.length)>0||Gn.total?Gn:!1},$c=(0,ue.css)(ts||(ts=ee()([`
  max-width: 300px;
  white-space: nowrap;
  &:hover .general-schema-designer {
    display: block;
  }
`]))),Vc=(0,ue.css)(ns||(ns=ee()([`
  max-width: 300px;
  white-space: nowrap;
  .ant-color-picker-trigger {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
  }
`]))),kc=(0,ue.css)(rs||(rs=ee()([`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-evenly;
  padding-right: 8px;
  .nb-table-index {
    opacity: 0;
  }
  &:not(.checked) {
    .nb-table-index {
      opacity: 1;
    }
  }
`]))),Hc=(0,ue.css)(os||(os=ee()([`
  &:hover {
    .nb-table-index {
      opacity: 0;
    }
    .nb-origin-node {
      display: block;
    }
  }
`]))),Gc=(0,ue.css)(as||(as=ee()([`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: space-evenly;
`]))),Zc=(0,ue.css)(is||(is=ee()([`
  position: absolute;
  right: 50%;
  transform: translateX(50%);
  &:not(.checked) {
    display: none;
  }
`]))),Yc=function(W){return(0,t.jsx)(E.DndContext,{children:(0,t.jsx)("thead",o()({},W))})},ms={borderRight:"none",paddingLeft:0,paddingRight:0},vs={opacity:.3},Qc=function(W){var de=W.columnHidden,ve=b()(W,Ec),he=(0,Et.ng)(),ye=he.designable;return de?(0,t.jsx)("th",{style:ye?vs:ms,children:ye?ve.children:null}):(0,t.jsx)("th",o()(o()({},ve),{},{className:_r()(ve.className,$c)}))},Jc=function(W){return(0,t.jsx)(zc,o()({},W))},Xc=function(W){var de,ve=(0,c.dQ)(),he=ve.token,ye=(0,a.useContext)(us),Me=(de=W.className)===null||de===void 0?void 0:de.includes("selection-column"),Ue=W.record,ke=W.schema,Ye=W.rowIndex,Qe=W.isSubTable,et=b()(W,Dc),gt=(0,xc.j)({formValues:Ue,category:"style",schema:ke}),we=gt.valueMap,pt=(0,a.useMemo)(function(){return Object.assign(o()({},W.style),we)},[W.style,we]),ft={height:"1em",backgroundColor:"rgba(0, 0, 0, 0.06)",borderRadius:"".concat(he.borderRadiusSM,"px")};return(0,t.jsx)("td",o()(o()({},et),{},{className:_r()(W.className,Vc),style:pt,children:Qe||ye||Me?W.children:(0,t.jsx)("div",{style:ft})}))},wc={display:"none"},qc=function(W){var de=W.columnHidden,ve=b()(W,Mc),he=(0,Et.ng)(),ye=he.designable;return de?(0,t.jsx)("td",{style:ye?vs:ms,children:ye?ve.children:(0,t.jsx)("span",{style:wc,children:ve.children})}):(0,t.jsx)(Xc,o()({},ve))},ps=a.memo(function(te){var W=te.tableHeight,de=te.SortableWrapper,ve=te.tableSizeRefCallback,he=te.defaultRowKey,ye=te.dataSource,Me=te.paginationProps,Ue=te.components,ke=te.onTableChange,Ye=te.onRow,Qe=te.rowClassName,et=te.scroll,gt=te.columns,we=te.expandable,pt=te.field,ft=b()(te,Ic),mt=(0,c.dQ)(),At=mt.token;return(0,t.jsxs)("div",{className:(0,ue.cx)((0,ue.css)(ls||(ls=ee()([`
            height: 100%;
            overflow: hidden;
            .ant-table-wrapper {
              height: 100%;
              .ant-spin-nested-loading {
                height: 100%;
                .ant-spin-container {
                  height: 100%;
                  display: flex;
                  flex-direction: column;
                  .ant-table-expanded-row-fixed {
                    min-height: `,`px;
                  }
                  .ant-table-body {
                    min-height: `,`px;
                  }
                  .ant-table-cell {
                    padding: 16px 8px;
                  }
                  .ant-table-middle .ant-table-cell {
                    padding: 12px `,`px;
                  }
                  .ant-table-small .ant-table-cell {
                    padding: 8px `,`px;
                  }
                }
              }
            }
            .ant-table {
              overflow-x: auto;
              overflow-y: hidden;
            }
          `])),W,W,At.paddingXS,At.paddingXS),"nb-table-container"),children:[(0,t.jsx)(de,{children:(0,t.jsx)(Ql.Z,o()(o()({ref:ve,rowKey:he,dataSource:ye,tableLayout:"auto"},ft),{},{pagination:Me,components:Ue,onChange:ke,onRow:Ye,rowClassName:Qe,scroll:et,columns:gt,expandable:we}))}),pt.errors.length>0&&(0,t.jsx)("div",{className:"ant-formily-item-error-help ant-formily-item-help ant-formily-item-help-enter ant-formily-item-help-enter-active",children:pt.errors.map(function(yt){return yt.messages.map(function(on){return(0,t.jsx)("div",{children:on},on)})})})]})});ps.displayName="InternalNocoBaseTable";var ed=(0,Se.t)((0,m.observer)(function(te){var W,de,ve,he=(0,c.dQ)(),ye=he.token,Me=(0,St.omit)(te,["onBlur","onFocus","value"]),Ue=Me.pagination,ke=Me.useProps,Ye=b()(Me,Ac),Qe=(ke==null?void 0:ke())||{},et=Qe.pagination,gt=b()(Qe,Oc),we=o()(o()({},Ye),gt),pt=we.dragSort,ft=pt===void 0?!1:pt,mt=we.showIndex,At=mt===void 0?!0:mt,yt=we.onRowSelectionChange,on=we.onChange,yn=we.rowSelection,In=we.rowKey,gn=we.required,Kt=we.onExpand,tn=we.loading,Qn=we.onClickRow,sr=b()(we,Tc),or=cs(sr),Un=(0,m.useFieldSchema)(),Gn=(Un==null?void 0:Un["x-component-props"])||{},Sn=Gn.size,qn=Sn===void 0?"small":Sn,xr=(0,Tr.useCollection)(),nr=(Un==null||(W=Un.parent)===null||W===void 0?void 0:W["x-decorator"])==="TableSelectorProvider",Nn=nr?(0,Tr.useTableSelectorContext)():(0,Cc.Si)(),lr=Nn.expandFlag,Dn=Nn.allIncludesChildren,qt=(0,fc.Z)(sr.onRowDragEnd||function(){}),kn=Nc(Ue,et),cr=Lc(sr,kn),ar=(0,a.useState)(function(){return lr?Dn:[]}),vr=Re()(ar,2),hr=vr[0],pr=vr[1],Mr=(0,a.useState)((or==null||(de=or.data)===null||de===void 0?void 0:de.selectedRowKeys)||[]),$r=Re()(Mr,2),yr=$r[0],jr=$r[1],Xr=(0,a.useState)([]),uo=Re()(Xr,2),oo=uo[0],io=uo[1],Mo=(yn==null?void 0:yn.type)!=="none",Io=(0,a.useRef)(new Map),To=(0,a.useMemo)(function(){return(0,ue.css)(ss||(ss=ee()([`
        & > td {
          background-color: `,` !important;
        }
        &:hover > td {
          background-color: `,` !important;
        }
      `])),ye.controlItemBgActive,ye.controlItemBgActiveHover)},[ye.controlItemBgActive,ye.controlItemBgActiveHover]),Ko=(0,a.useMemo)(function(){return Qn?To:""},[To,Qn]),Ea=(0,a.useMemo)(function(){return Qn?function(Po,yo){return{onClick:function(So){(0,Ze.isPortalInBody)(So.target)||Qn(Po,io,oo)},rowIndex:yo}}:null},[Qn,oo]);(0,hc.Z)(function(){var Po=lr?Dn:[];Tt().isEqual(Po,hr)||pr(Po)},[lr,Dn]);var Ho=(0,a.useCallback)(function(Po){if(In)return aa(Po);if(Po.key)return Po.key;if(Io.current.has(Po))return Io.current.get(Po);var yo=(0,ge.uid)();return Io.current.set(Po,yo),yo},[]),aa=(0,a.useCallback)(function(Po){if(Array.isArray(In))return In.map(function(Fo){var So;return((So=Po[Fo])===null||So===void 0?void 0:So.toString())||""}).join("-");if(typeof In=="string")return Po[In];var yo;return(yo=(In??Ho)(Po))===null||yo===void 0?void 0:yo.toString()},[JSON.stringify(In),Ho]),pa=(0,a.useMemo)(function(){var Po=Array.isArray(or==null?void 0:or.value)?or.value:[];return Po.filter(Boolean)},[or==null?void 0:or.value,or==null||(ve=or.value)===null||ve===void 0?void 0:ve.length]),hi=(0,a.useMemo)(function(){return function(Po){var yo=(0,a.useCallback)(function(Fo){var So,wo;if(!Fo.active||!Fo.over){console.warn("move cancel");return}var gi=(So=Fo.active)===null||So===void 0||(So=So.data.current)===null||So===void 0||(So=So.sortable)===null||So===void 0?void 0:So.index,Yi=(wo=Fo.over)===null||wo===void 0||(wo=wo.data.current)===null||wo===void 0||(wo=wo.sortable)===null||wo===void 0?void 0:wo.index,Qv=or.value[gi]||Fo.active,Jv=or.value[Yi]||Fo.over;or.move(gi,Yi),qt({from:Qv,to:Jv})},[]);return(0,t.jsx)(E.DndContext,{onDragEnd:yo,children:(0,t.jsx)("tbody",o()({},Po))})}},[or,qt]);hi.displayName="BodyWrapperComponent";var Nv=(0,a.useMemo)(function(){return{header:{wrapper:Yc,cell:Qc},body:{wrapper:hi,row:Jc,cell:qc}}},[hi]),Zi=(0,a.useMemo)(function(){return yn},[JSON.stringify(yn)]),$v=(0,a.useMemo)(function(){return{rowSelection:Zi?o()({type:"checkbox",selectedRowKeys:yr,onChange:function(yo,Fo){or.data=or.data||{},or.data.selectedRowKeys=yo,or.data.selectedRowData=Fo,jr(yo),yt==null||yt(yo,Fo)},getCheckboxProps:function(yo){return{"aria-label":"checkbox"}},renderCell:function(yo,Fo,So,wo){if(!ft&&!At)return wo;var gi=kn==null?void 0:kn.current,Yi=(kn==null?void 0:kn.pageSize)||20;return gi?So=So+(gi-1)*Yi+1:So=So+1,Fo.__index&&(So=(0,cl.YR)(Fo.__index)),(0,t.jsxs)("div",{role:"button","aria-label":"table-index-".concat(So),className:_r()(yo?"checked":null,kc,Je()({},Hc,Mo)),children:[(0,t.jsxs)("div",{className:_r()(yo?"checked":null,Gc),children:[ft&&(0,t.jsx)(Kc,{id:aa(Fo)}),At&&(0,t.jsx)(Wc,{index:So})]}),Mo&&(0,t.jsx)("div",{className:_r()("nb-origin-node",yo?"checked":null,Zc),children:wo})]})}},Zi):void 0}},[Zi,yr,yt,At,ft,or,aa,Mo,Zi,kn]),Vv=(0,a.useCallback)(function(Po){var yo,Fo,So=Po.children;return ft?a.createElement(ul.SortableContext,{items:((yo=or.value)===null||yo===void 0||(Fo=yo.map)===null||Fo===void 0?void 0:Fo.call(yo,aa))||[]},So):a.createElement(a.Fragment,{},So)},[or,ft,aa]),Gu=(0,Et.fM)(),Ml=Gu.height,kv=Gu.tableSizeRefCallback,Hv=(0,a.useMemo)(function(){return{x:"max-content"}},[]),Gv=(0,a.useMemo)(function(){return{x:"max-content",y:pa.length>0?Ml:void 0}},[Ml,Hv,pa]),Zv=(0,a.useCallback)(function(Po){return oo.includes(Po[In])?Ko:""},[oo,Ko,JSON.stringify(In)]),Zu=(0,a.useCallback)(function(Po,yo){var Fo=Po?[].concat(Ft()(hr),[yo[xr.getPrimaryKey()]]):hr.filter(function(So){return yo[xr.getPrimaryKey()]!==So});pr(Fo),Kt==null||Kt(Po,yo)},[hr,Kt,xr]),Yv=(0,a.useMemo)(function(){return{onExpand:Zu,expandedRowKeys:hr}},[hr,Zu]);return(0,t.jsx)(I.Z,{spinning:!!tn,children:(0,t.jsx)(ps,o()(o()(o()({tableHeight:Ml,SortableWrapper:Vv,tableSizeRefCallback:kv,defaultRowKey:Ho,dataSource:pa},sr),$v),{},{paginationProps:kn,components:Nv,onTableChange:on,onRow:Ea,rowClassName:Zv,scroll:Gv,columns:cr,expandable:Yv,field:or,size:qn}))})}),{displayName:"NocoBaseTable"}),fs,hs,td=(0,ue.css)(fs||(fs=ee()([`
  .ant-table-footer {
    padding: 0 !important;
  }
  .ant-formily-item-error-help {
    display: none;
  }
  .ant-table-cell .ant-formily-item-error-help {
    display: block;
    position: absolute;
    font-size: 12px;
    top: 100%;
    background: #fff;
    width: 100%;
    margin-top: -15px;
    padding: 3px;
    z-index: 1;
    border-radius: 3px;
    box-shadow: 0 0 10px #eee;
    animation: none;
    transform: translateY(0);
    opacity: 1;
  }
  .ant-table-cell .ant-formily-item-control {
    max-width: 100% !important;
  }
  .ant-table-thead .ant-table-cell {
    font-weight: normal;
  }
`]))),nd=(0,ue.css)(hs||(hs=ee()([`
  .ant-formily-item-feedback-layout-popover {
    margin-bottom: 0px !important;
  }
  .ant-formily-editable {
    vertical-align: sub;
  }
  .ant-table-footer {
    display: flex;
  }
`]))),rd=(0,m.observer)(function(te){var W,de,ve,he,ye=te.openSize,Me=(0,Sr.Ky)(),Ue=Me.field,ke=Me.options,Ye=Me.fieldSchema,Qe=(0,lt.$)(),et=Qe.t,gt=(0,a.useState)(!1),we=Re()(gt,2),pt=we[0],ft=we[1],mt=(0,a.useState)([]),At=Re()(mt,2),yt=At[0],on=At[1],yn=(0,Sr.Xd)(te),In=(0,m.useFieldSchema)(),gn=(0,Et.eJ)(),Kt=(0,jo.Il)(ke,(yn==null?void 0:yn.label)||"label"),tn=(0,ce.oV)(),Qn=(0,ce.Kx)(),sr=Ue.componentProps,or=sr.allowSelectExistingRecord,Un=sr.allowAddnew,Gn=sr.allowDisassociation;(0,vc.JD)({rootField:Ue,rootSchema:Ye});var Sn=function(jr,Xr){if(Xr!==void 0&&(0,ge.isArr)(Ue.value)&&jr!==Xr)return(0,ci.action)(function(){var uo=Ue.value[jr];return Ue.value.splice(jr,1),Ue.value.splice(Xr,0,uo),(0,al.rN)(Ue,{fromIndex:jr,toIndex:Xr}),Ue.onInput(Ue.value)})};Ue.move=Sn;var qn=(0,a.useMemo)(function(){if(Ue.value&&Object.keys(Ue.value).length>0){var yr=(Array.isArray(Ue.value)?Ue.value:Ue.value?[Ue.value]:[]).filter(Boolean).map(function(jr){var Xr=jr==null?void 0:jr[yn.label];return o()(o()({},jr),{},Je()({},yn.label,(0,jo.cN)(gn(Kt),gn(Xr))))});return yr}return[]},[Ue.value,yn==null?void 0:yn.label]),xr={size:"small",fieldNames:Ue.componentProps.fieldNames,multiple:!0,association:{target:ke==null?void 0:ke.target},options:qn,onChange:te==null?void 0:te.onChange,selectedRows:yt,setSelectedRows:on,collectionField:ke},nr=function(){var jr=(0,k.XC)(),Xr=jr.setVisible,uo=(0,a.useContext)(Co.b7),oo=uo.selectedRows,io=uo.setSelectedRows;return{onClick:function(){var Io;Array.isArray(Ue.value)||(Ue.value=[]),oo.forEach(function(Ko){return Ue.value.push((0,Pa.d)(Ko))}),Ue.onInput(Ue.value),Ue.initialValue=Ue.value,io([]),Xr(!1);var To=Math.ceil(Ue.value.length/(((Io=Ue.componentProps)===null||Io===void 0?void 0:Io.pageSize)||10));kn(To)}}},Nn=function(){var jr=(ke==null?void 0:ke.targetKey)||"id",Xr=(Ue.value||[]).map(function(oo){return oo==null?void 0:oo[jr]}).filter(Boolean),uo=Xr.length?{$and:[Je()({},"".concat(jr,".$ne"),Xr)]}:{};return uo},lr=(0,a.useState)(1),Dn=Re()(lr,2),qt=Dn[0],kn=Dn[1],cr=(0,a.useState)(((W=Ue.componentProps)===null||W===void 0?void 0:W.pageSize)||10),ar=Re()(cr,2),vr=ar[0],hr=ar[1];(0,a.useEffect)(function(){var yr;hr((yr=Ue.componentProps)===null||yr===void 0?void 0:yr.pageSize)},[(de=Ue.componentProps)===null||de===void 0?void 0:de.pageSize]);var pr=(0,a.useMemo)(function(){var yr,jr=Math.ceil(((yr=Ue.value)===null||yr===void 0?void 0:yr.length)/10);return{current:qt>jr?jr:qt,pageSize:vr||10,total:Ue==null?void 0:Ue.value,onChange:function(uo,oo){kn(uo),hr(oo),Ue.componentProps.pageSize=oo,Ue.onInput(Ue.value)},showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],hideOnSinglePage:!1}},[(ve=Ue.value)===null||ve===void 0?void 0:ve.length,vr,qt]),Mr=function(){var jr=(0,Sr.Ky)(),Xr=jr.field;return{run:function(){var oo;Xr.value=Xr.value||[],Xr.value.push((0,Pa.d)({}));var io=Math.ceil(Xr.value.length/(((oo=Xr.componentProps)===null||oo===void 0?void 0:oo.pageSize)||10));return kn(io),Xr.onInput(Xr.value)}}},$r=function(){return{run:function(){ft(!0)}}};return(0,t.jsxs)("div",{className:td,children:[(0,t.jsx)(sl.Cm,{isInSubTable:!0,children:(0,t.jsx)(ce.E0,{record:null,parentRecord:tn,children:(0,t.jsx)(ll.T,{name:"nester",children:(0,t.jsxs)(Sr._c,{value:{value:null,collection:Qn,fieldSchema:In.parent,skip:!0},children:[(0,t.jsx)(ed,{className:nd,size:"small",field:Ue,showIndex:!0,dragSort:!1,showDel:Ue.editable&&(Un!==!1||or!==!1||Gn!==!1)?function(yr){return Ue.editable?Gn!==!1?!0:yr==null?void 0:yr.__isNewRecord__:!1}:!1,pagination:pr,rowSelection:{type:"none",hideSelectAll:!0},isSubTable:!0,locale:{emptyText:(0,t.jsxs)("span",{children:[" ",Ue.editable?et("Please add or select record"):et("No data")]})}}),Ue.editable&&(0,t.jsxs)(We.Z,{style:{marginTop:"10px",position:(he=Ue.value)!==null&&he!==void 0&&he.length?"absolute":"relative",bottom:"0",gap:15},children:[Un!==!1&&(0,t.jsx)(k.aU.Link,{useAction:Mr,title:(0,t.jsxs)(We.Z,{style:{gap:2},className:"nb-sub-table-addNew",children:[(0,t.jsx)(Ar.Z,{})," ",et("Add new")]})}),or&&(0,t.jsx)(k.aU.Link,{useAction:$r,title:(0,t.jsxs)(We.Z,{style:{gap:2},children:[(0,t.jsx)($l.Z,{})," ",et("Select record")]})})]})]})})})}),(0,t.jsx)(k.EI,{value:{openSize:ye,openMode:"drawer",visible:pt,setVisible:ft},children:(0,t.jsx)(Co.sU,o()(o()({},xr),{},{children:(0,t.jsx)(u.CollectionProvider_deprecated,{name:ke==null?void 0:ke.target,children:(0,t.jsx)($.RV,{children:(0,t.jsx)(bo.Vs,{params:{filter:Nn()},children:(0,t.jsx)($.G0,{scope:{usePickActionProps:nr,useTableSelectorProps:rl,useCreateActionProps:br.useCreateActionProps},children:(0,t.jsx)(l.sq,{onlyRenderProperties:!0,basePath:Ue.address,schema:In.parent,filterProperties:function(jr){return jr["x-component"]==="AssociationField.Selector"}})})})})})}))})]})},{displayName:"SubTable"}),ua=(0,m.connect)(ac,(0,m.mapReadPretty)(Gl));ua.SubTable=rd,ua.Nester=ic,ua.AddNewer=Zr,ua.Selector=k.aU.Container,ua.Viewer=k.aU.Container,ua.InternalSelect=Al,ua.ReadPretty=Gl,ua.FileSelector=bi;var gs=e(90810),od=e(94920),ad=e(88773),_s=e(18386);function Cs(te){var W=te.action,de=W===void 0?"list":W,ve=te.service,he=te.fieldNames,ye=(ve==null?void 0:ve.params)||{},Me=(0,m.useFieldSchema)(),Ue=(0,u.useCollection_deprecated)(),ke=Ue.getField,Ye=(0,u.useCollectionManager_deprecated)(),Qe=Ye.getCollectionFields,et=(0,bn.a)(),gt=(0,a.useCallback)(function(At){return At&&mn()(At)==="object"?At[he.value]:At},[he.value]),we=(0,a.useMemo)(function(){if(!(te.value===void 0||te.value===null))return Array.isArray(te.value)?te.value.map(gt):[gt(te.value)]},[te.value,gt]),pt=(0,a.useMemo)(function(){return ke(Me.name)},[Me.name]),ft=et==null?void 0:et[pt==null?void 0:pt.sourceKey],mt=(0,a.useMemo)(function(){var At=["oho","o2m"].includes(pt==null?void 0:pt.interface);return(0,Qt.EO)([(0,Qt.EO)([At&&!(0,_s.Op)(Me)&&pt!==null&&pt!==void 0&&pt.foreignKey?Je()({},pt.foreignKey,{$is:null}):null,ye==null?void 0:ye.filter]),At&&ft!==void 0&&ft!==null&&!(0,_s.Op)(Me)&&pt!==null&&pt!==void 0&&pt.foreignKey?Je()({},pt.foreignKey,{$eq:ft}):null,ye!=null&&ye.filter&&we?Je()({},he.value,Je()({},"$in",we)):null],"$or")},[ye==null?void 0:ye.filter,Qe,pt,ft,we,he.value]);return(0,a.useMemo)(function(){return o()(o()({resource:pt==null?void 0:pt.target,action:de},ve),{},{params:o()(o()({},ve==null?void 0:ve.params),{},{filter:mt})})},[pt==null?void 0:pt.target,de,mt,ve])}var id=(0,m.observer)(function(te){var W=Cs(te);return(0,Et.vH)(),(0,t.jsx)(Bn.ReadPretty,o()(o()({},te),{},{service:W}))},{displayName:"ReadPretty"}),ld=function(W){return{type:"void","x-component":"div",properties:Je()({},W.name||(0,ge.uid)(),W)}},xs=(0,m.connect)(function(te){var W=te.fieldNames,de=te.objectValue,ve=de===void 0?!0:de,he=Cs(te);(0,Et.vH)();var ye=(0,a.useCallback)(function(Ue){return!ve&&mn()(Ue)==="object"?Ue[W.value]:Ue},[ve,W.value]),Me=(0,a.useMemo)(function(){if(!(te.value===void 0||te.value===null))return Array.isArray(te.value)?te.value.map(ye):ye(te.value)},[te.value,ye]);return(0,t.jsx)(Bn,o()(o()({},te),{},{objectValue:ve,value:Me,service:he}))},(0,m.mapProps)({dataSource:"options",loading:!0},function(te,W){return o()(o()({},te),{},{fieldNames:o()(o()(o()({},ct),te.fieldNames),W.componentProps.fieldNames),suffixIcon:W!=null&&W.loading||W!=null&&W.validating?(0,t.jsx)(vn.Z,{}):te.suffixIcon})}),(0,m.mapReadPretty)(id));xs.displayName="InternalAssociationSelect";var Ri=xs;Ri.Designer=function(){var W,de,ve,he,ye,Me,Ue=(0,u.useCollectionManager_deprecated)(),ke=Ue.getCollectionFields,Ye=Ue.getInterface,Qe=Ue.getCollectionJoinField,et=Ue.getCollection,gt=Ue.isTitleField,we=(0,u.useCollection_deprecated)(),pt=we.getField,ft=(0,ze.bz)(),mt=ft.form,At=(0,m.useField)(),yt=(0,m.useFieldSchema)(),on=(0,lt.$)(),yn=on.t,In=(0,Ae.C)(),gn=(0,Et.ng)(),Kt=gn.dn,tn=gn.refresh,Qn=gn.insertAdjacent,sr=(0,Et.eJ)(),or=(0,od.K)(),Un=(0,mi.SF)(),Gn=Un.isAllowToSetDefaultValue,Sn=pt(yt.name)||Qe(yt["x-collection-field"]),qn=(0,Et.cL)(),xr=At.address.segments.includes("__form_grid"),nr=Ye(Sn==null?void 0:Sn.interface),Nn=nr==null||(W=nr.validateSchema)===null||W===void 0?void 0:W.call(nr,yt),lr=Sn==null||(de=Sn.uiSchema)===null||de===void 0?void 0:de.title,Dn=Sn!=null&&Sn.target?ke(Sn==null?void 0:Sn.target):[],qt={title:At.title===lr?void 0:At.title},kn=(0,u.useSortFields)(Sn==null?void 0:Sn.target),cr=((ve=At.componentProps)===null||ve===void 0||(ve=ve.service)===null||ve===void 0||(ve=ve.params)===null||ve===void 0?void 0:ve.sort)||[];(0,a.useEffect)(function(){At.readPretty!==yt["x-read-pretty"]&&(At.readPretty=!!yt["x-read-pretty"])},[yt["x-read-pretty"]]);var ar=cr==null?void 0:cr.map(function(Mr){return Mr.startsWith("-")?{field:Mr.substring(1),direction:"desc"}:{field:Mr,direction:"asc"}});At.readPretty||(qt.required=At.required);var vr=Dn.filter(function(Mr){return gt(Mr)}).map(function(Mr){var $r;return{value:Mr==null?void 0:Mr.name,label:sr(Mr==null||($r=Mr.uiSchema)===null||$r===void 0?void 0:$r.title)||(Mr==null?void 0:Mr.name)}}),hr="editable";yt["x-disabled"]===!0&&(hr="readonly"),yt["x-read-pretty"]===!0&&(hr="read-pretty");var pr=Tt().omit(yt,"required");return(0,t.jsxs)(Xo.aN,{children:[(0,t.jsx)(gs.Mj,{}),mt&&!(mt!=null&&mt.readPretty)&&Nn&&(0,t.jsx)(Lt.j0,{title:yn("Set validation rules"),components:{ArrayCollapse:f.ArrayCollapse,FormLayout:f.FormLayout},schema:{type:"object",title:yn("Set validation rules"),properties:{rules:{type:"array",default:yt==null?void 0:yt["x-validator"],"x-component":"ArrayCollapse","x-decorator":"FormItem","x-component-props":{accordion:!0},maxItems:3,items:{type:"object","x-component":"ArrayCollapse.CollapsePanel","x-component-props":{header:'{{ t("Validation rule") }}'},properties:{index:{type:"void","x-component":"ArrayCollapse.Index"},layout:{type:"void","x-component":"FormLayout","x-component-props":{labelStyle:{marginTop:"6px"},labelCol:8,wrapperCol:16},properties:o()(o()({},Nn),{},{message:{type:"string",title:'{{ t("Error message") }}',"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{autoSize:{minRows:2,maxRows:2}}}})},remove:{type:"void","x-component":"ArrayCollapse.Remove"},moveUp:{type:"void","x-component":"ArrayCollapse.MoveUp"},moveDown:{type:"void","x-component":"ArrayCollapse.MoveDown"}}},properties:{add:{type:"void",title:'{{ t("Add validation rule") }}',"x-component":"ArrayCollapse.Addition","x-reactions":{dependencies:["rules"],fulfill:{state:{disabled:"{{$deps[0].length >= 3}}"}}}}}}}},onSubmit:function($r){var yr,jr=[],Xr=function(aa){return aa!=null&&!Number.isNaN(aa)},uo=mr()($r.rules),oo;try{for(uo.s();!(oo=uo.n()).done;){var io=oo.value;jr.push(Tt().pickBy(io,Xr))}}catch(Ho){uo.e(Ho)}finally{uo.f()}var Mo=Je()({},"x-uid",yt["x-uid"]);if(["percent"].includes(Sn==null?void 0:Sn.interface)){var Io=mr()(jr),To;try{for(Io.s();!(To=Io.n()).done;){var Ko=To.value;(Ko.maxValue||Ko.minValue)&&(Ko.percentMode=!0),Ko.percentFormat&&(Ko.percentFormats=!0)}}catch(Ho){Io.e(Ho)}finally{Io.f()}}var Ea=Tt().concat([],(Sn==null||(yr=Sn.uiSchema)===null||yr===void 0?void 0:yr["x-validator"])||[],jr);At.validator=Ea,yt["x-validator"]=jr,Mo["x-validator"]=jr,Kt.emit("patch",{schema:Mo}),tn()}}),Gn()&&(0,t.jsx)(Lt.j0,{title:yn("Set default value"),components:{ArrayCollapse:f.ArrayCollapse,FormLayout:f.FormLayout},width:800,schema:{type:"object",title:yn("Set default value"),properties:{default:o()(o()({},pr||{}),{},{"x-decorator":"FormItem","x-component-props":o()(o()({},pr["x-component-props"]),{},{component:Sn!=null&&Sn.target?"AssociationSelect":void 0,service:{resource:Sn==null?void 0:Sn.target}}),name:"default",title:yn("Default value"),default:yt.default||(Sn==null?void 0:Sn.defaultValue),"x-read-pretty":!1,"x-disabled":!1})}},onSubmit:function($r){var yr=Je()({},"x-uid",yt["x-uid"]);At.value!==$r.default&&(At.value=$r.default),yt.default=$r.default,yr.default=$r.default,Kt.emit("patch",{schema:yr}),tn()}}),mt&&!xr&&qn&&(0,t.jsx)(Lt.Qf,{title:yn("Field component"),options:qn,value:yt["x-component"],onChange:function($r){var yr,jr,Xr={name:Sn==null?void 0:Sn.name,type:"void",required:yt.required,description:yt.description,default:yt.default,"x-decorator":"FormItem","x-toolbar":"FormItemSchemaToolbar","x-settings":"fieldSettings:FormItem","x-component":$r,"x-validator":yt["x-validator"],"x-collection-field":yt["x-collection-field"],"x-decorator-props":yt["x-decorator-props"],"x-component-props":o()(o()({},Sn==null||(yr=Sn.uiSchema)===null||yr===void 0?void 0:yr["x-component-props"]),yt["x-component-props"])};nr==null||(jr=nr.schemaInitialize)===null||jr===void 0||jr.call(nr,Xr,{field:Sn,block:"Form",readPretty:At.readPretty,action:In?"get":null,targetCollection:et(Sn==null?void 0:Sn.target)}),$r==="CollectionField"&&(Xr.type="string"),Qn("beforeBegin",ld(Xr),{onSuccess:function(){Kt.remove(null,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}})}})}}),or()?(0,t.jsx)(Lt.hj,{title:yn("Allow multiple"),checked:((he=yt["x-component-props"])===null||he===void 0?void 0:he.multiple)===void 0?!0:yt["x-component-props"].multiple,onChange:function($r){var yr=Je()({},"x-uid",yt["x-uid"]);yt["x-component-props"]=yt["x-component-props"]||{},At.componentProps=At.componentProps||{},yt["x-component-props"].multiple=$r,At.componentProps.multiple=$r,yr["x-component-props"]=yt["x-component-props"],Kt.emit("patch",{schema:yr}),tn()}},"multiple"):null,(0,t.jsx)(pn.H,{collectionName:Sn==null?void 0:Sn.target,defaultFilter:((ye=At.componentProps)===null||ye===void 0||(ye=ye.service)===null||ye===void 0||(ye=ye.params)===null||ye===void 0?void 0:ye.filter)||{},form:mt,onSubmit:function($r){var yr,jr=$r.filter;jr=(0,un.Wm)(jr),Tt().set(At.componentProps,"service.params.filter",jr),yt["x-component-props"]=At.componentProps,Kt.emit("patch",{schema:(yr={},Je()(yr,"x-uid",yt["x-uid"]),Je()(yr,"x-component-props",At.componentProps),yr)})}}),(0,t.jsx)(Lt.j0,{title:yn("Set default sorting rules"),components:{ArrayItems:f.ArrayItems},schema:{type:"object",title:yn("Set default sorting rules"),properties:{sort:{type:"array",default:ar,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:kn,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:yn("ASC"),value:"asc"},{label:yn("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:yn("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function($r){var yr,jr=$r.sort,Xr=jr.map(function(uo){return uo.direction==="desc"?"-".concat(uo.field):uo.field});Tt().set(At.componentProps,"service.params.sort",Xr),yt["x-component-props"]=At.componentProps,Kt.emit("patch",{schema:(yr={},Je()(yr,"x-uid",yt["x-uid"]),Je()(yr,"x-component-props",At.componentProps),yr)})}}),mt&&!(mt!=null&&mt.readPretty)&&!(0,ad.V)(yt)&&(0,t.jsx)(Lt.Qf,{title:yn("Pattern"),options:[{label:yn("Editable"),value:"editable"},{label:yn("Readonly"),value:"readonly"},{label:yn("Easy-reading"),value:"read-pretty"}],value:hr,onChange:function($r){var yr=Je()({},"x-uid",yt["x-uid"]);switch($r){case"readonly":{yt["x-read-pretty"]=!1,yt["x-disabled"]=!0,yr["x-read-pretty"]=!1,yr["x-disabled"]=!0,At.readPretty=!1,At.disabled=!0;break}case"read-pretty":{yt["x-read-pretty"]=!0,yt["x-disabled"]=!1,yr["x-read-pretty"]=!0,yr["x-disabled"]=!1,At.readPretty=!0;break}default:{yt["x-read-pretty"]=!1,yt["x-disabled"]=!1,yr["x-read-pretty"]=!1,yr["x-disabled"]=!1,At.readPretty=!1,At.disabled=!1;break}}Kt.emit("patch",{schema:yr}),Kt.refresh()}},"pattern"),(Sn==null?void 0:Sn.target)&&["CollectionField","AssociationSelect"].includes(yt["x-component"])&&(0,t.jsx)(Lt.Qf,{title:yn("Title field"),options:vr,value:At==null||(Me=At.componentProps)===null||Me===void 0||(Me=Me.fieldNames)===null||Me===void 0?void 0:Me.label,onChange:function($r){var yr,jr=Je()({},"x-uid",yt["x-uid"]),Xr=o()(o()(o()({},Sn==null||(yr=Sn.uiSchema)===null||yr===void 0||(yr=yr["x-component-props"])===null||yr===void 0?void 0:yr.fieldNames),At.componentProps.fieldNames),{},{label:$r});At.componentProps.fieldNames=Xr,yt["x-component-props"]=yt["x-component-props"]||{},yt["x-component-props"].fieldNames=Xr,jr["x-component-props"]=yt["x-component-props"],Kt.emit("patch",{schema:jr}),Kt.refresh()}},"title-field"),Sn&&(0,t.jsx)(Lt.Z5,{}),(0,t.jsx)(Lt.qx,{removeParentsIfNoChildren:!0,confirm:{title:yn("Delete field")},breakRemoveOn:{"x-component":"Grid"}},"remove")]})},Ri.FilterDesigner=function(){var W,de,ve,he,ye,Me,Ue=(0,u.useCollectionManager_deprecated)(),ke=Ue.getCollectionFields,Ye=Ue.getInterface,Qe=Ue.getCollectionJoinField,et=(0,u.useCollection_deprecated)(),gt=et.getField,we=(0,ze.bz)(),pt=we.form,ft=(0,m.useField)(),mt=(0,m.useFieldSchema)(),At=(0,lt.$)(),yt=At.t,on=(0,Et.ng)(),yn=on.dn,In=on.refresh,gn=(0,Et.eJ)(),Kt=gt(mt.name)||Qe(mt["x-collection-field"]),tn=Ye(Kt==null?void 0:Kt.interface),Qn=tn==null||(W=tn.validateSchema)===null||W===void 0?void 0:W.call(tn,mt),sr=Kt==null||(de=Kt.uiSchema)===null||de===void 0?void 0:de.title,or=Kt!=null&&Kt.target?ke(Kt==null?void 0:Kt.target):[],Un={title:ft.title===sr?void 0:ft.title},Gn=(0,u.useSortFields)(Kt==null?void 0:Kt.target),Sn=((ve=ft.componentProps)===null||ve===void 0||(ve=ve.service)===null||ve===void 0||(ve=ve.params)===null||ve===void 0?void 0:ve.sort)||[],qn=Sn==null?void 0:Sn.map(function(Nn){return Nn.startsWith("-")?{field:Nn.substring(1),direction:"desc"}:{field:Nn,direction:"asc"}});ft.readPretty||(Un.required=ft.required);var xr=or.filter(function(Nn){return!(Nn!=null&&Nn.target)&&Nn.type!=="boolean"}).map(function(Nn){var lr;return{value:Nn==null?void 0:Nn.name,label:gn(Nn==null||(lr=Nn.uiSchema)===null||lr===void 0?void 0:lr.title)||(Nn==null?void 0:Nn.name)}}),nr="editable";return mt["x-disabled"]===!0&&(nr="readonly"),mt["x-read-pretty"]===!0&&(nr="read-pretty"),(0,t.jsxs)(Xo.aN,{children:[(0,t.jsx)(gs.Mj,{required:!1}),pt&&!(pt!=null&&pt.readPretty)&&Qn&&(0,t.jsx)(Lt.j0,{title:yt("Set validation rules"),components:{ArrayCollapse:f.ArrayCollapse,FormLayout:f.FormLayout},schema:{type:"object",title:yt("Set validation rules"),properties:{rules:{type:"array",default:mt==null?void 0:mt["x-validator"],"x-component":"ArrayCollapse","x-decorator":"FormItem","x-component-props":{accordion:!0},maxItems:3,items:{type:"object","x-component":"ArrayCollapse.CollapsePanel","x-component-props":{header:'{{ t("Validation rule") }}'},properties:{index:{type:"void","x-component":"ArrayCollapse.Index"},layout:{type:"void","x-component":"FormLayout","x-component-props":{labelStyle:{marginTop:"6px"},labelCol:8,wrapperCol:16},properties:o()(o()({},Qn),{},{message:{type:"string",title:'{{ t("Error message") }}',"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{autoSize:{minRows:2,maxRows:2}}}})},remove:{type:"void","x-component":"ArrayCollapse.Remove"},moveUp:{type:"void","x-component":"ArrayCollapse.MoveUp"},moveDown:{type:"void","x-component":"ArrayCollapse.MoveDown"}}},properties:{add:{type:"void",title:'{{ t("Add validation rule") }}',"x-component":"ArrayCollapse.Addition","x-reactions":{dependencies:["rules"],fulfill:{state:{disabled:"{{$deps[0].length >= 3}}"}}}}}}}},onSubmit:function(lr){var Dn,qt=[],kn=mr()(lr.rules),cr;try{for(kn.s();!(cr=kn.n()).done;){var ar=cr.value;qt.push(Tt().pickBy(ar,Tt().identity))}}catch(yr){kn.e(yr)}finally{kn.f()}var vr=Je()({},"x-uid",mt["x-uid"]);if(["percent"].includes(Kt==null?void 0:Kt.interface)){var hr=mr()(qt),pr;try{for(hr.s();!(pr=hr.n()).done;){var Mr=pr.value;(Mr.maxValue||Mr.minValue)&&(Mr.percentMode=!0),Mr.percentFormat&&(Mr.percentFormats=!0)}}catch(yr){hr.e(yr)}finally{hr.f()}}var $r=Tt().concat([],(Kt==null||(Dn=Kt.uiSchema)===null||Dn===void 0?void 0:Dn["x-validator"])||[],qt);ft.validator=$r,mt["x-validator"]=qt,vr["x-validator"]=qt,yn.emit("patch",{schema:vr}),In()}}),pt&&!(pt!=null&&pt.readPretty)&&(Kt==null||(he=Kt.uiSchema)===null||he===void 0?void 0:he.type)&&(0,t.jsx)(Lt.j0,{title:yt("Set default value"),components:{ArrayCollapse:f.ArrayCollapse,FormLayout:f.FormLayout},schema:{type:"object",title:yt("Set default value"),properties:{default:o()(o()({},Tt().omit(Kt==null?void 0:Kt.uiSchema,"required")),{},{name:"default",title:yt("Default value"),"x-decorator":"FormItem",default:mt.default||(Kt==null?void 0:Kt.defaultValue)})}},onSubmit:function(lr){var Dn=Je()({},"x-uid",mt["x-uid"]);ft.value!==lr.default&&(ft.value=lr.default),mt.default=lr.default,Dn.default=lr.default,yn.emit("patch",{schema:Dn}),In()}}),(0,t.jsx)(pn.H,{collectionName:Kt==null?void 0:Kt.target,defaultFilter:((ye=ft.componentProps)===null||ye===void 0||(ye=ye.service)===null||ye===void 0||(ye=ye.params)===null||ye===void 0?void 0:ye.filter)||{},form:pt,onSubmit:function(lr){var Dn,qt=lr.filter;qt=(0,un.Wm)(qt),Tt().set(ft.componentProps,"service.params.filter",qt),mt["x-component-props"]=ft.componentProps,yn.emit("patch",{schema:(Dn={},Je()(Dn,"x-uid",mt["x-uid"]),Je()(Dn,"x-component-props",ft.componentProps),Dn)})}}),(0,t.jsx)(Lt.j0,{title:yt("Set default sorting rules"),components:{ArrayItems:f.ArrayItems},schema:{type:"object",title:yt("Set default sorting rules"),properties:{sort:{type:"array",default:qn,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:Gn,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:yt("ASC"),value:"asc"},{label:yt("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:yt("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function(lr){var Dn,qt=lr.sort,kn=qt.map(function(cr){return cr.direction==="desc"?"-".concat(cr.field):cr.field});Tt().set(ft.componentProps,"service.params.sort",kn),mt["x-component-props"]=ft.componentProps,yn.emit("patch",{schema:(Dn={},Je()(Dn,"x-uid",mt["x-uid"]),Je()(Dn,"x-component-props",ft.componentProps),Dn)})}}),(Kt==null?void 0:Kt.target)&&["CollectionField","AssociationSelect"].includes(mt["x-component"])&&(0,t.jsx)(Lt.Qf,{title:yt("Title field"),options:xr,value:ft==null||(Me=ft.componentProps)===null||Me===void 0||(Me=Me.fieldNames)===null||Me===void 0?void 0:Me.label,onChange:function(lr){var Dn,qt=Je()({},"x-uid",mt["x-uid"]),kn=o()(o()(o()({},Kt==null||(Dn=Kt.uiSchema)===null||Dn===void 0||(Dn=Dn["x-component-props"])===null||Dn===void 0?void 0:Dn.fieldNames),ft.componentProps.fieldNames),{},{label:lr});ft.componentProps.fieldNames=kn,mt["x-component-props"]=mt["x-component-props"]||{},mt["x-component-props"].fieldNames=kn,qt["x-component-props"]=mt["x-component-props"],yn.emit("patch",{schema:qt}),yn.refresh()}},"title-field"),Kt&&(0,t.jsx)(Lt.Z5,{}),(0,t.jsx)(Lt.qx,{removeParentsIfNoChildren:!0,confirm:{title:yt("Delete field")},breakRemoveOn:{"x-component":"Grid"}},"remove")]})};var wv=null,sd=e(49288),Ps=(0,Se.t)((0,m.connect)(sd.Z,(0,m.mapProps)({dataSource:"options"}),(0,m.mapReadPretty)(ro.iV.Input))),ma=e(33621),ys=e(18243),ud=new yi.F({name:"blockDeleteSettings",items:[{name:"remove",type:"remove",componentProps:{removeParentsIfNoChildren:!0,breakRemoveOn:function(W){return W["x-component"]==="Grid"}}}]}),cd=function(W){return(0,t.jsxs)(ys.P,{children:[(0,t.jsx)(Xo.Mf,{settings:ud,draggable:!1}),(0,t.jsx)(mo.H,o()({},W))]})},dd=function(W){var de=W.children;return(0,t.jsx)(Rr.SV,{FallbackComponent:cd,onError:console.error,children:de})},md=(0,c.l6)("nb-card-item",function(te){var W=te.componentCls;return Je()({},W,{marginBottom:te.marginBlock})}),vd=md,pd=["children","name","heightMode"],Ss=function(W){var de=W.children,ve=W.name,he=W.heightMode,ye=b()(W,pd),Me=(0,O.zy)(),Ue=(0,m.useFieldSchema)(),ke=Ue==null?void 0:Ue["x-template-key"],Ye=vd(),Qe=Ye.wrapSSR,et=Ye.componentCls,gt=Ye.hashId;return ke&&!Me?null:Qe((0,t.jsx)(dd,{children:(0,t.jsx)(ma.jY,{name:ve,className:"".concat(et," ").concat(gt," noco-card-item"),children:(0,t.jsx)(ys.P,o()(o()({},ye),{},{children:W.children}))})}))},bs=e(38089),Es={label:"label",value:"value",children:"children"},fd=function(W){var de=W.fieldNames,ve=de===void 0?Es:de,he=(0,ge.toArr)(W.value),ye=he.length,Me=(0,m.useField)(),Ue=Me.dataSource,ke=[],Ye=mr()(he),Qe;try{var et=function(){var we=Qe.value;if(mn()(we)==="object")ke.push(we);else{var pt,ft=(pt=Ue)===null||pt===void 0?void 0:pt.find(function(mt){return mt[ve.value]===we});Ue=(ft==null?void 0:ft[ve.children])||[],ke.push(ft||{label:we,value:we})}};for(Ye.s();!(Qe=Ye.n()).done;)et()}catch(gt){Ye.e(gt)}finally{Ye.f()}return(0,t.jsx)("div",{children:ke.map(function(gt,we){return(0,t.jsxs)("span",{children:[mn()(gt)==="object"?gt[ve.label]:gt,ye>we+1&&" / "]},we)})})},hd=["value","onChange","labelInValue","options","useDataSource","useLoadData","changeOnSelectLast","changeOnSelect","maxLevel"],gd=function(W,de){var ve=(0,m.useField)();return(0,d.QT)(function(){return Promise.resolve({data:ve.dataSource||de.options||[]})},o()(o()({},W),{},{refreshDeps:[ve.dataSource,de.options]}))},_d=function(W){return W==null?void 0:W.loadData},Ds=(0,Se.t)((0,m.connect)(function(te){var W=(0,m.useField)(),de=te.value,ve=te.onChange,he=te.labelInValue,ye=te.options,Me=te.useDataSource,Ue=Me===void 0?gd:Me,ke=te.useLoadData,Ye=ke===void 0?_d:ke,Qe=te.changeOnSelectLast,et=te.changeOnSelect,gt=te.maxLevel,we=b()(te,hd),pt=o()(o()({},Es),te.fieldNames),ft=(0,St.isFunction)(Ye)?Ye(te):[],mt=(0,St.isFunction)(Ye)?Ue({onSuccess:function(Kt){W.dataSource=(Kt==null?void 0:Kt.data)||[]}},te):{},At=mt.loading,yt=mt.run,on=function(){return(0,ge.toArr)(de).map(function(Kt){return mn()(Kt)==="object"?Kt[pt.value]:Kt})},yn=function(Kt,tn){return(0,t.jsx)(We.Z,{split:"/",children:Kt.map(function(Qn,sr){if(tn[sr])return(0,t.jsx)("span",{children:Qn},sr);var or=(0,ge.toArr)(de).filter(Boolean).find(function(Un){return Un[pt.value]===Qn});return(0,t.jsx)("span",{children:(or==null?void 0:or[pt.label])||Qn},sr)})})},In=function(Kt){var tn;Kt&&!((tn=W.dataSource)!==null&&tn!==void 0&&tn.length)&&(yt==null||yt())};return(0,t.jsx)(bs.Z,o()(o()({loading:At},we),{},{options:W.dataSource,loadData:ft,changeOnSelect:(0,St.isBoolean)(Qe)?!Qe:et,value:on(),fieldNames:pt,displayRender:yn,onDropdownVisibleChange:In,onChange:function(Kt,tn){ve(Kt&&he?tn.map(function(Qn){return(0,St.omit)(Qn,[pt.children])})||null:Kt||null)}}))},(0,m.mapProps)({dataSource:"options"},function(te,W){return o()(o()({},te),{},{suffixIcon:W!=null&&W.loading||W!=null&&W.validating?(0,t.jsx)(vn.Z,{}):te.suffixIcon})}),(0,m.mapReadPretty)(fd)),{displayName:"Cascader"}),qv=null,Cd=e(18299),dl=e(84567),xd=e(44908),Pd=e.n(xd),Ms=function(W){return W.value?(0,t.jsx)(Cd.Z,{style:{color:"#52c41a"}}):W.showUnchecked?(0,t.jsx)(Rn.Z,{style:{color:"#ff4d4f"}}):(0,t.jsx)(dl.Z,{disabled:!0})},ya=(0,m.connect)(function(te){var W=function(ve){te==null||te.onChange(ve)};return(0,t.jsx)(dl.Z,o()(o()({},te),{},{onChange:W}))},(0,m.mapProps)({value:"checked",onInput:"onChange"}),(0,m.mapReadPretty)(Ms));ya.displayName="Checkbox",ya.ReadPretty=Ms,ya.ReadPretty.displayName="Checkbox.ReadPretty",ya.__ANT_CHECKBOX=!0,ya.Group=(0,m.connect)(dl.Z.Group,(0,m.mapProps)({dataSource:"options"}),(0,m.mapReadPretty)(function(te){if(!(0,ge.isValid)(te.value))return null;var W=(0,a.useState)([]),de=Re()(W,2),ve=de[0],he=de[1],ye=(0,a.useState)(!0),Me=Re()(ye,2),Ue=Me[0],ke=Me[1],Ye=(0,m.useField)(),Qe=(0,Jn.Hy)();return(0,a.useEffect)(function(){var et=Ye.dataSource||(Qe==null?void 0:Qe.uiSchema.enum)||[],gt=Pd()(Ye.value?Ye.value:[]),we=et.filter(function(ft){return gt.includes(ft.value)}),pt=we.map(function(ft,mt){return(0,t.jsx)(an.Z,{color:ft.color,icon:ft.icon,children:ft.label},mt)});he(pt),ke(!1)},[Ye.value]),Ue?null:(0,t.jsx)(Zn.B,{ellipsis:te.ellipsis,children:ve})})),ya.Group.displayName="Checkbox.Group";var ep=null,Is=e(29796),yd=e(13794),Sd=["filter"],bd=["filter"],Ed=["value","onChange","dataSourceFilter","collectionFilter"],Dd=["value","onChange","dataSourceFilter","collectionFilter"];function As(te){var W,de=te.filter,ve=te.isTableOid,he=(0,Et.eJ)(),ye=(0,m.useField)(),Me=(0,a.useContext)(yd.fo),Ue=(0,Is.UJ)(),ke=ve&&((Me==null||(W=Me.field)===null||W===void 0?void 0:W.collectionName)||(Me==null?void 0:Me.collectionName)||Ue.name),Ye=(0,$e.useSelfAndChildrenCollections)(ke),Qe=(0,Is.Bu)(),et=Qe.collections,gt=et===void 0?[]:et,we=ye!=null&&ye.dataSource?gt.filter(function(ft){return(ye==null?void 0:ye.dataSource.find(function(mt){return mt.value===ft.name}))||(ye==null?void 0:ye.dataSource.includes(ft.name))}):gt,pt=typeof de=="function"?(Ye||we).filter(de):Ye||we;return(0,a.useMemo)(function(){return pt.filter(function(ft){return!ft.hidden}).map(function(ft){var mt;return{label:he(ft.title||ft.label),value:ft.name||ft.value,color:(mt=ft.category)===null||mt===void 0?void 0:mt.color}})},[pt])}var Os=(0,m.connect)(function(te){var W=te.filter,de=b()(te,Sd),ve=As(te),he=(0,lt.$)(),ye=he.t,Me=(0,a.useCallback)(function(Ue,ke){var Ye,Qe;return((Ye=ke==null?void 0:ke.label.toLowerCase())!==null&&Ye!==void 0?Ye:"").includes(Ue.toLocaleLowerCase())||((Qe=ke==null?void 0:ke.value.toString().toLowerCase())!==null&&Qe!==void 0?Qe:"").includes(Ue.toLocaleLowerCase())},[]);return(0,t.jsx)(tt.default,o()(o()({role:"button","data-testid":"select-collection",placeholder:ye("Select collection"),popupMatchSelectWidth:!1},de),{},{showSearch:!0,filterOption:Me,options:ve}))},(0,m.mapReadPretty)((0,m.observer)(function(te){var W=te.mode,de=(0,Et.eJ)(),ve=As(te).filter(function(he){if(W==="multiple"){var ye;return((ye=te.value)!==null&&ye!==void 0?ye:[]).includes(he.value)}return te.value===he.value});return(0,t.jsx)("div",{children:ve.map(function(he){return(0,t.jsx)(an.Z,{color:he.color,children:de(he.label)},he.value)})})},{displayName:"CollectionSelectObserver"})));function Md(te){var W=te.filter,de=(0,Et.eJ)(),ve=(0,ce.fp)(),he=ve.getDataSources();return(0,a.useMemo)(function(){return(typeof W=="function"?he.filter(W):he).map(function(ye){return{label:de(ye.displayName),value:ye.key}})},[he,W])}var Ts=(0,m.connect)(function(te){var W=te.filter,de=b()(te,bd),ve=Md(te),he=(0,lt.$)(),ye=he.t,Me=(0,a.useCallback)(function(Ue,ke){var Ye,Qe;return((Ye=ke==null?void 0:ke.label.toLowerCase())!==null&&Ye!==void 0?Ye:"").includes(Ue.toLocaleLowerCase())||((Qe=ke==null?void 0:ke.value.toString().toLowerCase())!==null&&Qe!==void 0?Qe:"").includes(Ue.toLocaleLowerCase())},[]);return(0,t.jsx)(tt.default,o()(o()({role:"button","data-testid":"select-datasource",placeholder:ye("Select data source"),popupMatchSelectWidth:!1},de),{},{showSearch:!0,filterOption:Me,options:ve}))}),Id=(0,m.observer)(function(te){var W=(0,ce.fp)(),de=(0,Et.eJ)(),ve=te.value,he=te.onChange,ye=te.dataSourceFilter,Me=te.collectionFilter,Ue=b()(te,Ed),ke=(0,u.parseCollectionName)(ve),Ye=Re()(ke,2),Qe=Ye[0],et=Ye[1],gt=[Qe,et].filter(Boolean),we=W.getDataSources(),pt=(0,a.useMemo)(function(){return(ye?we.filter(ye):we).map(function(At){return{label:de(At.displayName),value:At.key,children:At.collectionManager.collectionInstancesArr.filter(Me??function(yt){return!yt.hidden}).map(function(yt){return{label:de(yt.title),value:yt.name}})}})},[we,ye,Me]),ft=function(yt,on){var yn=[],In=on;return yt.forEach(function(gn){var Kt=In.find(function(tn){return tn.value===gn});Kt&&(yn.push(Kt.label),Kt.children?In=Kt.children:In=[])}),yn},mt=ft(gt,pt);return(0,t.jsx)("div",{children:(0,t.jsx)(an.Z,{children:mt.join(" / ")})})}),Fs=(0,m.connect)(function(te){var W=(0,ce.fp)(),de=(0,Et.eJ)(),ve=te.value,he=te.onChange,ye=te.dataSourceFilter,Me=te.collectionFilter,Ue=b()(te,Dd),ke=(0,u.parseCollectionName)(ve),Ye=Re()(ke,2),Qe=Ye[0],et=Ye[1],gt=[Qe,et].filter(Boolean),we=W.getDataSources(),pt=(0,a.useMemo)(function(){return(ye?we.filter(ye):we).map(function(mt){return{label:de(mt.displayName),value:mt.key,children:mt.collectionManager.collectionInstancesArr.filter(Me??function(At){return!At.hidden}).map(function(At){return{label:de(At.title),value:At.name}})}})},[we,ye,Me]),ft=(0,a.useCallback)(function(mt){if(!mt)return he(mt);he(mt[0]==="main"?mt[1]:mt.join(":"))},[he]);return(0,t.jsx)(bs.Z,o()(o()({showSearch:!0},Ue),{},{options:pt,value:gt,onChange:ft}))},(0,m.mapReadPretty)(Id)),ml=e(65078),Rs=e(33960),js,Ad=["value","onChange"],Bs=(0,m.connect)(function(te){var W=te.value,de=te.onChange,ve=b()(te,Ad);return(0,t.jsx)("div",{role:"button","aria-label":"color-picker-normal",style:{display:"inline-block"},children:(0,t.jsx)(Rs.Z,o()(o()({value:W,trigger:"hover"},ve),{},{destroyTooltipOnHide:!0,presets:[{label:'{{t("Recommended", { ns: "${NAMESPACE}" })}}',colors:["#8BBB11","#52C41A","#13A8A8","#1677FF","#F5222D","#FADB14","#FA8C164D","#FADB144D","#52C41A4D","#1677FF4D","#2F54EB4D","#722ED14D","#EB2F964D"]}],onChange:function(ye){return de(ye.toHexString())}}))})},(0,m.mapProps)(function(te,W){return o()({},te)}),(0,m.mapReadPretty)(function(te){var W=(0,ml.F)("description-color-picker",te);return(0,t.jsx)("div",{role:"button","aria-label":"color-picker-read-pretty",className:_r()(W,(0,ue.css)(js||(js=ee()([`
            display: inline-flex;
            .ant-color-picker-trigger-disabled {
              cursor: default;
            }
          `]))),te.className),children:(0,t.jsx)(Rs.Z,o()({disabled:!0,value:te.value,size:"small"},te))})})),tp=null,Ls=e(96365),Od=["colors"],Us={red:'{{t("Red")}}',magenta:'{{t("Magenta")}}',volcano:'{{t("Volcano")}}',orange:'{{t("Orange")}}',gold:'{{t("Gold")}}',lime:'{{t("Lime")}}',green:'{{t("Green")}}',cyan:'{{t("Cyan")}}',blue:'{{t("Blue")}}',geekblue:'{{t("Geek blue")}}',purple:'{{t("Purple")}}',default:'{{t("Default")}}'},zs=(0,m.connect)(function(te){var W=(0,Ls.e)(),de=te.colors,ve=de===void 0?Us:de,he=b()(te,Od);return(0,t.jsx)(tt.default,o()(o()({},he),{},{children:Object.keys(ve).map(function(ye){return(0,t.jsx)(tt.default.Option,{value:ye,children:(0,t.jsx)(an.Z,{color:ye,children:W(ve[ye]||ve.default)})},ye)})}))},(0,m.mapProps)(function(te,W){return o()(o()({},te),{},{suffix:(0,t.jsx)("span",{children:W!=null&&W.loading||W!=null&&W.validating?(0,t.jsx)(vn.Z,{}):te.suffix})})}),(0,m.mapReadPretty)(function(te){var W=(0,Ls.e)(),de=te.value,ve=te.colors,he=ve===void 0?Us:ve;return he[de]?(0,t.jsx)(an.Z,{color:de,children:W(he[de]||he.default)}):null})),np=null,Td=e(92458),Fd=e.n(Td),Rd=e(44897),rp=e(21567),Ks,jd=["onChange"],Bd=function(W){var de=W.onChange,ve=b()(W,jd);return(0,t.jsx)("fieldset",{className:(0,ue.css)(Ks||(Ks=ee()([`
        .react-js-cron {
          padding: 0.5em 0.5em 0 0.5em;
          border: 1px dashed #ccc;
          .react-js-cron-field {
            flex-shrink: 0;
            margin-bottom: 0.5em;

            > span {
              flex-shrink: 0;
              margin: 0 0.5em 0 0;
            }

            > .react-js-cron-select {
              margin: 0 0.5em 0 0;
            }
          }
        }
      `]))),children:(0,t.jsx)(Rd.Po,o()({setValue:de,locale:window.cronLocale},ve))})},Ws=function(W){var de=(0,d.LY)(),ve=de.auth.getLocale(),he=(0,a.useMemo)(function(){try{return Fd().toString(W.value,{locale:ve,use24HourTimeFormat:!0})}catch{return(0,Ze.error)("The '".concat(W.value,"' is not a valid cron expression")),W.value}},[W.value]);return W.value?(0,t.jsx)("span",{children:he}):null},ji=(0,m.connect)(Bd,(0,m.mapReadPretty)(Ws));ji.ReadPretty=Ws;var Ns=ji,Ld=function(W){var de,ve=W.onChange,he=W.value,ye=(0,u.useCollection_deprecated)(),Me=ye.getField,Ue=(0,m.useFieldSchema)(),ke=(de=Me(Ue==null?void 0:Ue.name))===null||de===void 0?void 0:de.uiSchema.enum,Ye=(0,Et.eJ)(),Qe=(0,a.useState)({label:"{{t('Custom')}}",value:"@daily"}),et=Re()(Qe,2),gt=et[0],we=et[1],pt=(0,a.useMemo)(function(){return(W.options||[]).concat(ke||[]).concat([gt]).map(function(At){return o()(o()({},At),{},{label:Ye(At.label)})})},[W.options,gt]);(0,a.useEffect)(function(){if(!(typeof he>"u"||he===null)){var At=pt.find(function(yt){return yt.value===he});At||we(o()(o()({},gt),{},{value:he}))}},[pt,he]);var ft=(0,a.useMemo)(function(){return he===gt.value},[he,gt]),mt=function(yt){var on=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;on&&we(o()(o()({},gt),{},{value:yt})),ve(yt)};return(0,t.jsxs)("fieldset",{children:[(0,t.jsx)(tt.default,o()(o()({popupMatchSelectWidth:!1,allowClear:!0},W),{},{value:he,options:pt,onChange:function(yt){return mt(yt)}})),ft?(0,t.jsx)(Ns,{value:he,onChange:function(yt){return mt(yt,!0)},allowedDropdowns:["period","week-days","months","month-days"],allowedPeriods:["year","month","week","day"]}):null]})},Ud=function(W){var de,ve=W.value,he=(0,Et.eJ)(),ye=(0,m.useFieldSchema)(),Me=(0,it.Kx)(),Ue=Me==null||(de=Me.getField(ye==null?void 0:ye.name))===null||de===void 0?void 0:de.uiSchema.enum,ke=(0,a.useMemo)(function(){return(W.options||[]).concat(Ue||[])},[W.options]),Ye=(0,a.useMemo)(function(){var Qe;return ve&&(ke==null||(Qe=ke.find(function(et){return et.value===ve}))===null||Qe===void 0?void 0:Qe.label)},[ke,ve]);return(0,t.jsx)(ro.BQ,{ellipsis:!0,children:ve&&(Ye?he(Ye):(0,t.jsx)(Ns.ReadPretty,o()({},W)))})},$s=(0,m.connect)(Ld,(0,m.mapReadPretty)(Ud)),Sa=e(68435),Go=e(61341),Vs=(0,Se.t)((0,se.C)(function(te){var W=(0,ce.xQ)(),de=(0,m.useFieldSchema)();return Tt().isEmpty(W==null?void 0:W.data)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(An.Z,{image:An.Z.PRESENTED_IMAGE_SIMPLE}),(0,t.jsx)(l.sq,{schema:de.properties.pagination,name:"pagination"})]}):(0,t.jsx)("div",{className:"nb-details",children:(0,t.jsx)(rt,o()({},te))})}),{displayName:"NocoBaseDetails"}),ks=(0,m.connect)(function(te){var W=te.color,de=te.borderColor;return(0,t.jsx)(fn.Z,o()(o()({},te),{},{type:"horizontal",style:{color:W,borderColor:de},orientationMargin:"0"}))},(0,m.mapProps)(function(te){return o()({orientation:"left"},te)})),ap=null,zd=e(75531),Hs,Gs,Zs,Kd=(0,ue.css)(Hs||(Hs=ee()([`
  position: relative;
  &:hover {
    .general-schema-designer {
      display: block;
    }
  }
  .general-schema-designer {
    position: absolute;
    z-index: 999;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    display: none;
    background: var(--colorBgSettingsHover);
    border: 0;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    pointer-events: none;
    > .general-schema-designer-icons {
      position: absolute;
      right: 2px;
      top: 2px;
      line-height: 16px;
      pointer-events: all;
      .ant-space-item {
        background-color: var(--colorSettings);
        color: #fff;
        line-height: 16px;
        width: 16px;
        padding-left: 1px;
        align-self: stretch;
      }
    }
  }
`]))),Wd=function(W,de){var ve,he,ye=(0,m.useFieldSchema)(),Me=(0,Ae.CL)(),Ue=(0,Ae.Si)(),ke=((ve=ye.parent)===null||ve===void 0||(ve=ve.parent)===null||ve===void 0?void 0:ve["x-decorator"])==="TableSelectorProvider",Ye=ke?Me:Ue,Qe=ye["x-component-props"]||{},et=Qe.titleExpand,gt=Qe.titleCollapse,we=Qe.iconExpand,pt=Qe.iconCollapse,ft=(0,Et.eJ)(),mt=(0,a.createRef)(),At=(0,zd.sQ)(de,mt),yt=Ie.Z.useToken(),on=yt.token,yn=Ye!=null&&Ye.expandFlag?ft(gt):ft(et),In=Ye!=null&&Ye.expandFlag?pt:we;return(0,t.jsx)("div",{className:Kd,ref:At,children:(Ye==null?void 0:Ye.params.tree)&&(0,t.jsxs)(Kr.ZP,{onClick:function(){Ye==null||Ye.setExpandFlag()},icon:(0,t.jsx)(po.JO,{type:Ye!=null&&Ye.expandFlag?pt:we}),type:W.type,style:W==null?void 0:W.style,className:(0,ue.css)(Gs||(Gs=ee()([`
            .ant-btn-icon {
              margin-inline-end: 0px !important;
            }
          `]))),children:[(he=W.children)===null||he===void 0?void 0:he[1],yn&&(0,t.jsx)("span",{className:In?(0,ue.css)(Zs||(Zs=ee()([`
                      margin-inline-start: `,`px;
                    `])),on.controlPaddingHorizontalSM):null,children:yn})]})})},Ys=(0,a.forwardRef)(Wd),Nd=function(W){var de,ve,he=(0,lt.$)(),ye=he.t,Me=(0,m.useFieldSchema)(),Ue=(0,m.useField)(),ke=(0,Et.ng)(),Ye=ke.dn,Qe=Me["x-component-props"]||{},et=Qe.titleExpand,gt=Qe.titleCollapse,we=Qe.iconExpand,pt=Qe.iconCollapse;return(0,t.jsxs)(S.aN,o()(o()({},W),{},{disableInitializer:!0,children:[(0,t.jsx)(S.B0,{title:ye("Edit button"),schema:{type:"object",title:ye("Edit button"),properties:{titleExpand:{"x-decorator":"FormItem","x-component":"Input",title:"".concat(ye("Button title")," - ").concat(ye("Expand all")),default:et},titleCollapse:{"x-decorator":"FormItem","x-component":"Input",title:"".concat(ye("Button title")," - ").concat(ye("Collapse all")),default:gt},iconExpand:{"x-decorator":"FormItem","x-component":"IconPicker",title:"".concat(ye("Button icon")," - ").concat(ye("Expand all")),default:we},iconCollapse:{"x-decorator":"FormItem","x-component":"IconPicker",title:"".concat(ye("Button icon")," - ").concat(ye("Collapse all")),default:pt},type:{"x-decorator":"FormItem","x-component":"Radio.Group",title:ye("Button background color"),default:Me!=null&&(de=Me["x-component-props"])!==null&&de!==void 0&&de.danger?"danger":(Me==null||(ve=Me["x-component-props"])===null||ve===void 0?void 0:ve.type)==="primary"?"primary":"default",enum:[{value:"default",label:'{{t("Default")}}'},{value:"primary",label:'{{t("Highlight")}}'},{value:"danger",label:'{{t("Danger red")}}'}]}}},onSubmit:function(mt){var At=mt.titleExpand,yt=mt.titleCollapse,on=mt.iconExpand,yn=mt.iconCollapse,In=mt.type;Me.title=ye("Expand/Collapse"),Ue.title=ye("Expand/Collapse"),Ue.componentProps.icon=on,Ue.componentProps.danger=In==="danger",Ue.componentProps.type=In,Me["x-component-props"]=o()(o()({},Me["x-component-props"]||{}),{},{titleExpand:At,titleCollapse:yt,iconExpand:on,iconCollapse:yn,type:In,danger:In==="danger"}),Ye.emit("patch",{schema:{"x-uid":Me["x-uid"],"x-component-props":Me["x-component-props"],title:Me.title}}),Ye.refresh()}}),(0,t.jsx)(S.Z5,{}),(0,t.jsx)(S.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:function(mt){return mt["x-component"]==="Space"||mt["x-component"].endsWith("ActionBar")},confirm:{title:ye("Delete action")}})]}))},Bi=Ys;Bi.Action=Ys,Bi.Action.Design=Nd;var Li=e(74327),vl=e(36800),vo=e(59344),$d={validator:`{{(value, rule)=> {
    if (!value) {
      return '';
    }
    try {
      const val = JSON.parse(value);
      if(!isNaN(val)) {
        return false;
      }
      return true;
    } catch(error) {
      console.error(error);
      return false;
    }
  }}}`,message:'{{t("Invalid JSON format")}}'},Vd=function(){var W,de,ve,he=(0,lt.$)(),ye=he.t,Me=(0,Et.ng)(),Ue=Me.dn,ke=(0,m.useFieldSchema)(),Ye=(0,m.useField)(),Qe=(0,Et.eJ)(),et=(0,d.LY)();return(0,t.jsxs)(S.aN,{children:[(0,t.jsx)(S.B0,{title:ye("Edit chart"),schema:{type:"object",title:ye("Edit chart"),properties:{title:{title:ye("Chart title"),type:"string",default:ke.title,"x-decorator":"FormItem","x-component":"Input"},plot:{title:ye("Chart type"),type:"string",default:ke==null||(W=ke["x-component-props"])===null||W===void 0?void 0:W.plot,"x-decorator":"FormItem","x-component":"Input","x-disabled":!!(ke!=null&&(de=ke["x-component-props"])!==null&&de!==void 0&&de.plot)},config:{title:ye("Chart config"),type:"string",default:JSON.stringify(ke==null||(ve=ke["x-component-props"])===null||ve===void 0?void 0:ve.config,null,2),"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{autoSize:{minRows:8,maxRows:16}},"x-validator":$d}}},onSubmit:function(){var gt=A()(g()().mark(function we(pt){var ft,mt,At,yt,on,yn;return g()().wrap(function(gn){for(;;)switch(gn.prev=gn.next){case 0:ft=pt.plot,mt=pt.title,At=pt.config,Ye.title=Qe(mt),Ye.componentProps.plot=ft,yt=Qe(JSON.parse(At)),on=yt==null?void 0:yt.data,typeof on=="function"?(yn=on.bind({api:et})(),yn!=null&&yn.then&&yn.then(function(Kt){Array.isArray(Kt)&&(Ye.componentProps.config.data=Kt)}).catch(console.error)):Ye.componentProps.config=yt,Tt().set(ke,"title",mt),Tt().set(ke,"x-component-props.plot",ft),Tt().set(ke,"x-component-props.config",JSON.parse(At)),Ue.emit("patch",{schema:{title:mt,"x-uid":ke["x-uid"],"x-component-props":ke["x-component-props"]}}),Ue.refresh();case 11:case"end":return gn.stop()}},we)}));return function(we){return gt.apply(this,arguments)}}()}),(0,t.jsx)(S.Z5,{}),(0,t.jsx)(S.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}})]})},Qs={Line:vo.x1,Area:vo.uN,Column:vo.sg,Bar:vo.$Q,Pie:vo.by,Rose:vo.he,WordCloud:vo.kB,Scatter:vo.bp,Radar:vo.Fk,DualAxes:vo.VT,TinyLine:vo.tn,TinyColumn:vo.cQ,TinyArea:vo.m,Histogram:vo.b5,Progress:vo.Ex,RingProgress:vo.TZ,Heatmap:vo.Xd,Box:vo.xu,Violin:vo.BS,Venn:vo.J,Stock:vo.Wd,Funnel:vo.oe,Liquid:vo.Kj,Bullet:vo.gT,Sunburst:vo.qu,Gauge:vo.aC,Waterfall:vo.p3,RadialBar:vo.Gm,BidirectionalBar:vo.hF,Treemap:vo.WB,Sankey:vo.bQ,Chord:vo.VC,CirclePacking:vo.wp,Mix:vo.V2,Facet:vo.r$},Ui=(0,a.forwardRef)(function(te,W){var de=te.className,ve=te.plot,he=te.config,ye=(0,a.useRef)(void 0),Me=(0,a.useRef)(void 0);function Ue(Qe,et){typeof et=="function"?et(Qe.current):et&&(et.current=Qe.current)}function ke(){if(Me.current)Me.current.update(he);else{var Qe;Me.current=new ve(ye.current,he),Me==null||(Qe=Me.current)===null||Qe===void 0||Qe.render()}Ue(Me,W)}function Ye(){Me.current&&(Me.current.destroy(),Me.current=void 0)}return(0,a.useEffect)(function(){return ke(),function(){return Ye()}},[he,ve]),(0,t.jsx)("div",{className:_r()(["g2plot",de]),ref:ye})});Ui.displayName="G2PlotRenderer";var zi=(0,m.observer)(function(te){var W,de=te.plot,ve=te.config,he=(0,m.useField)(),ye=(0,lt.$)(),Me=ye.t,Ue=(0,d.LY)();return(0,a.useEffect)(function(){he.data=he.data||{},he.data.loading=!0;var ke=ve==null?void 0:ve.data;if(typeof ke=="function"){var Ye=ke.bind({api:Ue})();Ye!=null&&Ye.then?Ye.then(function(Qe){Array.isArray(Qe)&&(he.componentProps.config.data=Qe),he.data.loading=!1}).catch(console.error):he.data.loading=!1}else he.data.loading=!1},[]),!de||!ve?(0,t.jsxs)("div",{style:{opacity:.3},children:[Me("In configuration"),"..."]}):(he==null||(W=he.data)===null||W===void 0?void 0:W.loading)!==!1?(0,t.jsx)(I.Z,{}):(0,t.jsxs)("div",{children:[he.title&&(0,t.jsx)("h2",{children:he.title}),(0,t.jsx)(Ui,{plot:Qs[de],config:o()(o()({},ve),{},{data:Array.isArray(ve==null?void 0:ve.data)?ve.data:[]})})]})},{displayName:"G2Plot"});zi.Designer=Vd,zi.plots=Qs;var Js=(0,m.observer)(function(te){var W=(0,m.useFieldSchema)();return(0,t.jsxs)("div",{style:{marginBottom:20,padding:"0 20px",height:50,lineHeight:"50px",background:"#f1f1f1"},children:["Block ",W.title,(0,t.jsx)(E.DragHandler,{})]})},{displayName:"Block"}),ba=e(31732),Xs=e(2487),kd=e(15746),Ki=e(75148),Hd=e(20046),Gd=(0,c.l6)("nb-grid-card",function(te){var W=te.componentCls;return Je()({},W,{".nb-action-bar":{borderRadius:te.borderRadiusBlock,marginBottom:"".concat(te.marginBlock/2,"px !important")},".ant-list-pagination":{borderRadius:te.borderRadiusBlock,marginTop:"".concat(te.marginBlock/2,"px !important")},"& > .nb-block-item":{marginBottom:te.marginLG,"& > .nb-action-bar:has(:first-child:not(:empty))":{padding:te.marginLG,background:te.colorBgContainer},".ant-list-pagination":{padding:te.marginLG,background:te.colorBgContainer}},".ant-formily-item-feedback-layout-loose":{marginBottom:5},".ant-formily-item-feedback-layout-loose .ant-formily-item-label":{marginBottom:-8}})}),Zd=Gd,pl=(0,a.createContext)({});pl.displayName="GridCardBlockContext";var Yd=function(W){var de,ve=(0,Ki.BU)(),he=ve.resource,ye=ve.service,Me=(0,m.useField)(),Ue=Zd(),ke=Ue.wrapSSR,Ye=Ue.componentCls,Qe=Ue.hashId,et=(0,a.useMemo)(function(){return(0,x.createForm)({readPretty:!0})},[]);return(0,a.useEffect)(function(){if(!(ye!=null&&ye.loading)){var gt,we;(gt=et.fields[Me.address.concat("list").toString()])===null||gt===void 0||gt.setValue(ye==null||(we=ye.data)===null||we===void 0?void 0:we.data)}},[Me.address,et,ye==null||(de=ye.data)===null||de===void 0?void 0:de.data,ye==null?void 0:ye.loading]),ke((0,t.jsx)(pl.Provider,{value:{service:ye,resource:he,columnCount:W.columnCount},children:(0,t.jsx)(m.FormContext.Provider,{value:et,children:(0,t.jsx)(f.FormLayout,{layout:"vertical",children:(0,t.jsx)("div",{className:"".concat(Ye," ").concat(Qe),children:W.children})})})}))},Qd=function(W){var de=(0,m.useFieldSchema)();return de["x-use-decorator-props"]?{params:W.params,parseVariableLoading:W.parseVariableLoading}:(0,Hd.s)(W)},Jd=(0,Se.t)(function(te){var W=Qd(te),de=W.params,ve=W.parseVariableLoading;return ve?null:(0,t.jsx)(Ki.ZJ,o()(o()({name:"grid-card"},te),{},{params:de,children:(0,t.jsx)(Yd,o()({},te))}))}),ws=function(){return(0,a.useContext)(pl)},Xd=function(){return{}},wd=e(21305),qs,eu,qd=(0,ue.css)(qs||(qs=ee()([`
  display: flex;
  width: 100%;
  height: 100%;
  flex-direction: column;
  justify-content: space-between;
  gap: 0px;
`]))),em=(0,ue.css)(eu||(eu=ee()([`
  height: 100%;
  > .ant-card-body {
    height: 100%;
  }
  .nb-action-bar {
    padding-top: 5px;
  }
`]))),tm=(0,Se.t)(function(te){var W=(0,m.useField)(),de=(0,di.Kv)();return(0,t.jsx)(il.Z,{bordered:!1,role:"button","aria-label":"grid-card-item",className:em,children:(0,t.jsx)("div",{className:qd,children:(0,t.jsx)(bn.HV,{record:W.value,parent:de,children:te.children})})})},{displayName:"GridCardItem"}),nm={size:["large","small"],wrap:!0},rm=function(){return{spaceProps:nm}},om=function(){var W,de=Ie.Z.useToken(),ve=de.token,he=(0,Et.ng)(),ye=he.designable,Me=(0,be.aZ)(),Ue=(0,m.useFieldSchema)(),ke=Object.keys(((W=Ue.parent.properties.actionBar)===null||W===void 0?void 0:W.properties)||{}).length>0,Ye=(0,ce.xQ)(),Qe=(Ye==null?void 0:Ye.meta)||{},et=Qe.count,gt=Qe.pageSize,we=et>gt;if(Me){var pt=ye||ke?ve.controlHeight+2*ve.paddingLG+ve.marginLG:0,ft=we?ve.controlHeight+2*ve.paddingLG+ve.marginLG:0;return Me-pt-ft}},Wi=e(43759),tu,nu,ru,ip={md:12,sm:5,xs:5},am=(0,ue.css)(tu||(tu=ee()([`
  width: 100%;
  &:hover {
    > .general-schema-designer {
      display: block;
    }
  }

  > .general-schema-designer {
    position: absolute;
    z-index: 999;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    display: none;
    background: var(--colorBgSettingsHover);
    border: 0;
    pointer-events: none;
    > .general-schema-designer-icons {
      position: absolute;
      right: 2px;
      top: 2px;
      line-height: 16px;
      pointer-events: all;
      .ant-space-item {
        background-color: var(--colorSettings);
        color: #fff;
        line-height: 16px;
        width: 16px;
        padding-left: 1px;
        align-self: stretch;
      }
    }
  }
`]))),im=function(){var W,de=(0,m.useField)(),ve=ws(),he=ve.service,ye=ve.columnCount,Me=ye===void 0?Wi.he:ye,Ue=he==null||(W=he.data)===null||W===void 0?void 0:W.meta,ke=Ue||{},Ye=ke.count,Qe=ke.pageSize,et=ke.page,gt=ke.hasNext;if(Ye)return{total:Ye||0,pageSize:Qe||10,current:et||1,pageSizeOptions:Wi.Wv,showSizeChanger:!0};var we;return{showTotal:!1,pageSizeOptions:Wi.Wv,simple:{readOnly:!0},pageSize:Qe||10,showTitle:!1,showSizeChanger:!0,hideOnSinglePage:!1,total:((we=de.value)===null||we===void 0?void 0:we.length)<Qe||!gt?Qe*et:Qe*et+1,className:(0,ue.css)(nu||(nu=ee()([`
        .ant-pagination-simple-pager {
          display: none !important;
        }
        li {
          line-height: 32px !important;
        }
      `])))}},lm=(0,se.C)(function(te){var W,de=(0,Et.wN)(te),ve=de.columnCount,he=de.pagination,ye=ws(),Me=ye.service,Ue=ye.columnCount,ke=Ue===void 0?Wi.he:Ue,Ye=ve||ke,Qe=Me.run,et=Me.params,gt=Me==null||(W=Me.data)===null||W===void 0?void 0:W.meta,we=(0,m.useFieldSchema)(),pt=(0,m.useField)(),ft=(0,Et.et)(),mt=om(),At=(0,a.useCallback)(function(xr){return new m.Schema({type:"object",properties:Je()({},xr,o()({},we.properties.item))})},[we.properties]),yt=(0,me.d)(),on=yt.token,yn=(0,a.useCallback)(function(xr,nr){Qe(o()(o()({},et==null?void 0:et[0]),{},{page:xr,pageSize:nr}))},[Qe,et]),In=o()(o()(o()({},im()),he),{},{onChange:yn}),gn=Ae.Gn===null||Ae.Gn===void 0?void 0:(0,Ae.Gn)(we),Kt=(gn==null?void 0:gn["x-component-props"])||{},tn=Kt.layout,Qn=tn===void 0?"vertical":tn,sr=Kt.labelAlign,or=sr===void 0?"left":sr,Un=Kt.labelWidth,Gn=Un===void 0?120:Un,Sn=Kt.labelWrap,qn=Sn===void 0?!0:Sn;return(0,t.jsx)($.G0,{scope:{useGridCardItemProps:Xd,useGridCardActionBarProps:rm},children:(0,t.jsxs)(E.SortableItem,{className:(0,ue.cx)("nb-card-list",am,(0,ue.css)(ru||(ru=ee()([`
              .ant-spin-nested-loading {
                height: `,`;
                overflow-y: `,`;
                overflow-x: clip;
                .nb-action-bar {
                  margin-top: 0px !important;
                }
              }
            `])),mt?mt+"px":"100%",mt?"auto":null)),children:[(0,t.jsx)(f.FormLayout,{layout:Qn,labelAlign:or,labelWidth:Qn==="horizontal"?Gn:null,labelWrap:qn,children:(0,t.jsx)(Xs.Z,{pagination:!gt||gt.count<=gt.pageSize?!1:o()({},In),dataSource:pt.value,grid:o()(o()({},Ye),{},{sm:Ye.xs,xl:Ye.lg,gutter:[on.marginBlock/2,on.marginBlock/2]}),renderItem:function(nr,Nn){return(0,t.jsx)(kd.Z,{style:{height:"100%"},className:"nb-card-item-warper",children:(0,t.jsx)(l.sq,{basePath:pt.address,name:Nn,onlyRenderProperties:!0,schema:At(Nn)},Nn)})},loading:Me==null?void 0:Me.loading})}),(0,t.jsx)(ft,{})]})})},{displayName:"InternalGridCard"}),vi=(0,Se.t)(lm);vi.Item=tm,vi.Designer=wd.z,vi.Decorator=Jd;var sm=e(86250),fl=e(55742),um=Za.Z.Search,cm=function(W){return(0,St.groupBy)(W,function(de){if(de.endsWith("outlined"))return"Outlined";if(de.endsWith("filled"))return"Filled";if(de.endsWith("twotone"))return"TwoTone"})};function dm(te){var W,de=Ie.Z.useToken().token.fontSizeXL,ve=Ft()(po.ci.keys()),he=(0,f.useFormLayout)(),ye=te.value,Me=te.onChange,Ue=te.disabled,ke=te.iconSize,Ye=ke===void 0?de:ke,Qe=te.searchable,et=Qe===void 0?!0:Qe,gt=(0,a.useState)(!1),we=Re()(gt,2),pt=we[0],ft=we[1],mt=(0,a.useState)(ve),At=Re()(mt,2),yt=At[0],on=At[1],yn=(0,a.useState)("Outlined"),In=Re()(yn,2),gn=In[0],Kt=In[1],tn=(0,lt.$)(),Qn=tn.t,sr=cm(ve),or=(W={width:"26em"},Je()(W,"".concat(et?"height":"maxHeight"),"20em"),Je()(W,"overflowY","auto"),W),Un=(0,St.debounce)(function(Sn){var qn,xr=(qn=Sn==null?void 0:Sn.trim())!==null&&qn!==void 0?qn:"";on(xr.length?ve.filter(function(nr){return nr.split(" ").some(function(Nn){return Nn.includes(xr)})}):ve)},250),Gn=function(){return(0,t.jsxs)(sm.Z,{vertical:!0,gap:"middle",children:[(0,t.jsx)(fl.ZP.Group,{options:[{label:Qn("Outlined"),value:"Outlined"},{label:Qn("Filled"),value:"Filled"},{label:Qn("Two tone"),value:"TwoTone"}],value:gn,optionType:"button",onChange:function(xr){Kt(xr.target.value)}}),(0,t.jsx)("div",{children:sr[gn].map(function(qn){if(yt.includes(qn))return(0,t.jsx)("span",{title:qn.replace(/outlined|filled|twotone$/i,""),style:{fontSize:Ye,marginRight:10,cursor:"pointer"},onClick:function(){Me(qn),ft(!1)},children:(0,t.jsx)(po.JO,{type:qn})},qn)})})]})};return(0,t.jsx)("div",{children:(0,t.jsxs)(We.Z.Compact,{children:[(0,t.jsx)(si.q,{placement:"bottom",open:pt,onOpenChange:function(qn){Ue||ft(qn)},content:(0,t.jsx)("div",{style:or,children:yt.length===0?(0,t.jsx)(An.Z,{image:An.Z.PRESENTED_IMAGE_SIMPLE}):(0,t.jsx)(Gn,{})}),title:(0,t.jsx)("div",{children:et&&(0,t.jsx)(um,{style:{marginTop:8},role:"search",name:"icon-search",placeholder:Qn("Search"),allowClear:!0,onSearch:Un,onChange:function(qn){var xr;return Un((xr=qn.target)===null||xr===void 0?void 0:xr.value)}})}),trigger:"click",children:(0,t.jsx)(Kr.ZP,{size:he.size,disabled:Ue,children:(0,po.OL)(ye)?(0,t.jsx)(po.JO,{type:ye}):Qn("Select icon")})}),ye&&!Ue&&(0,t.jsx)(Kr.ZP,{size:he.size,icon:(0,t.jsx)(Rn.Z,{}),onClick:function(qn){Me(null)}})]})})}var ou=(0,m.connect)(dm,(0,m.mapProps)(function(te,W){return o()(o()({},te),{},{suffix:(0,t.jsx)("span",{children:W!=null&&W.loading||W!=null&&W.validating?(0,t.jsx)(vn.Z,{}):te.suffix})})}),(0,m.mapReadPretty)(function(te){return(0,ge.isValid)(te.value)?(0,t.jsx)(po.JO,{type:te.value}):(0,t.jsx)("div",{})})),lp=null,au=e(91992),iu=e(70794),mm=e(19799),lu=e(6511);function su(te){var W=(0,St.toString)(te);if(!W.includes("."))return 0;var de=W.split(".")[1].replace(/0+$/,"");return de.length}var La={"0,0.00":{thousands:",",decimal:"."},"0.0,00":{thousands:".",decimal:","},"0 0,00":{thousands:" ",decimal:"."},"0 0 0,00":{thousands:" ",decimal:","},"0.00":{thousands:"",decimal:"."}};function vm(te){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0.00",de=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ve=arguments.length>3?arguments[3]:void 0;if(te>Number.MAX_SAFE_INTEGER||te<Number.MIN_SAFE_INTEGER)return pm(te,W,de,ve);var he=te;ve&&(he=Number(te));var ye="";if(La[W]){var Me=La[W],Ue=Me.thousands,ke=Me.decimal;ye=he.toLocaleString("en-US",{style:"decimal",minimumFractionDigits:de,maximumFractionDigits:de}).replace(/,/g,"comma_placeholder").replace(/\./g,"dot_placeholder").replace(/comma_placeholder/g,Ue).replace(/dot_placeholder/g,ke)}else ye=he.toString();return ye}function pm(te){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0.00",de=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ve=arguments.length>3?arguments[3]:void 0,he=te;ve&&(he=new iu.Z(te).toString());var ye="";if(La[W]){var Me=La[W],Ue=Me.thousands,ke=Me.decimal,Ye=he.toString().split("."),Qe=Re()(Ye,2),et=Qe[0],gt=Qe[1],we=gt,pt=et.replace(/\B(?=(\d{3})+(?!\d))/g,Ue);we&&de?(we=we.substring(0,de),ye="".concat(pt).concat(ke).concat(we)):ye=pt}else ye=he.toString();return ye}function fm(te){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*",de=arguments.length>2?arguments[2]:void 0;if(!de)return te;var ve;if(W==="*")ve=te*de;else if(W==="/")if(de!==0)ve=te/de;else return console.error("Error: Division by zero."),null;else return console.error("Error: Invalid operator. Use '*' for multiplication or '/' for division."),null;return lu.NMM(ve,9)}function hm(te,W){var de=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".",ve=(0,mm.WU)(".".concat(W,"e")),he=ve(te).replace(".",de),ye=he.replace(/e([+-]?\d+)/,function(Me,Ue){return Ue.startsWith("+")?"\xD710<sup>".concat(Ue.slice(1),"</sup>"):"\xD710<sup>-".concat(Ue.slice(1),"</sup>")});return ye}function gm(te){var W=te.step,de=te.formatStyle,ve=de===void 0?"normal":de,he=te.value,ye=te.unitConversion,Me=te.unitConversionType,Ue=te.separator,ke=Ue===void 0?"0,0.00":Ue;if(!(0,ge.isValid)(he))return null;var Ye=fm(he,Me,ye),Qe=(0,Ze.toFixedByStep)(Ye,W),et;if(et=vm(Qe,ke,su(W),ve),ve==="scientifix"){var gt;et=hm(Number(Ye),su(W),La==null||(gt=La[ke])===null||gt===void 0?void 0:gt.decimal)}return et}var hl=(0,_t.u)(function(te){var W=te.step,de=te.formatStyle,ve=te.value,he=te.addonBefore,ye=te.addonAfter,Me=te.unitConversion,Ue=te.unitConversionType,ke=te.separator,Ye=(0,a.useMemo)(function(){return gm({step:W,formatStyle:de,value:ve,unitConversion:Me,unitConversionType:Ue,separator:ke})},[W,de,ve,Me,Ue,ke]);return(0,ge.isValid)(Ye)?(0,t.jsxs)("div",{children:[he,(0,t.jsx)("span",{dangerouslySetInnerHTML:{__html:Ye}}),ye]}):null}),_m=["onChange"];function Cm(te){return te&&(te>Number.MAX_SAFE_INTEGER||te<Number.MIN_SAFE_INTEGER?new iu.Z(te).toString():Number(te))}var gl=(0,m.connect)(function(te){var W=te.onChange,de=b()(te,_m),ve=function(Me){Number.isNaN(Me)?W(null):W(Cm(Me))},he=o()({onChange:ve},de);return de.formatStyle&&(he=(0,St.omit)(he,["addonAfter","addonBefore"])),(0,t.jsx)(au.Z,o()(o()({},he),{},{parser:function(Me){if(!Me||Me==="")return null;var Ue=Me.toString().replace(/\s/g,"").replace(/(\d+),(\d{2})$/,"$1.$2").replace(/,/g,"");return parseFloat(Ue)}}))},(0,m.mapReadPretty)(hl));gl.ReadPretty=hl;var sp=null,xm=e(12929),uu,_l=(0,a.createContext)({});_l.displayName="ListBlockContext";var Pm=function(W){var de,ve=(0,Ki.BU)(),he=ve.resource,ye=ve.service,Me=(0,m.useField)(),Ue=(0,a.useMemo)(function(){return(0,x.createForm)({readPretty:!0})},[]);return(0,a.useEffect)(function(){ye!=null&&ye.loading||Ue.query(/\.list$/).forEach(function(ke){var Ye,Qe;(Ye=ke.setValue)===null||Ye===void 0||Ye.call(ke,ye==null||(Qe=ye.data)===null||Qe===void 0?void 0:Qe.data)})},[Me.address,Ue,ye==null||(de=ye.data)===null||de===void 0?void 0:de.data,ye==null?void 0:ye.loading]),(0,t.jsx)(_l.Provider,{value:{service:ye,resource:he},children:(0,t.jsx)(m.FormContext.Provider,{value:Ue,children:(0,t.jsx)(f.FormLayout,{layout:"vertical",children:(0,t.jsx)("div",{className:(0,ue.cx)((0,ue.css)(uu||(uu=ee()([`
              .ant-formily-item-feedback-layout-loose {
                margin-bottom: 12px;
              }
            `])))),children:W.children})})})})},ym=(0,Se.t)(function(te){var W=te.params,de=(0,xm.v)({filterOption:W==null?void 0:W.filter}),ve=de.filter,he=de.parseVariableLoading,ye=(0,a.useMemo)(function(){return o()(o()({},W),{},{filter:ve})},[ve,W]);return Tt().isEmpty(ve)&&!Tt().isEmpty(W==null?void 0:W.filter)||he?null:(0,t.jsx)(Ki.ZJ,o()(o()({name:"list"},te),{},{params:ye,children:(0,t.jsx)(Pm,o()({},te))}))}),Sm=function(){return(0,a.useContext)(_l)},bm=function(){return{}},Em=function(){var W,de,ve,he,ye,Me=(0,u.useCollection_deprecated)(),Ue=Me.name,ke=Me.title,Ye=(0,O.zy)(),Qe=(0,lt.$)(),et=Qe.t,gt=(0,m.useFieldSchema)(),we=(0,ze.bz)(),pt=we.form,ft=(0,m.useField)(),mt=(0,Et.ng)(),At=mt.dn,yt=(0,u.useSortFields)(Ue),on=(gt==null||(W=gt["x-decorator-props"])===null||W===void 0||(W=W.params)===null||W===void 0?void 0:W.sort)||[],yn=(gt==null||(de=gt["x-decorator-props"])===null||de===void 0?void 0:de.resource)||(gt==null||(ve=gt["x-decorator-props"])===null||ve===void 0?void 0:ve.association),In=on==null?void 0:on.map(function(tn){return tn.startsWith("-")?{field:tn.substring(1),direction:"desc"}:{field:tn,direction:"asc"}}),gn=(0,N.rE)(),Kt=gn.componentNamePrefix;return(0,t.jsxs)(S.aN,{template:Ye,title:ke||Ue,children:[(0,t.jsx)($n._,{}),(0,t.jsx)(pn.H,{collectionName:Ue,defaultFilter:(gt==null||(he=gt["x-decorator-props"])===null||he===void 0||(he=he.params)===null||he===void 0?void 0:he.filter)||{},form:pt,onSubmit:function(Qn){var sr,or=Qn.filter;or=(0,un.Wm)(or),Tt().set(gt,"x-decorator-props.params.filter",or),ft.decoratorProps.params=o()(o()({},gt["x-decorator-props"].params),{},{page:1}),At.emit("patch",{schema:(sr={},Je()(sr,"x-uid",gt["x-uid"]),Je()(sr,"x-decorator-props",gt["x-decorator-props"]),sr)})}}),(0,t.jsx)(S.B0,{title:et("Set default sorting rules"),components:{ArrayItems:f.ArrayItems},schema:{type:"object",title:et("Set default sorting rules"),properties:{sort:{type:"array",default:In,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:yt,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:et("ASC"),value:"asc"},{label:et("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:et("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function(Qn){var sr,or=Qn.sort,Un=or.map(function(Gn){return Gn.direction==="desc"?"-".concat(Gn.field):Gn.field});Tt().set(gt,"x-decorator-props.params.sort",Un),ft.decoratorProps.params=o()(o()({},gt["x-decorator-props"].params),{},{page:1}),At.emit("patch",{schema:(sr={},Je()(sr,"x-uid",gt["x-uid"]),Je()(sr,"x-decorator-props",gt["x-decorator-props"]),sr)})}}),(0,t.jsx)(Pt.jI,{}),(0,t.jsx)(S.Qf,{title:et("Records per page"),value:((ye=ft.decoratorProps)===null||ye===void 0||(ye=ye.params)===null||ye===void 0?void 0:ye.pageSize)||20,options:[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100},{label:"200",value:200}],onChange:function(Qn){var sr;Tt().set(gt,"x-decorator-props.params.pageSize",Qn),ft.decoratorProps.params=o()(o()({},gt["x-decorator-props"].params),{},{page:1}),At.emit("patch",{schema:(sr={},Je()(sr,"x-uid",gt["x-uid"]),Je()(sr,"x-decorator-props",gt["x-decorator-props"]),sr)})}}),(0,t.jsx)(H.G,{componentName:"".concat(Kt,"List"),collectionName:Ue,resourceName:yn}),(0,t.jsx)(S.Z5,{}),(0,t.jsx)(S.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}})]})},cu,Dm=(0,Se.t)(function(te){var W=(0,m.useField)(),de=(0,Et.ng)(),ve=de.designable,he=(0,di.Kv)();return(0,t.jsx)("div",{className:(0,ue.cx)(_r()(te.className),["itemCss",(0,ue.css)(cu||(cu=ee()([`
          .nb-action-bar {
            gap: 20px !important;
            margin-top: `,`;
          }
        `])),ve?"20px":"0px")]),children:(0,t.jsx)(bn.HV,{record:W.value,parent:he,children:te.children})})}),Mm=(0,c.l6)("nb-list",function(te){var W=te.componentCls;return Je()({},W,{width:"100%",marginBottom:0,"&:hover":{"> .general-schema-designer":{display:"block"}},"> .general-schema-designer":{position:"absolute",zIndex:999,top:"0",bottom:"0",left:"0",right:"0",display:"none",background:"var(--colorBgSettingsHover)",border:"0",pointerEvents:"none","> .general-schema-designer-icons":{position:"absolute",right:"2px",top:"2px",lineHeight:"16px",pointerEvents:"all",".ant-space-item":{backgroundColor:"var(--colorSettings)",color:"#fff",lineHeight:"16px",width:"16px",paddingLeft:"1px"}}},".itemCss":{display:"flex",width:"100%",flexDirection:"column","&:not(:first-child)":{paddingTop:te.paddingContentVertical},"&:not(:last-child)":{paddingBottom:te.paddingContentVertical,borderBottom:"1px solid ".concat(te.colorBorderSecondary)}}})}),Im=Mm,Am={size:["large","small"],wrap:!0},Om=function(){return{spaceProps:Am}},Tm=function(){var W,de=(0,be.aZ)(),ve=(0,m.useFieldSchema)(),he=Ie.Z.useToken(),ye=he.token,Me=(0,Tr.useDesignable)(),Ue=Me.designable,ke=(0,T.gp)()||{},Ye=ke.heightProps,Qe=Ye||{},et=Qe.title,gt=Qe.titleHeight;if(de){var we=et?gt:0,pt=Object.keys(((W=ve.parent.properties.actionBar)===null||W===void 0?void 0:W.properties)||{}).length>0,ft=pt||Ue?ye.controlHeight+2*ye.marginLG:ye.marginLG;return de-ft-ye.paddingLG-we}},du,mu,vu,Fm=(0,se.C)(function(te){var W,de,ve,he=Sm(),ye=he.service,Me=ye.run,Ue=ye.params,ke=(0,m.useFieldSchema)(),Ye=(0,Et.et)(),Qe=ye==null||(W=ye.data)===null||W===void 0?void 0:W.meta,et=Qe||{},gt=et.pageSize,we=et.count,pt=et.hasNext,ft=et.page,mt=(0,m.useField)(),At=(0,a.useState)(new Map),yt=Re()(At,1),on=yt[0],yn=Im(),In=yn.wrapSSR,gn=yn.componentCls,Kt=yn.hashId,tn=Tm(),Qn=Ie.Z.useToken(),sr=Qn.token,or=(0,a.useCallback)(function(hr){return on.has(hr)||on.set(hr,new m.Schema({type:"object",properties:Je()({},hr,ke.properties.item)})),on.get(hr)},[ke.properties,on]),Un=[5,10,20,50,100,200],Gn=(0,a.useCallback)(function(hr,pr){Me(o()(o()({},Ue==null?void 0:Ue[0]),{},{page:hr,pageSize:pr}))},[Me,Ue]),Sn=Ae.Gn===null||Ae.Gn===void 0?void 0:(0,Ae.Gn)(ke),qn=(Sn==null?void 0:Sn["x-component-props"])||{},xr=qn.layout,nr=xr===void 0?"vertical":xr,Nn=qn.labelAlign,lr=Nn===void 0?"left":Nn,Dn=qn.labelWidth,qt=Dn===void 0?120:Dn,kn=qn.labelWrap,cr=kn===void 0?!0:kn,ar=function(){if(!we){var pr;return{onChange:Gn,total:we||((pr=mt.value)===null||pr===void 0?void 0:pr.length)<gt||!pt?gt*ft:gt*ft+1,pageSize:gt||10,current:ft||1,showSizeChanger:!0,pageSizeOptions:Un,simple:!0,className:(0,ue.css)(du||(du=ee()([`
            .ant-pagination-simple-pager {
              display: none !important;
            }
          `]))),itemRender:function($r,yr,jr){return yr==="prev"?(0,t.jsxs)("div",{style:{display:"flex"},className:(0,ue.css)(mu||(mu=ee()([`
                    .ant-pagination-item-link {
                      min-width: `,`px;
                    }
                  `])),sr.controlHeight),children:[jr," ",(0,t.jsx)("div",{style:{marginLeft:"7px"},children:ft})]}):jr}}}return{onChange:Gn,total:we||0,pageSize:gt||10,current:ft||1,showSizeChanger:!0,pageSizeOptions:Un}},vr=ar();return In((0,t.jsx)($.G0,{scope:{useListItemProps:bm,useListActionBarProps:Om},children:(0,t.jsxs)(E.SortableItem,{className:(0,ue.cx)("nb-list",gn,Kt,(0,ue.css)(vu||(vu=ee()([`
              .nb-list-container {
                height: `,`;
                overflow-y: `,`;
                margin-left: -`,`px;
                margin-right: -`,`px;
                padding-left: `,`px;
                padding-right: `,`px;
              }
            `])),tn?tn+"px":"100%",tn?"auto":null,sr.marginLG,sr.marginLG,sr.marginLG,sr.marginLG)),children:[(0,t.jsx)("div",{className:"nb-list-container",children:(0,t.jsx)(f.FormLayout,{layout:nr,labelAlign:lr,labelWidth:nr==="horizontal"?qt:null,labelWrap:cr,children:(0,t.jsx)(Xs.Z,o()(o()({},te),{},{pagination:!Qe||!((de=mt.value)!==null&&de!==void 0&&de.length)?!1:vr,loading:ye==null?void 0:ye.loading,children:(ve=mt.value)!==null&&ve!==void 0&&ve.length?mt.value.map(function(hr,pr){return(0,t.jsx)(l.sq,{basePath:mt.address,name:pr,onlyRenderProperties:!0,schema:or(pr)},pr)}):null}))})}),(0,t.jsx)(Ye,{})]})}))},{displayName:"InternalList"}),pi=(0,Se.t)(Fm);pi.Item=Dm,pi.Designer=Em,pi.Decorator=ym;var Ni=e(71343),Rm=e(5298),pu=Object.assign((0,m.connect)(Za.Z,(0,m.mapProps)(function(te,W){var de=(0,Jn.Hy)()||{size:21},ve=de.size,he=de.customAlphabet,ye=(0,lt.$)(),Me=ye.t,Ue=(0,m.useForm)();function ke(Ye){if((Ye==null?void 0:Ye.length)!==ve)return Me("Field value size is")+" ".concat(ve||21);for(var Qe=0;Qe<Ye.length;Qe++)if((he==null?void 0:he.indexOf(Ye[Qe]))===-1)return Me("Field value do not meet the requirements")}return(0,a.useEffect)(function(){!W.initialValue&&he&&W.setInitialValue((0,Rm.kP)(he,ve)()),Ue.setFieldState(W.props.name,function(Ye){Ye.validator=ke})},[]),o()(o()({},te),{},{suffix:(0,t.jsx)("span",{children:W!=null&&W.loading||W!=null&&W.validating?(0,t.jsx)(vn.Z,{}):te.suffix})})}),(0,m.mapReadPretty)(ro.iV.Input)),{ReadPretty:ro.iV.Input}),jm=e(66705),Bm=["hidden"],fu=(0,Se.t)((0,m.observer)(function(te){var W=(0,re.w)(te),de=W.hidden,ve=b()(W,Bm);if(de)return null;var he=function(Me){Me.key==="Enter"&&Me.preventDefault()};return(0,t.jsx)("div",{onKeyPress:he,children:(0,t.jsx)(jm.Z,o()({},ve))})},{displayName:"Pagination"})),Qa=function(W){return W>=48&&W<=57},$i=function(W){return W>=97&&W<=122},Vi=function(W){return W>=65&&W<=90},hu=function(W){return!($i(W)||Vi(W)||Qa(W))},Cl=function(W){return $i(W)||Vi(W)},Lm=function(W){if(!W)return 0;for(var de=0,ve=0,he=0,ye=0,Me=0,Ue=0,ke=0,Ye=0,Qe=0,et=function(){return de+ve+he+ye},gt=function(){var or=de>0?1:0;return or+=ve>0?1:0,or+=he>0?1:0,or+=ye>0?1:0,or>2&&et()>=8?or+1:0},we=0;we<W.length;we++){var pt=W.charCodeAt(we);Qa(pt)?(de++,we!==0&&we!==W.length-1&&Me++,we>0&&Qa(W.charCodeAt(we-1))&&Ye++):$i(pt)?(ve++,we>0&&$i(W.charCodeAt(we-1))&&Ye++):Vi(pt)?(he++,we>0&&Vi(W.charCodeAt(we-1))&&Ye++):(ye++,we!==0&&we!==W.length-1&&Me++);for(var ft=!1,mt=0;mt<W.length;mt++)W[we]===W[mt]&&we!==mt&&(ft=!0,ke+=Math.abs(W.length/(mt-we)));if(ft){Ue++;var At=W.length-Ue;ke=Math.ceil(At?ke/At:ke)}if(we>1){var yt=W.charCodeAt(we-1),on=W.charCodeAt(we-2);if(Cl(pt)){if(Cl(yt)&&Cl(on)){var yn=W.toLowerCase(),In=yn.charCodeAt(we),gn=yn.charCodeAt(we-1),Kt=yn.charCodeAt(we-2);In-gn===gn-Kt&&Math.abs(In-gn)===1&&Qe++}}else Qa(pt)?Qa(yt)&&Qa(on)&&pt-yt===yt-on&&Math.abs(pt-yt)===1&&Qe++:hu(yt)&&hu(on)&&pt-yt===yt-on&&Math.abs(pt-yt)===1&&Qe++}}var tn=0,Qn=et();return tn+=4*Qn,ve>0&&(tn+=2*(Qn-ve)),he>0&&(tn+=2*(Qn-he)),de!==Qn&&(tn+=4*de),tn+=6*ye,tn+=2*Me,tn+=2*gt(),Qn===ve+he&&(tn-=Qn),Qn===de&&(tn-=de),tn-=ke,tn-=2*Ye,tn-=3*Qe,tn=tn<0?0:tn,tn=tn>100?100:tn,tn>=80?100:tn>=60?80:tn>=40?60:tn>=20?40:20},Um=function(W){return(0,ge.isFn)(W.children)?W.children(Lm(String(W.value||""))):(0,t.jsx)(a.Fragment,{children:W.children})},zm=["value","className","checkStrength"],xl=(0,m.connect)(function(te){var W=te.value,de=te.className,ve=te.checkStrength,he=b()(te,zm),ye={position:"absolute",zIndex:1,height:8,top:0,background:"#fff",width:1,transform:"translate(-50%, 0)"};return(0,t.jsxs)("span",{className:de,children:[(0,t.jsx)(Za.Z.Password,o()(o()({},he),{},{value:W})),ve&&(0,t.jsx)(Um,{value:W,children:function(Ue){return(0,t.jsxs)("div",{style:{background:"#e0e0e0",marginBottom:3,position:"relative"},children:[(0,t.jsx)("div",{style:o()(o()({},ye),{},{left:"20%"})}),(0,t.jsx)("div",{style:o()(o()({},ye),{},{left:"40%"})}),(0,t.jsx)("div",{style:o()(o()({},ye),{},{left:"60%"})}),(0,t.jsx)("div",{style:o()(o()({},ye),{},{left:"80%"})}),(0,t.jsx)("div",{style:{position:"relative",backgroundImage:"-webkit-linear-gradient(left, #ff5500, #ff9300)",transition:"all 0.35s ease-in-out",height:8,width:"100%",marginTop:5,clipPath:"polygon(0 0,".concat(Ue,"% 0,").concat(Ue,"% 100%,0 100%)")}})]})}})]})},(0,m.mapReadPretty)(function(te){return te.value?(0,t.jsx)("div",{children:"********"}):(0,t.jsx)("div",{})})),up=null,Km=function(W){return(0,ge.isNum)(W)||/^-?\d+(\.\d+)?$/.test(W)},Pl=function(W,de){return Km(W)?lu.NMM(de(W),9):null},gu=(0,m.connect)(function(te){var W=te.value,de=te.onChange,ve=(0,a.useMemo)(function(){return Pl(W,function(he){return he*100})},[W]);return(0,t.jsx)(au.Z,o()(o()({},te),{},{addonAfter:"%",value:ve,onChange:function(ye){de&&de(Pl(ye,function(Me){return Me/100}))}}))},(0,m.mapReadPretty)(function(te){var W=(0,a.useMemo)(function(){return Pl(te.value,function(de){return de*100})},[te.value]);return(0,t.jsx)(hl,o()(o()({},te),{},{value:W}))})),_u=e(13101),Cu,yl=(0,m.observer)(function(te){var W=(0,m.useField)(),de=(0,a.useRef)(null),ve=(0,m.useFieldSchema)(),he=W.value,ye=(0,me.d)(),Me=ye.token,Ue={name:ve.name,"x-collection-field":ve["x-collection-field"],"x-component":"CollectionField","x-read-pretty":!0,default:he,"x-component-props":ve["x-component-props"]},ke=(0,a.useMemo)(function(){return(0,x.createForm)({values:Je()({},ve.name,he)})},[W.value,ve["x-component-props"]]),Ye=function(){return de.current},Qe=a.Children.map(te.children,function(et){return a.isValidElement(et)?a.cloneElement(et,{getContainer:Ye}):et});return(0,t.jsx)(G.xJ,o()(o()({},te),{},{labelStyle:{display:"none"},children:(0,t.jsx)(si.q,{content:(0,t.jsx)("div",{style:{width:"100%",height:"100%",minWidth:500},children:(0,t.jsx)("div",{ref:de,children:Qe})}),trigger:"click",placement:"bottomLeft",overlayClassName:(0,ue.css)(Cu||(Cu=ee()([`
            padding-top: 0;
            .ant-popover-arrow {
              display: none;
            }
          `]))),children:(0,t.jsx)("div",{style:{minHeight:Me.controlHeight,padding:"1px ".concat(Me.paddingXS,"px"),backgroundColor:W.disabled?Me.colorBgContainerDisabled:void 0,color:W.disabled?Me.colorTextDisabled:void 0,borderRadius:Me.borderRadius},children:(0,t.jsx)(m.FormContext.Provider,{value:ke,children:(0,t.jsx)(m.RecursionField,{schema:Ue,name:ve.name})})})})}))},{displayName:"Editable"}),xu=(0,m.observer)(function(te){var W=(0,m.useField)(),de=(0,u.useCollectionManager_deprecated)(),ve=de.getCollectionJoinField,he=(0,it.Kx)(),ye=(0,m.useFieldSchema)(),Me=ve(ye["x-collection-field"])||(he==null?void 0:he.getField(ye.name));return Me?W.editable||W.disabled?(0,t.jsx)(yl,o()({},te)):(0,t.jsx)(G.xJ,o()(o()({},te),{},{style:{padding:"0 8px"}})):null},{displayName:"QuickEdit"}),ki=(0,m.connect)(fl.ZP,(0,m.mapProps)({value:"checked",onInput:"onChange"}));ki.__ANT_RADIO=!0,ki.Group=(0,m.connect)(fl.ZP.Group,(0,m.mapProps)({dataSource:"options"},function(te,W){return(0,a.useEffect)(function(){var de,ve=(de=W.dataSource)===null||de===void 0?void 0:de.find(function(he){return he.value==te.value});ve&&W.setValue(ve.value)},[te.value,W.dataSource]),o()({},te)}),(0,m.mapReadPretty)(function(te){if(!(0,ge.isValid)(te.value))return(0,t.jsx)("div",{});var W=te.value,de=(0,m.useField)(),ve=(0,Jn.Hy)(),he=de.dataSource||(ve==null?void 0:ve.uiSchema.enum)||[];return(0,t.jsx)("div",{children:he.filter(function(ye){return ye.value==W}).map(function(ye,Me){return(0,t.jsx)(an.Z,{color:ye.color,icon:ye.icon,children:ye.label},Me)})})}));var cp=null,Co=e(24581),Wm=e(98902);var Nm=(0,c.l6)("nb-rich-text",function(te){var W=te.componentCls;return Je()({},W,{".ql-container":{boxSizing:"border-box",height:"100%",margin:"0px",position:"relative"},".ql-container.ql-disabled .ql-tooltip":{visibility:"hidden"},".ql-container.ql-disabled .ql-editor ul[data-checked] > li::before":{pointerEvents:"none"},".ql-clipboard":{left:"-100000px",height:"1px",overflowY:"hidden",position:"absolute",top:"50%"},".ql-clipboard p":{margin:"0",padding:"0"},".ql-editor":{minHeight:"10em",boxSizing:"border-box",lineHeight:1.42,height:"100%",outline:"none",overflowY:"auto",padding:"12px 15px",tabSize:4,MozTabSize:"4",textAlign:"left",whiteSpace:"pre-wrap",wordWrap:"break-word"},".ql-snow.ql-toolbar:after,\n.ql-snow .ql-toolbar:after":{clear:"both",content:"''",display:"table"},".ql-snow.ql-toolbar button,\n.ql-snow .ql-toolbar button":{background:"none",border:"none",cursor:"pointer",display:"inline-block",cssFloat:"left",height:"24px",padding:"3px 5px",width:"28px"},".ql-snow.ql-toolbar button svg,\n.ql-snow .ql-toolbar button svg":{cssFloat:"left",height:"100%"},".ql-snow.ql-toolbar button:active:hover,\n.ql-snow .ql-toolbar button:active:hover":{outline:"none"},".ql-snow.ql-toolbar input.ql-image[type='file'],\n.ql-snow .ql-toolbar input.ql-image[type='file']":{display:"none"},".ql-snow.ql-toolbar button:hover,\n.ql-snow .ql-toolbar button:hover,\n.ql-snow.ql-toolbar button:focus,\n.ql-snow .ql-toolbar button:focus,\n.ql-snow.ql-toolbar button.ql-active,\n.ql-snow .ql-toolbar button.ql-active,\n.ql-snow.ql-toolbar .ql-picker-label:hover,\n.ql-snow .ql-toolbar .ql-picker-label:hover,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active,\n.ql-snow.ql-toolbar .ql-picker-item:hover,\n.ql-snow .ql-toolbar .ql-picker-item:hover,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected":{color:te.colorPrimaryTextHover},".ql-snow.ql-toolbar button:hover .ql-fill,\n.ql-snow .ql-toolbar button:hover .ql-fill,\n.ql-snow.ql-toolbar button:focus .ql-fill,\n.ql-snow .ql-toolbar button:focus .ql-fill,\n.ql-snow.ql-toolbar button.ql-active .ql-fill,\n.ql-snow .ql-toolbar button.ql-active .ql-fill,\n.ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,\n.ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,\n.ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,\n.ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,\n.ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill":{fill:te.colorPrimaryTextHover},".ql-snow.ql-toolbar button:hover .ql-stroke,\n.ql-snow .ql-toolbar button:hover .ql-stroke,\n.ql-snow.ql-toolbar button:focus .ql-stroke,\n.ql-snow .ql-toolbar button:focus .ql-stroke,\n.ql-snow.ql-toolbar button.ql-active .ql-stroke,\n.ql-snow .ql-toolbar button.ql-active .ql-stroke,\n.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,\n.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,\n.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,\n.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,\n.ql-snow.ql-toolbar button:hover .ql-stroke-miter,\n.ql-snow .ql-toolbar button:hover .ql-stroke-miter,\n.ql-snow.ql-toolbar button:focus .ql-stroke-miter,\n.ql-snow .ql-toolbar button:focus .ql-stroke-miter,\n.ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,\n.ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,\n.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,\n.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,\n.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,\n.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,\n.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,\n.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,\n.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,\n.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter":{stroke:te.colorPrimaryTextHover},"@media (pointer: coarse)":{".ql-snow.ql-toolbar button:hover:not(.ql-active),\n  .ql-snow .ql-toolbar button:hover:not(.ql-active)":{color:te.colorTextSecondary},".ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,\n  .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,\n  .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,\n  .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill":{fill:te.colorTextSecondary},".ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,\n  .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,\n  .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,\n  .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter":{stroke:te.colorTextSecondary}},".ql-snow":{boxSizing:"border-box"},".ql-snow *":{boxSizing:"border-box"},".ql-snow .ql-hidden":{display:"none"},".ql-snow .ql-out-bottom,\n.ql-snow .ql-out-top":{visibility:"hidden"},".ql-snow .ql-tooltip":{position:"absolute",transform:"translateY(10px)",backgroundColor:"#fff",border:"1px solid ".concat(te.colorBorder),boxShadow:"0px 0px 5px #ddd",color:te.colorTextSecondary,padding:"5px 12px",whiteSpace:"nowrap"},".ql-snow .ql-tooltip a":{cursor:"pointer",textDecoration:"none",lineHeight:"26px"},".ql-snow .ql-tooltip.ql-flip":{transform:"translateY(-10px)"},".ql-snow .ql-formats":{display:"inline-block",verticalAlign:"middle"},".ql-snow .ql-formats:after":{clear:"both",content:"''",display:"table"},".ql-snow .ql-stroke":{fill:"none",stroke:te.colorTextSecondary,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2},".ql-snow .ql-stroke-miter":{fill:"none",stroke:te.colorTextSecondary,strokeMiterlimit:"10",strokeWidth:2},".ql-snow .ql-fill,\n.ql-snow .ql-stroke.ql-fill":{fill:te.colorTextSecondary},".ql-snow .ql-empty":{fill:"none"},".ql-snow .ql-even":{fillRule:"evenodd"},".ql-snow .ql-thin,\n.ql-snow .ql-stroke.ql-thin":{strokeWidth:1},".ql-snow .ql-transparent":{opacity:.4},".ql-snow .ql-direction svg:last-child":{display:"none"},".ql-snow .ql-direction.ql-active svg:last-child":{display:"inline"},".ql-snow .ql-direction.ql-active svg:first-child":{display:"none"},".ql-snow .ql-editor h1":{fontSize:"2em"},".ql-snow .ql-editor h2":{fontSize:"1.5em"},".ql-snow .ql-editor h3":{fontSize:"1.17em"},".ql-snow .ql-editor h4":{fontSize:"1em"},".ql-snow .ql-editor h5":{fontSize:"0.83em"},".ql-snow .ql-editor h6":{fontSize:"0.67em"},".ql-snow .ql-editor blockquote":{borderLeft:"4px solid #ccc",marginBottom:"5px",marginTop:"5px",paddingLeft:"16px"},".ql-snow .ql-editor code,\n.ql-snow .ql-editor pre":{backgroundColor:"#f0f0f0",borderRadius:"3px"},".ql-snow .ql-editor pre":{whiteSpace:"pre-wrap",marginBottom:"5px",marginTop:"5px",padding:"5px 10px"},".ql-snow .ql-editor code":{fontSize:"85%",padding:"2px 4px"},".ql-snow .ql-editor pre.ql-syntax":{backgroundColor:"#23241f",color:"#f8f8f2",overflow:"visible"},".ql-snow .ql-editor img":{maxWidth:"100%"},".ql-snow .ql-picker":{color:te.colorTextSecondary,display:"inline-block",cssFloat:"left",fontSize:"14px",fontWeight:500,height:"24px",position:"relative",verticalAlign:"middle"},".ql-snow .ql-picker-label":{cursor:"pointer",display:"inline-block",height:"100%",paddingLeft:"8px",paddingRight:"2px",position:"relative",width:"100%"},".ql-snow .ql-picker-label::before":{display:"inline-block",lineHeight:"22px"},".ql-snow .ql-picker-options":{backgroundColor:"#fff",display:"none",minWidth:"100%",padding:"4px 8px",position:"absolute",whiteSpace:"nowrap"},".ql-snow .ql-picker-options .ql-picker-item":{cursor:"pointer",display:"block",paddingBottom:"5px",paddingTop:"5px"},".ql-snow .ql-picker.ql-expanded .ql-picker-label":{color:"#ccc",zIndex:2},".ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill":{fill:"#ccc"},".ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke":{stroke:"#ccc"},".ql-snow .ql-picker.ql-expanded .ql-picker-options":{display:"block",marginTop:"-1px",top:"100%",zIndex:1},".ql-snow .ql-color-picker,\n.ql-snow .ql-icon-picker":{width:"28px"},".ql-snow .ql-color-picker .ql-picker-label,\n.ql-snow .ql-icon-picker .ql-picker-label":{padding:"2px 4px"},".ql-snow .ql-color-picker .ql-picker-label svg,\n.ql-snow .ql-icon-picker .ql-picker-label svg":{right:"4px"},".ql-snow .ql-icon-picker .ql-picker-options":{padding:"4px 0px"},".ql-snow .ql-icon-picker .ql-picker-item":{height:"24px",width:"24px",padding:"2px 4px"},".ql-snow .ql-color-picker .ql-picker-options":{padding:"3px 5px",width:"152px"},".ql-snow .ql-color-picker .ql-picker-item":{border:"1px solid transparent",cssFloat:"left",height:"16px",margin:"2px",padding:"0px",width:"16px"},".ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg":{position:"absolute",marginTop:"-9px",right:"0",top:"50%",width:"18px"},".ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=''])::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=''])::before":{content:"attr(data-label)"},".ql-snow .ql-picker.ql-header":{width:"98px"},".ql-snow .ql-picker.ql-header .ql-picker-label::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item::before":{content:"'Normal'"},".ql-snow .ql-picker.ql-header .ql-picker-label[data-value='1']::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before":{content:"'Heading 1'"},".ql-snow .ql-picker.ql-header .ql-picker-label[data-value='2']::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before":{content:"'Heading 2'"},".ql-snow .ql-picker.ql-header .ql-picker-label[data-value='3']::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before":{content:"'Heading 3'"},".ql-snow .ql-picker.ql-header .ql-picker-label[data-value='4']::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before":{content:"'Heading 4'"},".ql-snow .ql-picker.ql-header .ql-picker-label[data-value='5']::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before":{content:"'Heading 5'"},".ql-snow .ql-picker.ql-header .ql-picker-label[data-value='6']::before,\n.ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before":{content:"'Heading 6'"},".ql-snow .ql-picker.ql-header .ql-picker-item[data-value='1']::before":{fontSize:"2em"},".ql-snow .ql-picker.ql-header .ql-picker-item[data-value='2']::before":{fontSize:"1.5em"},".ql-snow .ql-picker.ql-header .ql-picker-item[data-value='3']::before":{fontSize:"1.17em"},".ql-snow .ql-picker.ql-header .ql-picker-item[data-value='4']::before":{fontSize:"1em"},".ql-snow .ql-picker.ql-header .ql-picker-item[data-value='5']::before":{fontSize:"0.83em"},".ql-snow .ql-picker.ql-header .ql-picker-item[data-value='6']::before":{fontSize:"0.67em"},".ql-snow .ql-picker.ql-font":{width:"108px"},".ql-snow .ql-picker.ql-font .ql-picker-label::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item::before":{content:"'Sans Serif'"},".ql-snow .ql-picker.ql-font .ql-picker-label[data-value='serif']::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before":{content:"'Serif'"},".ql-snow .ql-picker.ql-font .ql-picker-label[data-value='monospace']::before,\n.ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before":{content:"'Monospace'"},".ql-snow .ql-picker.ql-font .ql-picker-item[data-value='serif']::before":{fontFamily:"Georgia, Times New Roman, serif"},".ql-snow .ql-picker.ql-font .ql-picker-item[data-value='monospace']::before":{fontFamily:"Monaco, Courier New, monospace"},".ql-snow .ql-picker.ql-size":{width:"98px"},".ql-snow .ql-picker.ql-size .ql-picker-label::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item::before":{content:"'Normal'"},".ql-snow .ql-picker.ql-size .ql-picker-label[data-value='small']::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before":{content:"'Small'"},".ql-snow .ql-picker.ql-size .ql-picker-label[data-value='large']::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before":{content:"'Large'"},".ql-snow .ql-picker.ql-size .ql-picker-label[data-value='huge']::before,\n.ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before":{content:"'Huge'"},".ql-snow .ql-picker.ql-size .ql-picker-item[data-value='small']::before":{fontSize:"10px"},".ql-snow .ql-picker.ql-size .ql-picker-item[data-value='large']::before":{fontSize:"18px"},".ql-snow .ql-picker.ql-size .ql-picker-item[data-value='huge']::before":{fontSize:"32px"},".ql-snow .ql-color-picker.ql-background .ql-picker-item":{backgroundColor:"#fff"},".ql-snow .ql-color-picker.ql-color .ql-picker-item":{backgroundColor:"#000"},".ql-toolbar.ql-snow":{border:"1px solid ".concat(te.colorBorder),boxSizing:"border-box",padding:"8px",borderTopLeftRadius:"2px",borderTopRightRadius:"2px",lineHeight:1.6},".ql-toolbar.ql-snow .ql-formats":{marginRight:"15px"},".ql-toolbar.ql-snow .ql-picker-label":{border:"1px solid transparent"},".ql-toolbar.ql-snow .ql-picker-options":{border:"1px solid transparent",boxShadow:"rgba(0, 0, 0, 0.2) 0 2px 8px"},".ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label":{borderColor:te.colorBorder},".ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options":{borderColor:te.colorBorder},".ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,\n.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover":{borderColor:"#000"},".ql-toolbar.ql-snow + .ql-container.ql-snow":{borderTop:"0px"},".ql-snow .ql-tooltip::before":{content:"'Visit URL:'",lineHeight:"26px",marginRight:"8px"},".ql-snow .ql-tooltip input[type='text']":{display:"none",border:"1px solid ".concat(te.colorBorder),fontSize:"13px",height:"26px",margin:"0px",padding:"3px 5px",width:"170px"},".ql-snow .ql-tooltip a.ql-preview":{display:"inline-block",maxWidth:"200px",overflowX:"hidden",textOverflow:"ellipsis",verticalAlign:"top"},".ql-snow .ql-tooltip a.ql-action::after":{borderRight:"1px solid #ccc",content:"'Edit'",marginLeft:"16px",paddingRight:"8px"},".ql-snow .ql-tooltip a.ql-remove::before":{content:"'Remove'",marginLeft:"8px"},".ql-snow .ql-tooltip.ql-editing a.ql-preview,\n.ql-snow .ql-tooltip.ql-editing a.ql-remove":{display:"none"},".ql-snow .ql-tooltip.ql-editing input[type='text']":{display:"inline-block"},".ql-snow .ql-tooltip.ql-editing a.ql-action::after":{borderRight:"0px",content:"'Save'",paddingRight:"0px"},".ql-snow .ql-tooltip[data-mode='link']::before":{content:"'Enter link:'"},".ql-snow .ql-tooltip[data-mode='formula']::before":{content:"'Enter formula:'"},".ql-snow .ql-tooltip[data-mode='video']::before":{content:"'Enter video:'"},".ql-snow a":{color:te.colorPrimaryTextHover},".ql-container.ql-snow":{border:"1px solid ".concat(te.colorBorder),borderBottomLeftRadius:"2px",borderBottomRightRadius:"2px"}})}),$m=e(57930),Vm=(0,Wm.Vo)(function(){return $m("imported_f7e993_component",Promise.all([e.e(2386),e.e(1167)]).then(e.t.bind(e,71167,23)))}),Pu=(0,m.connect)(function(te){var W=Nm(),de=W.wrapSSR,ve=W.hashId,he=W.componentCls,ye={toolbar:[["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]]},Me=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"],Ue=te.value,ke=te.defaultValue,Ye=te.onChange,Qe=te.disabled,et=(0,Fr.cG)(Ue||ke)?void 0:Ue||"";return de((0,t.jsx)(Vm,{className:"".concat(he," ").concat(ve),modules:ye,formats:Me,value:et,onChange:function(we){Ye(we==="<p><br></p>"?void 0:we)},readOnly:Qe}))},(0,m.mapProps)({initialValue:"defaultValue"}),(0,m.mapReadPretty)(function(te){return(0,t.jsx)(ro.iV.Html,o()({},te))})),yu=function(W){var de,ve=W.split;ve==="|"&&(ve="");var he=(0,f.useFormLayout)();return a.createElement(We.Z,o()(o()({size:(de=W.size)!==null&&de!==void 0?de:he==null?void 0:he.spaceGap},W),{},{split:ve}))},dp=null,km=e(54663),Hm=["index"],Gm=["dragSort","showIndex","useSelectedRowKeys","useDataSource","useAction","onChange"],Su,bu,Eu,Du,Mu,Iu,Au,Ou,Zm=function(W){var de;return((de=W["x-component"])===null||de===void 0?void 0:de.endsWith(".Column"))>-1},Ym=function(){var W=(0,m.useField)(),de=(0,m.useFieldSchema)(),ve=(0,Tr.useSchemaInitializerRender)(de["x-initializer"],de["x-initializer-props"]),he=ve.exists,ye=ve.render,Me=(0,a.useContext)(m.SchemaExpressionScopeContext),Ue=(0,Tr.useCollectionParentRecordData)(),ke=(0,Tr.useCollectionRecordData)(),Ye=de.reduceProperties(function(Qe,et){return Zm(et)&&Me[et["x-visible"]]!==!1?Qe.concat([et]):Qe},[]).map(function(Qe){return{title:(0,t.jsx)(m.RecursionField,{name:Qe.name,schema:Qe,onlyRenderSelf:!0}),dataIndex:Qe.name,key:Qe.name,render:function(gt,we){var pt,ft=(pt=W.value)===null||pt===void 0?void 0:pt.indexOf(we);return(0,t.jsx)(Tr.RecordIndexProvider,{index:ft,children:(0,t.jsx)(Tr.RecordProvider,{record:we,parent:Ue||ke,children:(0,t.jsx)("span",{role:"button",className:(0,ue.css)(Su||(Su=ee()([`
                    .ant-space-gap-col-small {
                      column-gap: 10px;
                    }
                  `]))),children:(0,t.jsx)(m.RecursionField,{schema:Qe,name:we.__index||ft,onlyRenderProperties:!0})})})})}}});return he?Ye.concat({title:ye(),dataIndex:"TABLE_COLUMN_INITIALIZER",key:"TABLE_COLUMN_INITIALIZER"}):Ye},Qm={header:{wrapper:function(W){return(0,t.jsx)(E.DndContext,{children:(0,t.jsx)("thead",o()({},W))})},cell:function(W){return(0,t.jsx)("th",o()(o()({},W),{},{className:_r()(W.className,(0,ue.css)(bu||(bu=ee()([`
              &:hover .general-schema-designer {
                display: block;
              }
            `]))))}))}},body:{wrapper:function(W){return(0,t.jsx)(E.DndContext,{children:(0,t.jsx)("tbody",o()({},W))})},row:function(W){return(0,t.jsx)("tr",o()({},W))},cell:function(W){return(0,t.jsx)("td",o()(o()({},W),{},{className:_r()(W.className,(0,ue.css)(Eu||(Eu=ee()([`
            max-width: 300px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
          `]))))}))}}},Jm=function(){var W=(0,a.useState)([]),de=Re()(W,2),ve=de[0],he=de[1];return[ve,he]},Xm=function(W,de){var ve=(0,m.useField)();return(0,Tr.useRequest)(function(){return Promise.resolve({data:ve.value})},W)},wm=function(W){return(0,t.jsx)(Zl.Z,o()({className:"drag-handle",style:{cursor:"grab"}},W))},qm=function(W){var de=W.index,ve=b()(W,Hm);return(0,t.jsx)("div",o()(o()({className:_r()("nb-table-index"),style:{padding:"0 8px 0 16px"}},ve),{},{children:de+1}))},ev=function(){return{move:function(){return A()(g()().mark(function de(){return g()().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:case"end":return he.stop()}},de)}))()}}},Tu=(0,m.observer)(function(te){var W,de,ve=(0,c.dQ)(),he=ve.token,ye=(0,m.useField)(),Me=Ym(),Ue=te.dragSort,ke=Ue===void 0?!1:Ue,Ye=te.showIndex,Qe=Ye===void 0?!0:Ye,et=te.useSelectedRowKeys,gt=et===void 0?Jm:et,we=te.useDataSource,pt=we===void 0?Xm:we,ft=te.useAction,mt=ft===void 0?ev:ft,At=te.onChange,yt=b()(te,Gm),on=gt(),yn=Re()(on,2),In=yn[0],gn=yn[1];pt({onSuccess:function(Un){ye.value=(Un==null?void 0:Un.data)||[]}});var Kt=mt(),tn=Kt.move,Qn={rowSelection:te.rowSelection?o()({type:"checkbox",selectedRowKeys:In,onChange:function(Un){gn(Un)},getCheckboxProps:function(Un){return{"aria-label":"checkbox-".concat(Un.name)}},renderCell:function(Un,Gn,Sn,qn){var xr,nr,Nn=te==null||(xr=te.pagination)===null||xr===void 0?void 0:xr.current,lr=(te==null||(nr=te.pagination)===null||nr===void 0?void 0:nr.pageSize)||20;return Nn&&(Sn=Sn+(Nn-1)*lr),(0,t.jsxs)("div",{className:_r()(Un?"checked":null,(0,ue.css)(Du||(Du=ee()([`
                      position: relative;
                      display: flex;
                      align-items: center;
                      justify-content: space-evenly;
                      padding-right: 8px;
                      .nb-table-index {
                        opacity: 0;
                      }
                      &:not(.checked) {
                        .nb-table-index {
                          opacity: 1;
                        }
                      }
                      &:hover {
                        .nb-table-index {
                          opacity: 0;
                        }
                        .nb-origin-node {
                          display: block;
                        }
                      }
                    `])))),children:[(0,t.jsxs)("div",{className:_r()(Un?"checked":null,(0,ue.css)(Mu||(Mu=ee()([`
                        position: relative;
                        display: flex;
                        align-items: center;
                        justify-content: space-evenly;
                      `])))),children:[ke&&(0,t.jsx)(wm,{role:"button","aria-label":"sort-handle-".concat((Gn==null?void 0:Gn.name)||Sn)}),Qe&&(0,t.jsx)(qm,{role:"button","aria-label":"table-index-".concat((Gn==null?void 0:Gn.name)||Sn),index:Sn})]}),(0,t.jsx)("div",{className:_r()("nb-origin-node",Un?"checked":null,(0,ue.css)(Iu||(Iu=ee()([`
                        position: absolute;
                        right: 50%;
                        transform: translateX(50%);
                        &:not(.checked) {
                          display: none;
                        }
                      `])))),children:qn})]})}},te.rowSelection):void 0},sr=function(Un){var Gn,Sn;return(Gn=ye.value)===null||Gn===void 0||(Sn=Gn.indexOf)===null||Sn===void 0?void 0:Sn.call(Gn,Un)};return(0,t.jsx)("div",{className:(0,ue.css)(Au||(Au=ee()([`
          .ant-table {
            overflow-x: auto;
            overflow-y: hidden;
          }
        `]))),children:(0,t.jsx)(km.Z,{handleSelector:".drag-handle",onDragEnd:function(){var or=A()(g()().mark(function Un(Gn,Sn){var qn,xr;return g()().wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:return qn=ye.value[Gn],xr=ye.value[Sn],ye.move(Gn,Sn),Nn.next=5,tn(qn,xr);case 5:case"end":return Nn.stop()}},Un)}));return function(Un,Gn){return or.apply(this,arguments)}}(),lineClassName:(0,ue.css)(Ou||(Ou=ee()([`
            border-bottom: 2px solid `,` !important;
          `])),new Yl.C(he.colorSettings).setAlpha(.6).toHex8String()),children:(0,t.jsx)(Ql.Z,o()(o()(o()({rowKey:sr},yt),Qn),{},{components:Qm,columns:Me,dataSource:ye==null||(W=ye.value)===null||W===void 0||(de=W.slice)===null||de===void 0?void 0:de.call(W)}))})})},{displayName:"TableArray"}),tv=function(){return(0,t.jsx)(S.aN,{children:(0,t.jsx)(S.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}})})},nv=function(W){var de=(0,m.useField)();return(0,t.jsx)("div",{children:de.title})},rv=e(29050),ov=e(70027),av=function(W){var de,ve,he=(0,Et.eJ)(),ye=(0,u.useCollectionManager_deprecated)(),Me=ye.getCollectionFields;if(!W)return[];var Ue=Me(W);return Ue==null||(de=Ue.filter)===null||de===void 0||(de=de.call(Ue,function(ke){return!(ke!=null&&ke.target)&&ke.type!=="boolean"}))===null||de===void 0||(ve=de.map)===null||ve===void 0?void 0:ve.call(de,function(ke){var Ye;return{value:ke.name,label:he((ke==null||(Ye=ke.uiSchema)===null||Ye===void 0?void 0:Ye.title)||ke.name)}})},iv=function(W){var de,ve,he=W.uiSchema,ye=W.fieldSchema,Me=W.collectionField,Ue=(0,m.useField)(),ke=(0,m.useFieldSchema)(),Ye=(0,Et.ng)(),Qe=Ye.dn,et={title:ke==null?void 0:ke.title},gt=av(Me==null?void 0:Me.target);return(0,t.jsxs)(S.aN,{children:[(0,t.jsx)(S.D3,{title:"\u7F16\u8F91",schema:{title:"\u7F16\u8F91\u5B57\u6BB5","x-component":"Action.Modal","x-component-props":{width:520},"x-decorator":"Form","x-decorator-props":{initialValue:et},type:"void",properties:{title:{"x-decorator":"FormItem","x-component":"Input",title:"\u5B57\u6BB5\u6807\u9898","x-component-props":{},description:"\u539F\u5B57\u6BB5\u6807\u9898\uFF1A".concat(Me==null||(de=Me.uiSchema)===null||de===void 0?void 0:de.title)},footer:{type:"void","x-component":"Action.Modal.Footer",properties:{cancel:{type:"void",title:'{{t("Cancel")}}',"x-component":"Action","x-component-props":{useAction:function(){var pt=(0,k.XC)();return{run:function(){return A()(g()().mark(function mt(){return g()().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:pt.setVisible(!1);case 1:case"end":return yt.stop()}},mt)}))()}}}}},submit:{type:"void",title:"Submit","x-component":"Action","x-component-props":{type:"primary",useAction:function(){var pt=(0,m.useForm)(),ft=(0,k.XC)();return{run:function(){return A()(g()().mark(function At(){var yt;return g()().wrap(function(yn){for(;;)switch(yn.prev=yn.next){case 0:yt=pt.values.title,yt&&(Ue.title=yt,ke.title=yt,Qe.emit("patch",{schema:{"x-uid":ke["x-uid"],title:ke.title}})),ft.setVisible(!1),Qe.refresh();case 4:case"end":return yn.stop()}},At)}))()}}}}}}}}}}),(Me==null?void 0:Me.target)&&(0,t.jsx)(S.Qf,{title:"\u6807\u9898\u5B57\u6BB5",options:gt,value:ye==null||(ve=ye["x-component-props"])===null||ve===void 0||(ve=ve.fieldNames)===null||ve===void 0?void 0:ve.label,onChange:function(pt){var ft,mt=o()(o()({},(ft=ye["x-component-props"])===null||ft===void 0?void 0:ft.fieldNames),{},{label:pt});Tt().set(ye,"x-component-props.fieldNames",mt),Ue.query(".*.".concat(ye.name)).take(function(At){At.componentProps.fieldNames=mt}),Qe.emit("patch",{schema:{"x-uid":ye["x-uid"],"x-component-props":{fieldNames:mt}}}),Qe.refresh()}}),(0,t.jsx)(S.Z5,{}),(0,t.jsx)(S.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}})]})},lv=function(){var W=(0,u.useCollection_deprecated)(),de=W.name,ve=W.title;return(0,t.jsx)(S.aN,{title:ve||de,children:(0,t.jsx)(S.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}})})},sv=function(W){var de=(0,m.useFieldSchema)(),ve=(0,Ne.IU)(de["x-initializer"],de["x-initializer-props"]),he=ve.render,ye=(0,Uo.z)(),Me=ye.getAriaLabel;return(0,t.jsx)("div",{className:"general-schema-designer",children:(0,t.jsx)("div",{className:"general-schema-designer-icons",children:(0,t.jsxs)(We.Z,{size:2,align:"center",children:[(0,t.jsx)(E.DragHandler,{children:(0,t.jsx)(ga.Z,{role:"button","aria-label":Me("drag-handler")})}),he()]})})})},uv=[5,10,20,50,100,200],cv=function(W,de){var ve,he;if(W.pagination===!1)return!1;var ye=W.pagination||{};if(W!=null&&(ve=W.request)!==null&&ve!==void 0&&(ve=ve.params)!==null&&ve!==void 0&&ve.pageSize){var Me;ye.defaultPageSize=W==null||(Me=W.request)===null||Me===void 0||(Me=Me.params)===null||Me===void 0?void 0:Me.pageSize}if(!ye.total&&de!==null&&de!==void 0&&(he=de.data)!==null&&he!==void 0&&he.meta){var Ue=de.data.meta,ke=Ue.count,Ye=Ue.page,Qe=Ue.pageSize;ye.total=ke,ye.current=Ye,ye.pageSize=Qe}return o()(o()({pageSizeOptions:uv,showSizeChanger:!0},ye),{},{onChange:function(gt,we){var pt;de==null||de.run(o()(o()({},de==null||(pt=de.params)===null||pt===void 0?void 0:pt[0]),{},{page:gt,pageSize:we}))}})},dv=function(W){var de=W.request,ve=W.pagination,he=W.dataSource;if(de){if(ve===!1)return de;var ye=(0,St.cloneDeep)(de.params||{});return ye.page||(ye.page=(ve==null?void 0:ve.current)||(ve==null?void 0:ve.defaultCurrent)||1),ye.pageSize||(ye.pageSize=(ve==null?void 0:ve.pageSize)||(ve==null?void 0:ve.defaultPageSize)||10),de.params=ye,de}return function(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ue=Me.page,ke=Ue===void 0?1:Ue,Ye=Me.pageSize,Qe=Ye===void 0?10:Ye,et=(ke-1)*Qe,gt=et+Qe-1;return Promise.resolve({data:ve===!1?he:he==null?void 0:he.slice(et,gt+1),meta:{page:ke,pageSize:Qe,count:(he==null?void 0:he.length)||0}})}},mv=function(W,de){return(0,Tr.useRequest)(dv(de),W)},vv=function(){var W,de=(0,Tr.useAsyncData)();return[de==null||(W=de.state)===null||W===void 0?void 0:W.selectedRowKeys,function(ve){var he;return de==null||(he=de.setState)===null||he===void 0?void 0:he.call(de,{selectedRowKeys:ve})}]},Fu=(0,m.observer)(function(te){var W=te.rowKey,de=W===void 0?"id":W,ve=te.useDataSource,he=ve===void 0?mv:ve,ye=te.useSelectedRowKeys,Me=ye===void 0?vv:ye,Ue=(0,m.useField)(),ke=(0,m.useFieldSchema)(),Ye=(0,a.useMemo)(function(){return(0,x.createForm)()},[]),Qe=(0,Et.lI)(Ye.createArrayField(o()(o()({},Ue.props),{},{basePath:""}))),et=he({uid:ke["x-uid"],onSuccess:function(we){var pt,ft,mt,At;if(Ye.setValues(Je()({},ke.name,we==null?void 0:we.data)),(Ue==null||(pt=Ue.componentProps)===null||pt===void 0?void 0:pt.pagination)!==!1){if(Ue.componentProps.pagination=Ue.componentProps.pagination||{},we!=null&&(ft=we.meta)!==null&&ft!==void 0&&ft.count){var yt;Ue.componentProps.pagination.total=we==null||(yt=we.meta)===null||yt===void 0?void 0:yt.count}Ue.componentProps.pagination.current=(we==null||(mt=we.meta)===null||mt===void 0?void 0:mt.page)||1,Ue.componentProps.pagination.pageSize=(we==null||(At=we.meta)===null||At===void 0?void 0:At.pageSize)||10}}},te);return(0,t.jsx)(Tr.AsyncDataProvider,{value:et,children:(0,t.jsx)(m.FormContext.Provider,{value:Ye,children:(0,t.jsx)(m.FieldContext.Provider,{value:Qe,children:(0,t.jsx)(Tu,o()(o()({},te),{},{rowKey:de,useSelectedRowKeys:Me,loading:et==null?void 0:et.loading,pagination:cv(te,et)}))})})})},{displayName:"TableVoid"}),pv=function(W){return(0,ge.isArr)(W)?W:(0,ge.isValid)(W)?[W]:[]},fv=(0,m.observer)(function(te){var W=te.rowKey,de=W===void 0?"id":W,ve=te.objectValue,he=(0,m.useField)(),ye=o()(o()({type:"checkbox"},te.rowSelection),{},{selectedRowKeys:pv(he.value).map(function(Me){return mn()(Me)==="object"?Me[de]:Me}),onChange:function(Ue,ke){ye.type==="checkbox"?te.onChange(ve?ke:Ue):te.onChange(Ft()(ve?ke:Ue).shift())}});return(0,t.jsx)(Fu,o()(o()({},te),{},{rowSelection:ye}))},{displayName:"TableRowSelection"}),hv=function(){var W,de,ve,he=(0,u.useCollection_deprecated)(),ye=he.name,Me=he.title,Ue=(0,m.useField)(),ke=(0,m.useFieldSchema)(),Ye=(0,$e.useCollectionFilterOptions)(ye),Qe=(0,$e.useSortFields)(ye),et=(0,u.useResourceActionContext)(),gt=(0,lt.$)(),we=gt.t,pt=(0,Et.ng)(),ft=pt.dn,mt=(ke==null||(W=ke["x-decorator-props"])===null||W===void 0||(W=W.request)===null||W===void 0||(W=W.params)===null||W===void 0?void 0:W.filter)||{},At=(ke==null||(de=ke["x-decorator-props"])===null||de===void 0||(de=de.request)===null||de===void 0||(de=de.params)===null||de===void 0?void 0:de.sort)||[],yt=At==null?void 0:At.map(function(gn){return gn.startsWith("-")?{field:gn.substring(1),direction:"desc"}:{field:gn,direction:"asc"}}),on=(0,O.zy)(),yn=(0,N.rE)(),In=yn.componentNamePrefix;return(0,t.jsxs)(S.aN,{template:on,title:Me||ye,children:[(0,t.jsx)(S.hj,{title:we("Enable drag and drop sorting"),checked:Ue.decoratorProps.dragSort,onChange:function(Kt){var tn,Qn;Ue.decoratorProps.dragSort=Kt,ke["x-decorator-props"].dragSort=Kt,et.run(o()(o()({},(tn=et.params)===null||tn===void 0?void 0:tn[0]),{},{sort:"sort"})),ft.emit("patch",{schema:(Qn={},Je()(Qn,"x-uid",ke["x-uid"]),Je()(Qn,"x-decorator-props",ke["x-decorator-props"]),Qn)})}}),(0,t.jsx)(S.B0,{title:"\u8BBE\u7F6E\u6570\u636E\u8303\u56F4",schema:{type:"object",title:"\u8BBE\u7F6E\u6570\u636E\u8303\u56F4",properties:{filter:{default:mt,title:"\u6570\u636E\u8303\u56F4",enum:Ye,"x-component":"Filter","x-component-props":{}}}},onSubmit:function(Kt){var tn,Qn,sr=Kt.filter,or=Ue.decoratorProps.request.params||{};or.filter=sr,Ue.decoratorProps.request.params=or,ke["x-decorator-props"].request.params=or,et.run(o()(o()({},(tn=et.params)===null||tn===void 0?void 0:tn[0]),{},{filter:sr})),ft.emit("patch",{schema:(Qn={},Je()(Qn,"x-uid",ke["x-uid"]),Je()(Qn,"x-decorator-props",ke["x-decorator-props"]),Qn)})}}),(0,t.jsx)(S.B0,{title:we("Set default sorting rules"),components:{ArrayItems:f.ArrayItems},schema:{type:"object",title:we("Set default sorting rules"),properties:{sort:{type:"array",default:yt,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:Qe,required:!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:we("ASC"),value:"asc"},{label:we("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:we("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function(Kt){var tn,Qn,sr=Kt.sort,or=sr.map(function(Gn){return Gn.direction==="desc"?"-".concat(Gn.field):Gn.field}),Un=Ue.decoratorProps.request.params||{};Un.sort=or,Ue.decoratorProps.request.params=Un,ke["x-decorator-props"].request.params=Un,ft.emit("patch",{schema:(tn={},Je()(tn,"x-uid",ke["x-uid"]),Je()(tn,"x-decorator-props",ke["x-decorator-props"]),tn)}),et.run(o()(o()({},(Qn=et.params)===null||Qn===void 0?void 0:Qn[0]),{},{sort:or}))}}),(0,t.jsx)(S.Qf,{title:"\u6BCF\u9875\u663E\u793A",value:((ve=Ue.decoratorProps.request.params)===null||ve===void 0?void 0:ve.pageSize)||20,options:[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100},{label:"200",value:200}],onChange:function(Kt){var tn,Qn,sr=Ue.decoratorProps.request.params||{};sr.pageSize=Kt,Ue.decoratorProps.request.params=sr,ke["x-decorator-props"].request.params=sr,et.run(o()(o()({},(tn=et.params)===null||tn===void 0?void 0:tn[0]),{},{pageSize:Kt})),ft.emit("patch",{schema:(Qn={},Je()(Qn,"x-uid",ke["x-uid"]),Je()(Qn,"x-decorator-props",ke["x-decorator-props"]),Qn)})}}),(0,t.jsx)(S.Z5,{}),(0,t.jsx)(H.G,{componentName:"".concat(In,"Table"),collectionName:ye}),(0,t.jsx)(S.Z5,{}),(0,t.jsx)(S.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}})]})},Qo=function(){return null};Qo.Array=Tu,Qo.Void=Fu,Qo.Void.Designer=hv,Qo.RowSelection=fv,Qo.Column=nv,Qo.Column.ActionBar=rv.p,Qo.Column.Decorator=ov.h,Qo.Column.Designer=iv,Qo.RowActionDesigner=sv,Qo.Designer=lv,Qo.Array.Designer=tv;var Ru=e(72160),gv=function(W){var de=(0,m.useFieldSchema)(),ve=(0,Ne.IU)(de["x-initializer"],de["x-initializer-props"]),he=ve.render,ye=(0,Ne.mQ)("fieldSettings:TableColumn"),Me=ye.render,Ue=(0,Uo.z)(),ke=Ue.getAriaLabel;return(0,t.jsx)("div",{className:"general-schema-designer",children:(0,t.jsx)("div",{className:"general-schema-designer-icons",children:(0,t.jsxs)(We.Z,{size:2,align:"center",children:[(0,t.jsx)(E.DragHandler,{children:(0,t.jsx)(ga.Z,{role:"button","aria-label":ke("drag-handler")})}),he(),Me()]})})})},_v=function(W){var de=(0,m.useField)();return(0,t.jsx)("div",{role:"button",children:de.title})},Cv=e(95686),Sl=e(81230),xv=e(30970),Pv=function(W){var de=(0,bn.pW)();return(0,t.jsx)("div",{children:de+1})},yv=Ru.iA,Sv=e(13845),bl=function(){var W=(0,u.useCollection_deprecated)(),de=W.fields,ve=(0,m.useField)(),he=(0,m.useFieldSchema)(),ye=(0,lt.$)(),Me=ye.t,Ue=(0,Et.ng)(),ke=Ue.dn,Ye=(0,Et.eJ)(),Qe=(0,Ae.Si)(),et=Qe.service,gt=de.filter(function(we){return!(we!=null&&we.target)&&we.interface==="sort"}).map(function(we){var pt;return{value:we==null?void 0:we.name,label:Ye(we==null||(pt=we.uiSchema)===null||pt===void 0?void 0:pt.title)||(we==null?void 0:we.name)}});return(0,t.jsx)(S.Qf,{title:Me("Drag and drop sorting field"),options:gt,value:ve.decoratorProps.dragSortBy,onChange:function(pt){var ft,mt;he["x-decorator-props"].dragSortBy=pt,et.run(o()(o()({},(ft=et.params)===null||ft===void 0?void 0:ft[0]),{},{sort:pt})),ve.decoratorProps.dragSortBy=pt,ke.emit("patch",{schema:(mt={},Je()(mt,"x-uid",he["x-uid"]),Je()(mt,"x-decorator-props",he["x-decorator-props"]),mt)}),ke.refresh()}},"sort-field")},ju=function(){var W,de,ve,he,ye,Me,Ue,ke,Ye=(0,u.useCollection_deprecated)(),Qe=Ye.name,et=Ye.title,gt=(0,u.useCollectionManager_deprecated)(),we=gt.getCollectionField,pt=gt.getCollection,ft=(0,m.useField)(),mt=(0,m.useFieldSchema)(),At=(0,ze.bz)(),yt=At.form,on=(0,$e.useSortFields)(Qe),yn=(0,Ae.Si)(),In=yn.service,gn=(0,lt.$)(),Kt=gn.t,tn=(0,Et.ng)(),Qn=tn.dn,sr=(0,N.rE)(),or=sr.componentNamePrefix,Un=(mt==null||(W=mt["x-decorator-props"])===null||W===void 0||(W=W.params)===null||W===void 0?void 0:W.sort)||[],Gn=(mt==null||(de=mt["x-decorator-props"])===null||de===void 0?void 0:de.resource)||(mt==null||(ve=mt["x-decorator-props"])===null||ve===void 0?void 0:ve.association),Sn=!(mt!=null&&(he=mt["x-decorator-props"])!==null&&he!==void 0&&he.disableTemplate),qn=Un==null?void 0:Un.map(function(vr){return vr!=null&&vr.startsWith("-")?{field:vr.substring(1),direction:"desc"}:{field:vr,direction:"asc"}}),xr=(0,O.zy)(),nr=(0,u.useCollection_deprecated)(),Nn=ft.decoratorProps,lr=Nn.dragSort,Dn=Nn.resource,qt=Dn&&we(Dn),kn=Dn!=null&&Dn.includes(".")?(ye=pt(qt==null?void 0:qt.target))===null||ye===void 0?void 0:ye.tree:!!(nr!=null&&nr.tree),cr=(0,a.useCallback)(function(vr){var hr,pr=vr.filter;pr=(0,un.Wm)(pr);var Mr=ft.decoratorProps.params||{};Mr.filter=pr,ft.decoratorProps.params=Mr,mt["x-decorator-props"].params=Mr,Qn.emit("patch",{schema:(hr={},Je()(hr,"x-uid",mt["x-uid"]),Je()(hr,"x-decorator-props",mt["x-decorator-props"]),hr)}),In.params[0].page=1},[Qn,ft.decoratorProps,mt,In]),ar=(0,d.LY)();return(0,t.jsxs)(S.aN,{template:xr,title:et||Qe,children:[(0,t.jsx)($n._,{}),(0,t.jsx)($t.q,{}),(nr==null?void 0:nr.tree)&&(qt==null?void 0:qt.collectionName)===(qt==null?void 0:qt.target)&&(0,t.jsx)(S.hj,{title:Kt("Tree table"),defaultChecked:!0,checked:kn?ft.decoratorProps.treeTable:!1,onChange:function(hr){var pr;ft.decoratorProps.treeTable=hr,mt["x-decorator-props"].treeTable=hr;var Mr=o()(o()({},(pr=In.params)===null||pr===void 0?void 0:pr[0]),{},{tree:hr?!0:null});Qn.emit("patch",{schema:mt}),Qn.refresh(),In.run(Mr)}}),(0,t.jsx)(S.hj,{title:Kt("Enable drag and drop sorting"),checked:ft.decoratorProps.dragSort,onChange:function(){var vr=A()(g()().mark(function hr(pr){var Mr,$r,yr;return g()().wrap(function(Xr){for(;;)switch(Xr.prev=Xr.next){case 0:if(!(pr&&qt)){Xr.next=5;break}return Xr.next=3,ar.resource("collections.fields",qt.collectionName).update({filterByTk:qt.name,values:{sortable:!0}});case 3:$r=Xr.sent,yr=$r.data;case 5:ft.decoratorProps.dragSort=pr,mt["x-decorator-props"].dragSort=pr,Qn.emit("patch",{schema:(Mr={},Je()(Mr,"x-uid",mt["x-uid"]),Je()(Mr,"x-decorator-props",mt["x-decorator-props"]),Mr)});case 8:case"end":return Xr.stop()}},hr)}));return function(hr){return vr.apply(this,arguments)}}()}),ft.decoratorProps.dragSort&&(0,t.jsx)(bl,{}),(0,t.jsx)(pn.H,{collectionName:Qe,defaultFilter:(mt==null||(Me=mt["x-decorator-props"])===null||Me===void 0||(Me=Me.params)===null||Me===void 0?void 0:Me.filter)||{},form:yt,onSubmit:cr}),!lr&&(0,t.jsx)(S.B0,{title:Kt("Set default sorting rules"),components:{ArrayItems:f.ArrayItems},schema:{type:"object",title:Kt("Set default sorting rules"),properties:{sort:{type:"array",default:qn,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:on,required:!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:Kt("ASC"),value:"asc"},{label:Kt("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:Kt("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function(hr){var pr,Mr,$r=hr.sort,yr=$r.map(function(Xr){return Xr.direction==="desc"?"-".concat(Xr.field):Xr.field}),jr=ft.decoratorProps.params||{};jr.sort=yr,ft.decoratorProps.params=jr,mt["x-decorator-props"].params=jr,Qn.emit("patch",{schema:(pr={},Je()(pr,"x-uid",mt["x-uid"]),Je()(pr,"x-decorator-props",mt["x-decorator-props"]),pr)}),In.run(o()(o()({},(Mr=In.params)===null||Mr===void 0?void 0:Mr[0]),{},{sort:yr}))}}),(0,t.jsx)(Pt.jI,{}),(0,t.jsx)(S.Qf,{title:Kt("Records per page"),value:((Ue=ft.decoratorProps)===null||Ue===void 0||(Ue=Ue.params)===null||Ue===void 0?void 0:Ue.pageSize)||20,options:[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100},{label:"200",value:200}],onChange:function(hr){var pr,Mr,$r=ft.decoratorProps.params||{};$r.pageSize=hr,ft.decoratorProps.params=$r,mt["x-decorator-props"].params=$r,In.run(o()(o()({},(pr=In.params)===null||pr===void 0?void 0:pr[0]),{},{pageSize:hr,page:1})),Qn.emit("patch",{schema:(Mr={},Je()(Mr,"x-uid",mt["x-uid"]),Je()(Mr,"x-decorator-props",mt["x-decorator-props"]),Mr)})}}),(0,t.jsx)(S.Qf,{title:Kt("Table size"),value:((ke=ft.componentProps)===null||ke===void 0?void 0:ke.size)||"middle",options:[{label:Kt("Large"),value:"large"},{label:Kt("Middle"),value:"middle"},{label:Kt("Small"),value:"small"}],onChange:function(hr){var pr,Mr=mt.reduceProperties(function($r,yr){if(yr["x-component"]==="TableV2")return yr},null);Mr["x-component-props"]=Mr["x-component-props"]||{},Mr["x-component-props"].size=hr,Qn.emit("patch",{schema:(pr={},Je()(pr,"x-uid",Mr["x-uid"]),Je()(pr,"x-decorator-props",Mr["x-component-props"]),pr)})}}),(0,t.jsx)(Sv.F,{type:Qt.vC.TABLE,emptyDescription:Kt("No blocks to connect")}),Sn&&(0,t.jsx)(S.Z5,{}),Sn&&(0,t.jsx)(H.G,{componentName:"".concat(or,"Table"),collectionName:Qe,resourceName:Gn}),(0,t.jsx)(S.Z5,{}),(0,t.jsx)(S.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}})]})},El=(0,m.observer)(function(te){var W=(0,m.useFieldSchema)(),de=(0,u.useCollection_deprecated)(),ve=de.getField,he=(0,m.useField)(),ye=ve(W.name),Me=(0,Et.eJ)();return(0,a.useEffect)(function(){if(!he.title){var Ue;he.title=Me(ye==null||(Ue=ye.uiSchema)===null||Ue===void 0?void 0:Ue.title)}},[]),(0,a.useEffect)(function(){he.decoratorProps.asterisk=W.required},[W.required]),(0,t.jsx)("div",{children:te.children})},{displayName:"TableField"});El.ActionBar=(0,m.observer)(function(te){var W=(0,m.useForm)();return W.readPretty?null:(0,t.jsx)("div",{style:{marginBottom:8,marginTop:-32},children:(0,t.jsx)(k.ol,o()({},te))})},{displayName:"TableField.ActionBar"});var Bu=e(22691),Lu=function(){var W,de,ve,he=(0,u.useCollection_deprecated)(),ye=he.name,Me=he.title,Ue=(0,u.useCollectionManager_deprecated)(),ke=Ue.getCollectionJoinField,Ye=Ue.getAllCollectionsInheritChain,Qe=(0,m.useField)(),et=(0,m.useFieldSchema)(),gt=(0,ze.bz)(),we=gt.form,pt=(0,$e.useSortFields)(ye),ft=(0,Ae.CL)(),mt=ft.service,At=ft.extraFilter,yt=(0,lt.$)(),on=yt.t,yn=(0,Et.ng)(),In=yn.dn,gn=(et==null||(W=et["x-decorator-props"])===null||W===void 0||(W=W.params)===null||W===void 0?void 0:W.sort)||[],Kt=(0,bo.br)(et,"CollectionField"),tn=ke(Kt==null?void 0:Kt["x-collection-field"]),Qn=gn==null?void 0:gn.map(function(Nn){return Nn.startsWith("-")?{field:Nn.substring(1),direction:"desc"}:{field:Nn,direction:"asc"}}),sr=(0,O.zy)(),or=(0,u.useCollection_deprecated)(),Un=Qe.decoratorProps.dragSort,Gn=(0,bn.a)(),Sn=(0,fe.OQ)(),qn=(0,a.useContext)(Co.b7),xr=qn.currentFormCollection,nr=(0,fe.Kp)({collectionName:xr});return(0,t.jsxs)(S.aN,{template:sr,title:Me||ye,disableInitializer:!0,children:[(0,t.jsx)(pn.H,{defaultFilter:(et==null||(de=et["x-decorator-props"])===null||de===void 0||(de=de.params)===null||de===void 0?void 0:de.filter)||{},form:we,onSubmit:function(lr){var Dn,qt,kn=lr.filter;kn=(0,un.Wm)(kn);var cr=Qe.decoratorProps.params||{};cr.filter=kn,Qe.decoratorProps.params=cr,et["x-decorator-props"].params=cr;var ar=Tt().cloneDeep(kn);At&&(ar?ar={$and:[At,ar]}:ar=At),mt.run(o()(o()({},(Dn=mt.params)===null||Dn===void 0?void 0:Dn[0]),{},{filter:ar,page:1})),In.emit("patch",{schema:(qt={},Je()(qt,"x-uid",et["x-uid"]),Je()(qt,"x-decorator-props",et["x-decorator-props"]),qt)})},collectionName:ye,dynamicComponent:function(lr){return(0,t.jsx)(Bu.qj,o()(o()({},lr),{},{form:we,collectionField:lr.collectionField,record:Gn,shouldChange:(0,Bu.Vc)({collectionField:lr.collectionField,variables:Sn,localVariables:nr,getAllCollectionsInheritChain:Ye}),currentFormCollectionName:xr,currentIterationCollectionName:tn.collectionName}))}}),(or==null?void 0:or.tree)&&(tn==null?void 0:tn.target)===(tn==null?void 0:tn.collectionName)&&(0,t.jsx)(S.hj,{title:on("Tree table"),defaultChecked:!0,checked:Qe.decoratorProps.treeTable,onChange:function(lr){var Dn;Qe.form.clearFormGraph("".concat(Qe.address,".*")),Qe.decoratorProps.treeTable=lr,et["x-decorator-props"].treeTable=lr;var qt=o()(o()({},(Dn=mt.params)===null||Dn===void 0?void 0:Dn[0]),{},{tree:lr?!0:null});In.emit("patch",{schema:et}),In.refresh(),mt.run(qt)}}),(0,t.jsx)(Pt.jI,{}),!Un&&(0,t.jsx)(S.B0,{title:on("Set default sorting rules"),components:{ArrayItems:f.ArrayItems},schema:{type:"object",title:on("Set default sorting rules"),properties:{sort:{type:"array",default:Qn,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:pt,required:!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:on("ASC"),value:"asc"},{label:on("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:on("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function(lr){var Dn,qt,kn=lr.sort,cr=kn.map(function(vr){return vr.direction==="desc"?"-".concat(vr.field):vr.field}),ar=Qe.decoratorProps.params||{};ar.sort=cr,Qe.decoratorProps.params=ar,et["x-decorator-props"].params=ar,In.emit("patch",{schema:(Dn={},Je()(Dn,"x-uid",et["x-uid"]),Je()(Dn,"x-decorator-props",et["x-decorator-props"]),Dn)}),mt.run(o()(o()({},(qt=mt.params)===null||qt===void 0?void 0:qt[0]),{},{sort:cr}))}}),(0,t.jsx)(S.Qf,{title:on("Records per page"),value:((ve=Qe.decoratorProps)===null||ve===void 0||(ve=ve.params)===null||ve===void 0?void 0:ve.pageSize)||20,options:[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100},{label:"200",value:200}],onChange:function(lr){var Dn,qt,kn=Qe.decoratorProps.params||{};kn.pageSize=lr,Qe.decoratorProps.params=kn,et["x-decorator-props"].params=kn,mt.run(o()(o()({},(Dn=mt.params)===null||Dn===void 0?void 0:Dn[0]),{},{pageSize:lr,page:1})),In.emit("patch",{schema:(qt={},Je()(qt,"x-uid",et["x-uid"]),Je()(qt,"x-decorator-props",et["x-decorator-props"]),qt)})}}),(0,t.jsx)(S.Z5,{}),(0,t.jsx)(S.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}})]})},va=Ru.iA;va.Column=_v,va.Column.ActionBar=Cv.p,va.Column.Decorator=Sl.hI,va.Column.Designer=xv._E,va.ActionColumnDesigner=gv,va.Selector=yv,va.Index=Pv;var bv=e(98146),Ev=function(){var W=(0,m.useField)(),de=(0,m.useFieldSchema)(),ve=(0,Et.ng)(),he=ve.dn,ye=(0,lt.$)(),Me=ye.t;return(0,t.jsxs)(Tr.GeneralSchemaDesigner,{disableInitializer:!0,children:[(0,t.jsx)(Tr.SchemaSettingsModalItem,{title:Me("Edit"),schema:{type:"object",title:Me("Edit tab"),properties:{title:{title:Me("Tab name"),required:!0,"x-decorator":"FormItem","x-component":"Input","x-component-props":{}},icon:{title:Me("Icon"),"x-decorator":"FormItem","x-component":"IconPicker","x-component-props":{}}}},initialValues:{title:W.title,icon:W.componentProps.icon},onSubmit:function(ke){var Ye,Qe=ke.title,et=ke.icon,gt=de["x-component-props"]||{};de.title=Qe,W.title=Qe,gt.icon=et,W.componentProps.icon=et,de["x-component-props"]=de["x-component-props"]||{},de["x-component-props"].icon=et,he.emit("patch",{schema:(Ye={},Je()(Ye,"x-uid",de["x-uid"]),Je()(Ye,"title",Qe),Je()(Ye,"x-component-props",gt),Ye)})}},"edit"),(0,t.jsx)(Tr.SchemaSettingsDivider,{}),(0,t.jsx)(Tr.SchemaSettingsRemove,{})]})},Uu,zu=a.memo(m.RecursionField);zu.displayName="MemoizeRecursionField";var Ku=a.memo(ao.Z);Ku.displayName="MemoizeTabs";var Ja=a.memo(function(te){var W=(0,m.useFieldSchema)(),de=(0,Ne.IU)(W["x-initializer"],W["x-initializer-props"]),ve=de.render,he=(0,Ya.g)(),ye=he.PaneRoot,Me=ye===void 0?a.Fragment:ye,Ue=(0,a.useMemo)(function(){var Ye=W.mapProperties(function(Qe,et){return{key:et,label:(0,t.jsx)(zu,{name:et,schema:Qe,onlyRenderSelf:!0}),children:(0,t.jsx)(Me,o()(o()({},Me!==a.Fragment?{active:et===he.activeKey}:{}),{},{children:(0,t.jsx)($.n6,{name:et,schema:Qe,onlyRenderProperties:!0,distributed:!0})}),et)}});return Ye},[W.mapProperties(function(Ye,Qe){return Qe}).join()]),ke=(0,a.useMemo)(function(){return{right:ve(),left:he==null?void 0:he.tabBarExtraContent}},[he==null?void 0:he.tabBarExtraContent,ve]);return(0,t.jsx)(E.DndContext,{children:(0,t.jsx)(Ku,o()(o()({},he),{},{destroyInactiveTabPane:!0,tabBarExtraContent:ke,style:te.style,items:Ue}))})});Ja.displayName="Tabs";var Dv=(0,ue.css)(Uu||(Uu=ee()([`
  position: relative;
  &:hover {
    > .general-schema-designer {
      display: block;
    }
  }
  &.nb-action-link {
    > .general-schema-designer {
      top: -10px;
      bottom: -10px;
      left: -10px;
      right: -10px;
    }
  }
  > .general-schema-designer {
    position: absolute;
    z-index: 999;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    display: none;
    background: var(--colorBgSettingsHover);
    border: 0;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    pointer-events: none;
    > .general-schema-designer-icons {
      position: absolute;
      right: 2px;
      top: 2px;
      line-height: 16px;
      pointer-events: all;
      .ant-space-item {
        background-color: var(--colorSettings);
        color: #fff;
        line-height: 16px;
        width: 16px;
        padding-left: 1px;
        align-self: stretch;
      }
    }
  }
`])));Ja.TabPane=(0,Se.t)((0,m.observer)(function(te){var W=(0,bv.e)(),de=(0,m.useField)();return te.hidden?null:(0,t.jsxs)(E.SortableItem,{className:_r()("nb-action-link",Dv,te.className),children:[te.icon&&(0,t.jsx)(po.JO,{style:{marginRight:2},type:te.icon})," ",te.tab||de.title,(0,t.jsx)(W,{})]})},{displayName:"Tabs.TabPane"})),Ja.TabPane.displayName="Tabs.TabPane",Ja.Designer=Ev;var Wu=e(46073),Nu=e(68351),Dl=function(W){var de=W.value,ve=W.format,he=ve===void 0?"HH:mm:ss":ve,ye=(0,ml.F)("description-text",W),Me=(0,ge.toArr)(de),Ue=function(){var Ye=Me.map(function(Qe){return _n()(Qe,"HH:mm:ss").format(he)});return Ye.join("~")};return(0,t.jsx)("div",{className:_r()(ye,W.className),style:W.style,children:Ue()})},Hi=function(){return function(W,de){var ve=W.format||"HH:mm:ss",he=W.onChange;return o()(o()({},W),{},{format:ve,inputReadOnly:!0,value:(0,Wu.q)(W.value,ve),onChange:function(Me){he&&he((0,Wu.U)(Me,ve)||null)}})}},Gi=(0,m.connect)(Nu.Z,(0,m.mapProps)(Hi()),(0,m.mapReadPretty)(Dl));Gi.RangePicker=(0,m.connect)(Nu.Z.RangePicker,(0,m.mapProps)(Hi()),(0,m.mapReadPretty)(Dl)),Gi.ReadPretty=Dl;var mp=null,Mv=(0,m.observer)(function(te){var W,de,ve=(0,m.useField)(),he=te.placeholder,ye=(0,ml.F)("description-tree-select",te),Me=ve!=null&&(W=ve.dataSource)!==null&&W!==void 0&&W.length?ve.dataSource:te!=null&&(de=te.treeData)!==null&&de!==void 0&&de.length?te.treeData:[],Ue=function(){var et=te.value;return te.multiple?te.labelInValue?(0,ge.isArr)(et)?et:[]:(0,ge.isArr)(et)?et.map(function(gt){return{label:gt,value:gt}}):[]:te.labelInValue?et?[et]:[]:et?[{label:et,value:et}]:[]},ke=function Qe(et,gt){for(var we=0;we<(gt==null?void 0:gt.length);we++){var pt=gt[we];if((pt==null?void 0:pt.value)===et)return pt==null?void 0:pt.label;var ft=Qe(et,pt==null?void 0:pt.children);if(ft)return ft}},Ye=function(){var et=Ue();return et!=null&&et.length?et.map(function(gt,we){var pt=gt.value,ft=gt.label;return(0,t.jsx)(an.Z,{children:ke(pt,Me)||ft||he},we)}):(0,t.jsx)(an.Z,{children:he})};return(0,t.jsx)("div",{className:_r()(ye,te.className),style:te.style,children:Ye()})},{displayName:"ReadPretty"}),$u=(0,m.connect)(dn.Z,(0,m.mapProps)({dataSource:"treeData"},function(te,W){return o()(o()({},te),{},{suffixIcon:W!=null&&W.loading||W!=null&&W.validating?(0,t.jsx)(vn.Z,{}):te.suffixIcon})}),(0,m.mapReadPretty)(Mv)),vp=null,Iv=function(W,de){return W?Av(W,de):null};function Av(te){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"second",de=W==="second"?te*1e3:te,ve=new Date(de);return isNaN(ve.getTime())?"Invalid timestamp":ve.toUTCString()}var Vu=(0,m.connect)(function(te){var W=te.value,de=te.onChange,ve=te.accuracy,he=(0,a.useMemo)(function(){if(typeof W=="number"){var ye=Iv(W,ve);return ye}return W},[W]);return(0,t.jsx)(Sa.Mt,o()(o()({},te),{},{value:he,onChange:function(Me){de&&de(Me)}}))},(0,m.mapReadPretty)(function(te){var W=te.value;return(0,t.jsx)(Sa.Mt.ReadPretty,o()(o()({},te),{},{value:W}))})),ca=e(91053),Ov=e(57340),Tv=e(20486),Fv=e(27560),Rv=["supportsLineBreak","password","number","boolean","input","expression"],jv=function(W){var de=(0,Fv.X)("$env");return(0,a.useMemo)(function(){return de?[de].filter(Boolean):W},[de,W])},Bv=function(W){var de=/{{.*?}}/;return de.test(W)},ku=(0,m.connect)(function(te){var W=te.supportsLineBreak,de=te.password,ve=te.number,he=te.boolean,ye=te.input,Me=te.expression,Ue=Me===void 0?!0:Me,ke=b()(te,Rv),Ye=jv(te.scope),Qe={value:"name",label:"title"};return W?(0,t.jsx)(Tv.f,o()(o()({},ke),{},{scope:Ye,fieldNames:Qe,rows:3})):ve?(0,t.jsx)(ca._w.Input,o()(o()({},te),{},{scope:Ye,fieldNames:Qe})):de&&te.value&&!Bv(te.value)?(0,t.jsx)(xl,o()(o()({},ke),{},{autoFocus:!0})):he?(0,t.jsx)(ca._w.Input,o()(o()({},te),{},{scope:Ye,fieldNames:Qe})):ye?(0,t.jsx)(ca._w.Input,o()(o()({},ke),{},{scope:Ye,fieldNames:Qe})):Ue?(0,t.jsx)(Ov.K,o()(o()({},ke),{},{scope:Ye,fieldNames:Qe})):(0,t.jsx)(ca._w.Input,o()(o()({},ke),{},{scope:Ye,fieldNames:Qe}))},(0,m.mapReadPretty)(ro.II.ReadPretty)),Lv=e(95012),Uv=function(W){return(0,ge.isNum)(W)||(0,ge.isStr)(W)||(0,ge.isBool)(W)||a.isValidElement(W)},zv=function(W){return Uv(W)?{title:W}:W};function fi(te,W,de,ve){((0,ge.isFn)(W)||a.isValidElement(W))&&(ve=de,de=W,W="form-drawer");var he={host:document.createElement("div"),openMiddlewares:[],form:null,promise:null},ye=(0,c.CT)(he.host,W),Me=zv(te),Ue=o()(o()({width:"40%"},Me),{},{onClose:function(gt){var we;(Me==null||(we=Me.onClose)===null||we===void 0?void 0:we.call(Me,gt))!==!1&&Qe.close()},afterVisibleChange:function(gt){var we;Me==null||(we=Me.afterVisibleChange)===null||we===void 0||we.call(Me,gt),!gt&&ye.unmount()}}),ke=(0,m.observer)(function(){return(0,t.jsx)(a.Fragment,{children:(0,ge.isFn)(de)?de(he.form):de})}),Ye=function(){var gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(0,t.jsx)(co.YO,{theme:ve,children:(0,t.jsx)(Lv.Z,o()(o()({},Ue),{},{visible:gt,children:(0,t.jsx)(m.FormProvider,{form:he.form,children:(0,t.jsx)(ke,{})})}))})};document.body.appendChild(he.host);var Qe={forOpen:function(gt){return(0,ge.isFn)(gt)&&he.openMiddlewares.push(gt),Qe},open:function(gt){return he.promise||(he.promise=new Promise(function(){var we=A()(g()().mark(function pt(ft,mt){return g()().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:return yt.prev=0,yt.next=3,(0,c.V_)(Ue.loadingText,function(){return(0,ge.applyMiddleware)(gt,he.openMiddlewares)});case 3:gt=yt.sent,he.form=he.form||(0,x.createForm)(o()(o()({},gt),{},{effects:function(yn){var In,gn;(0,x.onFormSubmitSuccess)(function(){ft((0,ci.toJS)(yn.values)),Qe.close()}),(In=gt)===null||In===void 0||(gn=In.effects)===null||gn===void 0||gn.call(In,yn)}})),yt.next=10;break;case 7:yt.prev=7,yt.t0=yt.catch(0),mt(yt.t0);case 10:ye.render(function(){return Ye(!1)}),setTimeout(function(){ye.render(function(){return Ye(!0)})},16);case 12:case"end":return yt.stop()}},pt,null,[[0,7]])}));return function(pt,ft){return we.apply(this,arguments)}}())),he.promise},close:function(){he.host&&ye.render(function(){return Ye(!1)})}};return Qe}var Kv=function(W){var de=(0,a.useRef)(),ve=(0,a.useState)(),he=Re()(ve,2),ye=he[0],Me=he[1],Ue=(0,a.useRef)(),ke=(0,c.F8)("drawer");return(0,a.useLayoutEffect)(function(){var Ye,Qe=(Ye=de.current)===null||Ye===void 0||(Ye=Ye.closest(".".concat(ke,"-wrapper-body")))===null||Ye===void 0?void 0:Ye.querySelector(".".concat(ke,"-header"));Qe&&(Ue.current||(Ue.current=Qe.querySelector(".".concat(ke,"-extra")),Ue.current||(Ue.current=document.createElement("div"),Ue.current.classList.add("".concat(ke,"-extra")),Qe.appendChild(Ue.current))),Me(Ue.current))}),Ue.current=ye,(0,t.jsx)("div",{ref:de,style:{display:"none"},children:ye&&(0,Jo.createPortal)(W.children,ye)})},Wv=function(W){var de=(0,a.useRef)(),ve=(0,a.useState)(),he=Re()(ve,2),ye=he[0],Me=he[1],Ue=(0,a.useRef)(),ke=(0,c.F8)("drawer");return(0,a.useLayoutEffect)(function(){var Ye,Qe=(Ye=de.current)===null||Ye===void 0?void 0:Ye.closest(".".concat(ke,"-wrapper-body"));Qe&&(Ue.current||(Ue.current=Qe.querySelector(".".concat(ke,"-footer")),Ue.current||(Ue.current=document.createElement("div"),Ue.current.classList.add("".concat(ke,"-footer")),Qe.appendChild(Ue.current))),Me(Ue.current))}),Ue.current=ye,(0,t.jsx)("div",{ref:de,style:{display:"none"},children:ye&&(0,Jo.createPortal)(W.children,ye)})};fi.Extra=Kv,fi.Footer=Wv,fi.Portal=(0,c.N4)("form-drawer");var pp=null,Hu=e(61736)},76326:function(He,ae,e){"use strict";e.d(ae,{EC:function(){return v},Pg:function(){return r},cd:function(){return A},d6:function(){return K}});var Z=e(67294),c=e(26793),k=e(68091),i=e(62954),g=e(40341),C=e(85893),A=function(){var h=(0,g.BD)(),M=(0,c.$)(),n=M.t,y=(0,i.eJW)();if(!(h!=null&&h.length))return null;var L=[];return h.forEach(function(o){Object.values(o)[0].length&&L.push({type:"itemGroup",divider:!0,title:n("Parent collection fields")+"("+y("".concat(Object.keys(o)[0]))+")",children:Object.values(o)[0]})}),(0,C.jsx)(k.E0,{children:L})},r=function(){var h=(0,g.hg)({readPretty:!0,block:"Form"}),M=(0,c.$)(),n=M.t;if(h.length===0)return null;var y=[{type:"itemGroup",title:n("Display association fields"),children:h}];return(0,C.jsx)(k.E0,{children:y})},K=function(){var h=(0,g.fE)(),M=(0,c.$)(),n=M.t,y=(0,i.eJW)(),L=[];return(h==null?void 0:h.length)>0&&h.forEach(function(o){Object.values(o)[0].length&&L.push({divider:!0,type:"itemGroup",title:n("Parent collection fields")+"("+y("".concat(Object.keys(o)[0]))+")",children:Object.values(o)[0]})}),(0,C.jsx)(k.E0,{children:L})},v=function(){var h=(0,g.z4)(),M=(0,c.$)(),n=M.t,y=[{type:"itemGroup",title:n("Display association fields"),children:h}];return(0,C.jsx)(k.E0,{children:y})}},94080:function(He,ae,e){"use strict";e.r(ae),e.d(ae,{AssignedField:function(){return E},AssignedFieldValueType:function(){return R},CreateAction:function(){return t},CreateRecordAction:function(){return X},useAclCheck:function(){return S}});var Z=e(97857),c=e.n(Z),k=e(80844),i=e(84327),g=e(96486),C=e.n(g),A=e(67294),r=e(7340),K=e(6145),v=e(94804),j=e(36586),h=e(62954),M=e(22691),n=e(42121),y=e(64910),L=e(85893),o=function(U){var D=(0,k.useField)(),ne=(0,k.useFieldSchema)(),q=(0,K.useCollectionField_deprecated)(),J=q.uiSchema,Y=(0,h.Cor)(J==null?void 0:J["x-component"]),P=(0,h.eJW)(),w=function(le,xe){D[le]=typeof D[le]>"u"?xe:D[le]},ie=function(){typeof ne.required>"u"&&(D.required=!!J.required)};return(0,A.useEffect)(function(){if(J){w("content",J["x-content"]),w("title",J.title),w("description",J.description),w("initialValue",J.default),ne["x-disabled"]===!0&&(D.disabled=!0),ne["x-read-pretty"]===!0&&(D.readPretty=!0),ie(),D.dataSource=J.enum;var G=P(J["x-component-props"])||{},le=(0,i.merge)(G,D.componentProps||{});D.componentProps=le}},[JSON.stringify(J)]),J?A.createElement(Y,U,U.children):null},a=function(U){var D=(0,k.useFieldSchema)();return(0,L.jsx)(v.YT,{name:D.name,children:(0,L.jsx)(o,c()({},U))})},R=function(V){return V.ConstantValue="constantValue",V.DynamicValue="dynamicValue",V}({}),E=function(U){var D=U.value,ne=U.onChange,q=(0,K.useCollectionManager_deprecated)(),J=q.getCollectionFields,Y=q.getAllCollectionsInheritChain,P=(0,K.useCollection_deprecated)(),w=(0,r.bz)(),ie=w.form,G=(0,k.useFieldSchema)(),le=(0,j.a)(),xe=(0,y.OQ)(),_e=(0,y.Kp)(),Ee=(0,K.useCollectionFilterOptions)(P),ze=P.name,Se=P.getField,se=Se(G.name),me=(0,A.useMemo)(function(){return(0,M.Vc)({collectionField:se,variables:xe,localVariables:_e,getAllCollectionsInheritChain:Y})},[se,Y,_e,xe]),pe=(0,A.useCallback)(function(ue){var ge=ue.find(function(Ae){return Ae.value==="$nForm"}),Ie=J(ze);return!(Ie!=null&&Ie.length)&&ge&&(ge.children=(0,n.X)(Ee)),ue},[Ee,ze]),ee=(0,A.useCallback)(function(ue){var ge=ue.value,Ie=ue.onChange;return(0,L.jsx)(a,c()(c()({},U),{},{value:ge,onChange:Ie}))},[JSON.stringify(C().omit(U,"value"))]);return(0,L.jsx)(M.qj,{form:ie,record:le,value:D,onChange:ne,renderSchemaComponent:ee,collectionField:se,shouldChange:me,returnScope:pe,targetFieldSchema:G})},$=e(5574),Q=e.n($),z=e(42922),p=e(85418),b=e(15867),f=e(75531),x=e(21143),m=e(75667),F=e(67354),I=e(75496),d=e(22891),u=e(7840),l=e(68091);function S(V){var U=H();return U(V)}function H(){var V=(0,m.xd)(),U=V.data,D=V.inResources,ne=V.getResourceActionParams,q=V.getStrategyActionParams,J=(0,m.Jn)(),Y=(0,K.useCollection_deprecated)();function P(w){var ie,G=Y.resource,le=function(Ee){var ze=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Se=Ee.split(":"),se=Q()(Se,1),me=se[0];return U!=null&&U.allowAll?{}:D(me)?ne(Ee):q(Ee)};if(!w&&G&&(w="".concat(G,":create}")),(ie=w)!==null&&ie!==void 0&&ie.includes(":")||(w="".concat(G,":").concat(w)),!w)return!0;var xe=le(w,{recordPkValue:J});return!!xe}return P}var O=function(U,D){var ne=(0,k.useFieldSchema)(),q=(0,k.useField)(),J=(ne==null?void 0:ne["x-linkage-rules"])||[],Y=(0,j.a)(),P=(0,y.OQ)(),w=(0,y.Kp)({currentForm:{values:Y}}),ie=(0,d.ES)(),G=ie.openPopup,le=(0,F.t)(),xe=(0,x.useCollectionManager)(),_e=(0,l.qD)();(0,A.useEffect)(function(){q.stateOfLinkageRules={},J.filter(function(Se){return!Se.disabled}).forEach(function(Se){var se;(se=Se.actions)===null||se===void 0||se.forEach(function(me){(0,I.yB)({operator:me.operator,field:q,condition:Se.condition,variables:P,localVariables:w},_e.jsonLogic)})})},[q,J,w,P]);var Ee=(0,A.createRef)(),ze=(0,f.sQ)(D,Ee);return(0,L.jsx)("div",{ref:ze,children:(0,L.jsx)(t,c()(c()({},U),{},{onClick:function(se){if(se=xe.getCollection(se.name)||se,le)G({recordData:le});else{var me,pe;(me=(pe=se).isInherited)!==null&&me!==void 0&&me.call(pe)?G({collectionNameUsedInURL:se.name}):G()}}}))})};function N(V,U,D){var ne={$form:U.values,$iteration:U.values};if(V.includes("$iteration")){var q=D.path.segments.concat([]);q.splice(-2),V=V.replace("$iteration.","$iteration.".concat(q.join("."),"."));var J=(0,u.e7)(V,ne);return J}else{var Y=(0,u.e7)(V,{$form:U.values});return Y}}var t=(0,k.observer)(function(V){var U,D=V.onClick,ne=(0,K.useCollection_deprecated)(),q=(0,k.useFieldSchema)(),J=(0,k.useField)(),Y=(0,k.useForm)(),P=(0,y.OQ)(),w=H(),ie=q["x-enable-children"]||[],G=q==null?void 0:q["x-allow-add-to-current"],le=q==null||(U=q["x-component-props"])===null||U===void 0?void 0:U.linkageFromForm,xe=J.componentProps.type==="danger"?void 0:J.componentProps.type||"primary",_e=(0,K.useCollectionManager_deprecated)(),Ee=_e.getChildrenCollections,ze=Ee(ne.name),Se=(0,A.useMemo)(function(){return ie.map(function(je){if(je){var Pe=ze.find(function(fe){return fe.name===je.collection});if(Pe)return c()(c()({},Pe.getOptions()),{},{title:je.title||Pe.title})}}).filter(function(je){return je&&w("".concat(je.name,":create"))})},[ie,ze]),se=(q==null?void 0:q["x-linkage-rules"])||[],me=(0,j.a)(),pe=(0,y.Kp)({currentForm:{values:me}}),ee=(0,h.eJW)(),ue=(0,x.useDesignable)(),ge=ue.designable,Ie=V.icon||null,Ae=(0,l.qD)(),Le=(0,A.useMemo)(function(){return Se.map(function(je){return{key:je.name,label:ee(je.title),onClick:function(){return D==null?void 0:D(je)}}})},[Se,D]),Te=(0,A.useMemo)(function(){return{items:Le}},[Le]);return(0,A.useEffect)(function(){J.stateOfLinkageRules={},se.filter(function(je){return!je.disabled}).forEach(function(je){var Pe;(Pe=je.actions)===null||Pe===void 0||Pe.forEach(function(fe){(0,I.yB)({operator:fe.operator,field:J,condition:je.condition,variables:P,localVariables:pe},Ae.jsonLogic)})})},[J,se,pe,P]),(0,L.jsx)("div",{children:(0,L.jsx)(B,{inheritsCollections:Se,linkageFromForm:le,allowAddToCurrent:G,props:V,componentType:xe,menu:Te,onClick:D,collection:ne,icon:Ie,field:J,form:Y,designable:ge})})},{displayName:"CreateAction"});function B(V){var U,D,ne,q=V.inheritsCollections,J=V.linkageFromForm,Y=V.allowAddToCurrent,P=V.props,w=V.componentType,ie=V.menu,G=V.onClick,le=V.collection,xe=V.icon,_e=V.field,Ee=V.form,ze=V.designable,Se=(0,K.useCollectionManager_deprecated)(),se=Se.getCollection,me=(0,m.Hq)(),pe=(0,A.useMemo)(function(){var ge;return{opacity:ze&&((_e==null||(ge=_e.data)===null||ge===void 0?void 0:ge.hidden)||!me)&&.1}},[ze,_e==null||(U=_e.data)===null||U===void 0?void 0:U.hidden]);if((q==null?void 0:q.length)>0){var ee,ue;return J?(0,L.jsx)(b.ZP,{"aria-label":P["aria-label"],type:w,disabled:_e.disabled,danger:P.danger,icon:xe,onClick:function(Ie){var Ae=N(J,Ee,_e),Le=q.find(function(je){return je.name===Ae})?Ae:le.name,Te=se(Le);G==null||G(Te)},style:c()({display:!ze&&(_e==null||(ee=_e.data)===null||ee===void 0?void 0:ee.hidden)&&"none",opacity:ze&&(_e==null||(ue=_e.data)===null||ue===void 0?void 0:ue.hidden)&&.1},pe),children:P.children}):Y===void 0||Y?(0,L.jsxs)(p.Z.Button,{"aria-label":P["aria-label"],danger:P.danger,type:w,icon:(0,L.jsx)(z.Z,{}),style:c()(c()({},P==null?void 0:P.style),pe),buttonsRender:function(Ie){var Ae=Q()(Ie,2),Le=Ae[0],Te=Ae[1];return[A.cloneElement(Le,{style:P==null?void 0:P.style}),A.cloneElement(Te,{loading:!1,style:c()(c()({},P==null?void 0:P.style),{},{justifyContent:"center"})})]},menu:ie,onClick:function(Ie){G==null||G(le)},children:[xe,P.children]}):(0,L.jsx)(p.Z,{menu:ie,children:(0,L.jsxs)(b.ZP,{"aria-label":P["aria-label"],icon:xe,type:w,danger:P.danger,style:c()(c()({},P==null?void 0:P.style),pe),children:[P.children," ",(0,L.jsx)(z.Z,{})]})})}return(0,L.jsx)(b.ZP,c()(c()({},P),{},{"aria-label":P["aria-label"],type:w,disabled:_e.disabled,danger:P.danger,icon:xe,onClick:function(Ie){G==null||G(le)},style:c()(c()({},P==null?void 0:P.style),{},{display:!ze&&(_e==null||(D=_e.data)===null||D===void 0?void 0:D.hidden)&&"none",opacity:ze&&(_e==null||(ne=_e.data)===null||ne===void 0?void 0:ne.hidden)&&.1},pe),children:P.children}))}var X=(0,A.forwardRef)(O)},96256:function(He,ae,e){"use strict";e.d(ae,{d:function(){return i}});var Z=e(80844),c=e(67294),k=e(58837),i=function(){var C=(0,Z.useFieldSchema)(),A=(0,k.Kx)()||{},r=A.name,K=(0,c.useCallback)(function(v){if(!C)return"";var j=C["x-component"],h=typeof j=="string"?j:(j==null?void 0:j.displayName)||j.name,M=C["x-initializer"]?"-".concat(C["x-initializer"]):"",n=r?"-".concat(r):"";return v=v?"-".concat(v):"","schema-initializer-".concat(h).concat(M).concat(n).concat(v)},[C,r]);return{getAriaLabel:K}}},67096:function(He,ae,e){"use strict";e.d(ae,{cm:function(){return Se},$M:function(){return U},eq:function(){return b},Pg:function(){return Bo.Pg},tr:function(){return ct},nr:function(){return kt},N2:function(){return Rt},Ys:function(){return Mt},bn:function(){return Wt},VD:function(){return Nt},nl:function(){return nn},cz:function(){return Zt},yE:function(){return Cn},dn:function(){return Yt.dn},EC:function(){return Bo.EC},d6:function(){return Bo.d6},oY:function(){return Mn},sp:function(){return V},gy:function(){return Lt},cd:function(){return Bo.cd},$i:function(){return Hn},Mr:function(){return st},EK:function(){return Oe},zb:function(){return dt},Ok:function(){return Dt},CC:function(){return wt},dH:function(){return ri},zH:function(){return Yt.zH},w_:function(){return qe},ss:function(){return Be},VU:function(){return rt},Tc:function(){return Qi},e6:function(){return u.e6},NH:function(){return u.NH},Uc:function(){return u.Uc},BU:function(){return u.BU},Ic:function(){return _i},Jn:function(){return wa},BM:function(){return u.BM},Z_:function(){return u.Z_},vV:function(){return ti},Sq:function(){return ei},U2:function(){return ka},o_:function(){return Va},$T:function(){return Ca},zg:function(){return Pi},d4:function(){return ko},xc:function(){return Ga},hg:function(){return u.hg},V0:function(){return u.V0},HD:function(){return u.HD},Dc:function(){return Ke},yZ:function(){return ot},Qr:function(){return Fe},yG:function(){return ht},R_:function(){return Vt},Rm:function(){return sn},pZ:function(){return u.pZ},I_:function(){return u.I_},yi:function(){return u.yi},jA:function(){return Yt.jA},bQ:function(){return u.bQ},EY:function(){return u.EY},bJ:function(){return u.bJ}});var Z={};e.r(Z),e.d(Z,{ActionBarAssociationFilterAction:function(){return Se},ActionInitializer:function(){return U},ActionInitializerItem:function(){return b},AssociationFilter:function(){return ct},AssociationFilterDesignerDelete:function(){return kt},AssociationFilterDesignerDisplayField:function(){return Rt},AssociationFilterPlugin:function(){return Mt},BlockInitializer:function(){return Wt},BlockItemInitializer:function(){return Nt},CreateFilterActionInitializer:function(){return nn},CreateResetActionInitializer:function(){return Zt},CustomizeActionInitializer:function(){return Cn},DataBlockInitializer:function(){return Yt.dn},G2PlotInitializer:function(){return Mn},InitializerWithSwitch:function(){return V},ModalActionSchemaInitializerItem:function(){return Lt},RecordAssociationBlockInitializer:function(){return Hn},RecordAssociationDetailsBlockInitializer:function(){return st},RecordAssociationFormBlockInitializer:function(){return Oe},RecordAssociationGridCardBlockInitializer:function(){return dt},RecordAssociationListBlockInitializer:function(){return Dt},RecordReadPrettyAssociationFormBlockInitializer:function(){return wt},SearchCollections:function(){return Yt.zH},SelectActionInitializer:function(){return qe},SubmitActionInitializer:function(){return Be},TableActionColumnInitializer:function(){return rt},useCreateAssociationDetailsBlock:function(){return Ke},useCreateAssociationDetailsWithoutPagination:function(){return ot},useCreateAssociationFormBlock:function(){return Fe},useCreateAssociationGridCardBlock:function(){return ht},useCreateAssociationListBlock:function(){return Vt},useCreateAssociationTableBlock:function(){return sn},useMenuSearch:function(){return Yt.jA}});var c=e(15009),k=e.n(c),i=e(97857),g=e.n(i),C=e(99289),A=e.n(C),r=e(12444),K=e.n(r),v=e(72004),j=e.n(v),h=e(31996),M=e.n(h),n=e(26037),y=e.n(n),L=e(31601),o=e(9783),a=e.n(o),R=e(67294),E=e(22891),$=e(97505),Q=e(84327),z=e(68091),p=e(85893),b=function(vt){var Jt=(0,z.UR)(),dn=(0,z.q_)(),Wn=dn.insert;return(0,p.jsx)(z.lV,{title:Jt.title,onClick:function(){var Vn,zn=(0,Q.merge)(vt.schema||{},Jt.schema||{});Jt==null||(Vn=Jt.schemaInitialize)===null||Vn===void 0||Vn.call(Jt,zn),Wn(zn)}})},f=e(39270),x=function(vt){var Jt=(0,f.B)(),dn=Jt.defaultOpenMode,Wn=(0,E.ES)(),Pn=Wn.getPopupContext,Vn=a()({type:"void",title:'{{ t("Add child") }}',"x-action":"create","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:addChild","x-component":"Action","x-visible":"{{treeTable}}","x-component-props":{openMode:dn,type:"link",addChild:!0,style:{height:"auto",lineHeight:"normal"},component:"CreateRecordAction"},properties:{drawer:{type:"void",title:'{{ t("Add record") }}',"x-component":"Action.Container","x-component-props":{className:"nb-action-popup"},properties:{tabs:{type:"void","x-component":"Tabs","x-component-props":{},"x-initializer":"popup:addTab","x-initializer-props":{gridInitializer:"popup:addNew:addBlock"},properties:{tab1:{type:"void",title:'{{t("Add new")}}',"x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{},properties:{grid:{type:"void","x-component":"Grid","x-initializer":"popup:addNew:addBlock",properties:{}}}}}}}}}},$.ZQ,Pn());return(0,p.jsx)(b,g()(g()({},vt),{},{schema:Vn}))},m=function(){var vt=(0,f.B)(),Jt=vt.defaultOpenMode,dn=(0,E.ES)(),Wn=dn.getPopupContext,Pn=a()({type:"void","x-action":"create","x-acl-action":"create",title:"{{t('Add new')}}","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:addNew","x-component":"Action","x-decorator":"ACLActionProvider","x-component-props":{openMode:Jt,type:"primary",component:"CreateRecordAction",icon:"PlusOutlined"},properties:{drawer:{type:"void",title:'{{ t("Add record") }}',"x-component":"Action.Container","x-component-props":{className:"nb-action-popup"},properties:{tabs:{type:"void","x-component":"Tabs","x-component-props":{},"x-initializer":"popup:addTab","x-initializer-props":{gridInitializer:"popup:addNew:addBlock"},properties:{tab1:{type:"void",title:'{{t("Add new")}}',"x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{},properties:{grid:{type:"void","x-component":"Grid","x-initializer":"popup:addNew:addBlock",properties:{}}}}}}}}}},$.ZQ,Wn()),Vn=(0,z.UR)();return(0,p.jsx)(b,g()(g()({},Vn),{},{item:Vn,schema:Pn}))},F=e(26793),I=e(3806),d=e(58837),u=e(40341),l={wrap:u.BM,title:'{{t("Add block")}}',icon:"PlusOutlined",items:[{type:"itemGroup",title:'{{t("Data blocks")}}',name:"dataBlocks",useChildren:function(){var vt=(0,d.Kx)(),Jt=(0,F.$)(),dn=Jt.t;return[{name:"form",title:'{{t("Form")}}',Component:"FormBlockInitializer",collectionName:vt.name,dataSource:vt.dataSource,componentProps:{filterCollections:function(Pn){var Vn=Pn.collection,zn=Pn.associationField;if(zn)return!1;if(Vn.name===vt.name)return!0},showAssociationFields:!0,onlyCurrentDataSource:!0,hideSearch:!0,componentType:"FormItem",currentText:dn("Current collection"),otherText:dn("Other collections")}}]}},{type:"itemGroup",title:'{{t("Other blocks")}}',name:"otherBlocks",children:[{name:"markdown",title:'{{t("Markdown")}}',Component:"MarkdownBlockInitializer"}]}]},S=new I.n(g()({name:"CreateFormBlockInitializers"},l)),H=new I.n(g()({name:"popup:addNew:addBlock"},l),S),O={wrap:u.BM,title:'{{t("Add block")}}',icon:"PlusOutlined",items:[{type:"itemGroup",title:'{{t("Data blocks")}}',name:"dataBlocks",children:[{name:"form",title:'{{t("Form")}}',Component:"FormBlockInitializer",isCusomeizeCreate:!0}]},{type:"itemGroup",title:'{{t("Other blocks")}}',name:"otherBlocks",children:[{name:"markdown",title:'{{t("Markdown")}}',Component:"MarkdownBlockInitializer"}]}]},N=new I.n(g()({name:"CusomeizeCreateFormBlockInitializers"},O)),t=new I.n(g()({name:"popup:addRecord:addBlock"},O),N),B=e(6145),X=e(90105),V=function(vt){var Jt,dn,Wn=vt.type,Pn=vt.schema,Vn=vt.item,zn=vt.remove,ur=vt.disabled,Dr=(0,u.pZ)((Pn==null?void 0:Pn[Wn])||(Vn==null||(Jt=Vn.schema)===null||Jt===void 0?void 0:Jt[Wn]),Wn,Vn.find,zn??Vn.remove,(Pn==null?void 0:Pn.name)||(Vn==null||(dn=Vn.schema)===null||dn===void 0?void 0:dn.name)),dr=Dr.exists,br=Dr.remove,gr=(0,z.q_)(),Ir=gr.insert,Fr=(0,X.Z)();return(0,p.jsx)(z._n,{checked:dr,disabled:ur,title:Vn.title,onClick:function(){var Sr;if(!ur){if(dr)return br(),Fr();var Jr=(0,Q.merge)(Pn||{},Vn.schema||{});Vn==null||(Sr=Vn.schemaInitialize)===null||Sr===void 0||Sr.call(Vn,Jr),Ir(Jr),Fr()}}})},U=function(vt){var Jt=(0,z.UR)();return(0,p.jsx)(V,g()(g()(g()({},Jt),vt),{},{item:Jt,type:"x-action"}))},D=function(vt){var Jt=(0,B.useCollection_deprecated)(),dn={title:'{{ t("Delete") }}',"x-action":"destroy","x-component":"Action","x-use-component-props":"useBulkDestroyActionProps","x-component-props":{icon:"DeleteOutlined",confirm:{title:"{{t('Delete record')}}",content:"{{t('Are you sure you want to delete it?')}}"}},"x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:bulkDelete","x-decorator":"ACLActionProvider","x-acl-action-props":{skipScopeCheck:!0},"x-action-settings":{triggerWorkflows:[]}};return Jt&&(dn["x-acl-action"]="".concat(Jt.name,":destroy")),(0,p.jsx)(U,g()(g()({},vt),{},{schema:dn}))},ne=function(vt){var Jt={title:'{{ t("Delete") }}',"x-action":"destroy","x-acl-action":"destroy","x-component":"Action","x-use-component-props":"useDestroyActionProps","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:delete","x-component-props":{icon:"DeleteOutlined",confirm:{title:"{{t('Delete record')}}",content:"{{t('Are you sure you want to delete it?')}}"},refreshDataBlockRequest:!0},"x-action-settings":{triggerWorkflows:[]}};return(0,p.jsx)(U,g()(g()({},vt),{},{schema:Jt}))},q=function(vt){var Jt={title:'{{ t("Disassociate") }}',"x-action":"disassociate","x-component":"Action","x-use-component-props":"useDisassociateActionProps","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:disassociate","x-component-props":{icon:"DeleteOutlined",confirm:{title:"{{t('Disassociate record')}}",content:"{{t('Are you sure you want to disassociate it?')}}"},refreshDataBlockRequest:!0},"x-action-settings":{triggerWorkflows:[]}};return(0,p.jsx)(U,g()(g()({},vt),{},{schema:Jt}))},J=function(vt){var Jt={"x-action":"expandAll","x-component":"Action","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:expendable","x-component-props":{titleExpand:"{{t('Expand all')}}",titleCollapse:"{{t('Collapse all')}}",iconExpand:"nodeexpandoutlined",iconCollapse:"nodecollapseoutlined",component:"Expand.Action",useAction:function(){return{run:function(){}}}}};return(0,p.jsx)(U,g()(g()({},vt),{},{schema:Jt}))},Y=function(vt){var Jt={type:"void",title:'{{ t("Filter") }}',"x-action":"filter","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:filter","x-component":"Filter.Action","x-use-component-props":"useFilterActionProps","x-component-props":{icon:"FilterOutlined"}};return(0,p.jsx)(U,g()(g()({},vt),{},{schema:Jt}))},P=function(vt){var Jt={title:'{{ t("Refresh") }}',"x-action":"refresh","x-component":"Action","x-use-component-props":"useRefreshActionProps","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:refresh","x-component-props":{icon:"ReloadOutlined"}};return(0,p.jsx)(U,g()(g()({},vt),{},{schema:Jt}))},w=function(vt){var Jt={title:'{{ t("Submit") }}',"x-action":"submit","x-component":"Action","x-use-component-props":"useCreateActionProps","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:createSubmit","x-component-props":{type:"primary",htmlType:"submit"}};return(0,p.jsx)(b,g()(g()({},vt),{},{schema:Jt}))},ie=function(vt){var Jt={title:'{{ t("Submit") }}',"x-action":"submit","x-component":"Action","x-use-component-props":"useUpdateActionProps","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:updateSubmit","x-component-props":{type:"primary",htmlType:"submit"}};return(0,p.jsx)(b,g()(g()({},vt),{},{schema:Jt}))},G=e(80844),le=e(62954),xe=e(12174),_e=e(67174),Ee=e(87714),ze=e(57105),Se=function(vt){var Jt=(0,ze.gR)(),dn=(0,G.useFieldSchema)(),Wn=(0,xe.LY)(),Pn=(0,F.$)(),Vn=Pn.t,zn=(0,le.Pls)({t:Vn,api:Wn,refresh:Jt,current:dn}),ur=(0,_e.BU)(),Dr=ur.service,dr=ur.props;zn.loadAPIClientEvents();var br=function(Sr){zn.insertBeforeBegin(Sr)},gr=function(Sr,Jr){var kr,Zr;Jr(Sr),Dr.run(g()(g()({},(kr=Dr.params)===null||kr===void 0?void 0:kr[0]),{},{filter:(0,Ee.EO)([dr==null||(Zr=dr.params)===null||Zr===void 0?void 0:Zr.filter])}))},Ir={type:"void","x-action":"associateFilter","x-initializer":"AssociationFilter.Initializer","x-component":"AssociationFilter",properties:{}},Fr=g()(g()({},vt),{},{insert:br,remove:gr,wrap:function(Sr){return Sr}});return(0,p.jsx)(b,g()(g()({},Fr),{},{schema:Ir}))},se=e(68400),me=e.n(se),pe=e(97133),ee=e(93967),ue=e.n(ee),ge=e(43868),Ie=e(10097),Ae={style:{marginTop:16},icon:"SettingOutlined",title:'{{t("Configure fields")}}',items:[{type:"itemGroup",name:"associationFields",title:'{{t("Association fields")}}',useChildren:function(){var vt=(0,B.useCollectionManager_deprecated)(),Jt=(0,Ee.Fp)(),dn=Jt.map(function(Wn){var Pn,Vn,zn;return{name:Wn.key,title:(Pn=Wn.uiSchema)===null||Pn===void 0?void 0:Pn.title,Component:"AssociationFilterDesignerDisplayField",schema:{name:Wn.name,title:(Vn=Wn.uiSchema)===null||Vn===void 0?void 0:Vn.title,type:"void","x-toolbar":"CollapseItemSchemaToolbar","x-settings":"fieldSettings:FilterCollapseItem","x-component":"AssociationFilter.Item","x-use-component-props":"useAssociationFilterBlockProps","x-component-props":{fieldNames:{label:Wn.targetKey||((zn=vt.getCollection(Wn.target))===null||zn===void 0?void 0:zn.getPrimaryKey())||"id"}},properties:{}}}});return dn}},{name:"choicesFields",type:"itemGroup",title:'{{t("Choices fields")}}',hideIfNoChildren:!0,useChildren:function(){var vt=(0,Ie.useOptionalFieldList)(),Jt=vt.map(function(dn){return{name:dn.key,title:dn.uiSchema.title,Component:"AssociationFilterDesignerDisplayField",schema:{name:dn.name,title:dn.uiSchema.title,interface:dn.interface,type:"void","x-toolbar":"CollapseItemSchemaToolbar","x-settings":"fieldSettings:FilterCollapseItem","x-component":"AssociationFilter.Item","x-use-component-props":"useAssociationFilterBlockProps","x-component-props":{fieldNames:{label:dn.name}},properties:{}}}});return Jt}}]},Le=new ge.e(g()({name:"AssociationFilter.FilterBlockInitializer"},Ae)),Te=new I.n(g()({name:"AssociationFilterInitializers"},Ae)),je=new I.n(g()({name:"filterCollapse:configureFields"},Ae),Te),Pe=e(14896),fe=e(84577),re=e(46917),T=e(90297),ce=e(25750),be=e(13845),oe=e(64016),Re=e(15195),Ze=e(23461),We=function(){var vt,Jt,dn=(0,B.useCollection_deprecated)(),Wn=dn.name,Pn=dn.title,Vn=(0,Re.zy)(),zn=(0,G.useFieldSchema)(),ur=(0,F.$)(),Dr=ur.t,dr=(0,Ze.rE)(),br=dr.componentNamePrefix,gr=(zn==null||(vt=zn["x-decorator-props"])===null||vt===void 0?void 0:vt.resource)||(zn==null||(Jt=zn["x-decorator-props"])===null||Jt===void 0?void 0:Jt.association);return(0,p.jsxs)(T.aN,{template:Vn,title:Pn||Wn,children:[(0,p.jsx)(ce._,{}),(0,p.jsx)(oe.G,{componentName:"".concat(br,"FilterCollapse"),collectionName:Wn,resourceName:gr}),(0,p.jsx)(be.F,{type:Ee.vC.COLLAPSE,emptyDescription:Dr("No blocks to connect")}),(0,p.jsx)(T.Z5,{}),(0,p.jsx)(T.qx,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}})]})},tt=new ge.e({name:"AssociationFilter.Initializer",style:{marginTop:16},icon:"SettingOutlined",title:'{{t("Configure fields")}}',items:[{name:"associationFields",type:"itemGroup",title:'{{t("Association fields")}}',useChildren:function(){var vt=(0,Ee.Fp)(),Jt=vt.map(function(dn){var Wn,Pn;return{type:"item",name:dn.key,title:(Wn=dn.uiSchema)===null||Wn===void 0?void 0:Wn.title,Component:"AssociationFilterDesignerDisplayField",schema:{name:dn.name,title:(Pn=dn.uiSchema)===null||Pn===void 0?void 0:Pn.title,type:"void","x-toolbar":"CollapseItemSchemaToolbar","x-settings":"fieldSettings:FilterCollapseItem","x-component":"AssociationFilter.Item","x-use-component-props":"useAssociationFilterProps","x-component-props":{fieldNames:{label:dn.targetKey||"id"}},properties:{}}}});return Jt}},{name:"divider",type:"divider"},{name:"delete",title:'{{t("Delete")}}',Component:"AssociationFilterDesignerDelete"}]}),St=e(5574),Tt=e.n(St),lt=e(73475),ut=e(72395),nt=e(69234),Je=e(71230),hn=e(15746),mn=e(69677),vn=e(20863),an=e(15503),fn=e(95775),cn=e(24581),_n=(0,re.l6)("nb-association-filter-item",function(rn){var vt=rn.componentCls;return a()({},vt,{"&.SortableItem":{position:"relative","&:hover":{"> .general-schema-designer":{display:"block"}},"&.nb-form-item:hover":{"> .general-schema-designer":{background:"var(--colorBgSettingsHover) !important",border:"0 !important",top:"-".concat(rn.sizeXXS,"px !important"),bottom:"-".concat(rn.sizeXXS,"px !important"),left:"-".concat(rn.sizeXXS,"px !important"),right:"-".concat(rn.sizeXXS,"px !important")}},"> .general-schema-designer":{position:"absolute",zIndex:999,top:"0",bottom:"0",left:"0",right:"0",display:"none",border:"2px solid var(--colorBorderSettingsHover)",pointerEvents:"none","> .general-schema-designer-icons":{position:"absolute",right:"2px",top:"2px",lineHeight:"16px",pointerEvents:"all",".ant-space-item":{backgroundColor:"var(--colorSettings)",color:"#fff",lineHeight:"16px",width:"16px",paddingLeft:"1px"}}}},".Panel":{"& .ant-collapse-content-box":{padding:"0 ".concat(rn.paddingXS,"px !important"),maxHeight:"400px",overflow:"auto"},"& .ant-collapse-header.ant-collapse-header.ant-collapse-header":{background:rn.colorFillQuaternary,borderRadius:0}},".headerRow":{alignItems:"center",width:"100%",minWidth:"0",height:"22px",flexWrap:"nowrap"},".headerCol":{flex:"1 1 auto",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",".search":{outline:"none",background:rn.colorFillQuaternary,width:"100%",border:"none",height:"20px",padding:"4px","&::placeholder":{color:rn.colorTextPlaceholder}}},".CloseOutlined":{color:"".concat(rn.colorIcon," !important"),fontSize:"11px"},".SearchOutlined":{color:"".concat(rn.colorIcon," !important")},".Tree":{padding:"".concat(rn.padding,"px 0"),".ant-tree-node-content-wrapper":{overflowX:"hidden"}}})}),zt=_n,xn=nt.Z.Panel,Qt=(0,an.t)(function(rn){var vt,Jt,dn,Wn=zt(),Pn=Wn.wrapSSR,Vn=Wn.componentCls,zn=Wn.hashId,ur=(0,re.dQ)(),Dr=ur.token,dr=ct.useAssociationField(),br=(0,G.useFieldSchema)(),gr=(0,fe.et)(),Ir=(0,fe.eJ)(),Fr=(0,fe.wN)(rn),Br=Fr.list,Sr=Fr.onSelected,Jr=Fr.onChange,kr=Fr.handleSearchInput,Zr=Fr.params,qr=Fr.run,Wr=Fr.valueKey,go=Fr.labelKey,Do=Fr.defaultCollapse,_o=(0,R.useState)(!1),bo=Tt()(_o,2),ro=bo[0],so=bo[1],oa=(0,R.useMemo)(function(){return Do&&dr!==null&&dr!==void 0&&dr.name?[dr.name]:[]},[dr==null?void 0:dr.name,Do]),Ro=Wr||(dr==null?void 0:dr.targetKey)||"id",jo=go||((vt=br["x-component-props"])===null||vt===void 0||(vt=vt.fieldNames)===null||vt===void 0?void 0:vt.label)||Ro,Ra={title:jo||Ro,key:Ro},xa=(0,R.useState)([]),Si=Tt()(xa,2),wi=Si[0],bi=Si[1],qi=(0,R.useState)(br.default||[]),Ei=Tt()(qi,2),Za=Ei[0],Di=Ei[1],Mi=(0,R.useState)(!0),Ii=Tt()(Mi,2),el=Ii[0],Ai=Ii[1],tl=(0,cn.Il)(dr,(Ra==null?void 0:Ra.title)||"label");if((0,R.useEffect)(function(){br.default&&(Sr(br.default),Di(br.default))},[br.default,Sr]),!dr)return null;var oi=function($o){bi($o),Ai(!1)},ai=function($o){Di($o),Sr($o),Jr==null||Jr($o)},ja=function($o){var li,nl=Zr==null||(li=Zr[0])===null||li===void 0?void 0:li.filter;(ro||nl)&&qr(g()(g()({},Zr==null?void 0:Zr[0]),{},{filter:void 0})),so(!ro),$o.stopPropagation()},Oi=function($o){$o.stopPropagation()},Ti=function($o){kr($o)},ii=(Jt=br.title)!==null&&Jt!==void 0?Jt:dr==null||(dn=dr.uiSchema)===null||dn===void 0?void 0:dn.title;return Pn((0,p.jsxs)(Pe.SortableItem,{className:ue()(Vn,zn,"nb-block-item",rn.className,"SortableItem"),children:[(0,p.jsx)(gr,{}),(0,p.jsx)(nt.Z,{defaultActiveKey:oa,ghost:!0,expandIcon:ro?function(){return null}:void 0,children:(0,p.jsx)(xn,{className:"Panel",header:(0,p.jsxs)(Je.Z,{className:"headerRow",style:{borderBottom:ro?"1px solid ".concat(Dr.colorBorder):"none"},gutter:5,children:[(0,p.jsx)(hn.Z,{title:Ir(ii),className:"headerCol",children:ro?(0,p.jsx)(mn.Z,{bordered:!1,autoFocus:!0,placeholder:"Search...",className:"search",onClick:Oi,onChange:Ti}):Ir(ii)}),(0,p.jsx)(hn.Z,{style:{flex:"0 0 auto"},children:ro?(0,p.jsx)(lt.Z,{className:"CloseOutlined",onClick:ja}):(0,p.jsx)(ut.Z,{className:"SearchOutlined",onClick:ja})})]}),children:(0,p.jsx)(vn.Z,{className:"Tree",onExpand:oi,expandedKeys:wi,autoExpandParent:el,treeData:Br,onSelect:ai,fieldNames:Ra,titleRender:function($o){return(0,p.jsx)(fn.BQ,{ellipsis:!0,children:(0,cn.cN)(tl,Ir($o[jo]))})},selectedKeys:Za,blockNode:!0})},oa[0])})]}))},{displayName:"AssociationFilterItem"}),Et=e(96486),en=e.n(Et),Rn=e(7340),An=e(43319),Jn=function(vt){var Jt,dn,Wn,Pn=(0,G.useFieldSchema)(),Vn=(0,Rn.bz)(),zn=Vn.form,ur=(0,G.useField)(),Dr=(0,F.$)(),dr=Dr.t,br=(0,B.useCollectionManager_deprecated)(),gr=br.getCollectionJoinField,Ir=(0,B.useCollection_deprecated)(),Fr=Ir.getField,Br=Fr(Pn.name)||gr(Pn["x-collection-field"]),Sr=(0,B.useCollectionManager_deprecated)(),Jr=Sr.getCollectionFields,kr=(0,fe.eJ)(),Zr=(0,fe.ng)(),qr=Zr.dn,Wr=Br!=null&&Br.target?Jr(Br==null?void 0:Br.target):[],go=Wr.filter(function(_o){return!(_o!=null&&_o.target)&&_o.type!=="boolean"}).map(function(_o){var bo;return{value:_o==null?void 0:_o.name,label:kr(_o==null||(bo=_o.uiSchema)===null||bo===void 0?void 0:bo.title)||(_o==null?void 0:_o.name)}}),Do=function(bo){var ro,so,oa=a()({},"x-uid",Pn["x-uid"]),Ro=g()(g()(g()({},Br==null||(ro=Br.uiSchema)===null||ro===void 0||(ro=ro["x-component-props"])===null||ro===void 0?void 0:ro.fieldNames),(so=Pn["x-component-props"])===null||so===void 0?void 0:so.fieldNames),{},{label:bo});Pn["x-component-props"]=Pn["x-component-props"]||{},Pn["x-component-props"].fieldNames=Ro,oa["x-component-props"]=Pn["x-component-props"],qr.emit("patch",{schema:oa}),qr.refresh()};return(0,p.jsxs)(T.aN,g()(g()({},vt),{},{disableInitializer:!0,children:[(0,p.jsx)(T.B0,{title:dr("Custom title"),schema:{type:"object",title:dr("Custom title"),properties:{title:{default:Pn==null?void 0:Pn.title,description:"".concat(dr("Original title: ")).concat((Br==null||(Jt=Br.uiSchema)===null||Jt===void 0?void 0:Jt.title)||(Pn==null?void 0:Pn.title)),"x-decorator":"FormItem","x-component":"Input","x-component-props":{}}}},onSubmit:function(bo){var ro=bo.title;ro&&(Pn.title=ro,qr.emit("patch",{schema:{"x-uid":Pn["x-uid"],title:Pn.title}})),qr.refresh()}}),(0,p.jsx)(T.hj,{title:dr("Default collapse"),checked:ur.componentProps.defaultCollapse,onChange:function(bo){var ro;ur.componentProps.defaultCollapse=bo,en().set(Pn,"x-component-props.defaultCollapse",bo),qr.emit("patch",{schema:(ro={},a()(ro,"x-uid",Pn["x-uid"]),a()(ro,"x-component-props",Pn["x-component-props"]),ro)}),qr.refresh()}}),(0,p.jsx)(An.H,{collectionName:Br==null?void 0:Br.target,defaultFilter:(Pn==null||(dn=Pn["x-component-props"])===null||dn===void 0||(dn=dn.params)===null||dn===void 0?void 0:dn.filter)||{},form:zn,onSubmit:function(bo){var ro,so,oa=bo.filter;en().set(ur.componentProps,"params",g()(g()({},(ro=ur.componentProps)===null||ro===void 0?void 0:ro.params),{},{filter:oa})),Pn["x-component-props"].params=ur.componentProps.params,qr.emit("patch",{schema:(so={},a()(so,"x-uid",Pn["x-uid"]),a()(so,"x-component-props",Pn["x-component-props"]),so)})}}),(0,p.jsx)(T.y5,{name:Br==null?void 0:Br.target}),(0,p.jsx)(T.Qf,{title:dr("Title field"),options:go,value:(Wn=Pn["x-component-props"])===null||Wn===void 0||(Wn=Wn.fieldNames)===null||Wn===void 0?void 0:Wn.label,onChange:Do},"title-field"),(0,p.jsx)(T.qx,{breakRemoveOn:{"x-component":"Grid"}})]}))},Zn=e(1892),rr=e(9361),mr=e(18686),Er=function(){var vt=(0,mr.aZ)(),Jt=rr.Z.useToken(),dn=Jt.token,Wn=(_e.gp===null||_e.gp===void 0?void 0:(0,_e.gp)())||{},Pn=Wn.heightProps,Vn=Pn||{},zn=Vn.title,ur=zn?dn.fontSizeLG*dn.lineHeightLG+dn.padding*2-1:0;return vt-2*dn.paddingLG-ur},Ft,ct=function(vt){var Jt=(0,re.dQ)(),dn=Jt.token,Wn=(0,fe.et)(),Pn=(0,G.useFieldSchema)(),Vn=Er(),zn=(0,z.IU)(Pn["x-initializer"],Pn["x-initializer-props"]),ur=zn.render;return(0,p.jsx)(Pe.DndContext,{children:(0,p.jsxs)(Pe.SortableItem,{className:ue()("nb-block-item",vt.className,(0,pe.css)(Ft||(Ft=me()([`
            height: `,`;
            overflow-y: auto;
            position: relative;
            border-radius: `,`px;
            &:hover {
              > .general-schema-designer {
                display: block;
              }
            }
            &.nb-form-item:hover {
              > .general-schema-designer {
                background: var(--colorBgSettingsHover) !important;
                border: 0 !important;
                top: -5px !important;
                bottom: -5px !important;
                left: -5px !important;
                right: -5px !important;
              }
            }
            > .general-schema-designer {
              position: absolute;
              z-index: 999;
              top: 0;
              bottom: 0;
              left: 0;
              right: 0;
              display: none;
              border: 2px solid var(--colorBorderSettingsHover);
              pointer-events: none;
              > .general-schema-designer-icons {
                position: absolute;
                right: 2px;
                top: 2px;
                line-height: 16px;
                pointer-events: all;
                .ant-space-item {
                  background-color: var(--colorSettings);
                  color: #fff;
                  line-height: 16px;
                  width: 16px;
                  padding-left: 1px;
                  align-self: stretch;
                }
              }
            }
          `])),Vn?Vn+"px":"100%",dn.borderRadiusLG)),children:[(0,p.jsx)(Wn,{}),vt.children,ur()]})})};ct.Provider=Zn._0,ct.Item=Qt,ct.Item.Designer=Jn,ct.BlockDesigner=We,ct.useAssociationField=function(){var rn=(0,G.useFieldSchema)(),vt=(0,d.Kx)();return R.useMemo(function(){return vt.getField(rn.name)},[rn.name])};var Mt=function(rn){M()(Jt,rn);var vt=y()(Jt);function Jt(){return K()(this,Jt),vt.apply(this,arguments)}return j()(Jt,[{key:"load",value:function(){var dn=A()(k()().mark(function Pn(){return k()().wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:this.app.schemaInitializerManager.add(Le),this.app.schemaInitializerManager.add(Te),this.app.schemaInitializerManager.add(je),this.app.schemaInitializerManager.add(tt);case 4:case"end":return zn.stop()}},Pn,this)}));function Wn(){return dn.apply(this,arguments)}return Wn}()}]),Jt}(L.S),kt=function(){var vt=(0,z.UR)(),Jt=(0,R.useContext)(le.DDd),dn=Jt.refresh,Wn=(0,G.useFieldSchema)(),Pn=(0,xe.LY)(),Vn=(0,F.$)(),zn=Vn.t,ur=(0,le.Pls)({t:zn,api:Pn,refresh:dn,current:Wn});ur.loadAPIClientEvents();var Dr=function(){ur.remove(Wn)};return(0,p.jsx)(z.lV,{onClick:Dr,children:(0,p.jsx)("div",{children:vt.title})})},Rt=function(){var vt=(0,z.UR)(),Jt=vt.schema,dn=(0,u.pZ)(Jt.name,"name",vt.find,vt.remove),Wn=dn.exists,Pn=dn.remove,Vn=(0,z.q_)(),zn=Vn.insert;return(0,p.jsx)(z._n,{checked:Wn,title:vt.title,onClick:function(){var Dr;if(Wn)return Pn();var dr=(0,Q.merge)(Jt||{},vt.schema||{});vt==null||(Dr=vt.schemaInitialize)===null||Dr===void 0||Dr.call(vt,dr),zn(dr)}})},_t=e(13769),Bt=e.n(_t),jt=["item","schema"],Xt=["schema"],Wt=function(vt){var Jt=vt.item,dn=vt.schema,Wn=Bt()(vt,jt),Pn=(0,z.q_)(),Vn=Pn.insert;return(0,p.jsx)(z.lV,g()(g()({},Wn),{},{onClick:function(){var ur,Dr,dr=(0,Q.merge)(dn||{},Jt.schema||{});Jt==null||(ur=Jt.schemaInitialize)===null||ur===void 0||ur.call(Jt,dr),Vn(dr),(Dr=vt.onClick)===null||Dr===void 0||Dr.call(vt,dr)}}))},Nt=function(){var vt=(0,z.UR)(),Jt=vt.schema,dn=Bt()(vt,Xt);return(0,p.jsx)(Wt,g()(g()({},dn),{},{item:vt}))},nn=function(vt){var Jt={title:'{{ t("Filter") }}',"x-action":"submit","x-component":"Action","x-use-component-props":"useFilterBlockActionProps","x-designer":"Action.Designer","x-component-props":{type:"primary",htmlType:"submit"}};return(0,p.jsx)(U,g()(g()({},vt),{},{schema:Jt}))},Zt=function(vt){var Jt={title:'{{ t("Reset") }}',"x-component":"Action","x-use-component-props":"useResetBlockActionProps","x-designer":"Action.Designer"};return(0,p.jsx)(U,g()(g()({},vt),{},{schema:Jt}))},Cn=function(){var vt=(0,z.UR)();return(0,p.jsx)(Wt,g()(g()({},vt),{},{item:vt}))},Yt=e(61818),Mn=function(){var vt=(0,z.UR)(),Jt=(0,z.q_)(),dn=Jt.insert;return(0,p.jsx)(z.lV,g()(g()({},vt),{},{onClick:function(){dn(g()({},vt.schema))}}))},bn=e(72132),Gt=e(54961),ln=["onCreateBlockSchema","componentType","createBlockSchema"],Hn=function(){var vt=(0,z.UR)(),Jt=vt.onCreateBlockSchema,dn=vt.componentType,Wn=vt.createBlockSchema,Pn=Bt()(vt,ln),Vn=(0,z.q_)(),zn=Vn.insert,ur=(0,Re.$t)(),Dr=ur.getTemplateSchemaByMode,dr=(0,B.useCollectionManager_deprecated)(),br=dr.getCollection,gr=vt.field,Ir=br(gr.target),Fr="".concat(gr.collectionName,".").concat(gr.name);return(0,p.jsx)(z.lV,g()(g()({icon:(0,p.jsx)(bn.Z,{})},Pn),{},{onClick:function(){var Br=A()(k()().mark(function Sr(Jr){var kr,Zr;return k()().wrap(function(Wr){for(;;)switch(Wr.prev=Wr.next){case 0:if(kr=Jr.item,!kr.template){Wr.next=8;break}return Wr.next=4,Dr(kr);case 4:Zr=Wr.sent,zn(Zr),Wr.next=9;break;case 8:zn((0,Gt.O)({rowKey:Ir.filterTargetKey,dataSource:Ir.dataSource,association:Fr}));case 9:case"end":return Wr.stop()}},Sr)}));return function(Sr){return Br.apply(this,arguments)}}(),items:(0,u.bQ)("Table",vt,gr.target,Fr)}))};function sn(){var rn=(0,z.q_)(),vt=rn.insert,Jt=(0,B.useCollectionManager_deprecated)(),dn=Jt.getCollection,Wn=(0,R.useCallback)(function(Pn){var Vn=Pn.item,zn=Vn.associationField,ur=dn(zn.target);vt((0,Gt.O)({rowKey:ur.filterTargetKey,dataSource:ur.dataSource,association:"".concat(zn.collectionName,".").concat(zn.name)}))},[dn,vt]);return{createAssociationTableBlock:Wn}}var Ln=e(53555);function Bn(rn){var vt,Jt=rn.collectionName,dn=rn.dataSource,Wn=rn.association,Pn=rn.templateSchema,Vn=rn.hideActionInitializer,zn=rn.rowKey,ur=Wn||Jt;if(!dn||!zn)throw new Error("dataSource and rowKey are required");return{type:"void","x-acl-action":"".concat(ur,":view"),"x-decorator":"DetailsBlockProvider","x-use-decorator-props":"useDetailsWithPaginationDecoratorProps","x-decorator-props":{dataSource:dn,collection:Jt,association:Wn,readPretty:!0,action:"list",params:{pageSize:1}},"x-toolbar":"BlockSchemaToolbar","x-settings":"blockSettings:detailsWithPagination","x-component":"CardItem",properties:a()({},(0,Q.uid)(),{type:"void","x-component":"Details","x-read-pretty":!0,"x-use-component-props":"useDetailsWithPaginationProps",properties:(vt={},a()(vt,(0,Q.uid)(),{type:"void","x-initializer":Vn?void 0:"details:configureActions","x-component":"ActionBar","x-component-props":{style:{marginBottom:24}},properties:{}}),a()(vt,"grid",Pn||{type:"void","x-component":"Grid","x-initializer":"details:configureFields",properties:{}}),a()(vt,"pagination",{type:"void","x-component":"Pagination","x-use-component-props":"useDetailsPaginationProps"}),vt)})}}var wn=["onCreateBlockSchema","componentType","createBlockSchema"],st=function(){var vt=(0,z.UR)(),Jt=vt.onCreateBlockSchema,dn=vt.componentType,Wn=vt.createBlockSchema,Pn=Bt()(vt,wn),Vn=(0,z.q_)(),zn=Vn.insert,ur=(0,Re.$t)(),Dr=ur.getTemplateSchemaByMode,dr=(0,B.useCollectionManager_deprecated)(),br=dr.getCollection,gr=vt.field,Ir=br(gr.target),Fr="".concat(gr.collectionName,".").concat(gr.name);return(0,p.jsx)(z.lV,g()(g()({icon:(0,p.jsx)(Ln.Z,{})},Pn),{},{onClick:function(){var Br=A()(k()().mark(function Sr(Jr){var kr,Zr;return k()().wrap(function(Wr){for(;;)switch(Wr.prev=Wr.next){case 0:if(kr=Jr.item,!kr.template){Wr.next=8;break}return Wr.next=4,Dr(kr);case 4:Zr=Wr.sent,zn(Zr),Wr.next=9;break;case 8:zn(Bn({dataSource:Ir.dataSource,association:Fr,rowKey:Ir.filterTargetKey||"id"}));case 9:case"end":return Wr.stop()}},Sr)}));return function(Sr){return Br.apply(this,arguments)}}(),items:(0,u.bQ)("Details",vt,gr.target,Fr)}))};function Ke(){var rn=(0,z.q_)(),vt=rn.insert,Jt=(0,B.useCollectionManager_deprecated)(),dn=Jt.getCollection,Wn=(0,R.useCallback)(function(Pn){var Vn=Pn.item,zn=Vn.associationField,ur=dn(zn.target);vt(Bn({dataSource:ur.dataSource,association:"".concat(zn.collectionName,".").concat(zn.name),rowKey:ur.filterTargetKey||"id"}))},[dn,vt]);return{createAssociationDetailsBlock:Wn}}var De=e(58590),Ce=["onCreateBlockSchema","componentType","createBlockSchema"],Oe=function(){var vt=(0,z.UR)(),Jt=vt.onCreateBlockSchema,dn=vt.componentType,Wn=vt.createBlockSchema,Pn=Bt()(vt,Ce),Vn=(0,z.q_)(),zn=Vn.insert,ur=(0,B.useCollectionManager_deprecated)(),Dr=ur.getCollection,dr=(0,Re.$t)(),br=dr.getTemplateSchemaByMode,gr=vt.field,Ir=gr.target,Fr=(0,R.useMemo)(function(){return Dr(Ir)},[Ir]);return(0,p.jsx)(z.lV,g()(g()({icon:(0,p.jsx)(Ln.Z,{})},Pn),{},{onClick:function(){var Br=A()(k()().mark(function Sr(Jr){var kr,Zr,qr;return k()().wrap(function(go){for(;;)switch(go.prev=go.next){case 0:if(kr=Jr.item,!kr.template){go.next=8;break}return go.next=4,br(kr);case 4:Zr=go.sent,kr.template.componentName==="FormItem"?(qr=(0,De.l)({dataSource:Fr.dataSource,association:"".concat(gr.collectionName,".").concat(gr.name),templateSchema:Zr}),kr.mode==="reference"&&(qr["x-template-key"]=kr.template.key),zn(qr)):zn(Zr),go.next=9;break;case 8:zn((0,De.l)({dataSource:Fr.dataSource,association:"".concat(gr.collectionName,".").concat(gr.name)}));case 9:case"end":return go.stop()}},Sr)}));return function(Sr){return Br.apply(this,arguments)}}(),items:(0,u.bQ)("FormItem",vt,Fr,"".concat(gr.collectionName,".").concat(gr.name))}))};function Fe(){var rn=(0,z.q_)(),vt=rn.insert,Jt=(0,B.useCollectionManager_deprecated)(),dn=Jt.getCollection,Wn=(0,Re.rE)(),Pn=Wn.componentNamePrefix,Vn=(0,R.useCallback)(function(ur){var Dr=ur.item,dr=Dr.associationField,br=dn(dr.target);vt((0,De.l)({dataSource:br.dataSource,association:"".concat(dr.collectionName,".").concat(dr.name)}))},[dn,vt]),zn=(0,R.useCallback)(function(ur,Dr){var dr=Dr.item;if(dr.template.componentName==="".concat(Pn,"FormItem")&&dr.associationField){var br=dr.associationField,gr=dn(br.target),Ir=(0,De.l)({dataSource:gr.dataSource,association:"".concat(br.collectionName,".").concat(br.name),templateSchema:ur});return dr.mode==="reference"&&(Ir["x-template-key"]=dr.template.key),Ir}else return ur},[dn,Pn]);return{createAssociationFormBlock:Vn,templateWrap:zn}}var Ne=function(vt){var Jt=vt.collectionName,dn=vt.association,Wn=vt.templateSchema,Pn=vt.dataSource,Vn=vt.rowKey,zn=dn||Jt;if(!Pn)throw new Error("dataSource are required");return{type:"void","x-acl-action":"".concat(zn,":view"),"x-decorator":"GridCard.Decorator","x-use-decorator-props":"useGridCardBlockDecoratorProps","x-decorator-props":{collection:Jt,association:dn,dataSource:Pn,readPretty:!0,action:"list",params:{pageSize:12},runWhenParamsChanged:!0,rowKey:Vn},"x-component":"BlockItem","x-use-component-props":"useGridCardBlockItemProps","x-toolbar":"BlockSchemaToolbar","x-settings":"blockSettings:gridCard",properties:{actionBar:{type:"void","x-initializer":"gridCard:configureActions","x-component":"ActionBar","x-component-props":{style:{marginBottom:"var(--nb-spacing)"}}},list:{type:"array","x-component":"GridCard","x-use-component-props":"useGridCardBlockProps",properties:{item:{type:"object","x-component":"GridCard.Item","x-read-pretty":!0,"x-use-component-props":"useGridCardItemProps",properties:{grid:Wn||{type:"void","x-component":"Grid","x-initializer":"details:configureFields"},actionBar:{type:"void","x-align":"left","x-initializer":"gridCard:configureItemActions","x-component":"ActionBar","x-use-component-props":"useGridCardActionBarProps","x-component-props":{layout:"one-column"}}}}}}}}},Xe=["onCreateBlockSchema","componentType","createBlockSchema"],dt=function(){var vt=(0,z.UR)(),Jt=vt.onCreateBlockSchema,dn=vt.componentType,Wn=vt.createBlockSchema,Pn=Bt()(vt,Xe),Vn=(0,z.q_)(),zn=Vn.insert,ur=(0,Re.$t)(),Dr=ur.getTemplateSchemaByMode,dr=(0,B.useCollectionManager_deprecated)(),br=dr.getCollection,gr=vt.field,Ir=br(gr.target),Fr="".concat(gr.collectionName,".").concat(gr.name);return(0,p.jsx)(z.lV,g()(g()({icon:(0,p.jsx)(bn.Z,{})},Pn),{},{onClick:function(){var Br=A()(k()().mark(function Sr(Jr){var kr,Zr;return k()().wrap(function(Wr){for(;;)switch(Wr.prev=Wr.next){case 0:if(kr=Jr.item,!kr.template){Wr.next=8;break}return Wr.next=4,Dr(kr);case 4:Zr=Wr.sent,zn(Zr),Wr.next=9;break;case 8:zn(Ne({rowKey:Ir.filterTargetKey,dataSource:Ir.dataSource,association:Fr}));case 9:case"end":return Wr.stop()}},Sr)}));return function(Sr){return Br.apply(this,arguments)}}(),items:(0,u.bQ)("GridCard",vt,gr.target,Fr)}))};function ht(){var rn=(0,z.q_)(),vt=rn.insert,Jt=(0,B.useCollectionManager_deprecated)(),dn=Jt.getCollection,Wn=(0,R.useCallback)(function(Pn){var Vn=Pn.item,zn=Vn.associationField,ur=dn(zn.target);vt(Ne({rowKey:ur.filterTargetKey,dataSource:ur.dataSource,association:"".concat(zn.collectionName,".").concat(zn.name)}))},[dn,vt]);return{createAssociationGridCardBlock:Wn}}var xt=function(vt){var Jt=vt.collectionName,dn=vt.dataSource,Wn=vt.association,Pn=vt.templateSchema,Vn=vt.rowKey,zn=Wn||Jt;return{type:"void","x-acl-action":"".concat(zn,":view"),"x-decorator":"List.Decorator","x-use-decorator-props":"useListBlockDecoratorProps","x-decorator-props":{collection:Jt,dataSource:dn,association:Wn,readPretty:!0,action:"list",params:{pageSize:10},runWhenParamsChanged:!0,rowKey:Vn},"x-component":"CardItem","x-toolbar":"BlockSchemaToolbar","x-settings":"blockSettings:list",properties:{actionBar:{type:"void","x-initializer":"list:configureActions","x-component":"ActionBar","x-component-props":{style:{marginBottom:"var(--nb-spacing)"}}},list:{type:"array","x-component":"List","x-use-component-props":"useListBlockProps",properties:{item:{type:"object","x-component":"List.Item","x-read-pretty":!0,"x-use-component-props":"useListItemProps",properties:{grid:Pn||{type:"void","x-component":"Grid","x-initializer":"details:configureFields"},actionBar:{type:"void","x-align":"left","x-initializer":"list:configureItemActions","x-component":"ActionBar","x-use-component-props":"useListActionBarProps","x-component-props":{layout:"one-column"}}}}}}}}},Ct=["onCreateBlockSchema","componentType","createBlockSchema"],Dt=function(){var vt=(0,z.UR)(),Jt=vt.onCreateBlockSchema,dn=vt.componentType,Wn=vt.createBlockSchema,Pn=Bt()(vt,Ct),Vn=(0,z.q_)(),zn=Vn.insert,ur=(0,Re.$t)(),Dr=ur.getTemplateSchemaByMode,dr=(0,B.useCollectionManager_deprecated)(),br=dr.getCollection,gr=vt.field,Ir=br(gr.target),Fr="".concat(gr.collectionName,".").concat(gr.name);return(0,p.jsx)(z.lV,g()(g()({icon:(0,p.jsx)(bn.Z,{})},Pn),{},{onClick:function(){var Br=A()(k()().mark(function Sr(Jr){var kr,Zr;return k()().wrap(function(Wr){for(;;)switch(Wr.prev=Wr.next){case 0:if(kr=Jr.item,!kr.template){Wr.next=8;break}return Wr.next=4,Dr(kr);case 4:Zr=Wr.sent,zn(Zr),Wr.next=9;break;case 8:zn(xt({rowKey:Ir.filterTargetKey,dataSource:Ir.dataSource,association:Fr}));case 9:case"end":return Wr.stop()}},Sr)}));return function(Sr){return Br.apply(this,arguments)}}(),items:(0,u.bQ)("List",vt,gr.target,Fr)}))};function Vt(){var rn=(0,z.q_)(),vt=rn.insert,Jt=(0,B.useCollectionManager_deprecated)(),dn=Jt.getCollection,Wn=(0,R.useCallback)(function(Pn){var Vn=Pn.item,zn=Vn.associationField,ur=dn(zn.target);vt(xt({rowKey:ur.filterTargetKey,dataSource:ur.dataSource,association:"".concat(zn.collectionName,".").concat(zn.name)}))},[dn,vt]);return{createAssociationListBlock:Wn}}function Ht(rn){var vt,Jt=rn.collectionName,dn=rn.dataSource,Wn=rn.association,Pn=rn.templateSchema,Vn=Wn||Jt,zn=rn.isCurrent?{"x-is-current":!0}:{};if(!dn)throw new Error("dataSource are required");return g()(g()({type:"void","x-acl-action":"".concat(Vn,":get"),"x-decorator":"DetailsBlockProvider","x-use-decorator-props":"useDetailsDecoratorProps","x-decorator-props":{dataSource:dn,collection:Jt,association:Wn,readPretty:!0,action:"get"},"x-toolbar":"BlockSchemaToolbar","x-settings":"blockSettings:details","x-component":"CardItem"},zn),{},{properties:a()({},(0,Q.uid)(),{type:"void","x-component":"Details","x-read-pretty":!0,"x-use-component-props":"useDetailsProps",properties:(vt={},a()(vt,(0,Q.uid)(),{type:"void","x-initializer":"details:configureActions","x-component":"ActionBar","x-component-props":{style:{marginBottom:24}},properties:{}}),a()(vt,"grid",Pn||{type:"void","x-component":"Grid","x-initializer":"details:configureFields",properties:{}}),vt)})})}var Ut=["onCreateBlockSchema","componentType","createBlockSchema"],wt=function(){var vt=(0,z.UR)(),Jt=vt.onCreateBlockSchema,dn=vt.componentType,Wn=vt.createBlockSchema,Pn=Bt()(vt,Ut),Vn=(0,z.q_)(),zn=Vn.insert,ur=(0,B.useCollectionManager_deprecated)(),Dr=ur.getCollection,dr=(0,Re.$t)(),br=dr.getTemplateSchemaByMode,gr=vt.field,Ir=gr.target,Fr=Dr(Ir),Br="".concat(gr.collectionName,".").concat(gr.name);return(0,p.jsx)(z.lV,g()(g()({icon:(0,p.jsx)(Ln.Z,{})},Pn),{},{onClick:function(){var Sr=A()(k()().mark(function Jr(kr){var Zr,qr,Wr;return k()().wrap(function(Do){for(;;)switch(Do.prev=Do.next){case 0:if(Zr=kr.item,!Zr.template){Do.next=8;break}return Do.next=4,br(Zr);case 4:qr=Do.sent,Zr.template.componentName==="ReadPrettyFormItem"?(Wr=Ht({dataSource:Fr.dataSource,association:Br,templateSchema:qr}),Zr.mode==="reference"&&(Wr["x-template-key"]=Zr.template.key),zn(Wr)):zn(qr),Do.next=9;break;case 8:zn(Ht({association:Br,dataSource:Fr.dataSource}));case 9:case"end":return Do.stop()}},Jr)}));return function(Jr){return Sr.apply(this,arguments)}}(),items:(0,u.bQ)("ReadPrettyFormItem",vt,Fr,Br)}))};function ot(){var rn=(0,z.q_)(),vt=rn.insert,Jt=(0,B.useCollectionManager_deprecated)(),dn=Jt.getCollection,Wn=(0,Re.rE)(),Pn=Wn.componentNamePrefix,Vn=(0,R.useCallback)(function(ur){var Dr=ur.item,dr=Dr.associationField,br=dn(dr.target);vt(Ht({dataSource:br.dataSource,association:"".concat(dr.collectionName,".").concat(dr.name)}))},[dn,vt]),zn=(0,R.useCallback)(function(ur,Dr){var dr=Dr.item,br=dr.associationField,gr=dn(br.target);if(dr.template.componentName==="".concat(Pn,"ReadPrettyFormItem")){var Ir=Ht({dataSource:gr.dataSource,association:"".concat(br.collectionName,".").concat(br.name),templateSchema:ur});return dr.mode==="reference"&&(Ir["x-template-key"]=dr.template.key),Ir}else return ur},[dn,Pn]);return{createAssociationDetailsWithoutPagination:Vn,templateWrap:zn}}var qe=function(vt){var Jt={type:"void",title:'{{ t("Select") }}',"x-action":"update","x-designer":"Action.Designer","x-component":"Action","x-component-props":{openMode:"drawer"},properties:{drawer:{type:"void","x-component":"AssociationField.Selector",title:'{{ t("Select record") }}',"x-component-props":{className:"nb-record-picker-selector"},properties:{grid:{type:"void","x-component":"Grid","x-initializer":"popup:tableSelector:addBlock",properties:{}},footer:{"x-component":"Action.Container.Footer","x-component-props":{},properties:{actions:{type:"void","x-component":"ActionBar","x-component-props":{},properties:{submit:{title:'{{ t("Submit") }}',"x-action":"submit","x-component":"Action","x-use-component-props":"usePickActionProps","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:submit","x-component-props":{type:"primary",htmlType:"submit"}}}}}}}}}};return(0,p.jsx)(b,g()(g()({},vt),{},{schema:Jt}))},Be=function(vt){var Jt={title:'{{ t("Submit") }}',"x-action":"submit","x-component":"Action","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:submit","x-component-props":{type:"primary",htmlType:"submit"}};return(0,p.jsx)(b,g()(g()({},vt),{},{schema:Jt}))},rt=function(){var vt={type:"void",title:'{{ t("Actions") }}',"x-decorator":"TableV2.Column.ActionBar","x-component":"TableV2.Column","x-toolbar":"TableColumnSchemaToolbar","x-initializer":"table:configureItemActions","x-settings":"fieldSettings:TableColumn","x-toolbar-props":{initializer:"table:configureItemActions"},"x-action-column":"actions",properties:a()({},(0,Q.uid)(),{type:"void","x-decorator":"DndContext","x-component":"Space","x-component-props":{split:"|"},properties:{}})},Jt=(0,z.UR)();return(0,p.jsx)(V,g()(g()({},Jt),{},{schema:vt,item:Jt,type:"x-action-column"}))},Ve=e(21143),$e=e(84157),it=["modalSchema","components"],Pt=["properties"];function Lt(rn){var vt=rn.modalSchema,Jt=vt===void 0?{}:vt,dn=rn.components,Wn=dn===void 0?{}:dn,Pn=Bt()(rn,it),Vn=Jt.properties,zn=Bt()(Jt,Pt),ur=(0,R.useState)(!1),Dr=Tt()(ur,2),dr=Dr[0],br=Dr[1],gr=(0,Ve.useSchemaInitializer)(),Ir=gr.setVisible,Fr=(0,R.useMemo)(function(){return g()(g()({name:(0,$e.uid)(),"x-component":"Action.Modal","x-component-props":{width:"520px"},type:"void","x-decorator":"FormV2","x-decorator-props":{}},zn),{},{properties:g()(g()({},Vn),{},{footer1:{"x-component":"Action.Modal.Footer",type:"void",properties:{close:{title:"Cancel","x-component":"Action","x-component-props":{type:"default"},"x-use-component-props":function(){return{onClick:function(){var Jr;br(!1),rn==null||(Jr=rn.onCancel)===null||Jr===void 0||Jr.call(rn)}}}},submit:{title:"OK","x-component":"Action","x-component-props":{type:"primary"},"x-use-component-props":function(){var Sr=(0,G.useForm)();return{onClick:function(){return A()(k()().mark(function kr(){var Zr;return k()().wrap(function(Wr){for(;;)switch(Wr.prev=Wr.next){case 0:return Wr.next=2,Sr.submit();case 2:br(!1),rn==null||(Zr=rn.onSubmit)===null||Zr===void 0||Zr.call(rn,Sr.values);case 4:case"end":return Wr.stop()}},kr)}))()}}}}}}})})},[dr]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Ve.SchemaInitializerItem,g()(g()({},Pn),{},{onClick:function(Sr){var Jr;Ir(!1),br(!0),rn==null||(Jr=rn.onClick)===null||Jr===void 0||Jr.call(rn,Sr)}})),(0,p.jsx)(Ve.ActionContextProvider,{value:{visible:dr,setVisible:br},children:(0,p.jsx)(Ve.SchemaComponent,{components:g()({Action:Ve.Action},Wn),schema:Fr})})]})}var $t=function(vt){var Jt={title:'{{ t("Update record") }}',"x-component":(vt==null?void 0:vt["x-component"])||"Action.Link","x-use-component-props":"useCustomizeUpdateActionProps","x-action":"customize:update","x-decorator":"ACLActionProvider","x-acl-action":"update","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:updateRecord","x-action-settings":{assignedValues:{},onSuccess:{manualClose:!1,redirecting:!1,successMessage:'{{t("Updated successfully")}}'},triggerWorkflows:[]}},dn=(0,z.UR)();return(0,p.jsx)(Wt,g()(g()({},dn),{},{schema:Jt,item:dn}))},$n=function(vt){var Jt=(0,f.B)(),dn=Jt.defaultOpenMode,Wn=(0,E.ES)(),Pn=Wn.getPopupContext,Vn=a()({type:"void",title:'{{ t("Popup") }}',"x-action":"customize:popup","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:popup","x-component":(vt==null?void 0:vt["x-component"])||"Action.Link","x-component-props":{openMode:dn,refreshDataBlockRequest:!0},"x-decorator":"ACLActionProvider",properties:{drawer:{type:"void",title:'{{ t("Popup") }}',"x-component":"Action.Container","x-component-props":{className:"nb-action-popup"},properties:{tabs:{type:"void","x-component":"Tabs","x-component-props":{},"x-initializer":"popup:addTab",properties:{tab1:{type:"void",title:'{{t("Details")}}',"x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{},properties:{grid:{type:"void","x-component":"Grid","x-initializer":(vt==null?void 0:vt["x-initializer"])||"popup:common:addBlock",properties:{}}}}}}}}}},$.ZQ,Pn()),zn=(0,z.UR)();return(0,p.jsx)(Wt,g()(g()({},zn),{},{schema:Vn,item:zn}))},pn=function(vt){var Jt={type:"void",title:'{{ t("Link") }}',"x-action":"customize:link","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:link","x-component":(vt==null?void 0:vt["x-component"])||"Action.Link","x-use-component-props":"useLinkActionProps","x-decorator":"ACLActionProvider"},dn=(0,z.UR)();return(0,p.jsx)(Wt,g()(g()({},dn),{},{schema:Jt,item:dn}))},un=new ge.e({name:"RecordFormBlockInitializers",title:'{{ t("Add block") }}',icon:"PlusOutlined",wrap:u.BM,items:[{type:"itemGroup",title:'{{ t("Data blocks") }}',name:"dataBlocks",children:[{name:"form",title:'{{ t("Form") }}',Component:"RecordFormBlockInitializer"}]},{type:"itemGroup",title:'{{t("Other blocks")}}',name:"otherBlocks",children:[{name:"markdown",title:'{{t("Markdown")}}',Component:"MarkdownBlockInitializer"}]}]}),Xn=function(vt){var Jt=(0,f.B)(),dn=Jt.defaultOpenMode,Wn=(0,E.ES)(),Pn=Wn.getPopupContext,Vn=a()({type:"void",title:'{{ t("Edit") }}',"x-action":"update","x-acl-action":"update","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:edit","x-component":"Action","x-component-props":{openMode:dn,icon:"EditOutlined"},properties:{drawer:{type:"void",title:'{{ t("Edit record") }}',"x-component":"Action.Container","x-component-props":{className:"nb-action-popup"},properties:{tabs:{type:"void","x-component":"Tabs","x-component-props":{},"x-initializer":"popup:addTab",properties:{tab1:{type:"void",title:'{{t("Edit")}}',"x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{},properties:{grid:{type:"void","x-component":"Grid","x-initializer":"popup:common:addBlock",properties:{}}}}}}}}}},$.ZQ,Pn());return(0,p.jsx)(b,g()(g()({},vt),{},{schema:Vn}))},Yn=function(vt){var Jt=(0,f.B)(),dn=Jt.defaultOpenMode,Wn=(0,E.ES)(),Pn=Wn.getPopupContext,Vn=a()({type:"void",title:'{{ t("View") }}',"x-action":"view","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:view","x-component":"Action","x-component-props":{openMode:dn},properties:{drawer:{type:"void",title:'{{ t("View record") }}',"x-component":"Action.Container","x-component-props":{className:"nb-action-popup"},properties:{tabs:{type:"void","x-component":"Tabs","x-component-props":{},"x-initializer":"popup:addTab",properties:{tab1:{type:"void",title:'{{t("Details")}}',"x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{},properties:{grid:{type:"void","x-component":"Grid","x-initializer":"popup:common:addBlock",properties:{}}}}}}}}}},$.ZQ,Pn());return(0,p.jsx)(b,g()(g()({},vt),{},{schema:Vn}))},jn=e(57086),ir={title:'{{t("Configure actions")}}',icon:"SettingOutlined",style:{marginLeft:8},items:[{type:"itemGroup",title:'{{t("Enable actions")}}',name:"enableActions",children:[{name:"edit",title:'{{t("Edit")}}',Component:"UpdateActionInitializer",schema:{"x-component":"Action","x-decorator":"ACLActionProvider","x-component-props":{type:"primary"}},useVisible:function(){return(0,jn.v)("update")}},{name:"delete",title:'{{t("Delete")}}',Component:"DestroyActionInitializer",schema:{"x-component":"Action","x-decorator":"ACLActionProvider"},useVisible:function(){return(0,jn.v)("destroy")}}]}]},fr=new I.n(g()({name:"DetailsActionInitializers"},ir)),Ar=new I.n(g()({name:"detailsWithPaging:configureActions"},ir),fr),wr=e(64993),Kr=function(vt){var Jt=vt.filterCollections,dn=vt.onlyCurrentDataSource,Wn=vt.hideSearch,Pn=vt.componentType,Vn=Pn===void 0?"Details":Pn,zn=vt.createBlockSchema,ur=vt.templateWrap,Dr=vt.showAssociationFields,dr=vt.hideChildrenIfSingleCollection,br=(0,z.UR)(),gr=ao(),Ir=gr.createDetailsBlock;return(0,p.jsx)(Yt.dn,g()(g()({},br),{},{icon:(0,p.jsx)(wr.Z,{}),componentType:Vn,onCreateBlockSchema:function(){var Fr=A()(k()().mark(function Br(Sr){return k()().wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:if(!zn){kr.next=2;break}return kr.abrupt("return",zn(Sr));case 2:Ir(Sr);case 3:case"end":return kr.stop()}},Br)}));return function(Br){return Fr.apply(this,arguments)}}(),onlyCurrentDataSource:!!dn,hideSearch:Wn,filter:Jt,templateWrap:ur,showAssociationFields:Dr,hideChildrenIfSingleCollection:dr}))},ao=function(){var vt=(0,z.q_)(),Jt=vt.insert,dn=(0,B.useCollectionManager_deprecated)(),Wn=dn.getCollection,Pn=(0,R.useCallback)(function(Vn){var zn=Vn.item,ur=Wn(zn.name,zn.dataSource),Dr=Bn({collectionName:zn.name,dataSource:zn.dataSource,rowKey:ur.filterTargetKey||"id",hideActionInitializer:!((ur.template!=="view"||ur!=null&&ur.writableView)&&ur.template!=="sql")});Jt(Dr)},[Wn,Jt]);return{createDetailsBlock:Pn}},Qr=e(94804),_r={title:'{{t("Configure actions")}}',icon:"SettingOutlined",style:{marginLeft:8},items:[{title:'{{t("Edit")}}',name:"edit",Component:"UpdateActionInitializer",schema:{"x-component":"Action","x-decorator":"ACLActionProvider","x-component-props":{type:"primary"}},useVisible:function(){return(0,jn.v)("update")}},{title:'{{t("Delete")}}',name:"delete",Component:"DestroyActionInitializer",schema:{"x-component":"Action","x-decorator":"ACLActionProvider"},useVisible:function(){return(0,jn.v)("destroy")}},{type:"item",title:'{{t("Disassociate")}}',name:"disassociate",Component:"DisassociateActionInitializer",schema:{"x-component":"Action","x-action":"disassociate","x-acl-action":"update","x-decorator":"ACLActionProvider"},useVisible:function(){var vt=(0,Qr.zh)(),Jt=(0,Qr.Kx)()||{},dn=(Jt==null?void 0:Jt.options)||{},Wn=dn.unavailableActions,Pn=dn.availableActions;if(Pn){var Vn;return!!(vt!=null&&vt.association)&&((Vn=Pn.includes)===null||Vn===void 0?void 0:Vn.call(Pn,"update"))}if(Wn){var zn;return!!(vt!=null&&vt.association)&&!(Wn!=null&&(zn=Wn.includes)!==null&&zn!==void 0&&zn.call(Wn,"update"))}return!0}},{name:"popup",title:'{{t("Popup")}}',Component:"PopupActionInitializer",useComponentProps:function(){return{"x-component":"Action"}}},{name:"updateRecord",title:'{{t("Update record")}}',Component:"UpdateRecordActionInitializer",useComponentProps:function(){return{"x-component":"Action"}},useVisible:function(){return(0,jn.v)("update")}},{name:"customRequest",title:'{{t("Custom request")}}',Component:"CustomRequestInitializer"},{name:"link",title:'{{t("Link")}}',Component:"LinkActionInitializer",useComponentProps:function(){return{"x-component":"Action"}}}]},Rr=new I.n(g()({name:"ReadPrettyFormActionInitializers"},_r)),Hr=new I.n(g()({name:"details:configureActions"},_r),Rr),Yr=e(45705),eo=function(){var vt=(0,u.BD)(),Jt=(0,F.$)(),dn=Jt.t,Wn=(0,le.eJW)();if(!(vt!=null&&vt.length))return null;var Pn=[];return vt.forEach(function(Vn){Object.values(Vn)[0].length&&Pn.push({type:"itemGroup",divider:!0,title:dn("Parent collection fields")+"("+Wn("".concat(Object.keys(Vn)[0]))+")",children:Object.values(Vn)[0]})}),(0,p.jsx)(Yr.E,{children:Pn})},ho=function(){var vt=(0,u.hg)({readPretty:!0,block:"Form"}),Jt=(0,F.$)(),dn=Jt.t;if(vt.length===0)return null;var Wn=[{type:"itemGroup",title:dn("Display association fields"),children:vt}];return(0,p.jsx)(Yr.E,{children:Wn})},co={wrap:u.BM,icon:"SettingOutlined",title:'{{t("Configure fields")}}',items:[{type:"itemGroup",name:"displayFields",title:'{{t("Display fields")}}',useChildren:u.I_},{name:"parentCollectionFields",Component:eo},{name:"associationFields",Component:ho},{name:"divider",type:"divider"},{name:"addText",title:'{{t("Add Markdown")}}',Component:"BlockItemInitializer",schema:{type:"void","x-editable":!1,"x-decorator":"FormItem","x-decorator-props":{engine:"handlebars"},"x-toolbar":"FormItemSchemaToolbar","x-settings":"blockSettings:markdown","x-component":"Markdown.Void","x-component-props":{content:'{{t("This is a demo text, **supports Markdown syntax**.")}}'}}},{name:"addDivider",title:'{{t("Add group")}}',Component:"BlockItemInitializer",schema:{type:"void","x-decorator":"FormItem","x-toolbar":"FormItemSchemaToolbar","x-settings":"blockSettings:divider","x-component":"Divider","x-component-props":{children:'{{t("Group")}}'}}}]},po=new I.n(g()({name:"ReadPrettyFormItemInitializers"},co)),Wo=new I.n(g()({name:"details:configureFields"},co),po),Vr=["icon","targetCollection"],Gr=function(){var vt=(0,z.UR)(),Jt=vt.icon,dn=Jt===void 0?!0:Jt,Wn=vt.targetCollection,Pn=Bt()(vt,Vr),Vn=(0,B.useCollection_deprecated)(),zn=Wn||Vn,ur=to(),Dr=ur.createSingleDetailsSchema;return(0,p.jsx)(z.lV,g()(g()({icon:dn&&(0,p.jsx)(Ln.Z,{})},Pn),{},{onClick:function(br){return Dr(br)},items:(0,u.bQ)("ReadPrettyFormItem",null,zn==null?void 0:zn.name)}))};function to(){var rn=(0,z.q_)(),vt=rn.insert,Jt=(0,Re.$t)(),dn=Jt.getTemplateSchemaByMode,Wn=(0,Qr.Xo)(),Pn=(0,Qr.d9)(),Vn=(0,Re.rE)(),zn=Vn.componentNamePrefix,ur=(0,R.useCallback)(function(dr,br){var gr=br.item;if(gr.template.componentName==="".concat(zn,"ReadPrettyFormItem")){var Ir=gr.collectionName||gr.name,Fr=Pn.getCollection(Ir),Br=Ht(Wn?{association:Wn,collectionName:Fr.isInherited()?Ir:void 0,dataSource:gr.dataSource,templateSchema:dr,isCurrent:!0}:{collectionName:Ir,dataSource:gr.dataSource,templateSchema:dr});return gr.mode==="reference"&&(Br["x-template-key"]=gr.template.key),Br}else return dr},[Wn,Pn,zn]),Dr=(0,R.useCallback)(function(){var dr=A()(k()().mark(function br(gr){var Ir,Fr,Br,Sr;return k()().wrap(function(kr){for(;;)switch(kr.prev=kr.next){case 0:if(Ir=gr.item,!Ir.template){kr.next=8;break}return kr.next=4,dn(Ir);case 4:Fr=kr.sent,vt(ur(Fr,{item:Ir})),kr.next=11;break;case 8:Br=Ir.collectionName||Ir.name,Sr=Pn.getCollection(Br),vt(Ht(Wn?{association:Wn,collectionName:Sr.isInherited()?Br:void 0,dataSource:Ir.dataSource,isCurrent:!0}:{collectionName:Br,dataSource:Ir.dataSource}));case 11:case"end":return kr.stop()}},br)}));return function(br){return dr.apply(this,arguments)}}(),[Wn,Pn,dn,vt,ur]);return{createSingleDetailsSchema:Dr,templateWrap:ur}}var lo=e(12445),mo=e(12002),No=e(73377),Jo=e(68942),Tr=e(25616),Zo=e(56994),qo={title:"{{t('Configure actions')}}",icon:"SettingOutlined",style:{marginLeft:8},items:[{name:"filter",title:"{{t('Filter')}}",Component:"FilterActionInitializer",schema:{"x-align":"left"}},{name:"addNew",title:"{{t('Add new')}}",Component:"CreateActionInitializer",schema:{"x-align":"right","x-decorator":"ACLActionProvider","x-acl-action-props":{skipScopeCheck:!0}},useVisible:function(){return(0,jn.v)("create")}},{name:"refresh",title:"{{t('Refresh')}}",Component:"RefreshActionInitializer",schema:{"x-align":"right"}},{name:"import",title:"{{t('Import')}}",Component:"ImportActionInitializer",schema:{"x-align":"right","x-acl-action":"importXlsx","x-decorator":"ACLActionProvider","x-acl-action-props":{skipScopeCheck:!0}},useVisible:function(){return(0,jn.v)("import")}},{name:"export",title:"{{t('Export')}}",Component:"ExportActionInitializer",useVisible:function(){return(0,jn.v)("export")},schema:{"x-align":"right","x-decorator":"ACLActionProvider","x-acl-action-props":{skipScopeCheck:!0}}},{name:"customRequest",title:'{{t("Custom request")}}',Component:"CustomRequestInitializer",schema:{"x-action":"customize:table:request:global"}}]},fa=new I.n(g()({name:"GridCardActionInitializers"},qo)),Da=new I.n(g()({name:"gridCard:configureActions"},qo),fa),Ma=e(12783),ia=function(vt){var Jt=vt.filterCollections,dn=vt.onlyCurrentDataSource,Wn=vt.hideSearch,Pn=vt.createBlockSchema,Vn=vt.componentType,zn=Vn===void 0?"FormItem":Vn,ur=vt.templateWrap,Dr=vt.showAssociationFields,dr=(0,z.UR)(),br=da(),gr=br.createGridCardBlock;return(0,p.jsx)(Yt.dn,g()(g()({},dr),{},{icon:(0,p.jsx)(Ma.Z,{}),componentType:"GridCard",onCreateBlockSchema:function(){var Ir=A()(k()().mark(function Fr(Br){return k()().wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:if(!Pn){Jr.next=2;break}return Jr.abrupt("return",Pn(Br));case 2:gr(Br);case 3:case"end":return Jr.stop()}},Fr)}));return function(Fr){return Ir.apply(this,arguments)}}(),onlyCurrentDataSource:dn,hideSearch:Wn,filter:Jt,showAssociationFields:Dr}))},da=function(){var vt=(0,z.q_)(),Jt=vt.insert,dn=(0,B.useCollectionManager_deprecated)(),Wn=dn.getCollection,Pn=function(zn){var ur=zn.item,Dr=Wn(ur.name,ur.dataSource),dr=Ne({collectionName:ur.name,dataSource:ur.dataSource,rowKey:Dr.filterTargetKey||"id"});Jt(dr)};return{createGridCardBlock:Pn}},Ua={title:'{{t("Configure actions")}}',icon:"SettingOutlined",items:[{name:"view",title:'{{t("View")}}',Component:"ViewActionInitializer",schema:{"x-component":"Action.Link","x-action":"view","x-decorator":"ACLActionProvider","x-align":"left"},useVisible:function(){return(0,jn.v)("get")}},{name:"edit",title:'{{t("Edit")}}',Component:"UpdateActionInitializer",schema:{"x-component":"Action.Link","x-action":"update","x-decorator":"ACLActionProvider","x-align":"left"},useVisible:function(){return(0,jn.v)("update")}},{name:"delete",title:'{{t("Delete")}}',Component:"DestroyActionInitializer",schema:{"x-component":"Action.Link","x-action":"destroy","x-decorator":"ACLActionProvider","x-align":"left"},useVisible:function(){return(0,jn.v)("destroy")}},{name:"popup",title:'{{t("Popup")}}',Component:"PopupActionInitializer",useComponentProps:function(){return{"x-component":"Action.Link"}}},{name:"update-record",title:'{{t("Update record")}}',Component:"UpdateRecordActionInitializer",useVisible:function(){return(0,jn.v)("update")}},{name:"customRequest",title:'{{t("Custom request")}}',Component:"CustomRequestInitializer",schema:{"x-action":"customize:table:request"}},{name:"link",title:'{{t("Link")}}',Component:"LinkActionInitializer",useComponentProps:function(){return{"x-component":"Action.Link"}}}]},ea=new I.n(g()({name:"GridCardItemActionInitializers"},Ua)),Eo=new I.n(g()({name:"gridCard:configureItemActions"},Ua),ea),Tn={title:"{{t('Configure actions')}}",icon:"SettingOutlined",style:{marginLeft:8},items:[{name:"filter",title:"{{t('Filter')}}",Component:"FilterActionInitializer",schema:{"x-align":"left"}},{name:"addNew",title:"{{t('Add new')}}",Component:"CreateActionInitializer",schema:{"x-align":"right","x-decorator":"ACLActionProvider","x-acl-action-props":{skipScopeCheck:!0}},useVisible:function(){return(0,jn.v)("create")}},{name:"refresh",title:"{{t('Refresh')}}",Component:"RefreshActionInitializer",schema:{"x-align":"right"}},{name:"import",title:"{{t('Import')}}",Component:"ImportActionInitializer",schema:{"x-align":"right","x-acl-action":"importXlsx","x-decorator":"ACLActionProvider","x-acl-action-props":{skipScopeCheck:!0}},useVisible:function(){return(0,jn.v)("import")}},{name:"export",title:"{{t('Export')}}",Component:"ExportActionInitializer",useVisible:function(){return(0,jn.v)("export")},schema:{"x-align":"right","x-decorator":"ACLActionProvider","x-acl-action-props":{skipScopeCheck:!0}}},{name:"customRequest",title:'{{t("Custom request")}}',Component:"CustomRequestInitializer",schema:{"x-action":"customize:table:request:global"}}]},Ge=new I.n(g()({name:"ListActionInitializers"},Tn)),at=new I.n(g()({name:"list:configureActions"},Tn),Ge),bt=e(49032),It=function(vt){var Jt=vt.filterCollections,dn=vt.onlyCurrentDataSource,Wn=vt.hideSearch,Pn=vt.createBlockSchema,Vn=vt.componentType,zn=Vn===void 0?"FormItem":Vn,ur=vt.templateWrap,Dr=vt.showAssociationFields,dr=(0,z.UR)(),br=Ot(),gr=br.createListBlock;return(0,p.jsx)(Yt.dn,g()(g()({},dr),{},{icon:(0,p.jsx)(bt.Z,{}),componentType:"List",onCreateBlockSchema:function(){var Ir=A()(k()().mark(function Fr(Br){return k()().wrap(function(Jr){for(;;)switch(Jr.prev=Jr.next){case 0:if(!Pn){Jr.next=2;break}return Jr.abrupt("return",Pn(Br));case 2:gr(Br);case 3:case"end":return Jr.stop()}},Fr)}));return function(Fr){return Ir.apply(this,arguments)}}(),onlyCurrentDataSource:dn,hideSearch:Wn,filter:Jt,showAssociationFields:Dr}))},Ot=function(){var vt=(0,B.useCollectionManager_deprecated)(),Jt=vt.getCollection,dn=(0,z.q_)(),Wn=dn.insert,Pn=function(zn){var ur=zn.item,Dr=Jt(ur.name,ur.dataSource),dr=xt({collectionName:ur.name,dataSource:ur.dataSource,rowKey:Dr.filterTargetKey||"id"});Wn(dr)};return{createListBlock:Pn}},En={title:'{{t("Configure actions")}}',icon:"SettingOutlined",items:[{name:"view",title:'{{t("View")}}',Component:"ViewActionInitializer",schema:{"x-component":"Action.Link","x-action":"view","x-decorator":"ACLActionProvider","x-align":"left"},useVisible:function(){return(0,jn.v)("get")}},{name:"edit",title:'{{t("Edit")}}',Component:"UpdateActionInitializer",schema:{"x-component":"Action.Link","x-action":"update","x-decorator":"ACLActionProvider","x-align":"left"},useVisible:function(){return(0,jn.v)("update")}},{name:"delete",title:'{{t("Delete")}}',Component:"DestroyActionInitializer",schema:{"x-component":"Action.Link","x-action":"destroy","x-decorator":"ACLActionProvider","x-align":"left"},useVisible:function(){return(0,jn.v)("destroy")}},{name:"popup",title:'{{t("Popup")}}',Component:"PopupActionInitializer",useComponentProps:function(){return{"x-component":"Action.Link"}}},{name:"updateRecord",title:'{{t("Update record")}}',Component:"UpdateRecordActionInitializer",useVisible:function(){return(0,jn.v)("update")}},{name:"customRequest",title:'{{t("Custom request")}}',Component:"CustomRequestInitializer",schema:{"x-action":"customize:table:request"}},{name:"link",title:'{{t("Link")}}',Component:"LinkActionInitializer",useComponentProps:function(){return{"x-component":"Action.Link"}}}]},Fn=new I.n(g()({name:"ListItemActionInitializers"},En)),Kn=new I.n(g()({name:"list:configureItemActions"},En),Fn),er=e(38889),On=e(61403),tr=e(93355),Cr=e(7497),Ur=e(26105),Pr=e(37098),Or=function(vt){var Jt=vt.collectionName,dn=vt.dataSource,Wn=vt.blockType;return{type:"void","x-decorator":"AssociationFilter.Provider","x-use-decorator-props":"useCollapseBlockDecoratorProps","x-decorator-props":{collection:Jt,dataSource:dn,blockType:Wn,associationFilterStyle:{width:"100%"},name:"filter-collapse"},"x-toolbar":"BlockSchemaToolbar","x-settings":"blockSettings:filterCollapse","x-component":"CardItem","x-filter-targets":[],properties:a()({},(0,Q.uid)(),{type:"void","x-action":"associateFilter","x-initializer":"filterCollapse:configureFields","x-component":"AssociationFilter"})}},Nr=function(vt){var Jt=vt.filterCollections,dn=vt.onlyCurrentDataSource,Wn=vt.hideChildrenIfSingleCollection,Pn=(0,z.UR)(),Vn=(0,z.q_)(),zn=Vn.insert;return(0,p.jsx)(Yt.dn,g()(g()({},Pn),{},{onlyCurrentDataSource:dn,icon:(0,p.jsx)(Pr.Z,{}),componentType:"FilterCollapse",onCreateBlockSchema:function(){var ur=A()(k()().mark(function Dr(dr){var br,gr;return k()().wrap(function(Fr){for(;;)switch(Fr.prev=Fr.next){case 0:br=dr.item,gr=Or({dataSource:br.dataSource,collectionName:br.collectionName||br.name,blockType:"filter"}),zn(gr);case 3:case"end":return Fr.stop()}},Dr)}));return function(Dr){return ur.apply(this,arguments)}}(),filter:Jt,hideChildrenIfSingleCollection:Wn}))},Lr={title:'{{t("Configure actions")}}',icon:"SettingOutlined",items:[{name:"filter",title:'{{t("Filter")}}',Component:"CreateFilterActionInitializer",schema:{"x-action-settings":{}}},{name:"reset",title:'{{t("Reset")}}',Component:"CreateResetActionInitializer",schema:{"x-action-settings":{}}}]},zr=new I.n(g()({name:"FilterFormActionInitializers"},Lr)),no=new I.n(g()({name:"filterForm:configureActions"},Lr),zr),fo=Yt.dn,Oo=function(vt){var Jt=vt.collectionName,dn=vt.dataSource,Wn=vt.templateSchema;if(!Jt||!dn)throw new Error("collectionName and dataSource are required");var Pn={type:"void","x-decorator":"FilterFormBlockProvider","x-use-decorator-props":"useFilterFormBlockDecoratorProps","x-decorator-props":{dataSource:dn,collection:Jt},"x-toolbar":"BlockSchemaToolbar","x-settings":"blockSettings:filterForm","x-component":"CardItem","x-filter-targets":[],properties:a()({},(0,Q.uid)(),{type:"void","x-component":"FormV2","x-use-component-props":"useFilterFormBlockProps",properties:a()({grid:Wn||{type:"void","x-component":"Grid","x-initializer":"filterForm:configureFields"}},(0,Q.uid)(),{type:"void","x-initializer":"filterForm:configureActions","x-component":"ActionBar","x-component-props":{layout:"one-column",style:{float:"right"}}})})};return Pn},Vo=function(vt){var Jt=vt.filterCollections,dn=vt.onlyCurrentDataSource,Wn=vt.hideChildrenIfSingleCollection,Pn=(0,z.UR)(),Vn=(0,z.q_)(),zn=Vn.insert,ur=(0,Ze.rE)(),Dr=ur.componentNamePrefix;return(0,p.jsx)(fo,g()(g()({},Pn),{},{icon:(0,p.jsx)(Ln.Z,{}),onlyCurrentDataSource:dn,componentType:"".concat(Dr,"FilterFormItem"),templateWrap:function(br,gr){var Ir=gr.item,Fr=Oo({templateSchema:br,dataSource:Ir.dataSource,collectionName:Ir.name||Ir.collectionName});return Ir.template&&Ir.mode==="reference"&&(Fr["x-template-key"]=Ir.template.key),Fr},onCreateBlockSchema:function(br){var gr=br.item;return zn(Oo({collectionName:gr.collectionName||gr.name,dataSource:gr.dataSource}))},filter:Jt,hideChildrenIfSingleCollection:Wn}))},Bo=e(76326),Lo={wrap:u.BM,icon:"SettingOutlined",title:'{{t("Configure fields")}}',items:[{type:"itemGroup",name:"displayFields",title:'{{t("Display fields")}}',useChildren:u.Kv},{name:"parentCollectionFields",Component:Bo.d6},{name:"associationFields",Component:Bo.EC},{name:"divider",type:"divider"},{title:'{{t("Add Markdown")}}',Component:"MarkdownFormItemInitializer",name:"addText"}]},xo=new I.n(g()({name:"FilterFormItemInitializers"},Lo)),Ao=new I.n(g()({name:"filterForm:configureFields"},Lo),xo),ta=function(){var vt=(0,z.q_)(),Jt=vt.insert,dn=(0,F.$)(),Wn=dn.t,Pn=(0,z.UR)();return(0,p.jsx)(z.lV,g()(g()({},Pn),{},{icon:(0,p.jsx)(Ln.Z,{}),onClick:function(){Jt({type:"void","x-settings":"blockSettings:markdown","x-decorator":"CardItem","x-decorator-props":{name:"markdown",engine:"handlebars"},"x-component":"Markdown.Void","x-editable":!1,"x-component-props":{content:Wn("This is a demo text, **supports Markdown syntax**.")}})}}))},na=function(){var vt=(0,z.q_)(),Jt=vt.insert,dn=(0,z.UR)();return(0,p.jsx)(z.lV,g()(g()({},dn),{},{icon:(0,p.jsx)(Ln.Z,{}),onClick:function(){Jt({type:"void","x-editable":!1,"x-decorator":"FormItem","x-decorator-props":{engine:"handlebars"},"x-toolbar":"FormItemSchemaToolbar","x-settings":"blockSettings:markdown","x-component":"Markdown.Void","x-component-props":{content:'{{t("This is a demo text, **supports Markdown syntax**.")}}'}})}}))},la={wrap:u.BM,title:'{{t("Add block")}}',icon:"PlusOutlined",items:[{type:"itemGroup",title:'{{t("Selector")}}',name:"selector",children:[{name:"title",title:"Table",Component:"TableSelectorInitializer"}]},{type:"itemGroup",title:'{{t("Filter blocks")}}',name:"filterBlocks",useChildren:function(){var vt=(0,Ve.useCollection_deprecated)(),Jt=vt.name,dn=vt.dataSource;return[{name:"filterFormBlockInTableSelector",title:'{{t("Form")}}',Component:"FilterFormBlockInitializer",componentProps:{filterCollections:function(){return!1},onlyCurrentDataSource:!0},collectionName:Jt,dataSource:dn},{name:"filterCollapseBlockInTableSelector",title:'{{t("Collapse")}}',Component:"FilterCollapseBlockInitializer",componentProps:{filterCollections:function(){return!1},onlyCurrentDataSource:!0},collectionName:Jt,dataSource:dn}]}},{type:"itemGroup",title:'{{t("Other blocks")}}',name:"otherBlocks",children:[{name:"markdown",title:'{{t("Markdown")}}',Component:"MarkdownBlockInitializer"}]}]},Xa=new I.n(g()({name:"TableSelectorInitializers"},la)),ra=new I.n(g()({name:"popup:tableSelector:addBlock"},la),Xa),sa=function(){var vt={},Jt=(0,z.UR)();return(0,p.jsx)(V,g()(g()({},Jt),{},{item:Jt,schema:vt,type:"x-collection-field"}))},Yo=function(){var vt={},Jt=(0,z.UR)();return(0,p.jsx)(V,g()(g()({},Jt),{},{schema:vt,item:Jt,type:"x-collection-field"}))},ha=e(9028),Ia={title:'{{t("Add block")}}',icon:"PlusOutlined",wrap:u.BM,items:[{name:"dataBlocks",title:'{{t("Data blocks")}}',type:"itemGroup",children:[{name:"table",title:'{{t("Table")}}',Component:"TableBlockInitializer"},{name:"form",title:'{{t("Form")}}',Component:"FormBlockInitializer",useComponentProps:function(){var vt=function(dn){var Wn=dn.collection,Pn=(Wn==null?void 0:Wn.options)||{},Vn=Pn.unavailableActions,zn=Pn.availableActions;if(zn){var ur;return(ur=zn.includes)===null||ur===void 0?void 0:ur.call(zn,"create")}if(Vn){var Dr;return!(Vn!=null&&(Dr=Vn.includes)!==null&&Dr!==void 0&&Dr.call(Vn,"create"))}return!0};return{filterCollections:vt}}},{name:"details",title:'{{t("Details")}}',Component:"DetailsBlockInitializer"},{name:"list",title:'{{t("List")}}',Component:"ListBlockInitializer"},{name:"gridCard",title:'{{t("Grid Card")}}',Component:"GridCardBlockInitializer"}]},{name:"filterBlocks",title:'{{t("Filter blocks")}}',type:"itemGroup",children:[{name:"filterForm",title:'{{t("Form")}}',Component:"FilterFormBlockInitializer"},{name:"filterCollapse",title:'{{t("Collapse")}}',Component:"FilterCollapseBlockInitializer"}]},{name:"otherBlocks",type:"itemGroup",title:'{{t("Other blocks")}}',children:[{name:"markdown",title:'{{t("Markdown")}}',Component:"MarkdownBlockInitializer"}]}]},za=new I.n(g()({name:"BlockInitializers"},Ia)),ga=new I.n(g()({name:"page:addBlock"},Ia),za),Ka=e(85040),Wa=function(){var vt=(0,z.q_)(),Jt=vt.insert,dn=(0,z.UR)();return(0,p.jsx)(z.lV,g()(g()({},dn),{},{icon:(0,p.jsx)(Ka.Z,{}),onClick:function(){Jt({type:"void","x-decorator":"FormItem","x-toolbar":"FormItemSchemaToolbar","x-settings":"blockSettings:divider","x-component":"Divider","x-component-props":{children:'{{t("Group")}}'}})}}))},Xo=function(vt){var Jt=(0,f.B)(),dn=Jt.defaultOpenMode,Wn=(0,E.ES)(),Pn=Wn.getPopupContext,Vn=a()({type:"void",title:'{{ t("Associate") }}',"x-action":"associate","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:popup","x-component":"Action","x-component-props":{openMode:dn,refreshDataBlockRequest:!0},properties:{drawer:{type:"void","x-component":"Action.Container",title:'{{ t("Select record") }}',"x-component-props":{className:"nb-record-picker-selector"},"x-decorator":"AssociateActionProvider",properties:{grid:{type:"void","x-component":"Grid","x-initializer":"popup:tableSelector:addBlock",properties:{}},footer:{"x-component":"Action.Container.Footer","x-component-props":{},properties:{actions:{type:"void","x-component":"ActionBar","x-component-props":{},properties:{submit:{title:'{{ t("Submit") }}',"x-action":"submit","x-component":"Action","x-use-component-props":"usePickActionProps","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:submit","x-component-props":{type:"primary",htmlType:"submit"}}}}}}}}}},$.ZQ,Pn()),zn=(0,z.UR)();return(0,p.jsx)(Wt,g()(g()({},zn),{},{schema:Vn,item:zn}))},Uo=e(78899),zo=["onRowSelectionChange","rowKey"],Aa=function(){var vt=(0,R.useContext)(cn.b7),Jt=vt.setSelectedRows,dn=(0,Uo.RP)(),Wn=dn.onRowSelectionChange,Pn=dn.rowKey,Vn=Pn===void 0?"id":Pn,zn=Bt()(dn,zo);return g()(g()({},zn),{},{rowKey:Vn,rowSelection:{type:"checkbox"},onRowSelectionChange:function(Dr,dr){Jt==null||Jt(Dr),Wn==null||Wn(Dr,dr)}})},Oa=function(vt){var Jt=(0,R.useState)([]),dn=Tt()(Jt,2),Wn=dn[0],Pn=dn[1],Vn=(0,Ve.useCollection)(),zn=(0,Ve.useBlockRequestContext)(),ur=zn.resource,Dr=zn.service,dr=zn.block,br=zn.__parent,gr=(0,Ve.useActionContext)(),Ir=(0,Ve.useOpenModeContext)()||{},Fr=Ir.isMobile,Br={size:"small",onChange:vt==null?void 0:vt.onChange,selectedRows:Wn,setSelectedRows:Pn},Sr=function(){var Zr=(0,R.useContext)(cn.b7),qr=Zr.selectedRows,Wr=(0,Ve.useActionContext)(),go=Wr.setVisible,Do=Wr.setSubmitted,_o=Wr.setFormValueChanged;return{onClick:function(ro,so){return A()(k()().mark(function oa(){var Ro,jo;return k()().wrap(function(xa){for(;;)switch(xa.prev=xa.next){case 0:return xa.next=2,ur.add({values:qr});case 2:so&&(so==null||so()),go==null||go(!1),Do==null||Do(!0),dr&&dr!=="TableField"&&(br==null||(Ro=br.service)===null||Ro===void 0||(jo=Ro.refresh)===null||jo===void 0||jo.call(Ro),go==null||go(!1),_o==null||_o(!1));case 6:case"end":return xa.stop()}},oa)}))()}}},Jr=function(){var Zr,qr=(Vn==null?void 0:Vn.filterTargetKey)||"id";if((Zr=Dr.data)!==null&&Zr!==void 0&&Zr.data){var Wr,go=(Wr=Dr.data)===null||Wr===void 0?void 0:Wr.data.map(function(_o){return _o[qr]}).filter(Boolean),Do=go.length?{$and:[a()({},"".concat(qr,".$ne"),go)]}:{};return Do}return{}};return(0,p.jsx)(Ve.ActionContextProvider,{value:g()(g()({},gr),{},{openMode:Fr?"drawer":gr.openMode}),children:(0,p.jsx)(cn.sU,g()(g()({},Br),{},{children:(0,p.jsx)(Ve.SchemaComponentOptions,{scope:{useTableSelectorProps:Aa,usePickActionProps:Sr},children:(0,p.jsx)(Uo.Vs,{params:{filter:Jr()},children:vt.children})})}))})},Na=function(){var vt=(0,u.BD)({component:"AssignedField"}),Jt=(0,F.$)(),dn=Jt.t,Wn=(0,le.eJW)();if(!(vt!=null&&vt.length))return null;var Pn=[];return vt.forEach(function(Vn){Object.values(Vn)[0].length&&Pn.push({type:"itemGroup",divider:!0,title:dn("Parent collection fields")+"("+Wn("".concat(Object.keys(Vn)[0]))+")",children:Object.values(Vn)[0]})}),(0,p.jsx)(Yr.E,{children:Pn})},_a={wrap:u.BM,icon:"SettingOutlined",title:'{{t("Configure fields")}}',items:[{type:"itemGroup",title:'{{t("Configure fields")}}',name:"configureFields",useChildren:u.bR},{name:"parentCollectionFields",Component:Na}]},wa=new I.n(g()({name:"CustomFormItemInitializers"},_a)),_i=new I.n(g()({name:"assignFieldValuesForm:configureFields"},_a),wa),$a=e(19632),qa=e.n($a),Il=function rn(vt){var Jt;if(!vt)return null;if((Jt=vt["x-decorator"])!==null&&Jt!==void 0&&Jt.endsWith("BlockProvider")){var dn;return(dn=vt["x-decorator-props"])===null||dn===void 0?void 0:dn.collection}else return rn(vt.parent)},Qi=function(vt){return["linkTo","subTable","o2m","m2m","obo","oho","o2o","m2o"].includes(vt.interface)};function Ji(){var rn=(0,Ve.useCollection)(),vt=(0,Ve.useCollectionManager_deprecated)(),Jt=vt.getChildrenCollections,dn=Jt(rn==null?void 0:rn.name,!0,rn==null?void 0:rn.dataSource).filter(function(Pn){return Pn==null?void 0:Pn.filterTargetKey}),Wn=[{name:"details",title:'{{t("Details")}}',Component:"DetailsBlockInitializer",collectionName:rn==null?void 0:rn.name,dataSource:rn==null?void 0:rn.dataSource,useComponentProps:function(){var Vn=(0,Ve.useCollection)(),zn=to(),ur=zn.createSingleDetailsSchema,Dr=zn.templateWrap,dr=(0,Ve.useCreateAssociationDetailsBlock)(),br=dr.createAssociationDetailsBlock,gr=(0,Ve.useCreateAssociationDetailsWithoutPagination)(),Ir=gr.createAssociationDetailsWithoutPagination,Fr=gr.templateWrap,Br=ao(),Sr=Br.createDetailsBlock,Jr=[Vn].concat(qa()(dn)),kr=(0,R.useCallback)(function(Zr){var qr=Zr.item,Wr=Zr.fromOthersInPopup;return Wr?Sr({item:qr}):qr.associationField?["hasOne","belongsTo"].includes(qr.associationField.type)?Ir({item:qr}):br({item:qr}):ur({item:qr})},[br,Ir,Sr,ur]);return{filterCollections:function(qr){var Wr=qr.collection,go=qr.associationField;return Wr?Jr.some(function(Do){return Do.name===Wr.name}):!!go},onlyCurrentDataSource:!0,hideSearch:!0,componentType:"ReadPrettyFormItem",createBlockSchema:kr,templateWrap:(0,R.useCallback)(function(Zr,qr){var Wr=qr.item;return Wr.associationField?["hasOne","belongsTo"].includes(Wr.associationField.type)?Fr(Zr,{item:Wr}):Zr:Dr(Zr,{item:Wr})},[Dr,Fr]),showAssociationFields:!0}}},{name:"editForm",title:'{{t("Form (Edit)")}}',Component:"FormBlockInitializer",collectionName:rn==null?void 0:rn.name,dataSource:rn==null?void 0:rn.dataSource,useComponentProps:function(){var Vn=(0,Ve.useCollection)(),zn=(0,Ve.useCreateEditFormBlock)(),ur=zn.createEditFormBlock,Dr=zn.templateWrap,dr=[Vn].concat(qa()(dn));return{filterCollections:function(gr){var Ir=gr.collection;return Ir?dr.some(function(Fr){return Fr.name===Ir.name}):!1},onlyCurrentDataSource:!0,hideSearch:!0,hideOtherRecordsInPopup:!0,componentType:"FormItem",createBlockSchema:ur,templateWrap:Dr,showAssociationFields:!0}},useVisible:function(){return(0,Ve.useActionAvailable)("update")}},{name:"createForm",title:'{{t("Form (Add new)")}}',Component:"FormBlockInitializer",collectionName:rn==null?void 0:rn.name,dataSource:rn==null?void 0:rn.dataSource,useComponentProps:function(){var Vn=(0,Ve.useCreateAssociationFormBlock)(),zn=Vn.createAssociationFormBlock,ur=Vn.templateWrap,Dr=(0,Ve.useCreateFormBlock)(),dr=Dr.createFormBlock,br=Dr.templateWrap;return{filterCollections:function(Ir){var Fr=Ir.collection,Br=Ir.associationField;return Br?["hasMany","belongsToMany"].includes(Br.type):!1},onlyCurrentDataSource:!0,hideSearch:!0,componentType:"FormItem",createBlockSchema:function(Ir){var Fr=Ir.item,Br=Ir.fromOthersInPopup;if(Br)return dr({item:Fr,fromOthersInPopup:Br});zn({item:Fr})},templateWrap:function(Ir,Fr){var Br=Fr.item,Sr=Fr.fromOthersInPopup;return Sr?br(Ir,{item:Br,fromOthersInPopup:Sr}):ur(Ir,{item:Br})},showAssociationFields:!0}}},{name:"table",title:'{{t("Table")}}',Component:"TableBlockInitializer",useComponentProps:function(){var Vn=(0,Ve.useCreateAssociationTableBlock)(),zn=Vn.createAssociationTableBlock,ur=(0,Ve.useCreateTableBlock)(),Dr=ur.createTableBlock;return{hideSearch:!0,onlyCurrentDataSource:!0,filterCollections:function(br){var gr=br.associationField;return gr?["hasMany","belongsToMany"].includes(gr.type):!1},createBlockSchema:function(br){var gr=br.item,Ir=br.fromOthersInPopup;if(Ir)return Dr({item:gr});zn({item:gr})},showAssociationFields:!0}}},{name:"list",title:'{{t("List")}}',Component:"ListBlockInitializer",useComponentProps:function(){var Vn=(0,Ve.useCreateAssociationListBlock)(),zn=Vn.createAssociationListBlock,ur=Ot(),Dr=ur.createListBlock;return{hideSearch:!0,onlyCurrentDataSource:!0,filterCollections:function(br){var gr=br.associationField;return gr?["hasMany","belongsToMany"].includes(gr.type):!1},createBlockSchema:function(br){var gr=br.item,Ir=br.fromOthersInPopup;if(Ir)return Dr({item:gr});zn({item:gr})},showAssociationFields:!0}}},{name:"gridCard",title:'{{t("Grid Card")}}',Component:"GridCardBlockInitializer",useComponentProps:function(){var Vn=(0,Ve.useCreateAssociationGridCardBlock)(),zn=Vn.createAssociationGridCardBlock,ur=da(),Dr=ur.createGridCardBlock;return{hideSearch:!0,onlyCurrentDataSource:!0,filterCollections:function(br){var gr=br.associationField;return gr?["hasMany","belongsToMany"].includes(gr.type):!1},createBlockSchema:function(br){var gr=br.item,Ir=br.fromOthersInPopup;if(Ir)return Dr({item:gr});zn({item:gr})},showAssociationFields:!0}}}];return Wn}var Ci={wrap:u.BM,title:'{{t("Add block")}}',icon:"PlusOutlined",items:[{type:"itemGroup",name:"dataBlocks",title:'{{t("Data blocks")}}',useChildren:Ji},{name:"filterBlocks",title:'{{t("Filter blocks")}}',type:"itemGroup",children:[{name:"filterForm",title:'{{t("Form")}}',Component:"FilterFormBlockInitializer",useComponentProps:function(){return{filterCollections:function(Jt){var dn=Jt.collection;return!0}}}},{name:"filterCollapse",title:'{{t("Collapse")}}',Component:"FilterCollapseBlockInitializer",useComponentProps:function(){return{filterCollections:function(Jt){var dn=Jt.collection;return!0}}}}]},{type:"itemGroup",name:"otherBlocks",title:'{{t("Other blocks")}}',children:[{name:"markdown",title:'{{t("Markdown")}}',Component:"MarkdownBlockInitializer"}]}]},ei=new I.n(g()({name:"RecordBlockInitializers"},Ci)),ti=new I.n(g()({name:"popup:common:addBlock"},Ci),ei),xi={title:"{{t('Configure actions')}}",icon:"SettingOutlined",style:{marginLeft:8},items:[{type:"itemGroup",title:"{{t('Enable actions')}}",name:"enableActions",children:[{name:"addNew",title:"{{t('Add new')}}",Component:"CreateActionInitializer",schema:{"x-align":"right"}},{name:"delete",title:"{{t('Delete')}}",Component:"BulkDestroyActionInitializer",schema:{"x-align":"right"}}]}]},Va=new I.n(g()({name:"SubTableActionInitializers"},xi)),ka=new I.n(g()({name:"subTable:configureActions"},xi),Va),ni=e(96256),Ta=function(vt){var Jt=(0,Ve.useDesignable)(),dn=Jt.designable,Wn=Jt.insertBeforeEnd,Pn=vt.isCreate,Vn=vt.isBulkEdit,zn=vt.options,ur=zn.gridInitializer,Dr=(0,ni.d)(),dr=Dr.getAriaLabel,br=(0,f.B)()||{},gr=br.isMobile,Ir=(0,Ve.useRecord)(),Fr=(0,Qr.Kx)(),Br=function(){var kr=(0,G.useForm)(),Zr=(0,Ve.useActionContext)(),qr=ur;return Fr||(qr="page:addBlock",gr&&(qr="mobile:addBlock")),qr||(qr="popup:common:addBlock",Pn||!Ir?qr="popup:addNew:addBlock":Vn&&(qr="popup:bulkEdit:addBlock")),{run:function(){return A()(k()().mark(function go(){var Do,_o,bo;return k()().wrap(function(so){for(;;)switch(so.prev=so.next){case 0:return so.next=2,kr.submit();case 2:return Do=kr.values,_o=Do.title,bo=Do.icon,Wn({type:"void",title:_o,"x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{icon:bo},properties:{grid:{type:"void","x-component":"Grid","x-initializer":qr,properties:{}}}}),so.next=6,kr.reset();case 6:Zr.setVisible(!1);case 7:case"end":return so.stop()}},go)}))()}}},Sr=(0,R.useMemo)(function(){return{type:"void",properties:{action1:{type:"void","x-component":"Action","x-component-props":{icon:"PlusOutlined",style:{borderColor:"var(--colorSettings)",color:"var(--colorSettings)"},type:"dashed","aria-label":dr()},title:'{{t("Add tab")}}',properties:{drawer1:{"x-decorator":"Form","x-component":"Action.Modal","x-component-props":{width:520,zIndex:2e3},type:"void",title:'{{t("Add tab")}}',properties:{title:{title:'{{t("Tab name")}}',required:!0,"x-component":"Input","x-decorator":"FormItem"},icon:{title:'{{t("Icon")}}',"x-component":"IconPicker","x-decorator":"FormItem"},footer:{"x-component":"Action.Modal.Footer",type:"void",properties:{cancel:{title:'{{t("Cancel")}}',"x-component":"Action","x-component-props":{useAction:function(){var kr=(0,Ve.useActionContext)();return{run:function(){return A()(k()().mark(function qr(){return k()().wrap(function(go){for(;;)switch(go.prev=go.next){case 0:kr.setVisible(!1);case 1:case"end":return go.stop()}},qr)}))()}}}}},submit:{title:'{{t("Submit")}}',"x-component":"Action","x-component-props":{type:"primary",useAction:Br}}}}}}}}}}},[]);return dn?(0,p.jsx)(Ve.SchemaComponent,{schema:Sr}):null},Xi=function(vt){return(0,p.jsx)(Ta,g()(g()({},vt),{},{isCreate:!0}))},Ha=function(vt){return(0,p.jsx)(Ta,g()(g()({},vt),{},{isBulkEdit:!0}))},Fa={Component:Ta,popover:!1},Ga=new ge.e(g()({name:"TabPaneInitializers"},Fa)),Ca=new ge.e(g()({name:"popup:addTab"},Fa)),ko=new ge.e({name:"TabPaneInitializersForCreateFormBlock",Component:Xi,popover:!1}),Pi=new ge.e({name:"TabPaneInitializersForBulkEditFormBlock",Component:Ha,popover:!1}),yi=e(94080),ri=function(rn){M()(Jt,rn);var vt=y()(Jt);function Jt(){return K()(this,Jt),vt.apply(this,arguments)}return j()(Jt,[{key:"load",value:function(){var dn=A()(k()().mark(function Pn(){return k()().wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:this.app.addComponents(g()(g()(g()({},yi),Z),{},{DestroyActionInitializer:ne,FormBlockInitializer:lo.J,RecordFormBlockInitializer:mo.s,TableBlockInitializer:Cr.k,TableSelectorInitializer:er.S,RecordReadPrettyFormBlockInitializer:Gr,DetailsBlockInitializer:Kr,ListBlockInitializer:It,GridCardBlockInitializer:ia,FilterFormBlockInitializer:Vo,FilterCollapseBlockInitializer:Nr,MarkdownBlockInitializer:ta,MarkdownFormItemInitializer:na,TableCollectionFieldInitializer:Yo,CollectionFieldInitializer:sa,CreateActionInitializer:m,CreateChildInitializer:x,ViewActionInitializer:Yn,UpdateActionInitializer:Xn,PopupActionInitializer:$n,LinkActionInitializer:pn,UpdateRecordActionInitializer:$t,CreateSubmitActionInitializer:w,UpdateSubmitActionInitializer:ie,BulkDestroyActionInitializer:D,ExpandableActionInitializer:J,DisassociateActionInitializer:q,FilterActionInitializer:Y,RefreshActionInitializer:P,DividerFormItemInitializer:Wa,AssociateActionInitializer:Xo,AssociateActionProvider:Oa})),this.app.schemaInitializerManager.add(za),this.app.schemaInitializerManager.add(ga),this.app.schemaInitializerManager.add(tr.E),this.app.schemaInitializerManager.add(tr.H),this.app.schemaInitializerManager.add(Ur.T),this.app.schemaInitializerManager.add(Ur.U),this.app.schemaInitializerManager.add(On.Xe),this.app.schemaInitializerManager.add(On.Rp),this.app.schemaInitializerManager.add(Tr.e),this.app.schemaInitializerManager.add(Tr.A),this.app.schemaInitializerManager.add(Jo.v),this.app.schemaInitializerManager.add(fr),this.app.schemaInitializerManager.add(Ar),this.app.schemaInitializerManager.add(po),this.app.schemaInitializerManager.add(Wo),this.app.schemaInitializerManager.add(Rr),this.app.schemaInitializerManager.add(Hr),this.app.schemaInitializerManager.add(S),this.app.schemaInitializerManager.add(H),this.app.schemaInitializerManager.add(N),this.app.schemaInitializerManager.add(t),this.app.schemaInitializerManager.add(wa),this.app.schemaInitializerManager.add(_i),this.app.schemaInitializerManager.add(zr),this.app.schemaInitializerManager.add(no),this.app.schemaInitializerManager.add(No.$),this.app.schemaInitializerManager.add(No.n),this.app.schemaInitializerManager.add(Zo.C),this.app.schemaInitializerManager.add(Zo.S),this.app.schemaInitializerManager.add(xo),this.app.schemaInitializerManager.add(Ao),this.app.schemaInitializerManager.add(fa),this.app.schemaInitializerManager.add(Da),this.app.schemaInitializerManager.add(ea),this.app.schemaInitializerManager.add(Eo),this.app.schemaInitializerManager.add(Ge),this.app.schemaInitializerManager.add(at),this.app.schemaInitializerManager.add(Fn),this.app.schemaInitializerManager.add(Kn),this.app.schemaInitializerManager.add(ei),this.app.schemaInitializerManager.add(ti),this.app.schemaInitializerManager.add(un),this.app.schemaInitializerManager.add(Va),this.app.schemaInitializerManager.add(ka),this.app.schemaInitializerManager.add(Xa),this.app.schemaInitializerManager.add(ra),this.app.schemaInitializerManager.add(Ga),this.app.schemaInitializerManager.add(Ca),this.app.schemaInitializerManager.add(ko),this.app.schemaInitializerManager.add(Pi),this.app.schemaInitializerManager.add(ha.R),this.app.schemaInitializerManager.add(ha.b);case 53:case"end":return zn.stop()}},Pn,this)}));function Wn(){return dn.apply(this,arguments)}return Wn}()}]),Jt}(L.S)},61818:function(He,ae,e){"use strict";e.d(ae,{dn:function(){return F},jA:function(){return m},zH:function(){return f}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(97857),C=e.n(g),A=e(19632),r=e.n(A),K=e(5574),v=e.n(K),j=e(72132),h=e(16165),M=e(69677),n=e(96074),y=e(57953),L=e(32983),o=e(67294),a=e(26793),R=e(68091),E=e(62954),$=e(15195),Q=e(40341),z=e(85893),p=32,b=15,f=function(d){var u=d.value,l=d.onChange,S=(0,a.$)(),H=S.t,O=(0,o.useState)(u),N=v()(O,2),t=N[0],B=N[1],X=o.useRef(null);return(0,o.useEffect)(function(){B(u)},[u]),(0,o.useEffect)(function(){X.current.input.focus();var V=new IntersectionObserver(function(U){U[0].isIntersecting&&X.current.input.focus()});return V.observe(X.current.input),function(){V.disconnect()}},[]),(0,z.jsxs)("div",{style:{width:210},onClick:function(U){return U.stopPropagation()},children:[(0,z.jsx)(M.Z,{ref:X,allowClear:!0,style:{padding:"0 4px 6px",boxShadow:"none"},bordered:!1,placeholder:H("Search and select collection"),value:t,onClick:function(U){U.stopPropagation()},onChange:function(U){l(U.target.value),B(U.target.value)}}),(0,z.jsx)(n.Z,{style:{margin:0}})]})},x=function(d){var u=d.loadMore,l=d.maxHeight,S=(0,o.useRef)(null);return(0,o.useEffect)(function(){var H=S.current;if(H){for(var O=H.parentElement;O&&O.tagName!=="UL";)O=O.parentElement;var N=function(){O&&Math.abs(O.scrollHeight-O.scrollTop-O.clientHeight)<=p&&u()};return O&&(O.style.height="".concat(l-p,"px"),O.style.maxHeight="inherit",O.style.overflowY="scroll",O.addEventListener("scroll",N)),function(){O&&(O.removeEventListener("scroll",N),delete O.style.height)}}},[u,l]),(0,z.jsx)("div",{ref:S,onClick:function(O){return O.stopPropagation()},children:(0,z.jsx)(y.Z,{size:"small",style:{width:"100%"}})})};function m(I){var d=I.data,u=I.openKeys,l=I.showType,S=I.hideSearch,H=(0,o.useState)(""),O=v()(H,2),N=O[0],t=O[1],B=(0,o.useState)(b),X=v()(B,2),V=X[0],U=X[1],D=(0,o.useMemo)(function(){return d.length>1},[d]),ne=(0,o.useMemo)(function(){return D?u==null?void 0:u[1]:(u==null?void 0:u.length)>0},[u]);(0,o.useEffect)(function(){ne||t("")},[ne]);var q=(0,o.useMemo)(function(){var G;if(D){var le;return ne?((le=d.find(function(xe){return(xe.key||xe.name)===ne}))===null||le===void 0?void 0:le.children)||[]:[]}return((G=d[0])===null||G===void 0?void 0:G.children)||[]},[d,D,ne]),J=(0,o.useMemo)(function(){if(!N)return q;var G=N.toLocaleLowerCase();return q.filter(function(le){return(le.label||le.title)&&String(le.label||le.title).toLocaleLowerCase().includes(G)})},[N,q]),Y=(0,o.useMemo)(function(){return J.length>V},[V,J]),P=(0,o.useMemo)(function(){return J.slice(0,V)},[J,V]),w=(0,o.useMemo)(function(){var G=[];return S||G.push(Object.assign({key:"search",label:(0,z.jsx)(f,{value:N,onChange:function(xe){U(b),t(xe)}}),onClick:function(xe){var _e=xe.domEvent;_e.stopPropagation()}},l?{isMenuType:!0}:{})),P.length>0?(G.push.apply(G,r()(P)),Y&&G.push(Object.assign({key:"load-more",label:(0,z.jsx)(x,{maxHeight:b*p,loadMore:function(){U(function(xe){return xe+b})}})},l?{isMenuType:!0}:{}))):G.push(Object.assign({key:"empty",style:{height:150},label:(0,z.jsx)("div",{onClick:function(xe){return xe.stopPropagation()},children:(0,z.jsx)(L.Z,{image:L.Z.PRESENTED_IMAGE_SIMPLE})})},l?{isMenuType:!0}:{})),G},[S,P,N,Y,l]),ie=(0,o.useMemo)(function(){return D?d.map(function(G){return ne&&G.key===ne?C()(C()({},G),{},{children:w}):C()(C()({},G),{},{children:[]})}):w},[d,D,ne,w]);return ie}var F=function(d){var u,l=d.templateWrap,S=d.onCreateBlockSchema,H=d.componentType,O=d.icon,N=O===void 0?j.Z:O,t=d.name,B=d.title,X=d.filter,V=d.onlyCurrentDataSource,U=d.hideSearch,D=d.showAssociationFields,ne=d.hideChildrenIfSingleCollection,q=d.filterDataSource,J=d.items,Y=d.hideOtherRecordsInPopup,P=d.onClick,w=d.filterOtherRecordsCollection,ie=d.currentText,G=d.otherText,le=d.alwaysRenderMenu,xe=(0,R.q_)(),_e=xe.insert,Ee=xe.setVisible,ze=(0,E.eJW)(),Se=(0,$.$t)(),se=Se.getTemplateSchemaByMode,me=(0,o.useCallback)(function(){var Pe=i()(c()().mark(function fe(re){var T,ce,be;return c()().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(T=re.item,ce=re.fromOthersInPopup,!P){Re.next=3;break}return Re.abrupt("return",P(re));case 3:if(!T.template){Re.next=10;break}return Re.next=6,se(T);case 6:be=Re.sent,_e(l?l(be,{item:T,fromOthersInPopup:ce}):be),Re.next=11;break;case 10:S&&S({item:T,fromOthersInPopup:ce});case 11:Ee(!1);case 12:case"end":return Re.stop()}},fe)}));return function(fe){return Pe.apply(this,arguments)}}(),[se,_e,Ee,S,P,l]),pe=J||(0,Q.HD)({name:t,componentName:H,filter:X,filterDataSource:q,filterOtherRecordsCollection:w,onlyCurrentDataSource:V,showAssociationFields:D,dataBlockInitializerProps:d,hideOtherRecordsInPopup:Y,onClick:me,currentText:ie,otherText:G}),ee=(0,R.bw)(me),ue=(0,o.useMemo)(function(){return ee(pe,t)},[ee,pe,t]),ge=(0,o.useState)([]),Ie=v()(ge,2),Ae=Ie[0],Le=Ie[1],Te=m({data:ue,openKeys:Ae,hideSearch:U}),je=(0,o.useMemo)(function(){var Pe=Te.filter(function(fe){return fe.key!=="search"&&fe.key!=="empty"});return ne&&Pe.length===1?Pe=Pe[0].children:Pe=Te,[{key:t,label:ze(B),icon:typeof N=="string"?(0,z.jsx)(h.Z,{type:N}):N,onClick:function(re){re.key===t&&me(C()(C()({},re),{},{item:d}))},children:Pe}]},[Te,ne,t,ze,B,N,me,d]);return ue.length>1||ue.length===1&&((u=ue[0])===null||u===void 0||(u=u.children)===null||u===void 0?void 0:u.length)>0||le?(0,z.jsx)(R.tu,{onOpenChange:function(fe){Le(fe)},items:je}):(0,z.jsx)(R.lV,C()(C()({},d),{},{onClick:me}))}},40341:function(He,ae,e){"use strict";e.d(ae,{BD:function(){return ne},BM:function(){return F},BU:function(){return ze},EY:function(){return u},HD:function(){return le},I_:function(){return B},Kv:function(){return X},NH:function(){return _e},Uc:function(){return Ee},V0:function(){return O},YT:function(){return d},Z_:function(){return m},bJ:function(){return H},bQ:function(){return G},bR:function(){return J},e6:function(){return xe},fE:function(){return q},hg:function(){return V},nD:function(){return Y},p$:function(){return l},pP:function(){return I},pZ:function(){return ie},yi:function(){return t},z4:function(){return D}});var Z=e(13769),c=e.n(Z),k=e(19632),i=e.n(k),g=e(97857),C=e.n(g),A=e(9783),r=e.n(A),K=e(80844),v=e(84327),j=e(96486),h=e.n(j),M=e(67294),n=e(26793),y=e(21143),L=e(7340),o=e(44899),a=e(6145),R=e(13511),E=e(87714),$=e(62954),Q=e(15195),z=e(23461),p=["formItemInitializers","actionInitializers","collection","dataSource","association","template","settings","action"],b=["formItemInitializers","actionInitializers","collection","resource","dataSource","association","action","actions","x-designer","template","title","settings"],f=["formItemInitializers","actionInitializers","collection","association","dataSource","resource","template","settings"],x=["collection","rowKey","tableActionInitializers","tableColumnInitializers","tableActionColumnInitializers","tableBlockProvider","disableTemplate","dataSource","blockType","pageSize"],m=function(ee){return ee},F=function(ee){return{type:"void","x-component":"Grid.Row",properties:r()({},(0,v.uid)(),{type:"void","x-component":"Grid.Col",properties:r()({},(ee==null?void 0:ee.name)||(0,v.uid)(),ee)})}},I=function(ee,ue){ue(ee.parent)},d=function(ee,ue){ue(ee,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}})},u=function(){var ee=(0,K.useForm)();return function(ue,ge){var Ie;ge(ue,{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}),(Ie=ee.values)===null||Ie===void 0||delete Ie[ue.name]}},l=function(ee,ue,ge,Ie){return ee.reduceProperties(function(Ae,Le){if(Le[ue]===ge&&(!Ie||Le.name===Ie))return Le;var Te=Le.reduceProperties(function(je,Pe){return Pe[ue]===ge&&(!Ie||Pe.name===Ie)?Pe:je});return Te||Ae})},S=["attachment","textarea","markdown","json","richText","polygon","circle","point","lineString"];function H(){var pe=(0,a.useCollection_deprecated)(),ee=pe.name,ue=pe.currentFields,ge=ue===void 0?[]:ue,Ie=(0,a.useCollectionManager_deprecated)(),Ae=Ie.getInterface,Le=Ie.getCollection,Te=(0,K.useFieldSchema)(),je=Te["x-component"]==="AssociationField.SubTable",Pe=(0,K.useForm)(),fe=je?Pe.readPretty:!0;return ge.filter(function(re){return!re.collectionName||re.collectionName===ee}).filter(function(re){return(re==null?void 0:re.interface)&&(re==null?void 0:re.interface)!=="subTable"&&!(re!=null&&re.treeChildren)}).map(function(re){var T,ce,be,oe,Re=Ae(re.interface),Ze=(re==null?void 0:re.target)&&((T=Le(re==null?void 0:re.target))===null||T===void 0?void 0:T.template)==="file",We=(re==null||(ce=re.uiSchema)===null||ce===void 0?void 0:ce["x-component"])==="Preview",tt={name:re.name,"x-collection-field":"".concat(ee,".").concat(re.name),"x-component":"CollectionField","x-component-props":Ze?{fieldNames:{label:"preview",value:"id"}}:We?{size:"small"}:{},"x-read-pretty":fe||((be=re.uiSchema)===null||be===void 0?void 0:be["x-read-pretty"]),"x-decorator":je?S.includes(re.interface)||Ze?"QuickEdit":"FormItem":null,"x-decorator-props":{labelStyle:{display:"none"}}};return{type:"item",name:re.name,title:(re==null||(oe=re.uiSchema)===null||oe===void 0?void 0:oe.title)||re.name,Component:"TableCollectionFieldInitializer",find:l,remove:I,schemaInitialize:function(Tt){var lt;Re==null||(lt=Re.schemaInitialize)===null||lt===void 0||lt.call(Re,Tt,{field:re,readPretty:fe,block:"Table",targetCollection:Le(re.target)})},field:re,schema:tt}})}function O(){var pe,ee=(0,a.useCollection_deprecated)(),ue=ee.fields,ge=(0,n.$)(),Ie=ge.t,Ae=(0,a.useCollectionManager_deprecated)(),Le=Ae.getInterface,Te=Ae.getCollectionFields,je=Ae.getCollection,Pe=ue==null||(pe=ue.filter(function(fe){return["o2o","oho","obo","m2o"].includes(fe.interface)}))===null||pe===void 0?void 0:pe.map(function(fe){return N({getCollectionFields:Te,field:fe,getInterface:Le,getCollection:je,schemaName:fe.name,maxDepth:2,depth:1,t:Ie})});return Pe}function N(pe){var ee,ue,ge=pe.getCollectionFields,Ie=pe.field,Ae=pe.getInterface,Le=pe.getCollection,Te=pe.schemaName,je=pe.maxDepth,Pe=pe.depth,fe=pe.t,re=ge(Ie.target),T=re==null||(ee=re.filter(function(Ze){return(Ze==null?void 0:Ze.interface)&&!["subTable"].includes(Ze==null?void 0:Ze.interface)&&!(Ze!=null&&Ze.treeChildren)}))===null||ee===void 0?void 0:ee.map(function(Ze){var We,tt=Ae(Ze.interface),St="".concat(Te,".").concat(Ze.name),Tt={name:St,"x-component":"CollectionField","x-read-pretty":!0,"x-collection-field":"".concat(Ie.target,".").concat(Ze.name),"x-component-props":{}};return{type:"item",key:"".concat(Ie.target,"_").concat(Ze.name,"_").concat(St),name:St,title:(Ze==null||(We=Ze.uiSchema)===null||We===void 0?void 0:We.title)||Ze.name,Component:"TableCollectionFieldInitializer",find:l,remove:I,schemaInitialize:function(ut){var nt;tt==null||(nt=tt.schemaInitialize)===null||nt===void 0||nt.call(tt,ut,{field:Ze,readPretty:!0,block:"Table",targetCollection:Le(Ie.target)})},field:Ze,schema:Tt}}),ce={type:"itemGroup",key:"".concat(Ie.target,"_").concat(Te,"_displayFields"),name:"".concat(Te,"-displayCollectionFields"),title:fe("Display fields"),children:T},be=[ce];if(Pe<je){var oe=re==null?void 0:re.filter(function(Ze){return["o2o","oho","obo","m2o"].includes(Ze.interface)}).map(function(Ze){return N({getCollectionFields:ge,field:Ze,getInterface:Ae,getCollection:Le,schemaName:"".concat(Te,".").concat(Ze.name),maxDepth:je,depth:Pe+1,t:fe})});if(oe.length){var Re={type:"itemGroup",key:"".concat(Ie.target,"_").concat(Te,"_associationFields"),name:"".concat(Te,"-associationFields"),title:fe("Display association fields"),children:oe};be.push(Re)}}return{type:"subMenu",key:"".concat(Ie.target,"_").concat(Te,"_submenu"),name:Te,title:(ue=Ie.uiSchema)===null||ue===void 0?void 0:ue.title,children:be}}function t(){var pe=(0,a.useCollection_deprecated)(),ee=pe.name,ue=(0,a.useCollectionManager_deprecated)(),ge=ue.getInterface,Ie=ue.getInheritCollections,Ae=ue.getCollection,Le=ue.getParentCollectionFields,Te=(0,K.useFieldSchema)(),je=Te["x-component"]==="AssociationField.SubTable",Pe=(0,K.useForm)(),fe=je?Pe.readPretty:!0,re=Ie(ee);return re==null?void 0:re.map(function(T){var ce=Le(T,ee),be=Ae(T);return r()({},be==null?void 0:be.title,ce==null?void 0:ce.filter(function(oe){return oe==null?void 0:oe.interface}).map(function(oe){var Re,Ze,We,tt,St=ge(oe.interface),Tt=(oe==null?void 0:oe.target)&&((Re=Ae(oe==null?void 0:oe.target))===null||Re===void 0?void 0:Re.template)==="file",lt={name:"".concat(oe.name),"x-component":"CollectionField","x-read-pretty":fe||((Ze=oe.uiSchema)===null||Ze===void 0?void 0:Ze["x-read-pretty"]),"x-collection-field":"".concat(ee,".").concat(oe.name),"x-component-props":Tt?{fieldNames:{label:"preview",value:"id"}}:{},"x-decorator":je?S.includes(oe.interface)||Tt?"QuickEdit":"FormItem":null,"x-decorator-props":{labelStyle:{display:"none"}}};return{name:(oe==null||(We=oe.uiSchema)===null||We===void 0?void 0:We.title)||oe.name,type:"item",title:(oe==null||(tt=oe.uiSchema)===null||tt===void 0?void 0:tt.title)||oe.name,Component:"TableCollectionFieldInitializer",find:l,remove:I,schemaInitialize:function(nt){var Je;St==null||(Je=St.schemaInitialize)===null||Je===void 0||Je.call(St,nt,{field:oe,readPretty:!0,block:"Table",targetCollection:Ae(oe==null?void 0:oe.target)})},field:oe,schema:lt}}))})}var B=function(ee){var ue,ge=(0,a.useCollection_deprecated)(),Ie=ge.name,Ae=ge.currentFields,Le=(0,a.useCollectionManager_deprecated)(),Te=Le.getInterface,je=Le.getCollection,Pe=(0,K.useForm)(),fe=ee||{},re=fe.readPretty,T=re===void 0?Pe.readPretty:re,ce=fe.block,be=ce===void 0?"Form":ce,oe=(0,$.XCj)(),Re=oe.fieldSchema,Ze=Re==null?void 0:Re["x-action"];return(ue=Ae.filter(function(We){return!We.collectionName||We.collectionName===Ie}))===null||ue===void 0||(ue=ue.filter(function(We){return(We==null?void 0:We.interface)&&!(We!=null&&We.treeChildren)}))===null||ue===void 0?void 0:ue.map(function(We){var tt,St,Tt,lt,ut=Te(We.interface),nt=je(We.target),Je=(We==null?void 0:We.target)&&((tt=je(We==null?void 0:We.target))===null||tt===void 0?void 0:tt.template)==="file",hn=nt,mn=We==null||(St=We.uiSchema)===null||St===void 0||(St=St["x-component-props"])===null||St===void 0?void 0:St.fieldNames,vn={type:"string",name:We.name,"x-toolbar":"FormItemSchemaToolbar","x-settings":"fieldSettings:FormItem","x-component":"CollectionField","x-decorator":"FormItem","x-collection-field":"".concat(Ie,".").concat(We.name),"x-component-props":Je?{fieldNames:{label:"preview",value:"id"}}:hn&&mn?{fieldNames:C()(C()({},mn),{},{label:(nt==null?void 0:nt.titleField)||mn.label})}:{},"x-read-pretty":We==null||(Tt=We.uiSchema)===null||Tt===void 0?void 0:Tt["x-read-pretty"]},an={type:"item",name:We.name,title:(We==null||(lt=We.uiSchema)===null||lt===void 0?void 0:lt.title)||We.name,Component:"CollectionFieldInitializer",remove:d,schemaInitialize:function(cn){var _n;ut==null||(_n=ut.schemaInitialize)===null||_n===void 0||_n.call(ut,cn,{field:We,block:be,readPretty:T,action:Ze,targetCollection:nt})},schema:vn};return be=="Kanban"&&(an.find=function(fn,cn,_n){var zt=Y(fn,"x-component",be);return Y(zt,cn,_n)}),an})},X=function(ee){var ue,ge=(0,a.useCollection_deprecated)(),Ie=ge.name,Ae=ge.currentFields,Le=(0,a.useCollectionManager_deprecated)(),Te=Le.getInterface,je=Le.getCollection,Pe=(0,K.useForm)(),fe=ee||{},re=fe.readPretty,T=re===void 0?Pe.readPretty:re,ce=fe.block,be=ce===void 0?"FilterForm":ce,oe=(0,$.XCj)(),Re=oe.snapshot,Ze=oe.fieldSchema,We=Ze==null?void 0:Ze["x-action"];return(ue=Ae.filter(function(tt){return!tt.collectionName||tt.collectionName===Ie}))===null||ue===void 0||(ue=ue.filter(function(tt){var St;return(tt==null?void 0:tt.interface)&&((St=Te(tt.interface))===null||St===void 0?void 0:St.filterable)}))===null||ue===void 0?void 0:ue.map(function(tt){var St,Tt,lt=Te(tt.interface),ut=je(tt.target),nt={type:"string",name:tt.name,required:!1,"x-toolbar":"FormItemSchemaToolbar","x-settings":"fieldSettings:FilterFormItem","x-component":"CollectionField","x-decorator":"FormItem","x-use-decorator-props":"useFormItemProps","x-collection-field":"".concat(Ie,".").concat(tt.name),"x-component-props":{utc:!1,underFilter:!0}};if((0,E.$f)(tt)){var Je;nt={type:"string",name:"".concat(tt.name),required:!1,"x-toolbar":"FormItemSchemaToolbar","x-settings":"fieldSettings:FilterFormItem","x-component":"CollectionField","x-decorator":"FormItem","x-use-decorator-props":"useFormItemProps","x-collection-field":"".concat(Ie,".").concat(tt.name),"x-component-props":C()(C()({},(Je=tt.uiSchema)===null||Je===void 0?void 0:Je["x-component-props"]),{},{utc:!1,underFilter:!0})}}var hn={name:(tt==null||(St=tt.uiSchema)===null||St===void 0?void 0:St.title)||tt.name,type:"item",title:(tt==null||(Tt=tt.uiSchema)===null||Tt===void 0?void 0:Tt.title)||tt.name,Component:"CollectionFieldInitializer",remove:d,schemaInitialize:function(vn){var an;lt==null||(an=lt.schemaInitialize)===null||an===void 0||an.call(lt,vn,{field:tt,block:be,readPretty:T,action:We,targetCollection:ut})},schema:nt};return hn})},V=function(ee){var ue,ge=(0,a.useCollection_deprecated)(),Ie=ge.name,Ae=ge.fields,Le=(0,a.useCollectionManager_deprecated)(),Te=Le.getInterface,je=Le.getCollectionFields,Pe=Le.getCollection,fe=(0,K.useForm)(),re=(0,n.$)(),T=re.t,ce=ee||{},be=ce.readPretty,oe=be===void 0?fe.readPretty:be,Re=ce.block,Ze=Re===void 0?"Form":Re,We=Ze==="Form"?["m2o","obo","oho"]:["o2o","oho","obo","m2o"],tt=Ae==null||(ue=Ae.filter(function(St){return We.includes(St.interface)}))===null||ue===void 0?void 0:ue.map(function(St){return se({getCollectionFields:je,field:St,getInterface:Te,getCollection:Pe,readPretty:oe,block:Ze,schemaName:St.name,maxDepth:2,depth:1,t:T})});return tt},U=function pe(ee,ue,ge,Ie,Ae){var Le,Te;if(ee.target&&ee.uiSchema){var je;if(Ae.includes(ee.target)||Ae.length>=1)return;var Pe=Ie(ee.target);return Pe!=null&&Pe.length?{type:"subMenu",name:ue,title:(je=ee.uiSchema)===null||je===void 0?void 0:je.title,children:Pe.map(function(re){return pe(re,"".concat(ue,".").concat(re.name),ge,Ie,[].concat(i()(Ae),[ee.target]))}).filter(Boolean)}:void 0}if(ee.uiSchema){var fe={type:"string",name:ue,"x-toolbar":"FormItemSchemaToolbar","x-settings":"fieldSettings:FilterFormItem","x-designer-props":{interface:ee.interface},"x-component":"CollectionField","x-component-props":{utc:!1,underFilter:!0},"x-read-pretty":!1,"x-decorator":"FormItem","x-collection-field":"".concat(ge,".").concat(ue)};return{name:((Le=ee.uiSchema)===null||Le===void 0?void 0:Le.title)||ee.name,type:"item",title:((Te=ee.uiSchema)===null||Te===void 0?void 0:Te.title)||ee.name,Component:"CollectionFieldInitializer",remove:d,schema:fe}}},D=function(){var ee=(0,a.useCollection_deprecated)(),ue=ee.name,ge=ee.fields,Ie=(0,a.useCollectionManager_deprecated)(),Ae=Ie.getCollectionFields,Le=["o2o","oho","obo","m2o","m2m"];return ge==null?void 0:ge.filter(function(Te){return Te.target&&Te.uiSchema&&Le.includes(Te.interface)}).map(function(Te){return U(Te,Te.name,ue,Ae,[])}).filter(Boolean)},ne=function(ee){var ue=(0,a.useCollection_deprecated)(),ge=ue.name,Ie=(0,a.useCollectionManager_deprecated)(),Ae=Ie.getInterface,Le=Ie.getInheritCollections,Te=Ie.getCollection,je=Ie.getParentCollectionFields,Pe=Le(ge),fe=(0,$.XCj)(),re=fe.snapshot,T=(0,K.useForm)();return Pe==null?void 0:Pe.map(function(ce){var be,oe=je(ce,ge),Re=ee||{},Ze=Re.readPretty,We=Ze===void 0?T.readPretty:Ze,tt=Re.block,St=tt===void 0?"Form":tt,Tt=Re.component,lt=Tt===void 0?"CollectionField":Tt,ut=Te(ce);return r()({},ut==null?void 0:ut.title,oe==null||(be=oe.filter(function(nt){return nt==null?void 0:nt.interface}))===null||be===void 0?void 0:be.map(function(nt){var Je,hn,mn,vn,an=Ae(nt.interface),fn=Te(nt.target),cn={type:"string",name:nt.name,title:(nt==null||(Je=nt.uiSchema)===null||Je===void 0?void 0:Je.title)||nt.name,"x-toolbar":"FormItemSchemaToolbar","x-settings":"fieldSettings:FormItem","x-component":lt,"x-decorator":"FormItem","x-collection-field":"".concat(ge,".").concat(nt.name),"x-component-props":{},"x-read-pretty":nt==null||(hn=nt.uiSchema)===null||hn===void 0?void 0:hn["x-read-pretty"]};return{name:(nt==null||(mn=nt.uiSchema)===null||mn===void 0?void 0:mn.title)||nt.name,type:"item",title:(nt==null||(vn=nt.uiSchema)===null||vn===void 0?void 0:vn.title)||nt.name,Component:"CollectionFieldInitializer",remove:d,schemaInitialize:function(zt){var xn;an==null||(xn=an.schemaInitialize)===null||xn===void 0||xn.call(an,zt,{field:nt,block:St,readPretty:We,targetCollection:fn})},schema:cn}}))})},q=function(ee){var ue=(0,a.useCollection_deprecated)(),ge=ue.name,Ie=(0,a.useCollectionManager_deprecated)(),Ae=Ie.getInterface,Le=Ie.getInheritCollections,Te=Ie.getCollection,je=Ie.getParentCollectionFields,Pe=Le(ge),fe=(0,$.XCj)(),re=fe.snapshot,T=(0,K.useForm)();return Pe==null?void 0:Pe.map(function(ce){var be,oe=je(ce,ge),Re=ee||{},Ze=Re.readPretty,We=Ze===void 0?T.readPretty:Ze,tt=Re.block,St=tt===void 0?"Form":tt,Tt=Te(ce);return r()({},Tt.title,oe==null||(be=oe.filter(function(lt){var ut;return(lt==null?void 0:lt.interface)&&((ut=Ae(lt.interface))===null||ut===void 0?void 0:ut.filterable)}))===null||be===void 0?void 0:be.map(function(lt){var ut,nt,Je,hn,mn=Ae(lt.interface),vn=Te(lt.target),an={type:"string",name:lt.name,title:(lt==null||(ut=lt.uiSchema)===null||ut===void 0?void 0:ut.title)||lt.name,required:!1,"x-toolbar":"FormItemSchemaToolbar","x-settings":"fieldSettings:FilterFormItem","x-component":"CollectionField","x-decorator":"FormItem","x-collection-field":"".concat(ge,".").concat(lt.name),"x-component-props":{utc:!1,underFilter:!0},"x-read-pretty":lt==null||(nt=lt.uiSchema)===null||nt===void 0?void 0:nt["x-read-pretty"]};return{name:(lt==null||(Je=lt.uiSchema)===null||Je===void 0?void 0:Je.title)||lt.name,type:"item",title:(lt==null||(hn=lt.uiSchema)===null||hn===void 0?void 0:hn.title)||lt.name,Component:"CollectionFieldInitializer",remove:d,schemaInitialize:function(cn){var _n;mn==null||(_n=mn.schemaInitialize)===null||_n===void 0||_n.call(mn,cn,{field:lt,block:St,readPretty:We,targetCollection:vn})},schema:an}}))})},J=function(ee){var ue,ge=(0,a.useCollection_deprecated)(),Ie=ge.name,Ae=ge.currentFields,Le=(0,a.useCollectionManager_deprecated)(),Te=Le.getInterface,je=Le.getCollection,Pe=(0,K.useForm)(),fe=ee||{},re=fe.readPretty,T=re===void 0?Pe.readPretty:re,ce=fe.block,be=ce===void 0?"Form":ce,oe=u();return Ae==null||(ue=Ae.filter(function(Re){return(Re==null?void 0:Re.interface)&&Re.interface!=="snapshot"&&Re.type!=="sequence"}))===null||ue===void 0?void 0:ue.map(function(Re){var Ze,We,tt,St=Te(Re.interface),Tt={type:"string",name:Re.name,title:(Re==null||(Ze=Re.uiSchema)===null||Ze===void 0?void 0:Ze.title)||Re.name,"x-toolbar":"FormItemSchemaToolbar","x-settings":"fieldSettings:FormItem","x-component":"AssignedField","x-decorator":"FormItem","x-collection-field":"".concat(Ie,".").concat(Re.name)};return{name:(Re==null||(We=Re.uiSchema)===null||We===void 0?void 0:We.title)||Re.name,type:"item",title:(Re==null||(tt=Re.uiSchema)===null||tt===void 0?void 0:tt.title)||Re.name,Component:"CollectionFieldInitializer",remove:oe,schemaInitialize:function(ut){var nt;St==null||(nt=St.schemaInitialize)===null||nt===void 0||nt.call(St,ut,{field:Re,block:be,readPretty:T,targetCollection:je(Re.target)})},schema:Tt}})},Y=function pe(ee,ue,ge,Ie){return K.Schema.isSchemaInstance(ee)?ee.reduceProperties(function(Ae,Le){if(Le[ue]===ge&&(!Ie||Le.name===Ie))return Le;if(Le["x-component"]!=="Action.Container"&&!Le["x-component"].includes("AssociationField")){var Te=pe(Le,ue,ge,Ie);if(Te)return Te}return Ae}):null},P=function(ee,ue){return ue(ee)},w=function pe(ee){return ee.parent?ee.parent["x-initializer"]?ee.parent:pe(ee.parent):null},ie=function(ee,ue){var ge,Ie,Ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Y,Le=arguments.length>3&&arguments[3]!==void 0?arguments[3]:P,Te=arguments.length>4?arguments[4]:void 0,je=(0,o.z)()||{},Pe=je.removeActiveFieldName,fe=(0,L.bz)(),re=fe.form,T=(0,K.useFieldSchema)();if(!((ge=T)!==null&&ge!==void 0&&ge["x-initializer"])&&((Ie=T)===null||Ie===void 0?void 0:Ie["x-decorator"])==="FormItem"){var ce=w(T);ce&&(T=ce)}var be=(0,$.ngQ)(),oe=be.remove,Re=Ae(T,ue,ee,Te);return{schema:Re,exists:!!Re,remove:function(){Pe==null||Pe(Re.name),re==null||re.query(new RegExp("".concat(Re.parent.name,".").concat(Re.name,"$"))).forEach(function(We){var tt,St;(tt=We.setValue)===null||tt===void 0||tt.call(We,void 0),(St=We.setInitialValue)===null||St===void 0||St.call(We,void 0)}),Re&&Le(Re,oe)}}},G=function(ee){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,Ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,Ae=(0,n.$)(),Le=Ae.t,Te=(0,a.useCollection_deprecated)(),je=(0,Q.$t)(),Pe=je.getTemplatesByCollection,fe=Pe(Te.dataSource,ge||Te.name).filter(function(T){return ee&&T.componentName===ee}).filter(function(T){return["FormItem","ReadPrettyFormItem"].includes(ee)||T.resourceName===Ie});if(!fe.length)return[];var re=0;return[{key:"".concat(ge||ee,"_table_blank"),type:"item",name:Te.name,title:Le("Blank block"),item:ue},{type:"divider"},{key:"".concat(ge||ee,"_table_subMenu_").concat(re,"_copy"),type:"subMenu",name:"copy",title:Le("Duplicate template"),children:fe.map(function(T){var ce=["FormItem","ReadPrettyFormItem"].includes(T==null?void 0:T.componentName)?"".concat(T==null?void 0:T.name," ").concat(Le("(Fields only)")):T==null?void 0:T.name;return{type:"item",mode:"copy",name:Te.name,template:T,item:ue,title:ce||Le("Untitled")}})},{key:"".concat(ge||ee,"_table_subMenu_").concat(re,"_ref"),type:"subMenu",name:"ref",title:Le("Reference template"),children:fe.map(function(T){var ce=["FormItem","ReadPrettyFormItem"].includes(T==null?void 0:T.componentName)?"".concat(T==null?void 0:T.name," ").concat(Le("(Fields only)")):T==null?void 0:T.name;return{type:"item",mode:"reference",name:Te.name,template:T,item:ue,title:ce||Le("Untitled")}})}]},le=function(ee){var ue=ee.name,ge=ee.componentName,Ie=ee.filter,Ae=Ie===void 0?function(){return!0}:Ie,Le=ee.onlyCurrentDataSource,Te=Le===void 0?!1:Le,je=ee.showAssociationFields,Pe=ee.filterDataSource,fe=ee.dataBlockInitializerProps,re=ee.hideOtherRecordsInPopup,T=ee.onClick,ce=ee.filterOtherRecordsCollection,be=ee.currentText,oe=ee.otherText,Re=(0,z.rE)(),Ze=Re.componentNamePrefix,We=(0,n.$)(),tt=We.t,St=(0,R.fp)(),Tt=(0,y.useDataSourceKey)(),lt=(0,y.useCollection)(),ut=me({componentName:Ze+ge,filterCollections:Ae,showAssociationFields:je,componentNamePrefix:Ze}),nt=(0,y.useAssociationName)(),Je=St.getAllCollections({filterCollection:function(fn){return Te&&fn.dataSource!==Tt?!1:Ae({collection:fn})},filterDataSource:Pe});Te&&(Je=Je.filter(function(an){return an.key===Tt}));var hn=(0,Q.$t)(),mn=hn.getTemplatesByCollection,vn=(0,M.useMemo)(function(){return Je.map(function(an){var fn=an.key,cn=an.displayName,_n=an.collections;return{name:fn,label:cn,type:"subMenu",children:i()(Se({name:ue,association:nt,collections:_n,componentName:Ze+ge,searchValue:"",dataSource:fn,getTemplatesByCollection:mn,t:tt,componentNamePrefix:Ze}).sort(function(zt){var xn=h().toArray((lt==null?void 0:lt.inherits)||[]);if(zt.name===(lt==null?void 0:lt.name)||xn.some(function(Qt){return Qt===zt.name}))return-1}))}})},[Je,lt==null?void 0:lt.inherits,lt==null?void 0:lt.name,ge,mn,tt]);return je?(0,M.useMemo)(function(){var an={name:"currentRecord",collectionName:lt.name,dataSource:lt.dataSource,Component:y.DataBlockInitializer,onClick:function(){},componentProps:C()(C()({},fe),{},{icon:null,title:be||tt("Current record"),name:"currentRecord",hideSearch:!1,hideChildrenIfSingleCollection:!0,items:vn})},fn={name:"associationRecords",Component:y.DataBlockInitializer,onClick:function(){},componentProps:C()(C()({},fe),{},{icon:null,title:tt("Associated records"),name:"associationRecords",hideSearch:!1,items:[{name:"associationFields",label:tt("Association fields"),type:"subMenu",children:ut}]})},cn={ReadPrettyFormItem:"Details"},_n={name:"otherRecords",Component:y.DataBlockInitializer,onClick:function(){},componentProps:C()(C()({},fe),{},{hideSearch:!1,icon:null,title:oe||tt("Other records"),name:"otherRecords",showAssociationFields:!1,onlyCurrentDataSource:!1,hideChildrenIfSingleCollection:!1,fromOthersInPopup:!0,componentType:cn[ge]||ge,filter:function(en){var Rn=en.collection,An=en.associationField;return ce?ce(Rn):!0},onClick:function(en){T(C()(C()({},en),{},{fromOthersInPopup:!0}))}})},zt,xn=ut.length?fn:null;if(vn[0].children.length&&ut.length)re?zt=[an,xn]:zt=[an,xn,_n];else if(vn[0].children.length)if(re){if(vn[0].children.length<=1){var Qt;return vn[0].children=((Qt=vn[0].children[0])===null||Qt===void 0?void 0:Qt.children)||[],vn}zt=[an]}else zt=[an,_n];else re?zt=[xn]:zt=[xn,_n];return[{name:"records",label:tt("Records"),type:"subMenu",children:zt.filter(Boolean)}]},[ut,lt.dataSource,lt.name,ge,fe,ce,re,vn,T,tt]):vn},xe=function(ee){var ue,ge=ee.formItemInitializers,Ie=ge===void 0?"details:configureFields":ge,Ae=ee.actionInitializers,Le=Ae===void 0?"detailsWithPaging:configureActions":Ae,Te=ee.collection,je=ee.dataSource,Pe=ee.association,fe=ee.template,re=ee.settings,T=ee.action,ce=T===void 0?"list":T,be=c()(ee,p),oe=Pe||Te,Re={type:"void","x-acl-action":ce==="get"?"".concat(oe,":get"):"".concat(oe,":view"),"x-decorator":"DetailsBlockProvider","x-decorator-props":C()(C()({dataSource:je,collection:Te,association:Pe,readPretty:!0,action:ce},ce==="list"?{params:{pageSize:1}}:{}),be),"x-toolbar":"BlockSchemaToolbar","x-settings":re,"x-component":"CardItem",properties:r()({},(0,v.uid)(),{type:"void","x-component":"Details","x-use-component-props":"useDetailsBlockProps","x-read-pretty":!0,properties:C()((ue={},r()(ue,(0,v.uid)(),{type:"void","x-initializer":Le,"x-component":"ActionBar","x-component-props":{style:{marginBottom:24}},properties:{}}),r()(ue,"grid",fe||{type:"void","x-component":"Grid","x-initializer":Ie,properties:{}}),ue),ce==="list"?{pagination:{type:"void","x-component":"Pagination","x-use-component-props":"useDetailsPaginationProps"}}:{})})};return Re},_e=function(ee){var ue=ee.formItemInitializers,ge=ue===void 0?"form:configureFields":ue,Ie=ee.actionInitializers,Ae=Ie===void 0?"createForm:configureActions":Ie,Le=ee.collection,Te=ee.resource,je=ee.dataSource,Pe=ee.association,fe=ee.action,re=ee.actions,T=re===void 0?{}:re,ce=ee["x-designer"],be=ce===void 0?"FormV2.Designer":ce,oe=ee.template,Re=ee.title,Ze=ee.settings,We=c()(ee,b),tt=Te||Pe||Le,St=C()(C()({type:"void","x-acl-action-props":{skipScopeCheck:!fe},"x-acl-action":fe?"".concat(tt,":update"):"".concat(tt,":create"),"x-decorator":"FormBlockProvider","x-decorator-props":C()(C()({},We),{},{action:fe,dataSource:je,resource:tt,collection:Le,association:Pe}),"x-toolbar":"BlockSchemaToolbar"},Ze?{"x-settings":Ze}:{"x-designer":be}),{},{"x-component":"CardItem","x-component-props":{title:Re},properties:r()({},(0,v.uid)(),{type:"void","x-component":"FormV2","x-use-component-props":"useFormBlockProps",properties:r()({grid:oe||{type:"void","x-component":"Grid","x-initializer":ge,properties:{}}},(0,v.uid)(),{type:"void","x-initializer":Ae,"x-component":"ActionBar","x-component-props":{layout:"one-column",style:{marginTop:24}},properties:T})})});return St},Ee=function(ee){var ue,ge=ee.formItemInitializers,Ie=ge===void 0?"details:configureFields":ge,Ae=ee.actionInitializers,Le=Ae===void 0?"details:configureActions":Ae,Te=ee.collection,je=ee.association,Pe=ee.dataSource,fe=ee.resource,re=ee.template,T=ee.settings,ce=c()(ee,f),be=fe||je||Te,oe={type:"void","x-acl-action":"".concat(be,":get"),"x-decorator":"FormBlockProvider","x-decorator-props":C()({resource:be,collection:Te,association:je,dataSource:Pe,readPretty:!0,action:"get",useParams:"{{ useParamsFromRecord }}"},ce),"x-toolbar":"BlockSchemaToolbar","x-settings":T,"x-component":"CardItem",properties:r()({},(0,v.uid)(),{type:"void","x-component":"FormV2","x-use-component-props":"useFormBlockProps","x-read-pretty":!0,properties:(ue={},r()(ue,(0,v.uid)(),{type:"void","x-initializer":Le,"x-component":"ActionBar","x-component-props":{style:{marginBottom:24}},properties:{}}),r()(ue,"grid",re||{type:"void","x-component":"Grid","x-initializer":Ie,properties:{}}),ue)})};return oe},ze=function(ee){var ue=ee.collection,ge=ee.rowKey,Ie=ee.tableActionInitializers,Ae=ee.tableColumnInitializers,Le=ee.tableActionColumnInitializers,Te=ee.tableBlockProvider,je=ee.disableTemplate,Pe=ee.dataSource,fe=ee.blockType,re=ee.pageSize,T=re===void 0?20:re,ce=c()(ee,x),be={type:"void","x-decorator":Te??"TableBlockProvider","x-acl-action":"".concat(ue,":list"),"x-decorator-props":C()({collection:ue,dataSource:Pe,action:"list",params:{pageSize:T},rowKey:ge,showIndex:!0,dragSort:!1,disableTemplate:je??!1,blockType:fe},ce),"x-toolbar":"BlockSchemaToolbar","x-settings":"blockSettings:table","x-component":"CardItem","x-filter-targets":[],properties:r()({actions:{type:"void","x-initializer":Ie??"table:configureActions","x-component":"ActionBar","x-component-props":{style:{marginBottom:"var(--nb-spacing)"}},properties:{}}},(0,v.uid)(),{type:"array","x-initializer":Ae??"table:configureColumns","x-component":"TableV2","x-use-component-props":"useTableBlockProps","x-component-props":{rowKey:"id",rowSelection:{type:"checkbox"}},properties:{actions:{type:"void",title:'{{ t("Actions") }}',"x-action-column":"actions","x-decorator":"TableV2.Column.ActionBar","x-component":"TableV2.Column","x-designer":"TableV2.ActionColumnDesigner","x-initializer":Le??"table:configureItemActions",properties:r()({},(0,v.uid)(),{type:"void","x-decorator":"DndContext","x-component":"Space","x-component-props":{},properties:{}})}}})};return be},Se=function(ee){var ue,ge=ee.name,Ie=ee.association,Ae=ee.collections,Le=ee.dataSource,Te=ee.componentName,je=ee.searchValue,Pe=ee.getTemplatesByCollection,fe=ee.t,re=ee.componentNamePrefix;return Ae==null||(ue=Ae.filter(function(T){if(T.inherit)return!1;if(T.filterTargetKey){if([re+"Kanban",re+"FormItem"].includes(Te)&&(T.template==="view"&&!T.writableView||T.template==="sql"))return!1;if(T.template==="file"&&[re+"Kanban",re+"FormItem",re+"Calendar"].includes(Te))return!1;var ce=T.title||T.tableName;return ce?ce.toUpperCase().includes(je.toUpperCase())&&!(T!=null&&T.isThrough&&T!==null&&T!==void 0&&T.autoCreate):!1}else return!1}))===null||ue===void 0?void 0:ue.map(function(T,ce){var be=T.title||T.tableName||T.label,oe=Pe(Le,T.name).filter(function(Re){var Ze,We=ge!=="otherRecords"&&Ie;return We?Re.resourceName!==Ie?!1:Te&&Re.componentName===Te:!We&&Re!==null&&Re!==void 0&&(Ze=Re.resourceName)!==null&&Ze!==void 0&&Ze.includes(".")?!1:Te&&Re.componentName===Te});return oe.length?{key:"".concat(Te,"_table_subMenu_").concat(ce),type:"subMenu",name:"".concat(T.name,"_").concat(ce),title:be,dataSource:Le,children:[{type:"item",name:T.name,dataSource:Le,title:fe("Blank block")},{type:"divider"},{key:"".concat(Te,"_table_subMenu_").concat(ce,"_copy"),type:"subMenu",name:"copy",dataSource:Le,title:fe("Duplicate template"),children:oe.map(function(Re){var Ze=[re+"FormItem",re+"ReadPrettyFormItem"].includes(Re==null?void 0:Re.componentName)?"".concat(Re==null?void 0:Re.name," ").concat(fe("(Fields only)")):Re==null?void 0:Re.name;return{type:"item",mode:"copy",name:T.name,template:Re,dataSource:Le,title:Ze||fe("Untitled")}})},{key:"".concat(Te,"_table_subMenu_").concat(ce,"_ref"),type:"subMenu",name:"ref",dataSource:Le,title:fe("Reference template"),children:oe.map(function(Re){var Ze=[re+"FormItem",re+"ReadPrettyFormItem"].includes(Re==null?void 0:Re.componentName)?"".concat(Re==null?void 0:Re.name," ").concat(fe("(Fields only)")):Re==null?void 0:Re.name;return{type:"item",mode:"reference",name:T.name,template:Re,dataSource:Le,title:Ze||fe("Untitled")}})}]}:{type:"item",name:T.name,title:be,dataSource:Le}})};function se(pe){var ee,ue,ge=pe.getCollectionFields,Ie=pe.field,Ae=pe.getInterface,Le=pe.getCollection,Te=pe.readPretty,je=pe.block,Pe=pe.maxDepth,fe=pe.depth,re=pe.schemaName,T=pe.t,ce=ge(Ie.target),be=ce==null||(ee=ce.filter(function(tt){return(tt==null?void 0:tt.interface)&&!["subTable"].includes(tt==null?void 0:tt.interface)&&!tt.treeChildren}))===null||ee===void 0?void 0:ee.map(function(tt){var St,Tt,lt=Ae(tt.interface),ut=(Ie==null?void 0:Ie.target)&&((St=Le(Ie==null?void 0:Ie.target))===null||St===void 0?void 0:St.template)==="file",nt="".concat(re,".").concat(tt.name),Je={type:"string",name:nt,"x-toolbar":"FormItemSchemaToolbar","x-settings":"fieldSettings:FormItem","x-component":"CollectionField","x-read-pretty":Te,"x-component-props":{"pattern-disable":je==="Form"&&Te,fieldNames:ut?{label:"preview",value:"id"}:void 0},"x-decorator":"FormItem","x-collection-field":"".concat(Ie.target,".").concat(tt.name)};return{name:nt,type:"item",title:(tt==null||(Tt=tt.uiSchema)===null||Tt===void 0?void 0:Tt.title)||tt.name,Component:"CollectionFieldInitializer",remove:d,schemaInitialize:function(mn){var vn;lt==null||(vn=lt.schemaInitialize)===null||vn===void 0||vn.call(lt,mn,{field:tt,block:je,readPretty:Te,targetCollection:Le(Ie.target)})},schema:Je}}),oe={type:"itemGroup",name:"".concat(re,"-displayCollectionFields"),title:T("Display fields"),children:be},Re=[oe];if(fe<Pe){var Ze=ce==null?void 0:ce.filter(function(tt){return["o2o","oho","obo","m2o"].includes(tt.interface)}).map(function(tt){return se({getCollectionFields:ge,field:tt,getInterface:Ae,getCollection:Le,schemaName:"".concat(re,".").concat(tt.name),readPretty:Te,block:je,maxDepth:Pe,depth:fe+1,t:T})});if(Ze.length){var We={type:"itemGroup",name:"".concat(re,"-associationFields"),title:T("Display association fields"),children:Ze};Re.push(We)}}return{type:"subMenu",name:"".concat(re,".").concat(Ie.name),title:(ue=Ie.uiSchema)===null||ue===void 0?void 0:ue.title,children:Re}}function me(pe){var ee=pe.componentName,ue=pe.filterCollections,ge=pe.showAssociationFields,Ie=pe.componentNamePrefix,Ae=(0,K.useFieldSchema)(),Le=(0,a.useCollectionManager_deprecated)(),Te=Le.getCollectionFields,je=(0,a.useCollection_deprecated)(),Pe=(0,y.useCollectionManager)(),fe=(0,y.useDataSourceKey)(),re=(0,Q.$t)(),T=re.getTemplatesByCollection,ce=(0,n.$)(),be=ce.t,oe=(0,$.eJW)();return(0,M.useMemo)(function(){if(!ge)return[];var Re=[];if(Ae["x-initializer"])Re=je.fields;else{var Ze=w(Ae.parent);Ze&&(Re=Te(Ze))}return Re.filter(function(We){return["linkTo","subTable","o2m","m2m","obo","oho","o2o","m2o"].includes(We.interface)}).filter(function(We){return ue({associationField:We})}).map(function(We,tt){var St=oe(We.uiSchema.title||We.name),Tt=T(fe,We.target).filter(function(lt){return lt.resourceName!=="".concat(We.collectionName,".").concat(We.name)?!1:ee===Ie+"ReadPrettyFormItem"?["hasOne","belongsTo"].includes(We.type)?lt.componentName===Ie+"ReadPrettyFormItem":lt.componentName===Ie+"Details":lt.componentName===ee});return Tt.length?{key:"associationFiled_".concat(ee,"_table_subMenu_").concat(tt),type:"subMenu",name:"".concat(We.target,"_").concat(tt),title:St,dataSource:fe,children:[{type:"item",name:"".concat(We.collectionName,".").concat(We.name),collectionName:We.target,dataSource:fe,title:be("Blank block"),associationField:We},{type:"divider"},{key:"associationFiled_".concat(ee,"_table_subMenu_").concat(tt,"_copy"),type:"subMenu",name:"copy",dataSource:fe,title:be("Duplicate template"),children:Tt.map(function(lt){var ut=[Ie+"FormItem",Ie+"ReadPrettyFormItem"].includes(lt==null?void 0:lt.componentName)?"".concat(lt==null?void 0:lt.name," ").concat(be("(Fields only)")):lt==null?void 0:lt.name;return{type:"item",mode:"copy",name:"".concat(We.collectionName,".").concat(We.name),collectionName:We.target,template:lt,dataSource:fe,title:ut||be("Untitled"),associationField:We}})},{key:"associationFiled_".concat(ee,"_table_subMenu_").concat(tt,"_ref"),type:"subMenu",name:"ref",dataSource:fe,title:be("Reference template"),children:Tt.map(function(lt){var ut=[Ie+"FormItem",Ie+"ReadPrettyFormItem"].includes(lt==null?void 0:lt.componentName)?"".concat(lt==null?void 0:lt.name," ").concat(be("(Fields only)")):lt==null?void 0:lt.name;return{type:"item",mode:"reference",name:"".concat(We.collectionName,".").concat(We.name),collectionName:We.target,template:lt,dataSource:fe,title:ut||be("Untitled"),associationField:We}})}]}:{type:"item",name:"".concat(We.collectionName,".").concat(We.name),collectionName:We.target,title:St,dataSource:fe,associationField:We}})},[je.fields,oe,ee,fe,Ae,ue,Te,T,ge,be,Ie])}},90810:function(He,ae,e){"use strict";e.d(ae,{Mj:function(){return E},EU:function(){return v},HA:function(){return j}});var Z=e(80844),c=e(34041),k=e(67294),i=e(26793),g=e(68091),C=e(62954),A=e(14984),r=e(90297),K=e(85893),v=function(Q){var z,p,b,f,x=Q.openMode,m=x===void 0?!0:x,F=Q.openSize,I=F===void 0?!0:F,d=(0,Z.useFieldSchema)(),u=(0,Z.useField)(),l=(0,i.$)(),S=l.t,H=(0,C.ngQ)(),O=H.dn,N=(0,A.a)(),t=N.isPopupVisibleControlledByURL,B=(d==null||(z=d["x-component-props"])===null||z===void 0?void 0:z.openMode)||"drawer",X=(0,k.useMemo)(function(){return t()?[{label:S("Drawer"),value:"drawer"},{label:S("Dialog"),value:"modal"},{label:S("Page"),value:"page"}]:[{label:S("Drawer"),value:"drawer"},{label:S("Dialog"),value:"modal"}]},[S,t()]);return(0,K.jsxs)(K.Fragment,{children:[m?(0,K.jsx)(g.iW,{closeInitializerMenuWhenClick:!1,title:S("Open mode"),options:X,value:B,onChange:function(U){u.componentProps.openMode=U;var D={"x-uid":d["x-uid"]};D["x-component-props"]=d["x-component-props"]||{},D["x-component-props"].openMode=U,d["x-component-props"].openMode=U,Reflect.deleteProperty(d["x-component-props"],"openSize"),O.emit("patch",{schema:D}),O.refresh()}}):null,I&&["modal","drawer"].includes(B)?(0,K.jsx)(g.lV,{closeInitializerMenuWhenClick:!1,children:(0,K.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[S("Popup size"),(0,K.jsx)(c.default,{"data-testid":"antd-select",bordered:!1,options:[{label:S("Small"),value:"small"},{label:S("Middle"),value:"middle"},{label:S("Large"),value:"large"}],value:(p=d==null||(b=d["x-component-props"])===null||b===void 0?void 0:b.openSize)!==null&&p!==void 0?p:(d==null||(f=d["x-component-props"])===null||f===void 0?void 0:f.openMode)=="modal"?"large":"middle",onChange:function(U){u.componentProps.openSize=U;var D={"x-uid":d["x-uid"]};D["x-component-props"]=d["x-component-props"]||{},D["x-component-props"].openSize=U,d["x-component-props"].openSize=U,O.emit("patch",{schema:D}),O.refresh()},style:{textAlign:"right",minWidth:100}})]})}):null]})},j=function(Q){var z,p,b,f,x=Q.openMode,m=x===void 0?!0:x,F=Q.openSize,I=F===void 0?!0:F,d=Q.modeOptions,u=Q.targetSchema,l=(0,Z.useFieldSchema)(),S=u||l,H=(0,Z.useField)(),O=(0,i.$)(),N=O.t,t=(0,C.ngQ)(),B=t.dn,X=(S==null||(z=S["x-component-props"])===null||z===void 0?void 0:z.openMode)||"drawer",V=(0,k.useMemo)(function(){return d||[{label:N("Drawer"),value:"drawer"},{label:N("Dialog"),value:"modal"},{label:N("Page"),value:"page"}]},[d,N]);return(0,K.jsxs)(K.Fragment,{children:[m?(0,K.jsx)(r.Qf,{title:N("Open mode"),options:V,value:X,onChange:function(D){H.componentProps.openMode=D;var ne={"x-uid":S["x-uid"]};ne["x-component-props"]=S["x-component-props"]||{},ne["x-component-props"].openMode=D,S["x-component-props"].openMode=D,Reflect.deleteProperty(S["x-component-props"],"openSize"),B.emit("patch",{schema:ne}),B.refresh()}}):null,I&&["modal","drawer"].includes(X)?(0,K.jsx)(r.Qf,{title:N("Popup size"),options:[{label:N("Small"),value:"small"},{label:N("Middle"),value:"middle"},{label:N("Large"),value:"large"}],value:(p=S==null||(b=S["x-component-props"])===null||b===void 0?void 0:b.openSize)!==null&&p!==void 0?p:(S==null||(f=S["x-component-props"])===null||f===void 0?void 0:f.openMode)=="modal"?"large":"middle",onChange:function(D){H.componentProps.openSize=D;var ne={"x-uid":S["x-uid"]};ne["x-component-props"]=S["x-component-props"]||{},ne["x-component-props"].openSize=D,S["x-component-props"].openSize=D,B.emit("patch",{schema:ne}),B.refresh()}}):null]})},h=e(9783),M=e.n(h),n=e(97857),y=e.n(n),L=e(96486),o=e.n(L),a=e(6145),R=e(22229),E=(0,Z.observer)(function($){var Q,z,p,b,f=$.required,x=f===void 0?!0:f,m=(0,a.useCollectionManager_deprecated)(),F=m.getCollectionJoinField,I=(0,a.useCollection_deprecated)(),d=I.getField,u=(0,Z.useField)(),l=(0,Z.useFieldSchema)(),S=(0,i.$)(),H=S.t,O=(0,C.ngQ)(),N=O.dn,t=O.refresh,B=(0,C.eJW)(),X=d(l.name)||F(l["x-collection-field"]);return(0,K.jsxs)(K.Fragment,{children:[X&&(0,K.jsx)(r.B0,{title:H("Edit field title"),schema:{type:"object",title:H("Edit field title"),properties:{title:{title:H("Field title"),default:u==null?void 0:u.title,description:"".concat(H("Original field title: ")).concat(X==null||(Q=X.uiSchema)===null||Q===void 0?void 0:Q.title),"x-decorator":"FormItem","x-component":"Input","x-component-props":{}}}},onSubmit:function(U){var D,ne=U.title,q=ne.trim()===""?X==null||(D=X.uiSchema)===null||D===void 0?void 0:D.title:ne;u.title=B(q),l.title=ne,N.emit("patch",{schema:{"x-uid":l["x-uid"],title:l.title}}),N.refresh()}},"edit-field-title"),(0,K.jsx)(r.hj,{checked:(z=(p=l["x-decorator-props"])===null||p===void 0?void 0:p.showTitle)!==null&&z!==void 0?z:!0,title:H("Display title"),onChange:function(U){l["x-decorator-props"]=l["x-decorator-props"]||{},l["x-decorator-props"].showTitle=U,u.decoratorProps.showTitle=U,N.emit("patch",{schema:{"x-uid":l["x-uid"],"x-decorator-props":y()(y()({},l["x-decorator-props"]),{},{showTitle:U})}}),N.refresh()}}),!u.readPretty&&(0,K.jsx)(r.B0,{title:H("Edit description"),schema:{type:"object",title:H("Edit description"),properties:{description:{default:u==null?void 0:u.description,"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}},onSubmit:function(U){var D=U.description;u.description=D,l.description=D,N.emit("patch",{schema:{"x-uid":l["x-uid"],description:l.description}}),N.refresh()}},"edit-description"),u.readPretty&&(0,K.jsx)(r.B0,{title:H("Edit tooltip"),schema:{type:"object",title:H("Edit description"),properties:{tooltip:{default:l==null||(b=l["x-decorator-props"])===null||b===void 0?void 0:b.tooltip,"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}},onSubmit:function(U){var D=U.tooltip;u.decoratorProps.tooltip=D,l["x-decorator-props"]=l["x-decorator-props"]||{},l["x-decorator-props"].tooltip=D,N.emit("patch",{schema:{"x-uid":l["x-uid"],"x-decorator-props":l["x-decorator-props"]}}),N.refresh()}},"edit-tooltip"),!u.readPretty&&l["x-component"]!=="FormField"&&x&&(0,K.jsx)(r.hj,{title:H("Required"),checked:l.required,onChange:function(U){var D=M()({},"x-uid",l["x-uid"]);u.required=U,o().set(u,"initStateOfLinkageRules.required",(0,R.TF)(!0,U)),l.required=U,D.required=U,N.emit("patch",{schema:D}),t()}},"required")]})},{displayName:"GeneralSchemaItems"})},32268:function(He,ae,e){"use strict";e.d(ae,{$y:function(){return Ie},ss:function(){return ge}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(13769),C=e.n(g),A=e(80844),r=e(85667),K=e(20863),v=e(96486),j=e.n(v),h=e(67294),M=e(26793),n=e(6145),y=e(87714),L=e(15503),o=e(62954),a=e(82041),R=e(5552),E=e(59637),$=e(85893),Q=h.forwardRef(function(Te,je){var Pe,fe=R.ArrayBase.useArray(),re=R.ArrayBase.useIndex(Te.index),T=(0,M.$)(),ce=T.t;return(0,$.jsx)(E.Z,i()(i()({},Te),{},{checkedChildren:ce("Default"),unCheckedChildren:ce("Default"),checked:fe==null||(Pe=fe.field)===null||Pe===void 0?void 0:Pe.value[re].default,style:{transition:"all 0.25s ease-in-out",color:"rgba(0, 0, 0, 0.8)",fontSize:16,marginLeft:6,marginBottom:3},onChange:function(oe,Re){var Ze;Re.stopPropagation(),fe.field.value.splice(re,1,i()(i()({},fe==null||(Ze=fe.field)===null||Ze===void 0?void 0:Ze.value[re]),{},{default:oe})),fe.field.value.forEach(function(We,tt){if(tt!==re){var St;fe.field.value.splice(tt,1,i()(i()({},fe==null||(St=fe.field)===null||St===void 0?void 0:St.value[tt]),{},{default:!1}))}})},onClick:function(oe,Re){Re.stopPropagation()}}))});Q.displayName="AsDefaultTemplate";var z=e(5574),p=e.n(z),b=e(18699),f=e(84327),x=e(69677),m=e(4393),F=e(32983),I=e(69234),d=e(40411),u=e(93967),l=e.n(u),S=e(50204),H=(0,S.l)("nb-array-collapse",function(Te){var je=Te.componentCls;return c()({},je,{marginBottom:"10px"})}),O=(0,A.observer)(function(Te){var je,Pe=R.ArrayBase.useArray(),fe=R.ArrayBase.useIndex(Te.index),re=(0,M.$)(),T=re.t,ce=Pe==null||(je=Pe.field)===null||je===void 0?void 0:je.value[fe];return(0,h.useEffect)(function(){if(ce.key||(ce.key=(0,f.uid)()),!ce.title){var be;ce.title="".concat(T("Template name")," ").concat(Pe==null||(be=Pe.field)===null||be===void 0||(be=be.value)===null||be===void 0?void 0:be.length)}},[]),(0,$.jsx)(x.Z.TextArea,{value:ce.title,placeholder:T("Template name"),onChange:function(oe){oe.stopPropagation(),ce.title=oe.target.value},onBlur:function(oe){oe.stopPropagation(),ce.title=oe.target.value},autoSize:!0,style:{width:"70%",border:"none"},onClick:function(oe){oe.stopPropagation()}})}),N=function(je){var Pe,fe;return((Pe=je["x-component"])===null||Pe===void 0||(fe=Pe.indexOf)===null||fe===void 0?void 0:fe.call(Pe,"Addition"))>-1},t=function(je){var Pe,fe;return((Pe=je["x-component"])===null||Pe===void 0||(fe=Pe.indexOf)===null||fe===void 0?void 0:fe.call(Pe,"Index"))>-1},B=function(je){var Pe,fe;return((Pe=je["x-component"])===null||Pe===void 0||(fe=Pe.indexOf)===null||fe===void 0?void 0:fe.call(Pe,"Remove"))>-1},X=function(je){var Pe,fe;return((Pe=je["x-component"])===null||Pe===void 0||(fe=Pe.indexOf)===null||fe===void 0?void 0:fe.call(Pe,"MoveUp"))>-1},V=function(je){var Pe,fe;return((Pe=je["x-component"])===null||Pe===void 0||(fe=Pe.indexOf)===null||fe===void 0?void 0:fe.call(Pe,"MoveDown"))>-1},U=function(je){var Pe,fe;return((Pe=je["x-component"])===null||Pe===void 0||(fe=Pe.indexOf)===null||fe===void 0?void 0:fe.call(Pe,"Copy"))>-1},D=function(je){return N(je)||B(je)||V(je)||X(je)||U(je)},ne=function(je){return Array.from({length:je}).map(function(Pe,fe){return fe})},q=function(je,Pe){return je<Pe?ne(je):ne(Pe)},J=function(je,Pe){return je.length<=Pe?je.concat(Pe):je.reduce(function(fe,re){return re<Pe?fe.concat(re):re===Pe?fe.concat([re,re+1]):fe.concat(re+1)},[])},Y=(0,A.observer)(function(Te){var je=H(),Pe=je.componentCls,fe=je.hashId,re=(0,A.useField)(),T=Array.isArray(re.value)?re.value:[],ce=(0,h.useState)(q(T.length,Te.defaultOpenPanelCount)),be=p()(ce,2),oe=be[0],Re=be[1],Ze=(0,A.useFieldSchema)();if((0,h.useEffect)(function(){!re.modified&&T.length&&Re(q(T.length,Te.defaultOpenPanelCount))},[T.length,re]),!Ze)throw new Error("can not found schema object");var We=function(){return Ze.reduceProperties(function(lt,ut,nt){return N(ut)?(0,$.jsx)(A.RecursionField,{schema:ut,name:nt}):lt},null)},tt=function(){if(!T.length)return(0,$.jsx)(m.Z,{className:l()(Pe,fe,Te.className),children:(0,$.jsx)(F.Z,{})})},St=function(){return(0,$.jsx)(I.Z,i()(i()({},Te),{},{activeKey:oe,onChange:function(ut){return Re((0,f.toArr)(ut).map(Number))},className:l()(Pe,fe,Te.className),children:T.map(function(lt,ut){var nt=Array.isArray(Ze.items)?Ze.items[ut]||Ze.items[0]:Ze.items,Je=re.query("".concat(re.address,".").concat(ut)).get("componentProps"),hn=nt["x-component-props"],mn=function(){var cn="".concat((Je==null?void 0:Je.header)||hn.header||re.title),_n=re.address.concat(ut),zt=re.form.queryFeedbacks({type:"error",address:"".concat(_n,".**")});return(0,$.jsxs)(R.ArrayBase.Item,{index:ut,record:function(){var Qt;return(Qt=re.value)===null||Qt===void 0?void 0:Qt[ut]},children:[(0,$.jsx)(A.RecursionField,{schema:nt,name:ut,filterProperties:function(Qt){return!!t(Qt)},onlyRenderProperties:!0}),zt.length?(0,$.jsx)(d.Z,{size:"small",className:"errors-badge",count:zt.length,children:cn}):(0,$.jsx)(O,{item:lt.initialValue||lt,index:ut})]})},vn=(0,$.jsxs)(R.ArrayBase.Item,{index:ut,record:lt,children:[(0,$.jsx)(A.RecursionField,{schema:nt,name:ut,filterProperties:function(cn){return!!D(cn)},onlyRenderProperties:!0}),Je==null?void 0:Je.extra]}),an=(0,$.jsx)(A.RecursionField,{schema:nt,name:ut,filterProperties:function(cn){return!(t(cn)||D(cn))}});return(0,h.createElement)(I.Z.Panel,i()(i()(i()({},hn),Je),{},{forceRender:!0,key:ut,header:mn(),extra:vn}),(0,$.jsx)(R.ArrayBase.Item,{index:ut,record:lt,children:an},ut))})}))};return(0,$.jsxs)(R.ArrayBase,{onAdd:function(lt){Re(J(oe,lt))},onRemove:function(){re.initialValue=re.value},children:[tt(),St(),We()]})},{displayName:"ArrayCollapse"}),P=function(je){var Pe=je.children;return(0,$.jsx)(h.Fragment,{children:Pe})};P.displayName="CollapsePanel",Y.defaultProps={defaultOpenPanelCount:5},Y.displayName="ArrayCollapse",Y.CollapsePanel=P,R.ArrayBase.mixin(Y);var w=null;Y.Copy=h.forwardRef(function(Te,je){var Pe,fe=(0,A.useField)(),re=R.ArrayBase.useArray(),T=R.ArrayBase.useIndex(Te.index);return!re||((Pe=re.field)===null||Pe===void 0?void 0:Pe.pattern)!=="editable"?null:(0,$.jsx)(b.Z,i()(i()({},Te),{},{style:{transition:"all 0.25s ease-in-out",color:"rgba(0, 0, 0, 0.8)",fontSize:"16px",marginLeft:6},ref:je,onClick:function(be){var oe,Re;if(!(fe!=null&&fe.disabled)&&(be.stopPropagation(),!((oe=re.props)!==null&&oe!==void 0&&oe.disabled))){var Ze=(0,v.clone)(re==null||(Re=re.field)===null||Re===void 0?void 0:Re.value[T]);re.field.push(Ze),Te.onClick&&Te.onClick(be)}}}))}),Y.Copy.displayName="ArrayCollapse.Copy";var ie=e(84157),G=e(34041),le=e(90297),xe=e(7340),_e=e(43319),Ee=["title","options","value","onChange"],ze=(0,A.observer)(function(){var Te=(0,n.useCollectionManager_deprecated)(),je=Te.getCollectionFields,Pe=Te.getCollectionField,fe=Te.getCollection,re=Te.isTitleField,T=(0,A.useField)(),ce=(0,A.useFieldSchema)(),be=(0,M.$)(),oe=be.t,Re=(0,o.ngQ)(),Ze=Re.dn,We=(0,o.eJW)(),tt=ce["x-designer-props"],St=tt.formSchema,Tt=tt.data,lt=(0,xe.bz)(),ut=lt.form,nt=T.componentProps.service.resource,Je=fe(nt),hn=je(nt);if(!Tt)return(0,ie.error)("data is required"),null;var mn=function(){var zt;return((zt=Tt.config)===null||zt===void 0||(zt=zt[nt])===null||zt===void 0?void 0:zt.filter)||{}},vn=function(zt){try{j().set(Tt,"config.".concat(nt,".filter"),(0,o.WmO)(zt))}catch(xn){(0,ie.error)(xn)}},an=function(){var zt;return((zt=Tt.config)===null||zt===void 0||(zt=zt[nt])===null||zt===void 0?void 0:zt.titleField)||(Je==null?void 0:Je.titleField)||"id"},fn=function(zt){try{j().set(Tt,"config.".concat(nt,".titleField"),zt)}catch(xn){(0,ie.error)(xn)}},cn=hn.filter(function(_n){return re(_n)}).map(function(_n){var zt;return{value:_n==null?void 0:_n.name,label:We(_n==null||(zt=_n.uiSchema)===null||zt===void 0?void 0:zt.title)||(_n==null?void 0:_n.name)}});return(0,$.jsxs)(le.aN,{draggable:!1,children:[(0,$.jsx)(_e.H,{collectionName:nt,defaultFilter:mn(),form:ut,onSubmit:function(zt){var xn,Qt=zt.filter;vn(Qt);try{T.query("fieldReaction.items.*.layout.dataId").forEach(function(Et){Et.componentProps.service.resource===nt&&(Et.componentProps.service.params={filter:j().isEmpty(Qt)?{}:(0,o.WmO)((0,y.EO)([Qt,Se(T.value)],"$or"))})})}catch(Et){(0,ie.error)(Et)}St["x-data-templates"]=Tt,Ze.emit("patch",{schema:(xn={},c()(xn,"x-uid",St["x-uid"]),c()(xn,"x-data-templates",Tt),xn)}),Ze.refresh()}}),(0,$.jsx)(se,{title:oe("Title field"),options:cn,value:an(),onChange:function(zt){var xn;fn(zt);try{T.query("fieldReaction.items.*.layout.dataId").forEach(function(Et){Et.componentProps.service.resource===nt&&(Et.componentProps.fieldNames.label=zt,Et.componentProps.targetField=Pe("".concat(nt,".").concat(zt||(Je==null?void 0:Je.titleField)||"id")))})}catch(Et){console.error(Et)}St["x-data-templates"]=Tt;var Qt=(xn={},c()(xn,"x-uid",St["x-uid"]),c()(xn,"x-data-templates",Tt),xn);Ze.emit("patch",{schema:Qt}),Ze.refresh()}},"title-field")]})},{displayName:"Designer"});function Se(Te){return Te?{id:{$eq:Te}}:null}function se(Te){var je=Te.title,Pe=Te.options,fe=Te.value,re=Te.onChange,T=C()(Te,Ee);return(0,$.jsx)(le.r2,i()(i()({title:je},T),{},{children:(0,$.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[je,(0,$.jsx)(G.default,i()({popupMatchSelectWidth:!1,bordered:!1,value:fe,onChange:re,options:Pe,style:{textAlign:"right",minWidth:100}},T))]})}))}var me=e(77517),pe=e(94004),ee=["dataId"],ue=(0,A.connect)(K.Z,(0,A.mapProps)({value:"checkedKeys",dataSource:"treeData"}));ue.displayName="Tree";var ge=function(je,Pe){return je==null?void 0:je.map(function(fe){var re=fe.dataId,T=C()(fe,ee),ce=i()({},T);if(re){var be;ce.dataScope={$and:[{id:{$eq:re}}]},ce.titleField=(ce==null?void 0:ce.titleField)||(Pe==null||(be=Pe[fe.collection])===null||be===void 0?void 0:be.titleField)||"id"}return ce})},Ie=(0,L.t)((0,A.observer)(function(Te){var je=(0,o.wNf)(Te),Pe=je.formSchema,fe=je.designerCtx,re=je.defaultValues,T=je.collectionName,ce=(0,me.I)(T),be=ce.collectionList,oe=ce.getEnableFieldTree,Re=ce.getOnLoadData,Ze=ce.getOnCheck,We=ce.getScopeDataSource,tt=ce.useTitleFieldDataSource,St=(0,n.useCollectionManager_deprecated)(),Tt=St.getCollection,lt=St.getCollectionField,ut=(0,M.$)(),nt=ut.t,Je=(0,h.useMemo)(function(){return(0,r.observable)(i()(i()({},re),{},{items:ge((re==null?void 0:re.items)||[],re==null?void 0:re.config)})||{items:[],display:!0,config:c()({},T,{titleField:"",filter:{}})})},[]),hn=function(zt){var xn,Qt=Tt(zt);return lt("".concat(zt,".").concat((Je==null||(xn=Je.config[zt])===null||xn===void 0?void 0:xn.titleField)||(Qt==null?void 0:Qt.titleField)||"id"))},mn=function(zt){var xn,Qt=Tt(zt);return{label:Ae(((xn=Je.config)===null||xn===void 0||(xn=xn[zt])===null||xn===void 0?void 0:xn.titleField)||(Qt==null?void 0:Qt.titleField)||"id"),value:"id"}},vn=function(zt,xn){var Qt,Et=(Qt=Je.config)===null||Qt===void 0||(Qt=Qt[zt])===null||Qt===void 0?void 0:Qt.filter;return j().isEmpty(Et)?{}:(0,o.WmO)((0,y.EO)([Et,Se(xn)],"$or"))},an=(0,h.useMemo)(function(){return{ArrayCollapse:Y}},[]),fn=(0,h.useMemo)(function(){return{getEnableFieldTree:oe,getTargetField:hn,getFieldNames:mn,getFilter:vn,getResource:Le,getOnLoadData:Re,getOnCheck:Ze,collectionName:T,getScopeDataSource:We,useTitleFieldDataSource:tt}},[]),cn=(0,h.useMemo)(function(){return{type:"object",properties:{items:{type:"array",default:Je==null?void 0:Je.items,"x-component":"ArrayCollapse","x-decorator":"FormItem","x-component-props":{accordion:!0},items:{type:"object","x-component":"ArrayCollapse.CollapsePanel","x-component-props":{extra:[(0,$.jsx)(Q,{},"0")]},properties:{layout:{type:"void","x-component":"FormLayout","x-component-props":{layout:"vertical"},properties:{collection:{type:"string",title:'{{ t("Collection") }}',required:!0,description:nt("If collection inherits, choose inherited collections as templates"),default:"{{ collectionName }}","x-display":be.length>1?"visible":"hidden","x-decorator":"FormItem","x-component":"Select","x-component-props":{options:be}},dataScope:{type:"object",title:'{{ t("Filter out a single piece or a group of records as a template") }}',"x-decorator":"FormItem","x-component":"Filter","x-component-props":{dynamicComponent:a.qj},"x-decorator-props":{style:{marginBottom:"0px"}},required:!0,"x-reactions":[{dependencies:[".collection"],fulfill:{state:{disabled:"{{ !$deps[0] }}"},schema:{enum:"{{ getScopeDataSource($deps[0]) }}"}}}]},titleField:{type:"string","x-decorator":"FormItem",title:'{{ t("Title field") }}',"x-decorator-props":{tooltip:'{{t("The title field is used to identify the template record")}}'},"x-component":"Select",required:!0,"x-reactions":"{{useTitleFieldDataSource}}"},syncFromForm:{type:"void",title:'{{ t("Sync from form fields") }}',"x-component":"Action.Link","x-component-props":{type:"primary",style:{float:"right",position:"relative",zIndex:1200},useAction:function(){return(0,pe.F)(Pe)}}},fields:{type:"array",title:'{{ t("Template fields") }}',"x-decorator-props":{tooltip:'{{t("The selected fields will automatically populate the form")}}'},required:!0,description:nt("Only the selected fields will be used as the initialization data for the form"),"x-decorator":"FormItem","x-component":ue,"x-component-props":{treeData:[],checkable:!0,checkStrictly:!0,selectable:!1,loadData:"{{ getOnLoadData($self) }}",onCheck:"{{ getOnCheck($self) }}",rootStyle:{padding:"8px 0",border:"1px solid #d9d9d9",borderRadius:"2px",maxHeight:"30vh",overflow:"auto",margin:"2px 0"}},"x-reactions":[{dependencies:[".collection"],fulfill:{state:{disabled:"{{ !$deps[0] }}",componentProps:{treeData:"{{ getEnableFieldTree($deps[0], $self) }}"}}}}]}}},remove:{type:"void","x-component":"ArrayCollapse.Remove"},moveUp:{type:"void","x-component":"ArrayCollapse.MoveUp"},moveDown:{type:"void","x-component":"ArrayCollapse.MoveDown"}}},properties:{add:{type:"void",title:'{{ t("Add template") }}',"x-component":"ArrayCollapse.Addition"}}},display:{type:"boolean","x-content":'{{ t("Enable form data template") }}',default:(Je==null?void 0:Je.display)!==!1,"x-decorator":"FormItem","x-component":"Checkbox"}}}},[]);return(0,$.jsx)(o.DDd.Provider,{value:i()(i()({},fe),{},{designable:!0}),children:(0,$.jsx)(o.n6,{components:an,scope:fn,schema:cn})})}),{displayName:"FormDataTemplates"});function Ae(Te){return Te||"label"}function Le(Te,je){return Te!==je.componentProps.service.resource&&(je.value=void 0),Te}},45381:function(He,ae,e){"use strict";e.d(ae,{O:function(){return i}});var Z=e(66309),c=e(67294),k=e(85893),i=function(C){var A=C.tag,r=C.type,K=C.displayType,v=K===void 0?!0:K,j={reference:"Reference",duplicate:"Duplicate",preloading:"Preloading"},h={reference:"blue",duplicate:"green",preloading:"cyan"};return(0,k.jsx)("div",{children:(0,k.jsxs)(Z.Z,{color:h[r],children:[(0,k.jsx)("span",{children:A})," ",v?"(".concat(j[r],")"):""]})})}},77517:function(He,ae,e){"use strict";e.d(ae,{I:function(){return M},o:function(){return h}});var Z=e(19632),c=e.n(Z),k=e(97857),i=e.n(k),g=e(5574),C=e.n(g),A=e(80844),r=e(67294),K=e(6145),v=e(62954),j=e(45381),h=["sort","createdById","createdBy","createdAt","updatedById","updatedBy","updatedAt","password","sequence"],M=function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,R=arguments.length>2?arguments[2]:void 0,E=(0,K.useCollectionManager_deprecated)(),$=E.getCollectionFields,Q=E.getAllCollectionsInheritChain,z=E.getCollection,p=E.getInterface,b=(0,r.useState)(I),f=C()(b,1),x=f[0],m=(0,v.eJW)(),F=(0,A.useField)();function I(){var B=Q(o)||[];return B.map(function(X){var V;return{label:(V=z(X))===null||V===void 0?void 0:V.title,value:X}})}var d=function B(X,V){var U=V.exclude,D=U===void 0?[]:U,ne=V.depth,q=ne===void 0?0:ne,J=V.maxDepth,Y=V.prefix,P=Y===void 0?"":Y;return q>J?[]:$(X).map(function(w){var ie;if(!D.includes(w.name)&&w.interface&&!["sort","password","sequence"].includes(w.type)&&!(R&&R(w))){var G={type:"duplicate",tag:m((ie=w.uiSchema)===null||ie===void 0?void 0:ie.title)||w.name},le=i()(i()({},G),{},{role:"button",title:r.createElement(j.O,i()(i()({},G),{},{displayType:a})),key:P?"".concat(P,".").concat(w.name):w.name,isLeaf:!0,field:w});return["belongsTo","belongsToMany"].includes(w.type)?(G.type="reference",le.type="reference",le.title=r.createElement(j.O,i()(i()({},G),{},{type:"reference",displayType:a})),le.isLeaf=!1,le.children=u(w.target,{depth:q+1,maxDepth:J,prefix:le.key,exclude:h})):["hasOne","hasMany"].includes(w.type)&&(le.isLeaf=!1,le.children=B(w.target,{depth:q+1,maxDepth:J,prefix:le.key,exclude:["id"].concat(h)})),le}}).filter(Boolean)},u=function B(X,V){var U=V.prefix,D=V.maxDepth,ne=V.depth,q=ne===void 0?0:ne,J=V.exclude,Y=J===void 0?[]:J;return q>D?[]:$(X).map(function(P){var w;if(!(!P.target||!P.interface)&&!Y.includes(P.name)){var ie={type:"preloading",tag:m((w=P.uiSchema)===null||w===void 0?void 0:w.title)||P.name},G=U?"".concat(U,".").concat(P.name):P.name;return{role:"button",title:r.createElement(j.O,i()(i()({},ie),{},{displayType:a})),key:G,isLeaf:!1,field:P,children:B(P.target,{prefix:G,depth:q+1,maxDepth:D,exclude:Y})}}}).filter(Boolean)},l=function B(X){return X.map(function(V){return i()(i()({},V),{},{role:"button",title:r.createElement(j.O,i()(i()({},V),{},{type:V.type,displayType:a})),children:V.children?B(V.children):null})})},S=(0,r.useCallback)(function(B,X,V){var U,D=X.index,ne=(U=F.initialValue)===null||U===void 0||(U=U.items)===null||U===void 0?void 0:U[D];if(!B)return[];if(ne!=null&&ne.treeData||V)return l(V||ne.treeData);try{return d(B,{exclude:["id"].concat(h),maxDepth:1})}catch(q){return console.error(q),[]}},[]),H=(0,r.useCallback)(function(B){return function(X){return new Promise(function(V){if(X.children.length)return X.children.forEach(function(U){y({node:U,traverseAssociations:u,traverseFields:d,systemKeys:h,fields:B})}),V(void 0);y({node:X,traverseAssociations:u,traverseFields:d,systemKeys:h,fields:B}),V(void 0)})}},[]),O=(0,r.useCallback)(function(B){return function(X){B.value=X}},[]),N=function(X){var V=$(X),U=function(J,Y){var P,w;if(J.interface){var ie=p(J.interface);if(ie!=null&&ie.filterable){var G=ie.filterable,le=G.nested,xe=G.children,_e=G.operators,Ee={name:J.name,title:(J==null||(P=J.uiSchema)===null||P===void 0?void 0:P.title)||J.name,schema:J==null?void 0:J.uiSchema,operators:(_e==null||(w=_e.filter)===null||w===void 0?void 0:w.call(_e,function(me){return!(me!=null&&me.visible)||me.visible(J)}))||[],interface:J.interface};if(!(J.target&&Y>2)){if(Y>2)return Ee;if(xe!=null&&xe.length&&(Ee.children=xe),le){var ze,Se=$(J.target),se=D(Se,Y+1).filter(Boolean);Ee.children=Ee.children||[],(ze=Ee.children).push.apply(ze,c()(se))}return Ee}}}},D=function(J,Y){var P=[];return J.forEach(function(w){var ie=U(w,Y);ie&&P.push(ie)}),P},ne=D(V,1);return ne},t=function(X){var V=X.path.entire.replace("titleField","collection"),U=X.query(V).get("value"),D=$(U),ne=D.filter(function(q){var J;return(J=p(q.interface))===null||J===void 0?void 0:J.titleUsable}).map(function(q){var J;return{value:q==null?void 0:q.name,label:m(q==null||(J=q.uiSchema)===null||J===void 0?void 0:J.title)||(q==null?void 0:q.name)}});X.dataSource=ne};return{collectionList:x,getEnableFieldTree:S,getOnLoadData:H,getOnCheck:O,getScopeDataSource:N,useTitleFieldDataSource:t}};function n(L,o){for(var a=c()(L);a.length;){var R=a.shift();if(R.key===o.key)return R;R.children&&a.push.apply(a,c()(R.children))}}function y(L){var o=L.node,a=L.traverseAssociations,R=L.traverseFields,E=L.systemKeys,$=L.fields,Q=n($.dataSource||$.componentProps.treeData,o),z=[];return["belongsTo","belongsToMany"].includes(o.field.type)&&(o==null?void 0:o.type)==="reference"?z=a(o.field.target,{exclude:E,prefix:o.key,maxDepth:1}):(["hasOne","hasMany"].includes(o.field.type)||(o==null?void 0:o.type)==="duplicate")&&(z=R(o.field.target,{exclude:["id"].concat(c()(E)),prefix:o.key,maxDepth:1})),z.length?Q.children=z:Q.isLeaf=!0,z}},94004:function(He,ae,e){"use strict";e.d(ae,{F:function(){return $}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(19632),C=e.n(g),A=e(97857),r=e.n(A),K=e(5552),v=e(80844),j=e(45360),h=e(67294),M=e(26793),n=e(10097),y=e(6145),L=e(62954),o=e(45381),a=e(77517),R=e(39593),E=e.n(R),$=function(z,p,b){var f=(0,y.useCollectionManager_deprecated)(),x=f.getCollectionJoinField,m=f.getCollectionFields,F=K.ArrayBase.useArray(),I=K.ArrayBase.useIndex(),d=K.ArrayBase.useRecord(),u=(0,L.eJW)(),l=(0,M.$)(),S=l.t,H=(0,v.useForm)(),O=function(B){return function(X,V,U){var D=V.exclude,ne=D===void 0?[]:D,q=V.depth,J=q===void 0?0:q,Y=V.maxDepth,P=V.prefix,w=P===void 0?"":P,ie=V.disabled,G=ie===void 0?!1:ie,le="".concat(X,"-").concat(ne.join(","),"-").concat(J,"-").concat(Y,"-").concat(w),xe=B.get(le);if(xe)return xe;if(J>Y)return[];var _e=m(X).map(function(Ee){var ze;if(!ne.includes(Ee.name)&&Ee.interface&&!["sort","password","sequence"].includes(Ee.type)){var Se={type:"duplicate",tag:u((ze=Ee.uiSchema)===null||ze===void 0?void 0:ze.title)||Ee.name},se=r()(r()({},Se),{},{title:h.createElement(o.O,Se),key:w?"".concat(w,".").concat(Ee.name):Ee.name,isLeaf:!0,field:Ee,disabled:G}),me=U.find(function(ee){return ee.name===se.key});if(["belongsTo","belongsToMany"].includes(Ee.type)&&(!me||["Select","Picker"].includes(me==null?void 0:me.fieldMode)))Se.type="reference",se.type="reference",se.title=h.createElement(o.O,r()(r()({},Se),{},{type:"reference"})),se.isLeaf=!1,se.children=N(Ee.target,{depth:J+1,maxDepth:Y,prefix:se.key,exclude:a.o});else if(["hasOne","hasMany"].includes(Ee.type)||["Nester","SubTable"].includes(me==null?void 0:me.fieldMode)){var pe=!1;["hasOne","hasMany"].includes(Ee.type)&&["Select","Picker"].includes(me==null?void 0:me.fieldMode)&&(pe=!0),se.disabled=!0,se.isLeaf=!1,se.children=O(Ee.target,{depth:J+1,maxDepth:Y,prefix:se.key,exclude:["id"].concat(C()(a.o)),disabled:pe},U)}return se}}).filter(Boolean);return B.set(le,_e),_e}}(new(E())({max:100})),N=function(B){return function(X,V){var U=V.prefix,D=V.maxDepth,ne=V.depth,q=ne===void 0?0:ne,J=V.exclude,Y=J===void 0?[]:J,P="".concat(X,"-").concat(Y.join(","),"-").concat(q,"-").concat(D,"-").concat(U),w=B.get(P);if(w)return w;if(q>D)return[];var ie=m(X).map(function(G){var le,xe;if(!(!G.target||!G.interface)&&!Y.includes(G.name)){var _e={type:"preloading",tag:u((le=G.uiSchema)===null||le===void 0?void 0:le.title)||G.name},Ee=U?"".concat(U,".").concat(G.name):G.name;return{type:"preloading",tag:u((xe=G.uiSchema)===null||xe===void 0?void 0:xe.title)||G.name,title:h.createElement(o.O,_e),key:Ee,isLeaf:!1,field:G,children:N(G.target,{prefix:Ee,depth:q+1,maxDepth:D,exclude:Y})}}}).filter(Boolean);return B.set(P,ie),ie}}(new(E())({max:100})),t=(0,h.useCallback)(function(B,X){if(!B)return[];try{return O(B,{exclude:["id"].concat(C()(a.o)),maxDepth:1,disabled:!1},X)}catch(V){return console.error(V),[]}},[]);return{run:function(){return i()(c()().mark(function X(){var V,U,D,ne,q;return c()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:V=new Set([]),U=new Set([]),D=function P(w,ie){var G;w==null||(G=w.reduceProperties)===null||G===void 0||G.call(w,function(le,xe){var _e,Ee=le||ie,ze=xe["x-collection-field"]&&x(xe["x-collection-field"]),Se=xe.name.includes("."),se=ze&&["hasOne","hasMany","belongsTo","belongsToMany"].includes(ze.type),me=!se&&Se?(0,n.getAssociationPath)(xe.name):xe.name,pe=Ee===""||!Ee?me:Ee+"."+me;if(ze&&!(["hasOne","hasMany"].includes(ze.type)||["SubForm","Nester"].includes((_e=xe["x-component-props"])===null||_e===void 0?void 0:_e.mode))&&U.add(pe),ze&&(se||Se)&&xe["x-component"]!=="TableField"){var ee,ue;if(V.add({name:pe,fieldMode:((ee=xe["x-component-props"])===null||ee===void 0?void 0:ee.mode)||"Select"}),["Nester","SubTable"].includes((ue=xe["x-component-props"])===null||ue===void 0?void 0:ue.mode)){var ge=Ee&&Ee!==""?Ee+"."+xe.name:xe.name;P(xe,ge)}}else["ActionBar","Action","Action.Link","Action.Modal","Selector","Viewer","AddNewer","AssociationField.Selector","AssociationField.AddNewer","TableField"].includes(xe["x-component"])||P(xe,ie)},ie)},D(z,""),ne=t((d==null?void 0:d.collection)||p,C()(V)),b?b(ne,C()(U),H):(F==null||F.field.form.query("fieldReaction.items.".concat(I,".layout.fields")).take(function(P){P.componentProps.treeData=[],setTimeout(function(){return P.componentProps.treeData=ne})}),F==null||F.field.value.splice(I,1,r()(r()({},F==null||(q=F.field)===null||q===void 0?void 0:q.value[I]),{},{fields:C()(U),treeData:ne}))),j.ZP.success(S("Sync successfully"));case 7:case"end":return Y.stop()}},X)}))()}}}},50679:function(He,ae,e){"use strict";e.d(ae,{aN:function(){return O},Mf:function(){return B},dI:function(){return t}});var Z=e(5574),c=e.n(Z),k=e(97857),i=e.n(k),g=e(68400),C=e.n(g),A=e(38308),r=e(45619),K=e(58521),v=e(97133),j=e(80844),h=e(42075),M=e(93967),n=e.n(M),y=e(67294),L=e(26793),o=e(21143),a=e(68091),R=e(49966),E=e(13511),$=e(44990),Q=e(57105),z=e(62954),p=e(40341),b=e(62662),f=e(69054),x=e(9783),m=e.n(x),F=e(50204),I=(0,F.l)("nb-schema-toolbar",function(X){var V=X.componentCls;return m()({},V,{position:"absolute",zIndex:999,top:0,left:0,right:0,bottom:0,border:"2px solid var(--colorBorderSettingsHover)",background:"var(--colorBgSettingsHover)",pointerEvents:"none","&.hidden":{transform:"scale(0)",pointerEvents:"none"},"&.hidden-e2e":{display:"none"},".ant-space-item .anticon":{margin:0},".toolbar-title":{pointerEvents:"none",position:"absolute",fontSize:12,padding:0,lineHeight:"16px",height:"16px",borderBottomRightRadius:2,borderRadius:2,top:2,left:2},".toolbar-title-tag":{padding:"0 3px",borderRadius:2,background:"var(--colorSettings)",color:"#fff",display:"block"},".toolbar-icons":{position:"absolute",right:"2px",top:"2px",lineHeight:"16px",pointerEvents:"all",".ant-space-item":{backgroundColor:"var(--colorSettings)",color:"#fff",lineHeight:"16px",width:"16px",paddingLeft:"1px",alignSelf:"stretch"}}})}),d=e(85893),u,l,S=(0,v.css)(u||(u=C()([`
  pointer-events: none;
  position: absolute;
  font-size: 12px;
  /* background: var(--colorSettings);
  color: #fff; */
  padding: 0;
  line-height: 16px;
  height: 16px;
  border-bottom-right-radius: 2px;
  border-radius: 2px;
  top: 2px;
  left: 2px;
  .title-tag {
    padding: 0 3px;
    border-radius: 2px;
    background: var(--colorSettings);
    color: #fff;
    display: block;
  }
`]))),H=(0,v.css)(l||(l=C()([`
  & .ant-space-item .anticon {
    margin: 0;
  }

  &:hover {
    display: block !important;
  }
`]))),O=function(V){var U,D,ne=(0,j.useFieldSchema)(),q=i()(i()({},V),ne["x-toolbar-props"]||{}),J=q.disableInitializer,Y=q.title,P=q.template,w=q.schemaSettings,ie=q.contextValue,G=q.draggable,le=G===void 0?!0:G,xe=q.showDataSource,_e=xe===void 0?!0:xe,Ee=(0,z.ngQ)(),ze=Ee.dn,Se=Ee.designable,se=(0,j.useField)(),me=(0,L.$)(),pe=me.t,ee=(0,z.eJW)(),ue=(0,f.z)(),ge=ue.getAriaLabel,Ie={dn:ze,field:se,fieldSchema:ne},Ae=(0,R.m)(ne["x-settings"]||w,ne["x-settings-props"]),Le=Ae.render,Te=Ae.exists,je=(0,z.DiB)(),Pe=(0,z.n14)(),fe=(0,E.fp)(),re=fe==null?void 0:fe.getDataSources(),T=(0,$.wl)(),ce=(re==null?void 0:re.length)>1&&T,be=["FormItem","ReadPrettyFormItem"].includes(P==null?void 0:P.componentName)?"".concat(P==null?void 0:P.name," ").concat(pe("(Fields only)")):P==null?void 0:P.name,oe=(0,y.useMemo)(function(){var Re;return{insertPosition:"afterEnd",wrap:(je==null||(Re=je.cols)===null||Re===void 0?void 0:Re.length)>1?void 0:p.BM,Component:function(We){return(0,d.jsx)(A.Z,i()(i()({},We),{},{role:"button","aria-label":ge("schema-initializer"),style:{cursor:"pointer",fontSize:14}}))}}},[ge,je==null||(U=je.cols)===null||U===void 0?void 0:U.length]);return Se?(0,d.jsx)(a.V$,i()(i()({},ie),{},{children:(0,d.jsxs)("div",{className:n()("general-schema-designer",H),children:[Y&&(0,d.jsx)("div",{className:n()("general-schema-designer-title",S),children:(0,d.jsxs)(h.Z,{size:2,children:[(0,d.jsx)("span",{className:"title-tag",children:_e&&ce?"".concat(ee(ce==null?void 0:ce.displayName)," > ").concat(ee(Y)):ee(Y)}),P&&(0,d.jsxs)("span",{className:"title-tag",children:[pe("Reference template"),": ",be||pe("Untitled")]})]})}),(0,d.jsx)("div",{className:"general-schema-designer-icons",children:(0,d.jsxs)(h.Z,{size:3,align:"center",children:[le&&(0,d.jsx)(z.IWB,{children:(0,d.jsx)(r.Z,{role:"button","aria-label":ge("drag-handler")})}),!J&&(Pe!=null&&Pe.InitializerComponent?(0,d.jsx)(Pe.InitializerComponent,i()({},oe)):Pe==null||(D=Pe.renderSchemaInitializer)===null||D===void 0?void 0:D.call(Pe,oe)),Te?Le(ie):(0,d.jsx)(b.cM,i()(i()({title:(0,d.jsx)(K.Z,{role:"button","aria-label":ge("schema-settings"),style:{cursor:"pointer",fontSize:12}})},Ie),{},{children:V.children}))]})})]})})):null},N=y.memo(function(X){var V,U=(0,j.useFieldSchema)(),D=i()(i()({},X),(U==null?void 0:U["x-toolbar-props"])||{}),ne=D.title,q=D.initializer,J=D.settings,Y=D.showBackground,P=D.spaceWrapperClassName,w=D.spaceWrapperStyle,ie=D.showBorder,G=ie===void 0?!0:ie,le=D.draggable,xe=le===void 0?!0:le,_e=D.spaceClassName,Ee=D.spaceStyle,ze=D.toolbarClassName,Se=D.toolbarStyle,se=Se===void 0?{}:Se,me=D.container,pe=(0,z.eJW)(),ee=(0,y.useContext)(o.SchemaComponentContext),ue=ee.draggable,ge=I(),Ie=ge.componentCls,Ae=ge.hashId,Le=(0,L.$)(),Te=Le.t,je=(0,f.z)(),Pe=je.getAriaLabel,fe=(0,E.fp)(),re=fe==null?void 0:fe.getDataSources(),T=(0,$.wl)(),ce=(re==null?void 0:re.length)>1&&T,be=(0,Q.gR)(),oe=(0,y.useCallback)(function(){be({refreshParentSchema:!0})},[be]),Re=(0,y.useMemo)(function(){if(ne){if(typeof ne=="string")return[pe(ne)];if(Array.isArray(ne))return pe(ne)}},[ne]),Ze=(0,R.m)(J||(U==null?void 0:U["x-settings"]),U==null?void 0:U["x-settings-props"]),We=Ze.render,tt=Ze.exists,St=(0,a.IU)(q||(U==null?void 0:U["x-initializer"]),U==null?void 0:U["x-initializer-props"]),Tt=St.render,lt=St.exists,ut=(0,z.DiB)(),nt=(0,z.n14)(),Je=(0,y.useMemo)(function(){var _n;return{insertPosition:"afterEnd",wrap:(ut==null||(_n=ut.cols)===null||_n===void 0?void 0:_n.length)===1?p.BM:void 0,Component:function(xn){return(0,d.jsx)(A.Z,i()(i()({},xn),{},{role:"button","aria-label":Pe("schema-initializer"),style:{cursor:"pointer",fontSize:14}}))}}},[Pe,ut==null||(V=ut.cols)===null||V===void 0?void 0:V.length]),hn=(0,y.useMemo)(function(){return xe===!1||ue===!1?null:(0,d.jsx)(z.IWB,{children:(0,d.jsx)(r.Z,{role:"button","aria-label":Pe("drag-handler")})})},[xe,Pe,ue]),mn=(0,y.useMemo)(function(){if(q===!1)return null;if(lt)return Tt(Je);if(nt!=null&&nt.InitializerComponent||nt!=null&&nt.renderSchemaInitializer){var _n;return nt!=null&&nt.InitializerComponent?(0,d.jsx)(nt.InitializerComponent,i()({},Je)):(_n=nt.renderSchemaInitializer)===null||_n===void 0?void 0:_n.call(nt,Je)}},[nt,q,Je,lt,Tt]),vn=(0,y.useMemo)(function(){return J!==!1&&tt?We():null},[tt,We,J]),an=(0,y.useRef)(null),fn="hidden";(0,y.useEffect)(function(){for(var _n=an.current,zt=_n==null?void 0:_n.parentElement;zt&&zt.clientHeight===0;)zt=zt.parentElement;var xn=me||zt;if(!xn)return;function Qt(){if(_n){var en;_n.classList.remove(fn),(en=X.onVisibleChange)===null||en===void 0||en.call(X,!0)}}function Et(){if(_n){var en;_n.classList.add(fn),(en=X.onVisibleChange)===null||en===void 0||en.call(X,!1)}}return xn.addEventListener("mouseenter",Qt),xn.addEventListener("mouseleave",Et),function(){xn.removeEventListener("mouseenter",Qt),xn.removeEventListener("mouseleave",Et)}},[X.onVisibleChange,me]);var cn=(0,y.useMemo)(function(){return i()({border:G?"auto":0,background:Y?"auto":0},se)},[Y,G,se]);return(0,d.jsxs)("div",{ref:an,className:n()(Ie,Ae,ze,"schema-toolbar",fn),style:cn,children:[Re&&(0,d.jsx)("div",{className:"toolbar-title",children:(0,d.jsxs)(h.Z,{size:2,children:[(0,d.jsx)("span",{className:"toolbar-title-tag",children:ce?"".concat(pe(ce==null?void 0:ce.displayName)," > ").concat(Re[0]):Re[0]},Re[0]),Re[1]&&(0,d.jsx)("span",{className:"toolbar-title-tag",children:"".concat(Te("Reference template"),": ").concat("".concat(Re[1])||Te("Untitled"))})]})}),(0,d.jsx)("div",{className:n()("toolbar-icons",P),style:w,children:(0,d.jsxs)(h.Z,{size:3,align:"center",className:_e,style:Ee,children:[hn,(0,d.jsx)(Q.ri,{refresh:oe,children:mn}),vn]})})]})});N.displayName="InternalSchemaToolbar";var t=(0,y.createContext)(!1),B=y.memo(function(X){var V=(0,z.ngQ)(),U=V.designable,D=(0,y.useState)(!1),ne=c()(D,2),q=ne[0],J=ne[1],Y=(0,y.useCallback)(function(P){(0,y.startTransition)(function(){J(P)})},[]);return U?(0,d.jsx)(t.Provider,{value:q,children:(0,d.jsx)(N,i()(i()({},X),{},{onVisibleChange:Y}))}):null});B.displayName="SchemaToolbar"},22229:function(He,ae,e){"use strict";e.d(ae,{TF:function(){return F},bU:function(){return u},jd:function(){return $}});var Z=e(5574),c=e.n(Z),k=e(97857),i=e.n(k),g=e(15009),C=e.n(g),A=e(99289),r=e.n(A),K=e(9783),v=e.n(K),j=e(85667),h=e(27655),M=e(84157),n=e(96486),y=e.n(n),L=e(7840),o=e(90615),a=e(44256),R=e(76690),E=e(4595);function $(S,H){var O,N,t,B,X=S.field,V=S.linkageRules,U=S.formValues,D=S.localVariables,ne=S.action,q=S.rule,J=S.variables,Y=S.variableNameOfLeftCondition;return X.initStateOfLinkageRules={display:((O=X.initStateOfLinkageRules)===null||O===void 0?void 0:O.display)||F(!0,X.display),required:((N=X.initStateOfLinkageRules)===null||N===void 0?void 0:N.required)||F(!0,X.required||!1),pattern:((t=X.initStateOfLinkageRules)===null||t===void 0?void 0:t.pattern)||F(!0,X.pattern),value:((B=X.initStateOfLinkageRules)===null||B===void 0?void 0:B.value)||F(!0,X.value||X.initialValue)},(0,j.reaction)(function(){var P=Q({linkageRules:V,formValues:U}),w=z({linkageRules:V,localVariables:D}),ie=p({action:ne,localVariables:D}),G=[P,w,ie].map(function(le){return JSON.stringify(le)}).join(",");return G},f({action:ne,field:X,rule:q,variables:J,localVariables:D,variableNameOfLeftCondition:Y},H),{fireImmediately:!0,equals:y().isEqual})}function Q(S){var H=S.linkageRules,O=S.formValues;return H.map(function(N){var t=function B(X){var V=Object.keys(X)[0]||"$and",U=X[V];return U.map(function(D){if("$and"in D||"$or"in D)return B(D);var ne=(0,L.Rq)(D).join(".");return(0,M.getValuesByPath)(O,ne)}).filter(Boolean)};return t(N.condition)})}function z(S){var H=S.linkageRules,O=S.localVariables;return H.map(function(N){var t=Object.keys(N.condition)[0]||"$and",B=N.condition[t];return B.map(function(X){var V=(0,L.od)(X);return V?(0,R.cG)(V.value)?b(V.value,O):V.value:null}).filter(Boolean)})}function p(S){var H,O=S.action,N=S.localVariables,t=O.value,B=t==null?void 0:t.mode,X=(t==null?void 0:t.value)||(t==null?void 0:t.result);if(B==="express"&&X!=null)return(H=(0,R.fN)(X))===null||H===void 0?void 0:H.map(function(V){return b(V,N)}).filter(Boolean)}function b(S,H){var O;if((0,R.cG)(S)){var N=(0,a.H)(S),t=v()({},N,(O=H.find(function(B){return B.name===N}))===null||O===void 0?void 0:O.ctx);return(0,M.getValuesByPath)(t,(0,o.D)(S))}}function f(S,H){var O=S.action,N=S.field,t=S.rule,B=S.variables,X=S.localVariables,V=S.variableNameOfLeftCondition;return function(){m({operator:O.operator,value:O.value,field:N,condition:t.condition,variables:B,localVariables:X,variableNameOfLeftCondition:V},H),setTimeout(r()(C()().mark(function U(){var D,ne,q,J;return C()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(ne=x(O.operator),(D=N.stateOfLinkageRules)!==null&&D!==void 0&&D[ne]){P.next=3;break}return P.abrupt("return");case 3:return q=N.stateOfLinkageRules[ne],P.next=6,Promise.all(q);case 6:q=P.sent,q=q.filter(function(w){return w.condition}),J=q[q.length-1],ne==="value"?q.length>1&&(N.value=J.value):(ne==="display"&&(J==null?void 0:J.value)==="hidden"?(N.display="visible",N.data=N.data||{},N.data.hidden=!0,requestAnimationFrame(function(){N.setState(function(w){w.display="visible"})})):(N[ne]=J==null?void 0:J.value,N.data=N.data||{},N.data.hidden=!1,requestAnimationFrame(function(){N.setState(function(w){w[ne]=J==null?void 0:J.value})})),ne==="display"&&(J==null?void 0:J.value)==="none"&&(N.value=null)),N.stateOfLinkageRules[ne]=null;case 11:case"end":return P.stop()}},U)})))}}function x(S){switch(S){case E.Us.Required:case E.Us.InRequired:return"required";case E.Us.Visible:case E.Us.None:case E.Us.Hidden:return"display";case E.Us.Editable:case E.Us.ReadOnly:case E.Us.ReadPretty:return"pattern";case E.Us.Value:return"value";default:return null}}var m=function(H,O){var N,t,B,X,V,U,D,ne,q=H.operator,J=H.value,Y=H.field,P=H.condition,w=H.variables,ie=H.localVariables,G=H.variableNameOfLeftCondition,le=(Y==null||(N=Y.stateOfLinkageRules)===null||N===void 0?void 0:N.required)||[Y==null||(t=Y.initStateOfLinkageRules)===null||t===void 0?void 0:t.required],xe=(Y==null||(B=Y.stateOfLinkageRules)===null||B===void 0?void 0:B.display)||[Y==null||(X=Y.initStateOfLinkageRules)===null||X===void 0?void 0:X.display],_e=(Y==null||(V=Y.stateOfLinkageRules)===null||V===void 0?void 0:V.pattern)||[Y==null||(U=Y.initStateOfLinkageRules)===null||U===void 0?void 0:U.pattern],Ee=(Y==null||(D=Y.stateOfLinkageRules)===null||D===void 0?void 0:D.value)||[Y==null||(ne=Y.initStateOfLinkageRules)===null||ne===void 0?void 0:ne.value],ze=h.evaluators.get("formula.js"),Se=ze.evaluate,se={ruleGroup:P,variables:w,localVariables:ie,variableNameOfLeftCondition:G};switch(q){case E.Us.Required:le.push(F((0,L.jC)(se,O),!0)),Y.stateOfLinkageRules=i()(i()({},Y.stateOfLinkageRules),{},{required:le});break;case E.Us.InRequired:le.push(F((0,L.jC)(se,O),!1)),Y.stateOfLinkageRules=i()(i()({},Y.stateOfLinkageRules),{},{required:le});break;case E.Us.Visible:case E.Us.None:case E.Us.Hidden:xe.push(F((0,L.jC)(se,O),q)),Y.stateOfLinkageRules=i()(i()({},Y.stateOfLinkageRules),{},{display:xe});break;case E.Us.Editable:case E.Us.ReadOnly:case E.Us.ReadPretty:_e.push(F((0,L.jC)(se,O),q)),Y.stateOfLinkageRules=i()(i()({},Y.stateOfLinkageRules),{},{pattern:_e});break;case E.Us.Value:{var me=function(){var pe=r()(C()().mark(function ee(){var ue,ge,Ie,Ae,Le;return C()().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if((J==null?void 0:J.mode)!=="express"){je.next=18;break}if((J.value||J.result)!=null){je.next=3;break}return je.abrupt("return");case 3:return je.next=5,u(J.value||J.result,{variables:w,localVariables:ie});case 5:return ue=je.sent,ge=ue.exp,Ie=ue.scope,je.prev=8,Ae=Se(ge,i()({now:function(){return new Date().toString()}},Ie)),je.abrupt("return",Ae);case 13:je.prev=13,je.t0=je.catch(8),console.error(je.t0);case 16:je.next=23;break;case 18:if((J==null?void 0:J.mode)!=="constant"){je.next=22;break}return je.abrupt("return",(Le=J==null?void 0:J.value)!==null&&Le!==void 0?Le:J);case 22:return je.abrupt("return",null);case 23:case"end":return je.stop()}},ee,null,[[8,13]])}));return function(){return pe.apply(this,arguments)}}();d(P)?Ee.push(F(!0,me())):Ee.push(F((0,L.jC)(se,O),me())),Y.stateOfLinkageRules=i()(i()({},Y.stateOfLinkageRules),{},{value:Ee})}break;default:return null}};function F(S,H){return I.apply(this,arguments)}function I(){return I=r()(C()().mark(function S(H,O){var N,t;return C()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,Promise.all([H,O]);case 2:return N=X.sent,t=c()(N,2),H=t[0],O=t[1],X.abrupt("return",{condition:H,value:O});case 7:case"end":return X.stop()}},S)})),I.apply(this,arguments)}function d(S){var H=Object.keys(S)[0]||"$and",O=S[H];return y().isEmpty(O)}function u(S,H){return l.apply(this,arguments)}function l(){return l=r()(C()().mark(function S(H,O){var N,t,B,X,V,U;return C()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(t=O.variables,B=O.localVariables,X={},V={},H!=null){ne.next=5;break}return ne.abrupt("return");case 5:if(U=(N=H.match(R.Bj))===null||N===void 0?void 0:N.map(function(){var q=r()(C()().mark(function J(Y){var P,w,ie;return C()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return le.next=2,t.parseVariable(Y,B,{doNotRequest:Y.includes("$nForm")});case 2:return P=le.sent,w=P.value,ie="_".concat((0,M.uid)()),V[ie]=w,X[Y]=ie,le.abrupt("return",w);case 8:case"end":return le.stop()}},J)}));return function(J){return q.apply(this,arguments)}}()),!U){ne.next=9;break}return ne.next=9,Promise.all(U);case 9:return ne.abrupt("return",{exp:H.replace(R.Bj,function(q){return"{{".concat(X[q]||q,"}}")}),scope:V});case 10:case"end":return ne.stop()}},S)})),l.apply(this,arguments)}},43321:function(He,ae,e){"use strict";e.d(ae,{A:function(){return Z}});function Z(c,k){c.forEach(function(i){var g;(g=i.actions)===null||g===void 0||g.forEach(function(C){k(C,i)})})}},64279:function(He,ae,e){"use strict";e.d(ae,{U:function(){return Tt}});var Z=e(97857),c=e.n(Z),k=e(68400),i=e.n(k),g=e(97133),C=e(80844),A=e(67294),r=e(6145),K=e(49834),v=e(58837),j=e(15503),h=e(36586),M=e(62954),n=e(29132),y=e(13794),L=e(22691),o=e(42075),a=e(26793),R=e(9780),E=e(5574),$=e.n(E),Q=e(97309),z=e(5552),p=e(84327),b=e(34041),f=e(21143),x=e(86201),m=e(70993),F=e(84577),I=(0,A.createContext)(null);I.displayName="RemoveActionContext";var d=(0,A.createContext)(null);d.displayName="FilterContext";var u=(0,A.createContext)(null);u.displayName="LinkageLogicContext";var l=e(85893),S=function(ut){var nt=(0,A.useContext)(d)||{},Je=nt.dynamicComponent,hn=nt.disabled,mn=(0,F.Co)(Je),vn=(0,A.useMemo)(function(){return(0,x.createForm)({values:{value:ut.value},disabled:hn,effects:function(){(0,x.onFieldValueChange)("value",function(cn){var _n;ut==null||(_n=ut.onChange)===null||_n===void 0||_n.call(ut,cn.value)})}})},[JSON.stringify(ut.schema),JSON.stringify(ut.value)]),an=function(){var cn;return(0,l.jsx)(C.FieldContext.Provider,{value:null,children:(0,l.jsx)(m.n6,{schema:c()(c()({"x-component":"Input"},ut.schema),{},{"x-component-props":(0,p.merge)((ut==null||(cn=ut.schema)===null||cn===void 0?void 0:cn["x-component-props"])||{},{style:{minWidth:150,width:"100%"}}),name:"value","x-read-pretty":!1,"x-validator":void 0,"x-decorator":void 0})})})};return(0,l.jsx)(C.FormContext.Provider,{value:vn,children:mn?A.createElement(mn,{value:ut.value,onChange:ut==null?void 0:ut.onChange,renderSchemaComponent:an}):an()})},H=e(69677),O=e(7340),N=e(54885),t,B=b.default.Option,X=function(ut){var nt=ut.fieldValue,Je=ut.schema,hn=ut.setValue,mn=ut.collectionName,vn=ut.inputModes,an=(0,A.useState)((nt==null?void 0:nt.mode)||"constant"),fn=$()(an,2),cn=fn[0],_n=fn[1],zt=(0,a.$)(),xn=zt.t,Qt=(0,O.bz)(),Et=Qt.form,en=(0,h.a)(),Rn=(0,N.Y)({collectionField:{uiSchema:Je},form:Et,record:en,uiSchema:Je,noDisabled:!0}),An=(0,L.b1)({collectionField:{uiSchema:Je,collectionName:mn},uiSchema:Je,blockCollectionName:mn}),Jn=An.compatOldVariables,Zn=(0,A.useMemo)(function(){return{minWidth:150,maxWidth:430}},[]);(0,A.useEffect)(function(){_n((nt==null?void 0:nt.mode)||"constant")},[nt==null?void 0:nt.mode]);var rr=(0,A.useCallback)(function(_t){hn({mode:cn,value:_t})},[cn,hn]),mr=(0,A.useMemo)(function(){return{minWidth:150,maxWidth:430,fontSize:13}},[]),Er=(0,A.useCallback)(function(_t){var Bt=_t.replaceAll("".concat(mn,"."),"").replaceAll("$system.","").trim();hn({mode:cn,value:_t,result:Bt})},[mn,cn,hn]),Ft=(0,A.useMemo)(function(){return{minWidth:460,borderRadius:0}},[]),ct=(0,A.useMemo)(function(){return Jn(Rn,{value:nt==null?void 0:nt.value})},[Jn,nt==null?void 0:nt.value,Rn]),Mt={constant:(0,l.jsx)("div",{role:"button","aria-label":"dynamic-component-linkage-rules",style:Zn,className:(0,g.css)(t||(t=i()([`
          .ant-input-affix-wrapper {
            border-radius: 0px;
          }
        `]))),children:A.createElement(S,{value:nt==null?void 0:nt.value,schema:Je,onChange:rr})}),express:(0,l.jsxs)("div",{role:"button","aria-label":"dynamic-component-linkage-rules",style:mr,children:[(0,l.jsx)(M._wD.TextArea,{value:nt==null?void 0:nt.value,onChange:Er,scope:ct,style:Ft}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{style:{marginLeft:".25em"},className:"ant-formily-item-extra",children:[xn("Syntax references"),":"]}),(0,l.jsx)("a",{href:"https://formulajs.info/functions/",target:"_blank",rel:"noreferrer",children:"Formula.js"})]})]})},kt=function(Bt){return vn?vn.indexOf(Bt)>-1:!0},Rt=[{value:"constant",label:xn("Constant value")},{value:"express",label:xn("Expression")},{value:"empty",label:xn("Empty")}].filter(function(_t){return kt(_t.value)});return(0,l.jsxs)(H.Z.Group,{compact:!0,children:[(0,l.jsx)(b.default,{role:"button","data-testid":"select-linkage-value-type",value:cn,style:{width:150},onChange:function(Bt){_n(Bt),hn({mode:Bt||(nt==null?void 0:nt.mode)})},children:Rt.map(function(_t){return(0,l.jsx)(B,{value:_t.value,children:_t.label},_t.value)})}),Mt[cn]]})},V=e(4595),U=function(){var ut,nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],Je=arguments.length>1?arguments[1]:void 0,hn=Je,mn;return nt==null||(ut=nt.forEach)===null||ut===void 0||ut.call(nt,function(vn,an){var fn=hn.find(function(cn){return cn.name===vn});fn&&(mn=fn),hn=(fn==null?void 0:fn.children)||[]}),mn},D=function(ut){var nt=(0,C.useField)(),Je=(0,A.useContext)(u),hn=function(){var vn;nt.data=c()({},nt.initialValue||nt.value);var an=(vn=nt.data)===null||vn===void 0?void 0:vn.targetFields,fn=an&&U(an,ut)||{},cn=(fn==null?void 0:fn.operators)||[];nt.data.operators=cn,nt.data.schema=fn==null?void 0:fn.schema};return(0,A.useEffect)(hn,[Je]),c()(c()({fields:ut},nt.data),{},{setDataIndex:function(vn){var an=U(vn,ut);nt.data=nt.data||{};var fn=an==null?void 0:an.operators;nt.data.operators=fn==null?void 0:fn.filter(function(cn){return vn.length>1?cn.value!=="value":!0}),nt.data.schema=an==null?void 0:an.schema,nt.value=nt.value||[],nt.data.operator=void 0,nt.data.value=void 0,nt.value=c()(c()({},nt.value),{},{targetFields:vn,operator:void 0,value:void 0})},setOperator:function(vn){nt.data.operator=vn,nt.value=c()(c()({},nt.value),{},{operator:vn})},setValue:function(vn){nt.data.value=vn,nt.value=c()(c()({},nt.value),{},{value:vn})}})},ne,q,J,Y,P=(0,C.observer)(function(lt){var ut=lt.value,nt=lt.options,Je=lt.collectionName,hn=(0,a.$)(),mn=hn.t,vn=(0,f.useCompile)(),an=(0,A.useContext)(I),fn=D(nt),cn=fn.schema,_n=fn.fields,zt=fn.operator,xn=fn.setDataIndex,Qt=fn.setOperator,Et=fn.setValue,en=fn.value,Rn=fn.operators;return(0,l.jsx)(u.Provider,{value:(0,p.uid)(),children:(0,l.jsx)("div",{style:{marginBottom:8},className:(0,g.css)(ne||(ne=i()([`
            .ant-space {
              display: inline-block;
            }
          `]))),children:(0,l.jsxs)(o.Z,{className:(0,g.css)(q||(q=i()([`
              .ant-space {
                display: inline-block;
              }
              .ant-space-item {
                max-width: 95%;
                display: inline-block;
                margin: 2px;
                vertical-align: top;
              }
            `]))),children:[(0,l.jsx)(z.TreeSelect,{role:"button","data-testid":"select-linkage-property-field",className:(0,g.css)(J||(J=i()([`
                min-width: 160px;
              `]))),fieldNames:{label:"title",value:"name",children:"children"},treeCheckable:!0,value:ut==null?void 0:ut.targetFields,multiple:!0,allowClear:!0,treeData:vn(_n),onChange:function(Jn){xn(Jn)},placeholder:mn("Select field"),treeNodeFilterProp:"title"}),(0,l.jsx)(b.default,{role:"button","data-testid":"select-linkage-action-field",popupMatchSelectWidth:!1,value:zt,className:(0,g.css)(Y||(Y=i()([`
                min-width: 120px;
              `]))),options:vn(Rn),onChange:function(Jn){Qt(Jn)},placeholder:mn("action")}),[V.Us.Value].includes(zt)&&(0,l.jsx)(X,{fieldValue:en,schema:cn,setValue:Et,collectionName:Je}),!lt.disabled&&(0,l.jsx)("a",{role:"button","aria-label":"icon-close",children:(0,l.jsx)(Q.Z,{onClick:function(){return an()},style:{color:"#bfbfbf"}})})]})})})},{displayName:"FormFieldLinkageRuleAction"}),w=(0,C.observer)(function(lt){var ut=lt.value,nt=lt.options,Je=(0,a.$)(),hn=Je.t,mn=(0,f.useCompile)(),vn=(0,A.useState)(!1),an=$()(vn,2),fn=an[0],cn=an[1],_n=(0,A.useContext)(I),zt=D(nt),xn=zt.schema,Qt=zt.operator,Et=zt.setOperator,en=zt.setValue,Rn=(0,A.useMemo)(function(){return mn([{label:hn("Visible"),value:V.Us.Visible,schema:{}},{label:hn("Hidden"),value:V.Us.Hidden,schema:{}},{label:hn("Disabled"),value:V.Us.Disabled,schema:{}},{label:hn("Enabled"),value:V.Us.Active,schema:{}}])},[mn,hn]),An=(0,A.useCallback)(function(rr){var mr=[V.Us.Value].includes(rr);cn(mr),Et(rr)},[Et]),Jn=(0,A.useCallback)(function(rr){en(rr)},[en]),Zn=(0,A.useMemo)(function(){return{color:"#bfbfbf"}},[]);return(0,l.jsx)("div",{style:{marginBottom:8},children:(0,l.jsxs)(o.Z,{children:[(0,l.jsx)(b.default,{"data-testid":"select-linkage-properties",popupMatchSelectWidth:!1,value:Qt,options:Rn,onChange:An,placeholder:hn("action")}),fn&&A.createElement(S,{value:ut,schema:xn,onChange:Jn}),!lt.disabled&&(0,l.jsx)("a",{role:"button","aria-label":"icon-close",children:(0,l.jsx)(Q.Z,{onClick:_n,style:Zn})})]})})},{displayName:"FormButtonLinkageRuleAction"}),ie={type:"string","x-decorator":"FormItem","x-component":"ColorPicker","x-component-props":{defaultValue:""}},G={type:"string","x-decorator":"FormItem","x-component":"Select","x-component-props":{defaultValue:""},enum:[{label:"left",value:"left"},{label:"right",value:"right"},{label:"center",value:"center"}]},le=new Map;le.set(V.Us.Color,ie),le.set(V.Us.BackgroundColor,ie),le.set(V.Us.TextAlign,G);var xe=(0,C.observer)(function(lt){var ut=lt.options,nt=lt.collectionName,Je=(0,a.$)(),hn=Je.t,mn=(0,f.useCompile)(),vn=(0,A.useContext)(I),an=D(ut),fn=an.operator,cn=an.setOperator,_n=an.value,zt=an.setValue,xn=(0,A.useMemo)(function(){return mn([{label:hn("Color"),value:V.Us.Color,schema:{}},{label:hn("Background Color"),value:V.Us.BackgroundColor,schema:{}},{label:hn("Text Align"),value:V.Us.TextAlign,schema:{}}])},[mn,hn]),Qt=(0,A.useCallback)(function(en){cn(en)},[cn]),Et=(0,A.useMemo)(function(){return{color:"#bfbfbf"}},[]);return(0,l.jsx)("div",{style:{marginBottom:8},children:(0,l.jsxs)(o.Z,{children:[(0,l.jsx)(b.default,{"data-testid":"select-linkage-properties",popupMatchSelectWidth:!1,value:fn,options:xn,onChange:Qt,placeholder:hn("action")}),[V.Us.Color,V.Us.BackgroundColor,V.Us.TextAlign].includes(fn)&&(0,l.jsx)(X,{fieldValue:_n,schema:le.get(fn),setValue:zt,collectionName:nt,inputModes:["constant"]}),!lt.disabled&&(0,l.jsx)("a",{role:"button","aria-label":"icon-close",children:(0,l.jsx)(Q.Z,{onClick:vn,style:Et})})]})})},{displayName:"FormStyleLinkageRuleAction"}),_e=(0,C.observer)(function(lt){var ut,nt=lt.linkageOptions,Je=lt.category,hn=lt.elementType,mn=(0,C.useField)(),vn=Je==="default"?hn:Je,an={button:w,field:P,style:xe};return mn==null||(ut=mn.value)===null||ut===void 0?void 0:ut.map(function(fn,cn){return(0,l.jsx)(I.Provider,{value:function(){return mn.remove(cn)},children:(0,l.jsx)(C.ObjectField,{name:cn,component:[an[vn],c()(c()({},lt),{},{options:nt})]})},cn)})},{displayName:"LinkageRuleActions"}),Ee=(0,j.t)(function(lt){var ut=(0,a.$)(),nt=ut.t,Je=(0,C.useField)(),hn="actions",mn=(0,R.w)(lt),vn=mn.category,an=mn.elementType,fn=mn.linkageOptions,cn=mn.collectionName,_n=(0,A.useMemo)(function(){return{marginLeft:10}},[]),zt=(0,A.useMemo)(function(){return[_e,{category:vn,elementType:an,linkageOptions:fn,collectionName:cn}]},[cn,fn,vn,an]),xn=(0,A.useMemo)(function(){return{marginTop:8,marginBottom:8}},[]),Qt=(0,A.useCallback)(function(){var Et=Je.query(".actions").take(),en=Et.value||[];en.push({}),Et.value=en,Et.initialValue=en},[Je]);return(0,l.jsxs)("div",{style:_n,children:[(0,l.jsx)(C.ArrayField,{name:hn,component:zt,disabled:!1}),(0,l.jsx)(o.Z,{size:16,style:xn,children:(0,l.jsx)("a",{onClick:Qt,children:nt("Add property")})})]})},{displayName:"LinkageRuleActionGroup"}),ze=e(59637),Se=A.forwardRef(function(lt,ut){var nt,Je=z.ArrayBase.useArray(),hn=z.ArrayBase.useIndex(lt.index),mn=(0,a.$)(),vn=mn.t;return(0,l.jsx)(ze.Z,c()(c()({},lt),{},{checkedChildren:vn("On"),unCheckedChildren:vn("Off"),checked:!(Je!=null&&(nt=Je.field)!==null&&nt!==void 0&&nt.value[hn].disabled),size:"small",style:{transition:"all 0.25s ease-in-out",color:"rgba(0, 0, 0, 0.8)",fontSize:16,marginLeft:6,marginBottom:3},onChange:function(fn,cn){var _n;cn.stopPropagation(),Je.field.value.splice(hn,1,c()(c()({},Je==null||(_n=Je.field)===null||_n===void 0?void 0:_n.value[hn]),{},{disabled:!fn}))},onClick:function(fn,cn){cn.stopPropagation()}}))});Se.displayName="EnableLinkage";var se=e(18699),me=e(4393),pe=e(32983),ee=e(69234),ue=e(40411),ge=e(96486),Ie=e(68230),Ae={marginBottom:10},Le=function(ut){var nt,Je=z.ArrayBase.useArray(),hn=z.ArrayBase.useIndex(ut.index),mn=(0,a.$)(),vn=mn.t,an=Je==null||(nt=Je.field)===null||nt===void 0?void 0:nt.value[hn];return(0,l.jsx)(H.Z.TextArea,{value:an.title,defaultValue:vn("Linkage rule"),onChange:function(cn){cn.stopPropagation(),Je.field.value.splice(hn,1,c()(c()({},an),{},{title:cn.target.value}))},onBlur:function(cn){cn.stopPropagation(),Je.field.value.splice(hn,1,c()(c()({},an),{},{title:cn.target.value}))},autoSize:!0,style:{width:"70%",border:"none"},onClick:function(cn){cn.stopPropagation()}})},Te=function(ut){var nt,Je;return((nt=ut["x-component"])===null||nt===void 0||(Je=nt.indexOf)===null||Je===void 0?void 0:Je.call(nt,"Addition"))>-1},je=function(ut){var nt,Je;return((nt=ut["x-component"])===null||nt===void 0||(Je=nt.indexOf)===null||Je===void 0?void 0:Je.call(nt,"Index"))>-1},Pe=function(ut){var nt,Je;return((nt=ut["x-component"])===null||nt===void 0||(Je=nt.indexOf)===null||Je===void 0?void 0:Je.call(nt,"Remove"))>-1},fe=function(ut){var nt,Je;return((nt=ut["x-component"])===null||nt===void 0||(Je=nt.indexOf)===null||Je===void 0?void 0:Je.call(nt,"MoveUp"))>-1},re=function(ut){var nt,Je;return((nt=ut["x-component"])===null||nt===void 0||(Je=nt.indexOf)===null||Je===void 0?void 0:Je.call(nt,"MoveDown"))>-1},T=function(ut){var nt,Je;return((nt=ut["x-component"])===null||nt===void 0||(Je=nt.indexOf)===null||Je===void 0?void 0:Je.call(nt,"Copy"))>-1},ce=function(ut){return Te(ut)||Pe(ut)||re(ut)||fe(ut)||T(ut)},be=function(ut){return Array.from({length:ut}).map(function(nt,Je){return Je})},oe=function(ut,nt){return ut<nt?be(ut):be(nt)},Re=function(ut,nt){return ut.length<=nt?ut.concat(nt):ut.reduce(function(Je,hn){return hn<nt?Je.concat(hn):hn===nt?Je.concat([hn,hn+1]):Je.concat(hn+1)},[])},Ze=(0,C.observer)(function(lt){var ut=(0,C.useField)(),nt=Array.isArray(ut.value)?ut.value:[],Je=(0,A.useState)(oe(nt.length,lt.defaultOpenPanelCount)),hn=$()(Je,2),mn=hn[0],vn=hn[1],an=(0,C.useFieldSchema)();if((0,A.useEffect)(function(){!ut.modified&&nt.length&&vn(oe(nt.length,lt.defaultOpenPanelCount))},[nt.length,ut]),!an)throw new Error("can not found schema object");var fn=function(){return an.reduceProperties(function(xn,Qt,Et){return Te(Qt)?(0,l.jsx)(C.RecursionField,{schema:Qt,name:Et}):xn},null)},cn=function(){if(!nt.length)return(0,l.jsx)(me.Z,{className:lt.className,style:Ae,children:(0,l.jsx)(pe.Z,{})})},_n=function(){return(0,l.jsx)(ee.Z,c()(c()({},lt),{},{activeKey:mn,onChange:function(Qt){return vn((0,p.toArr)(Qt).map(Number))},className:lt.className,style:Ae,children:nt.map(function(xn,Qt){var Et=Array.isArray(an.items)?an.items[Qt]||an.items[0]:an.items,en=ut.query("".concat(ut.address,".").concat(Qt)).get("componentProps"),Rn=Et["x-component-props"],An=function(){var mr="".concat((en==null?void 0:en.header)||Rn.header||ut.title),Er=ut.address.concat(Qt),Ft=ut.form.queryFeedbacks({type:"error",address:"".concat(Er,".**")});return(0,l.jsxs)(z.ArrayBase.Item,{index:Qt,record:function(){var Mt;return(Mt=ut.value)===null||Mt===void 0?void 0:Mt[Qt]},children:[(0,l.jsx)(C.RecursionField,{schema:Et,name:Qt,filterProperties:function(Mt){return!!je(Mt)},onlyRenderProperties:!0}),Ft.length?(0,l.jsx)(ue.Z,{size:"small",className:"errors-badge",count:Ft.length,children:mr}):(0,l.jsx)(Le,{item:xn.initialValue||xn,index:Qt})]})},Jn=(0,l.jsxs)(z.ArrayBase.Item,{index:Qt,record:xn,children:[(0,l.jsx)(C.RecursionField,{schema:Et,name:Qt,filterProperties:function(mr){return!!ce(mr)},onlyRenderProperties:!0}),en==null?void 0:en.extra]}),Zn=(0,l.jsx)(C.RecursionField,{schema:Et,name:Qt,filterProperties:function(mr){return!(je(mr)||ce(mr))}});return(0,A.createElement)(ee.Z.Panel,c()(c()(c()({},Rn),en),{},{forceRender:!0,key:Qt,header:An(),extra:Jn}),(0,l.jsx)(z.ArrayBase.Item,{index:Qt,record:xn,children:Zn},Qt))})}))};return(0,l.jsxs)(z.ArrayBase,{onAdd:function(xn){vn(Re(mn,xn))},children:[cn(),_n(),fn()]})},{displayName:"ArrayCollapse"}),We=function(ut){var nt=ut.children;return(0,l.jsx)(A.Fragment,{children:nt})};We.displayName="CollapsePanel",Ze.defaultProps={defaultOpenPanelCount:5},Ze.displayName="ArrayCollapse",Ze.CollapsePanel=We,z.ArrayBase.mixin(Ze);var tt=null;Ze.Copy=A.forwardRef(function(lt,ut){var nt,Je=(0,Ie.d)(),hn=Je.token,mn=(0,C.useField)(),vn=z.ArrayBase.useArray(),an=z.ArrayBase.useIndex(lt.index);return!vn||((nt=vn.field)===null||nt===void 0?void 0:nt.pattern)!=="editable"?null:(0,l.jsx)(se.Z,c()(c()({},lt),{},{style:{transition:"all 0.25s ease-in-out",color:hn.colorText,fontSize:hn.fontSizeLG,marginLeft:6},ref:ut,onClick:function(cn){var _n,zt;if(!(mn!=null&&mn.disabled)&&(cn.stopPropagation(),!((_n=vn.props)!==null&&_n!==void 0&&_n.disabled))){var xn=(0,ge.cloneDeep)(vn==null||(zt=vn.field)===null||zt===void 0?void 0:zt.value[an]);vn.field.push(xn),lt.onClick&&lt.onClick(cn)}}}))}),Ze.Copy.displayName="ArrayCollapse.Copy";var St,Tt=(0,j.t)((0,C.observer)(function(lt){var ut=(0,C.useFieldSchema)(),nt=(0,M.wNf)(lt),Je=nt.options,hn=nt.defaultValues,mn=nt.collectionName,vn=nt.form,an=nt.variables,fn=nt.localVariables,cn=nt.record,_n=nt.dynamicComponent,zt=(0,r.useCollectionManager_deprecated)(),xn=zt.getAllCollectionsInheritChain,Qt=(0,K.Kv)(),Et=(0,A.useMemo)(function(){return{ArrayCollapse:Ze}},[]),en=(0,A.useMemo)(function(){return{type:"object",properties:{rules:{type:"array",default:hn,"x-component":"ArrayCollapse","x-decorator":"FormItem","x-component-props":{accordion:!0},items:{type:"object","x-component":"ArrayCollapse.CollapsePanel","x-component-props":{extra:(0,l.jsx)(Se,{})},properties:{layout:{type:"void","x-component":"FormLayout","x-component-props":{labelStyle:{marginTop:"6px"},labelCol:8,wrapperCol:16},properties:{conditions:{"x-component":"h4","x-content":'{{ t("Condition") }}'},condition:{"x-component":"Filter","x-use-component-props":function(){return{options:Je,className:(0,g.css)(St||(St=i()([`
                            position: relative;
                            width: 100%;
                            margin-left: 10px;
                          `])))}},"x-component-props":{collectionName:mn,dynamicComponent:function(Jn){var Zn=Jn.collectionField;return(0,l.jsx)(L.qj,c()(c()({},Jn),{},{form:vn,record:cn,shouldChange:(0,L.Vc)({collectionField:Zn,variables:an,localVariables:fn,getAllCollectionsInheritChain:xn})}))}}},actions:{"x-component":"h4","x-content":'{{ t("Properties") }}'},action:{type:"void","x-component":function(Jn){return(0,l.jsx)(Ee,c()(c()({},Jn),lt))}}}},remove:{type:"void","x-component":"ArrayCollapse.Remove"},moveUp:{type:"void","x-component":"ArrayCollapse.MoveUp"},moveDown:{type:"void","x-component":"ArrayCollapse.MoveDown"},copy:{type:"void","x-component":"ArrayCollapse.Copy"}}},properties:{add:{type:"void",title:'{{ t("Add linkage rule") }}',"x-component":"ArrayCollapse.Addition","x-reactions":{dependencies:["rules"],fulfill:{state:{}}}}}}}}},[mn,hn,vn,xn,fn,Je,lt,cn,an]),Rn=(0,A.useMemo)(function(){return{field:Je,fieldSchema:ut,dynamicComponent:_n,options:Je||[]}},[_n,ut,Je]);return(0,l.jsx)(n._c,{value:{value:null,collection:{name:mn}},children:(0,l.jsx)(h.HV,{record:cn,parent:Qt,children:(0,l.jsx)(y.fo.Provider,{value:Rn,children:(0,l.jsx)(v.YQ,{name:mn,children:(0,l.jsx)(M.n6,{components:Et,schema:en})})})})})}),{displayName:"FormLinkageRules"})},4595:function(He,ae,e){"use strict";e.d(ae,{Us:function(){return i},k0:function(){return C},sI:function(){return g}});var Z=e(9783),c=e.n(Z),k,i=function(A){return A.Visible="visible",A.Editable="editable",A.ReadOnly="disabled",A.ReadPretty="readPretty",A.None="none",A.Hidden="hidden",A.Required="required",A.InRequired="notRequired",A.Disabled="disabled",A.Value="value",A.Active="enabled",A.Color="color",A.BackgroundColor="backgroundColor",A.TextAlign="textAlign",A}({}),g=function(A){return A.default="default",A.style="style",A}({}),C=(k={},c()(k,g.style,"x-linkage-style-rules"),c()(k,g.default,"x-linkage-rules"),k)},76126:function(He,ae,e){"use strict";e.d(ae,{E:function(){return b},j:function(){return p}});var Z=e(5574),c=e.n(Z),k=e(86201),i=e(80844),g=e(84327),C=e(96486),A=e(67294),r=e(64910),K=e(9783),v=e.n(K),j=e(97857),h=e.n(j),M=e(15009),n=e.n(M),y=e(99289),L=e.n(y),o=e(7840),a=e(4595),R=function(x,m){var F=function(d){var u=d==null?void 0:d.mode;return u==="constant"?d.value:null};switch(!0){case[a.Us.Color,a.Us.BackgroundColor,a.Us.TextAlign].includes(x):return F(m);default:return null}},E=function(){var f=L()(n()().mark(function x(m,F){var I,d,u,l;return n()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return I=m.rules,d=m.variables,u=m.localVariables,H.next=3,Promise.all(I.filter(function(O){return!O.disabled}).map(function(){var O=L()(n()().mark(function N(t){return n()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,(0,o.jC)({ruleGroup:t.condition,variables:d,localVariables:u},F);case 2:if(!X.sent){X.next=6;break}return X.abrupt("return",t);case 6:return X.abrupt("return",null);case 7:case"end":return X.stop()}},N)}));return function(N){return O.apply(this,arguments)}}()));case 3:return l=H.sent.filter(Boolean),H.abrupt("return",l.map(function(O){return O.actions}).flat());case 5:case"end":return H.stop()}},x)}));return function(m,F){return f.apply(this,arguments)}}(),$=function(){var f=L()(n()().mark(function x(m,F){var I,d,u;return n()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return I=m.rules,d=m.variables,u=m.localVariables,S.next=3,E({rules:I,variables:d,localVariables:u},F);case 3:return S.abrupt("return",S.sent.map(function(H){return h()(h()({},H),{},{value:R(H.operator,H.value)})}));case 4:case"end":return S.stop()}},x)}));return function(m,F){return f.apply(this,arguments)}}(),Q=function(){var f=L()(n()().mark(function x(m,F){var I,d,u,l,S;return n()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return I=m.rules,d=m.variables,u=m.localVariables,O.next=3,$({rules:I,variables:d,localVariables:u},F);case 3:return l=O.sent,S=l.reduce(function(N,t){return h()(h()({},N),{},v()({},t.operator,t.value))},{}),O.abrupt("return",S);case 6:case"end":return O.stop()}},x)}));return function(m,F){return f.apply(this,arguments)}}(),z=e(68091);function p(f){var x=f.formValues,m=f.category,F=m===void 0?"default":m,I=f.rules,d=f.schema,u=f.form,l=(0,A.useState)({}),S=c()(l,2),H=S[0],O=S[1],N=(0,i.useFieldSchema)(),t=(0,r.OQ)(),B=(0,r.Kp)({currentForm:{values:x}}),X=d??N,V=I??X[a.k0[F]],U=(0,z.qD)(),D=(0,A.useCallback)(function(){V&&x&&Q({rules:V,variables:t,localVariables:B},U.jsonLogic).then(function(ne){(0,C.isEmpty)(ne)?O({}):O(ne)}).catch(function(ne){throw new Error(ne.message)})},[t,B,V,x]);return(0,A.useEffect)(function(){if(D(),u){var ne=(0,g.uid)();return u.addEffects(ne,function(){(0,k.onFormValuesChange)(function(){D()})}),function(){u.removeEffects(ne)}}},[u,D]),{valueMap:H}}var b=A.memo(function(f){var x=f.record,m=f.schema,F=f.onStyleChange,I=p({formValues:x,category:"style",schema:m}),d=I.valueMap;return(0,A.useEffect)(function(){F(d)},[F,d]),null});b.displayName="GetStyleRules"},62662:function(He,ae,e){"use strict";e.d(ae,{Qh:function(){return Yt},ns:function(){return Wt},ON:function(){return Hn},y5:function(){return bn},Z5:function(){return Bt},cM:function(){return Er},L3:function(){return sn},vC:function(){return Mt},r2:function(){return kt},bw:function(){return Rt},lc:function(){return Gt},j0:function(){return Mn},D3:function(){return Cn},Rh:function(){return Zn},qx:function(){return jt},Qf:function(){return Xt},m$:function(){return _t},hj:function(){return Zt},ZL:function(){return Ln},PO:function(){return Bn},os:function(){return Ke},Mq:function(){return st},ut:function(){return wn},dD:function(){return ln},DD:function(){return Jn}});var Z=e(96695),c=e.n(Z),k=e(9783),i=e.n(k),g=e(15009),C=e.n(g),A=e(99289),r=e.n(A),K=e(68400),v=e.n(K),j=e(5574),h=e.n(j),M=e(13769),n=e.n(M),y=e(97857),L=e.n(y),o=e(97133),a=e(5552),R=e(86201),E=e(80844),$=e(85667),Q=e(84327),z=e(85418),p=e(68508),b=e(3321),f=e(38089),x=e(59637),m=e(5914),F=e(42075),I=e(15867),d=e(38925),u=e(28459),l=e(96486),S=e.n(l),H=e(67294),O=e(73935),N=e(26793),t=e(21143),B=e(65750),X=e(98755),V=e(68091),U=e(75148),D=e(29250),ne=e(7340),q=e(10097),J=e(44355),Y=e(99986),P=e(5346),w=e(52967),ie=e(49834),G=e(88996),le=e(87180),xe=e(13511),_e=e(44990),Ee=e(67205),ze=e(53285),Se=e(69962),se=e(74820),me=e(73691),pe=e(36586),ee=e(25717),ue=e(29132),ge=e(36800),Ie=e(61736),Ae=e(44245),Le=e(93587),Te=e(93323),je=e(47844),Pe=e(96365),fe=e(94516),re=e(15195),T=e(23461),ce=e(64910),be=e(32268),oe=e(6145),Re=e(15503),Ze=e(62954),We=e(85893),tt=(0,Re.t)((0,E.observer)(function(De){var Ce=(0,Ze.wNf)(De),Oe=Ce.defaultValues,Fe=Ce.collectionName,Ne=(0,E.useForm)(),Xe=(0,Ze.eJW)(),dt=(0,oe.useCollectionManager_deprecated)(),ht=dt.getChildrenCollections,xt=ht(Fe),Ct=function(Ht){return function(Ut,wt){Ut.loading=!0,Ht(Ut,wt).then($.action.bound(function(ot){Ut.dataSource=ot,Ut.loading=!1,Ut.initialValue&&(Ut.disabled=!0)}))}},Dt=function(){var Vt=r()(C()().mark(function Ht(Ut){var wt,ot,qe,Be;return C()().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return qe=((wt=Ne.values)===null||wt===void 0?void 0:wt.enableChildren)||{},Be=qe.childrenCollections,Ve.abrupt("return",(ot=xt.filter(function($e){return!Be.find(function(it){return it.collection===$e.name})||Ut.initialValue||$e.name===Ut.value}))===null||ot===void 0?void 0:ot.map(function($e){return{label:Xe($e.title),value:$e.name}}));case 2:case"end":return Ve.stop()}},Ht)}));return function(Ut){return Vt.apply(this,arguments)}}();return(0,We.jsx)(Ze.n6,{schema:{type:"object",properties:{childrenCollections:{type:"array",default:Oe==null?void 0:Oe.filter(function(Vt){return xt.find(function(Ht){return Ht.name===Vt.collection})}),"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},collection:{type:"string","x-decorator":"FormItem",required:!0,"x-component":"Select","x-component-props":{style:{width:260}},"x-reactions":["{{useAsyncDataSource(loadData)}}"]},title:{type:"string","x-decorator":"FormItem","x-component":"Input","x-component-props":{style:{width:235}}},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:'{{ t("Add collection") }}',"x-component":"ArrayItems.Addition"}}}}},scope:{useAsyncDataSource:Ct,loadData:Dt}})}),{displayName:"EnableChildCollections"}),St=e(90499),Tt=e(23971),lt,ut=(0,E.observer)(function(De){var Ce=De.rootCollection,Oe=De.onChange,Fe=De.value,Ne=De.collectionField,Xe=(0,E.useFieldSchema)(),dt=(0,St.DA)({collectionName:Ce,collectionField:Ne}),ht=dt.currentFormSettings,xt=(0,Tt.jd)({schema:Ne==null?void 0:Ne.uiSchema,collectionField:Ne}),Ct=xt.currentObjectSettings,Dt=(0,Ze.eJW)(),Vt=(0,H.useMemo)(function(){return[ht,Ct].filter(Boolean)},[ht,Ct]),Ht=Dt(Vt);return(0,H.useEffect)(function(){Oe(Xe.default)},[]),(0,We.jsx)(Ze._wD.Input,{value:Fe,onChange:function(wt){return Oe(wt)},scope:Ht,style:{minWidth:"400px",marginRight:15},className:(0,o.css)(lt||(lt=v()([`
          .ant-input {
            width: 100% !important;
          }
        `])))})},{displayName:"ChildDynamicComponent"}),nt=e(64279),Je=e(4595),hn=function(Ce,Oe){var Fe=(0,oe.useCollectionManager_deprecated)(),Ne=Fe.getCollectionFields,Xe=Fe.getInterface,dt=Ne(Ce).filter(function(Ht){return!["id","createdAt","createdBy","updatedAt","updatedBy"].includes(Ht.name)}),ht=(0,N.$)(),xt=ht.t,Ct=[{label:xt("Visible"),value:Je.Us.Visible,selected:!0,schema:{}},{label:xt("Editable"),value:Je.Us.Editable,selected:!1,schema:{}},{label:xt("Disabled"),value:Je.Us.ReadOnly,selected:!1,schema:{}},{label:xt("Easy reading"),value:Je.Us.ReadPretty,selected:!1,schema:{}},{label:xt("Hidden"),value:Je.Us.None,selected:!1,schema:{}},{label:xt("Hidden(reserved value)"),value:Je.Us.Hidden,selected:!1,schema:{}},{label:xt("Required"),value:Je.Us.Required,selected:!1,schema:{}},{label:xt("Not required"),value:Je.Us.InRequired,selected:!1,schema:{}},{label:xt("Value"),value:Je.Us.Value,selected:!1,schema:{}}].filter(function(Ht){return Oe?[Je.Us.Visible,Je.Us.None,Je.Us.Hidden].includes(Ht.value):Ht}),Dt=function(Ut,wt){var ot,qe,Be=Xe(Ut.interface);if(Be){var rt=(Be==null?void 0:Be.filterable)||{},Ve=rt.nested,$e=rt.children,it={name:Ut.name,title:(Ut==null||(ot=Ut.uiSchema)===null||ot===void 0?void 0:ot.title)||Ut.name,schema:Ut==null?void 0:Ut.uiSchema,interface:Ut.interface,target:Ut.target,operators:(Ct==null||(qe=Ct.filter)===null||qe===void 0?void 0:qe.call(Ct,function(Pt){return Ve||$e||["formula","richText","sequence"].includes(Be.name)?(Pt==null?void 0:Pt.value)!==Je.Us.Value:!0}))||[]};if(!(Ut.target&&wt>2))return wt>2,it}},Vt=function(Ut,wt){var ot=[];return Ut.forEach(function(qe){var Be=Dt(qe,wt);Be&&ot.push(Be)}),ot};return Vt(dt,1)},mn=e(96808),vn,an,fn,cn=["title","dn"],_n=["title","dn"],zt=["title","options","value","onChange"],xn=["title","options","value","onChange"],Qt=["title","onChange"],Et=["schema"],en=["title","onSubmit","width","initialValues","beforeOpen","initialSchema","schema","modalTip","components","scope"],Rn=["hidden","title","components","scope","effects","onSubmit","asyncGetInitialValues","initialValues","width","noRecord","ModalContextProvider"],An=(0,H.createContext)(null);An.displayName="SchemaSettingsContext";function Jn(){return(0,H.useContext)(An)}var Zn=function(Ce){var Oe=Ce.children,Fe=Ce.fieldSchema,Ne=(0,re.$t)(),Xe=Ne.getTemplateBySchema,dt=(0,t.useCollection)(),ht=Xe(Fe),xt=(0,H.useMemo)(function(){return L()(L()({},Ce),{},{collectionName:dt==null?void 0:dt.name,template:ht,fieldSchema:Fe})},[dt==null?void 0:dt.name,Fe,Ce,ht]);return(0,We.jsx)(An.Provider,{value:xt,children:Oe})},rr=H.memo(function(De){var Ce=De.title,Oe=De.dn,Fe=n()(De,cn),Ne=(0,H.useState)(!1),Xe=h()(Ne,2),dt=Xe[0],ht=Xe[1],xt=(0,se.iX)(),Ct=xt.Component,Dt=xt.getMenuItems,Vt=(0,w.e)([dt]),Ht=(0,H.useState)(!!{NODE_ENV:"production",PUBLIC_PATH:"auto"}.__TEST__),Ut=h()(Ht,2),wt=Ut[0],ot=Ut[1],qe=(0,H.useContext)(t.SchemaToolbarVisibleContext);(0,H.useEffect)(function(){qe&&ot(!1)},[qe]);var Be=function(it,Pt){(Pt.source==="trigger"||it)&&(0,H.startTransition)(function(){ht(it)})},rt=function(){ot(!0)};if(!wt)return(0,We.jsx)("div",{onMouseEnter:rt,"data-testid":De["data-testid"],children:typeof Ce=="string"?(0,We.jsx)("span",{children:Ce}):Ce});var Ve=Dt(function(){return De.children});return(0,We.jsxs)(Zn,L()(L()({visible:dt,setVisible:ht,dn:Oe},Fe),{},{children:[(0,We.jsx)(Ct,{}),(0,We.jsx)(z.Z,{open:dt,onOpenChange:Be,overlayClassName:(0,o.css)(vn||(vn=v()([`
          .ant-dropdown-menu-item-group-list {
            max-height: 300px;
            overflow-y: auto;
          }
        `]))),menu:{items:Ve,"data-testid":"schema-settings-menu",style:{maxHeight:Vt,overflowY:"auto"}},children:(0,We.jsx)("div",{"data-testid":De["data-testid"],children:typeof Ce=="string"?(0,We.jsx)("span",{children:Ce}):Ce})})]}))}),mr=H.memo(function(De){var Ce=De.title,Oe=De.dn,Fe=n()(De,_n),Ne=(0,H.useState)(!0),Xe=h()(Ne,2),dt=Xe[0],ht=Xe[1],xt=(0,se.iX)(),Ct=xt.Component,Dt=xt.getMenuItems,Vt=Dt(function(){return De.children});return(0,We.jsxs)(Zn,L()(L()({visible:dt,setVisible:ht,dn:Oe},Fe),{},{children:[(0,We.jsx)(Ct,{}),(0,We.jsx)(p.Z,{items:Vt})]}))}),Er=H.memo(function(De){var Ce=De.mode;return Ce==="inline"?(0,We.jsx)(mr,L()({},De)):(0,We.jsx)(rr,L()({},De))});Er.displayName="SchemaSettingsDropdown";var Ft=function(Ce){return Ce.reduceProperties(function(Oe,Fe){if(Fe["x-component"]==="FormV2"||Fe["x-component"]==="Details"){var Ne=Fe.reduceProperties(function(Xe,dt){return dt["x-component"]==="Grid"||dt["x-component"]==="BlockTemplate"?dt:Xe},null);if(Ne)return Ne}return Oe},null)},ct=function(Ce){return Ce.reduceProperties(function(Oe,Fe){if(Fe["x-component"]==="FormV2"||Fe["x-component"]==="Details"){var Ne=Fe.reduceProperties(function(Xe,dt){return dt["x-component"]==="BlockTemplate"?dt:Xe},null);if(Ne)return Ne}return Oe},null)},Mt=function(Ce){var Oe=Ce.insertAdjacentPosition,Fe=Oe===void 0?"afterBegin":Oe,Ne=Ce.componentName,Xe=Ce.collectionName,dt=Ce.resourceName,ht=(0,N.$)(),xt=ht.t,Ct=(0,Pe.e)(),Dt=(0,t.useCollectionManager)(),Vt=Jn(),Ht=Vt.dn,Ut=Vt.setVisible,wt=Vt.template,ot=Vt.fieldSchema,qe=(0,X.L)(),Be=(0,re.$t)(),rt=Be.saveAsTemplate,Ve=Be.copyTemplateSchema,$e=(0,Se.mg)(),it=$e.theme;return Xe?wt?(0,We.jsx)(kt,{title:"Convert reference to duplicate",onClick:r()(C()().mark(function Pt(){var Lt,$t,$n;return C()().wrap(function(un){for(;;)switch(un.prev=un.next){case 0:return un.next=2,Ve(wt);case 2:return Lt=un.sent,$t=ct(ot),$n=(0,fe.Pl)({t:xt,api:qe,current:$t.parent}),$n.loadAPIClientEvents(),$n.removeWithoutEmit($t),$n.insertAdjacent(Fe,Lt,{onSuccess:function(){return r()(C()().mark(function Yn(){return C()().wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:return ir.next=2,qe.request({url:"/uiSchemas:remove/".concat($t["x-uid"])});case 2:case"end":return ir.stop()}},Yn)}))()}}),ot["x-template-key"]=null,un.next=11,qe.request({url:"uiSchemas:patch",method:"post",data:{"x-uid":ot["x-uid"],"x-template-key":null}});case 11:Ht.refresh();case 12:case"end":return un.stop()}},Pt)})),children:xt("Convert reference to duplicate")}):(0,We.jsx)(kt,{title:"Save as block template",onClick:r()(C()().mark(function Pt(){var Lt,$t,$n,pn,un,Xn;return C()().wrap(function(jn){for(;;)switch(jn.prev=jn.next){case 0:return Ut(!1),Lt=Xe&&(Dt==null?void 0:Dt.getCollection(Xe)),$t=Ft(ot),jn.next=5,(0,ge.D)(xt("Save as template"),function(){var ir={FormItem:xt("Form"),ReadPrettyFormItem:xt("Details")};return(0,We.jsx)(a.FormLayout,{layout:"vertical",children:(0,We.jsx)(Te.n,{components:{Input:a.Input,FormItem:a.FormItem},schema:{type:"object",properties:{name:{title:xt("Template name"),required:!0,default:Lt?"".concat(Ct((Lt==null?void 0:Lt.title)||(Lt==null?void 0:Lt.name)),"_").concat(xt(ir[Ne]||Ne)):xt(ir[Ne]||Ne),"x-decorator":"FormItem","x-component":"Input"}}}})})},it).open({});case 5:return $n=jn.sent,pn=(0,fe.Pl)({t:xt,api:qe,current:$t.parent}),pn.loadAPIClientEvents(),jn.next=10,rt({collectionName:Xe,resourceName:dt,componentName:Ne,dataSourceKey:Lt.dataSource,name:$n.name,uid:$t["x-uid"]});case 10:return un=jn.sent,Xn=un.key,pn.removeWithoutEmit($t),pn.insertAdjacent(Fe,{type:"void","x-component":"BlockTemplate","x-component-props":{templateId:Xn}}),ot["x-template-key"]=Xn,jn.next=17,qe.request({url:"uiSchemas:patch",method:"post",data:{"x-uid":ot["x-uid"],"x-template-key":Xn}});case 17:Ht.refresh();case 18:case"end":return jn.stop()}},Pt)})),children:xt("Save as block template")}):null},kt=function(Ce){var Oe=(0,se.nu)(),Fe=Oe.pushMenuItem,Ne=(0,se.d5)(),Xe=Ne.collectMenuItem,dt=Ce.eventKey,ht=Ce.title,xt=L()(L()({key:ht},S().omit(Ce,["children","name"])),{},{eventKey:dt,onClick:function(Dt){var Vt;Dt.domEvent.preventDefault(),Dt.domEvent.stopPropagation(),Ce==null||(Vt=Ce.onClick)===null||Vt===void 0||Vt.call(Ce,Dt)},style:{minWidth:120},label:Ce.children||Ce.title,title:Ce.title});return Fe==null||Fe(xt),Xe==null||Xe(xt),null},Rt=function(Ce){var Oe=(0,se.iX)(),Fe=Oe.Component,Ne=Oe.getMenuItems,Xe=(0,se.nu)(),dt=Xe.pushMenuItem,ht=(0,H.useMemo)(function(){return(0,Q.uid)()},[]),xt={key:ht,type:"group",title:Ce.title,label:Ce.title,children:Ne(function(){return Ce.children})};return dt(xt),(0,We.jsx)(Fe,{})},_t=function(Ce){var Oe=(0,se.iX)(),Fe=Oe.Component,Ne=Oe.getMenuItems,Xe=(0,se.nu)(),dt=Xe.pushMenuItem,ht=(0,H.useMemo)(function(){return(0,Q.uid)()},[]),xt={key:ht,label:Ce.title,title:Ce.title,children:Ne(function(){return Ce.children})};return dt(xt),(0,We.jsx)(Fe,{})},Bt=function(){var Ce=(0,se.nu)(),Oe=Ce.pushMenuItem,Fe=(0,H.useMemo)(function(){return(0,Q.uid)()},[]),Ne={key:Fe,type:"divider"};return Oe(Ne),null},jt=function(Ce){var Oe=Ce.disabled,Fe=Ce.confirm,Ne=Ce.title,Xe=Ce.removeParentsIfNoChildren,dt=Ce.breakRemoveOn,ht=Jn(),xt=ht.dn,Ct=ht.template,Dt=(0,N.$)(),Vt=Dt.t,Ht=(0,E.useField)(),Ut=(0,Pe.e)(),wt=(0,E.useFieldSchema)(),ot=(0,T.rE)(),qe=(0,E.useForm)(),Be=b.Z.useApp(),rt=Be.modal,Ve=(0,q.useFormActiveFields)()||{},$e=Ve.removeActiveFieldName,it=(0,Ee.kO)(),Pt=it.removeDataBlock;return(0,We.jsx)(kt,{disabled:Oe,title:"Delete",eventKey:"remove",onClick:function(){rt.confirm(L()(L()({title:Ne?Ut(Ne):Vt("Delete block"),content:Vt("Are you sure you want to delete it?")},Fe),{},{onOk:function(){return r()(C()().mark(function $n(){var pn,un;return C()().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:if(un={removeParentsIfNoChildren:Xe,breakRemoveOn:dt},Ht!=null&&Ht.required&&(Ht.required=!1,wt.required=!1),!(Ct&&Ct.uid===wt["x-uid"]&&ot!==null&&ot!==void 0&&ot.dn)){Yn.next=7;break}return Yn.next=5,ot==null?void 0:ot.dn.remove(null,un);case 5:Yn.next=9;break;case 7:return Yn.next=9,xt.remove(null,un);case 9:return Yn.next=11,Fe==null||(pn=Fe.onOk)===null||pn===void 0?void 0:pn.call(Fe);case 11:delete qe.values[wt.name],xt.refresh({refreshParentSchema:!0}),$e==null||$e(wt.name),qe==null||qe.query(new RegExp("".concat(wt.parent.name,".").concat(wt.name,"$"))).forEach(function(jn){var ir,fr;(ir=jn.setValue)===null||ir===void 0||ir.call(jn,void 0),(fr=jn.setInitialValue)===null||fr===void 0||fr.call(jn,void 0)}),Pt(wt["x-uid"]);case 16:case"end":return Yn.stop()}},$n)}))()}}))},children:Vt("Delete")})},Xt=function(Ce){var Oe=Ce.title,Fe=Ce.options,Ne=Ce.value,Xe=Ce.onChange,dt=n()(Ce,zt);return(0,We.jsx)(kt,L()(L()({title:Oe},dt),{},{children:(0,We.jsx)(P.T,{title:Oe,defaultValue:Ne,onChange:Xe,options:Fe})}))},Wt=function(Ce){var Oe=Ce.title,Fe=Ce.options,Ne=Ce.value,Xe=Ce.onChange,dt=n()(Ce,xn);return(0,We.jsx)(kt,L()(L()({title:Oe},dt),{},{children:(0,We.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Oe,(0,We.jsx)(f.Z,L()({bordered:!1,defaultValue:Ne,onChange:Xe,options:Fe,style:{textAlign:"right",minWidth:100}},Ce))]})}))},Nt={marginLeft:32},nn=(0,E.observer)(function(De){var Ce=De.state;return(0,We.jsx)(x.Z,{size:"small",checked:Ce.checked,style:Nt})});nn.displayName="MenuItemSwitch";var Zt=function(Ce){var Oe=Ce.title,Fe=Ce.onChange,Ne=n()(Ce,Qt),Xe=(0,H.useState)(function(){return(0,$.observable)({checked:!!Ce.checked})}),dt=h()(Xe,1),ht=dt[0];return(0,We.jsx)(kt,L()(L()({title:Oe},Ne),{},{onClick:function(){Fe==null||Fe(!ht.checked),ht.checked=!ht.checked},children:(0,We.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[Oe,(0,We.jsx)(nn,{state:ht})]})}))},Cn=function(Ce){var Oe=Ce.schema,Fe=n()(Ce,Et),Ne=(0,H.useState)(!1),Xe=h()(Ne,2),dt=Xe[0],ht=Xe[1],xt=(0,H.useContext)(An);return(0,We.jsxs)(ee.EI,{value:{visible:dt,setVisible:ht},children:[(0,We.jsx)(kt,L()(L()({title:Ce.title},Fe),{},{onClick:function(){xt.setVisible(!1),ht(!0)},children:Ce.children||Ce.title})),(0,We.jsx)(Te.n,{schema:L()({name:(0,Q.uid)()},Oe)})]})},Yt=H.memo(function(De){var Ce=De.title,Oe=De.onSubmit,Fe=De.width,Ne=Fe===void 0?"50%":Fe,Xe=De.initialValues,dt=De.beforeOpen,ht=De.initialSchema,xt=De.schema,Ct=De.modalTip,Dt=De.components,Vt=De.scope,Ht=n()(De,en),Ut=(0,H.useState)(!1),wt=h()(Ut,2),ot=wt[0],qe=wt[1],Be=(0,H.useState)(De.uid),rt=h()(Be,2),Ve=rt[0],$e=rt[1],it=(0,N.$)(),Pt=it.t,Lt=(0,E.useFieldSchema)(),$t=(0,H.useContext)(An),$n=Jn(),pn=$n.dn,un=(0,Pe.e)(),Xn=(0,X.L)(),Yn=(0,q.useFormActiveFields)(),jn=(0,t.useZIndexContext)(),ir=jn+10,fr=(0,H.useMemo)(function(){return(0,R.createForm)({initialValues:(0,l.cloneDeep)(Xe),values:(0,l.cloneDeep)(Xe)})},[Xe]);(0,H.useEffect)(function(){fr.setInitialValues((0,l.cloneDeep)(Xe))},[JSON.stringify(Xe||{})]);var Ar=(0,H.useCallback)(function(){qe(!1),fr.reset()},[fr]),wr=(0,H.useCallback)(r()(C()().mark(function Qr(){var _r,Rr;return C()().wrap(function(Yr){for(;;)switch(Yr.prev=Yr.next){case 0:return Yr.next=2,fr.submit();case 2:return Yr.prev=2,_r=fr.values,Rr=Object.keys(_r).reduce(function(eo,ho){return fr.query(ho).take()&&(eo[ho]=_r[ho]),eo},{}),qe(!1),Yr.next=8,Oe==null?void 0:Oe((0,l.cloneDeep)(Rr));case 8:Yr.next=13;break;case 10:Yr.prev=10,Yr.t0=Yr.catch(2),console.error(Yr.t0);case 13:case"end":return Yr.stop()}},Qr,null,[[2,10]])})),[fr,Oe]),Kr=(0,H.useCallback)(r()(C()().mark(function Qr(){return C()().wrap(function(Rr){for(;;)switch(Rr.prev=Rr.next){case 0:if(!(!Ve&&ht!==null&&ht!==void 0&&ht["x-uid"])){Rr.next=6;break}return Lt["x-action-settings"].schemaUid=ht["x-uid"],pn.emit("patch",{schema:Lt}),Rr.next=5,Xn.resource("uiSchemas").insert({values:ht});case 5:$e(ht["x-uid"]);case 6:typeof dt=="function"&&(dt==null||dt()),$t.setVisible(!1),qe(!0);case 9:case"end":return Rr.stop()}},Qr)})),[Xn,$t,pn,Lt,ht,Ve]),ao=(0,H.useCallback)(function(Qr){return Qr.stopPropagation()},[]);return(0,We.jsxs)(t.zIndexContext.Provider,{value:ir,children:[(0,We.jsx)(kt,L()(L()({title:un(Ce)},Ht),{},{onClick:Kr,onKeyDown:ao,children:De.children||De.title})),(0,O.createPortal)((0,We.jsx)(m.Z,L()(L()({width:Ne,title:un(Ce)},Ht),{},{destroyOnClose:!0,open:ot,onCancel:Ar,zIndex:ir,footer:(0,We.jsxs)(F.Z,{children:[(0,We.jsx)(I.ZP,{onClick:Ar,children:Pt("Cancel")}),(0,We.jsx)(I.ZP,{type:"primary",onClick:wr,children:Pt("Submit")})]}),children:(0,We.jsx)(q.FormActiveFieldsProvider,{name:"form",getActiveFieldsName:Yn==null?void 0:Yn.getActiveFieldsName,children:(0,We.jsx)(Ae.R,{form:fr,children:(0,We.jsxs)(a.FormLayout,{layout:"vertical",children:[Ct&&(0,We.jsx)(d.Z,{message:Ct}),Ct&&(0,We.jsx)("br",{}),ot&&Ve&&(0,We.jsx)(Le.m,{noForm:!0,components:Dt,scope:Vt,uid:Ve}),ot&&xt&&(0,We.jsx)(Te.n,{components:Dt,scope:Vt,schema:xt})]})})})})),document.body)]})});Yt.displayName="SchemaSettingsActionModalItem";var Mn=function(Ce){var Oe=Ce.hidden,Fe=Ce.title,Ne=Ce.components,Xe=Ce.scope,dt=Ce.effects,ht=Ce.onSubmit,xt=Ce.asyncGetInitialValues,Ct=Ce.initialValues,Dt=Ce.width,Vt=Dt===void 0?"fit-content":Dt,Ht=Ce.noRecord,Ut=Ht===void 0?!1:Ht,wt=Ce.ModalContextProvider,ot=wt===void 0?function(po){return(0,We.jsx)(We.Fragment,{children:po.children})}:wt,qe=n()(Ce,Rn),Be=(0,H.useContext)(E.SchemaOptionsContext),rt=(0,t.useCollection)(),Ve=(0,X.L)(),$e=(0,V.qD)(),it=(0,Se.mg)(),Pt=it.theme,Lt=(0,U.BU)(),$t=(0,q.useFormActiveFields)(),$n=(0,H.useContext)(u.ZP.ConfigContext),pn=$n.locale,un=(0,xe.fp)(),Xn=(0,_e.FC)(),Yn=(0,ie.oV)(),jn=(0,le.zh)()||{},ir=jn.association,fr=(0,mn.ER)(),Ar=(0,ne.bz)(),wr=(0,U.VG)(),Kr=(0,D.Q)(),ao=Kr.getOperators,Qr=(0,V.HU)(),_r=(0,ce.OQ)(),Rr=(0,ue.eI)(),Hr=Rr.formValue,Yr=Rr.collection,eo=Rr.parent,ho=(0,me.Sw)(),co=(0,me.ec)();return Oe?null:(0,We.jsx)(kt,L()(L()({title:Fe},qe),{},{onClick:r()(C()().mark(function po(){var Wo,Vr;return C()().wrap(function(to){for(;;)switch(to.prev=to.next){case 0:if(!xt){to.next=6;break}return to.next=3,xt();case 3:to.t0=to.sent,to.next=7;break;case 6:to.t0=Ct;case 7:Wo=to.t0,Vr=S().isFunction(Ce.schema)?Ce.schema():Ce.schema,(0,ge.D)({title:Vr.title||Fe,width:Vt},function(){return(0,We.jsx)(ot,{children:(0,We.jsx)(D.H,{defaultOperators:ao(),children:(0,We.jsx)(t.VariablesContext.Provider,{value:_r,children:(0,We.jsx)(U.Qj.Provider,{value:wr,children:(0,We.jsx)(me.Rm,{recordData:ho==null?void 0:ho.value,collection:ho==null?void 0:ho.collection,parent:{recordData:co==null?void 0:co.value,collection:co==null?void 0:co.collection},children:(0,We.jsx)(ie.E0,{record:Ut?null:Yn,children:(0,We.jsx)(mn.ov,L()(L()({},fr),{},{children:(0,We.jsx)(ne.TC.Provider,{value:Ar,children:(0,We.jsx)(ue._c,{value:{value:Hr,collection:Yr,parent:eo},children:(0,We.jsx)(q.FormActiveFieldsProvider,{name:"form",getActiveFieldsName:$t==null?void 0:$t.getActiveFieldsName,children:(0,We.jsx)(V.xJ.Provider,{value:Qr,children:(0,We.jsx)(U.br.Provider,{value:Lt,children:(0,We.jsx)(G.i,{dataSourceManager:un,dataSource:Xn,children:(0,We.jsx)(le.dq,{allowNull:!0,collection:rt==null?void 0:rt.name,association:ir,children:(0,We.jsx)(je.G,{scope:Be.scope,components:Be.components,children:(0,We.jsx)(a.FormLayout,{layout:"vertical",className:(0,o.css)(an||(an=v()([`
                                                // screen > 576px
                                                @media (min-width: 576px) {
                                                  min-width: 520px;
                                                }

                                                // screen <= 576px
                                                @media (max-width: 576px) {
                                                  min-width: 320px;
                                                }
                                              `]))),children:(0,We.jsx)(V.Zz.Provider,{value:$e,children:(0,We.jsx)(B.X,{apiClient:Ve,children:(0,We.jsx)(u.ZP,{locale:pn,children:(0,We.jsx)(Te.n,{components:Ne,scope:Xe,schema:Vr})})})})})})})})})})})})})}))})})})})})})},Pt).open({initialValues:Wo,effects:dt}).then(function(lo){return ht(lo),lo}).catch(function(lo){console.error(lo)});case 10:case"end":return to.stop()}},po)})),children:Ce.children||Ce.title}))},bn=function(Ce){var Oe=Ce.path,Fe=Oe===void 0?"x-component-props.params.sort":Oe,Ne=(0,N.$)(),Xe=Ne.t,dt=(0,fe.ng)(),ht=dt.dn,xt=(0,E.useFieldSchema)(),Ct=(0,E.useField)(),Dt=Ce.title||Xe("Set default sorting rules"),Vt=(0,t.useCollection)(),Ht=(0,l.get)(xt,Fe)||[],Ut=Ht==null?void 0:Ht.map(function(qe){return qe.startsWith("-")?{field:qe.substring(1),direction:"desc"}:{field:qe,direction:"asc"}}),wt=(0,J.useSortFields)(Ce.name||(Vt==null?void 0:Vt.name)),ot=function(){var qe=r()(C()().mark(function Be(rt){var Ve,$e,it;return C()().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:if($e=rt.sort,!(Ce!=null&&Ce.onSubmit)){Lt.next=3;break}return Lt.abrupt("return",Ce.onSubmit({sort:$e}));case 3:return it=$e.map(function($t){return $t.direction==="desc"?"-".concat($t.field):$t.field}),(0,l.set)(Ct,Fe.replace("x-component-props","componentProps").replace("x-decorator-props","decoratorProps"),it),(0,l.set)(xt,Fe,it),Lt.next=8,ht.emit("patch",{schema:xt});case 8:return Lt.abrupt("return",(Ve=Ce.onSubmitAfter)===null||Ve===void 0?void 0:Ve.call(Ce));case 9:case"end":return Lt.stop()}},Be)}));return function(rt){return qe.apply(this,arguments)}}();return(0,We.jsx)(Mn,{title:Dt,components:{ArrayItems:a.ArrayItems},schema:{type:"object",title:Dt,properties:{sort:{type:"array",default:Ut,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:wt,required:!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:Xe("ASC"),value:"asc"},{label:Xe("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:Xe("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:ot})},Gt=function(Ce){var Oe,Fe,Ne=Ce.collectionName,Xe=Ce.readPretty,dt=Ce.Component,ht=Ce.afterSubmit,xt=(0,E.useFieldSchema)(),Ct=(0,ne.bz)(),Dt=Ct.form,Vt=(0,fe.ng)(),Ht=Vt.dn,Ut=(0,N.$)(),wt=Ut.t,ot=(0,re.$t)(),qe=ot.getTemplateById,Be=(0,ce.OQ)(),rt=(0,ce.Kp)(),Ve=(0,pe.a)(),$e=(0,ne.th)(),it=$e.type,Pt=(Oe=Ce==null?void 0:Ce.category)!==null&&Oe!==void 0?Oe:Je.sI.default,Lt=(Ce==null?void 0:Ce.type)||(xt!=null&&xt["x-action"]||["Action","Action.Link"].includes(xt["x-component"])?"button":"field"),$t=Ft(xt)||xt,$n=(0,J.useLinkageCollectionFilterOptions)(Ne),pn=hn(Ne,Xe),un=(Fe={},i()(Fe,Je.sI.default,wt("Linkage rules")),i()(Fe,Je.sI.style,wt("Style")),Fe),Xn=Je.k0[Pt],Yn=(0,H.useCallback)(function(){return($t==null?void 0:$t[Xn])||(xt==null?void 0:xt[Xn])||[]},[$t,xt,Xn]),jn=un[Pt],ir=(0,H.useMemo)(function(){return{type:"object",title:jn,properties:{fieldReaction:{"x-component":dt||nt.U,"x-use-component-props":function(){return{options:$n,defaultValues:Yn(),linkageOptions:pn,category:Pt,elementType:Lt,collectionName:Ne,form:Dt,variables:Be,localVariables:rt,record:Ve,formBlockType:it}}}}}},[Ne,xt,Dt,$t,rt,Ve,wt,Be,Yn,dt]),fr=(0,H.useMemo)(function(){return{ArrayCollapse:a.ArrayCollapse,FormLayout:a.FormLayout}},[]),Ar=(0,H.useCallback)(function(wr){var Kr,ao=[],Qr=c()(wr.fieldReaction.rules),_r;try{for(Qr.s();!(_r=Qr.n()).done;){var Rr=_r.value;ao.push(S().pickBy(Rr,S().identity))}}catch(ho){Qr.e(ho)}finally{Qr.f()}var Hr=$t["x-component"]==="BlockTemplate"&&((Kr=$t["x-component-props"])===null||Kr===void 0?void 0:Kr.templateId),Yr=Hr&&qe(Hr).uid||$t["x-uid"],eo=i()({},"x-uid",Yr);$t[Xn]=ao,eo[Xn]=ao,Ht.emit("patch",{schema:eo}),Ht.refresh(),ht==null||ht()},[Ht,qe,$t,Xn,ht]);return(0,We.jsx)(Mn,{title:jn,components:fr,width:770,schema:ir,onSubmit:Ar})},ln=function(Ce){var Oe=(0,E.useFieldSchema)();if(Ce)return{templateData:S().cloneDeep(Ce["x-data-templates"])};var Fe=(0,ne.Fi)(Oe)||Oe;return{templateData:S().cloneDeep(Fe==null?void 0:Fe["x-data-templates"])}},Hn=function(Ce){var Oe=(0,H.useContext)(Ie.D),Fe=Ce.collectionName,Ne=(0,E.useFieldSchema)(),Xe=(0,fe.ng)(),dt=Xe.dn,ht=(0,N.$)(),xt=ht.t,Ct=(0,ne.Fi)(Ne)||Ne,Dt=ln(),Vt=Dt.templateData,Ht=(0,H.useMemo)(function(){return{type:"object",title:xt("Form data templates"),properties:{fieldReaction:{"x-decorator":function(Be){return(0,We.jsx)(ze.Cm,L()(L()({},Be),{},{isInFormDataTemplate:!0}))},"x-component":be.$y,"x-use-component-props":function(){return{defaultValues:Vt,collectionName:Fe}},"x-component-props":{designerCtx:Oe,formSchema:Ct}}}}},[Vt]),Ut=(0,H.useCallback)(function(qe){var Be,rt=L()(L()({},Ct["x-data-templates"]||{}),qe.fieldReaction);rt.items.forEach(function($e){$e.fields=Array.isArray($e.fields)?$e.fields:$e.fields.checked});var Ve=(Be={},i()(Be,"x-uid",Ct["x-uid"]),i()(Be,"x-data-templates",rt),Be);Ct["x-data-templates"]=rt,dt.emit("patch",{schema:Ve}),dt.refresh()},[]),wt=(0,H.useMemo)(function(){return xt("Form data templates")},[]),ot=(0,H.useMemo)(function(){return{ArrayCollapse:a.ArrayCollapse,FormLayout:a.FormLayout}},[]);return(0,We.jsx)(Mn,{title:wt,components:ot,width:770,schema:Ht,onSubmit:Ut})};function sn(De){var Ce,Oe,Fe,Ne=De.collectionName,Xe=(0,E.useFieldSchema)(),dt=(0,E.useField)(),ht=(0,fe.ng)(),xt=ht.dn,Ct=(0,N.$)(),Dt=Ct.t,Vt=Xe==null?void 0:Xe["x-allow-add-to-current"],Ht=(0,Y.B)(),Ut=Ht.getCollectionJoinField,wt=(0,U.BU)(),ot=Ut(Xe==null||(Ce=Xe.parent)===null||Ce===void 0?void 0:Ce["x-collection-field"])||{},qe=(Xe==null||(Oe=Xe.parent)===null||Oe===void 0?void 0:Oe["x-component"])==="CollectionField";return(0,We.jsx)(Mn,{title:Dt("Enable child collections"),components:{ArrayItems:a.ArrayItems,FormLayout:a.FormLayout},scope:{isAssocationAdd:qe},schema:{type:"object",title:Dt("Enable child collections"),properties:{enableChildren:{"x-component":tt,"x-use-component-props":function(){return{defaultValues:Xe==null?void 0:Xe["x-enable-children"],collectionName:Ne}}},allowAddToCurrent:{type:"boolean","x-content":"{{t('Allow adding records to the current collection')}}","x-decorator":"FormItem","x-component":"Checkbox",default:Vt===void 0?!0:Vt},linkageFromForm:{type:"string",title:"{{t('Linkage with form fields')}}","x-visible":"{{isAssocationAdd}}","x-decorator":"FormItem","x-component":ut,"x-component-props":{rootCollection:wt.props.collection||wt.props.resource,collectionField:ot},default:Xe==null||(Fe=Xe["x-component-props"])===null||Fe===void 0?void 0:Fe.linkageFromForm}}},onSubmit:function(rt){var Ve=[],$e=c()(rt.enableChildren.childrenCollections),it;try{for($e.s();!(it=$e.n()).done;){var Pt=it.value;Ve.push(S().pickBy(Pt,S().identity))}}catch($n){$e.e($n)}finally{$e.f()}var Lt=Xe["x-uid"],$t=i()({},"x-uid",Lt);Xe["x-enable-children"]=Ve,Xe["x-allow-add-to-current"]=rt.allowAddToCurrent,Xe["x-component-props"]=L()(L()({},Xe["x-component-props"]),{},{component:"CreateRecordAction",linkageFromForm:rt==null?void 0:rt.linkageFromForm}),$t["x-enable-children"]=Ve,$t["x-allow-add-to-current"]=rt.allowAddToCurrent,$t["x-component-props"]=L()(L()({},Xe["x-component-props"]),{},{component:"CreateRecordAction",linkageFromForm:rt==null?void 0:rt.linkageFromForm}),dt.componentProps.linkageFromForm=rt.linkageFromForm,xt.emit("patch",{schema:$t}),xt.refresh()}})}var Ln=(0,o.css)(fn||(fn=v()([`
  & > .nb-form-item {
    flex: 1;
  }
`]))),Bn=function(Ce){for(var Oe=Ce.parent;Oe;){if(Oe["x-component"]==="CollectionField")return Oe;Oe=Oe.parent}},wn={name:"formLabelLayout",type:"select",useComponentProps:function(){var Ce,Oe=(0,E.useField)(),Fe=(0,E.useFieldSchema)(),Ne=(0,N.$)(),Xe=Ne.t,dt=(0,fe.ng)(),ht=dt.dn;return{title:Xe("Layout"),value:((Ce=Oe.componentProps)===null||Ce===void 0?void 0:Ce.layout)||"vertical",options:[{label:Xe("Vertical"),value:"vertical"},{label:Xe("Horizontal"),value:"horizontal"}],onChange:function(Ct){var Dt;Oe.componentProps=Oe.componentProps||{},Oe.componentProps.layout=Ct,Fe["x-component-props"]=Fe["x-component-props"]||{},Fe["x-component-props"].layout=Ct,ht.emit("patch",{schema:(Dt={},i()(Dt,"x-uid",Fe["x-uid"]),i()(Dt,"x-component-props",Fe["x-component-props"]),Dt)})}}}},st=function(Ce,Oe){var Fe=Oe==null?void 0:Oe(Ce==null?void 0:Ce.interface);return(Fe==null?void 0:Fe.group)==="systemInfo"};function Ke(De,Ce){var Oe,Fe=(Oe=De==null?void 0:De.default)!==null&&Oe!==void 0?Oe:Ce==null?void 0:Ce.defaultValue;return Fe}},28561:function(He,ae,e){"use strict";e.d(ae,{j:function(){return K},q:function(){return v}});var Z=e(9783),c=e.n(Z),k=e(80844),i=e(67294),g=e(26793),C=e(62662),A=e(94516),r=e(85893),K={DEFAULT:"defaultHeight",SPECIFY_VALUE:"specifyValue",FULL_HEIGHT:"fullHeight"},v=function(){var h,M,n=(0,k.useField)(),y=(0,k.useFieldSchema)(),L=(0,A.ng)(),o=L.dn,a=(0,g.$)(),R=a.t;return(0,r.jsx)(C.j0,{title:R("Set block height"),schema:{type:"object",title:R("Set block height"),properties:{heightMode:{type:"string",enum:[{label:R("Default"),value:K.DEFAULT},{label:R("Specify height"),value:K.SPECIFY_VALUE},{label:R("Full height"),value:K.FULL_HEIGHT}],required:!0,default:(y==null||(h=y["x-component-props"])===null||h===void 0?void 0:h.heightMode)||K.DEFAULT,"x-decorator":"FormItem","x-component":"Radio.Group"},height:{title:R("Height"),type:"string",default:y==null||(M=y["x-component-props"])===null||M===void 0?void 0:M.height,required:!0,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{addonAfter:"px"},"x-validator":[{minimum:40}],"x-reactions":{dependencies:["heightMode"],fulfill:{state:{hidden:'{{ $deps[0]==="fullHeight"||$deps[0]==="defaultHeight"}}',value:'{{$deps[0]!=="specifyValue"?null:$self.value}}'}}}}}},onSubmit:function($){var Q,z=$.heightMode,p=$.height,b=y["x-component-props"]||{};b.heightMode=z,b.height=p,y["x-component-props"]=b,n.componentProps.heightMode=z,n.componentProps.height=p,o.emit("patch",{schema:(Q={},c()(Q,"x-uid",y["x-uid"]),c()(Q,"x-component-props",y["x-component-props"]),Q)}),o.refresh()}})}},25750:function(He,ae,e){"use strict";e.d(ae,{_:function(){return K}});var Z=e(9783),c=e.n(Z),k=e(80844),i=e(67294),g=e(26793),C=e(94516),A=e(62662),r=e(85893);function K(){var v,j,h=(0,k.useField)(),M=(0,k.useFieldSchema)(),n=(0,C.ng)(),y=n.dn,L=(0,g.$)(),o=L.t;return(0,r.jsx)(A.j0,{title:o("Edit block title & description"),schema:{type:"object",title:o("Edit block title & description"),properties:{title:{title:o("title"),type:"string",default:M==null||(v=M["x-component-props"])===null||v===void 0?void 0:v.title,"x-decorator":"FormItem","x-component":"Input","x-component-props":{"aria-label":"block-title"}},description:{title:o("Description"),type:"string",default:M==null||(j=M["x-component-props"])===null||j===void 0?void 0:j.description,"x-decorator":"FormItem","x-component":"Markdown"}}},onSubmit:function(R){var E,$=R.title,Q=R.description,z=M["x-component-props"]||{};z.title=$,z.description=Q,M["x-component-props"]=z,h.componentProps.title=$,h.componentProps.description=Q,y.emit("patch",{schema:(E={},c()(E,"x-uid",M["x-uid"]),c()(E,"x-component-props",M["x-component-props"]),E)})}})}},13845:function(He,ae,e){"use strict";e.d(ae,{F:function(){return E}});var Z=e(19632),c=e.n(Z),k=e(9783),i=e.n(k),g=e(80844),C=e(84157),A=e(32983),r=e(67294),K=e(26793),v=e(10097),j=e(58837),h=e(13511),M=e(67205),n=e(87714),y=function(Q){return(Q==null?void 0:Q.targetKey)||"id"},L=e(96365),o=e(94516),a=e(62662),R=e(85893);function E($){var Q=$.type,z=$.emptyDescription,p=(0,g.useFieldSchema)(),b=(0,o.ng)(),f=b.dn,x=(0,K.$)(),m=x.t,F=(0,j.Kx)(),I=(0,M.kO)(),d=I.inProvider,u=(0,n.Um)(Q),l=(0,v.findFilterTargets)(p),S=l.targets,H=S===void 0?[]:S,O=l.uid,N=(0,L.e)(),t=(0,h.Uv)(),B=t.getAllCollectionsInheritChain;if(!d)return null;var X=u.map(function(V){var U="".concat(N(V.collection.title)," #").concat(V.uid.slice(0,4)),D=function(){var Y=V.dom,P=Y.querySelector(".general-schema-designer");P&&(P.style.display="block"),Y.style.boxShadow="0 0 10px rgba(0, 0, 0, 0.2)",Y.scrollIntoView({behavior:"smooth",block:"center"})},ne=function(){var Y=V.dom,P=Y.querySelector(".general-schema-designer");P&&(P.style.display=null),Y.style.boxShadow="none"};if((0,n.yr)(V.collection,F))return(0,R.jsx)(a.hj,{title:U,checked:H.some(function(J){return J.uid===V.uid}),onChange:function(Y){var P;Y?H.push({uid:V.uid}):(H=H.filter(function(w){return w.uid!==V.uid}),V.clearFilter(O)),(0,v.updateFilterTargets)(p,H),f.emit("patch",{schema:(P={},i()(P,"x-uid",O),i()(P,"x-filter-targets",H),P)}).catch(C.error),f.refresh()},onMouseEnter:D,onMouseLeave:ne},V.uid);var q=H.find(function(J){return J.uid===V.uid});return(0,R.jsx)(a.Qf,{title:U,value:(q==null?void 0:q.field)||"",options:[].concat(c()((0,n.x5)(B(F.name),V).map(function(J){return{label:N(J.uiSchema.title)||J.name,value:"".concat(J.name,".").concat(y(J))}})),c()((0,n.zv)(F,V).map(function(J){return{label:"".concat(N(J.uiSchema.title)||J.name," [").concat(m("Foreign key"),"]"),value:J.name}})),[{label:m("Unconnected"),value:""}]),onChange:function(Y){var P;Y===""?(H=H.filter(function(w){return w.uid!==V.uid}),V.clearFilter(O)):(H=H.filter(function(w){return w.uid!==V.uid}),H.push({uid:V.uid,field:Y})),(0,v.updateFilterTargets)(p,H),f.emit("patch",{schema:(P={},i()(P,"x-uid",O),i()(P,"x-filter-targets",H),P)}),f.refresh()},onMouseEnter:D,onMouseLeave:ne},V.uid)});return(0,R.jsx)(a.m$,{title:m("Connect data blocks"),children:X.length?X:(0,R.jsx)(a.r2,{title:"empty",children:(0,R.jsx)(A.Z,{style:{width:160,padding:"0 1em"},description:z,image:A.Z.PRESENTED_IMAGE_SIMPLE})})})}},43319:function(He,ae,e){"use strict";e.d(ae,{H:function(){return n}});var Z=e(97857),c=e.n(Z),k=e(67294),i=e(26793),g=e(21143),C=e(7340),A=e(44355),r=e(53285),K=e(64910),v=e(62662),j=e(22691),h=e(25661),M=e(85893),n=function(o){var a=(0,i.$)(),R=a.t,E=(0,A.useCollectionFilterOptionsV2)(o.collectionName),$=E.getFields,Q=(0,g.useRecord)(),z=(0,C.bz)(),p=z.form,b=(0,K.OQ)(),f=(0,K.Kp)(),x=(0,g.useCollectionManager_deprecated)(),m=x.getAllCollectionsInheritChain,F=(0,r.P5)()||{},I=F.isInSubForm,d=F.isInSubTable,u=(0,k.useCallback)(function(S){return(0,M.jsx)(g.DatePickerProvider,{value:{utc:!1},children:(0,M.jsx)(j.qj,c()(c()({},S),{},{form:p,record:Q,noDisabled:!0,shouldChange:(0,j.Vc)({collectionField:S.collectionField,variables:b,localVariables:f,getAllCollectionsInheritChain:m})}))})},[p,m,f,Q,b]),l=function(){return{type:"object",title:R("Set the data scope"),properties:{filter:{enum:o.collectionFilterOption||$(),"x-decorator":function(O){return(0,M.jsx)(h.Nx,c()(c()({},O),{},{children:(0,M.jsx)(r.Cm,{isInSubForm:I,isInSubTable:d,children:O.children})}))},"x-decorator-props":{isDisabled:y},"x-component":"Filter","x-component-props":{collectionName:o.collectionName,dynamicComponent:o.dynamicComponent||u}}}}};return(0,M.jsx)(v.j0,{title:R("Set the data scope"),initialValues:{filter:o.defaultFilter},schema:l,onSubmit:o.onSubmit,noRecord:o.noRecord})};function y(L){var o,a=L.option,R=L.collectionField,E=L.uiSchema;if(!E||!R)return!0;if(R.interface==="json"||a.target)return!1;if(["input","markdown","richText","textarea","username"].includes(R.interface)){var $;return!["string","number"].includes(($=a.schema)===null||$===void 0?void 0:$.type)}return R.interface&&a.interface?R.interface!==a.interface:(E==null?void 0:E["x-component"])!==((o=a.schema)===null||o===void 0?void 0:o["x-component"])}},89018:function(He,ae,e){"use strict";e.d(ae,{y:function(){return R}});var Z=e(97857),c=e.n(Z),k=e(9783),i=e.n(k),g=e(68400),C=e.n(g),A=e(97133),r=e(80844),K=e(67294),v=e(26793),j=e(84157),h=e(21143),M=e(62954),n=e(62662),y=e(85893),L,o,a,R=function($){var Q,z,p,b,f,x,m,F,I=$.fieldSchema,d=(0,r.useField)(),u=(0,h.useDesignable)(),l=u.dn,S=(0,v.$)(),H=S.t,O=(0,h.useCollectionManager_deprecated)(),N=O.getCollectionJoinField,t=N(I==null?void 0:I["x-collection-field"])||{},B=I==null||(Q=I["x-component-props"])===null||Q===void 0?void 0:Q.showTime,X=(I==null||(z=I["x-component-props"])===null||z===void 0?void 0:z.dateFormat)||(t==null||(p=t.uiSchema)===null||p===void 0||(p=p["x-component-props"])===null||p===void 0?void 0:p.dateFormat)||"YYYY-MM-DD",V=(I==null||(b=I["x-component-props"])===null||b===void 0?void 0:b.timeFormat)||(t==null||(f=t.uiSchema)===null||f===void 0||(f=f["x-component-props"])===null||f===void 0?void 0:f.timeFormat)||"HH:mm:ss",U=(I==null||(x=I["x-component-props"])===null||x===void 0?void 0:x.picker)||(t==null||(m=t.uiSchema)===null||m===void 0||(m=m["x-component-props"])===null||m===void 0?void 0:m.picker)||"date",D=I["x-read-pretty"]||d.readOnly||d.readPretty;return(0,y.jsx)(n.j0,{title:H("Date display format"),scope:{getPickerFormat:j.getPickerFormat},schema:{type:"object",properties:{picker:{type:"string",title:'{{t("Picker")}}',"x-decorator":"FormItem","x-component":"Radio.Group",default:U,description:!D&&'{{ t("Switching the picker, the value and default value will be cleared") }}',enum:[{label:'{{t("Date")}}',value:"date"},{label:'{{t("Month")}}',value:"month"},{label:'{{t("Quarter")}}',value:"quarter"},{label:'{{t("Year")}}',value:"year"}]},dateFormat:{type:"string",title:'{{t("Date format")}}',"x-component":M.Dnz,"x-decorator":"FormItem","x-decorator-props":{},"x-component-props":{className:(0,A.css)(L||(L=C()([`
                  .ant-radio-wrapper {
                    display: flex;
                    margin: 5px 0px;
                  }
                `]))),defaultValue:"dddd",formats:["MMMM Do YYYY","YYYY-MM-DD","MM/DD/YY","YYYY/MM/DD","DD/MM/YYYY"]},default:X,enum:[{label:(0,M.WN4)({format:"MMMM Do YYYY"}),value:"MMMM Do YYYY"},{label:(0,M.WN4)({format:"YYYY-MM-DD"}),value:"YYYY-MM-DD"},{label:(0,M.WN4)({format:"MM/DD/YY"}),value:"MM/DD/YY"},{label:(0,M.WN4)({format:"YYYY/MM/DD"}),value:"YYYY/MM/DD"},{label:(0,M.WN4)({format:"DD/MM/YYYY"}),value:"DD/MM/YYYY"},{label:"custom",value:"custom"}],"x-reactions":{dependencies:["picker"],fulfill:{state:{value:"{{ getPickerFormat($deps[0])}}",componentProps:{picker:"{{$deps[0]}}"}}}}},showTime:{default:B===void 0?t==null||(F=t.uiSchema)===null||F===void 0||(F=F["x-component-props"])===null||F===void 0?void 0:F.showTime:B,type:"boolean","x-decorator":"FormItem","x-component":"Checkbox","x-content":'{{t("Show time")}}',"x-hidden":(t==null?void 0:t.type)==="dateOnly","x-reactions":[`{{(field) => {
              field.query('.timeFormat').take(f => {
                f.display = field.value ? 'visible' : 'none';
              });
            }}}`,{dependencies:["picker"],when:'{{$deps[0]!=="date"}}',fulfill:{state:{hidden:!0,value:!1}},otherwise:{state:{hidden:(t==null?void 0:t.type)==="dateOnly"}}}]},timeFormat:{type:"string",title:'{{t("Time format")}}',"x-component":M.Dnz,"x-decorator":"FormItem","x-decorator-props":{className:(0,A.css)(o||(o=C()([`
                  margin-bottom: 0px;
                `])))},"x-component-props":{className:(0,A.css)(a||(a=C()([`
                  color: red;
                  .ant-radio-wrapper {
                    display: flex;
                    margin: 5px 0px;
                  }
                `]))),defaultValue:"h:mm a",formats:["hh:mm:ss a","HH:mm:ss"],timeFormat:!0},default:V,enum:[{label:(0,M.WN4)({format:"hh:mm:ss a"}),value:"hh:mm:ss a"},{label:(0,M.WN4)({format:"HH:mm:ss"}),value:"HH:mm:ss"},{label:"custom",value:"custom"}]}}},onSubmit:function(q){var J=i()({},"x-uid",I["x-uid"]);(d.componentProps.picker||"date")!==q.picker&&!D&&d.value&&(d.value=void 0,d.initialValue=void 0,I.default=void 0,J.default=void 0),J["x-component-props"]=d.componentProps||{},I["x-component-props"]=c()(c()({},d.componentProps||{}),q),J["x-component-props"]=I["x-component-props"],d.componentProps=I["x-component-props"];var Y=d.path.entire.split(".");Y.pop();var P=Y.join(".");d.query("".concat(P,".*[0:].").concat(I.name)).forEach(function(w){w.props.name===I.name&&((d.componentProps.picker||"date")!==q.picker&&!D&&(w.value=void 0,w.initialValue=void 0),w.setComponentProps(c()({},q)))}),l.emit("patch",{schema:J}),l.refresh()}})}},21774:function(He,ae,e){"use strict";e.d(ae,{N:function(){return z}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(5552),C=e(80844),A=e(96486),r=e.n(A),K=e(67294),v=e(26793),j=e(21143),h=e(7340),M=e(1892),n=e(44355),y=e(53285),L=e(64910),o=e(76690),a=e(62662),R=e(22691),E=e(42121),$=e(85893),Q=function(b){var f,x=((f=b.fieldSchema)===null||f===void 0?void 0:f["x-action-context"])||{};return x},z=function(b){var f,x=(0,C.useFieldSchema)(),m=(f=b==null?void 0:b.fieldSchema)!==null&&f!==void 0?f:x,F=(0,C.useField)(),I=(0,j.useDesignable)(),d=I.dn,u=(0,v.$)(),l=u.t,S=(0,j.useActionContext)(),H=Q(S).collection,O,N=(0,j.useCollection_deprecated)(),t=N.getField,B=(0,j.useCollectionManager_deprecated)(),X=B.getCollectionJoinField,V=B.getCollectionFields,U=B.getAllCollectionsInheritChain,D=(0,L.OQ)(),ne=(0,L.Kp)(),q=(0,j.useCollection_deprecated)(),J=(0,j.useRecord)(),Y=(0,h.bz)(),P=Y.form,w=(0,n.useCollectionFilterOptionsV2)(q),ie=w.getFields,G=(0,y.P5)()||{},le=G.isInSubForm,xe=G.isInSubTable,_e=q.name,Ee=(0,K.useMemo)(function(){return t(m.name)||X(m["x-collection-field"])},[m,X,t]),ze=r().omit(m,"required");if(Ee!=null&&Ee.target){var Se;O=X("".concat(Ee.target,".").concat(((Se=m["x-component-props"])===null||Se===void 0||(Se=Se.fieldNames)===null||Se===void 0?void 0:Se.label)||"id"))}var se=(Ee==null?void 0:Ee.interface)==="m2o"&&(0,a.PO)(m),me=se&&X(se==null?void 0:se["x-collection-field"]),pe=(0,M.Si)(),ee=(Ee==null?void 0:Ee.interface)==="m2m"||(Ee==null?void 0:Ee.interface)==="mbm"||(me==null?void 0:me.type)==="hasMany"&&(Ee==null?void 0:Ee.interface)==="m2o",ue=(0,K.useCallback)(function(Le){var Te=Le.find(function(Pe){return Pe.value==="$nForm"}),je=V(_e);return!(je!=null&&je.length)&&Te&&(Te.children=(0,E.X)(ie())),Le},[ie,_e]),ge=(0,K.useMemo)(function(){return{ArrayCollapse:g.ArrayCollapse,FormLayout:g.FormLayout,VariableInput:function(Te){return(0,$.jsx)(R.qj,i()(i()({},Te),{},{value:Te.value||void 0,hideVariableButton:b==null?void 0:b.hideVariableButton}))}}},[]),Ie=(0,K.useMemo)(function(){return{type:"object",title:l("Set default value"),properties:{default:{"x-decorator":"FormItem","x-component":"VariableInput","x-component-props":i()(i()({},(m==null?void 0:m["x-component-props"])||{}),{},{collectionField:Ee,contextCollectionName:ee?H:"",schema:Ee==null?void 0:Ee.uiSchema,targetFieldSchema:m,className:a.ZL,form:P,record:J,returnScope:ue,shouldChange:(0,R.Vc)({collectionField:Ee,variables:D,localVariables:ne,getAllCollectionsInheritChain:U}),renderSchemaComponent:function(Te){var je=(0,K.useMemo)(function(){return r().cloneDeep(ze)||{}},[]);je["x-read-pretty"]=!1,je["x-disabled"]=!1,r().set(je,"x-decorator-props.showTitle",!1);var Pe=(0,a.os)(je,Ee);Ee.target&&je["x-component-props"]&&(je["x-component-props"].mode="Select"),Ee!=null&&Ee.uiSchema.type&&(je.type=Ee.uiSchema.type),(Ee==null?void 0:Ee.uiSchema["x-component"])==="Checkbox"&&(r().set(je,"x-component-props.defaultChecked",Pe),je.type="void");var fe=(0,K.useMemo)(function(){return i()(i()({},je||{}),{},{"x-decorator":"FormItem","x-component-props":i()(i()({},je["x-component-props"]),{},{collectionName:Ee==null?void 0:Ee.collectionName,targetField:O,defaultValue:(0,o.cG)(Pe)?"":Pe,style:{width:"100%",verticalAlign:"top",minWidth:"200px"}}),default:(0,o.cG)(Pe)?"":Pe})},[je,Pe]);return r().set(fe,"x-component-props.onChange",Te.onChange),(0,$.jsx)(j.FormProvider,{children:(0,$.jsx)(j.SchemaComponent,{schema:fe})})}}),title:l("Default value"),default:(0,a.os)(m,Ee)}}}},[Ee,m,ze,P,U,ee,ne,J,ue,l,pe.collection,O,D]),Ae=(0,K.useCallback)(function(Le){var Te,je,Pe=c()({},"x-uid",m["x-uid"]);if(m.default=(Te=Le.default)!==null&&Te!==void 0?Te:null,!(0,o.cG)(Le.default)){var fe;(fe=F.setInitialValue)===null||fe===void 0||fe.call(F,Le.default)}Pe.default=(je=Le.default)!==null&&je!==void 0?je:null,d.emit("patch",{schema:Pe,currentSchema:x})},[x,d,F,m]);return(0,$.jsx)(a.j0,{title:l("Set default value"),components:ge,width:800,schema:Ie,onSubmit:Ae,ModalContextProvider:function(Te){return(0,$.jsx)(y.Cm,{isInSubForm:le,isInSubTable:xe,isInSetDefaultValueDialog:!0,children:Te.children})}})}},81432:function(He,ae,e){"use strict";e.d(ae,{A:function(){return K},J:function(){return v}});var Z=e(9783),c=e.n(Z),k=e(80844),i=e(67294),g=e(26793),C=e(62662),A=e(94516),r=e(85893),K={VERTICAL:"vertical",HORIZONTAL:"horizontal"},v=function(){var h,M,n,y,L=(0,k.useField)(),o=(0,k.useFieldSchema)(),a=(0,A.ng)(),R=a.dn,E=(0,g.$)(),$=E.t;return(0,r.jsx)(C.j0,{title:$("Layout"),schema:{type:"object",title:$("Set block layout"),properties:{layout:{type:"string",enum:[{label:$("Vertical"),value:K.VERTICAL},{label:$("Horizontal"),value:K.HORIZONTAL}],required:!0,default:(o==null||(h=o["x-component-props"])===null||h===void 0?void 0:h.layout)||K.VERTICAL,"x-decorator":"FormItem","x-component":"Radio.Group"},labelAlign:{title:$("Label align"),type:"string",default:(o==null||(M=o["x-component-props"])===null||M===void 0?void 0:M.labelAlign)||"left","x-decorator":"FormItem","x-component":"Select",enum:[{label:"{{t('Right')}}",value:"right"},{label:"{{t('Left')}}",value:"left"}],"x-reactions":{dependencies:["layout"],fulfill:{state:{visible:'{{ $deps[0]==="horizontal"}}'}}}},labelWidth:{title:$("Label width"),type:"string",default:(o==null||(n=o["x-component-props"])===null||n===void 0?void 0:n.labelWidth)||120,required:!0,"x-decorator":"FormItem","x-component":"InputNumber","x-component-props":{addonAfter:"px"},"x-validator":[{minimum:50}],"x-reactions":{dependencies:["layout"],fulfill:{state:{visible:'{{ $deps[0]==="horizontal"}}'}}}},labelWrap:{type:"string",title:$("When the Label exceeds the width"),enum:[{label:$("Line break"),value:!0},{label:$("Ellipsis"),value:!1}],default:(o==null||(y=o["x-component-props"])===null||y===void 0?void 0:y.labelWrap)!==!1,"x-decorator":"FormItem","x-component":"Radio.Group","x-reactions":{dependencies:["layout"],fulfill:{state:{visible:'{{ $deps[0]==="horizontal"}}'}}}}}},onSubmit:function(z){var p,b=z.layout,f=z.labelAlign,x=z.labelWidth,m=z.labelWrap,F=o["x-component-props"]||{};F.layout=b,F.labelAlign=f,F.labelWidth=b==="horizontal"?x:null,F.labelWrap=m,o["x-component-props"]=F,L.componentProps.layout=b,L.componentProps.labelAlign=f,L.componentProps.labelWidth=x,L.componentProps.labelWrap=m,R.emit("patch",{schema:(p={},c()(p,"x-uid",o["x-uid"]),c()(p,"x-component-props",o["x-component-props"]),p)}),R.refresh()}})}},93329:function(He,ae,e){"use strict";e.d(ae,{w:function(){return h}});var Z=e(9783),c=e.n(Z),k=e(80844),i=e(96486),g=e.n(i),C=e(67294),A=e(26793),r=e(21143),K=e(62662),v=e(5552),j=e(85893),h=function(n){var y,L,o=(0,k.useField)(),a=(0,r.useDesignable)(),R=a.dn,E=(0,A.$)(),$=E.t,Q=(0,k.useFieldSchema)(),z=(0,r.useCollection_deprecated)(),p=z.getField,b=(0,r.useCollectionManager_deprecated)(),f=b.getCollectionJoinField,x=(y=n==null?void 0:n.fieldSchema)!==null&&y!==void 0?y:Q,m=p(x.name)||f(x["x-collection-field"]),F=(0,r.useSortFields)(m==null?void 0:m.target),I=((L=x["x-component-props"])===null||L===void 0||(L=L.service)===null||L===void 0||(L=L.params)===null||L===void 0?void 0:L.sort)||[],d=I==null?void 0:I.map(function(u){return u!=null&&u.startsWith("-")?{field:u.substring(1),direction:"desc"}:{field:u,direction:"asc"}});return(0,j.jsx)(K.j0,{title:$("Set default sorting rules"),components:{ArrayItems:v.ArrayItems},schema:{type:"object",title:$("Set default sorting rules"),properties:{sort:{type:"array",default:d,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:F,required:!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:$("ASC"),value:"asc"},{label:$("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:$("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function(l){var S,H,O=l.sort,N=O.map(function(t){return t.direction==="desc"?"-".concat(t.field):t.field});o.query(new RegExp("[0-9]+\\.".concat(x.name,"$"))).forEach(function(t){g().set(t,"componentProps.service.params.sort",N)}),g().set(x,"x-component-props.service.params.sort",N),n==null||(S=n.onSubmitCallBack)===null||S===void 0||S.call(n,N),R.emit("patch",{schema:(H={},c()(H,"x-uid",x["x-uid"]),c()(H,"x-component-props",x["x-component-props"]),H)})}})}},64016:function(He,ae,e){"use strict";e.d(ae,{G:function(){return $}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(5552),C=e(67294),A=e(26793),r=e(98755),K=e(99986),v=e(69962),j=e(36800),h=e(99941),M=e(28144),n=e(93323),y=e(96365),L=e(94516),o=e(15195),a=e(23461),R=e(62662),E=e(85893);function $(Q){var z=Q.componentName,p=Q.collectionName,b=Q.resourceName,f=Q.needRender,x=Q.useTranslationHooks,m=x===void 0?A.$:x,F=m(),I=F.t,d=(0,K.B)(),u=d.getCollection,l=(0,R.DD)(),S=l.dn,H=l.setVisible,O=l.template,N=l.fieldSchema,t=(0,y.e)(),B=(0,r.L)(),X=(0,a.rE)(),V=X.dn,U=(0,o.$t)(),D=U.saveAsTemplate,ne=U.copyTemplateSchema,q=(0,v.mg)(),J=q.theme;return!p&&!f?null:O?(0,E.jsx)(R.r2,{title:"Convert reference to duplicate",onClick:i()(c()().mark(function Y(){var P,w;return c()().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,ne(O);case 2:P=G.sent,w=V.removeWithoutEmit(),V.insertAfterEnd(P,{onSuccess:function(){return i()(c()().mark(function xe(){return c()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,B.request({url:"/uiSchemas:remove/".concat(w["x-uid"])});case 2:case"end":return Ee.stop()}},xe)}))()}});case 5:case"end":return G.stop()}},Y)})),children:I("Convert reference to duplicate")}):(0,E.jsx)(R.r2,{title:"Save as template",onClick:i()(c()().mark(function Y(){var P,w,ie,G,le;return c()().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return H(!1),P=p&&u(p),_e.next=4,(0,j.D)(I("Save as template"),function(){return(0,E.jsx)(g.FormLayout,{layout:"vertical",children:(0,E.jsx)(n.n,{components:{Input:M.II,FormItem:h.x},schema:{type:"object",properties:{name:{title:I("Template name"),required:!0,default:P?"".concat(t((P==null?void 0:P.title)||(P==null?void 0:P.name)),"_").concat(I(z)):I(z),"x-decorator":"FormItem","x-component":"Input"}}}})})},J).open({});case 4:return w=_e.sent,ie=(0,L.Pl)({t:I,api:B,refresh:S.refresh.bind(S),current:N.parent}),ie.loadAPIClientEvents(),_e.next=9,D({collectionName:p,resourceName:b,componentName:z,dataSourceKey:P.dataSource,name:w.name,uid:N["x-uid"]});case 9:G=_e.sent,le=G.key,ie.removeWithoutEmit(N),ie.insertBeforeEnd({type:"void","x-component":"BlockTemplate","x-component-props":{templateId:le}});case 13:case"end":return _e.stop()}},Y)})),children:I("Save as template")})}},22691:function(He,ae,e){"use strict";e.d(ae,{qj:function(){return f},Vc:function(){return x},b1:function(){return m}});var Z=e(97857),c=e.n(Z),k=e(19632),i=e.n(k),g=e(15009),C=e.n(g),A=e(99289),r=e.n(A),K=e(96486),v=e.n(K),j=e(67294),h=e(26793),M=e(62954),n=e(38632),y=e(76690),L=e(67527),o=e(84157),a=e(6145),R=function(){var I=(0,a.useCollectionManager_deprecated)(),d=I.getChildrenCollections;return function(u,l){if(u===l)return!0;var S=d(l);return S==null?void 0:S.some(function(H){return H.name===u})}},E=function(I,d,u,l){var S=d.schema,H=d.depth,O=d.maxDepth,N=d.loadChildren,t=d.compile,B=I.map(function(X){var V=!l(X.target,u==null?void 0:u.target);return X.target?H>=O?null:{key:X.name,value:X.name,label:t(X.title),disabled:V,isLeaf:!0,field:X,depth:H,loadChildren:N}:{key:X.name,value:X.name,label:t(X.title),disabled:V,isLeaf:!0,depth:H}}).filter(Boolean);return B},$=function(I){var d=I.schema,u=I.maxDepth,l=u===void 0?3:u,S=I.contextCollectionName,H=I.collectionField,O=(0,h.$)(),N=O.t,t=(0,M.eJW)(),B=(0,M.aJ2)(),X=R(),V=function D(ne){var q;if(!((q=ne.field)!==null&&q!==void 0&&q.target))return new Promise(function(Y){(0,o.error)("Must be set field target"),ne.children=[],Y(void 0)});var J=ne.field.target;return new Promise(function(Y){setTimeout(function(){var P=E(B(J).filter(function(w){var ie=["hasOne","hasMany","belongsTo","belongsToMany","belongsToArray"].includes(w.type);return ie}),{schema:d,depth:ne.depth+1,maxDepth:l,loadChildren:D,compile:t},H,X)||[];if(P.length===0){ne.disabled=!0,ne.children=[],Y();return}ne.children=P,Y()},5)})},U=(0,j.useMemo)(function(){return{label:N("Table selected records"),value:"$context",key:"$context",isLeaf:!1,field:{target:S},depth:0,loadChildren:V}},[d==null?void 0:d["x-component"]]);return U},Q=e(96808),z=e(43932),p=e(54885),b=e(85893),f=function(I){var d=I.value,u=I.onChange,l=I.renderSchemaComponent,S=I.style,H=I.schema,O=I.className,N=I.contextCollectionName,t=I.collectionField,B=I.shouldChange,X=I.form,V=I.record,U=I.returnScope,D=U===void 0?v().identity:U,ne=I.targetFieldSchema,q=I.noDisabled,J=I.hideVariableButton,Y=(0,L.J)(),P=Y.name,w=(0,M.ymE)(),ie=(0,n.s)(),G=ie.operator,le=ie.schema,xe=le===void 0?t==null?void 0:t.uiSchema:le,_e=(0,p.Y)({collectionField:t,form:X,record:V,operator:G,uiSchema:xe,targetFieldSchema:ne,noDisabled:q}),Ee=$({schema:H,maxDepth:2,contextCollectionName:N,collectionField:t}),ze=m({collectionField:t,uiSchema:xe,targetFieldSchema:ne,blockCollectionName:P}),Se=ze.compatOldVariables;N&&_e.every(function(me){return me.value!==Ee.value})&&_e.push(Ee);var se=(0,j.useCallback)(function(me,pe){if(!B)return u(me);setTimeout(r()(C()().mark(function ee(){return C()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,B(me,pe);case 2:if(!ge.sent){ge.next=4;break}u(me);case 4:case"end":return ge.stop()}},ee)})))},[u,B]);return(0,b.jsx)(M._wD.Input,{className:O,value:d,onChange:se,scope:D(Se(v().isEmpty(w)?_e:w,{value:d})),style:S,changeOnSelect:!0,hideVariableButton:J,children:(0,b.jsx)(l,{value:d,onChange:u})})},x=function(I){var d=I.collectionField,u=I.variables,l=I.localVariables,S=I.getAllCollectionsInheritChain,H=d?S(d.target):[];return function(){var O=r()(C()().mark(function N(t,B){var X,V;return C()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(!(v().isString(t)&&t.includes("$nRole"))){D.next=2;break}return D.abrupt("return",!0);case 2:if(!(!(0,y.cG)(t)||!u||!d)){D.next=4;break}return D.abrupt("return",!0);case 4:if(d.interface!=="json"){D.next=6;break}return D.abrupt("return",!0);case 6:if(X=B[B.length-1],!(X&&v().isEmpty(X.children)&&!X.loadChildren)){D.next=9;break}return D.abrupt("return",!0);case 9:return D.next=11,u.getCollectionField(t,l);case 11:if(V=D.sent,d){D.next=14;break}return D.abrupt("return",!1);case 14:if(!["o2o","o2m","oho"].includes(V==null?void 0:V.interface)){D.next=16;break}return D.abrupt("return",!1);case 16:if(!(d.target&&V!==null&&V!==void 0&&V.target&&!H.includes(V==null?void 0:V.target))){D.next=18;break}return D.abrupt("return",!1);case 18:return D.abrupt("return",!0);case 19:case"end":return D.stop()}},N)}));return function(N,t){return O.apply(this,arguments)}}()};function m(F){var I=F.uiSchema,d=F.collectionField,u=F.noDisabled,l=F.targetFieldSchema,S=F.blockCollectionName,H=(0,h.$)(),O=H.t,N=(0,z.A)({maxDepth:1,uiSchema:I,collectionField:d,noDisabled:u,targetFieldSchema:l}),t=N.currentUserSettings,B=(0,Q.ad)({schema:I,collectionField:d,noDisabled:u,targetFieldSchema:l}),X=B.currentRecordSettings,V=(0,j.useCallback)(function(U,D){var ne=D.value;if(!(0,y.cG)(ne))return U;U=i()(U);var q={value:"$system",key:"$system",label:O("System variables"),isLeaf:!1,children:[{value:"now",key:"now",label:O("Current time"),isLeaf:!0,depth:1}],depth:0},J={value:"currentTime",label:O("Current time"),children:null};if(ne.includes("$system")&&U.push(q),ne.includes("".concat(S,"."))){var Y=U.find(function(le){return le.value==="$nForm"||le.value==="$nRecord"});Y&&(Y.value=S)}if(ne.includes("$form")){var P=U.find(function(le){return le.value==="$nForm"});P&&(P.value="$form")}if(ne.includes("currentUser")){var w=U.find(function(le){return le.value==="$user"});w?w.value="currentUser":U.unshift(c()(c()({},t),{},{value:"currentUser"}))}if(ne.includes("currentRecord")){var ie=U.find(function(le){return le.value==="$nRecord"});ie?ie.value="currentRecord":U.unshift(c()(c()({},X),{},{value:"currentRecord"}))}if(ne.includes("currentTime")&&U.push(J),ne.includes("$date")){var G=U.find(function(le){return le.value==="$nDate"});G&&(G.value="$date")}return U},[S]);return{compatOldVariables:V}}},33495:function(He,ae,e){"use strict";e.d(ae,{I:function(){return k}});var Z=e(98755),c=e(25661),k=function(){var g,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},A=C.noDisabled,r=(0,Z.L)(),K=(0,c.zI)({name:"$nToken",title:"API token",noDisabled:A,noChildren:!0});return{apiTokenSettings:K,apiTokenCtx:(g=r.auth)===null||g===void 0?void 0:g.token}}},25661:function(He,ae,e){"use strict";e.d(ae,{Nx:function(){return r},rB:function(){return v},zI:function(){return j}});var Z=e(83062),c=e(67294),k=e(35746),i=e(62954),g=e(21995),C=e(85893),A=c.createContext(null),r=function(n){return(0,C.jsx)(A.Provider,{value:n,children:n.children})},K=function(n,y){var L=y.collectionField,o=y.uiSchema,a=y.depth,R=y.maxDepth,E=y.noDisabled,$=y.loadChildren,Q=y.compile,z=y.isDisabled,p=y.targetFieldSchema,b=y.getCollectionField,f=y.deprecated,x=n.map(function(m){return!m.target||m.target==="chinaRegions"?{key:m.name,value:m.name,label:Q(m.title),disabled:f||(E?!1:z({option:m,collectionField:L,uiSchema:o,targetFieldSchema:p,getCollectionField:b})),isLeaf:!0,depth:a}:a>=R?null:{key:m.name,value:m.name,label:Q(m.title),isLeaf:!1,field:m,depth:a,disabled:f||(E?!1:z({option:m,collectionField:L,uiSchema:o,targetFieldSchema:p,getCollectionField:b})),loadChildren:$}}).filter(Boolean);return x},v=function(n,y){return y?(0,C.jsx)(Z.Z,{placement:"left",title:y,zIndex:9999,children:(0,C.jsx)("span",{style:{position:"relative",display:"inline-block",marginLeft:-14,paddingLeft:14,marginRight:-80,paddingRight:80,zIndex:1},children:n})}):n},j=function(n){var y=n.collectionField,L=n.uiSchema,o=n.targetFieldSchema,a=n.maxDepth,R=a===void 0?3:a,E=n.name,$=n.title,Q=n.collectionName,z=n.noChildren,p=z===void 0?!1:z,b=n.noDisabled,f=b===void 0?!0:b,x=n.dataSource,m=n.returnFields,F=m===void 0?function(B){return B}:m,I=n.deprecated,d=n.tooltip,u=(0,i.eJW)(),l=(0,i.aJ2)(),S=(0,c.useContext)(A)||{},H=S.isDisabled,O=(0,k.d9)(),N=function B(X){var V;if(!((V=X.field)!==null&&V!==void 0&&V.target))return Promise.resolve(void 0);var U=X.field.target;return new Promise(function(D){setTimeout(function(){var ne=!0,q=(K(F(l(U,x,ne),X),{collectionField:y,uiSchema:L,targetFieldSchema:o,depth:X.depth+1,maxDepth:R,noDisabled:f,loadChildren:B,compile:u,isDisabled:H||h,getCollectionField:O.getCollectionField,deprecated:I})||[]).sort(function(J,Y){return J.isLeaf&&!Y.isLeaf?-1:!J.isLeaf&&Y.isLeaf?1:0}).sort(function(J,Y){return J.disabled&&!Y.disabled?1:!J.disabled&&Y.disabled?-1:0});if(q.length===0){X.disabled=!0,X.isLeaf=!0,D();return}X.children=q,D()},5)})},t=(0,c.useMemo)(function(){return{label:v($,d),value:E,key:E,isLeaf:p,field:{target:Q},depth:0,loadChildren:N,children:[],disabled:!!I,deprecated:I}},[L==null?void 0:L["x-component"]]);return t};function h(M){var n,y=M.option,L=M.collectionField,o=M.uiSchema,a=M.targetFieldSchema,R=M.getCollectionField;if(!o||!L)return!0;if(L.interface==="json")return!1;if(!L.target&&["hasMany","belongsToMany"].includes(y.type))return!0;if(!L.target&&["hasOne","belongsTo"].includes(y.type)||y.target&&(0,g.k)({collectionField:L,fieldSchema:a,getCollectionField:R}))return!1;if(["hasOne","belongsTo"].includes(L.type)&&["hasMany","belongsToMany"].includes(y.type))return!0;if(["hasOne","belongsTo"].includes(L.type)&&["hasOne","belongsTo"].includes(y.type)||["hasMany","belongsToMany"].includes(L.type)&&y.target)return!1;if(["input","markdown","richText","textarea","username"].includes(L.interface)){var E;return!["string","number"].includes((E=y.schema)===null||E===void 0?void 0:E.type)}return L.interface&&y.interface?L.interface!==y.interface:(o==null?void 0:o["x-component"])!==((n=y.schema)===null||n===void 0?void 0:n["x-component"])}},67527:function(He,ae,e){"use strict";e.d(ae,{J:function(){return c}});var Z=e(87180),c=function(){var i=(0,Z.zh)(),g=(i==null?void 0:i.collection)||(i==null?void 0:i.resource);return{name:g}}},25801:function(He,ae,e){"use strict";e.d(ae,{FB:function(){return A},Ld:function(){return r},ds:function(){return C}});var Z=e(67294),c=e(26793),k=e(29250),i=e(68435),g=e(61341),C=function(v){var j=v.operator,h=v.schema,M=v.noDisabled,n=(0,c.$)(),y=n.t,L=(j==null?void 0:j.value)||"",o=M?!1:!["DatePicker","DatePicker.RangePicker"].includes(h==null?void 0:h["x-component"]),a=[{key:"now",value:"now",label:y("Current time"),disabled:M?!1:(h==null?void 0:h["x-component"])!=="DatePicker"||L==="$dateBetween"},{key:"yesterday",value:"yesterday",label:y("Yesterday"),disabled:o},{key:"today",value:"today",label:y("Today"),disabled:o},{key:"tomorrow",value:"tomorrow",label:y("Tomorrow"),disabled:o},{key:"lastIsoWeek",value:"lastIsoWeek",label:y("Last week"),disabled:o},{key:"thisIsoWeek",value:"thisIsoWeek",label:y("This week"),disabled:o},{key:"nextIsoWeek",value:"nextIsoWeek",label:y("Next week"),disabled:o},{key:"lastMonth",value:"lastMonth",label:y("Last month"),disabled:o},{key:"thisMonth",value:"thisMonth",label:y("This month"),disabled:o},{key:"nextMonth",value:"nextMonth",label:y("Next month"),disabled:o},{key:"lastQuarter",value:"lastQuarter",label:y("Last quarter"),disabled:o},{key:"thisQuarter",value:"thisQuarter",label:y("This quarter"),disabled:o},{key:"nextQuarter",value:"nextQuarter",label:y("Next quarter"),disabled:o},{key:"lastYear",value:"lastYear",label:y("Last year"),disabled:o},{key:"thisYear",value:"thisYear",label:y("This year"),disabled:o},{key:"nextYear",value:"nextYear",label:y("Next year"),disabled:o},{key:"last7Days",value:"last7Days",label:y("Last 7 days"),disabled:o},{key:"next7Days",value:"next7Days",label:y("Next 7 days"),disabled:o},{key:"last30Days",value:"last30Days",label:y("Last 30 days"),disabled:o},{key:"next30Days",value:"next30Days",label:y("Next 30 days"),disabled:o},{key:"last90Days",value:"last90Days",label:y("Last 90 days"),disabled:o},{key:"next90Days",value:"next90Days",label:y("Next 90 days"),disabled:o}],R=(0,Z.useMemo)(function(){return{label:y("Date variables"),value:"$nDate",key:"$nDate",disabled:a.every(function(E){return E.disabled}),children:a}},[h==null?void 0:h["x-component"]]);return h?R:null},A=function(){var v=(0,i.P1)(),j=v.utc,h=j===void 0?!0:j,M=(0,Z.useMemo)(function(){return(0,g.SE)({shouldBeString:!0,utc:h})},[h]);return{datetimeCtx:M}},r=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=v.operator,h=v.schema,M=v.noDisabled,n=v.targetFieldSchema,y=(0,c.$)(),L=y.t,o=(0,k.Q)(),a=o.getOperator,R=(0,Z.useMemo)(function(){var Q=(j==null?void 0:j.value)||a(n==null?void 0:n.name)||"",z=M?!1:!["DatePicker.RangePicker"].includes(h==null?void 0:h["x-component"])&&!Q,p=[{key:"now",value:"now",label:L("Current time"),disabled:M?!1:(h==null?void 0:h["x-component"])!=="DatePicker"||Q==="$dateBetween"},{key:"yesterday",value:"yesterday",label:L("Yesterday"),disabled:z},{key:"today",value:"today",label:L("Today"),disabled:z},{key:"tomorrow",value:"tomorrow",label:L("Tomorrow"),disabled:z},{key:"lastIsoWeek",value:"lastIsoWeek",label:L("Last week"),disabled:z},{key:"thisIsoWeek",value:"thisIsoWeek",label:L("This week"),disabled:z},{key:"nextIsoWeek",value:"nextIsoWeek",label:L("Next week"),disabled:z},{key:"lastMonth",value:"lastMonth",label:L("Last month"),disabled:z},{key:"thisMonth",value:"thisMonth",label:L("This month"),disabled:z},{key:"nextMonth",value:"nextMonth",label:L("Next month"),disabled:z},{key:"lastQuarter",value:"lastQuarter",label:L("Last quarter"),disabled:z},{key:"thisQuarter",value:"thisQuarter",label:L("This quarter"),disabled:z},{key:"nextQuarter",value:"nextQuarter",label:L("Next quarter"),disabled:z},{key:"lastYear",value:"lastYear",label:L("Last year"),disabled:z},{key:"thisYear",value:"thisYear",label:L("This year"),disabled:z},{key:"nextYear",value:"nextYear",label:L("Next year"),disabled:z},{key:"last7Days",value:"last7Days",label:L("Last 7 days"),disabled:z},{key:"next7Days",value:"next7Days",label:L("Next 7 days"),disabled:z},{key:"last30Days",value:"last30Days",label:L("Last 30 days"),disabled:z},{key:"next30Days",value:"next30Days",label:L("Next 30 days"),disabled:z},{key:"last90Days",value:"last90Days",label:L("Last 90 days"),disabled:z},{key:"next90Days",value:"next90Days",label:L("Next 90 days"),disabled:z}];return{label:L("Date variables"),value:"$nDate",key:"$nDate",disabled:p.every(function(b){return b.disabled}),children:p}},[h==null?void 0:h["x-component"],n]),E=A(),$=E.datetimeCtx;return{datetimeSettings:R,datetimeCtx:$}}},90499:function(He,ae,e){"use strict";e.d(ae,{DA:function(){return K},bU:function(){return r}});var Z=e(26793),c=e(7340),k=e(94804),i=e(7686),g=e(25661),C=function(j){var h=j.collectionName,M=j.collectionField,n=j.schema,y=j.noDisabled,L=j.targetFieldSchema,o=useTranslation(),a=o.t,R=useBaseVariable({collectionField:M,uiSchema:n,targetFieldSchema:L,maxDepth:4,name:"$nForm",title:a("Current form"),collectionName:h,noDisabled:y,returnFields:function($,Q){return $}});return R},A=function(){var j,h,M=useDataBlockRequestData();if(!((M==null||(j=M.data)===null||j===void 0?void 0:j.length)>1))return(M==null||(h=M.data)===null||h===void 0?void 0:h[0])||(M==null?void 0:M.data)},r=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=j.form,M=(0,c.bz)(),n=M.form,y=(0,i.P)(),L=y.isVariableParsedInOtherContext,o=h||n;return{currentFormCtx:o==null?void 0:o.values,shouldDisplayCurrentForm:o&&!o.readPretty&&!L}},K=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=j.collectionField,M=j.schema,n=j.noDisabled,y=j.targetFieldSchema,L=j.form,o=r({form:L}),a=o.currentFormCtx,R=o.shouldDisplayCurrentForm,E=(0,Z.$)(),$=E.t,Q=(0,c.bz)(),z=Q.collectionName,p=(0,k.wl)(),b=(0,g.zI)({collectionField:h,uiSchema:M,targetFieldSchema:y,maxDepth:4,name:"$nForm",title:$("Current form"),collectionName:z,noDisabled:n,dataSource:p==null?void 0:p.key,returnFields:function(x,m){return x}});return{currentFormSettings:b,currentFormCtx:a,shouldDisplayCurrentForm:R}}},23971:function(He,ae,e){"use strict";e.d(ae,{jd:function(){return r},wM:function(){return A}});var Z=e(26793),c=e(94804),k=e(53285),i=e(29132),g=e(25661),C=function(v){var j=v.currentCollection,h=v.collectionField,M=v.schema,n=v.noDisabled,y=v.targetFieldSchema,L=useTranslation(),o=L.t,a=useBaseVariable({collectionField:h,uiSchema:M,targetFieldSchema:y,maxDepth:4,name:"$iteration",title:o("Current object"),collectionName:j,noDisabled:n,returnFields:function(E,$){return E}});return a},A=function(){var v=(0,k.P5)()||{},j=v.isInSubForm,h=v.isInSubTable,M=(0,i.eI)(),n=M.formValue,y=M.collection;return{shouldDisplayCurrentObject:j||h,currentObjectCtx:n,collectionOfCurrentObject:y}},r=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=v.collectionField,h=v.schema,M=v.noDisabled,n=v.targetFieldSchema,y=(0,c.Kx)(),L=(0,Z.$)(),o=L.t,a=A(),R=a.shouldDisplayCurrentObject,E=a.currentObjectCtx,$=a.collectionOfCurrentObject,Q=(0,g.zI)({collectionField:j,uiSchema:h,targetFieldSchema:n,maxDepth:4,name:"$iteration",title:o("Current object"),collectionName:($==null?void 0:$.name)||(y==null?void 0:y.name),noDisabled:M,dataSource:y==null?void 0:y.dataSource,returnFields:function(p,b){return p}});return{shouldDisplayCurrentObject:R,currentObjectCtx:E,currentObjectSettings:Q}}},43139:function(He,ae,e){"use strict";e.d(ae,{$:function(){return g},Z:function(){return C}});var Z=e(26793),c=e(53285),k=e(29132),i=e(25661),g=function(){var r=(0,k.eI)(),K=r.parent,v=K||{},j=v.value,h=v.collection,M=(0,c.P5)()||{},n=M.isInSubForm,y=M.isInSubTable;return{shouldDisplayParentObject:(n||y)&&!!h,parentObjectCtx:j,collectionName:h==null?void 0:h.name,dataSource:h==null?void 0:h.dataSource}},C=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=r.collectionField,v=r.schema,j=r.noDisabled,h=r.targetFieldSchema,M=(0,Z.$)(),n=M.t,y=g(),L=y.shouldDisplayParentObject,o=y.parentObjectCtx,a=y.collectionName,R=y.dataSource,E=(0,i.zI)({collectionField:K,uiSchema:v,targetFieldSchema:h,maxDepth:4,name:"$nParentIteration",title:n("Parent object"),collectionName:a,noDisabled:j,dataSource:R,returnFields:function(Q,z){return Q}});return{parentObjectSettings:E,shouldDisplayParentObject:L,parentObjectCtx:o,collectionName:a}}},56062:function(He,ae,e){"use strict";e.d(ae,{h:function(){return g},s:function(){return i}});var Z=e(7686),c=e(73691),k=e(25661),i=function(){var A=(0,c.ec)()||{},r=A.value,K=A.title,v=A.collection,j=(0,Z.P)(),h=j.isVariableParsedInOtherContext;return{parentPopupRecordCtx:r,shouldDisplayParentPopupRecord:!!r&&!h,collectionName:v==null?void 0:v.name,dataSource:v==null?void 0:v.dataSource,defaultValue:void 0,title:K}},g=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=i(),K=r.parentPopupRecordCtx,v=r.shouldDisplayParentPopupRecord,j=r.collectionName,h=r.dataSource,M=r.defaultValue,n=r.title,y=(0,k.zI)({collectionField:A.collectionField,uiSchema:A.schema,name:"$nParentPopupRecord",title:n,collectionName:j,noDisabled:A.noDisabled,targetFieldSchema:A.targetFieldSchema,dataSource:h});return{settings:y,parentPopupRecordCtx:K,shouldDisplayParentPopupRecord:v,collectionName:j,dataSource:h,defaultValue:M}}},11764:function(He,ae,e){"use strict";e.d(ae,{Ix:function(){return r},SU:function(){return K}});var Z=e(26793),c=e(94804),k=e(49834),i=e(19271),g=e(7686),C=e(25661),A=function(j){var h=useTranslation(),M=h.t,n=useBaseVariable({collectionField:j.collectionField,uiSchema:j.schema,name:"$nParentRecord",title:M("Parent record"),collectionName:j.collectionName,noDisabled:j.noDisabled,targetFieldSchema:j.targetFieldSchema});return n},r=function(){var j,h,M=(0,k.oV)(),n=(0,i.lb)()||{},y=n.name,L=n.dataSource,o=(0,c.Kx)(),a=(0,g.P)()||{},R=a.isInSubForm,E=a.isInSubTable,$=y?L:o==null?void 0:o.dataSource,Q=(0,c.Hy)();return{currentParentRecordCtx:(M==null||(j=M.parentRecord)===null||j===void 0?void 0:j.data)||(M==null?void 0:M.data),shouldDisplayCurrentParentRecord:!!(M!=null&&(h=M.parentRecord)!==null&&h!==void 0&&h.data)&&!R&&!E&&Q,collectionName:y||(o==null?void 0:o.name),dataSource:$}},K=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=(0,Z.$)(),M=h.t,n=r(),y=n.currentParentRecordCtx,L=n.shouldDisplayCurrentParentRecord,o=n.collectionName,a=n.dataSource,R=(0,C.zI)({collectionField:j.collectionField,uiSchema:j.schema,name:"$nParentRecord",title:M("Parent record"),collectionName:o,noDisabled:j.noDisabled,targetFieldSchema:j.targetFieldSchema,dataSource:a});return{currentParentRecordSettings:R,currentParentRecordCtx:y,shouldDisplayCurrentParentRecord:L,collectionName:o,dataSource:a}}},57519:function(He,ae,e){"use strict";e.d(ae,{A:function(){return g},g:function(){return i}});var Z=e(7686),c=e(73691),k=e(25661),i=function(){var A=(0,c.Sw)()||{},r=A.value,K=A.title,v=A.collection,j=(0,Z.P)(),h=j.isVariableParsedInOtherContext;return{popupRecordCtx:r,shouldDisplayPopupRecord:!!r&&!h,collectionName:v==null?void 0:v.name,dataSource:v==null?void 0:v.dataSource,defaultValue:void 0,title:K}},g=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=i(),K=r.popupRecordCtx,v=r.shouldDisplayPopupRecord,j=r.collectionName,h=r.dataSource,M=r.defaultValue,n=r.title,y=(0,k.zI)({collectionField:A.collectionField,uiSchema:A.schema,name:"$nPopupRecord",title:n,collectionName:j,noDisabled:A.noDisabled,targetFieldSchema:A.targetFieldSchema,dataSource:h});return{settings:y,popupRecordCtx:K,shouldDisplayPopupRecord:v,collectionName:j,dataSource:h,defaultValue:M}}},96808:function(He,ae,e){"use strict";e.d(ae,{ER:function(){return h},W6:function(){return n},ad:function(){return y},ov:function(){return j}});var Z=e(96486),c=e.n(Z),k=e(67294),i=e(26793),g=e(75148),C=e(7340),A=e(94804),r=e(25661),K=e(85893),v=(0,k.createContext)(null),j=function(o){var a=(0,k.useMemo)(function(){return{recordData:o.recordData,collectionName:o.collectionName}},[o.recordData,o.collectionName]);return(0,K.jsxs)(v.Provider,{value:a,children:[" ",o.children," "]})},h=function(){return(0,k.useContext)(v)},M=function(o){var a=useTranslation(),R=a.t,E=useBaseVariable({collectionField:o.collectionField,uiSchema:o.schema,name:"$nRecord",title:R("Current record"),collectionName:o.collectionName,noDisabled:o.noDisabled,targetFieldSchema:o.targetFieldSchema});return E},n=function(){var o=h(),a=(0,g.VG)()||{},R=a.name,E=(0,A.Kx)(),$=(0,A.nE)(),Q=(0,C.bz)(),z=Q.formRecord,p=Q.collectionName,b=z!=null&&z.data?p:E==null?void 0:E.name;return b=(o==null?void 0:o.collectionName)||b,{currentRecordCtx:(o==null?void 0:o.recordData)||(z==null?void 0:z.data)||$,shouldDisplayCurrentRecord:!c().isEmpty(c().omit($,["__collectionName","__parent"]))||!!(z!=null&&z.data),collectionName:b,blockType:R,dataSource:E==null?void 0:E.dataSource}},y=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=(0,i.$)(),R=a.t,E=n(),$=E.currentRecordCtx,Q=E.shouldDisplayCurrentRecord,z=E.collectionName,p=E.blockType,b=E.dataSource,f=(0,r.zI)({collectionField:o.collectionField,uiSchema:o.schema,name:"$nRecord",title:R("Current record"),collectionName:z,noDisabled:o.noDisabled,targetFieldSchema:o.targetFieldSchema,deprecated:p==="form",tooltip:p==="form"?R('This variable has been deprecated and can be replaced with "Current form"'):"",dataSource:b});return{currentRecordSettings:f,currentRecordCtx:$,shouldDisplayCurrentRecord:Q,collectionName:z}}},45621:function(He,ae,e){"use strict";e.d(ae,{K:function(){return g},b:function(){return i}});var Z=e(26793),c=e(12174),k=e(25661),i=function(A){var r=A.collectionField,K=A.uiSchema,v=A.noDisabled,j=A.targetFieldSchema,h=A.maxDepth,M=h===void 0?0:h,n=(0,Z.$)(),y=n.t,L=(0,k.zI)({collectionField:r,uiSchema:K,maxDepth:M,name:"$nRole",title:y("Current role"),collectionName:"roles",noDisabled:v,targetFieldSchema:j,noChildren:!0});return L},g=function(){var A,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=r.collectionField,v=r.uiSchema,j=r.noDisabled,h=r.targetFieldSchema,M=r.maxDepth,n=M===void 0?0:M,y=(0,Z.$)(),L=y.t,o=(0,c.LY)(),a=(0,k.zI)({collectionField:K,uiSchema:v,maxDepth:n,name:"$nRole",title:L("Current role"),collectionName:"roles",noDisabled:j,targetFieldSchema:h,noChildren:!0});return{currentRoleSettings:a,currentRoleCtx:(A=o.auth)===null||A===void 0?void 0:A.role}}},95604:function(He,ae,e){"use strict";e.d(ae,{F5:function(){return p},MD:function(){return z},Uz:function(){return $},n9:function(){return Q}});var Z=e(15009),c=e.n(Z),k=e(97857),i=e.n(k),g=e(9783),C=e.n(g),A=e(99289),r=e.n(A),K=e(5574),v=e.n(K),j=e(85667),h=e(96486),M=e.n(h),n=e(80129),y=e.n(n),L=e(67294),o=e(26793),a=e(85782),R=e(7686),E=e(25661),$=function(f){f.startsWith("?")&&(f=f.slice(1));var x=y().parse(f);return x||{}},Q=function(f){return Object.keys(f).map(function(x){return{label:x,value:x,key:x,isLeaf:!0}})},z=function(f){var x=(0,L.useState)(function(){return(0,j.observable)({})}),m=v()(x,1),F=m[0];return(0,L.useMemo)(function(){var I=$(f);return(0,j.untracked)(function(){Object.assign(F,I),Object.keys(F).forEach(function(d){I[d]===void 0&&delete F[d]})}),F},[F,f])},p=function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},x="$nURLSearchParams",m=(0,o.$)(),F=m.t,I=(0,a.HU)(),d=(0,R.P)(),u=d.isVariableParsedInOtherContext,l=z(I),S=(0,L.useMemo)(function(){return M().isEmpty(l)},[l]),H=(0,L.useMemo)(function(){return{label:(0,E.rB)(F("URL search params"),S?F("The value of this variable is derived from the query string of the page URL. This variable can only be used normally when the page has a query string."):""),value:x,key:x,isLeaf:!1,disabled:S,loadChildren:function(){var O=r()(c()().mark(function t(B,X){var V;return c()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:V=X?C()({},X,void 0):{},B.children=Q(i()(i()({},V),l));case 2:case"end":return D.stop()}},t)}));function N(t,B){return O.apply(this,arguments)}return N}()}},[S,F,l]);return{name:x,urlSearchParamsSettings:H,urlSearchParamsCtx:l,defaultValue:void 0,shouldDisplay:!u}}},43932:function(He,ae,e){"use strict";e.d(ae,{A:function(){return C},K:function(){return g}});var Z=e(26793),c=e(57638),k=e(6438),i=e(25661),g=function(r){var K=r.collectionField,v=r.uiSchema,j=r.noDisabled,h=r.targetFieldSchema,M=r.maxDepth,n=M===void 0?3:M,y=(0,Z.$)(),L=y.t,o=(0,i.zI)({collectionField:K,uiSchema:v,maxDepth:n,name:"$user",title:L("Current user"),collectionName:"users",dataSource:c.ym,noDisabled:j,targetFieldSchema:h});return o},C=function(){var r,K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},v=K.collectionField,j=K.uiSchema,h=K.noDisabled,M=K.targetFieldSchema,n=K.maxDepth,y=n===void 0?3:n,L=(0,Z.$)(),o=L.t,a=(0,k.OP)(),R=(0,i.zI)({collectionField:v,uiSchema:j,maxDepth:y,name:"$user",title:o("Current user"),collectionName:"users",noDisabled:h,targetFieldSchema:M,dataSource:c.ym});return{currentUserSettings:R,currentUserCtx:a==null||(r=a.data)===null||r===void 0?void 0:r.data}}},54885:function(He,ae,e){"use strict";e.d(ae,{Y:function(){return y}});var Z=e(67294),c=e(21143),k=e(33495),i=e(25801),g=e(90499),C=e(23971),A=e(43139),r=e(56062),K=e(11764),v=e(57519),j=e(96808),h=e(45621),M=e(95604),n=e(43932),y=function(o){var a,R=o.collectionField,E=o.form,$=o.uiSchema,Q=o.operator,z=o.noDisabled,p=o.targetFieldSchema,b=o.record,f=(0,c.useVariables)()||{},x=f.filterVariables,m=x===void 0?function(){return!0}:x,F=b==null||(a=b.__parent)===null||a===void 0?void 0:a.__collectionName,I=(0,n.A)({maxDepth:3,uiSchema:$,collectionField:R,noDisabled:z,targetFieldSchema:p}),d=I.currentUserSettings,u=(0,h.K)({uiSchema:$,collectionField:R,noDisabled:z,targetFieldSchema:p}),l=u.currentRoleSettings,S=(0,k.I)({noDisabled:z}),H=S.apiTokenSettings,O=(0,i.Ld)({operator:Q,schema:$,noDisabled:!0,targetFieldSchema:p}),N=O.datetimeSettings,t=(0,g.DA)({schema:$,collectionField:R,noDisabled:z,targetFieldSchema:p,form:E}),B=t.currentFormSettings,X=t.shouldDisplayCurrentForm,V=(0,C.jd)({collectionField:R,schema:$,noDisabled:z,targetFieldSchema:p}),U=V.currentObjectSettings,D=V.shouldDisplayCurrentObject,ne=(0,A.Z)({collectionField:R,schema:$,noDisabled:z,targetFieldSchema:p}),q=ne.parentObjectSettings,J=ne.shouldDisplayParentObject,Y=(0,j.ad)({schema:$,collectionField:R,noDisabled:z,targetFieldSchema:p}),P=Y.currentRecordSettings,w=Y.shouldDisplayCurrentRecord,ie=(0,v.A)({schema:$,collectionField:R,noDisabled:z,targetFieldSchema:p}),G=ie.settings,le=ie.shouldDisplayPopupRecord,xe=(0,r.h)({schema:$,collectionField:R,noDisabled:z,targetFieldSchema:p}),_e=xe.settings,Ee=xe.shouldDisplayParentPopupRecord,ze=(0,K.SU)({schema:$,collectionName:F,collectionField:R,noDisabled:z,targetFieldSchema:p}),Se=ze.currentParentRecordSettings,se=ze.shouldDisplayCurrentParentRecord,me=(0,M.F5)(),pe=me.urlSearchParamsSettings,ee=me.shouldDisplay;return(0,Z.useMemo)(function(){return[d,l,H,N,X&&B,D&&U,J&&q,w&&P,se&&Se,le&&G,Ee&&_e,ee&&pe].filter(Boolean).filter(m)},[d,l,H,N,X,B,D,U,J,q,w,P,se,Se,le,G,ee,pe])}},82041:function(He,ae,e){"use strict";e.d(ae,{Nx:function(){return c.Nx},qj:function(){return K.qj},rB:function(){return c.rB},Vc:function(){return K.Vc},Uz:function(){return g.Uz},n9:function(){return g.n9},IG:function(){return Z.I},zI:function(){return c.zI},b1:function(){return K.b1},KR:function(){return i.K},AO:function(){return C.A},ds:function(){return k.ds},Ld:function(){return k.Ld},FB:function(){return k.FB},AJ:function(){return r.A},gG:function(){return r.g},bs:function(){return i.b},MD:function(){return g.MD},F5:function(){return g.F5},KD:function(){return C.K},Y5:function(){return A.Y}});var Z=e(33495),c=e(25661),k=e(25801),i=e(45621),g=e(95604),C=e(43932),A=e(54885),r=e(57519),K=e(22691)},42121:function(He,ae,e){"use strict";e.d(ae,{X:function(){return k}});var Z=e(97857),c=e.n(Z);function k(i){return i.map(function(g){return c()(c()({},g),{},{value:g.name,key:g.name,label:g.title,disabled:g.disabled,children:g.children?k(g.children):void 0})})}},69054:function(He,ae,e){"use strict";e.d(ae,{z:function(){return i}});var Z=e(80844),c=e(67294),k=e(6145),i=function(){var C=(0,Z.useFieldSchema)(),A=(0,k.useCollection_deprecated)(),r=A.name,K=(0,c.useCallback)(function(v,j){if(!C)return"designer-".concat(v,"-").concat(j);var h=C["x-component"],M=typeof h=="string"?h:(h==null?void 0:h.displayName)||(h==null?void 0:h.name),n=C["x-designer"]?"-".concat(C["x-designer"]):"",y=C["x-settings"]?"-".concat(C["x-settings"]):"",L=C["x-collection-field"]?"-".concat(C["x-collection-field"]):"",o=r?"-".concat(r):"";return j=j?"-".concat(j):"","designer-".concat(v,"-").concat(M).concat(n).concat(y).concat(o).concat(L).concat(j)},[C,r]);return{getAriaLabel:K}}},29124:function(He,ae,e){"use strict";e.d(ae,{SF:function(){return h},TU:function(){return M},yT:function(){return j}});var Z=e(80844),c=e(67294),k=e(7340),i=e(35746),g=e(58837),C=e(13511),A=e(62662),r=e(88773),K=e(85893),v=c.createContext(null),j=function(L){var o=(0,c.useMemo)(function(){return{isAllowToSetDefaultValue:L.isAllowToSetDefaultValue}},[L.isAllowToSetDefaultValue]);return(0,K.jsx)(v.Provider,{value:o,children:L.children})},h=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=L.form,a=L.fieldSchema,R=L.collectionField,E=(0,C.fp)(),$=(0,i.d9)(),Q=(0,g.Kx)(),z=(0,k.bz)(),p=z.form,b=(0,Z.useFieldSchema)(),f=(0,k.th)(),x=f.type,m=(0,c.useContext)(v)||{},F=m.isAllowToSetDefaultValue,I=F===void 0?n:F,d={isAllowToSetDefaultValue:(0,c.useCallback)(function(u){var l=Q.getField(b.name)||$.getCollectionField(b["x-collection-field"]);return I({collectionField:R||l,getInterface:E==null?void 0:E.collectionFieldInterfaceManager.getFieldInterface.bind(E==null?void 0:E.collectionFieldInterfaceManager),form:o||p,formBlockType:x,fieldSchema:a||b,isSubTableColumn:u})},[$,Q,R,E==null?void 0:E.collectionFieldInterfaceManager,a,o,b,p,I,x])};return d},M=["o2o","oho","obo","o2m","attachment","expression","point","lineString","circle","polygon","sequence","formula"];function n(y){var L,o=y.collectionField,a=y.getInterface,R=y.formBlockType,E=y.form,$=y.fieldSchema,Q=y.isSubTableColumn;return Q?!M.includes(o==null?void 0:o.interface)&&!(0,A.Mq)(o,a):!o||o.target&&(L=$["x-component-props"])!==null&&L!==void 0&&L.mode&&!["Picker","Select"].includes($["x-component-props"].mode)||R!=="create"?!1:!(E!=null&&E.readPretty)&&!(0,r.V)($)&&!M.includes(o==null?void 0:o.interface)&&!(0,A.Mq)(o,a)}},94920:function(He,ae,e){"use strict";e.d(ae,{K:function(){return i}});var Z=e(80844),c=e(6145),k=e(81230);function i(){var g,C,A=(0,Z.useField)(),r=(0,c.useCollectionManager_deprecated)(),K=r.getCollectionField,v=(0,k.z9)(),j=v.fieldSchema,h=(0,Z.useFieldSchema)(),M=j||h,n=M["x-collection-field"]?K(M["x-collection-field"]):null,y=(n==null?void 0:n.uiSchema)||M,L=((g=y["x-component-props"])===null||g===void 0?void 0:g.multiple)===!0,o=A==null||(C=A.componentProps)===null||C===void 0?void 0:C.mode;return function(){return!A.readPretty&&M["x-component"]!=="TableField"&&L&&o!=="SubTable"}}},90297:function(He,ae,e){"use strict";e.d(ae,{Mj:function(){return V},Nx:function(){return Eo.Nx},yT:function(){return d.yT},aN:function(){return k.aN},j0:function(){return p.j},Ar:function(){return u.A},U4:function(){return U},Qh:function(){return i.Qh},qf:function(){return p.q},_E:function(){return g._},ns:function(){return i.ns},FE:function(){return C.F},HF:function(){return A.H},ON:function(){return i.ON},yu:function(){return r.y},y5:function(){return i.y5},Nn:function(){return K.N},Z5:function(){return i.Z5},cM:function(){return i.cM},L3:function(){return i.L3},vC:function(){return i.vC},r2:function(){return i.r2},bw:function(){return i.bw},JM:function(){return u.J},lc:function(){return i.lc},B0:function(){return i.j0},wH:function(){return $},zM:function(){return ea},D3:function(){return i.D3},Rh:function(){return i.Rh},qx:function(){return i.qx},cK:function(){return F},Qf:function(){return i.Qf},wL:function(){return Q.w},m$:function(){return i.m$},hj:function(){return i.hj},Gk:function(){return z.G},Mf:function(){return k.Mf},dI:function(){return k.dI},qj:function(){return Eo.qj},ZL:function(){return i.ZL},PO:function(){return i.PO},os:function(){return i.os},rB:function(){return Eo.rB},Vc:function(){return Eo.Vc},Uz:function(){return Eo.Uz},n9:function(){return Eo.n9},TU:function(){return d.TU},VZ:function(){return ie.V},Mq:function(){return i.Mq},ut:function(){return i.ut},rf:function(){return b.r},aP:function(){return f.a},ob:function(){return Z.o},IG:function(){return Eo.IG},zI:function(){return Eo.zI},IO:function(){return Z.I},b1:function(){return Eo.b1},KR:function(){return Eo.KR},AO:function(){return Eo.AO},dD:function(){return i.dD},ds:function(){return Eo.ds},Ld:function(){return Eo.Ld},FB:function(){return Eo.FB},zf:function(){return I.z},SF:function(){return d.SF},_Y:function(){return w},AJ:function(){return Eo.AJ},gG:function(){return Eo.gG},bs:function(){return Eo.bs},DD:function(){return i.DD},F1:function(){return c.F},MD:function(){return Eo.MD},F5:function(){return Eo.F5},KD:function(){return Eo.KD},Y5:function(){return Eo.Y5}});var Z=e(77517),c=e(94004),k=e(50679),i=e(62662),g=e(25750),C=e(13845),A=e(43319),r=e(89018),K=e(21774),v=e(97857),j=e.n(v),h=e(9783),M=e.n(h),n=e(80844),y=e(34041),L=e(67294),o=e(26793),a=e(21143),R=e(85893),E=function(Ge){var at=Ge.unitConversionType,bt=(0,n.useForm)(),It=(0,o.$)(),Ot=It.t;return(0,R.jsxs)(y.default,{defaultValue:at||"*",style:{width:160},onChange:function(Fn){bt.setValuesIn("unitConversionType",Fn)},children:[(0,R.jsx)(y.default.Option,{value:"*",children:Ot("Multiply by")}),(0,R.jsx)(y.default.Option,{value:"/",children:Ot("Divide by")})]})},$=function(Ge){var at,bt=Ge.fieldSchema,It=(0,n.useField)(),Ot=(0,a.useDesignable)(),En=Ot.dn,Fn=(0,o.$)(),Kn=Fn.t,er=(0,a.useCollectionManager_deprecated)(),On=er.getCollectionJoinField,tr=On(bt==null?void 0:bt["x-collection-field"])||{},Cr=bt["x-component-props"]||{},Ur=Cr.formatStyle,Pr=Cr.unitConversion,Or=Cr.unitConversionType,Nr=Cr.separator,Lr=Cr.step,zr=Cr.addonBefore,no=Cr.addonAfter,fo=(tr==null||(at=tr.uiSchema)===null||at===void 0?void 0:at["x-component-props"])||{},Oo=fo.step;return(0,R.jsx)(i.j0,{title:Kn("Format"),schema:{type:"object",properties:{formatStyle:{type:"string",default:Ur||"normal",enum:[{value:"normal",label:Kn("Normal")},{value:"scientifix",label:Kn("Scientifix notation")}],"x-decorator":"FormItem","x-component":"Select",title:"{{t('Style')}}"},unitConversion:{type:"number","x-decorator":"FormItem","x-component":"InputNumber",title:"{{t('Unit conversion')}}",default:Pr,"x-component-props":{style:{width:"100%"},addonBefore:(0,R.jsx)(E,{unitConversionType:Or})}},separator:{type:"string",default:Nr||"0,0.00",enum:[{value:"0,0.00",label:Kn("100,000.00")},{value:"0.0,00",label:Kn("100.000,00")},{value:"0 0,00",label:Kn("100 000.00")},{value:"0.00",label:Kn("100000.00")},{value:"0 0 0,00",label:Kn("1 000 000,00")}],"x-decorator":"FormItem","x-component":"Select",title:"{{t('Separator')}}"},step:{type:"string",title:'{{t("Precision")}}',"x-component":"Select","x-decorator":"FormItem",default:Lr||Oo||"1",enum:[{value:"1",label:"1"},{value:"0.1",label:"1.0"},{value:"0.01",label:"1.00"},{value:"0.001",label:"1.000"},{value:"0.0001",label:"1.0000"},{value:"0.00001",label:"1.00000"},{value:"0.000001",label:"1.000000"},{value:"0.0000001",label:"1.0000000"},{value:"0.00000001",label:"1.00000000"}]},addonBefore:{type:"string",title:'{{t("Prefix")}}',"x-component":"Input","x-decorator":"FormItem",default:zr},addonAfter:{type:"string",title:'{{t("Suffix")}}',"x-component":"Input","x-decorator":"FormItem",default:no}}},onSubmit:function(Bo){var Lo=M()({},"x-uid",bt["x-uid"]);Lo["x-component-props"]=bt["x-component-props"]||{},bt["x-component-props"]=j()(j()({},bt["x-component-props"]||{}),Bo),Lo["x-component-props"]=bt["x-component-props"],It.componentProps=bt["x-component-props"];var xo=It.path.entire.split(".");xo.pop();var Ao=xo.join(".");It.query("".concat(Ao,".*[0:].").concat(bt.name)).forEach(function(ta){ta.props.name===bt.name&&ta.setComponentProps(j()({},Bo))}),En.emit("patch",{schema:Lo}),En.refresh()}})},Q=e(93329),z=e(64016),p=e(28561),b=e(51549),f=e(26338),x=e(67174),m=e(94516);function F(){var Tn=(0,n.useField)(),Ge=(0,n.useFieldSchema)(),at=(0,o.$)(),bt=at.t,It=(0,m.ng)(),Ot=It.dn,En=(0,x.Si)(),Fn=En.service,Kn=[{value:"string",label:bt("String template")},{value:"handlebars",label:bt("Handlebars")}];return(0,R.jsx)(i.Qf,{title:bt("Template engine"),options:Kn,value:Tn.decoratorProps.engine||"string",onChange:function(On){var tr;Ge["x-decorator-props"]=Ge["x-decorator-props"]||{},Ge["x-decorator-props"].engine=On,Tn.decoratorProps.engine=On,Ot.emit("patch",{schema:(tr={},M()(tr,"x-uid",Ge["x-uid"]),M()(tr,"x-decorator-props",Ge["x-decorator-props"]),tr)}),Ot.refresh()}},"render-template")}var I=e(69054),d=e(29124),u=e(81432),l=e(15009),S=e.n(l),H=e(99289),O=e.n(H),N=e(3321),t=e(98755),B=e(12174),X=e(47646);function V(){var Tn=(0,o.$)(),Ge=Tn.t,at=(0,n.useFieldSchema)(),bt=(0,t.L)(),It=bt.resource("uiSchemas.roles",at["x-uid"]),Ot=N.Z.useApp(),En=Ot.message,Fn=(0,m.ng)(),Kn=Fn.dn,er=(0,B.QT)({url:"/uiSchemas/".concat(at["x-uid"],"/roles:list")},{manual:!0}),On=er.refresh,tr=er.data,Cr=(0,X.TR)(),Ur=Cr.refresh;(0,L.useEffect)(function(){if(at["x-decorator"]!=="ACLActionProvider"&&at["x-decorator"]!=="CustomRequestAction.Decorator"&&at["x-component"]!=="WorkbenchAction"){var Or;Kn.emit("patch",{schema:(Or={},M()(Or,"x-uid",at["x-uid"]),M()(Or,"x-decorator","ACLActionProvider"),Or)}),Kn.refresh()}},[]);var Pr=(0,R.jsx)(i.Qh,{scope:Ge,title:Ge("Access control"),schema:{type:"object",properties:{roles:{type:"array",title:Ge("Roles"),"x-decorator":"FormItem","x-decorator-props":{tooltip:Ge("If not set, all roles can see this action")},"x-component":"RemoteSelect","x-component-props":{multiple:!0,objectValue:!0,dataSource:"main",service:{resource:"roles"},manual:!1,fieldNames:{label:"title",value:"name"}}}}},initialValues:{roles:tr==null?void 0:tr.data},beforeOpen:function(){return!tr&&On()},onSubmit:function(){var Or=O()(S()().mark(function Nr(Lr){var zr;return S()().wrap(function(fo){for(;;)switch(fo.prev=fo.next){case 0:return zr=Lr.roles,fo.next=3,It.set({values:zr.map(function(Oo){return Oo.name})});case 3:return fo.next=5,Ur();case 5:return fo.abrupt("return",En.success(Ge("Saved successfully")));case 6:case"end":return fo.stop()}},Nr)}));return function(Nr){return Or.apply(this,arguments)}}()});return Pr}var U={name:"accessControl",Component:V},D=e(84157),ne=e(64910),q=e(44256),J=e(76690),Y=["$user","$date","$nDate","$nRole"],P=function(){var Ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},at=Ge.exclude,bt=at===void 0?Y:at,It=(0,ne.Kp)(),Ot=(0,ne.OQ)(),En=(0,L.useCallback)(function(Kn){var er=Ot==null?void 0:Ot.getVariable(Kn);return er||(er=It.find(function(On){return On.name===Kn})),er},[It,Ot]),Fn=(0,L.useCallback)(function(){var Kn=O()(S()().mark(function er(On){var tr,Cr;return S()().wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return tr=(0,D.flatten)(On,{breakOn:function(Nr){var Lr=Nr.key;return Lr.startsWith("$")&&Lr!=="$and"&&Lr!=="$or"},transformValue:function(Nr){if(!(0,J.cG)(Nr)||bt.includes((0,q.H)(Nr)))return Nr;var Lr=Ot==null?void 0:Ot.parseVariable(Nr,It).then(function(zr){var no=zr.value;return no});return Lr}}),Pr.next=3,Promise.all(Object.keys(tr).map(function(){var Or=O()(S()().mark(function Nr(Lr){return S()().wrap(function(no){for(;;)switch(no.prev=no.next){case 0:return no.next=2,tr[Lr];case 2:return tr[Lr]=no.sent,tr[Lr]===void 0&&delete tr[Lr],no.abrupt("return",tr[Lr]);case 5:case"end":return no.stop()}},Nr)}));return function(Nr){return Or.apply(this,arguments)}}()));case 3:return Cr=(0,D.unflatten)(tr),Pr.abrupt("return",Cr);case 5:case"end":return Pr.stop()}},er)}));return function(er){return Kn.apply(this,arguments)}}(),[bt,It,Ot==null?void 0:Ot.parseVariable]);return{parseFilter:Fn,findVariable:En}},w=P,ie=e(88773),G=e(12444),le=e.n(G),xe=e(72004),_e=e.n(xe),Ee=e(31996),ze=e.n(Ee),Se=e(26037),se=e.n(Se),me=e(31601),pe=e(68091),ee=e(91410),ue=e(6145),ge=e(55642),Ie=e(90810),Ae=e(39270),Le=new ee.F({name:"actionSettings:addChild",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"linkageRules",Component:i.lc,useComponentProps:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name,bt=(0,pe.Po)(),It=bt.linkageRulesProps;return j()(j()({},It),{},{collectionName:at})}},{name:"openMode",Component:Ie.HA,useComponentProps:function(){var Ge=(0,Ae.B)(),at=Ge.hideOpenMode;return{openMode:!at,openSize:!at}}},{name:"enableChildCollections",Component:i.L3,useVisible:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name,bt=(0,ue.useCollectionManager_deprecated)(),It=bt.getChildrenCollections,Ot=(0,L.useMemo)(function(){return It(at).length>0},[It,at]);return Ot},useComponentProps:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name;return{collectionName:at}}},{name:"delete",type:"remove"}]}),Te=new ee.F({name:"actionSettings:addNew",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"openMode",Component:Ie.HA,useComponentProps:function(){var Ge=(0,Ae.B)(),at=Ge.hideOpenMode;return{openMode:!at,openSize:!at}}},{name:"enableChildCollections",Component:i.L3,useComponentProps:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name;return{collectionName:at}},useVisible:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name,bt=(0,ue.useCollectionManager_deprecated)(),It=bt.getChildrenCollections,Ot=(0,L.useMemo)(function(){return It(at).length>0},[It,at]);return Ot}},{name:"delete",sort:100,Component:ge.xZ,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.removeButtonProps;return at}}]}),je=new ee.F({name:"actionSettings:addRecord",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"openMode",Component:Ie.HA,useComponentProps:function(){var Ge=(0,Ae.B)(),at=Ge.hideOpenMode;return{openMode:!at,openSize:!at}}},{name:"delete",sort:100,Component:ge.xZ,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.removeButtonProps;return at}}]}),Pe=new ee.F({name:"actionSettings:bulkDelete",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"secondConFirm",Component:ge.y0},{name:"refreshDataBlockRequest",Component:ge.x1,useComponentProps:function(){return{isPopupAction:!1}}},{name:"remove",sort:100,Component:ge.xZ,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.removeButtonProps;return at}}]}),fe=new ee.F({name:"actionSettings:delete",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"linkageRules",Component:i.lc,useComponentProps:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name,bt=(0,pe.Po)(),It=bt.linkageRulesProps;return j()(j()({},It),{},{collectionName:at})}},{name:"secondConFirm",Component:ge.y0},{name:"refreshDataBlockRequest",Component:ge.x1,useComponentProps:function(){return{isPopupAction:!1}}},{name:"delete",type:"remove"}]}),re=new ee.F({name:"actionSettings:disassociate",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"linkageRules",Component:i.lc,useComponentProps:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name,bt=(0,pe.Po)(),It=bt.linkageRulesProps;return j()(j()({},It),{},{collectionName:at})}},{name:"refreshDataBlockRequest",Component:ge.x1,useComponentProps:function(){return{isPopupAction:!1}}},{name:"secondConFirm",Component:ge.y0},{name:"delete",type:"remove"}]}),T=new ee.F({name:"actionSettings:associate",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"linkageRules",Component:i.lc,useComponentProps:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name,bt=(0,pe.Po)(),It=bt.linkageRulesProps;return j()(j()({},It),{},{collectionName:at})}},{name:"refreshDataBlockRequest",Component:ge.x1,useComponentProps:function(){return{isPopupAction:!1}}},{name:"secondConFirm",Component:ge.y0},{name:"delete",type:"remove"}]});function ce(){var Tn,Ge,at=(0,n.useField)(),bt=(0,n.useFieldSchema)(),It=(0,a.useDesignable)(),Ot=It.dn,En=(0,o.$)(),Fn=En.t,Kn=bt["x-component-props"]||{},er=Kn.titleExpand,On=Kn.titleCollapse,tr=Kn.iconExpand,Cr=Kn.iconCollapse;return(0,R.jsx)(i.j0,{title:Fn("Edit button"),schema:{type:"object",title:Fn("Edit button"),properties:{titleExpand:{"x-decorator":"FormItem","x-component":"Input",title:"".concat(Fn("Button title")," - ").concat(Fn("Expand all")),default:er},titleCollapse:{"x-decorator":"FormItem","x-component":"Input",title:"".concat(Fn("Button title")," - ").concat(Fn("Collapse all")),default:On},iconExpand:{"x-decorator":"FormItem","x-component":"IconPicker",title:"".concat(Fn("Button icon")," - ").concat(Fn("Expand all")),default:tr},iconCollapse:{"x-decorator":"FormItem","x-component":"IconPicker",title:"".concat(Fn("Button icon")," - ").concat(Fn("Collapse all")),default:Cr},type:{"x-decorator":"FormItem","x-component":"Radio.Group",title:Fn("Button background color"),default:bt!=null&&(Tn=bt["x-component-props"])!==null&&Tn!==void 0&&Tn.danger?"danger":(bt==null||(Ge=bt["x-component-props"])===null||Ge===void 0?void 0:Ge.type)==="primary"?"primary":"default",enum:[{value:"default",label:'{{t("Default")}}'},{value:"primary",label:'{{t("Highlight")}}'},{value:"danger",label:'{{t("Danger red")}}'}]}}},onSubmit:function(Pr){var Or=Pr.titleExpand,Nr=Pr.titleCollapse,Lr=Pr.iconExpand,zr=Pr.iconCollapse,no=Pr.type;bt.title=Fn("Expand/Collapse"),at.title=Fn("Expand/Collapse"),at.componentProps.icon=Lr,at.componentProps.danger=no==="danger",at.componentProps.type=no,bt["x-component-props"]=j()(j()({},bt["x-component-props"]||{}),{},{titleExpand:Or,titleCollapse:Nr,iconExpand:Lr,iconCollapse:zr,type:no,danger:no==="danger"}),Ot.emit("patch",{schema:{"x-uid":bt["x-uid"],"x-component-props":bt["x-component-props"],title:bt.title}}),Ot.refresh()}})}var be=new ee.F({name:"actionSettings:expendable",items:[{name:"editButton",Component:ce,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"remove",sort:100,Component:ge.xZ,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.removeButtonProps;return at}}]}),oe=e(77041),Re=e(84577),Ze=new ee.F({name:"actionSettings:filter",items:[{name:"FilterableFields",Component:oe.HN},{name:"divider",type:"divider"},{name:"EditButton",type:"modal",useComponentProps:function(){var Ge,at=(0,n.useField)(),bt=(0,n.useFieldSchema)(),It=(0,Re.ng)(),Ot=It.dn,En=(0,o.$)(),Fn=En.t;return{title:Fn("Edit button"),schema:{type:"object",title:Fn("Edit button"),properties:{title:{"x-decorator":"FormItem","x-component":"Input",title:Fn("Button title"),default:bt.title,"x-component-props":{}},icon:{"x-decorator":"FormItem","x-component":"IconPicker",title:Fn("Button icon"),default:bt==null||(Ge=bt["x-component-props"])===null||Ge===void 0?void 0:Ge.icon,"x-component-props":{}}}},onSubmit:function(er){var On,tr=er.title,Cr=er.icon;bt.title=tr,at.title=tr,at.componentProps.icon=Cr,bt["x-component-props"]=bt["x-component-props"]||{},bt["x-component-props"].icon=Cr,Ot.emit("patch",{schema:(On={},M()(On,"x-uid",bt["x-uid"]),M()(On,"title",tr),M()(On,"x-component-props",j()({},bt["x-component-props"])),On)}),Ot.refresh()}}}},{name:"divider2",type:"divider"},{name:"delete",type:"remove",componentProps:{removeParentsIfNoChildren:!0,breakRemoveOn:function(Ge){return Ge["x-component"]==="Space"||Ge["x-component"]==="ActionBar"}}}]}),We=e(29245),tt=new ee.F({name:"actionSettings:refresh",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"secondConFirm",Component:ge.y0},{name:"delete",sort:100,Component:ge.xZ,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.removeButtonProps;return at}}]}),St=new ee.F({name:"actionSettings:saveRecord",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"secondConfirmation",Component:ge.y0},{name:"assignFieldValues",Component:ge.eY},{name:"skipRequiredValidation",Component:ge.co},{name:"afterSuccessfulSubmission",Component:ge.$b},{name:"refreshDataBlockRequest",Component:ge.x1,useComponentProps:function(){return{isPopupAction:!1}}},{name:"delete",sort:100,Component:ge.xZ,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.removeButtonProps;return at}}]}),Tt=e(85711),lt=new ee.F({name:"actionSettings:updateSubmit",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"linkageRules",Component:i.lc,useComponentProps:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name,bt=(0,pe.Po)(),It=bt.linkageRulesProps;return j()(j()({},It),{},{collectionName:at})},useVisible:function(){var Ge=(0,n.useFieldSchema)();return!Ge.parent["x-initializer"].includes("bulkEditForm")}},{name:"secondConfirmation",Component:ge.y0},{name:"assignFieldValues",Component:ge.eY,useVisible:function(){var Ge=(0,n.useFieldSchema)();return!Ge.parent["x-initializer"].includes("bulkEditForm")}},{name:"skipRequiredValidation",Component:ge.co,useVisible:function(){var Ge=(0,n.useFieldSchema)();return!Ge.parent["x-initializer"].includes("bulkEditForm")}},{name:"afterSuccessfulSubmission",Component:ge.$b},{name:"refreshDataBlockRequest",Component:ge.x1,useComponentProps:function(){return{isPopupAction:!1}}},{name:"remove",sort:100,Component:ge.xZ,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.removeButtonProps;return at}}]}),ut=new ee.F({name:"actionSettings:submit",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"secondConfirmation",Component:ge.y0},{name:"saveMode",Component:Tt.J,useVisible:function(){var Ge,at=(0,n.useFieldSchema)();return at["x-action"]==="submit"&&(0,pe.h6)((Ge=at.parent)===null||Ge===void 0?void 0:Ge["x-initializer"],"createForm:configureActions")}},{name:"remove",sort:100,Component:ge.xZ,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.removeButtonProps;return at}}]}),nt=new ee.F({name:"actionSettings:updateRecord",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"linkageRules",Component:i.lc,useComponentProps:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name,bt=(0,pe.Po)(),It=bt.linkageRulesProps;return j()(j()({},It),{},{collectionName:at})}},{name:"secondConFirm",Component:ge.y0},{name:"assignFieldValues",Component:ge.eY},{name:"afterSuccessfulSubmission",Component:ge.$b},{name:"refreshDataBlockRequest",Component:ge.x1,useComponentProps:function(){return{isPopupAction:!1}}},{name:"delete",sort:100,Component:ge.xZ,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.removeButtonProps;return at}}]}),Je=e(94804),hn=e(73691),mn=new ee.F({name:"actionSettings:popup",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"linkageRules",Component:i.lc,useComponentProps:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name,bt=(0,pe.Po)(),It=bt.linkageRulesProps;return j()(j()({},It),{},{collectionName:at})},useVisible:function(){var Ge=(0,hn.Sw)()||{},at=Ge.collection,bt=(0,Je.Kx)();return!at||(at==null?void 0:at.name)===(bt==null?void 0:bt.name)}},{name:"openMode",Component:Ie.HA,useComponentProps:function(){var Ge=(0,Ae.B)(),at=Ge.hideOpenMode;return{openMode:!at,openSize:!at}}},U,{name:"remove",sort:100,Component:ge.xZ,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.removeButtonProps;return at}}]}),vn=new ee.F({name:"actionSettings:edit",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"linkageRules",Component:i.lc,useComponentProps:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name,bt=(0,pe.Po)(),It=bt.linkageRulesProps;return j()(j()({},It),{},{collectionName:at})}},{name:"openMode",Component:Ie.HA,useComponentProps:function(){var Ge=(0,Ae.B)(),at=Ge.hideOpenMode;return{openMode:!at,openSize:!at}}},{name:"delete",type:"remove"}]}),an=new ee.F({name:"actionSettings:view",items:[{name:"editButton",Component:ge.C1,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.buttonEditorProps;return at}},{name:"linkageRules",Component:i.lc,useComponentProps:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name,bt=(0,pe.Po)(),It=bt.linkageRulesProps;return j()(j()({},It),{},{collectionName:at})}},{name:"openMode",Component:Ie.HA,useComponentProps:function(){var Ge=(0,Ae.B)(),at=Ge.hideOpenMode;return{openMode:!at,openSize:!at}}},{name:"remove",sort:100,Component:ge.xZ,useComponentProps:function(){var Ge=(0,pe.Po)(),at=Ge.removeButtonProps;return at}}]}),fn=e(5552),cn=e(35964),_n=e(7340),zt=e(62954),xn=e(23461),Qt=e(4277),Et=[{name:"title",Component:g._},{name:"setTheBlockHeight",Component:p.q},{name:"linkageRules",Component:i.lc,useComponentProps:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name;return{collectionName:at,readPretty:!0}}},{name:"dataScope",Component:A.H,useComponentProps:function(){var Ge,at=(0,ue.useCollection_deprecated)(),bt=at.name,It=(0,n.useFieldSchema)(),Ot=(0,_n.bz)(),En=Ot.form,Fn=(0,n.useField)(),Kn=(0,zt.ngQ)(),er=Kn.dn,On=(0,cn.nT)(),tr=On.service;return{collectionName:bt,defaultFilter:(It==null||(Ge=It["x-decorator-props"])===null||Ge===void 0||(Ge=Ge.params)===null||Ge===void 0?void 0:Ge.filter)||{},form:En,noRecord:!0,onSubmit:function(Ur){var Pr,Or=Ur.filter;Or=(0,zt.WmO)(Or);var Nr=Fn.decoratorProps.params||{};Nr.filter=Or,Fn.decoratorProps.params=Nr,It["x-decorator-props"].params=Nr,er.emit("patch",{schema:(Pr={},M()(Pr,"x-uid",It["x-uid"]),M()(Pr,"x-decorator-props",It["x-decorator-props"]),Pr)}),tr.params[0].page=1}}}},{name:"sortingRules",type:"modal",useComponentProps:function(){var Ge,at=(0,ue.useCollection_deprecated)(),bt=at.name,It=(0,o.$)(),Ot=It.t,En=(0,n.useFieldSchema)(),Fn=(0,n.useField)(),Kn=(0,cn.nT)(),er=Kn.service,On=(0,zt.ngQ)(),tr=On.dn,Cr=(0,ue.useSortFields)(bt),Ur=(En==null||(Ge=En["x-decorator-props"])===null||Ge===void 0||(Ge=Ge.params)===null||Ge===void 0?void 0:Ge.sort)||[],Pr=Ur==null?void 0:Ur.map(function(Or){return Or.startsWith("-")?{field:Or.substring(1),direction:"desc"}:{field:Or,direction:"asc"}});return{title:Ot("Set default sorting rules"),components:{ArrayItems:fn.ArrayItems},schema:{type:"object",title:Ot("Set default sorting rules"),properties:{sort:{type:"array",default:Pr,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:Cr,required:!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:Ot("ASC"),value:"asc"},{label:Ot("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:Ot("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function(Nr){var Lr,zr,no=Nr.sort,fo=no.map(function(Vo){return Vo.direction==="desc"?"-".concat(Vo.field):Vo.field}),Oo=Fn.decoratorProps.params||{};Oo.sort=fo,Fn.decoratorProps.params=Oo,En["x-decorator-props"].params=Oo,tr.emit("patch",{schema:(Lr={},M()(Lr,"x-uid",En["x-uid"]),M()(Lr,"x-decorator-props",En["x-decorator-props"]),Lr)}),er.run(j()(j()({},(zr=er.params)===null||zr===void 0?void 0:zr[0]),{},{sort:fo}))}}}},Qt.wq,{name:"template",Component:z.G,useComponentProps:function(){var Ge,at,bt=(0,ue.useCollection_deprecated)(),It=bt.name,Ot=(0,n.useFieldSchema)(),En=(0,xn.rE)(),Fn=En.componentNamePrefix,Kn=(Ot==null||(Ge=Ot["x-decorator-props"])===null||Ge===void 0?void 0:Ge.resource)||(Ot==null||(at=Ot["x-decorator-props"])===null||at===void 0?void 0:at.association);return{componentName:"".concat(Fn,"Details"),collectionName:It,resourceName:Kn}}},{name:"setBlockLayout",Component:u.J},{name:"divider",type:"divider"},{name:"remove",type:"remove",componentProps:{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}],en=new ee.F({name:"blockSettings:multiDataDetails",items:Et}),Rn=new ee.F({name:"blockSettings:detailsWithPagination",items:Et}),An=e(58837),Jn=[{name:"title",Component:g._},{name:"setTheBlockHeight",Component:p.q},{name:"linkageRules",Component:i.lc,useComponentProps:function(){var Ge=(0,An.Kx)(),at=Ge.name;return{collectionName:at,readPretty:!0}}},{name:"formItemTemplate",Component:i.vC,useComponentProps:function(){var Ge,at,bt=(0,An.Kx)(),It=bt.name,Ot=(0,n.useFieldSchema)(),En=(0,xn.rE)(),Fn=En.componentNamePrefix,Kn=(Ot==null||(Ge=Ot["x-decorator-props"])===null||Ge===void 0?void 0:Ge.resource)||(Ot==null||(at=Ot["x-decorator-props"])===null||at===void 0?void 0:at.association);return{insertAdjacentPosition:"beforeEnd",componentName:"".concat(Fn,"ReadPrettyFormItem"),collectionName:It,resourceName:Kn}}},{name:"setBlockLayout",Component:u.J},{name:"divider",type:"divider"},{name:"remove",type:"remove",componentProps:{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}],Zn=new ee.F({name:"blockSettings:singleDataDetails",items:Jn}),rr=new ee.F({name:"blockSettings:details",items:Jn}),mr=e(19298),Er=e(35441),Ft=e(29760),ct=e(96486),Mt=e.n(ct),kt=e(43759),Rt=e(89265),_t=new ee.F({name:"blockSettings:gridCard",items:[{name:"setTheBlockHeight",Component:p.q},{name:"SetTheCountOfColumnsDisplayedInARow",Component:Rt.X},{name:"SetTheDataScope",Component:A.H,useComponentProps:function(){var Ge,at=(0,ue.useCollection_deprecated)(),bt=at.name,It=(0,n.useFieldSchema)(),Ot=(0,_n.bz)(),En=Ot.form,Fn=(0,n.useField)(),Kn=(0,zt.ngQ)(),er=Kn.dn;return{collectionName:bt,defaultFilter:(It==null||(Ge=It["x-decorator-props"])===null||Ge===void 0||(Ge=Ge.params)===null||Ge===void 0?void 0:Ge.filter)||{},form:En,onSubmit:function(tr){var Cr,Ur=tr.filter;Ur=(0,zt.WmO)(Ur),Mt().set(It,"x-decorator-props.params.filter",Ur),Fn.decoratorProps.params=j()({},It["x-decorator-props"].params),er.emit("patch",{schema:(Cr={},M()(Cr,"x-uid",It["x-uid"]),M()(Cr,"x-decorator-props",It["x-decorator-props"]),Cr)})}}}},{name:"SetDefaultSortingRules",type:"modal",useComponentProps:function(){var Ge,at=(0,ue.useCollection_deprecated)(),bt=at.name,It=(0,o.$)(),Ot=It.t,En=(0,n.useFieldSchema)(),Fn=(0,n.useField)(),Kn=(0,zt.ngQ)(),er=Kn.dn,On=(0,ue.useSortFields)(bt),tr=(En==null||(Ge=En["x-decorator-props"])===null||Ge===void 0||(Ge=Ge.params)===null||Ge===void 0?void 0:Ge.sort)||[],Cr=tr==null?void 0:tr.map(function(Ur){return Ur.startsWith("-")?{field:Ur.substring(1),direction:"desc"}:{field:Ur,direction:"asc"}});return{title:Ot("Set default sorting rules"),components:{ArrayItems:fn.ArrayItems},schema:{type:"object",title:Ot("Set default sorting rules"),properties:{sort:{type:"array",default:Cr,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:On,required:!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:Ot("ASC"),value:"asc"},{label:Ot("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:Ot("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function(Pr){var Or,Nr=Pr.sort,Lr=Nr.map(function(zr){return zr.direction==="desc"?"-".concat(zr.field):zr.field});Mt().set(En,"x-decorator-props.params.sort",Lr),Fn.decoratorProps.params=j()({},En["x-decorator-props"].params),er.emit("patch",{schema:(Or={},M()(Or,"x-uid",En["x-uid"]),M()(Or,"x-decorator-props",En["x-decorator-props"]),Or)})}}}},Qt.wq,{name:"RecordsPerPage",type:"select",useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useFieldSchema)(),Ot=(0,n.useField)(),En=(0,zt.ngQ)(),Fn=En.dn;return{title:bt("Records per page"),value:((Ge=Ot.decoratorProps)===null||Ge===void 0||(Ge=Ge.params)===null||Ge===void 0?void 0:Ge.pageSize)||20,options:kt.Wv.map(function(Kn){return{value:Kn}}),onChange:function(er){var On;Mt().set(It,"x-decorator-props.params.pageSize",er),Ot.decoratorProps.params=j()(j()({},It["x-decorator-props"].params),{},{page:1}),Fn.emit("patch",{schema:(On={},M()(On,"x-uid",It["x-uid"]),M()(On,"x-decorator-props",It["x-decorator-props"]),On)})}}}},{name:"ConvertReferenceToDuplicate",Component:z.G,useComponentProps:function(){var Ge,at,bt=(0,ue.useCollection_deprecated)(),It=bt.name,Ot=(0,n.useFieldSchema)(),En=(0,xn.rE)(),Fn=En.componentNamePrefix,Kn=(Ot==null||(Ge=Ot["x-decorator-props"])===null||Ge===void 0?void 0:Ge.resource)||(Ot==null||(at=Ot["x-decorator-props"])===null||at===void 0?void 0:at.association);return{componentName:"".concat(Fn,"GridCard"),collectionName:It,resourceName:Kn}}},{name:"setBlockLayout",Component:u.J},{name:"divider",type:"divider"},{name:"delete",type:"remove",useComponentProps:function(){return{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}}]}),Bt=new ee.F({name:"blockSettings:list",items:[{name:"EditBlockTitle",Component:g._},{name:"setTheBlockHeight",Component:p.q},{name:"SetTheDataScope",Component:A.H,useComponentProps:function(){var Ge,at=(0,ue.useCollection_deprecated)(),bt=at.name,It=(0,n.useFieldSchema)(),Ot=(0,_n.bz)(),En=Ot.form,Fn=(0,n.useField)(),Kn=(0,zt.ngQ)(),er=Kn.dn;return{collectionName:bt,defaultFilter:(It==null||(Ge=It["x-decorator-props"])===null||Ge===void 0||(Ge=Ge.params)===null||Ge===void 0?void 0:Ge.filter)||{},form:En,onSubmit:function(tr){var Cr,Ur=tr.filter;Ur=(0,zt.WmO)(Ur),Mt().set(It,"x-decorator-props.params.filter",Ur),Fn.decoratorProps.params=j()(j()({},It["x-decorator-props"].params),{},{page:1}),er.emit("patch",{schema:(Cr={},M()(Cr,"x-uid",It["x-uid"]),M()(Cr,"x-decorator-props",It["x-decorator-props"]),Cr)})}}}},{name:"SetDefaultSortingRules",type:"modal",useComponentProps:function(){var Ge,at=(0,ue.useCollection_deprecated)(),bt=at.name,It=(0,o.$)(),Ot=It.t,En=(0,n.useFieldSchema)(),Fn=(0,n.useField)(),Kn=(0,zt.ngQ)(),er=Kn.dn,On=(0,ue.useSortFields)(bt),tr=(En==null||(Ge=En["x-decorator-props"])===null||Ge===void 0||(Ge=Ge.params)===null||Ge===void 0?void 0:Ge.sort)||[],Cr=tr==null?void 0:tr.map(function(Ur){return Ur.startsWith("-")?{field:Ur.substring(1),direction:"desc"}:{field:Ur,direction:"asc"}});return{title:Ot("Set default sorting rules"),components:{ArrayItems:fn.ArrayItems},schema:{type:"object",title:Ot("Set default sorting rules"),properties:{sort:{type:"array",default:Cr,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:On,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:Ot("ASC"),value:"asc"},{label:Ot("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:Ot("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function(Pr){var Or,Nr=Pr.sort,Lr=Nr.map(function(zr){return zr.direction==="desc"?"-".concat(zr.field):zr.field});Mt().set(En,"x-decorator-props.params.sort",Lr),Fn.decoratorProps.params=j()(j()({},En["x-decorator-props"].params),{},{page:1}),er.emit("patch",{schema:(Or={},M()(Or,"x-uid",En["x-uid"]),M()(Or,"x-decorator-props",En["x-decorator-props"]),Or)})}}}},Qt.wq,{name:"RecordsPerPage",type:"select",useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useFieldSchema)(),Ot=(0,n.useField)(),En=(0,zt.ngQ)(),Fn=En.dn;return{title:bt("Records per page"),value:((Ge=Ot.decoratorProps)===null||Ge===void 0||(Ge=Ge.params)===null||Ge===void 0?void 0:Ge.pageSize)||20,options:[{label:"5",value:5},{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100},{label:"200",value:200}],onChange:function(er){var On;Mt().set(It,"x-decorator-props.params.pageSize",er),Ot.decoratorProps.params=j()(j()({},It["x-decorator-props"].params),{},{page:1}),Fn.emit("patch",{schema:(On={},M()(On,"x-uid",It["x-uid"]),M()(On,"x-decorator-props",It["x-decorator-props"]),On)})}}}},{name:"ConvertReferenceToDuplicate",Component:z.G,useComponentProps:function(){var Ge,at,bt=(0,ue.useCollection_deprecated)(),It=bt.name,Ot=(0,n.useFieldSchema)(),En=(0,xn.rE)(),Fn=En.componentNamePrefix,Kn=(Ot==null||(Ge=Ot["x-decorator-props"])===null||Ge===void 0?void 0:Ge.resource)||(Ot==null||(at=Ot["x-decorator-props"])===null||at===void 0?void 0:at.association);return{componentName:"".concat(Fn,"List"),collectionName:It,resourceName:Kn}}},{name:"setBlockLayout",Component:u.J},{name:"divider",type:"divider"},{name:"delete",type:"remove",useComponentProps:function(){return{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}}]}),jt=e(67718),Xt=e(23568),Wt=e(96681),Nt=e(18386),nn=new ee.F({name:"blockSettings:filterCollapse",items:[{name:"EditBlockTitle",Component:g._},{name:"setTheBlockHeight",Component:p.q},{name:"ConvertReferenceToDuplicate",Component:z.G,useComponentProps:function(){var Ge,at,bt=(0,ue.useCollection_deprecated)(),It=bt.name,Ot=(0,n.useFieldSchema)(),En=(0,xn.rE)(),Fn=En.componentNamePrefix,Kn=(Ot==null||(Ge=Ot["x-decorator-props"])===null||Ge===void 0?void 0:Ge.resource)||(Ot==null||(at=Ot["x-decorator-props"])===null||at===void 0?void 0:at.association);return{componentName:"".concat(Fn,"FilterCollapse"),collectionName:It,resourceName:Kn}}},{name:"ConnectDataBlocks",Component:C.F,useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t;return{type:Nt.vC.COLLAPSE,emptyDescription:at("No blocks to connect")}}},{name:"divider",type:"divider"},{name:"delete",type:"remove",useComponentProps:function(){return{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}}]}),Zt=e(35746),Cn=new ee.F({name:"fieldSettings:FilterCollapseItem",items:[{name:"decoratorOptions",type:"itemGroup",hideIfNoChildren:!0,useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t;return{title:at("Generic properties")}},useChildren:function(){return[{name:"customTitle",type:"modal",useComponentProps:function(){var at,bt=(0,n.useFieldSchema)(),It=(0,o.$)(),Ot=It.t,En=(0,ue.useCollectionManager_deprecated)(),Fn=En.getCollectionJoinField,Kn=(0,ue.useCollection_deprecated)(),er=Kn.getField,On=er(bt.name)||Fn(bt["x-collection-field"]),tr=(0,zt.ngQ)(),Cr=tr.dn;return{title:Ot("Custom title"),schema:{type:"object",title:Ot("Custom title"),properties:{title:{default:bt==null?void 0:bt.title,description:"".concat(Ot("Original title: ")).concat((On==null||(at=On.uiSchema)===null||at===void 0?void 0:at.title)||(bt==null?void 0:bt.title)),"x-decorator":"FormItem","x-component":"Input","x-component-props":{}}}},onSubmit:function(Pr){var Or=Pr.title;Or&&(bt.title=Or,Cr.emit("patch",{schema:{"x-uid":bt["x-uid"],title:bt.title}})),Cr.refresh()}}}},{name:"defaultCollapse",type:"switch",useComponentProps:function(){var at=(0,n.useFieldSchema)(),bt=(0,n.useField)(),It=(0,o.$)(),Ot=It.t,En=(0,zt.ngQ)(),Fn=En.dn;return{title:Ot("Default collapse"),checked:bt.componentProps.defaultCollapse,onChange:function(er){var On;bt.componentProps.defaultCollapse=er,Mt().set(at,"x-component-props.defaultCollapse",er),Fn.emit("patch",{schema:(On={},M()(On,"x-uid",at["x-uid"]),M()(On,"x-component-props",at["x-component-props"]),On)}),Fn.refresh()}}}},{name:"setTheDataScope",Component:A.H,useComponentProps:function(){var at,bt=(0,n.useFieldSchema)(),It=(0,_n.bz)(),Ot=It.form,En=(0,n.useField)(),Fn=(0,ue.useCollectionManager_deprecated)(),Kn=Fn.getCollectionJoinField,er=(0,ue.useCollection_deprecated)(),On=er.getField,tr=On(bt.name)||Kn(bt["x-collection-field"]),Cr=(0,zt.ngQ)(),Ur=Cr.dn;return{collectionName:tr==null?void 0:tr.target,defaultFilter:(bt==null||(at=bt["x-component-props"])===null||at===void 0||(at=at.params)===null||at===void 0?void 0:at.filter)||{},form:Ot,onSubmit:function(Or){var Nr,Lr,zr=Or.filter;Mt().set(En.componentProps,"params",j()(j()({},(Nr=En.componentProps)===null||Nr===void 0?void 0:Nr.params),{},{filter:zr})),bt["x-component-props"].params=En.componentProps.params,Ur.emit("patch",{schema:(Lr={},M()(Lr,"x-uid",bt["x-uid"]),M()(Lr,"x-component-props",bt["x-component-props"]),Lr)})}}},useVisible:function(){var at=(0,n.useFieldSchema)(),bt=(0,Je.Kx)(),It=bt.getField(at.name);return!!(It!=null&&It.target)}},{name:"setDefaultSortingRules",Component:i.y5,useComponentProps:function(){var at=(0,n.useFieldSchema)(),bt=(0,ue.useCollectionManager_deprecated)(),It=bt.getCollectionJoinField,Ot=(0,ue.useCollection_deprecated)(),En=Ot.getField,Fn=En(at.name)||It(at["x-collection-field"]);return{name:Fn==null?void 0:Fn.target}},useVisible:function(){var at=(0,n.useFieldSchema)(),bt=(0,Je.Kx)(),It=bt.getField(at.name);return!!(It!=null&&It.target)}},{name:"titleField",type:"select",useComponentProps:function(){var at,bt=(0,n.useFieldSchema)(),It=(0,o.$)(),Ot=It.t,En=(0,ue.useCollectionManager_deprecated)(),Fn=En.getCollectionJoinField,Kn=(0,ue.useCollection_deprecated)(),er=Kn.getField,On=er(bt.name)||Fn(bt["x-collection-field"]),tr=(0,Zt.d9)(),Cr=(0,zt.eJW)(),Ur=(0,zt.ngQ)(),Pr=Ur.dn,Or=On!=null&&On.target?tr.getCollectionFields(On==null?void 0:On.target):[],Nr=Or.filter(function(zr){return!(zr!=null&&zr.target)&&zr.type!=="boolean"}).map(function(zr){var no;return{value:zr==null?void 0:zr.name,label:Cr(zr==null||(no=zr.uiSchema)===null||no===void 0?void 0:no.title)||(zr==null?void 0:zr.name)}}),Lr=function(no){var fo,Oo,Vo=M()({},"x-uid",bt["x-uid"]),Bo=j()(j()(j()({},On==null||(fo=On.uiSchema)===null||fo===void 0||(fo=fo["x-component-props"])===null||fo===void 0?void 0:fo.fieldNames),(Oo=bt["x-component-props"])===null||Oo===void 0?void 0:Oo.fieldNames),{},{label:no});bt["x-component-props"]=bt["x-component-props"]||{},bt["x-component-props"].fieldNames=Bo,Vo["x-component-props"]=bt["x-component-props"],Pr.emit("patch",{schema:Vo}),Pr.refresh()};return{key:"title-field",title:Ot("Title field"),options:Nr,value:(at=bt["x-component-props"])===null||at===void 0||(at=at.fieldNames)===null||at===void 0?void 0:at.label,onChange:Lr}},useVisible:function(){var at=(0,n.useFieldSchema)(),bt=(0,Je.Kx)(),It=bt.getField(at.name);return!!(It!=null&&It.target)}},{name:"setDefaultValue",Component:K.N,componentProps:{hideVariableButton:!0}}]}},{name:"divider",type:"divider"},{name:"delete",type:"remove",sort:100,useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t;return{removeParentsIfNoChildren:!0,confirm:{title:at("Delete field")},breakRemoveOn:{"x-component":"Grid"}}}}]}),Yt=new ee.F({name:"blockSettings:filterForm",items:[{name:"title",Component:g._},{name:"setTheBlockHeight",Component:p.q},{name:"formItemTemplate",Component:i.vC,useComponentProps:function(){var Ge,at,bt=(0,xn.rE)(),It=bt.componentNamePrefix,Ot=(0,An.Kx)(),En=Ot.name,Fn=(0,n.useFieldSchema)(),Kn=(Fn==null||(Ge=Fn["x-decorator-props"])===null||Ge===void 0?void 0:Ge.resource)||(Fn==null||(at=Fn["x-decorator-props"])===null||at===void 0?void 0:at.association);return{componentName:"".concat(It,"FilterFormItem"),collectionName:En,resourceName:Kn}}},{name:"linkageRules",Component:i.lc,useComponentProps:function(){var Ge=(0,ue.useCollection_deprecated)(),at=Ge.name;return{collectionName:at}}},{name:"connectDataBlocks",Component:C.F,useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t;return{type:Nt.vC.FORM,emptyDescription:at("No blocks to connect")}}},{name:"setBlockLayout",Component:u.J},{name:"divider",type:"divider"},{name:"remove",type:"remove",componentProps:{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}]}),Mn=e(96695),bn=e.n(Mn),Gt=e(56318),ln=e(22558),Hn=function(Ge){return Ge==="Select"?"FilterSelect":Ge},sn=new ee.F({name:"fieldSettings:FilterFormItem",items:[{name:"decoratorOptions",type:"itemGroup",hideIfNoChildren:!0,useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t;return{title:at("Generic properties")}},useChildren:function(){return[{name:"editFieldTitle",type:"modal",useComponentProps:function(){var at,bt=(0,o.$)(),It=bt.t,Ot=(0,zt.ngQ)(),En=Ot.dn,Fn=(0,n.useField)(),Kn=(0,zt.eJW)(),er=(0,n.useFieldSchema)(),On=(0,ue.useCollectionManager_deprecated)(),tr=On.getCollectionJoinField,Cr=(0,ue.useCollection_deprecated)(),Ur=Cr.getField,Pr=Ur(er.name)||tr(er["x-collection-field"]);return{title:It("Edit field title"),schema:{type:"object",title:It("Edit field title"),properties:{title:{title:It("Field title"),default:Fn==null?void 0:Fn.title,description:"".concat(It("Original field title: ")).concat(Pr==null||(at=Pr.uiSchema)===null||at===void 0?void 0:at.title),"x-decorator":"FormItem","x-component":"Input","x-component-props":{}}}},onSubmit:function(Nr){var Lr,zr=Nr.title,no=zr.trim()===""?Pr==null||(Lr=Pr.uiSchema)===null||Lr===void 0?void 0:Lr.title:zr;Fn.title=Kn(no),er.title=no,En.emit("patch",{schema:{"x-uid":er["x-uid"],title:er.title}}),En.refresh()}}}},{name:"displayTitle",type:"switch",useComponentProps:function(){var at,bt,It=(0,o.$)(),Ot=It.t,En=(0,zt.ngQ)(),Fn=En.dn,Kn=(0,n.useField)(),er=(0,n.useFieldSchema)();return{title:Ot("Display title"),checked:(at=(bt=er["x-decorator-props"])===null||bt===void 0?void 0:bt.showTitle)!==null&&at!==void 0?at:!0,onChange:function(tr){er["x-decorator-props"]=er["x-decorator-props"]||{},er["x-decorator-props"].showTitle=tr,Kn.decoratorProps.showTitle=tr,Fn.emit("patch",{schema:{"x-uid":er["x-uid"],"x-decorator-props":j()(j()({},er["x-decorator-props"]),{},{showTitle:tr})}}),Fn.refresh()}}}},{name:"editDescription",type:"modal",useComponentProps:function(){var at=(0,o.$)(),bt=at.t,It=(0,zt.ngQ)(),Ot=It.dn,En=(0,n.useField)(),Fn=(0,n.useFieldSchema)();return{title:bt("Edit description"),schema:{type:"object",title:bt("Edit description"),properties:{description:{default:En==null?void 0:En.description,"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}},onSubmit:function(er){var On=er.description;En.description=On,Fn.description=On,Ot.emit("patch",{schema:{"x-uid":Fn["x-uid"],description:Fn.description}}),Ot.refresh()}}}},{name:"editTooltip",type:"modal",useComponentProps:function(){var at,bt=(0,o.$)(),It=bt.t,Ot=(0,zt.ngQ)(),En=Ot.dn,Fn=(0,n.useField)(),Kn=(0,n.useFieldSchema)();return{title:It("Edit tooltip"),schema:{type:"object",title:It("Edit tooltip"),properties:{tooltip:{default:Kn==null||(at=Kn["x-decorator-props"])===null||at===void 0?void 0:at.tooltip,"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{}}}},onSubmit:function(On){var tr=On.tooltip;Fn.decoratorProps.tooltip=tr,Kn["x-decorator-props"]=Kn["x-decorator-props"]||{},Kn["x-decorator-props"].tooltip=tr,En.emit("patch",{schema:{"x-uid":Kn["x-uid"],"x-decorator-props":Kn["x-decorator-props"]}}),En.refresh()}}}},{name:"setDefaultValue",Component:K.N},{name:"setValidationRules",type:"modal",useComponentProps:function(){var at=(0,o.$)(),bt=at.t,It=(0,n.useField)(),Ot=(0,n.useFieldSchema)(),En=(0,zt.ngQ)(),Fn=En.dn,Kn=En.refresh,er=(0,zt.q4O)(),On=(0,ue.useCollectionManager_deprecated)(),tr=On.getCollectionJoinField,Cr=(0,ue.useCollection_deprecated)(),Ur=Cr.getField,Pr=Ur(Ot.name)||tr(Ot["x-collection-field"]),Or=function(Lr){return Lr!=null&&!Number.isNaN(Lr)};return{title:bt("Set validation rules"),components:{ArrayCollapse:fn.ArrayCollapse,FormLayout:fn.FormLayout},schema:{type:"object",title:bt("Set validation rules"),properties:{rules:{type:"array",default:Ot==null?void 0:Ot["x-validator"],"x-component":"ArrayCollapse","x-decorator":"FormItem","x-component-props":{accordion:!0},maxItems:3,items:{type:"object","x-component":"ArrayCollapse.CollapsePanel","x-component-props":{header:'{{ t("Validation rule") }}'},properties:{index:{type:"void","x-component":"ArrayCollapse.Index"},layout:{type:"void","x-component":"FormLayout","x-component-props":{labelStyle:{marginTop:"6px"},labelCol:8,wrapperCol:16},properties:j()(j()({},er),{},{message:{type:"string",title:'{{ t("Error message") }}',"x-decorator":"FormItem","x-component":"Input.TextArea","x-component-props":{autoSize:{minRows:2,maxRows:2}}}})},remove:{type:"void","x-component":"ArrayCollapse.Remove"},moveUp:{type:"void","x-component":"ArrayCollapse.MoveUp"},moveDown:{type:"void","x-component":"ArrayCollapse.MoveDown"}}},properties:{add:{type:"void",title:'{{ t("Add validation rule") }}',"x-component":"ArrayCollapse.Addition","x-reactions":{dependencies:["rules"],fulfill:{state:{disabled:"{{$deps[0].length >= 3}}"}}}}}}}},onSubmit:function(Lr){var zr,no=[],fo=bn()(Lr.rules),Oo;try{for(fo.s();!(Oo=fo.n()).done;){var Vo=Oo.value;no.push(Mt().pickBy(Vo,Or))}}catch(na){fo.e(na)}finally{fo.f()}var Bo=M()({},"x-uid",Ot["x-uid"]);if(["percent"].includes(Pr==null?void 0:Pr.interface)){var Lo=bn()(no),xo;try{for(Lo.s();!(xo=Lo.n()).done;){var Ao=xo.value;(Ao.maxValue||Ao.minValue)&&(Ao.percentMode=!0),Ao.percentFormat&&(Ao.percentFormats=!0)}}catch(na){Lo.e(na)}finally{Lo.f()}}var ta=Mt().concat([],(Pr==null||(zr=Pr.uiSchema)===null||zr===void 0?void 0:zr["x-validator"])||[],no);It.validator=ta,It.required=Ot.required,Ot["x-validator"]=no,Bo["x-validator"]=no,Fn.emit("patch",{schema:Bo}),Kn()}}},useVisible:function(){var at=(0,zt.q4O)();return!!at}},{name:"operator",Component:zt.HGA},ln.K]}},{name:"componentOptions",type:"itemGroup",hideIfNoChildren:!0,useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t;return{title:at("Specific properties")}},useChildren:function(){var Ge=(0,pe.qD)(),at=(0,Gt.W)(),bt=Ge.schemaSettingsManager.get("fieldSettings:component:".concat(Hn(at)));return(bt==null?void 0:bt.items)||[]}},{name:"divider",type:"divider"},{name:"delete",type:"remove",sort:100,useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t;return{removeParentsIfNoChildren:!0,confirm:{title:at("Delete field")},breakRemoveOn:{"x-component":"Grid"}}}}]}),Ln=new ee.F({name:"blockSettings:markdown",items:[{name:"EditMarkdown",type:"item",useComponentProps:function(){var Ge=(0,n.useField)(),at=(0,o.$)(),bt=at.t;return{title:bt("Edit markdown"),onClick:function(){Ge.editable=!0}}}},{name:"setTheBlockHeight",Component:p.q},{name:"setBlockTemplate",Component:F},{name:"divider",type:"divider"},{name:"delete",type:"remove",useComponentProps:function(){return{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}}]}),Bn=e(37696),wn=e(38752),st=e(90440),Ke={name:"fieldComponent",type:"select",useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t,bt=(0,n.useField)(),It=(0,n.useFieldSchema)(),Ot=(0,zt.fde)(),En=(0,zt.l1O)(),Fn=(0,Gt.W)(),Kn=(0,zt.ngQ)(),er=Kn.dn;return{title:at("Field component"),options:Ot,value:Fn,onChange:function(tr){var Cr=M()({},"x-uid",It["x-uid"]);It["x-component-props"]=It["x-component-props"]||{},It["x-component-props"].mode=tr,Cr["x-component-props"]=It["x-component-props"],bt.componentProps=bt.componentProps||{},bt.componentProps.mode=tr,(0,Bn.r$)(It)&&En&&(Cr.default=null,It.default=null,bt.setInitialValue(null),bt.setValue(null)),er.emit("patch",{schema:Cr}),er.refresh()}}}},De={name:"titleField",type:"select",useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useField)(),Ot=(0,n.useFieldSchema)(),En=(0,zt.ngQ)(),Fn=En.dn,Kn=(0,wn.eT)(),er=(0,Je.Hy)();return{title:bt("Title field"),options:Kn,value:It==null||(Ge=It.componentProps)===null||Ge===void 0||(Ge=Ge.fieldNames)===null||Ge===void 0?void 0:Ge.label,onChange:function(tr){var Cr,Ur=M()({},"x-uid",Ot["x-uid"]),Pr=j()(j()(j()({},er==null||(Cr=er.uiSchema)===null||Cr===void 0||(Cr=Cr["x-component-props"])===null||Cr===void 0?void 0:Cr.fieldNames),It.componentProps.fieldNames),{},{label:tr});Ot["x-component-props"]=Ot["x-component-props"]||{},Ot["x-component-props"].fieldNames=Pr,Ur["x-component-props"]=Ot["x-component-props"],It.componentProps.fieldNames=Ot["x-component-props"].fieldNames,Fn.emit("patch",{schema:Ur}),Fn.refresh()}}}},Ce=new ee.F({name:"fieldSettings:component:CascadeSelect",items:[Ke,De,st.o_]}),Oe=e(52677),Fe=e.n(Oe),Ne=function(Ge){var at,bt,It,Ot,En,Fn,Kn,er,On,tr,Cr,Ur,Pr=Ge.fieldSchema,Or=(0,n.useField)(),Nr=(0,a.useDesignable)(),Lr=Nr.dn,zr=(0,o.$)(),no=zr.t,fo=(0,a.useCollectionManager_deprecated)(),Oo=fo.getCollectionJoinField,Vo=(0,a.useFlag)()||{},Bo=Vo.isInSubForm,Lo=Vo.isInSubTable,xo=Oo(Pr==null?void 0:Pr["x-collection-field"])||{},Ao=(Pr==null||(at=Pr["x-component-props"])===null||at===void 0?void 0:at.showTime)||(xo==null||(bt=xo.uiSchema)===null||bt===void 0||(bt=bt["x-component-props"])===null||bt===void 0?void 0:bt.showTime)||!1,ta=(Pr==null||(It=Pr["x-component-props"])===null||It===void 0?void 0:It.dateFormat)||(xo==null||(Ot=xo.uiSchema)===null||Ot===void 0||(Ot=Ot["x-component-props"])===null||Ot===void 0?void 0:Ot.dateFormat)||"YYYY-MM-DD",na=(Pr==null||(En=Pr["x-component-props"])===null||En===void 0?void 0:En.timeFormat)||(xo==null||(Fn=xo.uiSchema)===null||Fn===void 0||(Fn=Fn["x-component-props"])===null||Fn===void 0?void 0:Fn.timeFormat)||"HH:mm:ss",la=(Pr==null||(Kn=Pr["x-component-props"])===null||Kn===void 0?void 0:Kn.picker)||(xo==null||(er=xo.uiSchema)===null||er===void 0||(er=er["x-component-props"])===null||er===void 0?void 0:er.picker)||"date",Xa=Pr["x-read-pretty"]||Or.readOnly||Or.readPretty,ra=Pr==null||(On=Pr["x-component-props"])===null||On===void 0?void 0:On._minDate,sa=Pr==null||(tr=Pr["x-component-props"])===null||tr===void 0?void 0:tr._maxDate,Yo=(xo==null||(Cr=xo.uiSchema)===null||Cr===void 0?void 0:Cr["x-component-props"].gmt)||!1,ha=(xo==null||(Ur=xo.uiSchema)===null||Ur===void 0?void 0:Ur["x-component-props"].utc)||!1,Ia=(0,a.useRecord)(),za=(0,a.useFormBlockContext)(),ga=za.form,Ka=(0,L.useCallback)(function(Uo){return(0,R.jsx)(zt.n6,{schema:{"x-component":"DatePicker","x-component-props":{dateFormat:ta,timeFormat:na,gmt:Yo,utc:ha,picker:la,showTime:Ao,placeholder:'{{t("Please select time or variable")}}',style:{minWidth:385}},name:"value","x-read-pretty":!1,"x-validator":void 0,"x-decorator":void 0}})},[ta,Yo,la,Ao,na,ha]),Wa=(0,L.useCallback)(function(Uo){return(0,R.jsx)(a.VariableInput,j()(j()({},Uo),{},{form:ga,record:Ia,noDisabled:!0,renderSchemaComponent:Ka}))},[Pr,ga,Ia,Ka]);function Xo(Uo){if(Uo!=null){if(typeof Uo=="string")return Uo;if(Fe()(Uo)==="object"&&Object.prototype.hasOwnProperty.call(Uo,"value"))return Xo(Uo.value)}}return(0,R.jsx)(i.j0,{title:no("Date range limit"),schema:{type:"object","x-decorator":"",properties:{_minDate:{type:"string",title:'{{t("MinDate")}}',"x-decorator":"FormItem","x-component":Wa,"x-component-props":{name:"_minDate"},default:(0,J.cG)(ra)?ra:{value:ra}},_maxDate:{type:"string",title:'{{t("MaxDate")}}',"x-decorator":"FormItem","x-component":Wa,"x-component-props":{name:"_maxDate"},default:(0,J.cG)(sa)?sa:{value:sa}}}},onSubmit:function(zo){var Aa=M()({},"x-uid",Pr["x-uid"]);Aa["x-component-props"]=Or.componentProps||{},Pr["x-component-props"]=j()(j()({},Or.componentProps||{}),{},{_maxDate:Xo(zo==null?void 0:zo._maxDate),_minDate:Xo(zo==null?void 0:zo._minDate)}),Aa["x-component-props"]=Pr["x-component-props"],Or.componentProps=Pr["x-component-props"];var Oa=Or.path.entire.split(".");Oa.pop();var Na=Oa.join(".");Or.query("".concat(Na,".*[0:].").concat(Pr.name)).forEach(function(_a){_a.props.name===Pr.name&&_a.setComponentProps({_maxDate:Xo(zo==null?void 0:zo._maxDate),_minDate:Xo(zo==null?void 0:zo._minDate)})}),Lr.emit("patch",{schema:Aa}),Lr.refresh()},ModalContextProvider:function(zo){return(0,R.jsx)(a.FlagProvider,{isInSubForm:Bo,isInSubTable:Lo,isInFormDataTemplate:!0,children:zo.children})}})},Xe=e(81230),dt=new ee.F({name:"fieldSettings:component:DatePicker",items:[{name:"dateDisplayFormat",Component:r.y,useComponentProps:function(){var Ge=(0,n.useFieldSchema)(),at=(0,Xe.z9)(),bt=at.fieldSchema,It=bt||Ge;return{fieldSchema:It}}},{name:"dateScopeSelect",Component:Ne,useComponentProps:function(){var Ge=(0,n.useFieldSchema)(),at=(0,Xe.z9)(),bt=at.fieldSchema,It=bt||Ge;return{fieldSchema:It}},useVisible:function(){var Ge=(0,Xe.z9)(),at=Ge.fieldSchema,bt=(0,n.useFieldSchema)(),It=at||bt;return!(It!=null&&It["x-read-pretty"])}},st.o_,st.dQ,st._3]}),ht=new ee.F({name:"fieldSettings:component:DatePicker.RangePicker",items:[{name:"dateDisplayFormat",Component:r.y,useComponentProps:function(){var Ge=(0,n.useFieldSchema)(),at=(0,Xe.z9)(),bt=at.fieldSchema,It=bt||Ge;return{fieldSchema:It}}},st.o_]}),xt=e(69435),Ct=e(70027),Dt=new ee.F({name:"fieldSettings:component:Preview",items:[{name:"size",type:"select",useVisible:function(){var Ge,at=(0,Ct.z)(),bt=at.fieldSchema,It=(bt==null||(Ge=bt.parent)===null||Ge===void 0?void 0:Ge["x-component"])==="TableV2.Column";return!It},useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useField)(),Ot=(0,n.useFieldSchema)(),En=(0,m.ng)(),Fn=En.dn;return{title:bt("Size"),options:[{label:bt("Large"),value:"large"},{label:bt("Default"),value:"default"},{label:bt("Small"),value:"small"}],value:(It==null||(Ge=It.componentProps)===null||Ge===void 0?void 0:Ge.size)||"default",onChange:function(er){var On=M()({},"x-uid",Ot["x-uid"]);Ot["x-component-props"]=Ot["x-component-props"]||{},Ot["x-component-props"].size=er,On["x-component-props"]=Ot["x-component-props"],It.componentProps=It.componentProps||{},It.componentProps.size=er,Fn.emit("patch",{schema:On}),Fn.refresh()}}}},xt.y]}),Vt=new ee.F({name:"fieldSettings:component:Upload.Attachment",items:[{name:"size",type:"select",useVisible:function(){var Ge,at=(0,zt.z9d)(),bt=at.fieldSchema,It=(bt==null||(Ge=bt.parent)===null||Ge===void 0?void 0:Ge["x-component"])==="TableV2.Column",Ot=(0,wn.p3)();return Ot&&!It},useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useField)(),Ot=(0,n.useFieldSchema)(),En=(0,zt.ngQ)(),Fn=En.dn;return{title:bt("Size"),options:[{label:bt("Large"),value:"large"},{label:bt("Default"),value:"default"},{label:bt("Small"),value:"small"}],value:(It==null||(Ge=It.componentProps)===null||Ge===void 0?void 0:Ge.size)||"default",onChange:function(er){var On=M()({},"x-uid",Ot["x-uid"]);Ot["x-component-props"]=Ot["x-component-props"]||{},Ot["x-component-props"].size=er,On["x-component-props"]=Ot["x-component-props"],It.componentProps=It.componentProps||{},It.componentProps.size=er,Fn.emit("patch",{schema:On}),Fn.refresh()}}}},xt.y]}),Ht=new ee.F({name:"fieldSettings:component:Input.JSON",items:[st.o_]}),Ut=function(Ge){return{name:Ge.name,type:"select",useComponentProps:function(){var bt,It=(0,o.$)(),Ot=It.t,En=(0,n.useField)(),Fn=(0,n.useFieldSchema)(),Kn=(0,zt.z9d)(),er=Kn.fieldSchema,On=er||Fn,tr=(0,zt.ngQ)(),Cr=tr.dn;return{title:Ot(Ge.title),options:Ge.options(Ot),value:((bt=On["x-component-props"])===null||bt===void 0?void 0:bt[Ge.name])||Ge.defaultValue,onChange:function(Pr){var Or=M()({},"x-uid",On["x-uid"]);On["x-component-props"]=On["x-component-props"]||{},On["x-component-props"][Ge.name]=Pr,Or["x-component-props"]=On["x-component-props"],En.componentProps=En.componentProps||{},En.componentProps[Ge.name]=Pr,Cr.emit("patch",{schema:Or})}}}}},wt=function(Ge){return[{value:"small",label:Ge("Small")},{value:"middle",label:Ge("Middle")},{value:"large",label:Ge("Large")},{value:"oversized",label:Ge("Oversized")},{value:"auto",label:Ge("Auto")}]},ot=function(Ge){return[{value:"cover",label:Ge("Cover")},{value:"fill",label:Ge("Fill")},{value:"contain",label:Ge("Contain")},{value:"scale-down",label:Ge("Scale Down")},{value:"none",label:Ge("None")}]},qe=Ut({name:"size",title:"Size",options:wt,defaultValue:"small"}),Be=Ut({name:"objectFit",title:"Object Fit",options:ot,defaultValue:"cover"}),rt=new ee.F({name:"fieldSettings:component:Input.Preview",items:[qe,Be]}),Ve=new ee.F({name:"fieldSettings:component:Input.TextArea",items:[st.o_]}),$e=new ee.F({name:"fieldSettings:component:Input.URL",items:[st.o_]}),it=new ee.F({name:"fieldSettings:component:Markdown",items:[st.o_]}),Pt=new ee.F({name:"fieldSettings:component:MarkdownVditor",items:[st.o_]}),Lt=new ee.F({name:"fieldSettings:component:RichText",items:[st.o_]}),$t=new ee.F({name:"fieldSettings:component:InputNumber",items:[{name:"displayFormat",Component:$,useComponentProps:function(){var Ge=(0,n.useFieldSchema)(),at=(0,Xe.z9)(),bt=at.fieldSchema,It=bt||Ge;return{fieldSchema:It}},useVisible:function(){var Ge=(0,wn.p3)();return Ge}},st.dQ,st._3]}),$n=e(5772),pn=e(15503),un=e(54801),Xn=e(64279),Yn={name:"fieldComponent",type:"select",useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t,bt=(0,n.useField)(),It=(0,n.useFieldSchema)(),Ot=(0,zt.fde)(),En=(0,zt.l1O)(),Fn=(0,Gt.W)(),Kn=(0,zt.ngQ)(),er=Kn.dn;return{title:at("Field component"),options:Ot,value:Fn,onChange:function(tr){var Cr=M()({},"x-uid",It["x-uid"]);It["x-component-props"]=It["x-component-props"]||{},It["x-component-props"].mode=tr,Cr["x-component-props"]=It["x-component-props"],bt.componentProps=bt.componentProps||{},bt.componentProps.mode=tr,(0,Bn.r$)(It)&&En&&(Cr.default=null,It.default=null,bt.setInitialValue(null),bt.setValue(null)),er.emit("patch",{schema:Cr}),er.refresh()}}}},jn={name:"allowSelectExistingRecord",type:"switch",useVisible:function(){var Ge=(0,n.useFieldSchema)(),at=Ge["x-component-props"].multiple,bt=(0,zt.p3Q)(),It=(0,Je.Hy)();return!bt&&at!==!1&&["hasMany","belongsToMany"].includes(It==null?void 0:It.type)},useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useField)(),Ot=(0,n.useFieldSchema)(),En=(0,zt.ngQ)(),Fn=En.dn,Kn=En.refresh;return{title:bt("Allow selection of existing records"),checked:(Ge=Ot["x-component-props"])===null||Ge===void 0?void 0:Ge.allowSelectExistingRecord,onChange:function(On){var tr=M()({},"x-uid",Ot["x-uid"]);It.componentProps.allowSelectExistingRecord=On,Ot["x-component-props"]=Ot["x-component-props"]||{},Ot["x-component-props"].allowSelectExistingRecord=On,tr["x-component-props"]=Ot["x-component-props"],Fn.emit("patch",{schema:tr}),Kn()}}}},ir={name:"allowDisassociation",type:"switch",useVisible:function(){var Ge=(0,zt.p3Q)();return!Ge},useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useField)(),Ot=(0,n.useFieldSchema)(),En=(0,zt.ngQ)(),Fn=En.dn,Kn=En.refresh;return{title:bt("Allow disassociation"),checked:((Ge=Ot["x-component-props"])===null||Ge===void 0?void 0:Ge.allowDisassociation)!==!1,onChange:function(On){var tr=M()({},"x-uid",Ot["x-uid"]);It.componentProps.allowDisassociation=On,Ot["x-component-props"]=Ot["x-component-props"]||{},Ot["x-component-props"].allowDisassociation=On,tr["x-component-props"]=Ot["x-component-props"],Fn.emit("patch",{schema:tr}),Kn()}}}},fr={name:"SetDefaultSortingRules",type:"modal",useComponentProps:function(){var Ge=(0,ue.useCollectionManager_deprecated)(),at=Ge.getCollectionJoinField,bt=(0,n.useField)(),It=(0,n.useFieldSchema)(),Ot=It["x-collection-field"],En=at(Ot)||{},Fn=En.target,Kn=(0,ue.useSortFields)(Fn),er=(0,o.$)(),On=er.t,tr=(0,zt.ngQ)(),Cr=tr.dn,Ur=bt.componentProps.sortArr||[],Pr=Ur==null?void 0:Ur.map(function(Or){return Or!=null&&Or.startsWith("-")?{field:Or.substring(1),direction:"desc"}:{field:Or,direction:"asc"}});return{title:On("Set default sorting rules"),components:{ArrayItems:fn.ArrayItems},schema:{type:"object",title:On("Set default sorting rules"),properties:{sort:{type:"array",default:Pr,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:Kn,required:!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:On("ASC"),value:"asc"},{label:On("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:On("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function(Nr){var Lr,zr=Nr.sort,no=zr.map(function(fo){return fo.direction==="desc"?"-".concat(fo.field):fo.field});bt.componentProps.sortArr=no,It["x-component-props"].sortArr=no,Cr.emit("patch",{schema:(Lr={},M()(Lr,"x-uid",It["x-uid"]),M()(Lr,"x-component-props",It["x-component-props"]),Lr)})}}},useVisible:function(){var Ge=(0,ue.useCollectionManager_deprecated)(),at=Ge.getCollectionJoinField,bt=(0,n.useFieldSchema)(),It=bt["x-collection-field"],Ot=at(It)||{},En=Ot.interface,Fn=(0,zt.p3Q)();return Fn&&["m2m","o2m"].includes(En)}},Ar={name:"allowAddNewData",type:"switch",useVisible:function(){var Ge=(0,zt.p3Q)(),at=(0,un.w5)();return!Ge&&at},useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useField)(),Ot=(0,n.useFieldSchema)(),En=(0,zt.ngQ)(),Fn=En.dn,Kn=En.refresh;return{title:bt("Allow add new"),checked:((Ge=Ot["x-component-props"])===null||Ge===void 0?void 0:Ge.allowAddnew)!==!1,onChange:function(On){var tr=M()({},"x-uid",Ot["x-uid"]);It.componentProps.allowAddnew=On,Ot["x-component-props"]=Ot["x-component-props"]||{},Ot["x-component-props"].allowAddnew=On,tr["x-component-props"]=Ot["x-component-props"],Fn.emit("patch",{schema:tr}),Kn()}}}},wr=(0,pn.t)(function(Tn){return(0,R.jsx)($n.C,{isInSubForm:!0,children:(0,R.jsx)(Xn.U,j()({},Tn))})},{displayName:"LinkageRulesComponent"}),Kr={name:"linkageRules",Component:i.lc,useComponentProps:function(){var Ge=(0,n.useField)(),at=(0,n.useFieldSchema)(),bt=(0,Je.d9)(),It=bt.getCollectionField(at["x-collection-field"]),Ot=(0,Je.Rr)(),En=Ot.rerenderDataBlock;return{collectionName:It==null?void 0:It.target,Component:wr,readPretty:Ge.readPretty,afterSubmit:En}}},ao={name:"recordsPerPage",type:"select",useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useFieldSchema)(),Ot=(0,n.useField)(),En=(0,zt.ngQ)(),Fn=En.dn,Kn=[10,20,50,100];return{title:bt("Records per page"),value:((Ge=Ot.componentProps)===null||Ge===void 0?void 0:Ge.pageSize)||10,options:Kn.map(function(er){return{value:er}}),onChange:function(On){var tr=M()({},"x-uid",It["x-uid"]);Ot.componentProps=Ot.componentProps||{},Ot.componentProps.pageSize=On,It["x-component-props"]=It["x-component-props"]||{},It["x-component-props"].pageSize=On,tr["x-component-props"]=It["x-component-props"],Fn.emit("patch",{schema:tr})}}}},Qr=new ee.F({name:"fieldSettings:component:SubTable",items:[Yn,Ar,jn,ir,fr,Kr,ao]}),_r={name:"allowMultiple",type:"switch",useVisible:function(){var Ge=(0,wn.p3)(),at=(0,Je.Hy)();return!Ge&&["hasMany","belongsToMany"].includes(at==null?void 0:at.type)},useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useField)(),Ot=(0,n.useFieldSchema)(),En=(0,zt.ngQ)(),Fn=En.dn,Kn=En.refresh;return{title:bt("Allow multiple"),checked:((Ge=Ot["x-component-props"])===null||Ge===void 0?void 0:Ge.multiple)===void 0?!0:Ot["x-component-props"].multiple,onChange:function(On){var tr=M()({},"x-uid",Ot["x-uid"]);Ot["x-component-props"]=Ot["x-component-props"]||{},It.componentProps=It.componentProps||{},Ot["x-component-props"].multiple=On,It.componentProps.multiple=On,tr["x-component-props"]=Ot["x-component-props"],Fn.emit("patch",{schema:tr}),Kn()}}}},Rr={name:"fieldComponent",type:"select",useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t,bt=(0,n.useField)(),It=(0,n.useFieldSchema)(),Ot=(0,zt.fde)(),En=(0,zt.l1O)(),Fn=(0,Gt.W)(),Kn=(0,zt.ngQ)(),er=Kn.dn;return{title:at("Field component"),options:Ot,value:Fn,onChange:function(tr){var Cr=M()({},"x-uid",It["x-uid"]);It["x-component-props"]=It["x-component-props"]||{},It["x-component-props"].mode=tr,Cr["x-component-props"]=It["x-component-props"],bt.componentProps=bt.componentProps||{},bt.componentProps.mode=tr,(0,Bn.r$)(It)&&En&&(Cr.default=null,It.default=null,bt.setInitialValue(null),bt.setValue(null)),er.emit("patch",{schema:Cr}),er.refresh()}}}},Hr=new ee.F({name:"fieldSettings:component:Nester",items:[Rr,_r,jn,{name:"allowDissociate",type:"switch",useVisible:function(){var Ge=(0,_n.th)(),at=Ge.type;return!(0,wn.xj)()&&at==="update"},useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useField)(),Ot=(0,n.useFieldSchema)(),En=(0,zt.ngQ)(),Fn=En.dn,Kn=En.refresh;return{title:bt("Allow dissociate"),checked:((Ge=Ot["x-component-props"])===null||Ge===void 0?void 0:Ge.allowDissociate)!==!1,onChange:function(On){var tr=M()({},"x-uid",Ot["x-uid"]);Ot["x-component-props"]=Ot["x-component-props"]||{},It.componentProps=It.componentProps||{},Ot["x-component-props"].allowDissociate=On,It.componentProps.allowDissociate=On,tr["x-component-props"]=Ot["x-component-props"],Fn.emit("patch",{schema:tr}),Kn()}}}},fr,Kr,{name:"setBlockLayout",Component:u.J}]}),Yr=e(76235),eo={name:"allowMultiple",type:"switch",useVisible:function(){var Ge=(0,wn.p3)(),at=(0,Je.Hy)();return!Ge&&["hasMany","belongsToMany","belongsToArray"].includes(at==null?void 0:at.type)},useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useField)(),Ot=(0,n.useFieldSchema)(),En=(0,zt.ngQ)(),Fn=En.dn,Kn=En.refresh;return{title:bt("Allow multiple"),checked:((Ge=Ot["x-component-props"])===null||Ge===void 0?void 0:Ge.multiple)===void 0?!0:Ot["x-component-props"].multiple,onChange:function(On){var tr=M()({},"x-uid",Ot["x-uid"]);Ot["x-component-props"]=Ot["x-component-props"]||{},It.componentProps=It.componentProps||{},Ot["x-component-props"].multiple=On,It.componentProps.multiple=On,tr["x-component-props"]=Ot["x-component-props"],Fn.emit("patch",{schema:tr}),Kn()}}}},ho={name:"fieldComponent",type:"select",useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t,bt=(0,n.useField)(),It=(0,zt.l1O)(),Ot=(0,Gt.W)(),En=(0,Xe.z9)(),Fn=En.fieldSchema,Kn=En.collectionField,er=(0,n.useFieldSchema)(),On=Fn||er,tr=(0,zt.fde)({fieldSchema:Fn,collectionField:Kn}),Cr=(0,zt.ngQ)(),Ur=Cr.dn;return{title:at("Field component"),options:tr,value:Ot,onChange:function(Or){var Nr=M()({},"x-uid",On["x-uid"]);if(On["x-component-props"]=On["x-component-props"]||{},On["x-component-props"].mode=Or,Nr["x-component-props"]=On["x-component-props"],bt.componentProps=bt.componentProps||{},bt.componentProps.mode=Or,(0,Bn.r$)(On)&&It){var Lr,zr;Nr.default=null,On.default=null,bt==null||(Lr=bt.setInitialValue)===null||Lr===void 0||Lr.call(bt,null),bt==null||(zr=bt.setValue)===null||zr===void 0||zr.call(bt,null)}Ur.emit("patch",{schema:Nr}),Ur.refresh()}}}},co=new ee.F({name:"fieldSettings:component:Picker",items:[ho,{name:"popupSize",type:"select",useVisible:function(){var Ge=(0,wn.p3)();return!Ge},useComponentProps:function(){var Ge,at,bt,It=(0,o.$)(),Ot=It.t,En=(0,n.useField)(),Fn=(0,Xe.z9)(),Kn=Fn.fieldSchema,er=(0,n.useFieldSchema)(),On=Kn||er,tr=(0,zt.ngQ)(),Cr=tr.dn;return{title:Ot("Popup size"),options:[{label:Ot("Small"),value:"small"},{label:Ot("Middle"),value:"middle"},{label:Ot("Large"),value:"large"}],value:(Ge=On==null||(at=On["x-component-props"])===null||at===void 0?void 0:at.openSize)!==null&&Ge!==void 0?Ge:(On==null||(bt=On["x-component-props"])===null||bt===void 0?void 0:bt.openMode)=="modal"?"large":"middle",onChange:function(Pr){En.componentProps.openSize=Pr,On["x-component-props"]=j()(j()({},On["x-component-props"]),{},{openSize:Pr}),Cr.emit("patch",{schema:{"x-uid":On["x-uid"],"x-component-props":On["x-component-props"]}}),Cr.refresh()}}}},wn.iT,eo,Yr.lt]}),po={name:"allowMultiple",type:"switch",useVisible:function(){var Ge=(0,wn.p3)(),at=(0,Je.Hy)();return!Ge&&["hasMany","belongsToMany"].includes(at==null?void 0:at.type)},useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useField)(),Ot=(0,n.useFieldSchema)(),En=(0,zt.ngQ)(),Fn=En.dn,Kn=En.refresh;return{title:bt("Allow multiple"),checked:((Ge=Ot["x-component-props"])===null||Ge===void 0?void 0:Ge.multiple)===void 0?!0:Ot["x-component-props"].multiple,onChange:function(On){var tr=M()({},"x-uid",Ot["x-uid"]);Ot["x-component-props"]=Ot["x-component-props"]||{},It.componentProps=It.componentProps||{},Ot["x-component-props"].multiple=On,It.componentProps.multiple=On,tr["x-component-props"]=Ot["x-component-props"],Fn.emit("patch",{schema:tr}),Kn()}}}},Wo={name:"fieldComponent",type:"select",useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t,bt=(0,n.useField)(),It=(0,Xe.z9)(),Ot=It.fieldSchema,En=It.collectionField,Fn=(0,n.useFieldSchema)(),Kn=Ot||Fn,er=(0,zt.fde)({fieldSchema:Ot,collectionField:En}),On=(0,zt.ngQ)(),tr=On.dn,Cr=(0,zt.l1O)(),Ur=(0,Gt.W)();return{title:at("Field component"),options:er,value:Ur,onChange:function(Or){var Nr=M()({},"x-uid",Kn["x-uid"]);Kn["x-component-props"]=Kn["x-component-props"]||{},Kn["x-component-props"].mode=Or,Nr["x-component-props"]=Kn["x-component-props"],bt.componentProps=bt.componentProps||{},bt.componentProps.mode=Or,(0,Bn.r$)(Kn)&&Cr&&(Nr.default=null,Kn.default=null,bt.setInitialValue(null),bt.setValue(null)),tr.emit("patch",{schema:Nr}),tr.refresh()}}}},Vr=new ee.F({name:"fieldSettings:component:PopoverNester",items:[Wo,po,Yr.lt,Kr,{name:"setBlockLayout",Component:u.J}]}),Gr=e(30970),to={name:"enableLink",type:"switch",useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useField)(),Ot=(0,Xe.z9)(),En=Ot.fieldSchema,Fn=(0,n.useFieldSchema)(),Kn=En||Fn,er=(0,zt.ngQ)(),On=er.dn;return{title:bt("Enable link"),checked:((Ge=Kn["x-component-props"])===null||Ge===void 0?void 0:Ge.enableLink)!==!1,onChange:function(Cr){Kn["x-component-props"]=j()(j()({},Kn==null?void 0:Kn["x-component-props"]),{},{enableLink:Cr}),It.componentProps.enableLink=Cr,On.emit("patch",{schema:{"x-uid":Kn["x-uid"],"x-component-props":j()({},Kn==null?void 0:Kn["x-component-props"])}})}}}},lo={name:"titleField",type:"select",useComponentProps:function(){var Ge,at=(0,o.$)(),bt=at.t,It=(0,n.useField)(),Ot=(0,Xe.z9)(),En=Ot.fieldSchema,Fn=Ot.collectionField,Kn=(0,n.useFieldSchema)(),er=En||Kn,On=(0,wn.eT)(),tr=(0,Je.Hy)(),Cr=Fn||tr,Ur=(0,zt.ngQ)(),Pr=Ur.dn;return{title:bt("Title field"),options:On,value:er==null||(Ge=er["x-component-props"])===null||Ge===void 0||(Ge=Ge.fieldNames)===null||Ge===void 0?void 0:Ge.label,onChange:function(Nr){var Lr,zr=M()({},"x-uid",er["x-uid"]),no=j()(j()(j()({},Cr==null||(Lr=Cr.uiSchema)===null||Lr===void 0||(Lr=Lr["x-component-props"])===null||Lr===void 0?void 0:Lr.fieldNames),It.componentProps.fieldNames),{},{label:Nr});er["x-component-props"]=er["x-component-props"]||{},er["x-component-props"].fieldNames=no,zr["x-component-props"]=er["x-component-props"],It.componentProps.fieldNames=er["x-component-props"].fieldNames,Pr.emit("patch",{schema:zr}),Pr.refresh()}}}},mo={name:"fieldComponent",type:"select",useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t,bt=(0,n.useField)(),It=(0,zt.l1O)(),Ot=(0,Xe.z9)(),En=Ot.fieldSchema,Fn=Ot.collectionField,Kn=(0,zt.fde)({fieldSchema:En,collectionField:Fn}),er=(0,n.useFieldSchema)(),On=En||er,tr=(0,Gt.W)(),Cr=(0,zt.ngQ)(),Ur=Cr.dn;return{title:at("Field component"),options:Kn,value:tr,onChange:function(Or){var Nr=M()({},"x-uid",On["x-uid"]);On["x-component-props"]=On["x-component-props"]||{},On["x-component-props"].mode=Or,Nr["x-component-props"]=On["x-component-props"],bt.componentProps=bt.componentProps||{},bt.componentProps.mode=Or,(0,Bn.r$)(On)&&It&&(Nr.default=null,On.default=null,bt.setInitialValue(null),bt.setValue(null)),Ur.emit("patch",{schema:Nr}),Ur.refresh()}}}},No=new ee.F({name:"fieldSettings:component:Tag",items:[mo,{name:"tagColorField",type:"select",useComponentProps:function(){var Ge,at,bt=(0,o.$)(),It=bt.t,Ot=(0,n.useField)(),En=(0,n.useFieldSchema)(),Fn=(0,Je.Hy)(),Kn=(0,Xe.z9)(),er=Kn.fieldSchema,On=Kn.collectionField,tr=er||En,Cr=On||Fn,Ur=(0,zt.ngQ)(),Pr=Ur.dn,Or=(0,Gr.A8)((Ge=Cr==null?void 0:Cr.target)!==null&&Ge!==void 0?Ge:Cr==null?void 0:Cr.targetCollection);return{title:It("Tag color field"),options:Or,value:tr==null||(at=tr["x-component-props"])===null||at===void 0?void 0:at.tagColorField,onChange:function(Lr){var zr=M()({},"x-uid",tr["x-uid"]);tr["x-component-props"]=tr["x-component-props"]||{},tr["x-component-props"].tagColorField=Lr,zr["x-component-props"]=tr["x-component-props"],Ot.componentProps.tagColorField=Lr,Pr.emit("patch",{schema:zr}),Pr.refresh()}}}},lo,to,st.o_]}),Jo=new ee.F({name:"fieldSettings:component:UnixTimestamp",items:[{name:"dateDisplayFormat",Component:r.y,useComponentProps:function(){var Ge=(0,n.useFieldSchema)(),at=(0,Xe.z9)(),bt=at.fieldSchema,It=bt||Ge;return{fieldSchema:It}}},st.dQ,st._3]});function Tr(Tn){var Ge=(0,n.useField)(),at=(0,n.useFieldSchema)(),bt=(0,m.ng)(),It=bt.dn,Ot=(0,o.$)(),En=Ot.t;return(0,R.jsx)(i.j0,{title:En("Edit group title"),schema:{type:"object",title:En("Edit group title"),properties:{children:{"x-decorator":"FormItem","x-component":"Input",title:En("Group title"),default:Ge.componentProps.children,"x-component-props":{}}}},onSubmit:function(Kn){var er,On=Kn.children;Ge.componentProps.children=On,at["x-component-props"]=at["x-component-props"]||{},at["x-component-props"].children=On,It.emit("patch",{schema:(er={},M()(er,"x-uid",at["x-uid"]),M()(er,"x-component-props",j()({},at["x-component-props"])),er)}),It.refresh()}})}var Zo=new ee.F({name:"blockSettings:divider",items:[{name:"editTitle",type:"item",Component:Tr},{name:"orientation",type:"select",useComponentProps:function(){var Ge,at=(0,n.useField)(),bt=(0,n.useFieldSchema)(),It=(0,o.$)(),Ot=It.t,En=(0,m.ng)(),Fn=En.dn;return{title:Ot("Title position"),value:((Ge=at.componentProps)===null||Ge===void 0?void 0:Ge.orientation)||"left",options:[{label:Ot("Left"),value:"left"},{label:Ot("Center"),value:"center"},{label:Ot("Right"),value:"right"}],onChange:function(er){var On;at.componentProps=at.componentProps||{},at.componentProps.orientation=er,bt["x-component-props"]=bt["x-component-props"]||{},bt["x-component-props"].orientation=er,Fn.emit("patch",{schema:(On={},M()(On,"x-uid",bt["x-uid"]),M()(On,"x-component-props",bt["x-component-props"]),On)})}}}},{name:"dashed",type:"switch",useComponentProps:function(){var Ge=(0,n.useField)(),at=(0,n.useFieldSchema)(),bt=(0,o.$)(),It=bt.t,Ot=(0,m.ng)(),En=Ot.dn;return{title:It("Dashed"),defaultChecked:!0,checked:Ge.componentProps.dashed,onChange:function(Kn){Ge.componentProps.dashed=Kn,at["x-component-props"].dashed=Kn,Kn===!1&&(at["x-component-props"].dashed=!1),En.emit("patch",{schema:at}),En.refresh()}}}},{name:"color",type:"item",useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t,bt=(0,m.ng)(),It=bt.dn,Ot=(0,n.useField)(),En=(0,n.useFieldSchema)();return{title:(0,R.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[at("Color"),(0,R.jsx)("div",{style:{float:"right"},children:(0,R.jsx)(zt.zH8,{defaultValue:Ot.componentProps.color||"rgba(0, 0, 0, 0.88)",onChange:function(Kn){Ot.componentProps=Ot.componentProps||{},Ot.componentProps.color=Kn,En["x-component-props"]=En["x-component-props"]||{},En["x-component-props"].color=Kn,It.emit("patch",{schema:En}),It.refresh()}})})]})}}},{name:"borderColor",type:"item",useComponentProps:function(){var Ge=(0,o.$)(),at=Ge.t,bt=(0,m.ng)(),It=bt.dn,Ot=(0,n.useField)(),En=(0,n.useFieldSchema)();return{title:(0,R.jsxs)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[at("Divider line color"),(0,R.jsx)("div",{style:{float:"right"},children:(0,R.jsx)(zt.zH8,{defaultValue:Ot.componentProps.borderColor||"rgba(5, 5, 5, 0.06)",onChange:function(Kn){Ot.componentProps=Ot.componentProps||{},Ot.componentProps.borderColor=Kn,En["x-component-props"]=En["x-component-props"]||{},En["x-component-props"].borderColor=Kn,It.emit("patch",{schema:En}),It.refresh()}})})]})}}},{name:"delete",type:"remove",useComponentProps:function(){return{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}}]}),qo=e(68400),fa=e.n(qo),Da=e(97133),Ma,ia,da=function(Ge){var at,bt,It=Ge.fieldSchema,Ot=(0,n.useField)(),En=(0,a.useDesignable)(),Fn=En.dn,Kn=(0,o.$)(),er=Kn.t,On=(0,a.useCollectionManager_deprecated)(),tr=On.getCollectionJoinField,Cr=tr(It==null?void 0:It["x-collection-field"])||{},Ur=(It==null||(at=It["x-component-props"])===null||at===void 0?void 0:at.format)||(Cr==null||(bt=Cr.uiSchema)===null||bt===void 0||(bt=bt["x-component-props"])===null||bt===void 0?void 0:bt.format)||"HH:mm:ss";return(0,R.jsx)(i.j0,{title:er("Time format"),scope:{getPickerFormat:D.getPickerFormat},schema:{type:"object",properties:{format:{type:"string",title:'{{t("Time format")}}',"x-component":zt.Dnz,"x-decorator":"FormItem","x-decorator-props":{className:(0,Da.css)(Ma||(Ma=fa()([`
                  margin-bottom: 0px;
                `])))},"x-component-props":{className:(0,Da.css)(ia||(ia=fa()([`
                  color: red;
                  .ant-radio-wrapper {
                    display: flex;
                    margin: 5px 0px;
                  }
                `]))),defaultValue:"h:mm a",formats:["hh:mm:ss a","HH:mm:ss"],timeFormat:!0},default:Ur,enum:[{label:(0,zt.WN4)({format:"hh:mm:ss a"}),value:"hh:mm:ss a"},{label:(0,zt.WN4)({format:"HH:mm:ss"}),value:"HH:mm:ss"},{label:"custom",value:"custom"}]}}},onSubmit:function(Or){var Nr=M()({},"x-uid",It["x-uid"]);Nr["x-component-props"]=Ot.componentProps||{},It["x-component-props"]=j()(j()({},Ot.componentProps||{}),Or),Nr["x-component-props"]=It["x-component-props"],Ot.componentProps=It["x-component-props"];var Lr=Ot.path.entire.split(".");Lr.pop();var zr=Lr.join(".");Ot.query("".concat(zr,".*[0:].").concat(It.name)).forEach(function(no){no.props.name===It.name&&no.setComponentProps(j()({},Or))}),Fn.emit("patch",{schema:Nr}),Fn.refresh()}})},Ua=new ee.F({name:"fieldSettings:component:TimePicker",items:[{name:"timeDisplayFormat",Component:da,useComponentProps:function(){var Ge=(0,n.useFieldSchema)(),at=(0,Xe.z9)(),bt=at.fieldSchema,It=bt||Ge;return{fieldSchema:It}}}]}),ea=function(Tn){ze()(at,Tn);var Ge=se()(at);function at(){return le()(this,at),Ge.apply(this,arguments)}return _e()(at,[{key:"load",value:function(){var bt=O()(S()().mark(function Ot(){return S()().wrap(function(Fn){for(;;)switch(Fn.prev=Fn.next){case 0:this.schemaSettingsManager.add(Xt.O),this.schemaSettingsManager.add(mr.K),this.schemaSettingsManager.add(Er.r),this.schemaSettingsManager.add(Yt),this.schemaSettingsManager.add(sn),this.schemaSettingsManager.add(en),this.schemaSettingsManager.add(Rn),this.schemaSettingsManager.add(Zn),this.schemaSettingsManager.add(rr),this.schemaSettingsManager.add(jt.v),this.schemaSettingsManager.add(Bt),this.schemaSettingsManager.add(_t),this.schemaSettingsManager.add(nn),this.schemaSettingsManager.add(Ln),this.schemaSettingsManager.add(Te),this.schemaSettingsManager.add(Ze),this.schemaSettingsManager.add(tt),this.schemaSettingsManager.add(an),this.schemaSettingsManager.add(vn),this.schemaSettingsManager.add(fe),this.schemaSettingsManager.add(re),this.schemaSettingsManager.add(T),this.schemaSettingsManager.add(Pe),this.schemaSettingsManager.add(je),this.schemaSettingsManager.add(mn),this.schemaSettingsManager.add(We.f),this.schemaSettingsManager.add(nt),this.schemaSettingsManager.add(Tt.L),this.schemaSettingsManager.add(lt),this.schemaSettingsManager.add(ut),this.schemaSettingsManager.add(St),this.schemaSettingsManager.add(Le),this.schemaSettingsManager.add(be),this.schemaSettingsManager.add(Ft.d),this.schemaSettingsManager.add(Wt.F),this.schemaSettingsManager.add(Cn),this.schemaSettingsManager.add(Yr.pv),this.schemaSettingsManager.add(Yr.OA),this.schemaSettingsManager.add(co),this.schemaSettingsManager.add(Hr),this.schemaSettingsManager.add(Vr),this.schemaSettingsManager.add(Qr),this.schemaSettingsManager.add(dt),this.schemaSettingsManager.add(ht),this.schemaSettingsManager.add(Jo),this.schemaSettingsManager.add($t),this.schemaSettingsManager.add(st.Qh),this.schemaSettingsManager.add($e),this.schemaSettingsManager.add(Ve),this.schemaSettingsManager.add(Ht),this.schemaSettingsManager.add(it),this.schemaSettingsManager.add(Pt),this.schemaSettingsManager.add(Lt),this.schemaSettingsManager.add(xt.m),this.schemaSettingsManager.add(No),this.schemaSettingsManager.add(Ce),this.schemaSettingsManager.add(rt),this.schemaSettingsManager.add(Vt),this.schemaSettingsManager.add(Dt),this.schemaSettingsManager.add(Zo),this.schemaSettingsManager.add(Ua);case 61:case"end":return Fn.stop()}},Ot,this)}));function It(){return bt.apply(this,arguments)}return It}()}]),at}(me.S),Eo=e(82041)},88773:function(He,ae,e){"use strict";e.d(ae,{V:function(){return Z}});var Z=function(k){var i;return(k==null||(i=k["x-component-props"])===null||i===void 0?void 0:i["pattern-disable"])==!0}},51549:function(He,ae,e){"use strict";e.d(ae,{r:function(){return j}});var Z=e(97857),c=e.n(Z),k=e(9783),i=e.n(k),g=e(5552),C=e(80844),A=e(26793),r=e(67174),K=e(6145),v=e(62954),j={name:"SetDefaultSortingRules",type:"modal",useComponentProps:function(){var M,n=(0,K.useCollection_deprecated)(),y=n.name,L=(0,C.useField)(),o=(0,C.useFieldSchema)(),a=(0,K.useSortFields)(y),R=(0,r.Si)(),E=R.service,$=(0,A.$)(),Q=$.t,z=(0,v.ngQ)(),p=z.dn,b=(o==null||(M=o["x-decorator-props"])===null||M===void 0||(M=M.params)===null||M===void 0?void 0:M.sort)||[],f=b==null?void 0:b.map(function(x){return x!=null&&x.startsWith("-")?{field:x.substring(1),direction:"desc"}:{field:x,direction:"asc"}});return{title:Q("Set default sorting rules"),components:{ArrayItems:g.ArrayItems},schema:{type:"object",title:Q("Set default sorting rules"),properties:{sort:{type:"array",default:f,"x-component":"ArrayItems","x-decorator":"FormItem",items:{type:"object",properties:{space:{type:"void","x-component":"Space",properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},field:{type:"string",enum:a,required:!0,"x-decorator":"FormItem","x-component":"Select","x-component-props":{style:{width:260}}},direction:{type:"string","x-decorator":"FormItem","x-component":"Radio.Group","x-component-props":{optionType:"button"},enum:[{label:Q("ASC"),value:"asc"},{label:Q("DESC"),value:"desc"}]},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}}}},properties:{add:{type:"void",title:Q("Add sort field"),"x-component":"ArrayItems.Addition"}}}}},onSubmit:function(m){var F,I,d=m.sort,u=d.map(function(S){return S.direction==="desc"?"-".concat(S.field):S.field}),l=L.decoratorProps.params||{};l.sort=u,L.decoratorProps.params=l,o["x-decorator-props"].params=l,p.emit("patch",{schema:(F={},i()(F,"x-uid",o["x-uid"]),i()(F,"x-decorator-props",o["x-decorator-props"]),F)}),E.run(c()(c()({},(I=E.params)===null||I===void 0?void 0:I[0]),{},{sort:u}))}}},useVisible:function(){var M=(0,C.useField)(),n=M.decoratorProps.dragSort;return!n}}},26338:function(He,ae,e){"use strict";e.d(ae,{a:function(){return K}});var Z=e(9783),c=e.n(Z),k=e(80844),i=e(67294),g=e(67174),C=e(6145),A=e(62954),r=e(43319),K={name:"SetTheDataScope",Component:r.H,useComponentProps:function(){var j,h=(0,C.useCollection_deprecated)(),M=h.name,n=(0,k.useField)(),y=(0,k.useFieldSchema)(),L=(0,g.bz)(),o=L.form,a=(0,g.Si)(),R=a.service,E=(0,A.ngQ)(),$=E.dn,Q=(0,i.useCallback)(function(z){var p,b=z.filter;b=(0,A.WmO)(b);var f=n.decoratorProps.params||{};f.filter=b,n.decoratorProps.params=f,y["x-decorator-props"].params=f,$.emit("patch",{schema:(p={},c()(p,"x-uid",y["x-uid"]),c()(p,"x-decorator-props",y["x-decorator-props"]),p)}),R.params[0].page=1},[$,n.decoratorProps,y,R]);return{collectionName:M,defaultFilter:(y==null||(j=y["x-decorator-props"])===null||j===void 0||(j=j.params)===null||j===void 0?void 0:j.filter)||{},form:o,onSubmit:Q}}}},23461:function(He,ae,e){"use strict";e.d(ae,{AG:function(){return C},k0:function(){return g},rE:function(){return A}});var Z=e(97857),c=e.n(Z),k=e(67294),i=e(85893),g=(0,k.createContext)({componentNamePrefix:""}),C=function(K){return(0,i.jsx)(g.Provider,{value:c()(c()({},K),{},{componentNamePrefix:K.componentNamePrefix||""}),children:K.children})},A=function(){return(0,k.useContext)(g)}},15195:function(He,ae,e){"use strict";e.d(ae,{k0:function(){return Se.k0},bs:function(){return y},EF:function(){return Ee},AG:function(){return Se.AG},L:function(){return ze},Wc:function(){return w},Jv:function(){return P},Kb:function(){return D},rE:function(){return Se.rE},zy:function(){return q},$t:function(){return J}});var Z=e(97857),c=e.n(Z),k=e(5574),i=e.n(k),g=e(97832),C=e(69677),A=e(57953),r=e(67294),K=e(89250),v=e(21143),j=e(85782),h=e(62954),M=e(85893),n=function(me){var pe=(0,r.useState)(me.title),ee=i()(pe,2),ue=ee[0],ge=ee[1],Ie=(0,r.useState)(!1),Ae=i()(Ie,2),Le=Ae[0],Te=Ae[1],je=(0,v.useSchemaTemplateManager)(),Pe=je.refresh,fe=(0,v.useAPIClient)(),re=(0,v.useRequest)({resource:"uiSchemaTemplates",action:"update",params:{filterByTk:me.filterByTk}},{manual:!0,debounceWait:500,onSuccess:function(){Pe()}}),T=re.run;return(0,M.jsx)("div",{children:Le?(0,M.jsx)(C.Z,{defaultValue:ue,size:"large",onBlur:function(){Te(!1)},onChange:function(be){ge(be.target.value),T({filterByTk:me.filterByTk,values:{name:be.target.value}})}}):(0,M.jsx)("div",{onClick:function(){Te(!0)},children:ue||(0,M.jsx)("span",{style:{color:"#bbb"},children:"\u672A\u547D\u540D"})})})},y=function(){var me,pe,ee=(0,j.WO)(),ue=(0,K.useParams)(),ge=ue==null?void 0:ue.key,Ie=(0,r.useContext)(h.DDd),Ae=(0,r.useMemo)(function(){return c()(c()({},Ie),{},{designable:!0})},[Ie]),Le=(0,v.useRequest)({resource:"uiSchemaTemplates",action:"get",params:{filterByTk:ge}}),Te=Le.data,je=Le.loading;return je?(0,M.jsx)(A.Z,{}):(0,M.jsxs)("div",{children:[(0,M.jsx)(g.m,{style:{backgroundColor:"white"},onBack:function(){ee("/admin/plugins/block-templates")},ghost:!1,title:(0,M.jsx)(n,{filterByTk:ge,title:Te==null||(me=Te.data)===null||me===void 0?void 0:me.name})}),(0,M.jsx)("div",{style:{margin:"var(--nb-spacing)"},children:(0,M.jsx)(h.DDd.Provider,{value:Ae,children:(0,M.jsx)(h.m1v,{uid:Te==null||(pe=Te.data)===null||pe===void 0?void 0:pe.uid})})})]})},L=e(26793),o=e(9783),a=e.n(o),R=e(15009),E=e.n(R),$=e(99289),Q=e.n($),z=e(84327),p=e(67174),b=e(10097),f={name:"uiSchemaTemplates",filterTargetKey:"key",targetKey:"key",fields:[{type:"integer",name:"name",interface:"input",uiSchema:{title:'{{ t("Template name") }}',type:"number","x-component":"Input",required:!0}}]},x=e(12444),m=e.n(x),F=e(72004),I=e.n(F),d=e(31996),u=e.n(d),l=e(26037),S=e.n(l),H=e(80844),O=e(96486),N=e(12174),t=e(31601),B=e(6145),X=e(94804),V=e(31019),U=(0,H.observer)(function(se){var me=se.templateId,pe=J(),ee=pe.getTemplateById,ue=(0,H.useField)(),ge=(0,H.useFieldSchema)(),Ie=(0,v.useDesignable)(),Ae=Ie.dn,Le=(0,r.useMemo)(function(){return ee(me)},[me]),Te=(0,V.u)(),je=Te.onTemplateSuccess,Pe=function(re){var T,ce;ge["x-linkage-rules"]=(re==null||(T=re.data)===null||T===void 0?void 0:T["x-linkage-rules"])||[],ge.setProperties(re==null||(ce=re.data)===null||ce===void 0?void 0:ce.properties),je==null||je()};return Le?(0,M.jsx)(v.BlockTemplateProvider,{dn:Ae,field:ue,fieldSchema:ge,template:Le,children:(0,M.jsx)(v.RemoteSchemaComponent,{noForm:!0,uid:Le==null?void 0:Le.uid,onSuccess:Pe})}):(0,M.jsx)(v.CollectionDeletedPlaceholder,{type:"Block template",name:me})},{displayName:"BlockTemplate"}),D=(0,r.createContext)({});D.displayName="SchemaTemplateManagerContext";var ne=function se(me){me.name=me["x-uid"]=(0,z.uid)(),Object.keys(me.properties||{}).forEach(function(pe){se(me.properties[pe])})},q=function(){var me=J(),pe=me.getTemplateBySchema,ee=(0,H.useFieldSchema)(),ue=ee["x-uid"],ge=ee["x-template-key"];return(0,r.useMemo)(function(){return pe(ee)},[ue,ge])},J=function(){var me=(0,B.useCollectionManager_deprecated)(),pe=me.getInheritCollections,ee=(0,r.useContext)(D),ue=ee.refresh,ge=ee.templates,Ie=ge===void 0?[]:ge,Ae=(0,N.LY)();return{templates:Ie,refresh:ue,getTemplateSchemaByMode:(0,r.useCallback)(function(){var Le=Q()(E()().mark(function Te(je){var Pe,fe,re,T,ce;return E()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(Pe=je.mode,fe=je.template,Pe!=="copy"){oe.next=11;break}return oe.next=4,Ae.request({url:"/uiSchemas:getJsonSchema/".concat(fe.uid,"?includeAsyncNode=true")});case 4:return re=oe.sent,T=re.data,ce=(T==null?void 0:T.data)||{},ne(ce),oe.abrupt("return",(0,O.cloneDeep)(ce));case 11:if(Pe!=="reference"){oe.next=13;break}return oe.abrupt("return",{type:"void","x-component":"BlockTemplate","x-component-props":{templateId:fe.key}});case 13:case"end":return oe.stop()}},Te)}));return function(Te){return Le.apply(this,arguments)}}(),[Ae]),copyTemplateSchema:(0,r.useCallback)(function(){var Le=Q()(E()().mark(function Te(je){var Pe,fe,re;return E()().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return ce.next=2,Ae.request({url:"/uiSchemas:getJsonSchema/".concat(je.uid,"?includeAsyncNode=true")});case 2:return Pe=ce.sent,fe=Pe.data,re=(fe==null?void 0:fe.data)||{},ne(re),ce.abrupt("return",(0,O.cloneDeep)(re));case 7:case"end":return ce.stop()}},Te)}));return function(Te){return Le.apply(this,arguments)}}(),[Ae]),saveAsTemplate:(0,r.useCallback)(function(){var Le=Q()(E()().mark(function Te(je){var Pe,fe;return E()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return Pe=je.uid,fe=(0,z.uid)(),T.next=4,Ae.resource("uiSchemas").saveAsTemplate({filterByTk:Pe,values:c()({key:fe},je)});case 4:return T.next=6,ue();case 6:return T.abrupt("return",{key:fe});case 7:case"end":return T.stop()}},Te)}));return function(Te){return Le.apply(this,arguments)}}(),[Ae,ue]),getTemplateBySchema:(0,r.useCallback)(function(Le){if(Le){var Te=Le["x-template-key"];if(Te)return Ie==null?void 0:Ie.find(function(Pe){return Pe.key===Te});var je=Le["x-uid"];if(je)return Ie==null?void 0:Ie.find(function(Pe){return Pe.uid===je})}},[Ie]),getTemplateBySchemaId:(0,r.useCallback)(function(Le){return Le?Ie==null?void 0:Ie.find(function(Te){return Te.uid===Le}):null},[Ie]),getTemplateById:(0,r.useCallback)(function(Le){return Ie==null?void 0:Ie.find(function(Te){return Te.key===Le})},[Ie]),getTemplatesByCollection:(0,r.useCallback)(function(Le,Te){var je,Pe=pe(Te,Le),fe=Pe.concat([Te]),re=Ie==null||(je=Ie.filter)===null||je===void 0?void 0:je.call(Ie,function(T){return(T.dataSourceKey||X.Ip)===Le&&fe.includes(T.collectionName)});return re||[]},[pe,Ie]),getTemplatesByComponentName:(0,r.useCallback)(function(Le){var Te,je=Ie==null||(Te=Ie.filter)===null||Te===void 0?void 0:Te.call(Ie,function(Pe){return Pe.componentName===Le});return je||[]},[Ie])}},Y={resource:"uiSchemaTemplates",action:"list",params:{paginate:!1},refreshDeps:[]},P=function(me){var pe,ee=(0,N.LY)(),ue=(0,N.QT)(Y),ge=(0,r.useCallback)(Q()(E()().mark(function Ae(){var Le,Te;return E()().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,ee.request(Y);case 2:Le=Pe.sent,Te=Le.data,ue.mutate(Te);case 5:case"end":return Pe.stop()}},Ae)})),[ee,ue]),Ie=(0,r.useMemo)(function(){var Ae;return{templates:ue==null||(Ae=ue.data)===null||Ae===void 0?void 0:Ae.data,refresh:ge}},[ue==null||(pe=ue.data)===null||pe===void 0?void 0:pe.data,ge]);return(0,M.jsx)(D.Provider,{value:Ie,children:me.children})},w=function(se){u()(pe,se);var me=S()(pe);function pe(){return m()(this,pe),me.apply(this,arguments)}return I()(pe,[{key:"load",value:function(){var ee=Q()(E()().mark(function ge(){return E()().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:this.addRoutes(),this.addComponents();case 2:case"end":return Ae.stop()}},ge,this)}));function ue(){return ee.apply(this,arguments)}return ue}()},{key:"addComponents",value:function(){this.app.addComponents({BlockTemplate:U})}},{key:"addRoutes",value:function(){this.app.router.add("admin.plugins.block-templates-key",{path:"/admin/plugins/block-templates/:key",Component:"BlockTemplateDetails"})}}]),pe}(t.S),ie=function(me){var pe=(0,X.nE)(),ee=pe.dataSourceKey,ue=ee===void 0?"main":ee,ge=pe.collectionName,Ie=(0,X.fp)(),Ae=(0,h.eJW)(),Le=(0,r.useMemo)(function(){var fe=Ie.getDataSource(ue);if(fe){var re=fe.collectionManager.getCollection(ge);return[fe.displayName,(re==null?void 0:re.title)||ge]}return[ue,null]},[Ie,ue,ge]),Te=i()(Le,2),je=Te[0],Pe=Te[1];return(0,M.jsxs)(M.Fragment,{children:[Ae(je)," ",">"," ",Ae(Pe)]})},G=function(){var me=(0,b.useUpdateActionProps)(),pe=(0,p.BU)(),ee=pe.__parent;return{onClick:function(){return Q()(E()().mark(function ge(){var Ie,Ae;return E()().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,me.onClick();case 2:ee==null||(Ie=ee.service)===null||Ie===void 0||(Ae=Ie.refresh)===null||Ae===void 0||Ae.call(Ie);case 3:case"end":return Te.stop()}},ge)}))()}}},le=function(){var me=(0,b.useBulkDestroyActionProps)(),pe=J(),ee=(0,p.BU)(),ue=ee.service;return{onClick:function(){return Q()(E()().mark(function Ie(){var Ae;return E()().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,me.onClick();case 2:return Te.next=4,pe.refresh();case 4:ue==null||(Ae=ue.refresh)===null||Ae===void 0||Ae.call(ue);case 5:case"end":return Te.stop()}},Ie)}))()}}},xe=function(){var me=(0,b.useDestroyActionProps)(),pe=(0,p.BU)(),ee=pe.service,ue=J();return{onClick:function(){return Q()(E()().mark(function Ie(){var Ae;return E()().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return Te.next=2,me.onClick();case 2:return Te.next=4,ue.refresh();case 4:ee==null||(Ae=ee.refresh)===null||Ae===void 0||Ae.call(ee);case 5:case"end":return Te.stop()}},Ie)}))()}}},_e={type:"object",properties:a()({},(0,z.uid)(),{type:"void","x-decorator":"TableBlockProvider","x-decorator-props":{collection:f,resource:"uiSchemaTemplates",action:"list",params:{pageSize:20,sort:["-createdAt"]},rowKey:"key",showIndex:!0,dragSort:!1},"x-component":"CardItem",properties:a()({actions:{type:"void","x-component":"ActionBar","x-component-props":{style:{marginBottom:16}},properties:{destroy:{title:'{{ t("Delete") }}',"x-action":"destroy","x-component":"Action","x-use-component-props":le,"x-component-props":{icon:"DeleteOutlined",confirm:{title:"{{t('Delete record')}}",content:"{{t('Are you sure you want to delete it?')}}"}}}}}},(0,z.uid)(),{type:"array","x-component":"TableV2","x-use-component-props":"useTableBlockProps","x-component-props":{rowSelection:{type:"checkbox"}},properties:{actions:{type:"void",title:'{{ t("Actions") }}',"x-component":"TableV2.Column",properties:{actions:{type:"void","x-decorator":"DndContext","x-component":"Space","x-component-props":{split:"|"},properties:{edit:{type:"void",title:'{{ t("Edit") }}',"x-action":"update","x-component":"Action.Link","x-component-props":{openMode:"drawer",icon:"EditOutlined",refreshDataBlockRequest:!1},properties:{drawer:{type:"void",title:'{{ t("Edit record") }}',"x-component":"Action.Container","x-component-props":{className:"nb-action-popup"},properties:{form:{type:"void","x-decorator":"FormBlockProvider","x-decorator-props":{resource:"uiSchemaTemplates",collection:f,action:"get",useParams:"{{ useParamsFromRecord }}"},"x-component":"CardItem",properties:a()({},(0,z.uid)(),{type:"void","x-component":"FormV2","x-use-component-props":"useFormBlockProps",properties:{name:{type:"string","x-component":"CollectionField","x-decorator":"FormItem","x-collection-field":"uiSchemaTemplates.name",required:!0},actions:{type:"void","x-component":"ActionBar","x-component-props":{layout:"one-column",style:{marginTop:24}},properties:{submit:{title:'{{t("Submit")}}',"x-action":"submit","x-component":"Action","x-use-component-props":G,"x-component-props":{type:"primary",htmlType:"submit"},type:"void"}}}}})}}}}},destroy:{title:'{{ t("Delete") }}',"x-action":"destroy","x-component":"Action.Link","x-use-component-props":xe,"x-component-props":{icon:"DeleteOutlined",confirm:{title:"{{t('Delete record')}}",content:"{{t('Are you sure you want to delete it?')}}"}}}}}}},column1:{type:"void","x-decorator":"TableV2.Column.Decorator","x-component":"TableV2.Column",properties:{name:{type:"string","x-collection-field":"uiSchemaTemplates.name","x-component":"CollectionField","x-read-pretty":!0,"x-component-props":{ellipsis:!0}}}},column2:{type:"void",title:'{{t("Collection display name")}}',"x-component":"TableV2.Column",properties:{"collection.title":{type:"string","x-component":ie,"x-read-pretty":!0,"x-component-props":{ellipsis:!0}}}}}})})},Ee=function(){var me=(0,L.$)(),pe=me.t;return(0,M.jsxs)("div",{children:[(0,M.jsx)(g.m,{style:{backgroundColor:"white"},ghost:!1,title:pe("Block templates")}),(0,M.jsx)("div",{style:{margin:"var(--nb-spacing)"},children:(0,M.jsx)(h.n6,{schema:_e})})]})},ze=function(){return(0,M.jsx)(h.n6,{schema:_e})},Se=e(23461)},39863:function(He,ae,e){"use strict";e.d(ae,{d:function(){return c.d},k:function(){return Z.kc}});var Z=e(27443),c=e(68230)},68230:function(He,ae,e){"use strict";e.d(ae,{d:function(){return c}});var Z=e(9361),c=function(){var i=Z.Z.useToken();return i}},15585:function(He,ae,e){"use strict";e.d(ae,{YO:function(){return a},a$:function(){return t},j8:function(){return X},C6:function(){return E},HX:function(){return R}});var Z=e(15009),c=e.n(Z),k=e(99289),i=e.n(k),g=e(12444),C=e.n(g),A=e(72004),r=e.n(A),K=e(31996),v=e.n(K),j=e(26037),h=e.n(j),M=e(97857),n=e.n(M),y=e(67294),L=e(12174),o=e(85893),a=(0,y.createContext)(null);a.displayName="SystemSettingsContext";var R=function(){return(0,y.useContext)(a)},E=function(U){var D=(0,L.QT)({url:"systemSettings:get?appends=logo,authLogo"});return(0,o.jsx)(a.Provider,{value:n()({},D),children:U.children})},$=e(9783),Q=e.n($),z=e(80844),p=e(84327),b=e(45360),f=e(4393),x=e(50361),m=e.n(x),F=e(26793),I=e(21143),d=e(35310),u=e(62954),l=Object.keys(d.ZP).map(function(V){return{label:"".concat(d.ZP[V].label," (").concat(V,")"),value:V}}),S=function(){var U=(0,u.XCj)(),D=U.setVisible;return{run:function(){return i()(c()().mark(function q(){return c()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:D(!1);case 1:case"end":return Y.stop()}},q)}))()}}},H=function(U){var D=(0,u.XCj)(),ne=D.visible,q=R();return(0,I.useRequest)(function(){return Promise.resolve(q==null?void 0:q.data)},n()(n()({},U),{},{refreshDeps:[ne,q==null?void 0:q.data]}))},O=function(){var U=(0,u.XCj)(),D=U.setVisible,ne=(0,z.useForm)(),q=R()||{},J=q.mutate,Y=q.data,P=(0,I.useAPIClient)(),w=(0,F.$)(),ie=w.t;return{run:function(){return i()(c()().mark(function le(){var xe,_e,Ee;return c()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.next=2,ne.submit();case 2:return _e=m()(ne.values),J({data:n()(n()({},Y==null?void 0:Y.data),_e)}),Se.next=6,P.request({url:"systemSettings:put",method:"post",data:_e});case 6:b.ZP.success(ie("Saved successfully")),Ee=((xe=_e.enabledLanguages)===null||xe===void 0?void 0:xe[0])||"en-US",_e.enabledLanguages.length<2&&P.auth.getLocale()!==Ee?(P.auth.setLocale(""),window.location.reload()):D(!1);case 9:case"end":return Se.stop()}},le)}))()}}},N={type:"object",properties:Q()({},(0,p.uid)(),{"x-decorator":"Form","x-decorator-props":{useValues:"{{ useSystemSettingsValues }}"},"x-component":"div",type:"void",title:'{{t("System settings")}}',properties:{raw_title:{type:"string",title:"{{t('System title')}}","x-decorator":"FormItem","x-component":"TextAreaWithGlobalScope","x-component-props":{supportsLineBreak:!0},required:!0},logo:{type:"string",title:"{{t('Logo')}}","x-decorator":"FormItem","x-component":"Upload.Attachment","x-component-props":{action:"attachments:create",multiple:!1},"x-use-component-props":"useFileCollectionStorageRules"},authLogo:{type:"string",title:"{{t('Logo na stronie logowania')}}","x-decorator":"FormItem","x-component":"Upload.Attachment","x-component-props":{action:"attachments:create",multiple:!1},"x-use-component-props":"useFileCollectionStorageRules"},enabledLanguages:{type:"array",title:'{{t("Enabled languages")}}',"x-component":"Select","x-component-props":{mode:"multiple"},"x-decorator":"FormItem",enum:l,"x-reactions":function(U){U.dataSource=l.map(function(D){var ne,q=D.label;return((ne=U.value)===null||ne===void 0?void 0:ne[0])===D.value&&(q+="(".concat(I.i18n.t("Default"),")")),{label:q,value:D.value}})}},footer1:{type:"void","x-component":"ActionBar","x-component-props":{layout:"one-column"},properties:{submit:{title:'{{t("Submit")}}',"x-component":"Action","x-component-props":{type:"primary",htmlType:"submit",useAction:"{{ useSaveSystemSettingsValues }}"}}}}}})},t=function(){return(0,o.jsx)(f.Z,{bordered:!1,children:(0,o.jsx)(u.n6,{scope:{useSaveSystemSettingsValues:O,useSystemSettingsValues:H,useCloseAction:S},schema:N})})},B=e(31601),X=function(V){v()(D,V);var U=h()(D);function D(){return C()(this,D),U.apply(this,arguments)}return r()(D,[{key:"load",value:function(){var ne=i()(c()().mark(function J(){return c()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:this.app.use(E,this.options);case 1:case"end":return P.stop()}},J,this)}));function q(){return ne.apply(this,arguments)}return q}()}]),D}(B.S)},16779:function(He,ae,e){"use strict";e.d(ae,{G:function(){return j}});var Z=e(12444),c=e.n(Z),k=e(72004),i=e.n(k),g=e(31996),C=e.n(g),A=e(26037),r=e.n(A),K=e(12174),v=function(h){C()(n,h);var M=r()(n);function n(){return c()(this,n),M.apply(this,arguments)}return i()(n,[{key:"mockAdapter",value:function(){var L=e(19448);return new L(this.axios)}}]),n}(K.lP),j=function(){var M=new v,n=M.mockAdapter();return{apiClient:M,mockRequest:n}}},6438:function(He,ae,e){"use strict";e.d(ae,{Ec:function(){return v},MF:function(){return M},mY:function(){return R},yI:function(){return i},SV:function(){return k},ih:function(){return h},OP:function(){return j},t$:function(){return a}});var Z=e(67294),c=e(7737),k=function($){return c.T},i=(0,Z.createContext)(null);i.displayName="DropdownVisibleContext";var g=e(47646),C=e(12174),A=e(68091),r=e(62954),K=e(85893),v=(0,Z.createContext)(null);v.displayName="CurrentUserContext";var j=function(){return(0,Z.useContext)(v)},h=function(){var $,Q=(0,g.ov)(),z=Q.allowAnonymous,p=j(),b=p.data,f=(0,r.eJW)(),x=(0,Z.useMemo)(function(){var m,F=((b==null||(m=b.data)===null||m===void 0?void 0:m.roles)||[]).map(function(I){var d=I.name,u=I.title;return{name:d,title:f(u)}});return z&&F.push({title:"Anonymous",name:"anonymous"}),F},[z,b==null||($=b.data)===null||$===void 0?void 0:$.roles]);return x},M=function($){var Q=(0,C.LY)(),z=(0,C.QT)(function(){return Q.request({url:"/auth:check",skipNotify:!0,skipAuth:!0}).then(function(f){return f==null?void 0:f.data})}),p=(0,A.rM)(),b=p.render;return z.loading?b():(0,K.jsx)(v.Provider,{value:z,children:$.children})},n=e(19632),y=e.n(n),L=e(84157),o=(0,Z.createContext)(null);o.displayName="CurrentUserSettingsMenuContext";var a=function(){var $=(0,Z.useContext)(o)||{},Q=$.menuItems,z=(0,Z.useCallback)(function(){return Q.current},[Q]),p=(0,Z.useCallback)(function(b,f){var x,m,F;if(f&&(b._options=f),(F=Q.current.findIndex(function(l){return l.key===b.key}))!==-1){Q.current[F]=b,Q.current=y()(Q.current);return}if(f){if(f.before){var I=Q.current.findIndex(function(l){return l.key===f.before});Q.current.splice(I,0,b);return}if(f.after){var d=Q.current.findIndex(function(l){return l.key===f.after});Q.current.splice(d+1,0,b);return}}var u=Q.current;Q.current=u.filter(function(l){var S,H;return b.key!==((S=l._options)===null||S===void 0?void 0:S.before)&&b.key!==((H=l._options)===null||H===void 0?void 0:H.after)}),(x=Q.current).push.apply(x,y()(u.filter(function(l){var S;return((S=l._options)===null||S===void 0?void 0:S.before)===b.key}))),Q.current.push(b),(m=Q.current).push.apply(m,y()(u.filter(function(l){var S;return((S=l._options)===null||S===void 0?void 0:S.after)===b.key})))},[Q]);if(!Q)throw(0,L.error)("CurrentUser: You should use `CurrentUserSettingsMenuProvider` in the root of your app."),new Error("CurrentUser: You should use `CurrentUserSettingsMenuProvider` in the root of your app.");return{getMenuItems:z,addMenuItem:p}},R=function($){var Q=$.children,z=(0,Z.useRef)([]),p=(0,Z.useMemo)(function(){return{menuItems:z}},[z]);return(0,K.jsx)(o.Provider,{value:p,children:Q})}},50105:function(He,ae,e){"use strict";e.d(ae,{cB:function(){return S},ZP:function(){return t}});var Z=e(9783),c=e.n(Z),k=e(97857),i=e.n(k),g=e(15009),C=e.n(g),A=e(99289),r=e.n(A),K=e(85667),v=e(84157),j=e(96486),h=e.n(j),M=e(67294),n=e(12174),y=e(6145),L=e(8341),o=e(62954),a=e(69277),R=new Map,E=function(ne,q,J){var Y=R.get(ne);Y?Y[q]=J:R.set(ne,c()({},q,J))},$=function(ne,q){var J=R.get(ne);return J==null?void 0:J[q]},Q=function(ne){return Array.isArray(ne)?ne.filter(function(q){return q===0||q===!1||q}):ne},z={hasMany:"list?pageSize=9999",belongsTo:"get",hasOne:"get",belongsToMany:"list?pageSize=9999",belongsToArray:"get"},p=function(ne){return z[ne]},b=e(90615),f={},x=function(ne){return!!f[ne]},m=function(ne){return f[ne]},F=function(ne,q){f[ne]=q},I=function(ne){delete f[ne]},d=e(76690),u=function(ne){return!Array.isArray(ne)||!h().isObject(ne[0])?ne:h().uniqBy(ne,function(q){return"id"in q?q.id:JSON.stringify(q)})},l=e(85893),S=(0,M.createContext)(null);S.displayName="VariablesContext";var H={},O=function(ne,q){var J,Y,P=ne.split("."),w=P.map(function(ie){return q[ie]?(J=q[ie].dataSource,Y=q[ie],q[ie].collectionName):ie});return{fieldPath:w.join("."),dataSource:J,variableOption:Y}},N=function(ne){var q=ne.children,J=ne.filterVariables,Y=(0,M.useRef)({}),P=(0,n.LY)(),w=(0,y.useCollectionManager_deprecated)(),ie=w.getCollectionJoinField,G=w.getCollection,le=(0,o.eJW)(),xe=(0,a.Z)(),_e=xe.builtinVariables,Ee=(0,M.useCallback)(function(ge){h().isFunction(ge)?Y.current=ge(Y.current):Y.current=ge},[]),ze=(0,M.useCallback)(function(){var ge=r()(C()().mark(function Ie(Ae,Le,Te){var je,Pe,fe,re,T,ce,be,oe,Re,Ze,We,tt,St,Tt,lt,ut,nt;return C()().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:if(Pe=Ae.split("."),fe=Pe[0],re=V(H,Le),T=X(Y.current,Le),ce=O(fe,re),be=ce.fieldPath,oe=ce.dataSource,Re=ce.variableOption,Ze=be,We=O(Ae,re),tt=We.fieldPath,St=Pe.length===1?Re==null?void 0:Re.collectionName:(je=ie(tt,oe))===null||je===void 0?void 0:je.target,fe in T){hn.next=10;break}throw new Error("VariablesProvider: ".concat(fe," is not found"));case 10:Tt=C()().mark(function mn(){var vn,an,fn,cn,_n,zt,xn,Qt,Et,en,Rn,An;return C()().wrap(function(Zn){for(;;)switch(Zn.prev=Zn.next){case 0:if(T!=null){Zn.next=2;break}return Zn.abrupt("return",{v:{value:T===void 0?Re==null?void 0:Re.defaultValue:T,dataSource:oe,collectionName:St}});case 2:if(an=Pe[ut],fn=Pe.slice(0,ut+1).join("."),cn=O(fn,re),_n=cn.fieldPath,zt=ie(_n,oe),xn=(vn=G(Ze,oe))===null||vn===void 0?void 0:vn.getPrimaryKey(),!Array.isArray(T)){Zn.next=19;break}return Qt=T.map(function(rr){if(!(Te!=null&&Te.doNotRequest)&&B(rr==null?void 0:rr[an],rr,fn)&&(rr==null?void 0:rr[xn])!=null&&zt!=null&&zt.target){var mr="/".concat(Ze,"/").concat(rr[zt.sourceKey||xn],"/").concat(an,":").concat(p(zt.type));if(x(mr))return m(mr);var Er=P.request({headers:(0,L.GX)(oe),url:mr,params:{appends:Te==null?void 0:Te.appends}}).then(function(Ft){I(mr);var ct=Ft.data.data;return E(rr,fn,ct),ct});return F(mr,Er),Er}return $(rr,fn)||(rr==null?void 0:rr[an])}),Zn.t0=U,Zn.t1=h(),Zn.next=13,Promise.all(Qt);case 13:Zn.t2=Zn.sent,Zn.t3=Zn.t1.flatten.call(Zn.t1,Zn.t2),Zn.t4=zt,T=(0,Zn.t0)(Zn.t3,Zn.t4),Zn.next=40;break;case 19:if(!(!(Te!=null&&Te.doNotRequest)&&B(T[an],T,fn)&&T[xn]!=null&&zt!==null&&zt!==void 0&&zt.target)){Zn.next=39;break}if(Et="/".concat(Ze,"/").concat(T[zt.sourceKey||xn],"/").concat(an,":").concat(p(zt.type)),en=null,!x(Et)){Zn.next=28;break}return Zn.next=25,m(Et);case 25:en=Zn.sent,Zn.next=34;break;case 28:return Rn=P.request({headers:(0,L.GX)(oe),url:Et,params:{appends:Te==null?void 0:Te.appends}}),F(Et,Rn),Zn.next=32,Rn;case 32:en=Zn.sent,I(Et);case 34:An=en.data.data,$(T,fn)||E(T,fn,An),T=U(An,zt),Zn.next=40;break;case 39:T=U($(T,fn)||(0,v.getValuesByPath)(T,an),zt);case 40:zt!=null&&zt.target&&(Ze=zt.target);case 41:case"end":return Zn.stop()}},mn)}),ut=0;case 12:if(!(ut<Pe.length)){hn.next=20;break}return hn.delegateYield(Tt(),"t0",14);case 14:if(lt=hn.t0,!lt){hn.next=17;break}return hn.abrupt("return",lt.v);case 17:ut++,hn.next=12;break;case 20:return nt=le(h().isFunction(T)?T({fieldOperator:Te==null?void 0:Te.fieldOperator,isParsingVariable:!0}):T),hn.abrupt("return",{value:nt===void 0?Re.defaultValue:nt,dataSource:oe,collectionName:St});case 22:case"end":return hn.stop()}},Ie)}));return function(Ie,Ae,Le){return ge.apply(this,arguments)}}(),[ie]),Se=(0,M.useCallback)(function(ge){if(!(0,d.cG)("{{".concat(ge.name,"}}")))throw new Error("VariablesProvider: ".concat(ge.name," is not a valid name"));Ee(function(Ie){return i()(i()({},Ie),{},c()({},ge.name,ge.ctx))}),H[ge.name]=i()(i()({},ge),{},{defaultValue:h().has(ge,"defaultValue")?ge.defaultValue:null})},[Ee]),se=(0,M.useCallback)(function(ge){return Y.current[ge]?i()({},H[ge]):null},[]),me=(0,M.useCallback)(function(ge){Ee(function(Ie){var Ae=i()({},Ie);return delete Ae[ge],Ae}),delete H[ge]},[Ee]),pe=(0,M.useCallback)(function(){var ge=r()(C()().mark(function Ie(Ae,Le,Te){var je,Pe;return C()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:if((0,d.cG)(Ae)){re.next=2;break}return re.abrupt("return",Ae);case 2:return Le&&(Le=h().isArray(Le)?Le:[Le]),je=(0,b.D)(Ae),re.next=6,ze(je,Le,Te);case 6:return Pe=re.sent,re.abrupt("return",i()(i()({},Pe),{},{value:u(Q(Pe.value))}));case 8:case"end":return re.stop()}},Ie)}));return function(Ie,Ae,Le){return ge.apply(this,arguments)}}(),[ze]),ee=(0,M.useCallback)(function(){var ge=r()(C()().mark(function Ie(Ae,Le){var Te,je,Pe,fe,re,T,ce;return C()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if((0,d.cG)(Ae)){oe.next=2;break}throw new Error("VariablesProvider: ".concat(Ae," is not a variable string"));case 2:return Le&&(Le=h().isArray(Le)?Le:[Le]),Te=V(H,Le),je=(0,b.D)(Ae),Pe=O(je,Te),fe=Pe.fieldPath,re=Pe.dataSource,T=ie(fe,re),!T&&!je.includes(".")&&(T={target:(ce=Te[je])===null||ce===void 0?void 0:ce.collectionName}),oe.abrupt("return",T);case 9:case"end":return oe.stop()}},Ie)}));return function(Ie,Ae){return ge.apply(this,arguments)}}(),[ie]);(0,M.useEffect)(function(){_e.forEach(function(ge){Se(i()(i()({},ge),{},{defaultValue:h().has(ge,"defaultValue")?ge.defaultValue:null}))})},[_e,Se]);var ue=(0,M.useMemo)(function(){return{ctxRef:Y,setCtx:Ee,parseVariable:pe,registerVariable:Se,getVariable:se,getCollectionField:ee,removeVariable:me,filterVariables:J}},[ee,se,pe,Se,me,Ee]);return(0,l.jsx)(S.Provider,{value:ue,children:q})};N.displayName="VariablesProvider";var t=N;function B(D,ne,q){var J=!1;return $(ne,q)?!1:((0,K.untracked)(function(){if(JSON.stringify(D)==="[{}]"||JSON.stringify(D)==="{}"){J=!0;return}J=h().isEmpty(D)}),J)}function X(D,ne){return D=i()({},D),ne==null||ne.forEach(function(q){D[q.name]=q.ctx}),D}function V(D,ne){return D=i()({},D),ne==null||ne.forEach(function(q){D[q.name]=i()(i()({},q),{},{defaultValue:h().has(q,"defaultValue")?q.defaultValue:null})}),D}function U(D,ne){return!(ne!=null&&ne.through)||!D?D:Array.isArray(D)?D.map(function(q){return h().omit(q,ne.through)}):h().omit(D,ne.through)}},21044:function(He,ae,e){"use strict";e.d(ae,{Nu:function(){return k},fw:function(){return c},on:function(){return Z}});var Z=100,c=void 0,k=Object.freeze({})},69277:function(He,ae,e){"use strict";var Z=e(84157),c=e(67294),k=e(57638),i=e(90297),g=e(33495),C=e(45621),A=e(95604),r=function(){var v=(0,i.AO)(),j=v.currentUserCtx,h=(0,C.K)(),M=h.currentRoleCtx,n=(0,g.I)(),y=n.apiTokenCtx,L=(0,i.Ld)(),o=L.datetimeCtx,a=(0,A.F5)(),R=a.urlSearchParamsCtx,E=a.name,$=a.defaultValue,Q=(0,c.useMemo)(function(){return[{name:"$user",ctx:j,collectionName:"users",dataSource:k.ym},{name:"$nRole",ctx:M,collectionName:"roles"},{name:"$nToken",ctx:y},{name:"currentUser",ctx:j,collectionName:"users",dataSource:k.ym},{name:"$nDate",ctx:o},{name:"$date",ctx:o},{name:"$system",ctx:{now:function(){return(0,Z.dayjs)().toISOString()}}},{name:"currentTime",ctx:function(){return(0,Z.dayjs)().toISOString()}},{name:E,ctx:R,defaultValue:$}]},[M,j,o,$,R,E]);return{builtinVariables:Q}};ae.Z=r},59388:function(He,ae,e){"use strict";var Z=e(97857),c=e.n(Z),k=e(67294),i=e(1892),g=e(94804),C=e(58837),A=e(75585),r=e(22891),K=e(14984),v=function(){var h,M,n=(0,K.a)(),y=n.isPopupVisibleControlledByURL,L=(0,A.Zm)(),o=L.params,a=(0,C.Kx)(),R=(0,g.xQ)(),E=(0,i.bE)()||{};if(y()){var $;M=($=(0,r.XQ)(o==null?void 0:o.popupuid))===null||$===void 0?void 0:$.tableBlockContext}else M=c()(c()({},E),{},{collection:a,blockData:R});var Q=M||{},z=Q.field,p=Q.blockData,b=Q.rowKey,f=Q.collection,x=(0,k.useMemo)(function(){var m,F;return p==null||(m=p.data)===null||m===void 0||(F=m.filter)===null||F===void 0?void 0:F.call(m,function(I){var d,u;return(d=(z==null||(u=z.data)===null||u===void 0?void 0:u.selectedRowKeys)||[])===null||d===void 0?void 0:d.includes(I[b])})},[z==null||(h=z.data)===null||h===void 0?void 0:h.selectedRowKeys,b,p]);return(0,k.useMemo)(function(){return{name:"$context",ctx:x||[],collectionName:f}},[f,x])};ae.Z=v},37975:function(He,ae,e){"use strict";var Z=e(67294),c=e(6145),k=e(67527),i=e(25801),g=e(90499),C=e(23971),A=e(43139),r=e(56062),K=e(11764),v=e(57519),j=e(96808),h=e(59388),M=function(y){var L=(0,A.$)(),o=L.parentObjectCtx,a=L.shouldDisplayParentObject,R=L.collectionName,E=(0,C.wM)(),$=E.currentObjectCtx,Q=E.shouldDisplayCurrentObject,z=(0,j.W6)(),p=z.currentRecordCtx,b=z.collectionName,f=(0,K.Ix)(),x=f.currentParentRecordCtx,m=f.collectionName,F=f.dataSource,I=(0,v.g)(),d=I.popupRecordCtx,u=I.collectionName,l=I.dataSource,S=I.defaultValue,H=(0,r.s)(),O=H.parentPopupRecordCtx,N=H.collectionName,t=H.dataSource,B=H.defaultValue,X=(0,i.FB)(),V=X.datetimeCtx,U=(0,g.bU)({form:y==null?void 0:y.currentForm}),D=U.currentFormCtx,ne=(0,c.useCollection_deprecated)(),q=ne.name,J=(0,h.Z)(),Y=(0,k.J)(),P=Y.name;return y!=null&&y.collectionName&&(P=y.collectionName),(0,Z.useMemo)(function(){return[{name:"currentRecord",ctx:p,collectionName:b},{name:P,ctx:D||p,collectionName:P},{name:"$form",ctx:D,collectionName:P},{name:"$nRecord",ctx:p,collectionName:b,dataSource:F},{name:"$nParentRecord",ctx:x,collectionName:m,dataSource:F},{name:"$nPopupRecord",ctx:d,collectionName:u,dataSource:l,defaultValue:S},{name:"$nParentPopupRecord",ctx:O,collectionName:N,dataSource:t,defaultValue:B},{name:"$nForm",ctx:D,collectionName:P},{name:"$nDate",ctx:V},{name:"$date",ctx:V},J,Q&&{name:"$iteration",ctx:$,collectionName:q},a&&{name:"$nParentIteration",ctx:o,collectionName:R}].filter(Boolean)},[p,b,P,D,x,m,F,d,O,u,l,V,Q,$,q,S,B,a,o,R,J])};ae.Z=M},94656:function(He,ae,e){"use strict";var Z=e(67294),c=e(50105),k=function(){return(0,Z.useContext)(c.cB)};ae.Z=k},64910:function(He,ae,e){"use strict";e.d(ae,{Bj:function(){return C.Bj},J8:function(){return A.J},Kp:function(){return i.Z},L7:function(){return c.Z},Nu:function(){return r.Nu},OQ:function(){return g.Z},Uj:function(){return Z.ZP},Ym:function(){return k.Z},cB:function(){return Z.cB},cG:function(){return C.cG},fN:function(){return C.fN},fw:function(){return r.fw},on:function(){return r.on},ts:function(){return C.ts}});var Z=e(50105),c=e(69277),k=e(59388),i=e(37975),g=e(94656),C=e(76690),A=e(65565),r=e(21044)},90615:function(He,ae,e){"use strict";e.d(ae,{D:function(){return c}});var Z=e(76690),c=function(i){if(!i)return i;var g=i.match(Z.ts);return g[0].replace(Z.ts,"$1")}},44256:function(He,ae,e){"use strict";e.d(ae,{H:function(){return i}});var Z=e(96486),c=e.n(Z),k=e(90615),i=function(C){if(!c().isString(C))return C;var A=(0,k.D)(C),r=A.split("."),K=r[0];return K}},76690:function(He,ae,e){"use strict";e.d(ae,{Bj:function(){return c},cG:function(){return k},fN:function(){return i},ts:function(){return Z}});var Z=/^\s*\{\{\s*([a-zA-Z0-9_$-.]+?)\s*\}\}\s*$/g,c=/\{\{\s*([a-zA-Z0-9_$-.]+?)\s*\}\}/g,k=function(C){if(typeof C!="string")return!1;var A=C.match(Z);return!!A},i=function(C){var A=C.match(c);return A||[]}},65565:function(He,ae,e){"use strict";e.d(ae,{J:function(){return g}});var Z=e(97857),c=e.n(Z),k=e(96486),i=e.n(k),g=function(A,r){var K=r.targetCollectionField;return A==null||!K?A:K.interface==="chinaRegion"&&Array.isArray(A)?A.map(function(v){return i().isObject(v),v=c()({},v),Object.keys(v).forEach(function(j){i().isObjectLike(v[j])&&delete v[j]}),v}):["hasMany","belongsToMany"].includes(K.type)?Array.isArray(A)?A:[A]:(K.interface==="json",A)}},27655:function(He,ae,e){"use strict";e.r(ae),e.d(ae,{default:function(){return f},evaluators:function(){return p},getOptions:function(){return b}});var Z=e(97857),c=e.n(Z),k=e(5574),i=e.n(k),g=e(84157),C=e(83362),A=e(6511),r=e(96486);function K(x,m){for(var F=m.split("."),I=x,d=function(){var S,H=F[u],O=H.match(/^\d+$/);Array.isArray(I)&&!O&&!I[H]&&(I[H]=I.map(function(N){return N[H]}).flat()),I=(S=I)===null||S===void 0?void 0:S[H]},u=0;u<F.length&&I!=null;u++)d()}function v(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},m=arguments.length>1?arguments[1]:void 0,F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},I=(0,r.cloneDeep)(F),d={},u={},l=0,S=m.trim().replace(/{{\s*([\w$.-]+)\s*}}/g,function(H,O){var N;if(O.startsWith("this."))return"{{".concat(O,"}}");K(I,O);var t=(N=(0,r.get)(I,O))!==null&&N!==void 0?N:null;typeof t=="function"&&(t=t());var B=u[O];return B||(B="$$".concat(l++),u[O]=B,d[B]=t),x.replaceValue?"".concat(t==null||typeof t=="number"&&(Number.isNaN(t)||!Number.isFinite(t))?"":t):B});return this(S,d)}var j=v.bind(function(x){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},F=C.ku(x,m);return typeof F=="number"?Number.isNaN(F)||!Number.isFinite(F)?null:A.NMM(F,14):F instanceof A.y3G?F.toArray():F},{replaceKey:!0}),h={label:"Math.js",tooltip:"{{t('Math.js comes with a large set of built-in functions and constants, and offers an integrated solution to work with different data types.')}}",link:"https://docs.nocobase.com/handbook/calculation-engines/mathjs",evaluate:j},M=e(42672),n=e.n(M),y=e(19632),L=e.n(y),o=e(11590),a=Object.keys(o).filter(function(x){return x!=="default"}),R=a.map(function(x){return o[x]}),E=v.bind(function(x){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},F=n()(Function,L()(a).concat(L()(Object.keys(m)),["return ".concat(x)])),I=F.apply(void 0,L()(R).concat(L()(Object.values(m))));return typeof I=="number"?Number.isNaN(I)||!Number.isFinite(I)?null:(0,A.NMM)(I,14):I},{}),$={label:"Formula.js",tooltip:'{{t("Formula.js supports most Microsoft Excel formula functions.")}}',link:"https://docs.nocobase.com/handbook/calculation-engines/formula",evaluate:E},Q=v.bind(function(x){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return x},{replaceValue:!0}),z={label:"{{t('String template')}}",tooltip:"{{t('Simple string replacement, can be used to interpolate variables in a string.')}}",evaluate:Q},p=new g.Registry;p.register("formula.js",$),p.register("math.js",h),p.register("string",z);function b(){return Array.from(p.getEntities()).reduce(function(x,m){var F=i()(m,2),I=F[0],d=F[1];return x.concat(c()({value:I},d))},[])}var f=p},84816:function(He,ae,e){"use strict";e.r(ae),e.d(ae,{APIClient:function(){return F},Auth:function(){return f},MemoryStorage:function(){return m},Storage:function(){return x},getSubAppName:function(){return d}});var Z=e(97857),c=e.n(Z),k=e(13769),i=e.n(k),g=e(25098),C=e.n(g),A=e(31996),r=e.n(A),K=e(26037),v=e.n(K),j=e(15009),h=e.n(j),M=e(99289),n=e.n(M),y=e(12444),L=e.n(y),o=e(72004),a=e.n(o),R=e(9783),E=e.n(R),$=e(87066),Q=e(80129),z=e.n(Q),p=["authClass","storageType","storageClass","storagePrefix"],b=["values","filter"],f=function(){function u(l){L()(this,u),E()(this,"api",void 0),E()(this,"options",{locale:null,role:null,authenticator:null,token:null}),this.api=l,this.api.axios.interceptors.request.use(this.middleware.bind(this))}return a()(u,[{key:"storagePrefix",get:function(){return this.api.storagePrefix}},{key:"KEYS",get:function(){var S={locale:this.storagePrefix+"LOCALE",role:this.storagePrefix+"ROLE",token:this.storagePrefix+"TOKEN",authenticator:this.storagePrefix+"AUTH",theme:this.storagePrefix+"THEME"};if(this.api.app){var H,O,N=(H=this.api.app)===null||H===void 0||(O=H.getName)===null||O===void 0?void 0:O.call(H);N&&(S.role="".concat(N.toUpperCase(),"_")+S.role,S.locale="".concat(N.toUpperCase(),"_")+S.locale)}return S}},{key:"locale",get:function(){return this.getLocale()},set:function(S){this.setLocale(S)}},{key:"role",get:function(){return this.getRole()},set:function(S){this.setRole(S)}},{key:"token",get:function(){return this.getToken()},set:function(S){this.setToken(S)}},{key:"authenticator",get:function(){return this.getAuthenticator()},set:function(S){this.setAuthenticator(S)}},{key:"getOption",value:function(S){if(this.KEYS[S])return this.api.storage.getItem(this.KEYS[S])}},{key:"setOption",value:function(S,H){if(this.KEYS[S])return this.options[S]=H,this.api.storage.setItem(this.KEYS[S],H||"")}},{key:"getLocale",value:function(){return this.getOption("locale")}},{key:"setLocale",value:function(S){this.setOption("locale",S)}},{key:"getRole",value:function(){return this.getOption("role")}},{key:"setRole",value:function(S){this.setOption("role",S)}},{key:"getToken",value:function(){return this.getOption("token")}},{key:"setToken",value:function(S){this.setOption("token",S),this.api.app&&this.api.app.eventBus.dispatchEvent(new CustomEvent("auth:tokenChanged",{detail:{token:S,authenticator:this.authenticator}}))}},{key:"getAuthenticator",value:function(){return this.getOption("authenticator")}},{key:"setAuthenticator",value:function(S){this.setOption("authenticator",S)}},{key:"middleware",value:function(S){return this.locale&&(S.headers["X-Locale"]=this.locale),this.role&&(S.headers["X-Role"]=this.role),this.authenticator&&!S.headers["X-Authenticator"]&&(S.headers["X-Authenticator"]=this.authenticator),this.token&&(S.headers.Authorization="Bearer ".concat(this.token)),S}},{key:"signIn",value:function(){var l=n()(h()().mark(function H(O,N){var t,B,X;return h()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,this.api.request({method:"post",url:"auth:signIn",data:O,headers:{"X-Authenticator":N}});case 2:return B=U.sent,X=B==null||(t=B.data)===null||t===void 0?void 0:t.data,this.setAuthenticator(N),this.setToken(X==null?void 0:X.token),U.abrupt("return",B);case 7:case"end":return U.stop()}},H,this)}));function S(H,O){return l.apply(this,arguments)}return S}()},{key:"signUp",value:function(){var l=n()(h()().mark(function H(O,N){return h()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.api.request({method:"post",url:"auth:signUp",data:O,headers:{"X-Authenticator":N}});case 2:return B.abrupt("return",B.sent);case 3:case"end":return B.stop()}},H,this)}));function S(H,O){return l.apply(this,arguments)}return S}()},{key:"signOut",value:function(){var l=n()(h()().mark(function H(){var O;return h()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.request({method:"post",url:"auth:signOut"});case 2:return O=t.sent,this.setToken(null),this.setRole(null),this.setAuthenticator(null),t.abrupt("return",O);case 7:case"end":return t.stop()}},H,this)}));function S(){return l.apply(this,arguments)}return S}()}]),u}(),x=a()(function u(){L()(this,u)}),m=function(u){r()(S,u);var l=v()(S);function S(){var H;L()(this,S);for(var O=arguments.length,N=new Array(O),t=0;t<O;t++)N[t]=arguments[t];return H=l.call.apply(l,[this].concat(N)),E()(C()(H),"items",new Map),H}return a()(S,[{key:"clear",value:function(){this.items.clear()}},{key:"getItem",value:function(O){return this.items.get(O)}},{key:"setItem",value:function(O,N){return this.items.set(O,N)}},{key:"removeItem",value:function(O){return this.items.delete(O)}}]),S}(x),F=function(){function u(l){if(L()(this,u),E()(this,"options",void 0),E()(this,"axios",void 0),E()(this,"auth",void 0),E()(this,"storage",void 0),E()(this,"storagePrefix","NOCOBASE_"),this.options=l,typeof l=="function")this.axios=l;else{var S=l||{},H=S.authClass,O=S.storageType,N=S.storageClass,t=S.storagePrefix,B=t===void 0?"NOCOBASE_":t,X=i()(S,p);this.storagePrefix=B,this.axios=$.Z.create(X),this.initStorage(N,O),H&&(this.auth=new H(this))}this.storage||this.initStorage(),this.auth||(this.auth=new f(this)),this.interceptors()}return a()(u,[{key:"getHeaders",value:function(){var S={};return this.auth.locale&&(S["X-Locale"]=this.auth.locale),this.auth.role&&(S["X-Role"]=this.auth.role),this.auth.authenticator&&(S["X-Authenticator"]=this.auth.authenticator),this.auth.token&&(S.Authorization="Bearer ".concat(this.auth.token)),S}},{key:"initStorage",value:function(S){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"localStorage";if(S){this.storage=new S(this);return}if(H==="localStorage"&&typeof localStorage<"u"){this.storage=localStorage;return}if(H==="sessionStorage"&&typeof sessionStorage<"u"){this.storage=sessionStorage;return}this.storage=new m}},{key:"interceptors",value:function(){this.axios.interceptors.request.use(function(S){return S.paramsSerializer=function(H){return z().stringify(H,{strictNullHandling:!0,arrayFormat:"brackets"})},S})}},{key:"request",value:function(S){var H=S,O=H.resource,N=H.resourceOf,t=H.action,B=H.params,X=H.headers;return O?this.resource(O,N,X)[t](B):this.axios.request(S)}},{key:"resource",value:function(S,H,O,N){var t=this,B={},X={get:function(U,D){if(!N){var ne=S.split(".").join("/".concat(encodeURIComponent(H)||"_","/"));ne+=":".concat(D.toString());var q={url:ne};return["get","list"].includes(D)?q.method="get":q.method="post",function(){var J=n()(h()().mark(function Y(P,w){var ie,G,le,xe;return h()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return ie=P||{},G=ie.values,le=ie.filter,xe=i()(ie,b),q.params=xe,le&&(typeof le=="string"?q.params.filter=le:(le["*"]&&delete le["*"],q.params.filter=JSON.stringify(le))),q.method!=="get"&&(q.data=G||{}),Ee.next=6,t.request(c()(c()(c()({},q),w),{},{headers:O}));case 6:return Ee.abrupt("return",Ee.sent);case 7:case"end":return Ee.stop()}},Y)}));return function(Y,P){return J.apply(this,arguments)}}()}}};return new Proxy(B,X)}}]),u}(),I=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"/",S="".concat(l,"apps/");if(window.location.pathname.startsWith(S)){var H=window.location.pathname.substring(S.length),O=H.split("/",1);return O[0]||""}},d=I},84157:function(He,ae,e){"use strict";e.r(ae),e.d(ae,{CollectionsGraph:function(){return t},Handlebars:function(){return ge()},Registry:function(){return Mn},dayjs:function(){return i()},error:function(){return tt},flatten:function(){return Er},forEach:function(){return me},getDateTimeFormat:function(){return se},getDateVars:function(){return nn},getDayRange:function(){return Bt},getDefaultFormat:function(){return q},getPickerFormat:function(){return Se},getValuesByPath:function(){return pe},hasEmptyValue:function(){return D},isArray:function(){return X},isEmpty:function(){return V},isPlainObject:function(){return U},isPortalInBody:function(){return ln},isString:function(){return B},isURL:function(){return wn},isValidFilter:function(){return Pe},lodash:function(){return c()},merge:function(){return Je},moment2str:function(){return xe},nextTick:function(){return ne},offsetFromString:function(){return _e},parse:function(){return oe},parseFilter:function(){return _t},parseHTML:function(){return Hn},showToast:function(){return mn},splitPathToTwoParts:function(){return Zt},str2moment:function(){return ie},toFixedByStep:function(){return fn},toGmt:function(){return J},toLocal:function(){return Y},toUnit:function(){return Wt},tval:function(){return Gt},uid:function(){return Bn},unflatten:function(){return Ft},utc2unit:function(){return Xt}});var Z=e(96486),c=e.n(Z),k=e(27484),i=e.n(k),g=e(28734),C=e.n(g),A=e(10285),r=e.n(A),K=e(66607),v=e.n(K),j=e(79212),h=e.n(j),M=e(37412),n=e.n(M),y=e(59542),L=e.n(y),o=e(96036),a=e.n(o),R=e(96671),E=e.n(R),$=e(29387),Q=e.n($),z=e(70178),p=e.n(z),b=e(55183),f=e.n(b),x=e(172),m=e.n(x),F=e(72540),I=e.n(F);i().extend(I()),i().extend(a()),i().extend(Q()),i().extend(p()),i().extend(E()),i().extend(L()),i().extend(v()),i().extend(h()),i().extend(n()),i().extend(f()),i().extend(m()),i().extend(r()),i().extend(C());var d=e(96695),u=e.n(d),l=e(12444),S=e.n(l),H=e(72004),O=e.n(H),N=e(28282),t=function(){function st(){S()(this,st)}return O()(st,null,[{key:"graphlib",value:function(){return N}},{key:"connectedNodes",value:function(De){var Ce=(0,Z.castArray)(De.nodes),Oe=(0,Z.castArray)(De.excludes||[]),Fe=st.build(De),Ne=new Set,Xe=u()(Ce),dt;try{for(Xe.s();!(dt=Xe.n()).done;){var ht=dt.value,xt=N.alg.preorder(Fe,ht),Ct=u()(xt),Dt;try{for(Ct.s();!(Dt=Ct.n()).done;){var Vt=Dt.value;Oe.includes(Vt)||Ne.add(Vt)}}catch(Ht){Ct.e(Ht)}finally{Ct.f()}}}catch(Ht){Xe.e(Ht)}finally{Xe.f()}return Array.from(Ne)}},{key:"preOrder",value:function(De){return st.graphlib().alg.preorder(st.build(De),De.node)}},{key:"build",value:function(De){var Ce=De.collections,Oe=(De==null?void 0:De.direction)||"forward",Fe=Oe==="forward",Ne=new N.Graph,Xe=u()(Ce),dt;try{for(Xe.s();!(dt=Xe.n()).done;){var ht=dt.value;Ne.setNode(ht.name)}}catch(Ve){Xe.e(Ve)}finally{Xe.f()}var xt=u()(Ce),Ct;try{for(xt.s();!(Ct=xt.n()).done;){var Dt=Ct.value,Vt=Dt.inherits||[],Ht=u()(Vt),Ut;try{for(Ht.s();!(Ut=Ht.n()).done;){var wt=Ut.value;Fe?Ne.setEdge(Dt.name,wt):Ne.setEdge(wt,Dt.name)}}catch(Ve){Ht.e(Ve)}finally{Ht.f()}var ot=u()(Dt.fields||[]),qe;try{for(ot.s();!(qe=ot.n()).done;){var Be=qe.value;if((Be.type==="hasMany"||Be.type==="belongsTo"||Be.type==="hasOne")&&(Fe?Ne.setEdge(Dt.name,Be.target):Ne.setEdge(Be.target,Dt.name)),Be.type==="belongsToMany"){var rt=Be.through;Fe?(Ne.setEdge(Dt.name,rt),Ne.setEdge(rt,Be.target)):(Ne.setEdge(Be.target,rt),Ne.setEdge(rt,Dt.name))}}}catch(Ve){ot.e(Ve)}finally{ot.f()}}}catch(Ve){xt.e(Ve)}finally{xt.f()}return Ne}}]),st}(),B=function(Ke){return typeof Ke=="string"},X=function(Ke){return Array.isArray(Ke)},V=function(Ke){return U(Ke)?Object.keys(Ke).length===0:Array.isArray(Ke)?Ke.length===0:!Ke},U=function(Ke){if(Object.prototype.toString.call(Ke)!=="[object Object]")return!1;var De=Object.getPrototypeOf(Ke);return De===null||De===Object.prototype},D=function st(Ke){var De=!0;for(var Ce in Ke){if(De=!1,X(Ke[Ce])&&Ke[Ce].length===0||!Ke[Ce])return!0;if(U(Ke[Ce])||X(Ke[Ce]))return st(Ke[Ce])}return De},ne=function(Ke){setTimeout(Ke)},q=function(Ke){return Ke.format?Ke.format:Ke.dateFormat?Ke.showTime?"".concat(Ke.dateFormat," ").concat(Ke.timeFormat||"HH:mm:ss"):Ke.dateFormat:Ke.picker==="month"?"YYYY-MM":Ke.picker==="quarter"?"YYYY-\\QQ":Ke.picker==="year"?"YYYY":Ke.picker==="week"?"YYYY[W]W":Ke.showTime?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD"},J=function(Ke){return!Ke||!i().isDayjs(Ke)?Ke:"".concat(Ke.format("YYYY-MM-DD"),"T").concat(Ke.format("HH:mm:ss.SSS"),"Z")},Y=function(Ke){if(!Ke)return Ke;if(Array.isArray(Ke))return Ke.map(function(De){return De.startOf("second").toISOString()});if(i().isDayjs(Ke))return Ke.startOf("second").toISOString()},P=function(Ke){if(i()(Ke).isValid()){var De=parseInt(Ke.slice(0,4)),Ce=parseInt(Ke.slice(-1));return i()().quarter(Ce).year(De)}return null},w=function(Ke,De){if(Ke){var Ce=De.utcOffset,Oe=De.gmt,Fe=De.picker,Ne=De.utc,Xe=Ne===void 0?!0:Ne;return i()(Ke).isValid()?Xe?i().isDayjs(Ke)?Ce?Ke.utcOffset(_e(Ce)):Ke:Oe?i()(Ke).utcOffset(0):Ce?i()(Ke).utcOffset(_e(Ce)):i()(Ke):i()(Ke):P(Ke)}},ie=function(Ke){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(Ke)?Ke.map(function(Ce){return w(Ce,De)}):Ke&&w(Ke,De)},G=function(Ke,De){return De==="year"?Ke.format("YYYY")+"-01-01T00:00:00.000Z":De==="month"||De==="quarter"?Ke.format("YYYY-MM")+"-01T00:00:00.000Z":Ke.format("YYYY-MM-DD")+"T00:00:00.000Z"},le=function(Ke,De){if(!Ke)return Ke;if(Array.isArray(Ke))return Ke.map(function(Ce){return G(Ce,De)});if(i().isDayjs(Ke))return G(Ke,De)},xe=function(Ke){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ce=De.showTime,Oe=De.gmt,Fe=De.picker;return Ke&&(Ce?Oe?J(Ke):Y(Ke):le(Ke,Fe))};function _e(st){if(!c().isString(st))return st;var Ke=/([+-]|\d\d)/gi,De=/Z|[+-]\d\d(?::?\d\d)?/gi,Ce=/[+-]?\d+(\.\d{1,3})?/,Oe=(st||"").match(De);if(Oe===null&&(Oe=(st||"").match(Ce)),Oe===null)return null;var Fe=Oe[Oe.length-1]||[],Ne=(Fe+"").match(Ke)||["-",0,0],Xe=+(Number(Ne[1])*60)+Ee(Ne[2]);return Xe===0?0:Ne[0]==="+"?Xe:-Xe}function Ee(st){var Ke=+st,De=0;return Ke!==0&&isFinite(Ke)&&(De=ze(Ke)),De}function ze(st){return st<0?Math.ceil(st)||0:Math.floor(st)}var Se=function(Ke){switch(Ke){case"week":return"YYYY[W]W";case"month":return"YYYY-MM";case"quarter":return"YYYY[Q]Q";case"year":return"YYYY";default:return"YYYY-MM-DD"}},se=function(Ke,De,Ce,Oe){return Ke==="date"&&Ce?"".concat(De," ").concat(Oe||"HH:mm:ss"):De},me=function(Ke,De){Array.isArray(Ke)?Ke.forEach(De):Object.keys(Ke).forEach(function(Ce){De(Ke[Ce],Ce)})},pe=function st(Ke,De,Ce){if(!Ke)return Ce;for(var Oe=De.split("."),Fe=[],Ne=Ke,Xe=!1,dt=0;dt<Oe.length;dt++){var ht,xt=Oe[dt];if(Array.isArray(Ne)){Xe=!0;var Ct=u()(Ne),Dt;try{for(Ct.s();!(Dt=Ct.n()).done;){var Vt=Dt.value,Ht=st(Vt,Oe.slice(dt).join("."),Ce);Fe=Fe.concat(Ht)}}catch(Ut){Ct.e(Ut)}finally{Ct.f()}break}if(((ht=Ne)===null||ht===void 0?void 0:ht[xt])===void 0)break;Ne=Ne[xt],dt===Oe.length-1&&Fe.push(Ne)}return Fe=Fe.filter(function(Ut){return Ut!==void 0}),Fe.length===0?Ce:Xe?Fe.filter(function(Ut){return Ut!==null}):Fe[0]},ee=e(8575),ue=e(96750),ge=e.n(ue),Ie=e(11700),Ae=e.n(Ie),Le=Ae()();Object.keys(Le).forEach(function(st){ge().registerHelper(st,Le[st])}),ge().registerHelper("json",function(st){return JSON.stringify(st)}),ge().registerHelper("urlParse",function(st){try{return JSON.stringify(ee.parse(st))}catch{return"Invalid URL: ".concat(st)}}),ge().registerHelper("dateFormat",function(st,Ke,De){return typeof De=="string"?i()(st).tz(De).format(Ke):i()(st).format(Ke)}),ge().registerHelper("isNull",function(st){return c().isNull(st)});var Te=e(5574),je=e.n(Te);function Pe(st){if(!st)return!1;var Ke=[st.$and,st.$or].filter(Boolean);return Ke.length==0?Object.keys(st).length>0:Ke.some(function(De){if(Array.isArray(De))return De.some(Pe);if(De.$and||De.$or)return Pe(De);var Ce=Object.keys(De),Oe=je()(Ce,1),Fe=Oe[0];if(!Fe||!De[Fe])return!1;var Ne=Object.keys(De[Fe]),Xe=je()(Ne,1),dt=Xe[0];return!(!dt||typeof De[Fe][dt]>"u")})}var fe=e(52677),re=e.n(fe);function T(st){var Ke=re()(st);return Array.isArray(st)?Ke="array":st instanceof Date?Ke="date":st===null&&(Ke="null"),Ke}function ce(st){var Ke,De=st.substr(2,st.length-4).trim(),Ce=De.indexOf(":");return Ce!==-1?Ke={key:De.substr(0,Ce),defaultValue:De.substr(Ce+1)}:Ke={key:De},Ke}function be(st,Ke){return st.parameters=Array.from(new Map(Ke.map(function(De){return[De.key,De]})).values()),st}function oe(st){switch(T(st)){case"string":return Re(st);case"object":return Ze(st);case"array":return We(st);default:return be(function(){return st},[])}}var Re=function(){var st=/{{(\w|:|[\s-+.,@/()?=*_$])+}}/g;return function(Ke){var De=[],Ce=function(Ne){return Ke},Oe=Ke.match(st);return Oe&&(De=Oe.map(ce),Ce=function(Ne){return Ne=Ne||{},Oe.reduce(function(Xe,dt,ht){var xt=De[ht],Ct=(0,Z.get)(Ne,xt.key);return typeof Ct>"u"&&(Ct=xt.defaultValue),typeof Ct=="function"&&(Ct=Ct()),Oe.length===1&&Ke.startsWith("{{")&&Ke.endsWith("}}")?Ct:(Ct instanceof Date&&(Ct=Ct.toISOString()),Xe.replace(dt,Ct??""))},Ke)}),be(Ce,De)}}();function Ze(st){var Ke=Object.keys(st).map(function(Oe){return{keyTemplate:Re(Oe),valueTemplate:oe(st[Oe])}}),De=Ke.reduce(function(Oe,Fe){return Oe.concat(Fe.valueTemplate.parameters,Fe.keyTemplate.parameters)},[]),Ce=function(Fe){return Ke.reduce(function(Ne,Xe){return Ne[Xe.keyTemplate(Fe)]=Xe.valueTemplate(Fe),Ne},{})};return be(Ce,De)}function We(st){var Ke=st.map(oe),De=Ke.reduce(function(Oe,Fe){return Oe.concat(Fe.parameters)},[]),Ce=function(Fe){return Ke.map(function(Ne){return Ne(Fe)})};return be(Ce,De)}var tt=function(Ke){for(var De,Ce=arguments.length,Oe=new Array(Ce>1?Ce-1:0),Fe=1;Fe<Ce;Fe++)Oe[Fe-1]=arguments[Fe];(De=console).error.apply(De,[Ke].concat(Oe))},St=e(97857),Tt=e.n(St),lt=e(9996),ut=e.n(lt),nt=function(Ke,De,Ce){return De};function Je(st,Ke,De){return ut()(st,Ke,Tt()({arrayMerge:nt},De))}var hn=e(26855),mn=function(Ke){var De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"info",Ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5e3;hn.Z[De]({message:Ke,duration:Ce})},vn=e(55252),an=e(8150);function fn(st,Ke){if(typeof st>"u"||st===null||st==="")return"";var De=(0,vn.NX)(Ke);return(0,an.FH)(String(st),".",De)}var cn=e(15009),_n=e.n(cn),zt=e(19632),xn=e.n(zt),Qt=e(99289),Et=e.n(Qt),en=e(36968),Rn=e.n(en),An=e(30381),Jn=e.n(An),Zn=/^\s*\{\{([\s\S]*)\}\}\s*$/;function rr(st){return st&&st.constructor&&typeof st.constructor.isBuffer=="function"&&st.constructor.isBuffer(st)}function mr(st){return st}function Er(st,Ke){Ke=Ke||{};var De=Ke.delimiter||".",Ce=Ke.maxDepth,Oe=Ke.transformKey||mr,Fe=Ke.transformValue||mr,Ne={};function Xe(dt,ht,xt){xt=xt||1,c().isObjectLike(dt)&&Object.keys(dt).forEach(function(Ct){var Dt,Vt,Ht=dt[Ct],Ut=Ke.safe&&Array.isArray(Ht),wt=Object.prototype.toString.call(Ht),ot=rr(Ht),qe=wt==="[object Object]"||wt==="[object Array]",Be=ht?ht+De+Oe(Ct):Oe(Ct);if((Dt=(Vt=Ke).breakOn)!==null&&Dt!==void 0&&Dt.call(Vt,{key:Ct,value:Ht,path:Be})){Ne[Be]=Fe(Ht,Be);return}if(!Ut&&!ot&&qe&&Object.keys(Ht).length&&(!Ke.maxDepth||xt<Ce))return Xe(Ht,Be,xt+1);Ne[Be]=Fe(Ht,Be)})}return Xe(st),Ne}function Ft(st){for(var Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},De={},Ce=Ke.transformValue||mr,Oe=0,Fe=Object.keys(st);Oe<Fe.length;Oe++){var Ne=Fe[Oe];Rn()(De,Ne,Ce(st[Ne],Ne))}return De}var ct=function(Ke){var De=Ke.split(".").pop()||"";return De.startsWith("$")||(De=""),{operator:De}},Mt=function(Ke){return["$dateOn","$dateNotOn","$dateBefore","$dateAfter","$dateNotBefore","$dateNotAfter","$dateBetween"].includes(Ke)};function kt(st){return st instanceof Date||Object.prototype.toString.call(st)==="[object Date]"}var Rt=function(Ke,De){if(!Ke)return null;if(Array.isArray(Ke))return Ke.length===2?Ke.push("[]",De):Ke.length===3&&Ke.push(De),Ke;if(typeof Ke=="string")return!De||/(\+|-)\d\d:\d\d$/.test(Ke)?Ke:Ke+De;if(kt(Ke))return Ke.toISOString()},_t=function(){var st=Et()(_n()().mark(function Ke(De){var Ce,Oe,Fe,Ne,Xe,dt,ht,xt,Ct=arguments;return _n()().wrap(function(Vt){for(;;)switch(Vt.prev=Vt.next){case 0:if(Ce=Ct.length>1&&Ct[1]!==void 0?Ct[1]:{},Oe=new Set,Fe=Ce.vars||{},Ne=Ce.timezone,Xe=Ce.now,dt=Ce.getField,ht=Er(De,{breakOn:function(Ut){var wt=Ut.key;return wt.startsWith("$")&&wt!=="$and"&&wt!=="$or"},transformValue:function(Ut){if(typeof Ut!="string")return Ut;var wt=Zn.exec(Ut);if(wt){var ot=wt[1].trim();ot.startsWith("$user")&&Oe.add(ot.substring(6))}return Ut}}),!(Oe.size>0)){Vt.next=12;break}return Vt.next=10,Fe.$user({fields:xn()(Oe.values())});case 10:xt=Vt.sent,Object.assign(Fe,{$user:xt});case 12:return Vt.abrupt("return",Ft(ht,{transformValue:function(Ut,wt){var ot=ct(wt),qe=ot.operator;if(typeof Ut=="string"){var Be=Zn.exec(Ut);if(Be){var rt=Be[1].trim(),Ve=pe(Fe,rt,null),$e=dt==null?void 0:dt(wt);Ut=typeof Ve=="function"?Ve==null?void 0:Ve({field:$e,operator:qe,timezone:Ne,now:Xe}):Ve}}if(Mt(qe)){var it=dt==null?void 0:dt(wt);return(it==null?void 0:it.constructor.name)==="DateOnlyField"||(it==null?void 0:it.constructor.name)==="DatetimeNoTzField"?Ut:Rt(Ut,(it==null?void 0:it.timezone)||Ne)}return Ut}}));case 13:case"end":return Vt.stop()}},Ke)}));return function(De){return st.apply(this,arguments)}}();function Bt(st){var Ke=st.now,De=st.timezone,Ce=De===void 0?"+00:00":De,Oe=st.offset,Fe=jt(Ke).utcOffset(_e(Ce));return Oe>0?[(Fe=Fe.add(1,"day").startOf("day")).format("YYYY-MM-DD"),Fe.clone().add(Oe,"day").startOf("day").format("YYYY-MM-DD"),"[)",Ce]:[Fe.clone().subtract(-1*Oe-1,"day").startOf("day").format("YYYY-MM-DD"),Fe.clone().add(1,"day").startOf("day").format("YYYY-MM-DD"),"[)",Ce]}function jt(st){var Ke=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return st?i().isDayjs(st)?st:Ke?Jn()(st):i()(st):Ke?Jn()():i()()}function Xt(st){var Ke,De=st.now,Ce=st.unit,Oe=st.timezone,Fe=Oe===void 0?"+00:00":Oe,Ne=st.offset,Xe=jt(De,Ce==="isoWeek");Xe=Xe.utcOffset(_e(Fe)),Xe=Xe.startOf(Ce),Ne>0?Xe=Xe.add(Ne,Ce):Ne<0&&(Xe=Xe.subtract(-1*Ne,Ce));var dt={year:function(){return Xe.format("YYYY")},quarter:function(){return Xe.format("YYYY[Q]Q")},month:function(){return Xe.format("YYYY-MM")},week:function(){return Xe.format("gggg[w]ww")},isoWeek:function(){return Xe.format("GGGG[W]WW")},day:function(){return Xe.format("YYYY-MM-DD")}},ht=(Ke=dt[Ce])===null||Ke===void 0?void 0:Ke.call(dt);return Fe?ht+Fe:ht}var Wt=function(Ke,De){return function(Ce){var Oe=Ce.now,Fe=Ce.timezone,Ne=Ce.field;return Ne!=null&&Ne.timezone&&(Fe=Ne==null?void 0:Ne.timezone),Xt({now:Oe,timezone:Fe,unit:Ke,offset:De})}},Nt=function(Ke){return function(De){var Ce=De.now,Oe=De.timezone,Fe=De.field;return Fe!=null&&Fe.timezone&&(Oe=Fe==null?void 0:Fe.timezone),Bt({now:Ce,timezone:Oe,offset:Ke})}};function nn(){return{now:new Date().toISOString(),today:Wt("day"),yesterday:Wt("day",-1),tomorrow:Wt("day",1),thisWeek:Wt("week"),lastWeek:Wt("week",-1),nextWeek:Wt("week",1),thisIsoWeek:Wt("isoWeek"),lastIsoWeek:Wt("isoWeek",-1),nextIsoWeek:Wt("isoWeek",1),thisMonth:Wt("month"),lastMonth:Wt("month",-1),nextMonth:Wt("month",1),thisQuarter:Wt("quarter"),lastQuarter:Wt("quarter",-1),nextQuarter:Wt("quarter",1),thisYear:Wt("year"),lastYear:Wt("year",-1),nextYear:Wt("year",1),last7Days:Nt(-7),next7Days:Nt(7),last30Days:Nt(-30),next30Days:Nt(30),last90Days:Nt(-90),next90Days:Nt(90)}}function Zt(st){var Ke=st.split(".");return[Ke.shift(),Ke.join(".")]}var Cn=e(9783),Yt=e.n(Cn),Mn=function(){function st(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{override:!1};S()(this,st),Yt()(this,"map",new Map),Yt()(this,"options",void 0),this.options=Ke}return O()(st,[{key:"register",value:function(De,Ce){if(!this.options.override&&this.map.has(De))throw new Error('this registry does not allow to override existing keys: "'.concat(De,'"'));this.map.set(De,Ce)}},{key:"get",value:function(De){return this.map.get(De)}},{key:"getKeys",value:function(){return this.map.keys()}},{key:"getValues",value:function(){return this.map.values()}},{key:"getEntities",value:function(){return this.map.entries()}}]),st}(),bn=null;function Gt(st,Ke){return Ke?"{{t(".concat(JSON.stringify(st),", ").concat(JSON.stringify(Ke),")}}"):"{{t(".concat(JSON.stringify(st),")}}")}var ln=function(Ke){for(;Ke;){var De;if(Ke.id==="root"||(De=Ke.classList)!==null&&De!==void 0&&De.contains("nb-action"))return!1;Ke=Ke.parentNode}return!{NODE_ENV:"production",PUBLIC_PATH:"auto"}.__TEST__};function Hn(st,Ke){return st.replace(/\{\{(\w+)\}\}/g,function(De,Ce){return typeof Ke[Ce]<"u"?Ke[Ce]:De})}for(var sn=36,Ln="";sn--;)Ln+=sn.toString(36);function Bn(st){for(var Ke="",De=st||11;De--;)Ke+=Ln[Math.random()*36|0];return Ke}function wn(st){var Ke;try{Ke=new URL(st)}catch{return!1}return Ke.protocol==="http:"||Ke.protocol==="https:"}},14994:function(){"use strict"},40408:function(He,ae,e){var Z={"./af":[15903,4920],"./af.js":[15903,4920],"./am":[29911,4920],"./am.js":[29911,4920],"./ar":[63939,4920],"./ar-dz":[47200,4920],"./ar-dz.js":[47200,4920],"./ar-iq":[87719,4920],"./ar-iq.js":[87719,4920],"./ar-kw":[62376,4920],"./ar-kw.js":[62376,4920],"./ar-ly":[48540,4920],"./ar-ly.js":[48540,4920],"./ar-ma":[96817,4920],"./ar-ma.js":[96817,4920],"./ar-sa":[11573,4920],"./ar-sa.js":[11573,4920],"./ar-tn":[99339,4920],"./ar-tn.js":[99339,4920],"./ar.js":[63939,4920],"./az":[88092,4920],"./az.js":[88092,4920],"./be":[60504,4920],"./be.js":[60504,4920],"./bg":[19091,4920],"./bg.js":[19091,4920],"./bi":[19149,4920],"./bi.js":[19149,4920],"./bm":[15287,4920],"./bm.js":[15287,4920],"./bn":[35254,4920],"./bn-bd":[54067,4920],"./bn-bd.js":[54067,4920],"./bn.js":[35254,4920],"./bo":[52502,4920],"./bo.js":[52502,4920],"./br":[8864,4920],"./br.js":[8864,4920],"./bs":[4502,4920],"./bs.js":[4502,4920],"./ca":[33646,4920],"./ca.js":[33646,4920],"./cs":[98507,4920],"./cs.js":[98507,4920],"./cv":[16636,4920],"./cv.js":[16636,4920],"./cy":[28792,4920],"./cy.js":[28792,4920],"./da":[17427,4920],"./da.js":[17427,4920],"./de":[80790,4920],"./de-at":[73237,4920],"./de-at.js":[73237,4920],"./de-ch":[16148,4920],"./de-ch.js":[16148,4920],"./de.js":[80790,4920],"./dv":[11794,4920],"./dv.js":[11794,4920],"./el":[65423,4920],"./el.js":[65423,4920],"./en":[25054,4920],"./en-au":[85109,4920],"./en-au.js":[85109,4920],"./en-ca":[55105,4920],"./en-ca.js":[55105,4920],"./en-gb":[99517,4920],"./en-gb.js":[99517,4920],"./en-ie":[30758,4920],"./en-ie.js":[30758,4920],"./en-il":[95805,4920],"./en-il.js":[95805,4920],"./en-in":[88529,4920],"./en-in.js":[88529,4920],"./en-nz":[50302,4920],"./en-nz.js":[50302,4920],"./en-sg":[35941,4920],"./en-sg.js":[35941,4920],"./en-tt":[46183,4920],"./en-tt.js":[46183,4920],"./en.js":[25054,4920],"./eo":[74990,4920],"./eo.js":[74990,4920],"./es":[67763,4920],"./es-do":[3864,4920],"./es-do.js":[3864,4920],"./es-mx":[37118,4920],"./es-mx.js":[37118,4920],"./es-pr":[23521,4920],"./es-pr.js":[23521,4920],"./es-us":[36165,4920],"./es-us.js":[36165,4920],"./es.js":[67763,4920],"./et":[99670,4920],"./et.js":[99670,4920],"./eu":[20837,4920],"./eu.js":[20837,4920],"./fa":[96953,4920],"./fa.js":[96953,4920],"./fi":[47822,4920],"./fi.js":[47822,4920],"./fo":[69197,4920],"./fo.js":[69197,4920],"./fr":[96023,4920],"./fr-ca":[77989,4920],"./fr-ca.js":[77989,4920],"./fr-ch":[54254,4920],"./fr-ch.js":[54254,4920],"./fr.js":[96023,4920],"./fy":[93220,4920],"./fy.js":[93220,4920],"./ga":[47467,4920],"./ga.js":[47467,4920],"./gd":[54855,4920],"./gd.js":[54855,4920],"./gl":[90229,4920],"./gl.js":[90229,4920],"./gom-latn":[46312,4920],"./gom-latn.js":[46312,4920],"./gu":[87632,4920],"./gu.js":[87632,4920],"./he":[45418,4920],"./he.js":[45418,4920],"./hi":[77573,4920],"./hi.js":[77573,4920],"./hr":[96257,4920],"./hr.js":[96257,4920],"./ht":[98889,4920],"./ht.js":[98889,4920],"./hu":[68562,4920],"./hu.js":[68562,4920],"./hy-am":[38242,4920],"./hy-am.js":[38242,4920],"./id":[83783,4920],"./id.js":[83783,4920],"./index.d":[46990,4920],"./index.d.ts":[46990,4920],"./is":[98980,4920],"./is.js":[98980,4920],"./it":[15551,4920],"./it-ch":[83706,4920],"./it-ch.js":[83706,4920],"./it.js":[15551,4920],"./ja":[76831,4920],"./ja.js":[76831,4920],"./jv":[42641,4920],"./jv.js":[42641,4920],"./ka":[46622,4920],"./ka.js":[46622,4920],"./kk":[32921,4920],"./kk.js":[32921,4920],"./km":[45567,4920],"./km.js":[45567,4920],"./kn":[21113,4920],"./kn.js":[21113,4920],"./ko":[19132,4920],"./ko.js":[19132,4920],"./ku":[94888,4920],"./ku.js":[94888,4920],"./ky":[60466,4920],"./ky.js":[60466,4920],"./lb":[91796,4920],"./lb.js":[91796,4920],"./lo":[68894,4920],"./lo.js":[68894,4920],"./lt":[78768,4920],"./lt.js":[78768,4920],"./lv":[30953,4920],"./lv.js":[30953,4920],"./me":[18066,4920],"./me.js":[18066,4920],"./mi":[68602,4920],"./mi.js":[68602,4920],"./mk":[51560,4920],"./mk.js":[51560,4920],"./ml":[4017,4920],"./ml.js":[4017,4920],"./mn":[94717,4920],"./mn.js":[94717,4920],"./mr":[15473,4920],"./mr.js":[15473,4920],"./ms":[5742,4920],"./ms-my":[77387,4920],"./ms-my.js":[77387,4920],"./ms.js":[5742,4920],"./mt":[28477,4920],"./mt.js":[28477,4920],"./my":[62966,4920],"./my.js":[62966,4920],"./nb":[19682,4920],"./nb.js":[19682,4920],"./ne":[14149,4920],"./ne.js":[14149,4920],"./nl":[99182,4920],"./nl-be":[37496,4920],"./nl-be.js":[37496,4920],"./nl.js":[99182,4920],"./nn":[92722,4920],"./nn.js":[92722,4920],"./oc-lnc":[76159,4920],"./oc-lnc.js":[76159,4920],"./pa-in":[35914,4920],"./pa-in.js":[35914,4920],"./pl":[81987,4920],"./pl.js":[81987,4920],"./pt":[15001,4920],"./pt-br":[57548,4920],"./pt-br.js":[57548,4920],"./pt.js":[15001,4920],"./rn":[123,4920],"./rn.js":[123,4920],"./ro":[18146,4920],"./ro.js":[18146,4920],"./ru":[70600,4920],"./ru.js":[70600,4920],"./rw":[6509,4920],"./rw.js":[6509,4920],"./sd":[65437,4920],"./sd.js":[65437,4920],"./se":[772,4920],"./se.js":[772,4920],"./si":[77109,4920],"./si.js":[77109,4920],"./sk":[35627,4920],"./sk.js":[35627,4920],"./sl":[82544,4920],"./sl.js":[82544,4920],"./sq":[88341,4920],"./sq.js":[88341,4920],"./sr":[50617,4920],"./sr-cyrl":[37101,4920],"./sr-cyrl.js":[37101,4920],"./sr.js":[50617,4920],"./ss":[64127,4920],"./ss.js":[64127,4920],"./sv":[91876,4920],"./sv-fi":[19911,4920],"./sv-fi.js":[19911,4920],"./sv.js":[91876,4920],"./sw":[46148,4920],"./sw.js":[46148,4920],"./ta":[55596,4920],"./ta.js":[55596,4920],"./te":[45159,4920],"./te.js":[45159,4920],"./tet":[99157,4920],"./tet.js":[99157,4920],"./tg":[9928,4920],"./tg.js":[9928,4920],"./th":[62019,4920],"./th.js":[62019,4920],"./tk":[75817,4920],"./tk.js":[75817,4920],"./tl-ph":[46513,4920],"./tl-ph.js":[46513,4920],"./tlh":[97296,4920],"./tlh.js":[97296,4920],"./tr":[73035,4920],"./tr.js":[73035,4920],"./types.d":[63799,4920],"./types.d.ts":[63799,4920],"./tzl":[57797,4920],"./tzl.js":[57797,4920],"./tzm":[84722,4920],"./tzm-latn":[30261,4920],"./tzm-latn.js":[30261,4920],"./tzm.js":[84722,4920],"./ug-cn":[80313,4920],"./ug-cn.js":[80313,4920],"./uk":[64144,4920],"./uk.js":[64144,4920],"./ur":[92957,4920],"./ur.js":[92957,4920],"./uz":[7486,4920],"./uz-latn":[98727,4920],"./uz-latn.js":[98727,4920],"./uz.js":[7486,4920],"./vi":[37553,4920],"./vi.js":[37553,4920],"./x-pseudo":[55321,4920],"./x-pseudo.js":[55321,4920],"./yo":[14724,4920],"./yo.js":[14724,4920],"./zh":[32009,4920],"./zh-cn":[33852],"./zh-cn.js":[33852],"./zh-hk":[2390,4920],"./zh-hk.js":[2390,4920],"./zh-tw":[43901,4920],"./zh-tw.js":[43901,4920],"./zh.js":[32009,4920]};function c(k){if(!e.o(Z,k))return Promise.resolve().then(function(){var C=new Error("Cannot find module '"+k+"'");throw C.code="MODULE_NOT_FOUND",C});var i=Z[k],g=i[0];return Promise.all(i.slice(1).map(e.e)).then(function(){return e.t(g,23)})}c.keys=function(){return Object.keys(Z)},c.id=40408,He.exports=c},59816:function(){},24654:function(){},95506:function(){},75347:function(){},31777:function(){},34017:function(){},59905:function(){},64604:function(){},75042:function(){}}]);
