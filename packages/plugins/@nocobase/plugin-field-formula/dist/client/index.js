/**
 * This file is part of the NocoBase (R) project.
 * Copyright (c) 2020-2024 NocoBase Co., Ltd.
 * Authors: NocoBase Team.
 *
 * This project is dual-licensed under AGPL-3.0 and NocoBase Commercial License.
 * For more information, please refer to: https://www.nocobase.com/agreement.
 */

!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react-i18next"),require("@nocobase/evaluators/client"),require("@nocobase/utils/client"),require("@formily/core"),require("lodash"),require("@nocobase/client"),require("@formily/react"),require("@formily/reactive"),require("react")):"function"==typeof define&&define.amd?define("@nocobase/plugin-field-formula",["react-i18next","@nocobase/evaluators/client","@nocobase/utils/client","@formily/core","lodash","@nocobase/client","@formily/react","@formily/reactive","react"],t):"object"==typeof exports?exports["@nocobase/plugin-field-formula"]=t(require("react-i18next"),require("@nocobase/evaluators/client"),require("@nocobase/utils/client"),require("@formily/core"),require("lodash"),require("@nocobase/client"),require("@formily/react"),require("@formily/reactive"),require("react")):e["@nocobase/plugin-field-formula"]=t(e["react-i18next"],e["@nocobase/evaluators/client"],e["@nocobase/utils/client"],e["@formily/core"],e.lodash,e["@nocobase/client"],e["@formily/react"],e["@formily/reactive"],e.react)}(self,function(e,t,r,n,o,i,u,a,l){return function(){"use strict";var c={563:function(e){e.exports=n},505:function(e){e.exports=u},229:function(e){e.exports=a},772:function(e){e.exports=i},47:function(e){e.exports=t},584:function(e){e.exports=r},467:function(e){e.exports=o},156:function(e){e.exports=l},238:function(t){t.exports=e}},s={};function f(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}};return c[e](r,r.exports,f),r.exports}f.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(t,{a:t}),t},f.d=function(e,t){for(var r in t)f.o(t,r)&&!f.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},f.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},f.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var p={};f.r(p),f.d(p,{PluginFieldFormulaClient:function(){return et},default:function(){return er}});var b=f("772"),m=f("505"),d=f("156"),y=f.n(d),v=f("563"),h=f("229"),g=f("467"),O=f.n(g),S=f("47"),x=f("584"),j={boolean:Boolean,integer:{boolean:function(e){return Number(e)},number:function(e){return e>=0?Math.floor(e):Math.ceil(e)},bigint:function(e){return Number(e)},string:function(e){var t=Number.parseInt(e,10);return Number.isNaN(t)||!Number.isFinite(t)?null:t},date:function(e){var t=e.valueOf();return Number.isNaN(t)?null:t}},bigInt:{boolean:function(e){return Number(e)},number:function(e){return Math.floor(e>=0?Math.floor(e):Math.ceil(e))},bigint:function(e){return Number(e)},string:function(e){var t=Number.parseInt(e,10);return Number.isNaN(t)||!Number.isFinite(t)?null:t},date:function(e){var t=e.valueOf();return Number.isNaN(t)?null:t}},double:{boolean:function(e){return Number(e)},number:function(e){return e},bigint:function(e){return Number(e)},string:function(e){var t=Number.parseFloat(e);return Number.isNaN(t)||!Number.isFinite(t)?null:t},date:function(e){var t=e.valueOf();return Number.isNaN(t)?null:t}},decimal:{boolean:function(e){return Number(e)},number:function(e){return e},bigint:function(e){return e},date:function(e){var t=e.valueOf();return Number.isNaN(t)?null:t}},string:{boolean:function(e){return e.toString()},number:function(e){return e.toString()},bigint:function(e){return e.toString()},string:function(e){return e},date:function(e){return e.toISOString()}},date:{boolean:function(e){return null},number:function(e){var t=new Date(e);return Number.isNaN(t.valueOf())?null:t},bigint:function(e){var t=new Date(Number(e));return Number.isNaN(t.valueOf())?null:t},string:function(e){var t=Date.parse(e);return Number.isNaN(t)?null:new Date(t)},date:function(e){return new Date(e)}}};function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var w={boolean:b.Checkbox.ReadPretty,integer:b.InputNumber.ReadPretty,bigInt:b.InputNumber.ReadPretty,double:b.InputNumber.ReadPretty,decimal:b.InputNumber.ReadPretty,date:b.DatePicker.ReadPretty,string:b.Input.ReadPretty};function N(e){for(var t=(0,m.useFieldSchema)(),r=(0,b.useCollection_deprecated)(),n=(0,b.useCollectionManager_deprecated)(),o=n.getCollection,i=n.getCollectionField,u=(e||t).name.split("."),a=r,l=0;l<u.length-1;l++)a=o(a.getField(u[l]).target);return i("".concat(a.name,".").concat(u[u.length-1]))}var F=function(){return null};F.Expression=function(e){var t,r=e.value,n=e.useCurrentFields,o=e.onChange,i=(0,b.useApp)().pm.get("field-formula").expressionFields,u=(0,b.useCompile)(),a=(0,b.useCollectionManager_deprecated)().interfaces,l=(null!==(t=null==n?void 0:n())&&void 0!==t?t:[]).filter(function(e){return i.includes(e.interface)}).map(function(e){var t,r;return{label:u(e.uiSchema.title),value:e.name,children:null===(t=(r=a[e.interface]).usePathOptions)||void 0===t?void 0:t.call(r,e)}});return y().createElement(b.Variable.TextArea,{value:void 0===r?"":r,onChange:o,scope:l})},F.Result=(0,m.connect)(function(e){var t,r,n,o,i,u,a=e.value,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++){if(r=i[n],!(t.indexOf(r)>=0))Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}}return o}(e,["value"]),c=(0,m.useFieldSchema)(),s=null!==(i=N())&&void 0!==i?i:{},f=s.dataType,p=s.expression,g=s.engine;var F=(t=(0,d.useState)(a),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],u=!0,a=!1;try{for(o=o.call(e);!(u=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,n=e}finally{try{!u&&null!=o.return&&o.return()}finally{if(a)throw n}}return i}}(t,2)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}}(t,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),I=F[0],E=F[1],D=S.evaluators.get(void 0===g?"math.js":g).evaluate,C=(0,b.useFormBlockContext)(),A=(0,m.useField)(),T=A.path.entire,_=null==T?void 0:T.replace(".".concat(c.name),"");(0,d.useEffect)(function(){E(a)},[a]),(0,m.useFormEffects)(function(){(0,v.onFormValuesChange)(function(e){if(!(c.name.indexOf(".")>=0)&&!!(null==C?void 0:C.form)&&(null===(t=C.form)||void 0===t?!void 0:!t.readPretty)&&"FormItem"===c["x-decorator"]){var t,r,n=(0,h.toJS)(function(e,t){for(var r=t.split("."),n=0,o=e;n<r.length;){var i=r[n],u=parseInt(null==r?void 0:r[n+1]);o=function(e,t,r){var n,o=e[t];if(Array.isArray(o))return o[r];return o&&(void 0===o?"undefined":(n=o)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)=="object"?o:e}(o,i,u),n+=u>=0?2:1}return o}(e.values,_));try{r=(r=D(p,n))&&function(e,t){if(null==e)return null;var r,n,o,i=void 0===e?"undefined":(r=e)&&"undefined"!=typeof Symbol&&r.constructor===Symbol?"symbol":typeof r;if("object"==i&&(n=e,null!=(o=Date)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?!!o[Symbol.hasInstance](n):n instanceof o))i="date";var u=j[t];if(!u)return null;if("function"==typeof u)return u(e);var a=u[i];return a?a(e):null}(r,f)}catch(e){r=null}null==r&&null==I&&E(r),E(r)}})}),(0,d.useEffect)(function(){var e,t;if(e=A.value,t=I,(O().isString(e)&&!isNaN(Date.parse(e))&&(e=new Date(e)),O().isString(t)&&!isNaN(Date.parse(t))&&(t=new Date(t)),O().isDate(e)&&O().isDate(t))?e.getTime()!==t.getTime():!O().isEqual(e,t))setTimeout(function(){A.value=I})},[I]);var q=null!==(u=w[f])&&void 0!==u?u:b.Input;return y().createElement(q,(n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,o,i;n=e,o=t,i=r[t],o in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})}return e}({},l),o=(o={value:"double"===f?(0,x.toFixedByStep)(I,e.step):I},o),Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}),n))});var I=new b.SchemaSettings({name:"fieldSettings:component:Formula.Result",items:[{name:"displayFormat",Component:b.SchemaSettingsNumberFormat,useComponentProps:function(){var e=(0,m.useFieldSchema)(),t=(0,b.useColumnSchema)().fieldSchema;return{fieldSchema:t||e}},useVisible:function(){var e=(0,m.useFieldSchema)(),t=(0,b.useColumnSchema)().fieldSchema,r=["integer","bigInt","double","decimal"].includes((N(t||e)||{}).dataType);return(0,b.useIsFieldReadPretty)()&&r}}]});f("238");var E="field-formula";function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){C(e,t,r[t])})}return e}function _(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(M=function(){return!!e})()}var B=[{dependencies:["dataType"],fulfill:{state:{display:'{{["double", "decimal"].includes($deps[0]) ? "visible" : "none"}}'}}}],$=[{dependencies:["dataType"],fulfill:{state:{display:'{{$deps[0] === "date" ? "visible" : "none"}}'}}}],G=b.interfacesProperties.defaultProps,U=b.interfacesProperties.dateTimeProps,V=b.interfacesProperties.operators,z={"uiSchema.x-component-props.dateFormat":_(T({},x.lodash.cloneDeep(U["uiSchema.x-component-props.dateFormat"])),{"x-reactions":$}),"uiSchema.x-component-props.showTime":_(T({},x.lodash.cloneDeep(U["uiSchema.x-component-props.showTime"])),{"x-reactions":k(U["uiSchema.x-component-props.showTime"]["x-reactions"]).concat(k($))}),"uiSchema.x-component-props.timeFormat":T({},x.lodash.cloneDeep(U["uiSchema.x-component-props.timeFormat"]))},J=function(e){function t(){var e,r,n,o;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),r=this,n=t,o=arguments,n=A(n),C(e=function(e,t){return t&&("object"===function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)||"function"==typeof t)?t:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(r,M()?Reflect.construct(n,o||[],A(r).constructor):n.apply(r,o)),"name","formula"),C(e,"type","object"),C(e,"group","advanced"),C(e,"order",1),C(e,"title",'{{t("Formula", { ns: "'.concat(E,'" })}}')),C(e,"description",'{{t("Configure and store the results of calculations between multiple field values in the same record, supporting both Math.js and Excel formula functions.", { ns: "'.concat(E,'" })}}')),C(e,"sortable",!0),C(e,"default",{type:"formula",uiSchema:{type:"string","x-component":"Formula.Result","x-component-props":{stringMode:!0,step:"1"},"x-read-pretty":!0}}),C(e,"properties",_(T(_(T({},G),{dataType:{type:"string",title:'{{t("Storage type")}}',"x-decorator":"FormItem","x-component":"Select","x-disabled":"{{ !createOnly }}",enum:[{value:"boolean",label:"Boolean"},{value:"integer",label:"Integer"},{value:"bigInt",label:"Big integer"},{value:"double",label:"Double"},{value:"string",label:"String"},{value:"date",label:"Datetime"}],required:!0,default:"double"},"uiSchema.x-component-props.step":{type:"string",title:'{{t("Precision")}}',"x-component":"Select","x-decorator":"FormItem",required:!0,default:"0",enum:[{value:"0",label:"1"},{value:"0.1",label:"1.0"},{value:"0.01",label:"1.00"},{value:"0.001",label:"1.000"},{value:"0.0001",label:"1.0000"},{value:"0.00001",label:"1.00000"}],"x-reactions":B}}),z),{engine:{type:"string",title:'{{t("Calculation engine", { ns: "'.concat(E,'" })}}'),"x-decorator":"FormItem","x-component":"Radio.Group",enum:Array.from(S.evaluators.getEntities()).reduce(function(e,t){var r,n,o=(n=2,function(e){if(Array.isArray(e))return e}(r=t)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],u=!0,a=!1;try{for(o=o.call(e);!(u=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,n=e}finally{try{!u&&null!=o.return&&o.return()}finally{if(a)throw n}}return i}}(r,2)||R(r,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],u=o[1];return e.concat(T({value:i},u))},[]),required:!0,default:"math.js"},expression:C({type:"string",title:'{{t("Expression", { ns: "'.concat(E,'" })}}'),required:!0,"x-component":"Formula.Expression","x-decorator":"FormItem","x-component-props":{useCurrentFields:"{{ useCurrentFields }}"},"x-reactions":{dependencies:["engine"],fulfill:{schema:{description:"{{renderExpressionDescription($deps[0])}}"}}}},"x-validator",function(e,t,r){var n=r.form.values,o=S.evaluators.get(n.engine).evaluate,i=e.trim().replace(/{{\s*([^{}]+)\s*}}/g,"1");try{return o(i),""}catch(e){return b.i18n.t("Expression syntax error",{ns:E})}})})),C(e,"filterable",{operators:V.number}),C(e,"titleUsable",!0),e}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,e),t}(b.CollectionFieldInterface);function H(){var e,t,r=(e=["\n          &:after {\n            content: ':';\n          }\n          & + a {\n            margin-left: 0.25em;\n          }\n        "],!t&&(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return H=function(){return r},r}function K(e){var t=S.evaluators.get(e);return(null==t?void 0:t.link)?y().createElement(y().Fragment,null,y().createElement("span",{className:(0,b.css)(H())},b.i18n.t("Syntax references",{ns:E})),y().createElement("a",{href:t.link,target:"_blank",rel:"noreferrer"},t.label)):null}function L(e,t,r,n,o,i,u){try{var a=e[i](u),l=a.value}catch(e){r(e);return}a.done?t(l):Promise.resolve(l).then(n,o)}function Q(e,t,r){return(Q=ee()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&Y(o,r.prototype),o}).apply(null,arguments)}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t="function"==typeof Map?new Map:void 0;return(Z=function(e){var r;if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Q(e,arguments,X(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Y(n,e)})(e)}function ee(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ee=function(){return!!e})()}var et=function(e){var t,r,n;function o(){var e,t,r,n,i,u,a;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,o),t=this,r=o,n=arguments,r=X(r),e=function(e,t){return t&&("object"===function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)||"function"==typeof t)?t:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(t,ee()?Reflect.construct(r,n||[],X(t).constructor):r.apply(t,n)),a=["checkbox","number","percent","integer","number","percent","input","textarea","email","phone","datetime","createdAt","updatedAt","radioGroup","checkboxGroup","select","multipleSelect"],(u="expressionFields")in(i=e)?Object.defineProperty(i,u,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[u]=a,e}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(o,e),t=o,r=[{key:"registerExpressionFieldInterface",value:function(e){if(Array.isArray(e)){var t=this.expressionFields.concat(e);this.expressionFields=t}else this.expressionFields.push(e)}},{key:"load",value:function(){var e,t=this;return(e=function(){return function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,function(e){return t.app.addComponents({Formula:F}),t.app.addScopes({renderExpressionDescription:K}),t.app.dataSourceManager.addFieldInterfaces([J]),t.app.schemaSettingsManager.add(I),[2]})},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function u(e){L(i,n,o,u,a,"next",e)}function a(e){L(i,n,o,u,a,"throw",e)}u(void 0)})})()}}],W(t.prototype,r),o}(Z(b.Plugin)),er=et;return p}()});