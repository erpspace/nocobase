/**
 * This file is part of the NocoBase (R) project.
 * Copyright (c) 2020-2024 NocoBase Co., Ltd.
 * Authors: NocoBase Team.
 *
 * This project is dual-licensed under AGPL-3.0 and NocoBase Commercial License.
 * For more information, please refer to: https://www.nocobase.com/agreement.
 */

!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react-i18next"),require("@nocobase/utils/client"),require("@nocobase/client"),require("react"),require("@nocobase/plugin-notification-manager/client")):"function"==typeof define&&define.amd?define("@nocobase/plugin-notification-email",["react-i18next","@nocobase/utils/client","@nocobase/client","react","@nocobase/plugin-notification-manager/client"],t):"object"==typeof exports?exports["@nocobase/plugin-notification-email"]=t(require("react-i18next"),require("@nocobase/utils/client"),require("@nocobase/client"),require("react"),require("@nocobase/plugin-notification-manager/client")):e["@nocobase/plugin-notification-email"]=t(e["react-i18next"],e["@nocobase/utils/client"],e["@nocobase/client"],e.react,e["@nocobase/plugin-notification-manager/client"])}(self,function(e,t,o,n,r){return function(){"use strict";var i={772:function(e){e.exports=o},786:function(e){e.exports=r},584:function(e){e.exports=t},156:function(e){e.exports=n},238:function(t){t.exports=e}},p={};function c(e){var t=p[e];if(void 0!==t)return t.exports;var o=p[e]={exports:{}};return i[e](o,o.exports,c),o.exports}c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,{a:t}),t},c.d=function(e,t){for(var o in t)c.o(t,o)&&!c.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};c.r(a),c.d(a,{PluginNotificationMailClient:function(){return P},default:function(){return R}});var l=c("772"),s=c("786"),u=c.n(s),m=c("584"),d="@nocobase/plugin-notification-email",f=c("156"),x=c.n(f),y=c("238");function b(){return(0,y.useTranslation)([d,"client"],{nsMode:"fallback"})}var v=function(){var e=b().t;return x().createElement(l.SchemaComponent,{scope:{t:e},schema:{type:"object",properties:{transport:{"x-decorator":"FormItem",type:"string",title:'{{t("Transport")}}',"x-component":"Select",enum:[{value:"smtp",label:"SMTP"}],default:"smtp",required:!0},server:{type:"void","x-component":"Grid",properties:{row:{type:"void","x-component":"Grid.Row",properties:{col1:{type:"void","x-component":"Grid.Col","x-component-props":{width:50},properties:{host:{"x-decorator":"FormItem",type:"string",title:'{{t("Host")}}',description:'{{t("SMTP server host")}}',"x-component":"TextAreaWithGlobalScope","x-component-props":{placeholder:"smtp.example.com"},required:!0}}},col2:{type:"void","x-component":"Grid.Col","x-component-props":{width:25},properties:{port:{"x-decorator":"FormItem",type:"number",title:'{{t("Port")}}',"x-component":"TextAreaWithGlobalScope","x-component-props":{number:!0,useTypedConstant:[["number",{min:1,max:65535,step:1}]]},default:465,required:!0}}},col3:{type:"void","x-component":"Grid.Col","x-component-props":{width:25},properties:{secure:{type:"boolean",title:'{{t("Secure")}}',"x-decorator":"FormItem","x-component":"TextAreaWithGlobalScope","x-component-props":{boolean:!0,useTypedConstant:[["boolean",{style:{width:"100%"}}]]},default:!0}}}}}}},auth:{type:"void","x-component":"Grid",properties:{row1:{type:"void","x-component":"Grid.Row",properties:{col1:{type:"void","x-component":"Grid.Col","x-component-props":{},properties:{account:{"x-decorator":"FormItem",type:"boolean",title:'{{t("Account")}}',"x-component":"TextAreaWithGlobalScope","x-component-props":{placeholder:"example@domain.com"},required:!0}}},col2:{type:"void","x-component":"Grid.Col","x-component-props":{},properties:{password:{"x-decorator":"FormItem",type:"boolean",title:'{{t("Password")}}',"x-component":"TextAreaWithGlobalScope","x-component-props":{password:!0},required:!0}}}}},row2:{type:"void","x-component":"Grid.Row",properties:{col1:{type:"void","x-component":"Grid.Col","x-component-props":{},properties:{from:{type:"string",required:!0,title:'{{t("From")}}',description:'{{t("The email address that will be used as the sender")}}',"x-decorator":"FormItem","x-component":"TextAreaWithGlobalScope","x-component-props":{useTypedConstant:["string"],placeholder:"noreply <example@domain.com>",expression:!1}}}}}}}}}}})};function h(){var e,t,o=(e=["\n  width: 100%;\n\n  .ant-space-item:nth-child(2) {\n    flex-grow: 1;\n  }\n"],!t&&(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return h=function(){return o},o}var g=(0,l.css)(h()),w=function(e){var t=e.variableOptions,o=b().t;return x().createElement(l.SchemaComponent,{scope:{t:o},schema:{type:"void",properties:{to:{type:"array",required:!0,title:'{{t("To")}}',"x-decorator":"FormItem","x-component":"ArrayItems",items:{type:"void","x-component":"Space","x-component-props":{className:g},properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},input:{type:"string","x-decorator":"FormItem","x-component":"Variable.Input","x-component-props":{scope:t,useTypedConstant:["string"],placeholder:'{{t("Email address")}}'}},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}},properties:{add:{type:"void",title:'{{t("Add email address")}}',"x-component":"ArrayItems.Addition"}}},cc:{type:"array",title:'{{t("CC")}}',"x-decorator":"FormItem","x-component":"ArrayItems",items:{type:"void","x-component":"Space","x-component-props":{className:g},properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},input:{type:"string","x-decorator":"FormItem","x-component":"Variable.Input","x-component-props":{scope:t,useTypedConstant:["string"],placeholder:'{{t("Email address")}}'}},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}},properties:{add:{type:"void",title:'{{t("Add email address")}}',"x-component":"ArrayItems.Addition"}}},bcc:{type:"array",title:'{{t("BCC")}}',"x-decorator":"FormItem","x-component":"ArrayItems",items:{type:"void","x-component":"Space","x-component-props":{className:g},properties:{sort:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.SortHandle"},input:{type:"string","x-decorator":"FormItem","x-component":"Variable.Input","x-component-props":{scope:t,useTypedConstant:["string"],placeholder:'{{t("Email address")}}'}},remove:{type:"void","x-decorator":"FormItem","x-component":"ArrayItems.Remove"}}},properties:{add:{type:"void",title:'{{t("Add email address")}}',"x-component":"ArrayItems.Addition"}}},subject:{type:"string",required:!0,title:'{{t("Subject")}}',"x-decorator":"FormItem","x-component":"Variable.TextArea","x-component-props":{scope:t}},contentType:{type:"string",title:'{{t("Content type")}}',"x-decorator":"FormItem","x-component":"Radio.Group",enum:[{label:"HTML",value:"html"},{label:'{{t("Plain text")}}',value:"text"}],default:"html"},html:{type:"string",required:!0,title:'{{t("Content")}}',"x-decorator":"FormItem","x-component":"Variable.RawTextArea","x-component-props":{scope:t,placeholder:"Hi,",autoSize:{minRows:10}},"x-reactions":[{dependencies:["contentType"],fulfill:{state:{visible:'{{$deps[0] === "html"}}'}}}]},text:{type:"string",required:!0,title:'{{t("Content")}}',"x-decorator":"FormItem","x-component":"Variable.RawTextArea","x-component-props":{scope:t,placeholder:"Hi,",autoSize:{minRows:10}},"x-reactions":[{dependencies:["contentType"],fulfill:{state:{visible:'{{$deps[0] === "text"}}'}}}]}}}})},I=function(e){var t=e.variableOptions,o=b().t;return x().createElement(l.SchemaComponent,{scope:{t:o},schema:{type:"void",properties:{subject:{type:"string",required:!0,title:'{{t("Subject")}}',"x-decorator":"FormItem","x-component":"Variable.TextArea","x-component-props":{scope:t}},contentType:{type:"string",title:'{{t("Content type")}}',"x-decorator":"FormItem","x-component":"Radio.Group",enum:[{label:"HTML",value:"html"},{label:'{{t("Plain text")}}',value:"text"}],default:"html"},html:{type:"string",required:!0,title:'{{t("Content")}}',"x-decorator":"FormItem","x-component":"Variable.RawTextArea","x-component-props":{scope:t,placeholder:"Hi,",autoSize:{minRows:10}},"x-reactions":[{dependencies:[".contentType"],fulfill:{state:{visible:'{{$deps[0] === "html"}}'}}}]},text:{type:"string",required:!0,title:'{{t("Content")}}',"x-decorator":"FormItem","x-component":"Variable.RawTextArea","x-component-props":{scope:t,placeholder:"Hi,",autoSize:{minRows:10}},"x-reactions":[{dependencies:[".contentType"],fulfill:{state:{visible:'{{$deps[0] === "text"}}'}}}]}}}})};function T(e,t,o,n,r,i,p){try{var c=e[i](p),a=c.value}catch(e){o(e);return}c.done?t(a):Promise.resolve(a).then(n,r)}function S(e){return function(){var t=this,o=arguments;return new Promise(function(n,r){var i=e.apply(t,o);function p(e){T(i,n,r,p,c,"next",e)}function c(e){T(i,n,r,p,c,"throw",e)}p(void 0)})}}function C(e,t,o){return(C=O()?Reflect.construct:function(e,t,o){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return o&&j(r,o.prototype),r}).apply(null,arguments)}function F(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t="function"==typeof Map?new Map:void 0;return(q=function(e){var o;if(null===e||(o=e,-1===Function.toString.call(o).indexOf("[native code]")))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return C(e,arguments,A(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),j(n,e)})(e)}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(O=function(){return!!e})()}function G(e,t){var o,n,r,i,p={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(o)throw TypeError("Generator is already executing.");for(;p;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return p.label++,{value:i[1],done:!1};case 5:p.label++,n=i[1],i=[0];continue;case 7:i=p.ops.pop(),p.trys.pop();continue;default:if(!(r=(r=p.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){p=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){p.label=i[1];break}if(6===i[0]&&p.label<r[1]){p.label=r[1],r=i;break}if(r&&p.label<r[2]){p.label=r[2],p.ops.push(i);break}r[2]&&p.ops.pop(),p.trys.pop();continue}i=t.call(e,p)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var P=function(e){var t,o,n;function r(){var e,t,o;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),e=this,t=r,o=arguments,t=A(t),function(e,t){return t&&("object"===function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)||"function"==typeof t)?t:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,o||[],A(e).constructor):t.apply(e,o))}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(r,e),t=r,o=[{key:"afterAdd",value:function(){return S(function(){return G(this,function(e){return[2]})})()}},{key:"beforeLoad",value:function(){return S(function(){return G(this,function(e){return[2]})})()}},{key:"load",value:function(){var e=this;return S(function(){return G(this,function(t){return e.pm.get(u()).registerChannelType({title:(0,m.tval)("Email",{ns:d}),type:"email",components:{ChannelConfigForm:v,MessageConfigForm:w,ContentConfigForm:I}}),[2]})})()}}],F(t.prototype,o),r}(q(l.Plugin)),R=P;return a}()});