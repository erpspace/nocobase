/**
 * This file is part of the NocoBase (R) project.
 * Copyright (c) 2020-2024 NocoBase Co., Ltd.
 * Authors: NocoBase Team.
 *
 * This project is dual-licensed under AGPL-3.0 and NocoBase Commercial License.
 * For more information, please refer to: https://www.nocobase.com/agreement.
 */

!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@nocobase/client"),require("@ant-design/icons"),require("@formily/react"),require("react-dom"),require("react"),require("react-i18next"),require("@formily/antd-v5"),require("@formily/shared"),require("lodash"),require("dayjs"),require("antd"),require("antd-style")):"function"==typeof define&&define.amd?define("@nocobase/plugin-calendar",["@nocobase/client","@ant-design/icons","@formily/react","react-dom","react","react-i18next","@formily/antd-v5","@formily/shared","lodash","dayjs","antd","antd-style"],t):"object"==typeof exports?exports["@nocobase/plugin-calendar"]=t(require("@nocobase/client"),require("@ant-design/icons"),require("@formily/react"),require("react-dom"),require("react"),require("react-i18next"),require("@formily/antd-v5"),require("@formily/shared"),require("lodash"),require("dayjs"),require("antd"),require("antd-style")):e["@nocobase/plugin-calendar"]=t(e["@nocobase/client"],e["@ant-design/icons"],e["@formily/react"],e["react-dom"],e.react,e["react-i18next"],e["@formily/antd-v5"],e["@formily/shared"],e.lodash,e.dayjs,e.antd,e["antd-style"])}(self,function(e,t,r,n,o,a,i,c,l,u,d,b){return function(){var s,f,p,m,v,h,g,y,x={581:function(e){e.exports=function(e,t){return"undefined"!=typeof __deoptimization_sideEffect__&&__deoptimization_sideEffect__(e,t),t}},482:function(e){"use strict";e.exports=t},632:function(e){"use strict";e.exports=i},505:function(e){"use strict";e.exports=r},875:function(e){"use strict";e.exports=c},772:function(t){"use strict";t.exports=e},721:function(e){"use strict";e.exports=d},202:function(e){"use strict";e.exports=b},760:function(e){"use strict";e.exports=u},467:function(e){"use strict";e.exports=l},156:function(e){"use strict";e.exports=o},111:function(e){"use strict";e.exports=n},238:function(e){"use strict";e.exports=a}},w={};function S(e){var t=w[e];if(void 0!==t)return t.exports;var r=w[e]={exports:{}};return x[e].call(r.exports,r,r.exports,S),r.exports}S.m=x,S.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return S.d(t,{a:t}),t},f=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},S.t=function(e,t){if(1&t&&(e=this(e)),8&t||"object"==typeof e&&e&&(4&t&&e.__esModule||16&t&&"function"==typeof e.then))return e;var r=Object.create(null);S.r(r);var n={};s=s||[null,f({}),f([]),f(f)];for(var o=2&t&&e;"object"==typeof o&&!~s.indexOf(o);o=f(o))Object.getOwnPropertyNames(o).forEach(function(t){n[t]=function(){return e[t]}});return n.default=function(){return e},S.d(r,n),r},S.d=function(e,t){for(var r in t)S.o(t,r)&&!S.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},S.f={},S.e=function(e){return Promise.all(Object.keys(S.f).reduce(function(t,r){return S.f[r](e,t),t},[]))},S.u=function(e){return""+({131:"fae0bf5f8a19d003",157:"5d3a17ceaab201fe",453:"e0cb6bf68c74b59d",72:"62a067bd2692e7b1"})[e]+".js"},S.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),S.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},p={},m="@nocobase/plugin-calendar:",S.l=function(e,t,r,n){if(p[e]){p[e].push(t);return}if(void 0!==r){for(var o,a,i=document.getElementsByTagName("script"),c=0;c<i.length;c++){var l=i[c];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==m+r){o=l;break}}}!o&&(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,S.nc&&o.setAttribute("nonce",S.nc),o.setAttribute("data-webpack",m+r),o.src=e),p[e]=[t];var u=function(t,r){o.onerror=o.onload=null,clearTimeout(d);var n=p[e];if(delete p[e],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach(function(e){return e(r)}),t)return t(r)},d=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),a&&document.head.appendChild(o)},S.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},S.p=(!(v=window.__nocobase_public_path__||"/").endsWith("/")&&(v+="/"),v+"static/plugins/@nocobase/plugin-calendar/dist/client/"),h={909:0},S.f.j=function(e,t){var r=S.o(h,e)?h[e]:void 0;if(0!==r){if(r)t.push(r[2]);else{var n=new Promise(function(t,n){r=h[e]=[t,n]});t.push(r[2]=n);var o=S.p+S.u(e),a=Error();S.l(o,function(t){if(S.o(h,e)&&(0!==(r=h[e])&&(h[e]=void 0),r)){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;a.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",a.name="ChunkLoadError",a.type=n,a.request=o,r[1](a)}},"chunk-"+e,e)}}},g=function(e,t){var r=t[0],n=t[1],o=t[2],a,i,c=0;if(r.some(function(e){return 0!==h[e]})){for(a in n)S.o(n,a)&&(S.m[a]=n[a]);o&&o(S)}for(e&&e(t);c<r.length;c++)i=r[c],S.o(h,i)&&h[i]&&h[i][0](),h[i]=0},(y=self.webpackChunk_nocobase_plugin_calendar=self.webpackChunk_nocobase_plugin_calendar||[]).forEach(g.bind(null,0)),y.push=g.bind(null,y.push.bind(y));var C={};return!function(){"use strict";S.r(C),S.d(C,{PluginCalendarClient:function(){return eJ},default:function(){return eQ}});var e=S("772"),t=S("156"),r=S.n(t),n=S("238"),o="calendar";function a(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.i18n.t(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,o,a;n=e,o=t,a=r[t],o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})}return e}({ns:o},r))}function i(e){return"{{t('".concat(e,"', { ns: '").concat(o,"' })}}")}function c(){return(0,n.useTranslation)([o,"client"],{nsMode:"fallback"})}var l=S("482"),u=S("505"),d=S("760"),b=S.n(d),s=S("467"),f=function(n){var o=(0,u.useFieldSchema)(),a=(0,t.useMemo)(function(){return p(o)},[o]);return a?r().createElement(e.NocoBaseRecursionField,{schema:a,name:a.name}):null};function p(e){return e["x-component"].endsWith(".Event")?e:e.reduceProperties(function(e,t){return t["x-component"].endsWith(".Event")?t:e},null)}var m={1:{1:"春节",15:"元宵"},2:{2:"龙抬头"},5:{5:"端午"},7:{7:"七夕",15:"中元"},8:{15:"中秋"},9:{9:"重阳"},12:{29:"除夕",30:"除夕"}},v={1:{1:"元旦"},2:{14:"情人节"},3:{8:"妇女节"},4:{1:"愚人节",4:"清明节"},5:{1:"劳动节",4:"青年节"},6:{1:"儿童节"},7:{1:"建党节"},8:{1:"建军节"},9:{10:"教师节"},10:{1:"国庆节"}};let h={lunarInfo:[19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42416,83315,21168,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46752,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,23232,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19195,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835,37744,18936,18800,25776,92326,59984,27424,108228,43744,37600,53987,51552,54615,54432,55888,23893,22176,42704,21972,21200,43448,43344,46240,46758,44368,21920,43940,42416,21168,45683,26928,29495,27296,44368,84821,19296,42352,21732,53600,59752,54560,55968,92838,22224,19168,43476,42192,53584,62034,54560],solarMonth:[31,28,31,30,31,30,31,31,30,31,30,31],gan:["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],zhi:["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],animals:["鼠","牛","虎","兔","龙","蛇","马","羊","猴","鸡","狗","猪"],lunarTerm:["小寒","大寒","立春","雨水","惊蛰","春分","清明","谷雨","立夏","小满","芒种","夏至","小暑","大暑","立秋","处暑","白露","秋分","寒露","霜降","立冬","小雪","大雪","冬至"],lTermInfo:["9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd0b06bdb0722c965ce1cfcc920f","b027097bd097c36b0b6fc9274c91aa","9778397bd19801ec9210c965cc920e","97b6b97bd19801ec95f8c965cc920f","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd197c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bd09801d98082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec95f8c965cc920e","97bcf97c3598082c95f8e1cfcc920f","97bd097bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c3598082c95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf97c359801ec95f8c965cc920f","97bd097bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd19801ec9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b97bd19801ec95f8c965cc920f","97bd07f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c91aa","97b6b97bd19801ec9210c965cc920e","97bd07f1487f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c965cc920e","97bcf7f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b97bd19801ec9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b97bd197c36c9210c9274c920e","97bcf7f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","9778397bd097c36c9210c9274c920e","97b6b7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c36b0b6fc9210c8dc2","9778397bd097c36b0b70c9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9274c91aa","97b6b7f0e47f531b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c91aa","97b6b7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","9778397bd097c36b0b6fc9210c8dc2","977837f0e37f149b0723b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f5307f595b0b0bc920fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f595b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc9210c8dc2","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd097c35b0b6fc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0b0bb0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14998082b0723b06bd","7f07e7f0e37f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e397bd07f595b0b0bc920fb0722","977837f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f595b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e37f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f1487f531b0b0bb0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e47f149b0723b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14998082b0723b06bd","7f07e7f0e37f14998083b0787b0721","7f0e27f0e47f531b0723b0b6fb0722","7f0e37f0e366aa89801eb072297c35","7ec967f0e37f14898082b0723b02d5","7f07e7f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66aa89801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b0721","7f07e7f0e47f531b0723b0b6fb0722","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b0723b02d5","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e36665b66a449801e9808297c35","665f67f0e37f14898082b072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e26665b66a449801e9808297c35","665f67f0e37f1489801eb072297c35","7ec967f0e37f14998082b0787b06bd","7f07e7f0e47f531b0723b0b6fb0721","7f0e27f1487f531b0b0bb0b6fb0722"],nStr1:["日","一","二","三","四","五","六","七","八","九","十"],nStr2:["初","十","廿","卅"],nStr3:["正","二","三","四","五","六","七","八","九","十","冬","腊"],nStr4:["零","一","二","三","四","五","六","七","八","九","十"],lYearDays:function(e){var t,r=348;for(t=32768;t>8;t>>=1)r+=h.lunarInfo[e-1900]&t?1:0;return r+h.leapDays(e)},leapMonth:function(e){return 15&h.lunarInfo[e-1900]},leapDays:function(e){return h.leapMonth(e)?65536&h.lunarInfo[e-1900]?30:29:0},monthDays:function(e,t){return t>12||t<1?-1:h.lunarInfo[e-1900]&65536>>t?30:29},solarDays:function(e,t){if(t>12||t<1)return -1;var r=t-1;return 1==r?e%4==0&&e%100!=0||e%400==0?29:28:h.solarMonth[r]},toGanZhi:function(e){return h.gan[e%10]+h.zhi[e%12]},getTerm:function(e,t){if(e<1900||e>2100||t<1||t>24)return -1;var r=h.lTermInfo[e-1900],n=[parseInt("0x"+r.substr(0,5)).toString(),parseInt("0x"+r.substr(5,5)).toString(),parseInt("0x"+r.substr(10,5)).toString(),parseInt("0x"+r.substr(15,5)).toString(),parseInt("0x"+r.substr(20,5)).toString(),parseInt("0x"+r.substr(25,5)).toString()];return parseInt([n[0].substr(0,1),n[0].substr(1,2),n[0].substr(3,1),n[0].substr(4,2),n[1].substr(0,1),n[1].substr(1,2),n[1].substr(3,1),n[1].substr(4,2),n[2].substr(0,1),n[2].substr(1,2),n[2].substr(3,1),n[2].substr(4,2),n[3].substr(0,1),n[3].substr(1,2),n[3].substr(3,1),n[3].substr(4,2),n[4].substr(0,1),n[4].substr(1,2),n[4].substr(3,1),n[4].substr(4,2),n[5].substr(0,1),n[5].substr(1,2),n[5].substr(3,1),n[5].substr(4,2)][t-1])},toChinaYear:function(e){var t=parseInt((e/1e3).toString()),r=parseInt((e%1e3/100).toString()),n=parseInt((e%100/10).toString());return h.nStr4[t]+h.nStr4[r]+h.nStr4[n]+h.nStr4[e%10]+"年"},toChinaMonth:function(e){if(e>12||e<1)return -1;var t=h.nStr3[e-1];return t+"月"},toChinaDay:function(e){var t;switch(e){case 10:t="初十";break;case 20:t="二十";break;case 30:t="三十";break;default:t=h.nStr2[Math.floor(e/10)]+h.nStr1[e%10]}return t},getAnimal:function(e){return h.animals[(e-4)%12]},solar2lunar:function(e,t,r){if(e<1900||e>2100||1900==e&&1==t&&r<31)return -1;if(e)n=new Date(e,parseInt(t.toString())-1,r);else var n=new Date;var o,a=0,i=(e=n.getFullYear(),t=n.getMonth()+1,r=n.getDate(),(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())-Date.UTC(1900,0,31))/864e5);for(o=1900;o<2101&&i>0;o++)i-=a=h.lYearDays(o);i<0&&(i+=a,o--);var c=new Date,l=!1;c.getFullYear()==e&&c.getMonth()+1==t&&c.getDate()==r&&(l=!0);var u=n.getDay(),d=h.nStr1[u];0==u&&(u=7);var b=o,s=h.leapMonth(o),f=!1;for(o=1;o<13&&i>0;o++)s>0&&o==s+1&&0==f?(--o,f=!0,a=h.leapDays(b)):a=h.monthDays(b,o),1==f&&o==s+1&&(f=!1),i-=a;0==i&&s>0&&o==s+1&&(f?f=!1:(f=!0,--o)),i<0&&(i+=a,--o);var p=o,g=i+1,y=t-1,x=h.getTerm(e,3),w=h.toGanZhi(e-4),S=new Date(e,1,x).getTime();new Date(e,y,r).getTime()<S&&(w=h.toGanZhi(e-5));var C=h.getTerm(e,2*t-1),O=h.getTerm(e,2*t),P=h.toGanZhi(12*(e-1900)+t+11);r>=C&&(P=h.toGanZhi(12*(e-1900)+t+12));var k=!1,j="";C==r&&(k=!0,j=h.lunarTerm[2*t-2]),O==r&&(k=!0,j=h.lunarTerm[2*t-1]);var D=Date.UTC(e,y,1,0,0,0,0)/864e5+25567+10,T=h.toGanZhi(D+r-1),E=m[p]&&m[p][g]?m[p][g]:"";[2022,2025,2026,2027,2028,2029,2031,2032].includes(e)&&12===p&&29===g&&(E="除夕");var I=v[t]&&v[t][r]?v[t][r]:"";return{lYear:b,lMonth:p,lDay:g,animal:h.getAnimal(b),yearCn:h.toChinaYear(b),monthCn:(f&&s===p?"闰":"")+h.toChinaMonth(p),dayCn:h.toChinaDay(g),cYear:e,cMonth:t,cDay:r,gzYear:w,gzMonth:P,gzDay:T,isToday:l,isLeap:f,nWeek:u,ncWeek:"星期"+d,isTerm:k,term:j,lunarFestival:E,festival:I}},lunar2solar:function(e,t,r,n){var o=h.leapMonth(e);if(h.leapDays(e),n&&o!=t||2100==e&&12==t&&r>1||1900==e&&1==t&&r<31)return -1;var a=h.monthDays(e,t);if(e<1900||e>2100||r>a)return -1;for(var i=0,c=1900;c<e;c++)i+=h.lYearDays(c);var l=0,u=!1;for(c=1;c<t;c++)l=h.leapMonth(e),u||l<=c&&l>0&&(i+=h.leapDays(e),u=!0),i+=h.monthDays(e,c);n&&(i+=a);var d=new Date(864e5*(i+r-31)+Date.UTC(1900,1,30,0,0,0)),b=d.getUTCFullYear(),s=d.getUTCMonth()+1,f=d.getUTCDate();return h.solar2lunar(b,s,f)}};var g=function(e){var t=b()(e),r=h.solar2lunar(t.year(),t.month()+1,t.date());return"number"!=typeof r?r.lunarFestival||r.term||r.dayCn:r},y=function(e){return e.format("YYYY-MM-DDTHH:mm:ss.SSSZ")},x=function(e){var n=e.date,o=e.label,a=e.drilldownView,i=e.onDrillDown,c=e.showLunar,l=void 0!==c&&c,u=e.type,d=e.localizer,b=(0,t.useMemo)(function(){if(!!l)return r().createElement("span",{className:"rbc-date-lunar"},g(n))},[n,l]),s=(0,t.useMemo)(function(){return"week"===u?r().createElement("div",null,r().createElement("span",null,d.format(n,"ddd")),r().createElement("div",{className:"rbc-date-wrap"},r().createElement("span",{className:"rbc-date-solar"},d.format(n,"DD")),b)):r().createElement(r().Fragment,null,r().createElement("span",{className:"rbc-date-solar"},o),b)},[u]),f=a?"a":r().Fragment;return r().createElement(f,{onClick:i,role:"cell"},s)},w=(0,t.createContext)(null);w.displayName="CalendarToolbarContext",(0,t.createContext)(null).displayName="CalendarContext",(0,t.createContext)(null).displayName="DeleteEventContext";var O=S("202");function P(){var e,t,r=(e=["\n  .rbc-overlay {\n    position: absolute;\n    z-index: 50;\n    margin-top: 5px;\n    border-radius: ",";\n    background-color: ",";\n    box-shadow: ",";\n    padding: ",";\n  }\n  .rbc-overlay > * + * {\n    margin-top: 1px;\n  }\n\n  .rbc-overlay-header {\n    font-weight: 500;\n    font-size: ",";\n    color: ",";\n    min-height: ",";\n    border-bottom: ",";\n    margin: ",";\n    padding: ",";\n  }\n\n  .rbc-event {\n    border: none;\n    box-sizing: border-box;\n    box-shadow: none;\n    margin: 0;\n    padding: 2px 5px;\n    background-color: ",";\n    border-radius: ",";\n    color: ",";\n    cursor: pointer;\n    font-size: ",";\n    width: 100%;\n    text-align: left;\n    &:hover {\n      background-color: ",";\n      color: ",";\n    }\n  }\n  .rbc-slot-selecting .rbc-event {\n    cursor: inherit;\n    pointer-events: none;\n  }\n  .rbc-event.rbc-selected {\n    background-color: ",";\n    color: ",";\n  }\n  .rbc-event:focus {\n    // outline: 5px auto #3b99fc;\n  }\n\n  .rbc-event-label {\n    font-size: 80%;\n  }\n\n  .rbc-event-overlaps {\n    box-shadow: ",";\n  }\n\n  .rbc-event-continues-prior {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n  }\n\n  .rbc-event-continues-after {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n\n  .rbc-event-continues-earlier {\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n  }\n\n  .rbc-event-continues-later {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n"],!t&&(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return P=function(){return r},r}var k=(0,O.createGlobalStyle)(P(),function(e){var t=e.theme;return"".concat(t.borderRadius,"px")},function(e){return e.theme.colorBgElevated},function(e){return e.theme.boxShadow},function(e){var t=e.theme;return"".concat(t.paddingContentVertical,"px ").concat(t.paddingContentHorizontalSM,"px")},function(e){var t=e.theme;return"".concat(t.fontSize,"px")},function(e){return e.theme.colorTextSecondary},function(e){var t=e.theme;return"".concat(t.sizeXL,"px")},function(e){var t=e.theme;return"1px solid ".concat(t.colorBorderSecondary)},function(e){var t=e.theme;return"-".concat(t.paddingContentVertical,"px -").concat(t.paddingContentHorizontalSM,"px ").concat(t.paddingContentVertical,"px -").concat(t.paddingContentHorizontalSM,"px")},function(e){var t=e.theme;return"".concat(t.paddingXXS,"px ").concat(t.paddingContentHorizontalSM,"px")},function(e){return e.theme.colorBorderSecondary},function(e){var t=e.theme;return"".concat(t.borderRadiusXS,"px")},function(e){return e.theme.colorTextSecondary},function(e){var t=e.theme;return"".concat(t.fontSizeSM,"px")},function(e){return e.theme.colorPrimaryBg},function(e){return e.theme.colorPrimaryText},function(e){return e.theme.colorPrimaryBg},function(e){return e.theme.colorPrimaryText},function(e){return e.theme.boxShadow});k.displayName="GlobalStyle";var j=S("721"),D=function(){var t=(0,e.useDataBlockHeight)(),r=(0,e.useBlockHeightProps)().heightProps,n=r.title,o=r.titleHeight,a=j.theme.useToken().token;if(!!t){var i=2*a.paddingLG;return t-i-(n?o:0)}},T={type:"void","x-component":"AssociationField.AddNewer","x-action":"create",title:'{{ t("Add record") }}',"x-component-props":{className:"nb-action-popup"},properties:{tabs:{type:"void","x-component":"Tabs","x-component-props":{},"x-initializer":"popup:addTab","x-initializer-props":{gridInitializer:"popup:addNew:addBlock"},properties:{tab1:{type:"void",title:'{{t("Add new")}}',"x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{},properties:{grid:{type:"void","x-component":"Grid","x-initializer":"popup:addNew:addBlock",properties:{}}}}}}}},E=(0,e.genStyleHook)("nb-calendar",function(e){var t,r,n;return t={},r=e.componentCls,n={".rbc-btn":{color:"inherit",font:"inherit",margin:"0"},"button.rbc-btn":{overflow:"visible",textTransform:"none",WebkitAppearance:"button",cursor:"pointer"},"button[disabled].rbc-btn":{cursor:"not-allowed"},"button.rbc-input::-moz-focus-inner":{border:"0",padding:"0"},".rbc-button-link":{border:"none",backgroundColor:"transparent"},".rbc-calendar":{boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"stretch",height:"100%"},".rbc-calendar *,\n.rbc-calendar *:before,\n.rbc-calendar *:after":{boxSizing:"inherit"},".rbc-abs-full,\n.rbc-row-bg":{overflow:"hidden",position:"absolute",top:"0",left:"0",right:"0",bottom:"0"},".rbc-ellipsis,\n.rbc-event-label,\n.rbc-row-segment .rbc-event-content,\n.rbc-show-more":{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},".rbc-rtl":{direction:"rtl"},".rbc-off-range":{color:e.colorTextDisabled},".rbc-header":{overflow:"hidden",flex:"1 0 0%",textOverflow:"ellipsis",whiteSpace:"nowrap",padding:"".concat(e.paddingXXS,"px ").concat(e.paddingSM,"px"),verticalAlign:"middle",minHeight:e.sizeXL,color:e.colorText,margin:"0 ".concat(e.marginXXS,"px"),borderBottom:"2px solid ".concat(e.colorBorderSecondary)},".rbc-rtl .rbc-header + .rbc-header":{borderLeftWidth:"0",borderRight:"1px solid ".concat(e.colorBorderSecondary)},".rbc-header > a,\n.rbc-header > a:active,\n.rbc-header > a:visited":{color:"inherit",textDecoration:"none"},".rbc-row-content":{position:"relative",userSelect:"none",WebkitUserSelect:"none",zIndex:4},".rbc-row-content-scrollable":{display:"flex",flexDirection:"column",height:"100%"},".rbc-row-content-scrollable .rbc-row-content-scroll-container":{height:"100%",overflowY:"scroll",msOverflowStyle:"none",scrollbarWidth:"none"},".rbc-row-content-scrollable .rbc-row-content-scroll-container::-webkit-scrollbar":{display:"none"},".rbc-toolbar":{display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",marginBottom:e.marginXS,fontSize:e.fontSize},".rbc-toolbar .rbc-toolbar-label":{flexGrow:1,padding:"0 ".concat(e.paddingXS,"px"),textAlign:"center"},".rbc-toolbar button":{outline:"none",fontSize:e.fontSize,lineHeight:[e.lineHeight,"normal"],height:e.controlHeight,color:e.colorTextLabel,display:"inline-block",margin:"0",position:"relative",zIndex:1,textAlign:"center",verticalAlign:"middle",background:"none",backgroundImage:"none",border:"1px solid ".concat(e.colorBorder),padding:"".concat(e.paddingXXS,"px ").concat(e.paddingSM+e.paddingXXS,"px"),borderRadius:e.borderRadiusXS,whiteSpace:"nowrap"},".rbc-toolbar button:active,\n.rbc-toolbar button.rbc-active":{zIndex:2,color:"#1890ff",borderColor:"#1890ff"},".rbc-toolbar button:active:hover,\n.rbc-toolbar button:active:focus,\n.rbc-toolbar button.rbc-active:hover,\n.rbc-toolbar button.rbc-active:focus":{zIndex:2,color:"#40a9ff",borderColor:"#40a9ff"},".rbc-toolbar button:hover":{zIndex:2,color:"#40a9ff",borderColor:"#40a9ff"},".rbc-btn-group":{display:"inline-block",whiteSpace:"nowrap"},".rbc-btn-group > button:first-child:not(:last-child)":{borderTopRightRadius:"0",borderBottomRightRadius:"0"},".rbc-btn-group > button:last-child:not(:first-child)":{borderTopLeftRadius:"0",borderBottomLeftRadius:"0"},".rbc-rtl .rbc-btn-group > button:first-child:not(:last-child)":{borderRadius:"4px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0"},".rbc-rtl .rbc-btn-group > button:last-child:not(:first-child)":{borderRadius:"4px",borderTopRightRadius:"0",borderBottomRightRadius:"0"},".rbc-btn-group > button:not(:first-child):not(:last-child)":{borderRadius:"0"},".rbc-btn-group button + button":{marginLeft:"-1px"},".rbc-rtl .rbc-btn-group button + button":{marginLeft:"0",marginRight:"-1px"},".rbc-btn-group + .rbc-btn-group,\n.rbc-btn-group + button":{marginLeft:"10px"},".rbc-event":{border:"none",boxSizing:"border-box",boxShadow:"none",margin:"0",padding:"2px 5px",backgroundColor:e.colorBorderSecondary,borderRadius:e.borderRadiusXS,cursor:"pointer",fontSize:e.fontSizeSM,width:"100%",textAlign:"left","&:hover":{backgroundColor:e.colorPrimaryBg,color:e.colorPrimaryText}},".rbc-slot-selecting .rbc-event":{cursor:"inherit",pointerEvents:"none"},".rbc-event.rbc-selected":{backgroundColor:e.colorPrimaryBg,color:e.colorPrimaryText},".rbc-event-label":{fontSize:"80%"},".rbc-event-overlaps":{boxShadow:"-1px 1px 5px 0px rgba(51, 51, 51, 0.5)"},".rbc-event-continues-prior":{borderTopLeftRadius:"0",borderBottomLeftRadius:"0"},".rbc-event-continues-after":{borderTopRightRadius:"0",borderBottomRightRadius:"0"},".rbc-event-continues-earlier":{borderTopLeftRadius:"0",borderTopRightRadius:"0"},".rbc-event-continues-later":{borderBottomLeftRadius:"0",borderBottomRightRadius:"0"},".rbc-row":{display:"flex",flexDirection:"row"},".rbc-row-segment":{padding:"0 4px 1px 4px"},".rbc-selected-cell":{backgroundColor:"rgba(0, 0, 0, 0.1)"},".rbc-show-more":{zIndex:4,fontWeight:"bold",fontSize:"85%",height:"auto",lineHeight:"normal",color:"inherit",padding:"2px 5px"},".rbc-month-view":{position:"relative",display:"flex",flexDirection:"column",flex:"1 0 0",width:"100%",userSelect:"none",WebkitUserSelect:"none",height:"68vh",".rbc-day-bg":{borderTop:"2px solid ".concat(e.colorBorderSecondary)},".rbc-today":{borderColor:"".concat(e.colorPrimaryBorder," !important"),backgroundColor:"".concat(e.colorPrimaryBg," !important")},".rbc-header":{borderBottom:"0 !important"}},".rbc-month-header":{display:"flex",flexDirection:"row"},".rbc-month-row":{display:"flex",position:"relative",flexDirection:"column",flex:"1 0 0",flexBasis:"0px",overflow:"hidden",height:"100%"},".rbc-date-cell":{flex:"1 1 0",minWidth:"0",paddingLeft:"12px",paddingTop:"4px"},".rbc-date-cell.rbc-now span":{color:"#1890ff"},".rbc-date-cell a,\n.rbc-date-cell a:active,\n.rbc-date-cell a:visited":{color:"inherit",textDecoration:"none"},".rbc-date-cell a:hover":{color:"#1890ff"},".rbc-date-cell .rbc-date-solar":{fontWeight:500},".rbc-date-cell .rbc-date-lunar":{paddingLeft:"12px"},".rbc-date-cell:not(.rbc-off-range) .rbc-date-lunar":{color:"#aaa"},".rbc-date-cell .rbc-date-lunar:hover":{color:"inherit"},".rbc-row-bg":{display:"flex",flexDirection:"row",flex:"1 0 0",overflow:"hidden"},".rbc-day-bg":{flex:"1 0 0%",margin:"0 4px","&:hover":{background:e.colorFillQuaternary}},".rbc-agenda-view":{display:"flex",flexDirection:"column",flex:"1 0 0",overflow:"auto"},".rbc-agenda-view table.rbc-agenda-table":{width:"100%",border:"1px solid #f0f0f0",borderSpacing:"0",borderCollapse:"collapse"},".rbc-agenda-view table.rbc-agenda-table tbody > tr > td":{padding:"5px 10px",verticalAlign:"top"},".rbc-agenda-view table.rbc-agenda-table .rbc-agenda-time-cell":{paddingLeft:"15px",paddingRight:"15px",textTransform:"lowercase"},".rbc-agenda-view table.rbc-agenda-table tbody > tr > td + td":{borderLeft:"1px solid #f0f0f0"},".rbc-rtl .rbc-agenda-view table.rbc-agenda-table tbody > tr > td + td":{borderLeftWidth:"0",borderRight:"1px solid #f0f0f0"},".rbc-agenda-view table.rbc-agenda-table tbody > tr + tr":{borderTop:"1px solid #f0f0f0"},".rbc-agenda-view table.rbc-agenda-table thead > tr > th":{padding:"3px 5px",textAlign:"left",borderBottom:"1px solid #f0f0f0"},".rbc-rtl .rbc-agenda-view table.rbc-agenda-table thead > tr > th":{textAlign:"right"},".rbc-agenda-time-cell":{textTransform:"lowercase"},".rbc-agenda-time-cell .rbc-continues-after:after":{content:"' \xbb'"},".rbc-agenda-time-cell .rbc-continues-prior:before":{content:"'\xab '"},".rbc-agenda-date-cell,\n.rbc-agenda-time-cell":{whiteSpace:"nowrap"},".rbc-agenda-event-cell":{width:"100%"},".rbc-time-column":{display:"flex",flexDirection:"column",minHeight:"100%"},".rbc-time-column .rbc-timeslot-group":{flex:1},".rbc-timeslot-group":{borderBottom:"1px solid #f0f0f0",minHeight:"40px",lineHeight:"39px",display:"flex",flexFlow:"column nowrap","&:hover":{background:"#f0f0f0"}},".rbc-time-gutter,\n.rbc-header-gutter":{flex:"none"},".rbc-label":{padding:"0 5px"},".rbc-day-slot":{position:"relative"},".rbc-day-slot .rbc-events-container":{bottom:"0",left:"0",position:"absolute",right:"0",marginRight:"10px",top:"0"},".rbc-day-slot .rbc-events-container.rbc-rtl":{left:"10px",right:"0"},".rbc-day-slot .rbc-event":{border:"1px solid #265985",display:"flex",maxHeight:"100%",minHeight:"20px",flexFlow:"column wrap",alignItems:"flex-start",overflow:"hidden",position:"absolute"},".rbc-day-slot .rbc-event-label":{flex:"none",paddingRight:"5px",width:"auto"},".rbc-day-slot .rbc-event-content":{width:"100%",flex:"1 1 0",wordWrap:"break-word",lineHeight:1,height:"100%",minHeight:"1em"},".rbc-time-header-gutter":{lineHeight:"40px"},".rbc-time-header-cell":{minHeight:"32px !important"},".rbc-time-header-cell .rbc-header":{display:"flex"},".rbc-time-header-cell .rbc-header.rbc-today":{borderColor:e.colorPrimaryBorder,backgroundColor:e.colorPrimaryBg,color:e.colorPrimaryText},".rbc-time-header-cell .rbc-header a":{display:"flex",flexDirection:"column"},".rbc-time-header-cell .rbc-date-wrap":{display:"flex",alignItems:"center"},".rbc-time-header-cell .rbc-date-solar":{fontSize:"18px"},".rbc-time-header-cell .rbc-date-lunar":{marginLeft:"4px"},".rbc-time-header-cell .rbc-header:not(.rbc-today) .rbc-date-lunar":{color:"#aaa"},".rbc-calendar.view-week":{".rbc-time-header-cell":{marginTop:"-32px",marginBottom:"4px"},".rbc-time-view":{paddingTop:"32px",borderTop:"0"},".rbc-header":{padding:"4px 8px"},".rbc-time-header-content":{padding:"4px 0"},".rbc-time-header-gutter":{padding:"0",paddingTop:"2px","> div":{borderTop:"2px solid #f0f0f0",padding:"0 5px"}}},".rbc-time-view-resources .rbc-time-gutter,\n.rbc-time-view-resources .rbc-time-header-gutter":{position:"sticky",left:"0",backgroundColor:"white",borderRight:"1px solid #f0f0f0",zIndex:10,marginRight:"-1px"},".rbc-time-view-resources .rbc-time-header":{overflow:"hidden"},".rbc-time-view-resources .rbc-time-header-content":{minWidth:"auto",flex:"1 0 0",flexBasis:"0px"},".rbc-time-view-resources .rbc-time-header-cell-single-day":{display:"none"},".rbc-time-view-resources .rbc-day-slot":{minWidth:"140px"},".rbc-time-view-resources .rbc-header,\n.rbc-time-view-resources .rbc-day-bg":{width:"140px",flex:"1 1 0",flexBasis:"0 px"},".rbc-time-header-content + .rbc-time-header-content":{marginLeft:"-1px"},".rbc-time-slot":{flex:"1 0 0"},".rbc-time-slot.rbc-now":{fontWeight:"bold"},".rbc-day-header":{textAlign:"center"},".rbc-slot-selection":{zIndex:10,position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",fontSize:"75%",width:"100%",padding:"3px"},".rbc-slot-selecting":{cursor:"move"},".rbc-time-view":{display:"flex",flexDirection:"column",flex:1,width:"100%",borderTop:"1px solid #f0f0f0",minHeight:"0"},".rbc-time-view .rbc-time-gutter":{whiteSpace:"nowrap"},".rbc-time-view .rbc-allday-cell":{boxSizing:"content-box",width:"100%",height:"100%",position:"relative"},".rbc-time-view .rbc-allday-cell + .rbc-allday-cell":{borderLeft:"1px solid #f0f0f0"},".rbc-time-view .rbc-allday-events":{position:"relative",zIndex:4},".rbc-time-view .rbc-row":{boxSizing:"border-box",minHeight:"20px"},".rbc-time-header":{display:"flex",flex:"0 0 auto",flexDirection:"row"},".rbc-time-header.rbc-overflowing":{borderRight:"1px solid #f0f0f0"},".rbc-rtl .rbc-time-header.rbc-overflowing":{borderRightWidth:"0",borderLeft:"1px solid #f0f0f0"},".rbc-time-header > .rbc-row:first-child":{borderBottom:"1px solid #f0f0f0"},".rbc-time-header > .rbc-row.rbc-row-resource":{borderBottom:"1px solid #f0f0f0"},".rbc-time-header-cell-single-day":{display:"none"},".rbc-time-header-content":{flex:1,minWidth:"0",flexDirection:"column"},".rbc-rtl .rbc-time-header-content":{borderLeftWidth:"0",borderRight:"1px solid #f0f0f0"},".rbc-time-header-content > .rbc-row.rbc-row-resource":{borderBottom:"1px solid #f0f0f0",flexShrink:0},".rbc-time-content":{display:"flex",flex:"1 0 0%",alignItems:"flex-start",width:"100%",borderTop:"1px solid #f0f0f0",overflowY:"auto",position:"relative"},".rbc-time-content > .rbc-time-gutter":{flex:"none"},".rbc-rtl .rbc-time-content > * + * > *":{borderLeftWidth:"0",borderRight:"1px solid #f0f0f0"},".rbc-time-content > .rbc-day-slot":{width:"100%",userSelect:"none",WebkitUserSelect:"none"},".rbc-current-time-indicator":{position:"absolute",zIndex:3,left:"0",right:"0",height:"1px",backgroundColor:"#74ad31",pointerEvents:"none"},"@media only screen and (max-width: 800px)":{".view-type-calendar .action-buttons":{position:"relative !important",left:"0 !important",".filter-action-button":{left:"0 !important"}},".rbc-toolbar .rbc-toolbar-label":{position:"absolute",top:"28px",left:"50%",transform:"translateX(-50%)"},".rbc-toolbar":{justifyContent:"space-between !important"},".rbc-header":{padding:"4px !important"}}},r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}),I=S(581);function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,o,a;n=e,o=t,a=r[t],o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})}return e}function B(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a=[],i=!0,c=!1;try{for(o=o.call(e);!(i=(r=o.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,n=e}finally{try{!i&&null!=o.return&&o.return()}finally{if(c)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=["month","week","day"],R=r().createContext({close:function(){},allowDeleteEvent:!1});function M(n){var o=(0,u.useFieldSchema)(),a=(0,t.useMemo)(function(){return o.reduceProperties(function(e,t){return t["x-component"].endsWith(".ActionBar")?t:e},null)},[]);return r().createElement(w.Provider,{value:n},r().createElement(e.NocoBaseRecursionField,{name:a.name,schema:a}))}var _=function(r,n,o,a){var i,l,u=(0,e.useLazy)(function(){return I("imported_japkg0_component",Promise.all([S.e("157"),S.e("131")]).then(S.t.bind(S,197,23)))},"parseExpression"),d=c().t,f=(0,e.useCollection)().fields,p=(0,e.useApp)().pm.get("calendar"),m=null===(i=f.find(function(e){return e.name===(null==n?void 0:n.title)}))||void 0===i?void 0:i.uiSchema,v=f.find(function(e){return e.name===(null==n?void 0:n.colorFieldName)});return(0,t.useMemo)(function(){if(!Array.isArray(r))return{events:[],enumList:[]};var t,i=(null==v?void 0:null===(t=v.uiSchema)||void 0===t?void 0:t.enum)||[],c=[];return r.forEach(function(t){var r=t.cron,i=t.exclude,l=void 0===i?[]:i,v=b()((0,s.get)(t,n.start)||b()()),h=b()((0,s.get)(t,n.end)||v),g=h.diff(v,"millisecond",!0),y=b()(o),x=y.clone().startOf("month"),w=x.clone().endOf("month");"month"===a&&(x=x.startOf("week"),w=w.endOf("week"));var S=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.clone();if(!r.isBefore(v)&&(!!r.isBetween(x,w)||!!h.isBetween(x,w))){var o=!1;if(null==l?void 0:l.some(function(e){return e.endsWith("_after")?(e=e.replace(/_after$/,""),o=!0,r.isSameOrAfter(e)):r.isSame(e)}))return o;var a=f.find(function(e){return e.name===n.title}),i=p.getTitleFieldInterface(a.interface),u=(0,e.getLabelFormatValue)(m,(0,s.get)(t,n.title),!0,a,null==i?void 0:i.TitleRenderer),b={id:(0,s.get)(t,n.id||"id"),colorFieldValue:t[n.colorFieldName],title:u||d("Untitle"),start:r.toDate(),end:r.add(g,"millisecond").toDate()};c.push(b)}};if("every_week"===r){for(var C=v.clone().year(x.year()).month(x.month()).date(x.date()).day(v.day());C.isBefore(w)&&!S(C.clone());){;C=C.add(1,"week")}}else if("every_month"===r)S(v.clone().year(y.year()).month(y.month()));else if("every_year"===r)S(v.clone().year(y.year()));else{if(S(),!r)return;try{for(var O=u(r,{startDate:x.toDate(),endDate:w.toDate(),iterator:!0,currentDate:v.toDate(),utc:!0});O.hasNext();){var P=O.next().value;if(S(b()(P.toDate())))break}}catch(e){console.error(e)}}}),{events:c,enumList:i}},[m,r,n.colorFieldName,n.start,n.end,n.id,n.title,o,a,d,null==v?void 0:null===(l=v.uiSchema)||void 0===l?void 0:l.enum,u])},L=function(r){var n=(0,u.useFieldSchema)(),o=(0,e.useDesignable)().insertAfterBegin;return(0,t.useCallback)(function(e){!n.reduceProperties(function(e,t){return t["x-component"]==="AssociationField."+r?t:e},null)&&o((0,s.cloneDeep)(e))},[r,n,o])},V=(0,e.withDynamicSchemaProps)((0,e.withSkeletonComponent)(function(n){var o,i,c,d,m=z((0,t.useState)(!1),2),v=m[0],h=m[1],g=(0,e.usePopupUtils)({setVisible:h}).openPopup,w=(0,e.useLazy)(function(){return I("imported_15ujsd5_component",S.e("72").then(S.bind(S,850)))},function(e){return{BigCalendar:e.Calendar,dayjsLocalizer:e.dayjsLocalizer}}),C=(0,e.useLazy)(function(){return I("imported_n5ps8d_component",S.e("453").then(S.bind(S,606)))},"eq"),O=(0,t.useMemo)(function(){return w.dayjsLocalizer(b())},[w]),P=(0,e.useProps)(n),j=P.dataSource,A=P.fieldNames,R=P.showLunar,V=(P.defaultView,P.getFontColor),q=P.getBackgroundColor,Y=D(),W=z((0,t.useState)(new Date),2),G=W[0],H=W[1],U=z((0,t.useState)(n.defaultView||"month"),2),X=U[0],Z=U[1],$=_(j,A,G,X),J=$.events;$.enumList;var Q=z((0,t.useState)({}),2),K=Q[0],ee=Q[1],et=E(),er=et.wrapSSR,en=et.hashId,eo=et.componentCls,ea=(0,e.useCollectionParentRecordData)(),ei=(0,u.useFieldSchema)(),ec=(0,u.useField)(),el=(0,e.useACLRoleContext)().parseAction,eu=(0,e.useCollection)(),ed=el("".concat(eu.name,":create")),eb=null==A?void 0:null===(o=A.start)||void 0===o?void 0:o[0],es=null==A?void 0:null===(i=A.end)||void 0===i?void 0:i[0],ef=L("AddNewer"),ep=(0,e.useActionContext)(),em=z((0,t.useState)(!1),2),ev=em[0],eh=em[1],eg=z((0,t.useState)(void 0),2),ey=eg[0],ex=eg[1];eu.getField(A.colorFieldName),(0,t.useEffect)(function(){Z(n.defaultView)},[n.defaultView]);var ew=(0,t.useMemo)(function(){return{toolbar:function(e){return r().createElement(M,B(F({},e),{showLunar:R}))},month:{dateHeader:function(e){return r().createElement(x,B(F({},e),{showLunar:R}))}}}},[R]),eS={allDay:"",previous:r().createElement("div",null,r().createElement(l.LeftOutlined,null)),next:r().createElement("div",null,r().createElement(l.RightOutlined,null)),today:a("Today"),month:a("Month"),week:a("Week"),work_week:a("Work week"),day:a("Day"),agenda:a("Agenda"),date:a("Date"),time:a("Time"),event:a("Event"),noEventsInRange:a("None"),showMore:function(e){return a("{{count}} more items",{count:e})}},eC=null==w?void 0:w.BigCalendar;return er(r().createElement("div",{className:"".concat(en," ").concat(eo),style:{height:Y||700}},r().createElement(e.PopupContextProvider,{visible:v,setVisible:h},r().createElement(k,null),r().createElement(e.RecordProvider,{record:K,parent:ea},r().createElement(f,null)),r().createElement(eC,{popup:!0,selectable:!0,events:J,eventPropGetter:function(e){if(e.colorFieldValue){var t=null==V?void 0:V(e.colorFieldValue),r=null==q?void 0:q(e.colorFieldValue),n={};return t&&(n.color=t),r&&(n.backgroundColor=r),{style:n}}},view:X,views:N,date:G,step:60,showMultiDayTimes:!0,messages:eS,onNavigate:H,onView:Z,onSelectSlot:function(e){ex(e),ed&&(ef(T),eh(!0))},onDoubleClickEvent:function(){console.log("onDoubleClickEvent")},onSelectEvent:function(e){var t=null==j?void 0:j.find(function(t){return t[A.id]===e.id});if(!!t)t.__event=B(F({},(0,s.omit)(e,"title")),{start:y(b()(e.start)),end:y(b()(e.end))}),ee(t),g({recordData:t,customActionSchema:p(ei)})},formats:{monthHeaderFormat:"YYYY-M",agendaDateFormat:"M-DD",dayHeaderFormat:"YYYY-M-DD",dayRangeHeaderFormat:function(e,t,r){var n=e.start,o=e.end;return C(n,o,"month")?r.format(n,"YYYY-M",t):"".concat(r.format(n,"YYYY-M",t)," - ").concat(r.format(o,"YYYY-M",t))}},components:ew,localizer:O})),r().createElement(e.ActionContextProvider,{value:B(F({},ep),{visible:ev,setVisible:eh,openMode:null===(d=p(ei))||void 0===d?void 0:null===(c=d["x-component-props"])||void 0===c?void 0:c.openMode})},r().createElement(e.CollectionProvider,{name:eu.name},r().createElement(e.SchemaComponentOptions,{scope:{useCreateFormBlockProps:function(){var r,n,o,a=(0,e.useFormBlockContext)(),i=ey.start,c=ey.end,l=eu.getField(eb),u=eu.getField(es);return(0,t.useEffect)(function(){var t=a.form;if(!!t&&(null===(r=a.service)||void 0===r?!void 0:!r.loading)){if(ey){var r,n,o,d,b,s,f,p=F({},null==l?void 0:null===(n=l.uiSchema)||void 0===n?void 0:n["x-component-props"],null===(d=a.form)||void 0===d?void 0:null===(o=d.query(eb).take())||void 0===o?void 0:o.componentProps),m=F({},null==u?void 0:null===(b=u.uiSchema)||void 0===b?void 0:b["x-component-props"],null===(f=a.form)||void 0===f?void 0:null===(s=f.query(es).take())||void 0===s?void 0:s.componentProps);i=(0,e.handleDateChangeOnForm)(ey.start,p.dateOnly,p.utc,p.picker,p.showTime,p.gtm),c=(0,e.handleDateChangeOnForm)(ey.end,m.dateOnly,m.utc,m.picker,m.showTime,m.gtm),!t.initialValues[eb]&&t.setInitialValuesIn([eb],i),!t.initialValues[es]&&t.setInitialValuesIn([es],c)}}},[a.form,null===(n=a.service)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.data,null===(o=a.service)||void 0===o?void 0:o.loading]),{form:a.form}}}},r().createElement(e.NocoBaseRecursionField,{onlyRenderProperties:!0,basePath:null==ec?void 0:ec.address,schema:ei,filterProperties:function(e){return"AssociationField.AddNewer"===e["x-component"]}}))))))},{displayName:"Calendar"})),q=S("111");function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function W(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){r(e);return}c.done?t(l):Promise.resolve(l).then(n,o)}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var a=[],i=!0,c=!1;try{for(o=o.call(e);!(i=(r=o.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,n=e}finally{try{!i&&null!=o.return&&o.return()}finally{if(c)throw n}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H=j.Typography.Text,U=(0,u.observer)(function(){var n,o,a,i,l,u=(0,e.useActionContext)(),d=u.visible,s=u.setVisible,f=u.setSubmitted,p=(0,e.useRecord)(),m=p.exclude,v=void 0===m?[]:m,h=p.cron;(function(e,t){if(null==e)return;var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++){if(r=a[n],!(t.indexOf(r)>=0))!Object.prototype.propertyIsEnumerable.call(e,r)||(o[r]=e[r])}};})(p,["exclude","cron"]);var g=(0,t.useContext)(R).close,x=(0,e.usePopupUtils)(),w=x.context;x.closePopup;var S=(null==w?void 0:null===(a=w.params)||void 0===a?void 0:a.popupuid)||"",C=(0,e.getStoredPopupContext)(S)||{record:null,service:null},O=(0,t.useMemo)(function(){var e,t;return y(b()(null===(t=C.record)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.__event.start))},[null===(l=C.record)||void 0===l?void 0:null===(i=l.data)||void 0===i?void 0:i.__event.start]),P=!C.record,k=(0,e.useFilterByTk)(),D=(0,e.useBlockRequestContext)(),T=D.resource,E=D.service,I=D.__parent,A=G((0,t.useState)(P?"all":O),2),F=A[0],B=A[1],z=G((0,t.useState)(!1),2),N=z[0],M=z[1];var _=(o=(n=function(){var e,t,r;return function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,function(n){switch(n.label){case 0:if(M(!0),!("all"===F||!h))return[3,2];return[4,T.destroy({filterByTk:k})];case 1:return n.sent(),[3,4];case 2:return[4,T.update({filterByTk:k,values:{exclude:(v||[]).concat(F)}})];case 3:n.sent(),n.label=4;case 4:return M(!1),null==I||null===(t=I.service)||void 0===t||null===(e=t.refresh)||void 0===e||e.call(t),null==E||null===(r=E.refresh)||void 0===r||r.call(E),null==s||s(!1,!0),g(),null==f||f(!0),[2]}})},function(){var e=this,t=arguments;return new Promise(function(r,o){var a=n.apply(e,t);function i(e){W(a,r,o,i,c,"next",e)}function c(e){W(a,r,o,i,c,"throw",e)}i(void 0)})}),function(){return o.apply(this,arguments)}),L=c().t;return(0,q.createPortal)(r().createElement(j.Modal,{title:h?L("Delete events"):null,open:d,onCancel:function(){return s(!1)},onOk:function(){return _()},confirmLoading:N},h?r().createElement(j.Radio.Group,{value:F,onChange:function(e){return B(e.target.value)}},r().createElement(j.Space,{direction:"vertical"},r().createElement(j.Radio,{value:O,disabled:P},L("This event")),r().createElement(j.Radio,{value:"".concat(O,"_after"),disabled:P},L("This and following events")),r().createElement(j.Radio,{value:"all"},L("All events")))):r().createElement(H,{strong:!0,style:{fontSize:"18px"}},L("Delete this event?"))),document.body)},{displayName:"DeleteEvent"}),X=(0,u.observer)(function(n){var o=(0,e.useActionContext)(),a=o.visible,i=o.setVisible,c=(0,e.useCollectionRecordData)(),l=(0,e.useCollection)(),u=(0,(0,e.usePopupSettings)().isPopupVisibleControlledByURL)()?null:i,d=(0,t.useCallback)(function(){i(!1)},[i]);return r().createElement(e.PopupContextProvider,{visible:a,setVisible:u},r().createElement(R.Provider,{value:{close:d,allowDeleteEvent:!0}},r().createElement(e.VariablePopupRecordProvider,{recordData:c,collection:l},n.children)))},{displayName:"Event"}),Z=S(581),$=(0,u.observer)(function(){var n=(0,e.useLazy)(function(){return Z("imported_-1cc6dq7_component",S.e("72").then(S.bind(S,850)))},"Navigate"),o=(0,e.useDesignable)().DesignableBar,a=(0,t.useContext)(w).onNavigate;return r().createElement(j.Button.Group,null,r().createElement(j.Button,{icon:r().createElement(l.LeftOutlined,null),onClick:function(){return a(n.PREVIOUS)}}),r().createElement(j.Button,{icon:r().createElement(l.RightOutlined,null),onClick:function(){return a(n.NEXT)}}),r().createElement(o,null))},{displayName:"Nav"}),J=(0,u.observer)(function(){var n=(0,e.useDesignable)().DesignableBar,o=(0,t.useContext)(w),a=o.date,i=o.view,c=o.label,l=o.showLunar,u=(0,t.useMemo)(function(){if(!!l&&"day"===i)return r().createElement("span",null,g(a))},[i,a,l]);return r().createElement(j.Button.Group,{style:{fontSize:"1.75em",fontWeight:300}},r().createElement("span",null,c),r().createElement("span",{style:{marginLeft:"4px"}},u),r().createElement(n,null))},{displayName:"Title"}),Q=S(581),K=(0,u.observer)(function(n){var o=(0,e.useDesignable)().DesignableBar,a=(0,t.useContext)(w).onNavigate,i=c().t,l=(0,e.useLazy)(function(){return Q("imported_-1cc6dq7_component",S.e("72").then(S.bind(S,850)))},"Navigate");return r().createElement(j.Button,{onClick:function(){a(l.TODAY)}},i("Today"),r().createElement(o,null))},{displayName:"Today"}),ee=(0,u.observer)(function(n){var o=(0,e.useDesignable)().DesignableBar,a=(0,t.useContext)(w),i=a.views,c=a.view,l=a.onView,u=a.localizer.messages;return r().createElement("div",{className:"ant-btn-group"},r().createElement(j.Select,{popupMatchSelectWidth:!1,value:c,onChange:l},i.map(function(e){return r().createElement(j.Select.Option,{key:e,value:e},u[e])})),r().createElement(o,null))},{displayName:"ViewSelect"});V.ActionBar=e.ActionBar,V.Event=X,V.DeleteEvent=U,V.Title=J,V.Today=K,V.Nav=$,V.ViewSelect=ee,V.Designer=function(){var t=(0,e.useCollection)(),n=t.name,o=t.title,a=(0,e.useSchemaTemplate)();return r().createElement(e.GeneralSchemaDesigner,{schemaSettings:"blockSettings:calendar",template:a,title:o||n})};function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function er(e){return function(e){if(Array.isArray(e))return et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(r){var n,o=(0,e.useParsedFilter)({filterOption:null===(n=r.params)||void 0===n?void 0:n.filter}),a=o.filter,i=o.parseVariableLoading,c=(0,t.useMemo)(function(){var e,t,n=[],o=null===(e=r.fieldNames)||void 0===e?void 0:e.start,a=null===(t=r.fieldNames)||void 0===t?void 0:t.end;return Array.isArray(o)&&o.length>=2&&n.push(o[0]),Array.isArray(a)&&a.length>=2&&n.push(a[0]),n},[r.fieldNames]);return{params:(0,t.useMemo)(function(){var e,t;return e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,o,a;n=e,o=t,a=r[t],o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})}return e}({},r.params),t=(t={appends:er(c).concat(er(r.params.appends||[])),paginate:!1,filter:a},t),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e},[c,JSON.stringify(a),r.params]),parseVariableLoading:i}}var eo=(0,t.createContext)({});eo.displayName="CalendarBlockContext";var ea=function(t){var n,o=t.fieldNames,a=t.showLunar,i=t.defaultView,c=(0,u.useField)(),l=(0,e.useBlockRequestContext)(),d=l.resource,b=l.service;return r().createElement(eo.Provider,{value:{field:c,service:b,resource:d,fieldNames:o,showLunar:a,defaultView:i,fixedBlock:null==c?void 0:null===(n=c.decoratorProps)||void 0===n?void 0:n.fixedBlock}},t.children)},ei=(0,e.withDynamicSchemaProps)(function(t){var n,o,a,i=(n=t,(0,u.useFieldSchema)()["x-use-decorator-props"]?{params:n.params,parseVariableLoading:n.parseVariableLoading}:en(n)),c=i.params;if(i.parseVariableLoading)return null;return r().createElement("div",{key:t.fieldNames.colorFieldName},r().createElement(e.BlockProvider,(o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,o,a;n=e,o=t,a=r[t],o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})}return e}({name:"calendar"},t),a=(a={params:c},a),Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))}),o),r().createElement(ea,t)))},{displayName:"CalendarBlockProvider"}),ec=function(){return(0,t.useContext)(eo)},el=function(){return{getFontColor:function(e){return null},getBackgroundColor:function(e){return null}}},eu=function(){var r,n=ec(),o=(0,u.useField)(),a=(0,e.useApp)().pm.get("calendar"),i=(0,e.useCollection)().getField(n.fieldNames.colorFieldName),c=((a.getColorFieldInterface(null==i?void 0:i.interface)||{}).useGetColor||el)(i)||{},l=c.getFontColor,d=c.getBackgroundColor;return(0,t.useEffect)(function(){var e,t,r;!(null==n?void 0:null===(e=n.service)||void 0===e?void 0:e.loading)&&(o.componentProps.dataSource=null==n?void 0:null===(r=n.service)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.data)},[null==n?void 0:null===(r=n.service)||void 0===r?void 0:r.loading]),{fieldNames:n.fieldNames,showLunar:n.showLunar,defaultView:n.defaultView,fixedBlock:n.fixedBlock,getFontColor:l,getBackgroundColor:d}};function ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var es=new e.SchemaSettings({name:"blockSettings:calendar",items:[{name:"title",Component:e.SchemaSettingsBlockTitleItem},{name:"setTheBlockHeight",Component:e.SchemaSettingsBlockHeightItem},{name:"titleField",Component:e.SchemaSettingsSelectItem,useComponentProps:function(){var t,r=c().t,n=(0,u.useFieldSchema)(),o=(null==n?void 0:null===(t=n["x-decorator-props"])||void 0===t?void 0:t.fieldNames)||{},a=ec().service,i=(0,e.useCollectionManager_deprecated)().getCollectionFieldsOptions,l=(0,e.useCollection)().name,d=(0,e.useApp)().pm.get("calendar").titleFieldInterfaces,b=(0,u.useField)(),s=(0,e.useDesignable)().dn;return{title:r("Title field"),value:o.title,options:i(l,null,Object.keys(d)),onChange:function(e){var t,r=b.decoratorProps.fieldNames||{};r.title=e,b.decoratorProps.params=r,n["x-decorator-props"].params=r,n["x-decorator-props"].fieldNames=r,a.refresh(),s.emit("patch",{schema:(eb(t={},"x-uid",n["x-uid"]),eb(t,"x-decorator-props",b.decoratorProps),t)}),s.refresh()}}}},{name:"colorField",Component:e.SchemaSettingsSelectItem,useComponentProps:function(){var t,r,n=c().t,o=(0,u.useFieldSchema)(),a=(null==o?void 0:null===(r=o["x-decorator-props"])||void 0===r?void 0:r.fieldNames)||{},i=ec().service,l=(0,e.useCollectionManager_deprecated)().getCollectionFieldsOptions,d=(0,e.useCollection)().name,b=(0,u.useField)(),s=(0,e.useDesignable)().dn,f=l(d,null,Object.keys((0,e.useApp)().pm.get("calendar").colorFieldInterfaces));var p=[{label:n("Not selected"),value:""}].concat(function(e){if(Array.isArray(e))return ed(e)}(t=f)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return ed(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ed(e,t)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{title:n("Color field"),value:a.colorFieldName||"",options:p,onChange:function(e){var t,r,n=(null===(t=o["x-decorator-props"])||void 0===t?void 0:t.fieldNames)||{};n.colorFieldName=e,b.decoratorProps.fieldNames=n,o["x-decorator-props"].fieldNames=n,i.refresh(),s.emit("patch",{schema:(eb(r={},"x-uid",o["x-uid"]),eb(r,"x-decorator-props",o["x-decorator-props"]),r)}),s.refresh()}}}},{name:"defaultView",Component:e.SchemaSettingsSelectItem,useComponentProps:function(){var t=c().t,r=(0,u.useFieldSchema)(),n=(0,u.useField)(),o=(0,e.useDesignable)().dn;return{title:t("Default view"),value:n.decoratorProps.defaultView||"month",options:[{value:"month",label:t("Month")},{value:"week",label:t("Week")},{value:"day",label:t("Day")}],onChange:function(e){var t;n.decoratorProps.defaultView=e,r["x-decorator-props"].defaultView=e,o.emit("patch",{schema:(eb(t={},"x-uid",r["x-uid"]),eb(t,"x-decorator-props",n.decoratorProps),t)}),o.refresh()}}}},{name:"eventOpenMode",Component:e.SchemaSettingsSelectItem,useComponentProps:function(){var r,n,o,a=c().t,i=(0,u.useFieldSchema)();(0,u.useField)();var l=(0,e.useDesignable)().dn,d=(0,e.usePopupSettings)().isPopupVisibleControlledByURL,b=null===(n=Object.values(i.properties))||void 0===n?void 0:null===(r=n[0])||void 0===r?void 0:r.properties.event,s=(0,t.useMemo)(function(){return d()?[{label:a("Drawer"),value:"drawer"},{label:a("Dialog"),value:"modal"},{label:a("Page"),value:"page"}]:[{label:a("Drawer"),value:"drawer"},{label:a("Dialog"),value:"modal"}]},[a,d()]);return{title:a("Event open mode"),value:(null===(o=b["x-component-props"])||void 0===o?void 0:o.openMode)||"drawer",options:s,onChange:function(e){var t;b["x-component-props"]||(b["x-component-props"]={}),b["x-component-props"].openMode=e,l.emit("patch",{schema:(eb(t={},"x-uid",b["x-uid"]),eb(t,"x-component-props",b["x-component-props"]),t)}),l.refresh()}}}},{name:"showLunar",Component:function(){var t=(0,u.useField)(),n=c().t,o=(0,u.useFieldSchema)(),a=(0,e.useDesignable)().dn;return r().createElement(e.SchemaSettingsSwitchItem,{title:n("Show lunar"),checked:t.decoratorProps.showLunar,onChange:function(e){var r;t.decoratorProps.showLunar=e,o["x-decorator-props"].showLunar=e,a.emit("patch",{schema:(eb(r={},"x-uid",o["x-uid"]),eb(r,"x-decorator-props",t.decoratorProps),r)}),a.refresh()}})}},{name:"startDateField",Component:e.SchemaSettingsCascaderItem,useComponentProps:function(){var t,r=(0,e.useCollectionManager_deprecated)().getCollectionFieldsOptions,n=c().t,o=(0,u.useFieldSchema)(),a=(null==o?void 0:null===(t=o["x-decorator-props"])||void 0===t?void 0:t.fieldNames)||{},i=(0,u.useField)(),l=(0,e.useDesignable)().dn,d=ec().service,b=(0,e.useCollection)().name,s=(0,e.useApp)().pm.get("calendar").dateTimeFields;return{title:n("Start date field"),value:a.start,options:r(b,null,s,{association:["o2o","obo","oho","m2o"]}),onChange:function(e){var t,r=i.decoratorProps.fieldNames||{};r.start=e,i.decoratorProps.fieldNames=r,o["x-decorator-props"].fieldNames=r,d.refresh(),l.emit("patch",{schema:(eb(t={},"x-uid",o["x-uid"]),eb(t,"x-decorator-props",i.decoratorProps),t)}),l.refresh()}}}},{name:"endDateField",Component:e.SchemaSettingsCascaderItem,useComponentProps:function(){var t,r=c().t,n=(0,u.useFieldSchema)(),o=(0,u.useField)(),a=ec().service,i=(0,e.useCollectionManager_deprecated)().getCollectionFieldsOptions,l=(0,e.useDesignable)().dn,d=(0,e.useCollection)().name,b=(null==n?void 0:null===(t=n["x-decorator-props"])||void 0===t?void 0:t.fieldNames)||{},s=(0,e.useApp)().pm.get("calendar").dateTimeFields;return{title:r("End date field"),value:b.end,options:i(d,null,s,{association:["o2o","obo","oho","m2o"]}),onChange:function(e){var t,r=o.decoratorProps.fieldNames||{};r.end=e,o.decoratorProps.fieldNames=r,n["x-decorator-props"].fieldNames=r,a.refresh(),l.emit("patch",{schema:(eb(t={},"x-uid",n["x-uid"]),eb(t,"x-decorator-props",o.decoratorProps),t)}),l.refresh()}}}},{name:"dataScope",Component:e.SchemaSettingsDataScope,useComponentProps:function(){var t,r,n=(0,e.useCollection)().name,o=(0,u.useFieldSchema)(),a=(0,e.useFormBlockContext)().form,i=(0,u.useField)(),c=(0,e.useDesignable)().dn;return{collectionName:n,defaultFilter:(null==o?void 0:null===(r=o["x-decorator-props"])||void 0===r?void 0:null===(t=r.params)||void 0===t?void 0:t.filter)||{},form:a,onSubmit:function(t){var r,n=t.filter;n=(0,e.removeNullCondition)(n);var a=i.decoratorProps.params||{};a.filter=n,i.decoratorProps.params=a,o["x-decorator-props"].params=a,c.emit("patch",{schema:(eb(r={},"x-uid",o["x-uid"]),eb(r,"x-decorator-props",i.decoratorProps),r)})}}}},{name:"divider",type:"divider"},{name:"template",Component:e.SchemaSettingsTemplate,useComponentProps:function(){var t,r,n=(0,e.useCollection)().name,o=(0,u.useFieldSchema)(),a=(0,e.useBlockTemplateContext)().componentNamePrefix,i=(null==o?void 0:null===(t=o["x-decorator-props"])||void 0===t?void 0:t.resource)||(null==o?void 0:null===(r=o["x-decorator-props"])||void 0===r?void 0:r.association);return{componentName:"".concat(a,"Calendar"),collectionName:n,resourceName:i}}},{name:"divider2",type:"divider"},{name:"remove",type:"remove",componentProps:{removeParentsIfNoChildren:!0,breakRemoveOn:{"x-component":"Grid"}}}]});function ef(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ep(e){return(ep=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function em(e,t){return(em=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ev(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ev=function(){return!!e})()}i("Calendar collection"),i("Repeats"),i("Daily"),i("Weekly"),i("Monthly"),i("Yearly"),(0,e.getConfigurableProperties)("title","name","inherits","category","description","presetFields");var eh=function(t){function r(){var t,n,o,a;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),n=this,o=r,a=arguments,o=ep(o),ef(t=function(e,t){return t&&("object"===function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)||"function"==typeof t)?t:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(n,ev()?Reflect.construct(o,a||[],ep(n).constructor):o.apply(n,a)),"name","calendar"),ef(t,"title",i("Calendar collection")),ef(t,"order",2),ef(t,"color","orange"),ef(t,"default",{createdBy:!0,updatedBy:!0,createdAt:!0,updatedAt:!0,sortable:!0,fields:[{name:"cron",type:"string",uiSchema:{type:"string",title:i("Repeats"),"x-component":"CronSet","x-component-props":"allowClear",enum:[{label:i("Daily"),value:"0 0 0 * * ?"},{label:i("Weekly"),value:"every_week"},{label:i("Monthly"),value:"every_month"},{label:i("Yearly"),value:"every_year"}]},interface:"select"},{name:"exclude",type:"json"}]}),ef(t,"availableFieldInterfaces",{include:[]}),ef(t,"configurableProperties",(0,e.getConfigurableProperties)("title","name","inherits","category","description","presetFields")),t}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&em(e,t)}(r,t),r}(e.CollectionTemplate);function eg(t){var r,n=en(t),o=n.params,a=n.parseVariableLoading;return t.association&&(r=(0,e.useParentRecordCommon)(t.association)),{params:o,parentRecord:r,parseVariableLoading:a}}function ey(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,o,a;n=e,o=t,a=r[t],o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})}return e}var ex=function(t){var n,o,a=(0,e.useSchemaInitializerItem)();return r().createElement(e.InitializerWithSwitch,(n=ey({},a,t),o=(o={item:a,type:"x-action"},o),Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}),n))},ew={title:i("Configure actions"),icon:"SettingOutlined",style:{marginLeft:8},items:[{name:"today",title:i("Today"),Component:ex,schema:{title:i("Today"),"x-component":"CalendarV2.Today","x-action":"calendar:today","x-align":"left"}},{name:"turnPages",title:i("Turn pages"),Component:ex,schema:{title:i("Turn pages"),"x-component":"CalendarV2.Nav","x-action":"calendar:nav","x-align":"left"}},{name:"title",title:i("Title"),Component:ex,schema:{title:i("Title"),"x-component":"CalendarV2.Title","x-action":"calendar:title","x-align":"left"}},{name:"selectView",title:i("Select view"),Component:ex,schema:{title:i("Select view"),"x-component":"CalendarV2.ViewSelect","x-action":"calendar:viewSelect","x-align":"right","x-designer":"Action.Designer"}},{name:"filter",title:i("Filter"),Component:"FilterActionInitializer",schema:{"x-align":"right"}},{name:"addNew",title:i("Add new"),Component:"CreateActionInitializer",schema:{"x-align":"right","x-decorator":"ACLActionProvider","x-acl-action-props":{skipScopeCheck:!0}},useVisible:function(){return(0,e.useActionAvailable)("create")}},{name:"customRequest",title:'{{t("Custom request")}}',Component:"CustomRequestInitializer",schema:{"x-action":"customize:table:request:global"}}]},eS=new e.CompatibleSchemaInitializer(ey({name:"CalendarActionInitializers"},ew)),eC=new e.CompatibleSchemaInitializer(ey({name:"calendar:configureActions"},ew),eS),eO={name:"deleteEvent",title:i("Delete Event"),Component:function(t){var n,o;return r().createElement(e.ActionInitializerItem,(n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,o,a;n=e,o=t,a=r[t],o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})}return e}({},t),o=(o={schema:{title:'{{ t("Delete Event") }}',"x-action":"deleteEvent","x-acl-action":"destroy","x-component":"Action","x-designer":"Action.Designer","x-component-props":{icon:"DeleteOutlined"},properties:{modal:{"x-component":"CalendarV2.DeleteEvent"}}}},o),Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))}),n))},schema:{"x-component":"Action","x-decorator":"ACLActionProvider"},useVisible:function(){var r=(0,t.useContext)(R).allowDeleteEvent;return"calendar"===(0,e.useCollection_deprecated)().template&&r}},eP=new e.SchemaInitializer({title:i("Configure actions"),name:"CalendarFormActionInitializers",icon:"SettingOutlined",style:{marginLeft:8},items:[{type:"itemGroup",name:"enableActions",title:i("Enable actions"),children:[{name:"edit",title:i("Edit"),Component:"UpdateActionInitializer",schema:{"x-component":"Action","x-decorator":"ACLActionProvider","x-component-props":{type:"primary"}},useVisible:function(){return(0,e.useActionAvailable)("update")}},{name:"delete",title:i("Delete"),Component:"DestroyActionInitializer",schema:{"x-component":"Action","x-decorator":"ACLActionProvider"},useVisible:function(){return(0,e.useActionAvailable)("destroy")}},eO]},{name:"divider",type:"divider"},{type:"subMenu",name:"customize",title:i("Customize"),children:[{name:"popup",title:i("Popup"),Component:"CustomizeActionInitializer",schema:{type:"void",title:i("Popup"),"x-action":"customize:popup","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:popup","x-component":"Action","x-component-props":{openMode:"drawer"},properties:{drawer:{type:"void",title:i("Popup"),"x-component":"Action.Container","x-component-props":{className:"nb-action-popup"},properties:{tabs:{type:"void","x-component":"Tabs","x-component-props":{},"x-initializer":"popup:addTab",properties:{tab1:{type:"void",title:i("Details"),"x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{},properties:{grid:{type:"void","x-component":"Grid","x-initializer":"popup:common:addBlock",properties:{}}}}}}}}}}},{name:"updateRecord",title:i("Update record"),Component:"CustomizeActionInitializer",schema:{title:i("Update record"),"x-component":"Action","x-use-component-props":"useCustomizeUpdateActionProps","x-toolbar":"ActionSchemaToolbar","x-settings":"actionSettings:updateRecord","x-acl-action":"update","x-action":"customize:update","x-action-settings":{assignedValues:{},onSuccess:{manualClose:!0,redirecting:!1,successMessage:i("Updated successfully")},triggerWorkflows:[]}},useVisible:function(){return(0,e.useActionAvailable)("update")}},{name:"customRequest",title:i("Custom request"),Component:"CustomRequestInitializer"}]}]}),ek=S("632"),ej=S("875");function eD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eT=function(e){var t=e.collectionName,r=e.dataSource,n=e.fieldNames,o=e.association;return{type:"void","x-acl-action":"".concat(o||t,":list"),"x-decorator":"CalendarBlockProvider","x-use-decorator-props":"useCalendarBlockDecoratorProps","x-decorator-props":{collection:t,dataSource:r,association:o,action:"list",fieldNames:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){eD(e,t,r[t])})}return e}({id:"id"},n),params:{paginate:!1}},"x-toolbar":"BlockSchemaToolbar","x-settings":"blockSettings:calendar","x-component":"CardItem",properties:eD({},(0,ej.uid)(),{type:"void","x-component":"CalendarV2","x-use-component-props":"useCalendarBlockProps",properties:{toolBar:{type:"void","x-component":"CalendarV2.ActionBar","x-component-props":{style:{marginBottom:24}},"x-initializer":"calendar:configureActions"},event:{type:"void","x-component":"CalendarV2.Event","x-component-props":{openMode:"drawer"},properties:{drawer:{type:"void","x-component":"Action.Container","x-component-props":{className:"nb-action-popup"},title:i("View record"),properties:{tabs:{type:"void","x-component":"Tabs","x-component-props":{},"x-initializer":"popup:addTab","x-initializer-props":{gridInitializer:"popup:common:addBlock"},properties:{tab1:{type:"void",title:i("Details"),"x-component":"Tabs.TabPane","x-designer":"Tabs.Designer","x-component-props":{},properties:{grid:{type:"void","x-component":"Grid","x-initializer-props":{actionInitializers:"details:configureActions"},"x-initializer":"popup:common:addBlock"}}}}}}}}}}})}};function eE(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){r(e);return}c.done?t(l):Promise.resolve(l).then(n,o)}function eI(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){eE(a,n,o,i,c,"next",e)}function c(e){eE(a,n,o,i,c,"throw",e)}i(void 0)})}}function eA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,o,a;n=e,o=t,a=r[t],o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})}return e}function eF(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var eB=function(t){var n,o,a,i=t.filterCollections,c=t.onlyCurrentDataSource,u=t.hideSearch,d=t.createBlockSchema,b=t.showAssociationFields,s=(0,e.useSchemaInitializerItem)(),f=ez().createCalendarBlock;return r().createElement(e.DataBlockInitializer,(o=eA({},s),a=(a={componentType:"Calendar",icon:r().createElement(l.CalendarOutlined,null),onCreateBlockSchema:(n=eI(function(e){return eF(this,function(t){return d?[2,d(e)]:(f(e),[2])})}),function(e){return n.apply(this,arguments)}),onlyCurrentDataSource:c,hideSearch:u,filter:i,showAssociationFields:b},a),Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))}),o))},ez=function(){var n,o=(0,e.useSchemaInitializer)().insert,a=c().t,i=(0,e.useCollectionManager_deprecated)(),l=i.getCollectionField,d=i.getCollectionFieldsOptions,b=(0,t.useContext)(u.SchemaOptionsContext),s=(0,e.useGlobalTheme)().theme,f=(0,e.useApp)().pm.get("calendar"),p=f.titleFieldInterfaces,m=f.dateTimeFieldInterfaces;return{createCalendarBlock:(n=eI(function(t){var n,i,c,u;return eF(this,function(f){switch(f.label){case 0:return i=d((n=t.item).name,null,Object.keys(p).map(function(e){return e||e}),{dataSource:n.dataSource}),c=d(n.name,null,m,{association:["o2o","obo","oho","m2o"],dataSource:n.dataSource}),[4,(0,e.FormDialog)(a("Create calendar block"),function(){return r().createElement(e.SchemaComponentOptions,{scope:b.scope,components:eA({},b.components)},r().createElement(ek.FormLayout,{layout:"vertical"},r().createElement(e.SchemaComponent,{schema:{properties:{title:{title:a("Title field"),enum:i,required:!0,"x-component":"Select","x-decorator":"FormItem"},start:{title:a("Start date field"),enum:c,required:!0,default:l("".concat(n.name,".createdAt"))?"createdAt":null,"x-component":"Cascader","x-decorator":"FormItem"},end:{title:a("End date field"),enum:c,"x-component":"Cascader","x-decorator":"FormItem"}}}})))},s).open({initialValues:{}})];case 1:return u=f.sent(),o(eT({collectionName:n.name,dataSource:n.dataSource,fieldNames:eA({},u)})),[2]}})}),function(e){return n.apply(this,arguments)})}};function eN(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){r(e);return}c.done?t(l):Promise.resolve(l).then(n,o)}function eR(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){eN(a,n,o,i,c,"next",e)}function c(e){eN(a,n,o,i,c,"throw",e)}i(void 0)})}}function eM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n,o,a;n=e,o=t,a=r[t],o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a})}return e}function e_(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}var eL=function(){var n,o,a,i=(0,e.useSchemaInitializerItem)();i.onCreateBlockSchema,i.componentType,i.createBlockSchema;var d=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++){if(r=a[n],!(t.indexOf(r)>=0))Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}}return o}(i,["onCreateBlockSchema","componentType","createBlockSchema"]),b=(0,e.useSchemaInitializer)().insert,s=(0,e.useSchemaTemplateManager)().getTemplateSchemaByMode,f=c().t,p=(0,t.useContext)(u.SchemaOptionsContext),m=(0,e.useCollectionManager_deprecated)().getCollection,v=i.field,h=m(v.target),g="".concat(v.collectionName,".").concat(v.name),y=(0,e.useGlobalTheme)().theme;return r().createElement(e.SchemaInitializerItem,(o=eM({icon:r().createElement(l.TableOutlined,null)},d),a=(a={onClick:(n=eR(function(t){var n,o,a,i,c,l,u,d;return e_(this,function(m){switch(m.label){case 0:if(!(n=t.item).template)return[3,2];return[4,s(n)];case 1:return b(m.sent()),[3,4];case 2:return l=null==h?void 0:null===(a=h.fields)||void 0===a?void 0:null===(o=a.filter(function(e){return"string"===e.type}))||void 0===o?void 0:o.map(function(e){var t;return{label:null==e?void 0:null===(t=e.uiSchema)||void 0===t?void 0:t.title,value:e.name}}),u=null==h?void 0:null===(c=h.fields)||void 0===c?void 0:null===(i=c.filter(function(e){return"date"===e.type}))||void 0===i?void 0:i.map(function(e){var t;return{label:null==e?void 0:null===(t=e.uiSchema)||void 0===t?void 0:t.title,value:e.name}}),[4,(0,e.FormDialog)(f("Create calendar block"),function(){return r().createElement(e.SchemaComponentOptions,{scope:p.scope,components:eM({},p.components)},r().createElement(ek.FormLayout,{layout:"vertical"},r().createElement(e.SchemaComponent,{schema:{properties:{title:{title:f("Title field"),enum:l,required:!0,"x-component":"Select","x-decorator":"FormItem"},start:{title:f("Start date field"),enum:u,required:!0,default:"createdAt","x-component":"Select","x-decorator":"FormItem"},end:{title:f("End date field"),enum:u,"x-component":"Select","x-decorator":"FormItem"}}}})))},y).open({initialValues:{}})];case 3:d=m.sent(),b(eT({association:g,dataSource:n.dataSource,fieldNames:eM({},d)})),m.label=4;case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),items:(0,e.useRecordCollectionDataSourceItems)("Calendar",i,v.target,g)},a),Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))}),o))};function eV(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){r(e);return}c.done?t(l):Promise.resolve(l).then(n,o)}function eq(e,t,r){return(eq=eX()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&eH(o,r.prototype),o}).apply(null,arguments)}function eY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eW(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eG(e){return(eG=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eH(e,t){return(eH=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eU(e){var t="function"==typeof Map?new Map:void 0;return(eU=function(e){var r;if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return eq(e,arguments,eG(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),eH(n,e)})(e)}function eX(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(eX=function(){return!!e})()}var eZ=function(e){var t=e.value;return r().createElement("span",{"aria-label":"event-title"},t||"N/A")},e$=function(t){var r=(0,e.useToken)().token;return{loading:!1,getFontColor:function(e){var n=t.uiSchema.enum.find(function(t){return t.value===e});return n?r["".concat(n.color,"7")]:null},getBackgroundColor:function(e){var n=t.uiSchema.enum.find(function(t){return t.value===e});return n?r["".concat(n.color,"1")]:null}}},eJ=function(n){var o,a,l;function d(){var e,t,r,n;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,d),t=this,r=d,n=arguments,r=eG(r),eW(e=function(e,t){return t&&("object"===function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)||"function"==typeof t)?t:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(t,eX()?Reflect.construct(r,n||[],eG(t).constructor):r.apply(t,n)),"titleFieldInterfaces",{input:{TitleRenderer:eZ},select:{TitleRenderer:eZ},phone:{TitleRenderer:eZ},email:{TitleRenderer:eZ},radioGroup:{TitleRenderer:eZ}}),eW(e,"colorFieldInterfaces",{select:{useGetColor:e$},radioGroup:{useGetColor:e$}}),eW(e,"dateTimeFieldInterfaces",["date","datetime","dateOnly","datetimeNoTz","unixTimestamp","createdAt","updatedAt"]),e}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eH(e,t)}(d,n),o=d,a=[{key:"registerTitleFieldInterface",value:function(e,t){this.titleFieldInterfaces[e]=t}},{key:"getTitleFieldInterface",value:function(e){return e?this.titleFieldInterfaces[e]:this.titleFieldInterfaces}},{key:"registerDateTimeFieldInterface",value:function(e){if(Array.isArray(e)){var t=this.dateTimeFieldInterfaces.concat(e);this.dateTimeFieldInterfaces=t}else this.dateTimeFieldInterfaces.push(e)}},{key:"registerColorFieldInterface",value:function(e,t){this.colorFieldInterfaces[e]=t}},{key:"getColorFieldInterface",value:function(e){return this.colorFieldInterfaces[e]}},{key:"load",value:function(){var n,o=this;return(n=function(){return function(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,function(n){return o.app.dataSourceManager.addCollectionTemplates([eh]),o.app.schemaInitializerManager.addItem("page:addBlock","dataBlocks.calendar",{title:i("Calendar"),Component:"CalendarBlockInitializer"}),o.app.schemaInitializerManager.addItem("mobile:addBlock","dataBlocks.calendar",{title:i("Calendar"),Component:"CalendarBlockInitializer"}),o.app.schemaInitializerManager.addItem("popup:common:addBlock","dataBlocks.calendar",{title:i("Calendar"),Component:"CalendarBlockInitializer",useComponentProps:function(){var n,o,a,i,l,d,b=(n=(0,e.useSchemaInitializer)().insert,o=(0,e.useCollectionManager_deprecated)().getCollection,a=c().t,i=(0,t.useContext)(u.SchemaOptionsContext),l=(0,e.useGlobalTheme)().theme,{createAssociationCalendarBlock:(d=eR(function(t){var c,u,d,b,s,f,p,m,v,h;return e_(this,function(g){switch(g.label){case 0:return m=null==(p=o((f=(c=t.item).associationField).target))?void 0:null===(d=p.fields)||void 0===d?void 0:null===(u=d.filter(function(e){return"string"===e.type}))||void 0===u?void 0:u.map(function(e){var t;return{label:null==e?void 0:null===(t=e.uiSchema)||void 0===t?void 0:t.title,value:e.name}}),v=null==p?void 0:null===(s=p.fields)||void 0===s?void 0:null===(b=s.filter(function(e){return"date"===e.type}))||void 0===b?void 0:b.map(function(e){var t;return{label:null==e?void 0:null===(t=e.uiSchema)||void 0===t?void 0:t.title,value:e.name}}),[4,(0,e.FormDialog)(a("Create calendar block"),function(){return r().createElement(e.SchemaComponentOptions,{scope:i.scope,components:eM({},i.components)},r().createElement(ek.FormLayout,{layout:"vertical"},r().createElement(e.SchemaComponent,{schema:{properties:{title:{title:a("Title field"),enum:m,required:!0,"x-component":"Select","x-decorator":"FormItem"},start:{title:a("Start date field"),enum:v,required:!0,default:"createdAt","x-component":"Select","x-decorator":"FormItem"},end:{title:a("End date field"),enum:v,"x-component":"Select","x-decorator":"FormItem"}}}})))},l).open({initialValues:{}})];case 1:return h=g.sent(),n(eT({association:"".concat(f.collectionName,".").concat(f.name),dataSource:c.dataSource,fieldNames:eM({},h)})),[2]}})}),function(e){return d.apply(this,arguments)})}).createAssociationCalendarBlock,s=ez().createCalendarBlock;return{onlyCurrentDataSource:!0,filterCollections:function(e){var t=e.associationField;return!!t&&["hasMany","belongsToMany"].includes(t.type)},createBlockSchema:function(e){var t=e.item;if(e.fromOthersInPopup)return s({item:t});b({item:t})},showAssociationFields:!0,hideSearch:!0}}}),o.app.addComponents({CalendarBlockProvider:ei,CalendarBlockInitializer:eB,RecordAssociationCalendarBlockInitializer:eL,CalendarV2:V}),o.app.addScopes({useCalendarBlockProps:eu,useCalendarBlockDecoratorProps:eg}),o.schemaSettingsManager.add(es),o.app.schemaInitializerManager.add(eS),o.app.schemaInitializerManager.add(eC),o.app.schemaInitializerManager.add(eP),o.app.schemaInitializerManager.get("details:configureActions").add("enableActions.deleteEvent",eO),[2]})},function(){var e=this,t=arguments;return new Promise(function(r,o){var a=n.apply(e,t);function i(e){eV(a,r,o,i,c,"next",e)}function c(e){eV(a,r,o,i,c,"throw",e)}i(void 0)})})()}}],eY(o.prototype,a),d}(eU(e.Plugin)),eQ=eJ}(),C}()});