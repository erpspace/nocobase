/**
 * This file is part of the NocoBase (R) project.
 * Copyright (c) 2020-2024 NocoBase Co., Ltd.
 * Authors: NocoBase Team.
 *
 * This project is dual-licensed under AGPL-3.0 and NocoBase Commercial License.
 * For more information, please refer to: https://www.nocobase.com/agreement.
 */

!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react-i18next"),require("@emotion/css"),require("@formily/shared"),require("@formily/core"),require("@nocobase/client"),require("antd"),require("@ant-design/icons"),require("@formily/react"),require("react-router-dom"),require("react-router"),require("@formily/antd-v5"),require("react")):"function"==typeof define&&define.amd?define("@nocobase/plugin-public-forms",["react-i18next","@emotion/css","@formily/shared","@formily/core","@nocobase/client","antd","@ant-design/icons","@formily/react","react-router-dom","react-router","@formily/antd-v5","react"],t):"object"==typeof exports?exports["@nocobase/plugin-public-forms"]=t(require("react-i18next"),require("@emotion/css"),require("@formily/shared"),require("@formily/core"),require("@nocobase/client"),require("antd"),require("@ant-design/icons"),require("@formily/react"),require("react-router-dom"),require("react-router"),require("@formily/antd-v5"),require("react")):e["@nocobase/plugin-public-forms"]=t(e["react-i18next"],e["@emotion/css"],e["@formily/shared"],e["@formily/core"],e["@nocobase/client"],e.antd,e["@ant-design/icons"],e["@formily/react"],e["react-router-dom"],e["react-router"],e["@formily/antd-v5"],e.react)}(self,function(e,t,r,n,o,i,u,c,a,l,s,f){return function(){var p,m,d,b,y,h,g,v,x={7712:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w},PluginPublicFormsClient:function(){return S}});var n=r("3772"),o=function(e){return{type:"void","x-toolbar":"BlockSchemaToolbar","x-toolbar-props":{draggable:!1},"x-settings":"blockSettings:publicForm","x-component":"CardItem","x-decorator":"FormBlockProvider","x-decorator-props":{collection:e.collection,dataSource:e.dataSource,type:"publicForm"},"x-use-decorator-props":"useCreateFormBlockDecoratorProps",properties:{a69vmspkv8h:{type:"void","x-component":"FormV2","x-use-component-props":"useCreateFormBlockProps",properties:{grid:{type:"void","x-component":"Grid","x-initializer":"form:configureFields"},l9xfwp6cfh1:{type:"void","x-component":"ActionBar","x-initializer":"createForm:configureActions","x-component-props":{layout:"one-column"}}}}}}},i=r("3505"),u=r("3238"),c=new n.SchemaSettings({name:"blockSettings:publicForm",items:[{name:"title",Component:n.SchemaSettingsBlockTitleItem},{name:"linkageRules",Component:n.SchemaSettingsLinkageRules,useComponentProps:function(){return{collectionName:(0,n.useCollection)().name}}}]}),a=new n.SchemaSettings({name:"blockSettings:publicMarkdown",items:[{name:"EditMarkdown",type:"item",useComponentProps:function(){var e=(0,i.useField)();return{title:(0,(0,u.useTranslation)().t)("Edit markdown"),onClick:function(){e.editable=!0}}}},{name:"setBlockTemplate",Component:n.SchemaSettingsRenderEngine}]}),l=r("6903"),s=r(3581);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t,r,n,o,i,u){try{var c=e[i](u),a=c.value}catch(e){r(e);return}c.done?t(a):Promise.resolve(a).then(n,o)}function m(e,t,r){return(m=g()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&y(o,r.prototype),o}).apply(null,arguments)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t="function"==typeof Map?new Map:void 0;return(h=function(e){var r;if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return m(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,e)})(e)}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(g=function(){return!!e})()}var v=(0,n.lazy)(function(){return s("imported_1fpftdr_component",Promise.all([r.e("112"),r.e("978"),r.e("592")]).then(r.bind(r,8097)))},"AdminPublicFormList").AdminPublicFormList,x=(0,n.lazy)(function(){return s("imported_7lbes3_component",Promise.all([r.e("112"),r.e("978"),r.e("300")]).then(r.bind(r,7402)))},"AdminPublicFormPage").AdminPublicFormPage,_=(0,n.lazy)(function(){return s("imported_17kipkb_component",Promise.all([r.e("112"),r.e("978")]).then(r.bind(r,5223)))},"PublicFormPage").PublicFormPage,S=function(e){var t,r,n;function i(){var e,t,r,n,o,u,c;return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i),t=this,r=i,n=arguments,r=b(r),o=e=function(e,t){return t&&("object"===function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}(t)||"function"==typeof t)?t:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(t,g()?Reflect.construct(r,n||[],b(t).constructor):r.apply(t,n)),u="formTypes",c=new Map,u in o?Object.defineProperty(o,u,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[u]=c,e}return!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(i,e),t=i,r=[{key:"registerFormType",value:function(e,t){this.formTypes.set(e,t)}},{key:"getFormSchemaByType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form";return this.formTypes.get(e)?this.formTypes.get(e).uiSchema:function(){return null}}},{key:"getFormTypeOptions",value:function(){var e=[],t=!0,r=!1,n=void 0;try{for(var o,i=this.formTypes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u,c,a=(u=o.value,c=2,function(e){if(Array.isArray(e))return e}(u)||function(e,t){var r,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],u=!0,c=!1;try{for(o=o.call(e);!(u=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){c=!0,n=e}finally{try{!u&&null!=o.return&&o.return()}finally{if(c)throw n}}return i}}(u,2)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}(u,c)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[0],s=a[1].label;e.push({value:l,label:s})}}catch(e){r=!0,n=e}finally{try{!t&&null!=i.return&&i.return()}finally{if(r)throw n}}return e}},{key:"load",value:function(){var e,t=this;return(e=function(){return function(e,t){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,function(e){return t.app.schemaSettingsManager.add(c),t.app.schemaSettingsManager.add(a),t.registerFormType("form",{label:"Form",uiSchema:o}),t.app.router.add("public-forms",{path:"/public-forms/:name",Component:_}),t.app.pluginSettingsManager.add("public-forms",{title:'{{t("Public forms", { ns: "'.concat(l.A7,'" })}}'),icon:"TableOutlined",Component:v}),t.app.pluginSettingsManager.add("public-forms/:name",{title:!1,pluginKey:"public-forms",isTopLevel:!1,Component:x}),[2]})},function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function u(e){p(i,n,o,u,c,"next",e)}function c(e){p(i,n,o,u,c,"throw",e)}u(void 0)})})()}}],d(t.prototype,r),i}(h(n.Plugin)),w=S},6903:function(e,t,r){"use strict";r.d(t,{A7:function(){return u},NY:function(){return a},NT:function(){return c}});var n=r("3772"),o=r("3238"),i=JSON.parse('{"u2":"@nocobase/plugin-public-forms"}'),u="public-forms";function c(){var e=(0,n.useApp)();return function(t){return e.i18n.t(t,{ns:[i.u2,"client"]})}}function a(){return(0,o.useTranslation)([u,"client"],{nsMode:"fallback"})}},3581:function(e){e.exports=function(e,t){return"undefined"!=typeof __deoptimization_sideEffect__&&__deoptimization_sideEffect__(e,t),t}},482:function(e){"use strict";e.exports=u},4964:function(e){"use strict";e.exports=t},4632:function(e){"use strict";e.exports=s},8563:function(e){"use strict";e.exports=n},3505:function(e){"use strict";e.exports=c},8875:function(e){"use strict";e.exports=r},3772:function(e){"use strict";e.exports=o},2721:function(e){"use strict";e.exports=i},8156:function(e){"use strict";e.exports=f},3238:function(t){"use strict";t.exports=e},5432:function(e){"use strict";e.exports=l},6128:function(e){"use strict";e.exports=a}},_={};function S(e){var t=_[e];if(void 0!==t)return t.exports;var r=_[e]={id:e,exports:{}};return x[e].call(r.exports,r,r.exports,S),r.exports}return S.m=x,S.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return S.d(t,{a:t}),t},m=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},S.t=function(e,t){if(1&t&&(e=this(e)),8&t||"object"==typeof e&&e&&(4&t&&e.__esModule||16&t&&"function"==typeof e.then))return e;var r=Object.create(null);S.r(r);var n={};p=p||[null,m({}),m([]),m(m)];for(var o=2&t&&e;"object"==typeof o&&!~p.indexOf(o);o=m(o))Object.getOwnPropertyNames(o).forEach(function(t){n[t]=function(){return e[t]}});return n.default=function(){return e},S.d(r,n),r},S.d=function(e,t){for(var r in t)S.o(t,r)&&!S.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},S.f={},S.e=function(e){return Promise.all(Object.keys(S.f).reduce(function(t,r){return S.f[r](e,t),t},[]))},S.u=function(e){return""+({112:"cda99c1ab9bad776",300:"dc70debad818e00b",592:"700c91655d08750c",978:"ce22cf034d6d7bcf"})[e]+".js"},S.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),S.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d={},b="@nocobase/plugin-public-forms:",S.l=function(e,t,r,n){if(d[e]){d[e].push(t);return}if(void 0!==r){for(var o,i,u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var a=u[c];if(a.getAttribute("src")==e||a.getAttribute("data-webpack")==b+r){o=a;break}}}!o&&(i=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,S.nc&&o.setAttribute("nonce",S.nc),o.setAttribute("data-webpack",b+r),o.src=e),d[e]=[t];var l=function(t,r){o.onerror=o.onload=null,clearTimeout(s);var n=d[e];if(delete d[e],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach(function(e){return e(r)}),t)return t(r)},s=setTimeout(l.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=l.bind(null,o.onerror),o.onload=l.bind(null,o.onload),i&&document.head.appendChild(o)},S.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},S.nc=void 0,S.p=(!(y=window.__nocobase_public_path__||"/").endsWith("/")&&(y+="/"),y+"static/plugins/@nocobase/plugin-public-forms/dist/client/"),h={909:0},S.f.j=function(e,t){var r=S.o(h,e)?h[e]:void 0;if(0!==r){if(r)t.push(r[2]);else{var n=new Promise(function(t,n){r=h[e]=[t,n]});t.push(r[2]=n);var o=S.p+S.u(e),i=Error();S.l(o,function(t){if(S.o(h,e)&&(0!==(r=h[e])&&(h[e]=void 0),r)){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;i.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",i.name="ChunkLoadError",i.type=n,i.request=o,r[1](i)}},"chunk-"+e,e)}}},g=function(e,t){var r=t[0],n=t[1],o=t[2],i,u,c=0;if(r.some(function(e){return 0!==h[e]})){for(i in n)S.o(n,i)&&(S.m[i]=n[i]);o&&o(S)}for(e&&e(t);c<r.length;c++)u=r[c],S.o(h,u)&&h[u]&&h[u][0](),h[u]=0},(v=self.webpackChunk_nocobase_plugin_public_forms=self.webpackChunk_nocobase_plugin_public_forms||[]).forEach(g.bind(null,0)),v.push=g.bind(null,v.push.bind(v)),S("7712")}()});