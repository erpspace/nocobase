/**
 * This file is part of the NocoBase (R) project.
 * Copyright (c) 2020-2024 NocoBase Co., Ltd.
 * Authors: NocoBase Team.
 *
 * This project is dual-licensed under AGPL-3.0 and NocoBase Commercial License.
 * For more information, please refer to: https://www.nocobase.com/agreement.
 */

!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("@nocobase/plugin-notification-manager/client"),require("@ant-design/icons"),require("react-i18next"),require("@nocobase/client"),require("react"),require("@nocobase/plugin-workflow/client")):"function"==typeof define&&define.amd?define("@nocobase/plugin-workflow-notification",["@nocobase/plugin-notification-manager/client","@ant-design/icons","react-i18next","@nocobase/client","react","@nocobase/plugin-workflow/client"],n):"object"==typeof exports?exports["@nocobase/plugin-workflow-notification"]=n(require("@nocobase/plugin-notification-manager/client"),require("@ant-design/icons"),require("react-i18next"),require("@nocobase/client"),require("react"),require("@nocobase/plugin-workflow/client")):t["@nocobase/plugin-workflow-notification"]=n(t["@nocobase/plugin-notification-manager/client"],t["@ant-design/icons"],t["react-i18next"],t["@nocobase/client"],t.react,t["@nocobase/plugin-workflow/client"])}(self,function(t,n,e,o,r,i){return function(){"use strict";var u={482:function(t){t.exports=n},772:function(t){t.exports=o},786:function(n){n.exports=t},433:function(t){t.exports=i},156:function(t){t.exports=r},238:function(t){t.exports=e}},c={};function a(t){var n=c[t];if(void 0!==n)return n.exports;var e=c[t]={exports:{}};return u[t](e,e.exports,a),e.exports}a.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(n,{a:n}),n},a.d=function(t,n){for(var e in n)a.o(n,e)&&!a.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},a.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var f={};a.r(f),a.d(f,{default:function(){return M}});var l=a("772"),s=a("156"),p=a.n(s),b=a("482"),y=a("433"),d=a("786");a("238");var v="workflow-notification";function h(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,n){return(w=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function m(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(m=function(){return!!t})()}var O=function(){var t=(0,y.useWorkflowVariableOptions)();return p().createElement(d.MessageConfigForm,{variableOptions:t})},x=function(t){function n(){var t,e,o,r;return!function(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}(this,n),e=this,o=n,r=arguments,o=g(o),h(t=function(t,n){return n&&("object"===function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}(n)||"function"==typeof n)?n:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(e,m()?Reflect.construct(o,r||[],g(e).constructor):o.apply(e,r)),"title",'{{t("Notification", { ns: "'.concat(v,'" })}}')),h(t,"type","notification"),h(t,"group","extended"),h(t,"description",'{{t("Send notification. You can use the variables in the upstream nodes as content and ohter config.", { ns: "'.concat(v,'" })}}')),h(t,"icon",p().createElement(b.NotificationOutlined,null)),h(t,"fieldset",{message:{type:"void","x-component":"LocalProvider"}}),h(t,"components",{LocalProvider:O}),t}return!function(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&w(t,n)}(n,t),n}(y.Instruction);function j(t,n,e,o,r,i,u){try{var c=t[i](u),a=c.value}catch(t){e(t);return}c.done?n(a):Promise.resolve(a).then(o,r)}function _(t){return function(){var n=this,e=arguments;return new Promise(function(o,r){var i=t.apply(n,e);function u(t){j(i,o,r,u,c,"next",t)}function c(t){j(i,o,r,u,c,"throw",t)}u(void 0)})}}function P(t,n,e){return(P=T()?Reflect.construct:function(t,n,e){var o=[null];o.push.apply(o,n);var r=new(Function.bind.apply(t,o));return e&&q(r,e.prototype),r}).apply(null,arguments)}function k(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t,n){return(q=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function E(t){var n="function"==typeof Map?new Map:void 0;return(E=function(t){var e;if(null===t||(e=t,-1===Function.toString.call(e).indexOf("[native code]")))return t;if("function"!=typeof t)throw TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,o)}function o(){return P(t,arguments,S(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),q(o,t)})(t)}function T(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(T=function(){return!!t})()}function R(t,n){var e,o,r,i,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw TypeError("Generator is already executing.");for(;u;)try{if(e=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,o=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(r=(r=u.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){u.label=i[1];break}if(6===i[0]&&u.label<r[1]){u.label=r[1],r=i;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(i);break}r[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(t,u)}catch(t){i=[6,t],o=0}finally{e=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var M=function(t){var n,e,o;function r(){var t,n,e;return!function(t,n){if(!(t instanceof n))throw TypeError("Cannot call a class as a function")}(this,r),t=this,n=r,e=arguments,n=S(n),function(t,n){return n&&("object"===function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}(n)||"function"==typeof n)?n:function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,T()?Reflect.construct(n,e||[],S(t).constructor):n.apply(t,e))}return!function(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&q(t,n)}(r,t),n=r,e=[{key:"afterAdd",value:function(){return _(function(){return R(this,function(t){return[2]})})()}},{key:"beforeLoad",value:function(){return _(function(){return R(this,function(t){return[2]})})()}},{key:"load",value:function(){var t=this;return _(function(){return R(this,function(n){return t.app.pm.get("workflow").registerInstruction("notification",x),[2]})})()}}],k(n.prototype,e),r}(E(l.Plugin));return f}()});